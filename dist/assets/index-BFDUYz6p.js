var Tp=Object.defineProperty;var Ap=(t,e,n)=>e in t?Tp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var dn=(t,e,n)=>Ap(t,typeof e!="symbol"?e+"":e,n);function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in t)){const u=Object.getOwnPropertyDescriptor(s,o);u&&Object.defineProperty(t,o,u.get?u:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:t,type:s,key:d,ref:o!==void 0?o:null,props:u}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function A(pe){return pe===null||typeof pe!="object"?null:(pe=T&&pe[T]||pe["@@iterator"],typeof pe=="function"?pe:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,D={};function H(pe,ve,Oe){this.props=pe,this.context=ve,this.refs=D,this.updater=Oe||C}H.prototype.isReactComponent={},H.prototype.setState=function(pe,ve){if(typeof pe!="object"&&typeof pe!="function"&&pe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,pe,ve,"setState")},H.prototype.forceUpdate=function(pe){this.updater.enqueueForceUpdate(this,pe,"forceUpdate")};function ne(){}ne.prototype=H.prototype;function Y(pe,ve,Oe){this.props=pe,this.context=ve,this.refs=D,this.updater=Oe||C}var U=Y.prototype=new ne;U.constructor=Y,j(U,H.prototype),U.isPureReactComponent=!0;var ee=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},ie=Object.prototype.hasOwnProperty;function se(pe,ve,Oe,Te,Le,Me){return Oe=Me.ref,{$$typeof:t,type:pe,key:ve,ref:Oe!==void 0?Oe:null,props:Me}}function K(pe,ve){return se(pe.type,ve,void 0,void 0,void 0,pe.props)}function te(pe){return typeof pe=="object"&&pe!==null&&pe.$$typeof===t}function re(pe){var ve={"=":"=0",":":"=2"};return"$"+pe.replace(/[=:]/g,function(Oe){return ve[Oe]})}var ce=/\/+/g;function le(pe,ve){return typeof pe=="object"&&pe!==null&&pe.key!=null?re(""+pe.key):ve.toString(36)}function ue(){}function _e(pe){switch(pe.status){case"fulfilled":return pe.value;case"rejected":throw pe.reason;default:switch(typeof pe.status=="string"?pe.then(ue,ue):(pe.status="pending",pe.then(function(ve){pe.status==="pending"&&(pe.status="fulfilled",pe.value=ve)},function(ve){pe.status==="pending"&&(pe.status="rejected",pe.reason=ve)})),pe.status){case"fulfilled":return pe.value;case"rejected":throw pe.reason}}throw pe}function Ee(pe,ve,Oe,Te,Le){var Me=typeof pe;(Me==="undefined"||Me==="boolean")&&(pe=null);var Ce=!1;if(pe===null)Ce=!0;else switch(Me){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(pe.$$typeof){case t:case e:Ce=!0;break;case w:return Ce=pe._init,Ee(Ce(pe._payload),ve,Oe,Te,Le)}}if(Ce)return Le=Le(pe),Ce=Te===""?"."+le(pe,0):Te,ee(Le)?(Oe="",Ce!=null&&(Oe=Ce.replace(ce,"$&/")+"/"),Ee(Le,ve,Oe,"",function($e){return $e})):Le!=null&&(te(Le)&&(Le=K(Le,Oe+(Le.key==null||pe&&pe.key===Le.key?"":(""+Le.key).replace(ce,"$&/")+"/")+Ce)),ve.push(Le)),1;Ce=0;var be=Te===""?".":Te+":";if(ee(pe))for(var Ve=0;Ve<pe.length;Ve++)Te=pe[Ve],Me=be+le(Te,Ve),Ce+=Ee(Te,ve,Oe,Me,Le);else if(Ve=A(pe),typeof Ve=="function")for(pe=Ve.call(pe),Ve=0;!(Te=pe.next()).done;)Te=Te.value,Me=be+le(Te,Ve++),Ce+=Ee(Te,ve,Oe,Me,Le);else if(Me==="object"){if(typeof pe.then=="function")return Ee(_e(pe),ve,Oe,Te,Le);throw ve=String(pe),Error("Objects are not valid as a React child (found: "+(ve==="[object Object]"?"object with keys {"+Object.keys(pe).join(", ")+"}":ve)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function we(pe,ve,Oe){if(pe==null)return pe;var Te=[],Le=0;return Ee(pe,Te,"","",function(Me){return ve.call(Oe,Me,Le++)}),Te}function de(pe){if(pe._status===-1){var ve=pe._result;ve=ve(),ve.then(function(Oe){(pe._status===0||pe._status===-1)&&(pe._status=1,pe._result=Oe)},function(Oe){(pe._status===0||pe._status===-1)&&(pe._status=2,pe._result=Oe)}),pe._status===-1&&(pe._status=0,pe._result=ve)}if(pe._status===1)return pe._result.default;throw pe._result}var me=typeof reportError=="function"?reportError:function(pe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ve=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof pe=="object"&&pe!==null&&typeof pe.message=="string"?String(pe.message):String(pe),error:pe});if(!window.dispatchEvent(ve))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",pe);return}console.error(pe)};function xe(){}return react_production.Children={map:we,forEach:function(pe,ve,Oe){we(pe,function(){ve.apply(this,arguments)},Oe)},count:function(pe){var ve=0;return we(pe,function(){ve++}),ve},toArray:function(pe){return we(pe,function(ve){return ve})||[]},only:function(pe){if(!te(pe))throw Error("React.Children.only expected to receive a single React element child.");return pe}},react_production.Component=H,react_production.Fragment=n,react_production.Profiler=o,react_production.PureComponent=Y,react_production.StrictMode=s,react_production.Suspense=y,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(pe){return J.H.useMemoCache(pe)}},react_production.cache=function(pe){return function(){return pe.apply(null,arguments)}},react_production.cloneElement=function(pe,ve,Oe){if(pe==null)throw Error("The argument must be a React element, but you passed "+pe+".");var Te=j({},pe.props),Le=pe.key,Me=void 0;if(ve!=null)for(Ce in ve.ref!==void 0&&(Me=void 0),ve.key!==void 0&&(Le=""+ve.key),ve)!ie.call(ve,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&ve.ref===void 0||(Te[Ce]=ve[Ce]);var Ce=arguments.length-2;if(Ce===1)Te.children=Oe;else if(1<Ce){for(var be=Array(Ce),Ve=0;Ve<Ce;Ve++)be[Ve]=arguments[Ve+2];Te.children=be}return se(pe.type,Le,void 0,void 0,Me,Te)},react_production.createContext=function(pe){return pe={$$typeof:d,_currentValue:pe,_currentValue2:pe,_threadCount:0,Provider:null,Consumer:null},pe.Provider=pe,pe.Consumer={$$typeof:u,_context:pe},pe},react_production.createElement=function(pe,ve,Oe){var Te,Le={},Me=null;if(ve!=null)for(Te in ve.key!==void 0&&(Me=""+ve.key),ve)ie.call(ve,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Le[Te]=ve[Te]);var Ce=arguments.length-2;if(Ce===1)Le.children=Oe;else if(1<Ce){for(var be=Array(Ce),Ve=0;Ve<Ce;Ve++)be[Ve]=arguments[Ve+2];Le.children=be}if(pe&&pe.defaultProps)for(Te in Ce=pe.defaultProps,Ce)Le[Te]===void 0&&(Le[Te]=Ce[Te]);return se(pe,Me,void 0,void 0,null,Le)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(pe){return{$$typeof:g,render:pe}},react_production.isValidElement=te,react_production.lazy=function(pe){return{$$typeof:w,_payload:{_status:-1,_result:pe},_init:de}},react_production.memo=function(pe,ve){return{$$typeof:v,type:pe,compare:ve===void 0?null:ve}},react_production.startTransition=function(pe){var ve=J.T,Oe={};J.T=Oe;try{var Te=pe(),Le=J.S;Le!==null&&Le(Oe,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(xe,me)}catch(Me){me(Me)}finally{J.T=ve}},react_production.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},react_production.use=function(pe){return J.H.use(pe)},react_production.useActionState=function(pe,ve,Oe){return J.H.useActionState(pe,ve,Oe)},react_production.useCallback=function(pe,ve){return J.H.useCallback(pe,ve)},react_production.useContext=function(pe){return J.H.useContext(pe)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(pe,ve){return J.H.useDeferredValue(pe,ve)},react_production.useEffect=function(pe,ve,Oe){var Te=J.H;if(typeof Oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Te.useEffect(pe,ve)},react_production.useId=function(){return J.H.useId()},react_production.useImperativeHandle=function(pe,ve,Oe){return J.H.useImperativeHandle(pe,ve,Oe)},react_production.useInsertionEffect=function(pe,ve){return J.H.useInsertionEffect(pe,ve)},react_production.useLayoutEffect=function(pe,ve){return J.H.useLayoutEffect(pe,ve)},react_production.useMemo=function(pe,ve){return J.H.useMemo(pe,ve)},react_production.useOptimistic=function(pe,ve){return J.H.useOptimistic(pe,ve)},react_production.useReducer=function(pe,ve,Oe){return J.H.useReducer(pe,ve,Oe)},react_production.useRef=function(pe){return J.H.useRef(pe)},react_production.useState=function(pe){return J.H.useState(pe)},react_production.useSyncExternalStore=function(pe,ve,Oe){return J.H.useSyncExternalStore(pe,ve,Oe)},react_production.useTransition=function(){return J.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(t){function e(we,de){var me=we.length;we.push(de);e:for(;0<me;){var xe=me-1>>>1,pe=we[xe];if(0<o(pe,de))we[xe]=de,we[me]=pe,me=xe;else break e}}function n(we){return we.length===0?null:we[0]}function s(we){if(we.length===0)return null;var de=we[0],me=we.pop();if(me!==de){we[0]=me;e:for(var xe=0,pe=we.length,ve=pe>>>1;xe<ve;){var Oe=2*(xe+1)-1,Te=we[Oe],Le=Oe+1,Me=we[Le];if(0>o(Te,me))Le<pe&&0>o(Me,Te)?(we[xe]=Me,we[Le]=me,xe=Le):(we[xe]=Te,we[Oe]=me,xe=Oe);else if(Le<pe&&0>o(Me,me))we[xe]=Me,we[Le]=me,xe=Le;else break e}}return de}function o(we,de){var me=we.sortIndex-de.sortIndex;return me!==0?me:we.id-de.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();t.unstable_now=function(){return d.now()-g}}var y=[],v=[],w=1,T=null,A=3,C=!1,j=!1,D=!1,H=!1,ne=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function ee(we){for(var de=n(v);de!==null;){if(de.callback===null)s(v);else if(de.startTime<=we)s(v),de.sortIndex=de.expirationTime,e(y,de);else break;de=n(v)}}function J(we){if(D=!1,ee(we),!j)if(n(y)!==null)j=!0,ie||(ie=!0,le());else{var de=n(v);de!==null&&Ee(J,de.startTime-we)}}var ie=!1,se=-1,K=5,te=-1;function re(){return H?!0:!(t.unstable_now()-te<K)}function ce(){if(H=!1,ie){var we=t.unstable_now();te=we;var de=!0;try{e:{j=!1,D&&(D=!1,Y(se),se=-1),C=!0;var me=A;try{t:{for(ee(we),T=n(y);T!==null&&!(T.expirationTime>we&&re());){var xe=T.callback;if(typeof xe=="function"){T.callback=null,A=T.priorityLevel;var pe=xe(T.expirationTime<=we);if(we=t.unstable_now(),typeof pe=="function"){T.callback=pe,ee(we),de=!0;break t}T===n(y)&&s(y),ee(we)}else s(y);T=n(y)}if(T!==null)de=!0;else{var ve=n(v);ve!==null&&Ee(J,ve.startTime-we),de=!1}}break e}finally{T=null,A=me,C=!1}de=void 0}}finally{de?le():ie=!1}}}var le;if(typeof U=="function")le=function(){U(ce)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,_e=ue.port2;ue.port1.onmessage=ce,le=function(){_e.postMessage(null)}}else le=function(){ne(ce,0)};function Ee(we,de){se=ne(function(){we(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(we){we.callback=null},t.unstable_forceFrameRate=function(we){0>we||125<we?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<we?Math.floor(1e3/we):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_next=function(we){switch(A){case 1:case 2:case 3:var de=3;break;default:de=A}var me=A;A=de;try{return we()}finally{A=me}},t.unstable_requestPaint=function(){H=!0},t.unstable_runWithPriority=function(we,de){switch(we){case 1:case 2:case 3:case 4:case 5:break;default:we=3}var me=A;A=we;try{return de()}finally{A=me}},t.unstable_scheduleCallback=function(we,de,me){var xe=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?xe+me:xe):me=xe,we){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=me+pe,we={id:w++,callback:de,priorityLevel:we,startTime:me,expirationTime:pe,sortIndex:-1},me>xe?(we.sortIndex=me,e(v,we),n(y)===null&&we===n(v)&&(D?(Y(se),se=-1):D=!0,Ee(J,me-xe))):(we.sortIndex=pe,e(y,we),j||C||(j=!0,ie||(ie=!0,le()))),we},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(we){var de=A;return function(){var me=A;A=de;try{return we.apply(this,arguments)}finally{A=me}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(y){var v="https://react.dev/errors/"+y;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)v+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+y+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,v,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:y,containerInfo:v,implementation:w}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,v){if(y==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,reactDom_production.createPortal=function(y,v){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return u(y,v,null,w)},reactDom_production.flushSync=function(y){var v=d.T,w=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=v,s.p=w,s.d.f()}},reactDom_production.preconnect=function(y,v){typeof y=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(y,v))},reactDom_production.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},reactDom_production.preinit=function(y,v){if(typeof y=="string"&&v&&typeof v.as=="string"){var w=v.as,T=g(w,v.crossOrigin),A=typeof v.integrity=="string"?v.integrity:void 0,C=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;w==="style"?s.d.S(y,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:C}):w==="script"&&s.d.X(y,{crossOrigin:T,integrity:A,fetchPriority:C,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},reactDom_production.preinitModule=function(y,v){if(typeof y=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var w=g(v.as,v.crossOrigin);s.d.M(y,{crossOrigin:w,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(y)},reactDom_production.preload=function(y,v){if(typeof y=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var w=v.as,T=g(w,v.crossOrigin);s.d.L(y,w,{crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},reactDom_production.preloadModule=function(y,v){if(typeof y=="string")if(v){var w=g(v.as,v.crossOrigin);s.d.m(y,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:w,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(y)},reactDom_production.requestFormReset=function(y){s.d.r(y)},reactDom_production.unstable_batchedUpdates=function(y,v){return y(v)},reactDom_production.useFormState=function(y,v,w){return d.H.useFormState(y,v,w)},reactDom_production.useFormStatus=function(){return d.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),n=requireReactDom();function s(f){var _="https://react.dev/errors/"+f;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+f+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function u(f){var _=f,S=f;if(f.alternate)for(;_.return;)_=_.return;else{f=_;do _=f,(_.flags&4098)!==0&&(S=_.return),f=_.return;while(f)}return _.tag===3?S:null}function d(f){if(f.tag===13){var _=f.memoizedState;if(_===null&&(f=f.alternate,f!==null&&(_=f.memoizedState)),_!==null)return _.dehydrated}return null}function g(f){if(u(f)!==f)throw Error(s(188))}function y(f){var _=f.alternate;if(!_){if(_=u(f),_===null)throw Error(s(188));return _!==f?null:f}for(var S=f,P=_;;){var W=S.return;if(W===null)break;var ae=W.alternate;if(ae===null){if(P=W.return,P!==null){S=P;continue}break}if(W.child===ae.child){for(ae=W.child;ae;){if(ae===S)return g(W),f;if(ae===P)return g(W),_;ae=ae.sibling}throw Error(s(188))}if(S.return!==P.return)S=W,P=ae;else{for(var ye=!1,Se=W.child;Se;){if(Se===S){ye=!0,S=W,P=ae;break}if(Se===P){ye=!0,P=W,S=ae;break}Se=Se.sibling}if(!ye){for(Se=ae.child;Se;){if(Se===S){ye=!0,S=ae,P=W;break}if(Se===P){ye=!0,P=ae,S=W;break}Se=Se.sibling}if(!ye)throw Error(s(189))}}if(S.alternate!==P)throw Error(s(190))}if(S.tag!==3)throw Error(s(188));return S.stateNode.current===S?f:_}function v(f){var _=f.tag;if(_===5||_===26||_===27||_===6)return f;for(f=f.child;f!==null;){if(_=v(f),_!==null)return _;f=f.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),U=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function le(f){return f===null||typeof f!="object"?null:(f=ce&&f[ce]||f["@@iterator"],typeof f=="function"?f:null)}var ue=Symbol.for("react.client.reference");function _e(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===ue?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case j:return"Fragment";case H:return"Profiler";case D:return"StrictMode";case J:return"Suspense";case ie:return"SuspenseList";case te:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case C:return"Portal";case U:return(f.displayName||"Context")+".Provider";case Y:return(f._context.displayName||"Context")+".Consumer";case ee:var _=f.render;return f=f.displayName,f||(f=_.displayName||_.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case se:return _=f.displayName||null,_!==null?_:_e(f.type)||"Memo";case K:_=f._payload,f=f._init;try{return _e(f(_))}catch{}}return null}var Ee=Array.isArray,we=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},xe=[],pe=-1;function ve(f){return{current:f}}function Oe(f){0>pe||(f.current=xe[pe],xe[pe]=null,pe--)}function Te(f,_){pe++,xe[pe]=f.current,f.current=_}var Le=ve(null),Me=ve(null),Ce=ve(null),be=ve(null);function Ve(f,_){switch(Te(Ce,_),Te(Me,f),Te(Le,null),_.nodeType){case 9:case 11:f=(f=_.documentElement)&&(f=f.namespaceURI)?gm(f):0;break;default:if(f=_.tagName,_=_.namespaceURI)_=gm(_),f=ym(_,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}Oe(Le),Te(Le,f)}function $e(){Oe(Le),Oe(Me),Oe(Ce)}function Fe(f){f.memoizedState!==null&&Te(be,f);var _=Le.current,S=ym(_,f.type);_!==S&&(Te(Me,f),Te(Le,S))}function je(f){Me.current===f&&(Oe(Le),Oe(Me)),be.current===f&&(Oe(be),dh._currentValue=me)}var De=Object.prototype.hasOwnProperty,Ie=t.unstable_scheduleCallback,Re=t.unstable_cancelCallback,Ne=t.unstable_shouldYield,Ue=t.unstable_requestPaint,pt=t.unstable_now,Ze=t.unstable_getCurrentPriorityLevel,mn=t.unstable_ImmediatePriority,Ut=t.unstable_UserBlockingPriority,Lt=t.unstable_NormalPriority,Dt=t.unstable_LowPriority,Gt=t.unstable_IdlePriority,Ke=t.log,rt=t.unstable_setDisableYieldValue,Ct=null,tt=null;function Et(f){if(typeof Ke=="function"&&rt(f),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(Ct,f)}catch{}}var un=Math.clz32?Math.clz32:Dn,hn=Math.log,xn=Math.LN2;function Dn(f){return f>>>=0,f===0?32:31-(hn(f)/xn|0)|0}var Sn=256,Hn=4194304;function Pn(f){var _=f&42;if(_!==0)return _;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function Gn(f,_,S){var P=f.pendingLanes;if(P===0)return 0;var W=0,ae=f.suspendedLanes,ye=f.pingedLanes;f=f.warmLanes;var Se=P&134217727;return Se!==0?(P=Se&~ae,P!==0?W=Pn(P):(ye&=Se,ye!==0?W=Pn(ye):S||(S=Se&~f,S!==0&&(W=Pn(S))))):(Se=P&~ae,Se!==0?W=Pn(Se):ye!==0?W=Pn(ye):S||(S=P&~f,S!==0&&(W=Pn(S)))),W===0?0:_!==0&&_!==W&&(_&ae)===0&&(ae=W&-W,S=_&-_,ae>=S||ae===32&&(S&4194048)!==0)?_:W}function Xn(f,_){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&_)===0}function kn(f,_){switch(f){case 1:case 2:case 4:case 8:case 64:return _+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ms(){var f=Sn;return Sn<<=1,(Sn&4194048)===0&&(Sn=256),f}function Zs(){var f=Hn;return Hn<<=1,(Hn&62914560)===0&&(Hn=4194304),f}function fr(f){for(var _=[],S=0;31>S;S++)_.push(f);return _}function On(f,_){f.pendingLanes|=_,_!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function vn(f,_,S,P,W,ae){var ye=f.pendingLanes;f.pendingLanes=S,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=S,f.entangledLanes&=S,f.errorRecoveryDisabledLanes&=S,f.shellSuspendCounter=0;var Se=f.entanglements,ke=f.expirationTimes,We=f.hiddenUpdates;for(S=ye&~S;0<S;){var It=31-un(S),kt=1<<It;Se[It]=0,ke[It]=-1;var Je=We[It];if(Je!==null)for(We[It]=null,It=0;It<Je.length;It++){var et=Je[It];et!==null&&(et.lane&=-536870913)}S&=~kt}P!==0&&Ln(f,P,0),ae!==0&&W===0&&f.tag!==0&&(f.suspendedLanes|=ae&~(ye&~_))}function Ln(f,_,S){f.pendingLanes|=_,f.suspendedLanes&=~_;var P=31-un(_);f.entangledLanes|=_,f.entanglements[P]=f.entanglements[P]|1073741824|S&4194090}function gs(f,_){var S=f.entangledLanes|=_;for(f=f.entanglements;S;){var P=31-un(S),W=1<<P;W&_|f[P]&_&&(f[P]|=_),S&=~W}}function cs(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function js(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function Ls(){var f=de.p;return f!==0?f:(f=window.event,f===void 0?32:Vm(f.type))}function Ks(f,_){var S=de.p;try{return de.p=f,_()}finally{de.p=S}}var wn=Math.random().toString(36).slice(2),$n="__reactFiber$"+wn,es="__reactProps$"+wn,Rs="__reactContainer$"+wn,Mr="__reactEvents$"+wn,qs="__reactListeners$"+wn,Ts="__reactHandles$"+wn,Hs="__reactResources$"+wn,Vr="__reactMarker$"+wn;function Ji(f){delete f[$n],delete f[es],delete f[Mr],delete f[qs],delete f[Ts]}function li(f){var _=f[$n];if(_)return _;for(var S=f.parentNode;S;){if(_=S[Rs]||S[$n]){if(S=_.alternate,_.child!==null||S!==null&&S.child!==null)for(f=bm(f);f!==null;){if(S=f[$n])return S;f=bm(f)}return _}f=S,S=f.parentNode}return null}function Yr(f){if(f=f[$n]||f[Rs]){var _=f.tag;if(_===5||_===6||_===13||_===26||_===27||_===3)return f}return null}function Bi(f){var _=f.tag;if(_===5||_===26||_===27||_===6)return f.stateNode;throw Error(s(33))}function Rr(f){var _=f[Hs];return _||(_=f[Hs]={hoistableStyles:new Map,hoistableScripts:new Map}),_}function Gs(f){f[Vr]=!0}var $o=new Set,ro={};function hs(f,_){Fi(f,_),Fi(f+"Capture",_)}function Fi(f,_){for(ro[f]=_,f=0;f<_.length;f++)$o.add(_[f])}var Sl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gc={},io={};function pu(f){return De.call(io,f)?!0:De.call(gc,f)?!1:Sl.test(f)?io[f]=!0:(gc[f]=!0,!1)}function ea(f,_,S){if(pu(_))if(S===null)f.removeAttribute(_);else{switch(typeof S){case"undefined":case"function":case"symbol":f.removeAttribute(_);return;case"boolean":var P=_.toLowerCase().slice(0,5);if(P!=="data-"&&P!=="aria-"){f.removeAttribute(_);return}}f.setAttribute(_,""+S)}}function Ei(f,_,S){if(S===null)f.removeAttribute(_);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(_);return}f.setAttribute(_,""+S)}}function or(f,_,S,P){if(P===null)f.removeAttribute(S);else{switch(typeof P){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(S);return}f.setAttributeNS(_,S,""+P)}}var Js,Bs;function zi(f){if(Js===void 0)try{throw Error()}catch(S){var _=S.stack.trim().match(/\n( *(at )?)/);Js=_&&_[1]||"",Bs=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Js+f+Bs}var ta=!1;function ja(f,_){if(!f||ta)return"";ta=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var P={DetermineComponentFrameRoot:function(){try{if(_){var kt=function(){throw Error()};if(Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(et){var Je=et}Reflect.construct(f,[],kt)}else{try{kt.call()}catch(et){Je=et}f.call(kt.prototype)}}else{try{throw Error()}catch(et){Je=et}(kt=f())&&typeof kt.catch=="function"&&kt.catch(function(){})}}catch(et){if(et&&Je&&typeof et.stack=="string")return[et.stack,Je.stack]}return[null,null]}};P.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var W=Object.getOwnPropertyDescriptor(P.DetermineComponentFrameRoot,"name");W&&W.configurable&&Object.defineProperty(P.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ae=P.DetermineComponentFrameRoot(),ye=ae[0],Se=ae[1];if(ye&&Se){var ke=ye.split(`
`),We=Se.split(`
`);for(W=P=0;P<ke.length&&!ke[P].includes("DetermineComponentFrameRoot");)P++;for(;W<We.length&&!We[W].includes("DetermineComponentFrameRoot");)W++;if(P===ke.length||W===We.length)for(P=ke.length-1,W=We.length-1;1<=P&&0<=W&&ke[P]!==We[W];)W--;for(;1<=P&&0<=W;P--,W--)if(ke[P]!==We[W]){if(P!==1||W!==1)do if(P--,W--,0>W||ke[P]!==We[W]){var It=`
`+ke[P].replace(" at new "," at ");return f.displayName&&It.includes("<anonymous>")&&(It=It.replace("<anonymous>",f.displayName)),It}while(1<=P&&0<=W);break}}}finally{ta=!1,Error.prepareStackTrace=S}return(S=f?f.displayName||f.name:"")?zi(S):""}function Yo(f){switch(f.tag){case 26:case 27:case 5:return zi(f.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 15:return ja(f.type,!1);case 11:return ja(f.type.render,!1);case 1:return ja(f.type,!0);case 31:return zi("Activity");default:return""}}function Kr(f){try{var _="";do _+=Yo(f),f=f.return;while(f);return _}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}function mr(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Ko(f){var _=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function yc(f){var _=Ko(f)?"checked":"value",S=Object.getOwnPropertyDescriptor(f.constructor.prototype,_),P=""+f[_];if(!f.hasOwnProperty(_)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var W=S.get,ae=S.set;return Object.defineProperty(f,_,{configurable:!0,get:function(){return W.call(this)},set:function(ye){P=""+ye,ae.call(this,ye)}}),Object.defineProperty(f,_,{enumerable:S.enumerable}),{getValue:function(){return P},setValue:function(ye){P=""+ye},stopTracking:function(){f._valueTracker=null,delete f[_]}}}}function Xo(f){f._valueTracker||(f._valueTracker=yc(f))}function Tl(f){if(!f)return!1;var _=f._valueTracker;if(!_)return!0;var S=_.getValue(),P="";return f&&(P=Ko(f)?f.checked?"true":"false":f.value),f=P,f!==S?(_.setValue(f),!0):!1}function ao(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var gu=/[\n"\\]/g;function Xs(f){return f.replace(gu,function(_){return"\\"+_.charCodeAt(0).toString(16)+" "})}function Xr(f,_,S,P,W,ae,ye,Se){f.name="",ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?f.type=ye:f.removeAttribute("type"),_!=null?ye==="number"?(_===0&&f.value===""||f.value!=_)&&(f.value=""+mr(_)):f.value!==""+mr(_)&&(f.value=""+mr(_)):ye!=="submit"&&ye!=="reset"||f.removeAttribute("value"),_!=null?Oa(f,ye,mr(_)):S!=null?Oa(f,ye,mr(S)):P!=null&&f.removeAttribute("value"),W==null&&ae!=null&&(f.defaultChecked=!!ae),W!=null&&(f.checked=W&&typeof W!="function"&&typeof W!="symbol"),Se!=null&&typeof Se!="function"&&typeof Se!="symbol"&&typeof Se!="boolean"?f.name=""+mr(Se):f.removeAttribute("name")}function Da(f,_,S,P,W,ae,ye,Se){if(ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"&&(f.type=ae),_!=null||S!=null){if(!(ae!=="submit"&&ae!=="reset"||_!=null))return;S=S!=null?""+mr(S):"",_=_!=null?""+mr(_):S,Se||_===f.value||(f.value=_),f.defaultValue=_}P=P??W,P=typeof P!="function"&&typeof P!="symbol"&&!!P,f.checked=Se?f.checked:!!P,f.defaultChecked=!!P,ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"&&(f.name=ye)}function Oa(f,_,S){_==="number"&&ao(f.ownerDocument)===f||f.defaultValue===""+S||(f.defaultValue=""+S)}function Ma(f,_,S,P){if(f=f.options,_){_={};for(var W=0;W<S.length;W++)_["$"+S[W]]=!0;for(S=0;S<f.length;S++)W=_.hasOwnProperty("$"+f[S].value),f[S].selected!==W&&(f[S].selected=W),W&&P&&(f[S].defaultSelected=!0)}else{for(S=""+mr(S),_=null,W=0;W<f.length;W++){if(f[W].value===S){f[W].selected=!0,P&&(f[W].defaultSelected=!0);return}_!==null||f[W].disabled||(_=f[W])}_!==null&&(_.selected=!0)}}function xs(f,_,S){if(_!=null&&(_=""+mr(_),_!==f.value&&(f.value=_),S==null)){f.defaultValue!==_&&(f.defaultValue=_);return}f.defaultValue=S!=null?""+mr(S):""}function oo(f,_,S,P){if(_==null){if(P!=null){if(S!=null)throw Error(s(92));if(Ee(P)){if(1<P.length)throw Error(s(93));P=P[0]}S=P}S==null&&(S=""),_=S}S=mr(_),f.defaultValue=S,P=f.textContent,P===S&&P!==""&&P!==null&&(f.value=P)}function ci(f,_){if(_){var S=f.firstChild;if(S&&S===f.lastChild&&S.nodeType===3){S.nodeValue=_;return}}f.textContent=_}var Va=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xc(f,_,S){var P=_.indexOf("--")===0;S==null||typeof S=="boolean"||S===""?P?f.setProperty(_,""):_==="float"?f.cssFloat="":f[_]="":P?f.setProperty(_,S):typeof S!="number"||S===0||Va.has(_)?_==="float"?f.cssFloat=S:f[_]=(""+S).trim():f[_]=S+"px"}function Al(f,_,S){if(_!=null&&typeof _!="object")throw Error(s(62));if(f=f.style,S!=null){for(var P in S)!S.hasOwnProperty(P)||_!=null&&_.hasOwnProperty(P)||(P.indexOf("--")===0?f.setProperty(P,""):P==="float"?f.cssFloat="":f[P]="");for(var W in _)P=_[W],_.hasOwnProperty(W)&&S[W]!==P&&xc(f,W,P)}else for(var ae in _)_.hasOwnProperty(ae)&&xc(f,ae,_[ae])}function Cl(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pl(f){return xu.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var na=null;function _r(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Ri=null,sa=null;function lo(f){var _=Yr(f);if(_&&(f=_.stateNode)){var S=f[es]||null;e:switch(f=_.stateNode,_.type){case"input":if(Xr(f,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name),_=S.name,S.type==="radio"&&_!=null){for(S=f;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll('input[name="'+Xs(""+_)+'"][type="radio"]'),_=0;_<S.length;_++){var P=S[_];if(P!==f&&P.form===f.form){var W=P[es]||null;if(!W)throw Error(s(90));Xr(P,W.value,W.defaultValue,W.defaultValue,W.checked,W.defaultChecked,W.type,W.name)}}for(_=0;_<S.length;_++)P=S[_],P.form===f.form&&Tl(P)}break e;case"textarea":xs(f,S.value,S.defaultValue);break e;case"select":_=S.value,_!=null&&Ma(f,!!S.multiple,_,!1)}}}var Wr=!1;function _c(f,_,S){if(Wr)return f(_,S);Wr=!0;try{var P=f(_);return P}finally{if(Wr=!1,(Ri!==null||sa!==null)&&(zo(),Ri&&(_=Ri,f=sa,sa=Ri=null,lo(_),f)))for(_=0;_<f.length;_++)lo(f[_])}}function co(f,_){var S=f.stateNode;if(S===null)return null;var P=S[es]||null;if(P===null)return null;S=P[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(f=f.type,P=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!P;break e;default:f=!1}if(f)return null;if(S&&typeof S!="function")throw Error(s(231,_,typeof S));return S}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ui=!1;if(wi)try{var uo={};Object.defineProperty(uo,"passive",{get:function(){ui=!0}}),window.addEventListener("test",uo,uo),window.removeEventListener("test",uo,uo)}catch{ui=!1}var Ui=null,ra=null,ia=null;function Il(){if(ia)return ia;var f,_=ra,S=_.length,P,W="value"in Ui?Ui.value:Ui.textContent,ae=W.length;for(f=0;f<S&&_[f]===W[f];f++);var ye=S-f;for(P=1;P<=ye&&_[S-P]===W[ae-P];P++);return ia=W.slice(f,1<P?1-P:void 0)}function Si(f){var _=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&_===13&&(f=13)):f=_,f===10&&(f=13),32<=f||f===13?f:0}function qi(){return!0}function Nl(){return!1}function lr(f){function _(S,P,W,ae,ye){this._reactName=S,this._targetInst=W,this.type=P,this.nativeEvent=ae,this.target=ye,this.currentTarget=null;for(var Se in f)f.hasOwnProperty(Se)&&(S=f[Se],this[Se]=S?S(ae):ae[Se]);return this.isDefaultPrevented=(ae.defaultPrevented!=null?ae.defaultPrevented:ae.returnValue===!1)?qi:Nl,this.isPropagationStopped=Nl,this}return w(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),_}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=lr(us),ho=w({},us,{view:0,detail:0}),_u=lr(ho),jl,Qo,Qr,ka=w({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mo,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Qr&&(Qr&&f.type==="mousemove"?(jl=f.screenX-Qr.screenX,Qo=f.screenY-Qr.screenY):Qo=jl=0,Qr=f),jl)},movementY:function(f){return"movementY"in f?f.movementY:Qo}}),kr=lr(ka),vc=w({},ka,{dataTransfer:0}),vu=lr(vc),aa=w({},ho,{relatedTarget:0}),oa=lr(aa),fo=w({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),Zo=lr(fo),bc=w({},us,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),di=lr(bc),bu=w({},us,{data:0}),Ti=lr(bu),Lr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ol(f){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(f):(f=Dl[f])?!!_[f]:!1}function mo(){return Ol}var la=w({},ho,{key:function(f){if(f.key){var _=Lr[f.key]||f.key;if(_!=="Unidentified")return _}return f.type==="keypress"?(f=Si(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Jo[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mo,charCode:function(f){return f.type==="keypress"?Si(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Si(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),La=lr(la),Ec=w({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),el=lr(Ec),ca=w({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mo}),Rc=lr(ca),Eu=w({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),er=lr(Eu),wc=w({},ka,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),tl=lr(wc),wr=w({},us,{newState:0,oldState:0}),Sc=lr(wr),Tc=[9,13,27,32],hi=wi&&"CompositionEvent"in window,V=null;wi&&"documentMode"in document&&(V=document.documentMode);var fe=wi&&"TextEvent"in window&&!V,ge=wi&&(!hi||V&&8<V&&11>=V),Ae=" ",Ye=!1;function vt(f,_){switch(f){case"keyup":return Tc.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wt(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Wn=!1;function $s(f,_){switch(f){case"compositionend":return Wt(_);case"keypress":return _.which!==32?null:(Ye=!0,Ae);case"textInput":return f=_.data,f===Ae&&Ye?null:f;default:return null}}function Qn(f,_){if(Wn)return f==="compositionend"||!hi&&vt(f,_)?(f=Il(),ia=ra=Ui=null,Wn=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return ge&&_.locale!=="ko"?null:_.data;default:return null}}var cr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ws(f){var _=f&&f.nodeName&&f.nodeName.toLowerCase();return _==="input"?!!cr[f.type]:_==="textarea"}function ua(f,_,S,P){Ri?sa?sa.push(P):sa=[P]:Ri=P,_=mf(_,"onChange"),0<_.length&&(S=new Wo("onChange","change",null,S,P),f.push({event:S,listeners:_}))}var Ds=null,Ai=null;function Ac(f){dm(f,0)}function Cc(f){var _=Bi(f);if(Tl(_))return f}function Zr(f,_){if(f==="change")return _}var fd=!1;if(wi){var Pc;if(wi){var Ru="oninput"in document;if(!Ru){var md=document.createElement("div");md.setAttribute("oninput","return;"),Ru=typeof md.oninput=="function"}Pc=Ru}else Pc=!1;fd=Pc&&(!document.documentMode||9<document.documentMode)}function wu(){Ds&&(Ds.detachEvent("onpropertychange",Su),Ai=Ds=null)}function Su(f){if(f.propertyName==="value"&&Cc(Ai)){var _=[];ua(_,Ai,f,_r(f)),_c(Ac,_)}}function gh(f,_,S){f==="focusin"?(wu(),Ds=_,Ai=S,Ds.attachEvent("onpropertychange",Su)):f==="focusout"&&wu()}function Tu(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Cc(Ai)}function Ic(f,_){if(f==="click")return Cc(_)}function Fs(f,_){if(f==="input"||f==="change")return Cc(_)}function If(f,_){return f===_&&(f!==0||1/f===1/_)||f!==f&&_!==_}var fi=typeof Object.is=="function"?Object.is:If;function Ml(f,_){if(fi(f,_))return!0;if(typeof f!="object"||f===null||typeof _!="object"||_===null)return!1;var S=Object.keys(f),P=Object.keys(_);if(S.length!==P.length)return!1;for(P=0;P<S.length;P++){var W=S[P];if(!De.call(_,W)||!fi(f[W],_[W]))return!1}return!0}function Vl(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Ba(f,_){var S=Vl(f);f=0;for(var P;S;){if(S.nodeType===3){if(P=f+S.textContent.length,f<=_&&P>=_)return{node:S,offset:_-f};f=P}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=Vl(S)}}function pd(f,_){return f&&_?f===_?!0:f&&f.nodeType===3?!1:_&&_.nodeType===3?pd(f,_.parentNode):"contains"in f?f.contains(_):f.compareDocumentPosition?!!(f.compareDocumentPosition(_)&16):!1:!1}function gd(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var _=ao(f.document);_ instanceof f.HTMLIFrameElement;){try{var S=typeof _.contentWindow.location.href=="string"}catch{S=!1}if(S)f=_.contentWindow;else break;_=ao(f.document)}return _}function nl(f){var _=f&&f.nodeName&&f.nodeName.toLowerCase();return _&&(_==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||_==="textarea"||f.contentEditable==="true")}var da=wi&&"documentMode"in document&&11>=document.documentMode,sl=null,Nc=null,kl=null,jc=!1;function Au(f,_,S){var P=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;jc||sl==null||sl!==ao(P)||(P=sl,"selectionStart"in P&&nl(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),kl&&Ml(kl,P)||(kl=P,P=mf(Nc,"onSelect"),0<P.length&&(_=new Wo("onSelect","select",null,_,S),f.push({event:_,listeners:P}),_.target=sl)))}function ha(f,_){var S={};return S[f.toLowerCase()]=_.toLowerCase(),S["Webkit"+f]="webkit"+_,S["Moz"+f]="moz"+_,S}var rl={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},Cu={},yh={};wi&&(yh=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function po(f){if(Cu[f])return Cu[f];if(!rl[f])return f;var _=rl[f],S;for(S in _)if(_.hasOwnProperty(S)&&S in yh)return Cu[f]=_[S];return f}var yd=po("animationend"),Ci=po("animationiteration"),Pu=po("animationstart"),xh=po("transitionrun"),Nf=po("transitionstart"),xd=po("transitioncancel"),Sr=po("transitionend"),_d=new Map,Tr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tr.push("scrollEnd");function Pi(f,_){_d.set(f,_),hs(_,[f])}var Fa=new WeakMap;function pr(f,_){if(typeof f=="object"&&f!==null){var S=Fa.get(f);return S!==void 0?S:(_={value:f,source:_,stack:Kr(_)},Fa.set(f,_),_)}return{value:f,source:_,stack:Kr(_)}}var ur=[],go=0,Dc=0;function mi(){for(var f=go,_=Dc=go=0;_<f;){var S=ur[_];ur[_++]=null;var P=ur[_];ur[_++]=null;var W=ur[_];ur[_++]=null;var ae=ur[_];if(ur[_++]=null,P!==null&&W!==null){var ye=P.pending;ye===null?W.next=W:(W.next=ye.next,ye.next=W),P.pending=W}ae!==0&&xo(S,W,ae)}}function Oc(f,_,S,P){ur[go++]=f,ur[go++]=_,ur[go++]=S,ur[go++]=P,Dc|=P,f.lanes|=P,f=f.alternate,f!==null&&(f.lanes|=P)}function yo(f,_,S,P){return Oc(f,_,S,P),Mc(f)}function fa(f,_){return Oc(f,null,null,_),Mc(f)}function xo(f,_,S){f.lanes|=S;var P=f.alternate;P!==null&&(P.lanes|=S);for(var W=!1,ae=f.return;ae!==null;)ae.childLanes|=S,P=ae.alternate,P!==null&&(P.childLanes|=S),ae.tag===22&&(f=ae.stateNode,f===null||f._visibility&1||(W=!0)),f=ae,ae=ae.return;return f.tag===3?(ae=f.stateNode,W&&_!==null&&(W=31-un(S),f=ae.hiddenUpdates,P=f[W],P===null?f[W]=[_]:P.push(_),_.lane=S|536870912),ae):null}function Mc(f){if(50<Pa)throw Pa=0,fu=null,Error(s(185));for(var _=f.return;_!==null;)f=_,_=f.return;return f.tag===3?f.stateNode:null}var il={};function Vc(f,_,S,P){this.tag=f,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(f,_,S,P){return new Vc(f,_,S,P)}function Ll(f){return f=f.prototype,!(!f||!f.isReactComponent)}function ma(f,_){var S=f.alternate;return S===null?(S=Jr(f.tag,_,f.key,f.mode),S.elementType=f.elementType,S.type=f.type,S.stateNode=f.stateNode,S.alternate=f,f.alternate=S):(S.pendingProps=_,S.type=f.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=f.flags&65011712,S.childLanes=f.childLanes,S.lanes=f.lanes,S.child=f.child,S.memoizedProps=f.memoizedProps,S.memoizedState=f.memoizedState,S.updateQueue=f.updateQueue,_=f.dependencies,S.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},S.sibling=f.sibling,S.index=f.index,S.ref=f.ref,S.refCleanup=f.refCleanup,S}function Iu(f,_){f.flags&=65011714;var S=f.alternate;return S===null?(f.childLanes=0,f.lanes=_,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=S.childLanes,f.lanes=S.lanes,f.child=S.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=S.memoizedProps,f.memoizedState=S.memoizedState,f.updateQueue=S.updateQueue,f.type=S.type,_=S.dependencies,f.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),f}function Bl(f,_,S,P,W,ae){var ye=0;if(P=f,typeof f=="function")Ll(f)&&(ye=1);else if(typeof f=="string")ye=fp(f,S,Le.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case te:return f=Jr(31,S,_,W),f.elementType=te,f.lanes=ae,f;case j:return za(S.children,W,ae,_);case D:ye=8,W|=24;break;case H:return f=Jr(12,S,_,W|2),f.elementType=H,f.lanes=ae,f;case J:return f=Jr(13,S,_,W),f.elementType=J,f.lanes=ae,f;case ie:return f=Jr(19,S,_,W),f.elementType=ie,f.lanes=ae,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case ne:case U:ye=10;break e;case Y:ye=9;break e;case ee:ye=11;break e;case se:ye=14;break e;case K:ye=16,P=null;break e}ye=29,S=Error(s(130,f===null?"null":typeof f,"")),P=null}return _=Jr(ye,S,_,W),_.elementType=f,_.type=P,_.lanes=ae,_}function za(f,_,S,P){return f=Jr(7,f,P,_),f.lanes=S,f}function Nu(f,_,S){return f=Jr(6,f,null,_),f.lanes=S,f}function kc(f,_,S){return _=Jr(4,f.children!==null?f.children:[],f.key,_),_.lanes=S,_.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},_}var gr=[],al=0,Ar=null,Lc=0,pi=[],Ii=0,ei=null,pa=1,Hi="";function Ni(f,_){gr[al++]=Lc,gr[al++]=Ar,Ar=f,Lc=_}function vd(f,_,S){pi[Ii++]=pa,pi[Ii++]=Hi,pi[Ii++]=ei,ei=f;var P=pa;f=Hi;var W=32-un(P)-1;P&=~(1<<W),S+=1;var ae=32-un(_)+W;if(30<ae){var ye=W-W%5;ae=(P&(1<<ye)-1).toString(32),P>>=ye,W-=ye,pa=1<<32-un(_)+W|S<<W|P,Hi=ae+f}else pa=1<<ae|S<<W|P,Hi=f}function ju(f){f.return!==null&&(Ni(f,1),vd(f,1,0))}function Du(f){for(;f===Ar;)Ar=gr[--al],gr[al]=null,Lc=gr[--al],gr[al]=null;for(;f===ei;)ei=pi[--Ii],pi[Ii]=null,Hi=pi[--Ii],pi[Ii]=null,pa=pi[--Ii],pi[Ii]=null}var Cr=null,Vs=null,is=!1,ol=null,ga=!1,bd=Error(s(519));function _o(f){var _=Error(s(418,""));throw zl(pr(_,f)),bd}function Ed(f){var _=f.stateNode,S=f.type,P=f.memoizedProps;switch(_[$n]=f,_[es]=P,S){case"dialog":ss("cancel",_),ss("close",_);break;case"iframe":case"object":case"embed":ss("load",_);break;case"video":case"audio":for(S=0;S<ih.length;S++)ss(ih[S],_);break;case"source":ss("error",_);break;case"img":case"image":case"link":ss("error",_),ss("load",_);break;case"details":ss("toggle",_);break;case"input":ss("invalid",_),Da(_,P.value,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name,!0),Xo(_);break;case"select":ss("invalid",_);break;case"textarea":ss("invalid",_),oo(_,P.value,P.defaultValue,P.children),Xo(_)}S=P.children,typeof S!="string"&&typeof S!="number"&&typeof S!="bigint"||_.textContent===""+S||P.suppressHydrationWarning===!0||pm(_.textContent,S)?(P.popover!=null&&(ss("beforetoggle",_),ss("toggle",_)),P.onScroll!=null&&ss("scroll",_),P.onScrollEnd!=null&&ss("scrollend",_),P.onClick!=null&&(_.onclick=pf),_=!0):_=!1,_||_o(f)}function ll(f){for(Cr=f.return;Cr;)switch(Cr.tag){case 5:case 13:ga=!1;return;case 27:case 3:ga=!0;return;default:Cr=Cr.return}}function vo(f){if(f!==Cr)return!1;if(!is)return ll(f),is=!0,!1;var _=f.tag,S;if((S=_!==3&&_!==27)&&((S=_===5)&&(S=f.type,S=!(S!=="form"&&S!=="button")||Xf(f.type,f.memoizedProps)),S=!S),S&&Vs&&_o(f),ll(f),_===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));e:{for(f=f.nextSibling,_=0;f;){if(f.nodeType===8)if(S=f.data,S==="/$"){if(_===0){Vs=so(f.nextSibling);break e}_--}else S!=="$"&&S!=="$!"&&S!=="$?"||_++;f=f.nextSibling}Vs=null}}else _===27?(_=Vs,uc(f.type)?(f=Jf,Jf=null,Vs=f):Vs=_):Vs=Cr?so(f.stateNode.nextSibling):null;return!0}function Fl(){Vs=Cr=null,is=!1}function Rd(){var f=ol;return f!==null&&(Er===null?Er=f:Er.push.apply(Er,f),ol=null),f}function zl(f){ol===null?ol=[f]:ol.push(f)}var Ou=ve(null),bo=null,ya=null;function ji(f,_,S){Te(Ou,_._currentValue),_._currentValue=S}function xa(f){f._currentValue=Ou.current,Oe(Ou)}function Mu(f,_,S){for(;f!==null;){var P=f.alternate;if((f.childLanes&_)!==_?(f.childLanes|=_,P!==null&&(P.childLanes|=_)):P!==null&&(P.childLanes&_)!==_&&(P.childLanes|=_),f===S)break;f=f.return}}function fs(f,_,S,P){var W=f.child;for(W!==null&&(W.return=f);W!==null;){var ae=W.dependencies;if(ae!==null){var ye=W.child;ae=ae.firstContext;e:for(;ae!==null;){var Se=ae;ae=W;for(var ke=0;ke<_.length;ke++)if(Se.context===_[ke]){ae.lanes|=S,Se=ae.alternate,Se!==null&&(Se.lanes|=S),Mu(ae.return,S,f),P||(ye=null);break e}ae=Se.next}}else if(W.tag===18){if(ye=W.return,ye===null)throw Error(s(341));ye.lanes|=S,ae=ye.alternate,ae!==null&&(ae.lanes|=S),Mu(ye,S,f),ye=null}else ye=W.child;if(ye!==null)ye.return=W;else for(ye=W;ye!==null;){if(ye===f){ye=null;break}if(W=ye.sibling,W!==null){W.return=ye.return,ye=W;break}ye=ye.return}W=ye}}function cl(f,_,S,P){f=null;for(var W=_,ae=!1;W!==null;){if(!ae){if((W.flags&524288)!==0)ae=!0;else if((W.flags&262144)!==0)break}if(W.tag===10){var ye=W.alternate;if(ye===null)throw Error(s(387));if(ye=ye.memoizedProps,ye!==null){var Se=W.type;fi(W.pendingProps.value,ye.value)||(f!==null?f.push(Se):f=[Se])}}else if(W===be.current){if(ye=W.alternate,ye===null)throw Error(s(387));ye.memoizedState.memoizedState!==W.memoizedState.memoizedState&&(f!==null?f.push(dh):f=[dh])}W=W.return}f!==null&&fs(_,f,S,P),_.flags|=262144}function Vu(f){for(f=f.firstContext;f!==null;){if(!fi(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function Eo(f){bo=f,ya=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Pr(f){return _h(bo,f)}function ku(f,_){return bo===null&&Eo(f),_h(f,_)}function _h(f,_){var S=_._currentValue;if(_={context:_,memoizedValue:S,next:null},ya===null){if(f===null)throw Error(s(308));ya=_,f.dependencies={lanes:0,firstContext:_},f.flags|=524288}else ya=ya.next=_;return S}var jf=typeof AbortController<"u"?AbortController:function(){var f=[],_=this.signal={aborted:!1,addEventListener:function(S,P){f.push(P)}};this.abort=function(){_.aborted=!0,f.forEach(function(S){return S()})}},wd=t.unstable_scheduleCallback,Ua=t.unstable_NormalPriority,tr={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ul(){return{controller:new jf,data:new Map,refCount:0}}function Gi(f){f.refCount--,f.refCount===0&&wd(Ua,function(){f.controller.abort()})}var ul=null,Bc=0,ql=0,dl=null;function bh(f,_){if(ul===null){var S=ul=[];Bc=0,ql=Ff(),dl={status:"pending",value:void 0,then:function(P){S.push(P)}}}return Bc++,_.then(Sd,Sd),_}function Sd(){if(--Bc===0&&ul!==null){dl!==null&&(dl.status="fulfilled");var f=ul;ul=null,ql=0,dl=null;for(var _=0;_<f.length;_++)(0,f[_])()}}function Eh(f,_){var S=[],P={status:"pending",value:null,reason:null,then:function(W){S.push(W)}};return f.then(function(){P.status="fulfilled",P.value=_;for(var W=0;W<S.length;W++)(0,S[W])(_)},function(W){for(P.status="rejected",P.reason=W,W=0;W<S.length;W++)(0,S[W])(void 0)}),P}var Td=we.S;we.S=function(f,_){typeof _=="object"&&_!==null&&typeof _.then=="function"&&bh(f,_),Td!==null&&Td(f,_)};var qa=ve(null);function Fn(){var f=qa.current;return f!==null?f:Es.pooledCache}function Lu(f,_){_===null?Te(qa,qa.current):Te(qa,_.pool)}function ti(){var f=Fn();return f===null?null:{parent:tr._currentValue,pool:f}}var hl=Error(s(460)),Rh=Error(s(474)),fl=Error(s(542)),Ro={then:function(){}};function ml(f){return f=f.status,f==="fulfilled"||f==="rejected"}function Fc(){}function Bu(f,_,S){switch(S=f[S],S===void 0?f.push(_):S!==_&&(_.then(Fc,Fc),_=S),_.status){case"fulfilled":return _.value;case"rejected":throw f=_.reason,Ha(f),f;default:if(typeof _.status=="string")_.then(Fc,Fc);else{if(f=Es,f!==null&&100<f.shellSuspendCounter)throw Error(s(482));f=_,f.status="pending",f.then(function(P){if(_.status==="pending"){var W=_;W.status="fulfilled",W.value=P}},function(P){if(_.status==="pending"){var W=_;W.status="rejected",W.reason=P}})}switch(_.status){case"fulfilled":return _.value;case"rejected":throw f=_.reason,Ha(f),f}throw zc=_,hl}}var zc=null;function Ad(){if(zc===null)throw Error(s(459));var f=zc;return zc=null,f}function Ha(f){if(f===hl||f===fl)throw Error(s(483))}var _a=!1;function Uc(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qc(f,_){f=f.updateQueue,_.updateQueue===f&&(_.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function va(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Br(f,_,S){var P=f.updateQueue;if(P===null)return null;if(P=P.shared,(In&2)!==0){var W=P.pending;return W===null?_.next=_:(_.next=W.next,W.next=_),P.pending=_,_=Mc(f),xo(f,null,S),_}return Oc(f,P,_,S),Mc(f)}function pl(f,_,S){if(_=_.updateQueue,_!==null&&(_=_.shared,(S&4194048)!==0)){var P=_.lanes;P&=f.pendingLanes,S|=P,_.lanes=S,gs(f,S)}}function Cd(f,_){var S=f.updateQueue,P=f.alternate;if(P!==null&&(P=P.updateQueue,S===P)){var W=null,ae=null;if(S=S.firstBaseUpdate,S!==null){do{var ye={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};ae===null?W=ae=ye:ae=ae.next=ye,S=S.next}while(S!==null);ae===null?W=ae=_:ae=ae.next=_}else W=ae=_;S={baseState:P.baseState,firstBaseUpdate:W,lastBaseUpdate:ae,shared:P.shared,callbacks:P.callbacks},f.updateQueue=S;return}f=S.lastBaseUpdate,f===null?S.firstBaseUpdate=_:f.next=_,S.lastBaseUpdate=_}var Fu=!1;function Hc(){if(Fu){var f=dl;if(f!==null)throw f}}function wo(f,_,S,P){Fu=!1;var W=f.updateQueue;_a=!1;var ae=W.firstBaseUpdate,ye=W.lastBaseUpdate,Se=W.shared.pending;if(Se!==null){W.shared.pending=null;var ke=Se,We=ke.next;ke.next=null,ye===null?ae=We:ye.next=We,ye=ke;var It=f.alternate;It!==null&&(It=It.updateQueue,Se=It.lastBaseUpdate,Se!==ye&&(Se===null?It.firstBaseUpdate=We:Se.next=We,It.lastBaseUpdate=ke))}if(ae!==null){var kt=W.baseState;ye=0,It=We=ke=null,Se=ae;do{var Je=Se.lane&-536870913,et=Je!==Se.lane;if(et?(ns&Je)===Je:(P&Je)===Je){Je!==0&&Je===ql&&(Fu=!0),It!==null&&(It=It.next={lane:0,tag:Se.tag,payload:Se.payload,callback:null,next:null});e:{var jn=f,Tn=Se;Je=_;var Ns=S;switch(Tn.tag){case 1:if(jn=Tn.payload,typeof jn=="function"){kt=jn.call(Ns,kt,Je);break e}kt=jn;break e;case 3:jn.flags=jn.flags&-65537|128;case 0:if(jn=Tn.payload,Je=typeof jn=="function"?jn.call(Ns,kt,Je):jn,Je==null)break e;kt=w({},kt,Je);break e;case 2:_a=!0}}Je=Se.callback,Je!==null&&(f.flags|=64,et&&(f.flags|=8192),et=W.callbacks,et===null?W.callbacks=[Je]:et.push(Je))}else et={lane:Je,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},It===null?(We=It=et,ke=kt):It=It.next=et,ye|=Je;if(Se=Se.next,Se===null){if(Se=W.shared.pending,Se===null)break;et=Se,Se=et.next,et.next=null,W.lastBaseUpdate=et,W.shared.pending=null}}while(!0);It===null&&(ke=kt),W.baseState=ke,W.firstBaseUpdate=We,W.lastBaseUpdate=It,ae===null&&(W.shared.lanes=0),Ss|=ye,f.lanes=ye,f.memoizedState=kt}}function En(f,_){if(typeof f!="function")throw Error(s(191,f));f.call(_)}function wh(f,_){var S=f.callbacks;if(S!==null)for(f.callbacks=null,f=0;f<S.length;f++)En(S[f],_)}var Hl=ve(null),Gc=ve(0);function Gl(f,_){f=Ca,Te(Gc,f),Te(Hl,_),Ca=f|_.baseLanes}function Pd(){Te(Gc,Ca),Te(Hl,Hl.current)}function Id(){Ca=Gc.current,Oe(Hl),Oe(Gc)}var So=0,zn=null,vs=null,Ys=null,$c=!1,Ga=!1,To=!1,zu=0,Yc=0,Di=null,$a=0;function Zn(){throw Error(s(321))}function ba(f,_){if(_===null)return!1;for(var S=0;S<_.length&&S<f.length;S++)if(!fi(f[S],_[S]))return!1;return!0}function ni(f,_,S,P,W,ae){return So=ae,zn=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,we.H=f===null||f.memoizedState===null?tf:Yd,To=!1,ae=S(P,W),To=!1,Ga&&(ae=Th(_,S,P,W)),Sh(f),ae}function Sh(f){we.H=Yu;var _=vs!==null&&vs.next!==null;if(So=0,Ys=vs=zn=null,$c=!1,Yc=0,Di=null,_)throw Error(s(300));f===null||bs||(f=f.dependencies,f!==null&&Vu(f)&&(bs=!0))}function Th(f,_,S,P){zn=f;var W=0;do{if(Ga&&(Di=null),Yc=0,Ga=!1,25<=W)throw Error(s(301));if(W+=1,Ys=vs=null,f.updateQueue!=null){var ae=f.updateQueue;ae.lastEffect=null,ae.events=null,ae.stores=null,ae.memoCache!=null&&(ae.memoCache.index=0)}we.H=Vf,ae=_(S,P)}while(Ga);return ae}function yr(){var f=we.H,_=f.useState()[0];return _=typeof _.then=="function"?Kc(_):_,f=f.useState()[0],(vs!==null?vs.memoizedState:null)!==f&&(zn.flags|=1024),_}function $i(){var f=zu!==0;return zu=0,f}function Nd(f,_,S){_.updateQueue=f.updateQueue,_.flags&=-2053,f.lanes&=~S}function jd(f){if($c){for(f=f.memoizedState;f!==null;){var _=f.queue;_!==null&&(_.pending=null),f=f.next}$c=!1}So=0,Ys=vs=zn=null,Ga=!1,Yc=zu=0,Di=null}function si(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ys===null?zn.memoizedState=Ys=f:Ys=Ys.next=f,Ys}function nr(){if(vs===null){var f=zn.alternate;f=f!==null?f.memoizedState:null}else f=vs.next;var _=Ys===null?zn.memoizedState:Ys.next;if(_!==null)Ys=_,vs=f;else{if(f===null)throw zn.alternate===null?Error(s(467)):Error(s(310));vs=f,f={memoizedState:vs.memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},Ys===null?zn.memoizedState=Ys=f:Ys=Ys.next=f}return Ys}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kc(f){var _=Yc;return Yc+=1,Di===null&&(Di=[]),f=Bu(Di,f,_),_=zn,(Ys===null?_.memoizedState:Ys.next)===null&&(_=_.alternate,we.H=_===null||_.memoizedState===null?tf:Yd),f}function Xc(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return Kc(f);if(f.$$typeof===U)return Pr(f)}throw Error(s(438,String(f)))}function Dd(f){var _=null,S=zn.updateQueue;if(S!==null&&(_=S.memoCache),_==null){var P=zn.alternate;P!==null&&(P=P.updateQueue,P!==null&&(P=P.memoCache,P!=null&&(_={data:P.data.map(function(W){return W.slice()}),index:0})))}if(_==null&&(_={data:[],index:0}),S===null&&(S=Uu(),zn.updateQueue=S),S.memoCache=_,S=_.data[_.index],S===void 0)for(S=_.data[_.index]=Array(f),P=0;P<f;P++)S[P]=re;return _.index++,S}function ri(f,_){return typeof _=="function"?_(f):_}function Ea(f){var _=nr();return Od(_,vs,f)}function Od(f,_,S){var P=f.queue;if(P===null)throw Error(s(311));P.lastRenderedReducer=S;var W=f.baseQueue,ae=P.pending;if(ae!==null){if(W!==null){var ye=W.next;W.next=ae.next,ae.next=ye}_.baseQueue=W=ae,P.pending=null}if(ae=f.baseState,W===null)f.memoizedState=ae;else{_=W.next;var Se=ye=null,ke=null,We=_,It=!1;do{var kt=We.lane&-536870913;if(kt!==We.lane?(ns&kt)===kt:(So&kt)===kt){var Je=We.revertLane;if(Je===0)ke!==null&&(ke=ke.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),kt===ql&&(It=!0);else if((So&Je)===Je){We=We.next,Je===ql&&(It=!0);continue}else kt={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},ke===null?(Se=ke=kt,ye=ae):ke=ke.next=kt,zn.lanes|=Je,Ss|=Je;kt=We.action,To&&S(ae,kt),ae=We.hasEagerState?We.eagerState:S(ae,kt)}else Je={lane:kt,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},ke===null?(Se=ke=Je,ye=ae):ke=ke.next=Je,zn.lanes|=kt,Ss|=kt;We=We.next}while(We!==null&&We!==_);if(ke===null?ye=ae:ke.next=Se,!fi(ae,f.memoizedState)&&(bs=!0,It&&(S=dl,S!==null)))throw S;f.memoizedState=ae,f.baseState=ye,f.baseQueue=ke,P.lastRenderedState=ae}return W===null&&(P.lanes=0),[f.memoizedState,P.dispatch]}function Md(f){var _=nr(),S=_.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=f;var P=S.dispatch,W=S.pending,ae=_.memoizedState;if(W!==null){S.pending=null;var ye=W=W.next;do ae=f(ae,ye.action),ye=ye.next;while(ye!==W);fi(ae,_.memoizedState)||(bs=!0),_.memoizedState=ae,_.baseQueue===null&&(_.baseState=ae),S.lastRenderedState=ae}return[ae,P]}function Ah(f,_,S){var P=zn,W=nr(),ae=is;if(ae){if(S===void 0)throw Error(s(407));S=S()}else S=_();var ye=!fi((vs||W).memoizedState,S);ye&&(W.memoizedState=S,bs=!0),W=W.queue;var Se=Ph.bind(null,P,W,f);if(Wc(2048,8,Se,[f]),W.getSnapshot!==_||ye||Ys!==null&&Ys.memoizedState.tag&1){if(P.flags|=2048,Kl(9,qu(),Ch.bind(null,P,W,S,_),null),Es===null)throw Error(s(349));ae||(So&124)!==0||$l(P,_,S)}return S}function $l(f,_,S){f.flags|=16384,f={getSnapshot:_,value:S},_=zn.updateQueue,_===null?(_=Uu(),zn.updateQueue=_,_.stores=[f]):(S=_.stores,S===null?_.stores=[f]:S.push(f))}function Ch(f,_,S,P){_.value=S,_.getSnapshot=P,Ih(_)&&Yl(f)}function Ph(f,_,S){return S(function(){Ih(_)&&Yl(f)})}function Ih(f){var _=f.getSnapshot;f=f.value;try{var S=_();return!fi(f,S)}catch{return!0}}function Yl(f){var _=fa(f,2);_!==null&&ar(_,f,2)}function Vd(f){var _=si();if(typeof f=="function"){var S=f;if(f=S(),To){Et(!0);try{S()}finally{Et(!1)}}}return _.memoizedState=_.baseState=f,_.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:f},_}function Nh(f,_,S,P){return f.baseState=S,Od(f,vs,typeof P=="function"?P:ri)}function Df(f,_,S,P,W){if($u(f))throw Error(s(485));if(f=_.action,f!==null){var ae={payload:W,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ye){ae.listeners.push(ye)}};we.T!==null?S(!0):ae.isTransition=!1,P(ae),S=_.pending,S===null?(ae.next=_.pending=ae,jh(_,ae)):(ae.next=S.next,_.pending=S.next=ae)}}function jh(f,_){var S=_.action,P=_.payload,W=f.state;if(_.isTransition){var ae=we.T,ye={};we.T=ye;try{var Se=S(W,P),ke=we.S;ke!==null&&ke(ye,Se),Dh(f,_,Se)}catch(We){kd(f,_,We)}finally{we.T=ae}}else try{ae=S(W,P),Dh(f,_,ae)}catch(We){kd(f,_,We)}}function Dh(f,_,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(P){Oh(f,_,P)},function(P){return kd(f,_,P)}):Oh(f,_,S)}function Oh(f,_,S){_.status="fulfilled",_.value=S,Mh(_),f.state=S,_=f.pending,_!==null&&(S=_.next,S===_?f.pending=null:(S=S.next,_.next=S,jh(f,S)))}function kd(f,_,S){var P=f.pending;if(f.pending=null,P!==null){P=P.next;do _.status="rejected",_.reason=S,Mh(_),_=_.next;while(_!==P)}f.action=null}function Mh(f){f=f.listeners;for(var _=0;_<f.length;_++)(0,f[_])()}function Vh(f,_){return _}function kh(f,_){if(is){var S=Es.formState;if(S!==null){e:{var P=zn;if(is){if(Vs){t:{for(var W=Vs,ae=ga;W.nodeType!==8;){if(!ae){W=null;break t}if(W=so(W.nextSibling),W===null){W=null;break t}}ae=W.data,W=ae==="F!"||ae==="F"?W:null}if(W){Vs=so(W.nextSibling),P=W.data==="F!";break e}}_o(P)}P=!1}P&&(_=S[0])}}return S=si(),S.memoizedState=S.baseState=_,P={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_},S.queue=P,S=Zh.bind(null,zn,P),P.dispatch=S,P=Vd(!1),ae=$d.bind(null,zn,!1,P.queue),P=si(),W={state:_,dispatch:null,action:f,pending:null},P.queue=W,S=Df.bind(null,zn,W,ae,S),W.dispatch=S,P.memoizedState=f,[_,S,!1]}function Lh(f){var _=nr();return Bh(_,vs,f)}function Bh(f,_,S){if(_=Od(f,_,Vh)[0],f=Ea(ri)[0],typeof _=="object"&&_!==null&&typeof _.then=="function")try{var P=Kc(_)}catch(ye){throw ye===hl?fl:ye}else P=_;_=nr();var W=_.queue,ae=W.dispatch;return S!==_.memoizedState&&(zn.flags|=2048,Kl(9,qu(),Fh.bind(null,W,S),null)),[P,ae,f]}function Fh(f,_){f.action=_}function zh(f){var _=nr(),S=vs;if(S!==null)return Bh(_,S,f);nr(),_=_.memoizedState,S=nr();var P=S.queue.dispatch;return S.memoizedState=f,[_,P,!1]}function Kl(f,_,S,P){return f={tag:f,create:S,deps:P,inst:_,next:null},_=zn.updateQueue,_===null&&(_=Uu(),zn.updateQueue=_),S=_.lastEffect,S===null?_.lastEffect=f.next=f:(P=S.next,S.next=f,f.next=P,_.lastEffect=f),f}function qu(){return{destroy:void 0,resource:void 0}}function Uh(){return nr().memoizedState}function Hu(f,_,S,P){var W=si();P=P===void 0?null:P,zn.flags|=f,W.memoizedState=Kl(1|_,qu(),S,P)}function Wc(f,_,S,P){var W=nr();P=P===void 0?null:P;var ae=W.memoizedState.inst;vs!==null&&P!==null&&ba(P,vs.memoizedState.deps)?W.memoizedState=Kl(_,ae,S,P):(zn.flags|=f,W.memoizedState=Kl(1|_,ae,S,P))}function Ld(f,_){Hu(8390656,8,f,_)}function Bd(f,_){Wc(2048,8,f,_)}function qh(f,_){return Wc(4,2,f,_)}function Fd(f,_){return Wc(4,4,f,_)}function zd(f,_){if(typeof _=="function"){f=f();var S=_(f);return function(){typeof S=="function"?S():_(null)}}if(_!=null)return f=f(),_.current=f,function(){_.current=null}}function Ud(f,_,S){S=S!=null?S.concat([f]):null,Wc(4,4,zd.bind(null,_,f),S)}function Qc(){}function Gu(f,_){var S=nr();_=_===void 0?null:_;var P=S.memoizedState;return _!==null&&ba(_,P[1])?P[0]:(S.memoizedState=[f,_],f)}function Hh(f,_){var S=nr();_=_===void 0?null:_;var P=S.memoizedState;if(_!==null&&ba(_,P[1]))return P[0];if(P=f(),To){Et(!0);try{f()}finally{Et(!1)}}return S.memoizedState=[P,_],P}function qd(f,_,S){return S===void 0||(So&1073741824)!==0?f.memoizedState=_:(f.memoizedState=S,f=Us(),zn.lanes|=f,Ss|=f,S)}function Gh(f,_,S,P){return fi(S,_)?S:Hl.current!==null?(f=qd(f,S,P),fi(f,_)||(bs=!0),f):(So&42)===0?(bs=!0,f.memoizedState=S):(f=Us(),zn.lanes|=f,Ss|=f,_)}function $h(f,_,S,P,W){var ae=de.p;de.p=ae!==0&&8>ae?ae:8;var ye=we.T,Se={};we.T=Se,$d(f,!1,_,S);try{var ke=W(),We=we.S;if(We!==null&&We(Se,ke),ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var It=Eh(ke,P);Zc(f,_,It,Qs(f))}else Zc(f,_,P,Qs(f))}catch(kt){Zc(f,_,{then:function(){},status:"rejected",reason:kt},Qs())}finally{de.p=ae,we.T=ye}}function Yh(){}function Hd(f,_,S,P){if(f.tag!==5)throw Error(s(476));var W=Kh(f).queue;$h(f,W,_,me,S===null?Yh:function(){return Xh(f),S(P)})}function Kh(f){var _=f.memoizedState;if(_!==null)return _;_={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:me},next:null};var S={};return _.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:S},next:null},f.memoizedState=_,f=f.alternate,f!==null&&(f.memoizedState=_),_}function Xh(f){var _=Kh(f).next.queue;Zc(f,_,{},Qs())}function Gd(){return Pr(dh)}function Wh(){return nr().memoizedState}function Qh(){return nr().memoizedState}function Of(f){for(var _=f.return;_!==null;){switch(_.tag){case 24:case 3:var S=Qs();f=va(S);var P=Br(_,f,S);P!==null&&(ar(P,_,S),pl(P,_,S)),_={cache:Ul()},f.payload=_;return}_=_.return}}function Mf(f,_,S){var P=Qs();S={lane:P,revertLane:0,action:S,hasEagerState:!1,eagerState:null,next:null},$u(f)?Jh(_,S):(S=yo(f,_,S,P),S!==null&&(ar(S,f,P),ef(S,_,P)))}function Zh(f,_,S){var P=Qs();Zc(f,_,S,P)}function Zc(f,_,S,P){var W={lane:P,revertLane:0,action:S,hasEagerState:!1,eagerState:null,next:null};if($u(f))Jh(_,W);else{var ae=f.alternate;if(f.lanes===0&&(ae===null||ae.lanes===0)&&(ae=_.lastRenderedReducer,ae!==null))try{var ye=_.lastRenderedState,Se=ae(ye,S);if(W.hasEagerState=!0,W.eagerState=Se,fi(Se,ye))return Oc(f,_,W,0),Es===null&&mi(),!1}catch{}finally{}if(S=yo(f,_,W,P),S!==null)return ar(S,f,P),ef(S,_,P),!0}return!1}function $d(f,_,S,P){if(P={lane:2,revertLane:Ff(),action:P,hasEagerState:!1,eagerState:null,next:null},$u(f)){if(_)throw Error(s(479))}else _=yo(f,S,P,2),_!==null&&ar(_,f,2)}function $u(f){var _=f.alternate;return f===zn||_!==null&&_===zn}function Jh(f,_){Ga=$c=!0;var S=f.pending;S===null?_.next=_:(_.next=S.next,S.next=_),f.pending=_}function ef(f,_,S){if((S&4194048)!==0){var P=_.lanes;P&=f.pendingLanes,S|=P,_.lanes=S,gs(f,S)}}var Yu={readContext:Pr,use:Xc,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useLayoutEffect:Zn,useInsertionEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useSyncExternalStore:Zn,useId:Zn,useHostTransitionStatus:Zn,useFormState:Zn,useActionState:Zn,useOptimistic:Zn,useMemoCache:Zn,useCacheRefresh:Zn},tf={readContext:Pr,use:Xc,useCallback:function(f,_){return si().memoizedState=[f,_===void 0?null:_],f},useContext:Pr,useEffect:Ld,useImperativeHandle:function(f,_,S){S=S!=null?S.concat([f]):null,Hu(4194308,4,zd.bind(null,_,f),S)},useLayoutEffect:function(f,_){return Hu(4194308,4,f,_)},useInsertionEffect:function(f,_){Hu(4,2,f,_)},useMemo:function(f,_){var S=si();_=_===void 0?null:_;var P=f();if(To){Et(!0);try{f()}finally{Et(!1)}}return S.memoizedState=[P,_],P},useReducer:function(f,_,S){var P=si();if(S!==void 0){var W=S(_);if(To){Et(!0);try{S(_)}finally{Et(!1)}}}else W=_;return P.memoizedState=P.baseState=W,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:W},P.queue=f,f=f.dispatch=Mf.bind(null,zn,f),[P.memoizedState,f]},useRef:function(f){var _=si();return f={current:f},_.memoizedState=f},useState:function(f){f=Vd(f);var _=f.queue,S=Zh.bind(null,zn,_);return _.dispatch=S,[f.memoizedState,S]},useDebugValue:Qc,useDeferredValue:function(f,_){var S=si();return qd(S,f,_)},useTransition:function(){var f=Vd(!1);return f=$h.bind(null,zn,f.queue,!0,!1),si().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,_,S){var P=zn,W=si();if(is){if(S===void 0)throw Error(s(407));S=S()}else{if(S=_(),Es===null)throw Error(s(349));(ns&124)!==0||$l(P,_,S)}W.memoizedState=S;var ae={value:S,getSnapshot:_};return W.queue=ae,Ld(Ph.bind(null,P,ae,f),[f]),P.flags|=2048,Kl(9,qu(),Ch.bind(null,P,ae,S,_),null),S},useId:function(){var f=si(),_=Es.identifierPrefix;if(is){var S=Hi,P=pa;S=(P&~(1<<32-un(P)-1)).toString(32)+S,_="«"+_+"R"+S,S=zu++,0<S&&(_+="H"+S.toString(32)),_+="»"}else S=$a++,_="«"+_+"r"+S.toString(32)+"»";return f.memoizedState=_},useHostTransitionStatus:Gd,useFormState:kh,useActionState:kh,useOptimistic:function(f){var _=si();_.memoizedState=_.baseState=f;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return _.queue=S,_=$d.bind(null,zn,!0,S),S.dispatch=_,[f,_]},useMemoCache:Dd,useCacheRefresh:function(){return si().memoizedState=Of.bind(null,zn)}},Yd={readContext:Pr,use:Xc,useCallback:Gu,useContext:Pr,useEffect:Bd,useImperativeHandle:Ud,useInsertionEffect:qh,useLayoutEffect:Fd,useMemo:Hh,useReducer:Ea,useRef:Uh,useState:function(){return Ea(ri)},useDebugValue:Qc,useDeferredValue:function(f,_){var S=nr();return Gh(S,vs.memoizedState,f,_)},useTransition:function(){var f=Ea(ri)[0],_=nr().memoizedState;return[typeof f=="boolean"?f:Kc(f),_]},useSyncExternalStore:Ah,useId:Wh,useHostTransitionStatus:Gd,useFormState:Lh,useActionState:Lh,useOptimistic:function(f,_){var S=nr();return Nh(S,vs,f,_)},useMemoCache:Dd,useCacheRefresh:Qh},Vf={readContext:Pr,use:Xc,useCallback:Gu,useContext:Pr,useEffect:Bd,useImperativeHandle:Ud,useInsertionEffect:qh,useLayoutEffect:Fd,useMemo:Hh,useReducer:Md,useRef:Uh,useState:function(){return Md(ri)},useDebugValue:Qc,useDeferredValue:function(f,_){var S=nr();return vs===null?qd(S,f,_):Gh(S,vs.memoizedState,f,_)},useTransition:function(){var f=Md(ri)[0],_=nr().memoizedState;return[typeof f=="boolean"?f:Kc(f),_]},useSyncExternalStore:Ah,useId:Wh,useHostTransitionStatus:Gd,useFormState:zh,useActionState:zh,useOptimistic:function(f,_){var S=nr();return vs!==null?Nh(S,vs,f,_):(S.baseState=f,[f,S.queue.dispatch])},useMemoCache:Dd,useCacheRefresh:Qh},Xl=null,Fr=0;function Jc(f){var _=Fr;return Fr+=1,Xl===null&&(Xl=[]),Bu(Xl,f,_)}function gl(f,_){_=_.props.ref,f.ref=_!==void 0?_:null}function eu(f,_){throw _.$$typeof===T?Error(s(525)):(f=Object.prototype.toString.call(_),Error(s(31,f==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":f)))}function Kd(f){var _=f._init;return _(f._payload)}function Xd(f){function _(He,ze){if(f){var Xe=He.deletions;Xe===null?(He.deletions=[ze],He.flags|=16):Xe.push(ze)}}function S(He,ze){if(!f)return null;for(;ze!==null;)_(He,ze),ze=ze.sibling;return null}function P(He){for(var ze=new Map;He!==null;)He.key!==null?ze.set(He.key,He):ze.set(He.index,He),He=He.sibling;return ze}function W(He,ze){return He=ma(He,ze),He.index=0,He.sibling=null,He}function ae(He,ze,Xe){return He.index=Xe,f?(Xe=He.alternate,Xe!==null?(Xe=Xe.index,Xe<ze?(He.flags|=67108866,ze):Xe):(He.flags|=67108866,ze)):(He.flags|=1048576,ze)}function ye(He){return f&&He.alternate===null&&(He.flags|=67108866),He}function Se(He,ze,Xe,Nt){return ze===null||ze.tag!==6?(ze=Nu(Xe,He.mode,Nt),ze.return=He,ze):(ze=W(ze,Xe),ze.return=He,ze)}function ke(He,ze,Xe,Nt){var yn=Xe.type;return yn===j?It(He,ze,Xe.props.children,Nt,Xe.key):ze!==null&&(ze.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===K&&Kd(yn)===ze.type)?(ze=W(ze,Xe.props),gl(ze,Xe),ze.return=He,ze):(ze=Bl(Xe.type,Xe.key,Xe.props,null,He.mode,Nt),gl(ze,Xe),ze.return=He,ze)}function We(He,ze,Xe,Nt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==Xe.containerInfo||ze.stateNode.implementation!==Xe.implementation?(ze=kc(Xe,He.mode,Nt),ze.return=He,ze):(ze=W(ze,Xe.children||[]),ze.return=He,ze)}function It(He,ze,Xe,Nt,yn){return ze===null||ze.tag!==7?(ze=za(Xe,He.mode,Nt,yn),ze.return=He,ze):(ze=W(ze,Xe),ze.return=He,ze)}function kt(He,ze,Xe){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ze=Nu(""+ze,He.mode,Xe),ze.return=He,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case A:return Xe=Bl(ze.type,ze.key,ze.props,null,He.mode,Xe),gl(Xe,ze),Xe.return=He,Xe;case C:return ze=kc(ze,He.mode,Xe),ze.return=He,ze;case K:var Nt=ze._init;return ze=Nt(ze._payload),kt(He,ze,Xe)}if(Ee(ze)||le(ze))return ze=za(ze,He.mode,Xe,null),ze.return=He,ze;if(typeof ze.then=="function")return kt(He,Jc(ze),Xe);if(ze.$$typeof===U)return kt(He,ku(He,ze),Xe);eu(He,ze)}return null}function Je(He,ze,Xe,Nt){var yn=ze!==null?ze.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return yn!==null?null:Se(He,ze,""+Xe,Nt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case A:return Xe.key===yn?ke(He,ze,Xe,Nt):null;case C:return Xe.key===yn?We(He,ze,Xe,Nt):null;case K:return yn=Xe._init,Xe=yn(Xe._payload),Je(He,ze,Xe,Nt)}if(Ee(Xe)||le(Xe))return yn!==null?null:It(He,ze,Xe,Nt,null);if(typeof Xe.then=="function")return Je(He,ze,Jc(Xe),Nt);if(Xe.$$typeof===U)return Je(He,ze,ku(He,Xe),Nt);eu(He,Xe)}return null}function et(He,ze,Xe,Nt,yn){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return He=He.get(Xe)||null,Se(ze,He,""+Nt,yn);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case A:return He=He.get(Nt.key===null?Xe:Nt.key)||null,ke(ze,He,Nt,yn);case C:return He=He.get(Nt.key===null?Xe:Nt.key)||null,We(ze,He,Nt,yn);case K:var Jn=Nt._init;return Nt=Jn(Nt._payload),et(He,ze,Xe,Nt,yn)}if(Ee(Nt)||le(Nt))return He=He.get(Xe)||null,It(ze,He,Nt,yn,null);if(typeof Nt.then=="function")return et(He,ze,Xe,Jc(Nt),yn);if(Nt.$$typeof===U)return et(He,ze,Xe,ku(ze,Nt),yn);eu(ze,Nt)}return null}function jn(He,ze,Xe,Nt){for(var yn=null,Jn=null,bn=ze,Cn=ze=0,Or=null;bn!==null&&Cn<Xe.length;Cn++){bn.index>Cn?(Or=bn,bn=null):Or=bn.sibling;var ys=Je(He,bn,Xe[Cn],Nt);if(ys===null){bn===null&&(bn=Or);break}f&&bn&&ys.alternate===null&&_(He,bn),ze=ae(ys,ze,Cn),Jn===null?yn=ys:Jn.sibling=ys,Jn=ys,bn=Or}if(Cn===Xe.length)return S(He,bn),is&&Ni(He,Cn),yn;if(bn===null){for(;Cn<Xe.length;Cn++)bn=kt(He,Xe[Cn],Nt),bn!==null&&(ze=ae(bn,ze,Cn),Jn===null?yn=bn:Jn.sibling=bn,Jn=bn);return is&&Ni(He,Cn),yn}for(bn=P(bn);Cn<Xe.length;Cn++)Or=et(bn,He,Cn,Xe[Cn],Nt),Or!==null&&(f&&Or.alternate!==null&&bn.delete(Or.key===null?Cn:Or.key),ze=ae(Or,ze,Cn),Jn===null?yn=Or:Jn.sibling=Or,Jn=Or);return f&&bn.forEach(function(pc){return _(He,pc)}),is&&Ni(He,Cn),yn}function Tn(He,ze,Xe,Nt){if(Xe==null)throw Error(s(151));for(var yn=null,Jn=null,bn=ze,Cn=ze=0,Or=null,ys=Xe.next();bn!==null&&!ys.done;Cn++,ys=Xe.next()){bn.index>Cn?(Or=bn,bn=null):Or=bn.sibling;var pc=Je(He,bn,ys.value,Nt);if(pc===null){bn===null&&(bn=Or);break}f&&bn&&pc.alternate===null&&_(He,bn),ze=ae(pc,ze,Cn),Jn===null?yn=pc:Jn.sibling=pc,Jn=pc,bn=Or}if(ys.done)return S(He,bn),is&&Ni(He,Cn),yn;if(bn===null){for(;!ys.done;Cn++,ys=Xe.next())ys=kt(He,ys.value,Nt),ys!==null&&(ze=ae(ys,ze,Cn),Jn===null?yn=ys:Jn.sibling=ys,Jn=ys);return is&&Ni(He,Cn),yn}for(bn=P(bn);!ys.done;Cn++,ys=Xe.next())ys=et(bn,He,Cn,ys.value,Nt),ys!==null&&(f&&ys.alternate!==null&&bn.delete(ys.key===null?Cn:ys.key),ze=ae(ys,ze,Cn),Jn===null?yn=ys:Jn.sibling=ys,Jn=ys);return f&&bn.forEach(function(Sp){return _(He,Sp)}),is&&Ni(He,Cn),yn}function Ns(He,ze,Xe,Nt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===j&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case A:e:{for(var yn=Xe.key;ze!==null;){if(ze.key===yn){if(yn=Xe.type,yn===j){if(ze.tag===7){S(He,ze.sibling),Nt=W(ze,Xe.props.children),Nt.return=He,He=Nt;break e}}else if(ze.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===K&&Kd(yn)===ze.type){S(He,ze.sibling),Nt=W(ze,Xe.props),gl(Nt,Xe),Nt.return=He,He=Nt;break e}S(He,ze);break}else _(He,ze);ze=ze.sibling}Xe.type===j?(Nt=za(Xe.props.children,He.mode,Nt,Xe.key),Nt.return=He,He=Nt):(Nt=Bl(Xe.type,Xe.key,Xe.props,null,He.mode,Nt),gl(Nt,Xe),Nt.return=He,He=Nt)}return ye(He);case C:e:{for(yn=Xe.key;ze!==null;){if(ze.key===yn)if(ze.tag===4&&ze.stateNode.containerInfo===Xe.containerInfo&&ze.stateNode.implementation===Xe.implementation){S(He,ze.sibling),Nt=W(ze,Xe.children||[]),Nt.return=He,He=Nt;break e}else{S(He,ze);break}else _(He,ze);ze=ze.sibling}Nt=kc(Xe,He.mode,Nt),Nt.return=He,He=Nt}return ye(He);case K:return yn=Xe._init,Xe=yn(Xe._payload),Ns(He,ze,Xe,Nt)}if(Ee(Xe))return jn(He,ze,Xe,Nt);if(le(Xe)){if(yn=le(Xe),typeof yn!="function")throw Error(s(150));return Xe=yn.call(Xe),Tn(He,ze,Xe,Nt)}if(typeof Xe.then=="function")return Ns(He,ze,Jc(Xe),Nt);if(Xe.$$typeof===U)return Ns(He,ze,ku(He,Xe),Nt);eu(He,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint"?(Xe=""+Xe,ze!==null&&ze.tag===6?(S(He,ze.sibling),Nt=W(ze,Xe),Nt.return=He,He=Nt):(S(He,ze),Nt=Nu(Xe,He.mode,Nt),Nt.return=He,He=Nt),ye(He)):S(He,ze)}return function(He,ze,Xe,Nt){try{Fr=0;var yn=Ns(He,ze,Xe,Nt);return Xl=null,yn}catch(bn){if(bn===hl||bn===fl)throw bn;var Jn=Jr(29,bn,null,He.mode);return Jn.lanes=Nt,Jn.return=He,Jn}finally{}}}var Wl=Xd(!0),Wd=Xd(!1),gi=ve(null),Ra=null;function Ao(f){var _=f.alternate;Te(Kn,Kn.current&1),Te(gi,f),Ra===null&&(_===null||Hl.current!==null||_.memoizedState!==null)&&(Ra=f)}function nf(f){if(f.tag===22){if(Te(Kn,Kn.current),Te(gi,f),Ra===null){var _=f.alternate;_!==null&&_.memoizedState!==null&&(Ra=f)}}else Ya()}function Ya(){Te(Kn,Kn.current),Te(gi,gi.current)}function Ka(f){Oe(gi),Ra===f&&(Ra=null),Oe(Kn)}var Kn=ve(0);function tu(f){for(var _=f;_!==null;){if(_.tag===13){var S=_.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||Zf(S)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}function Qd(f,_,S,P){_=f.memoizedState,S=S(P,_),S=S==null?_:w({},_,S),f.memoizedState=S,f.lanes===0&&(f.updateQueue.baseState=S)}var Ku={enqueueSetState:function(f,_,S){f=f._reactInternals;var P=Qs(),W=va(P);W.payload=_,S!=null&&(W.callback=S),_=Br(f,W,P),_!==null&&(ar(_,f,P),pl(_,f,P))},enqueueReplaceState:function(f,_,S){f=f._reactInternals;var P=Qs(),W=va(P);W.tag=1,W.payload=_,S!=null&&(W.callback=S),_=Br(f,W,P),_!==null&&(ar(_,f,P),pl(_,f,P))},enqueueForceUpdate:function(f,_){f=f._reactInternals;var S=Qs(),P=va(S);P.tag=2,_!=null&&(P.callback=_),_=Br(f,P,S),_!==null&&(ar(_,f,S),pl(_,f,S))}};function Zd(f,_,S,P,W,ae,ye){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(P,ae,ye):_.prototype&&_.prototype.isPureReactComponent?!Ml(S,P)||!Ml(W,ae):!0}function yl(f,_,S,P){f=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(S,P),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(S,P),_.state!==f&&Ku.enqueueReplaceState(_,_.state,null)}function Xa(f,_){var S=_;if("ref"in _){S={};for(var P in _)P!=="ref"&&(S[P]=_[P])}if(f=f.defaultProps){S===_&&(S=w({},S));for(var W in f)S[W]===void 0&&(S[W]=f[W])}return S}var Wa=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)};function xl(f){Wa(f)}function ii(f){console.error(f)}function sf(f){Wa(f)}function Xu(f,_){try{var S=f.onUncaughtError;S(_.value,{componentStack:_.stack})}catch(P){setTimeout(function(){throw P})}}function nu(f,_,S){try{var P=f.onCaughtError;P(S.value,{componentStack:S.stack,errorBoundary:_.tag===1?_.stateNode:null})}catch(W){setTimeout(function(){throw W})}}function Ql(f,_,S){return S=va(S),S.tag=3,S.payload={element:null},S.callback=function(){Xu(f,_)},S}function su(f){return f=va(f),f.tag=3,f}function Wu(f,_,S,P){var W=S.type.getDerivedStateFromError;if(typeof W=="function"){var ae=P.value;f.payload=function(){return W(ae)},f.callback=function(){nu(_,S,P)}}var ye=S.stateNode;ye!==null&&typeof ye.componentDidCatch=="function"&&(f.callback=function(){nu(_,S,P),typeof W!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var Se=P.stack;this.componentDidCatch(P.value,{componentStack:Se!==null?Se:""})})}function kf(f,_,S,P,W){if(S.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){if(_=S.alternate,_!==null&&cl(_,S,W,!0),S=gi.current,S!==null){switch(S.tag){case 13:return Ra===null?Ia():S.alternate===null&&Un===0&&(Un=3),S.flags&=-257,S.flags|=65536,S.lanes=W,P===Ro?S.flags|=16384:(_=S.updateQueue,_===null?S.updateQueue=new Set([P]):_.add(P),Bt(f,P,W)),!1;case 22:return S.flags|=65536,P===Ro?S.flags|=16384:(_=S.updateQueue,_===null?(_={transitions:null,markerInstances:null,retryQueue:new Set([P])},S.updateQueue=_):(S=_.retryQueue,S===null?_.retryQueue=new Set([P]):S.add(P)),Bt(f,P,W)),!1}throw Error(s(435,S.tag))}return Bt(f,P,W),Ia(),!1}if(is)return _=gi.current,_!==null?((_.flags&65536)===0&&(_.flags|=256),_.flags|=65536,_.lanes=W,P!==bd&&(f=Error(s(422),{cause:P}),zl(pr(f,S)))):(P!==bd&&(_=Error(s(423),{cause:P}),zl(pr(_,S))),f=f.current.alternate,f.flags|=65536,W&=-W,f.lanes|=W,P=pr(P,S),W=Ql(f.stateNode,P,W),Cd(f,W),Un!==4&&(Un=2)),!1;var ae=Error(s(520),{cause:P});if(ae=pr(ae,S),ko===null?ko=[ae]:ko.push(ae),Un!==4&&(Un=2),_===null)return!0;P=pr(P,S),S=_;do{switch(S.tag){case 3:return S.flags|=65536,f=W&-W,S.lanes|=f,f=Ql(S.stateNode,P,f),Cd(S,f),!1;case 1:if(_=S.type,ae=S.stateNode,(S.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(Bo===null||!Bo.has(ae))))return S.flags|=65536,W&=-W,S.lanes|=W,W=su(W),Wu(W,f,S,P),Cd(S,W),!1}S=S.return}while(S!==null);return!1}var rf=Error(s(461)),bs=!1;function xr(f,_,S,P){_.child=f===null?Wd(_,null,S,P):Wl(_,f.child,S,P)}function af(f,_,S,P,W){S=S.render;var ae=_.ref;if("ref"in P){var ye={};for(var Se in P)Se!=="ref"&&(ye[Se]=P[Se])}else ye=P;return Eo(_),P=ni(f,_,S,ye,ae,W),Se=$i(),f!==null&&!bs?(Nd(f,_,W),Os(f,_,W)):(is&&Se&&ju(_),_.flags|=1,xr(f,_,P,W),_.child)}function Qu(f,_,S,P,W){if(f===null){var ae=S.type;return typeof ae=="function"&&!Ll(ae)&&ae.defaultProps===void 0&&S.compare===null?(_.tag=15,_.type=ae,of(f,_,ae,P,W)):(f=Bl(S.type,null,P,_,_.mode,W),f.ref=_.ref,f.return=_,_.child=f)}if(ae=f.child,!_l(f,W)){var ye=ae.memoizedProps;if(S=S.compare,S=S!==null?S:Ml,S(ye,P)&&f.ref===_.ref)return Os(f,_,W)}return _.flags|=1,f=ma(ae,P),f.ref=_.ref,f.return=_,_.child=f}function of(f,_,S,P,W){if(f!==null){var ae=f.memoizedProps;if(Ml(ae,P)&&f.ref===_.ref)if(bs=!1,_.pendingProps=P=ae,_l(f,W))(f.flags&131072)!==0&&(bs=!0);else return _.lanes=f.lanes,Os(f,_,W)}return zr(f,_,S,P,W)}function lf(f,_,S){var P=_.pendingProps,W=P.children,ae=f!==null?f.memoizedState:null;if(P.mode==="hidden"){if((_.flags&128)!==0){if(P=ae!==null?ae.baseLanes|S:S,f!==null){for(W=_.child=f.child,ae=0;W!==null;)ae=ae|W.lanes|W.childLanes,W=W.sibling;_.childLanes=ae&~P}else _.childLanes=0,_.child=null;return cf(f,_,P,S)}if((S&536870912)!==0)_.memoizedState={baseLanes:0,cachePool:null},f!==null&&Lu(_,ae!==null?ae.cachePool:null),ae!==null?Gl(_,ae):Pd(),nf(_);else return _.lanes=_.childLanes=536870912,cf(f,_,ae!==null?ae.baseLanes|S:S,S)}else ae!==null?(Lu(_,ae.cachePool),Gl(_,ae),Ya(),_.memoizedState=null):(f!==null&&Lu(_,null),Pd(),Ya());return xr(f,_,W,S),_.child}function cf(f,_,S,P){var W=Fn();return W=W===null?null:{parent:tr._currentValue,pool:W},_.memoizedState={baseLanes:S,cachePool:W},f!==null&&Lu(_,null),Pd(),nf(_),f!==null&&cl(f,_,P,!0),null}function Co(f,_){var S=_.ref;if(S===null)f!==null&&f.ref!==null&&(_.flags|=4194816);else{if(typeof S!="function"&&typeof S!="object")throw Error(s(284));(f===null||f.ref!==S)&&(_.flags|=4194816)}}function zr(f,_,S,P,W){return Eo(_),S=ni(f,_,S,P,void 0,W),P=$i(),f!==null&&!bs?(Nd(f,_,W),Os(f,_,W)):(is&&P&&ju(_),_.flags|=1,xr(f,_,S,W),_.child)}function Zu(f,_,S,P,W,ae){return Eo(_),_.updateQueue=null,S=Th(_,P,S,W),Sh(f),P=$i(),f!==null&&!bs?(Nd(f,_,ae),Os(f,_,ae)):(is&&P&&ju(_),_.flags|=1,xr(f,_,S,ae),_.child)}function Jd(f,_,S,P,W){if(Eo(_),_.stateNode===null){var ae=il,ye=S.contextType;typeof ye=="object"&&ye!==null&&(ae=Pr(ye)),ae=new S(P,ae),_.memoizedState=ae.state!==null&&ae.state!==void 0?ae.state:null,ae.updater=Ku,_.stateNode=ae,ae._reactInternals=_,ae=_.stateNode,ae.props=P,ae.state=_.memoizedState,ae.refs={},Uc(_),ye=S.contextType,ae.context=typeof ye=="object"&&ye!==null?Pr(ye):il,ae.state=_.memoizedState,ye=S.getDerivedStateFromProps,typeof ye=="function"&&(Qd(_,S,ye,P),ae.state=_.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof ae.getSnapshotBeforeUpdate=="function"||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(ye=ae.state,typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount(),ye!==ae.state&&Ku.enqueueReplaceState(ae,ae.state,null),wo(_,P,ae,W),Hc(),ae.state=_.memoizedState),typeof ae.componentDidMount=="function"&&(_.flags|=4194308),P=!0}else if(f===null){ae=_.stateNode;var Se=_.memoizedProps,ke=Xa(S,Se);ae.props=ke;var We=ae.context,It=S.contextType;ye=il,typeof It=="object"&&It!==null&&(ye=Pr(It));var kt=S.getDerivedStateFromProps;It=typeof kt=="function"||typeof ae.getSnapshotBeforeUpdate=="function",Se=_.pendingProps!==Se,It||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Se||We!==ye)&&yl(_,ae,P,ye),_a=!1;var Je=_.memoizedState;ae.state=Je,wo(_,P,ae,W),Hc(),We=_.memoizedState,Se||Je!==We||_a?(typeof kt=="function"&&(Qd(_,S,kt,P),We=_.memoizedState),(ke=_a||Zd(_,S,ke,P,Je,We,ye))?(It||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(_.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=P,_.memoizedState=We),ae.props=P,ae.state=We,ae.context=ye,P=ke):(typeof ae.componentDidMount=="function"&&(_.flags|=4194308),P=!1)}else{ae=_.stateNode,qc(f,_),ye=_.memoizedProps,It=Xa(S,ye),ae.props=It,kt=_.pendingProps,Je=ae.context,We=S.contextType,ke=il,typeof We=="object"&&We!==null&&(ke=Pr(We)),Se=S.getDerivedStateFromProps,(We=typeof Se=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(ye!==kt||Je!==ke)&&yl(_,ae,P,ke),_a=!1,Je=_.memoizedState,ae.state=Je,wo(_,P,ae,W),Hc();var et=_.memoizedState;ye!==kt||Je!==et||_a||f!==null&&f.dependencies!==null&&Vu(f.dependencies)?(typeof Se=="function"&&(Qd(_,S,Se,P),et=_.memoizedState),(It=_a||Zd(_,S,It,P,Je,et,ke)||f!==null&&f.dependencies!==null&&Vu(f.dependencies))?(We||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(P,et,ke),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(P,et,ke)),typeof ae.componentDidUpdate=="function"&&(_.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof ae.componentDidUpdate!="function"||ye===f.memoizedProps&&Je===f.memoizedState||(_.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||ye===f.memoizedProps&&Je===f.memoizedState||(_.flags|=1024),_.memoizedProps=P,_.memoizedState=et),ae.props=P,ae.state=et,ae.context=ke,P=It):(typeof ae.componentDidUpdate!="function"||ye===f.memoizedProps&&Je===f.memoizedState||(_.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||ye===f.memoizedProps&&Je===f.memoizedState||(_.flags|=1024),P=!1)}return ae=P,Co(f,_),P=(_.flags&128)!==0,ae||P?(ae=_.stateNode,S=P&&typeof S.getDerivedStateFromError!="function"?null:ae.render(),_.flags|=1,f!==null&&P?(_.child=Wl(_,f.child,null,W),_.child=Wl(_,null,S,W)):xr(f,_,S,W),_.memoizedState=ae.state,f=_.child):f=Os(f,_,W),f}function Ju(f,_,S,P){return Fl(),_.flags|=256,xr(f,_,S,P),_.child}var ed={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Po(f){return{baseLanes:f,cachePool:ti()}}function Io(f,_,S){return f=f!==null?f.childLanes&~S:0,_&&(f|=br),f}function ru(f,_,S){var P=_.pendingProps,W=!1,ae=(_.flags&128)!==0,ye;if((ye=ae)||(ye=f!==null&&f.memoizedState===null?!1:(Kn.current&2)!==0),ye&&(W=!0,_.flags&=-129),ye=(_.flags&32)!==0,_.flags&=-33,f===null){if(is){if(W?Ao(_):Ya(),is){var Se=Vs,ke;if(ke=Se){e:{for(ke=Se,Se=ga;ke.nodeType!==8;){if(!Se){Se=null;break e}if(ke=so(ke.nextSibling),ke===null){Se=null;break e}}Se=ke}Se!==null?(_.memoizedState={dehydrated:Se,treeContext:ei!==null?{id:pa,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},ke=Jr(18,null,null,0),ke.stateNode=Se,ke.return=_,_.child=ke,Cr=_,Vs=null,ke=!0):ke=!1}ke||_o(_)}if(Se=_.memoizedState,Se!==null&&(Se=Se.dehydrated,Se!==null))return Zf(Se)?_.lanes=32:_.lanes=536870912,null;Ka(_)}return Se=P.children,P=P.fallback,W?(Ya(),W=_.mode,Se=Ur({mode:"hidden",children:Se},W),P=za(P,W,S,null),Se.return=_,P.return=_,Se.sibling=P,_.child=Se,W=_.child,W.memoizedState=Po(S),W.childLanes=Io(f,ye,S),_.memoizedState=ed,P):(Ao(_),Zl(_,Se))}if(ke=f.memoizedState,ke!==null&&(Se=ke.dehydrated,Se!==null)){if(ae)_.flags&256?(Ao(_),_.flags&=-257,_=ai(f,_,S)):_.memoizedState!==null?(Ya(),_.child=f.child,_.flags|=128,_=null):(Ya(),W=P.fallback,Se=_.mode,P=Ur({mode:"visible",children:P.children},Se),W=za(W,Se,S,null),W.flags|=2,P.return=_,W.return=_,P.sibling=W,_.child=P,Wl(_,f.child,null,S),P=_.child,P.memoizedState=Po(S),P.childLanes=Io(f,ye,S),_.memoizedState=ed,_=W);else if(Ao(_),Zf(Se)){if(ye=Se.nextSibling&&Se.nextSibling.dataset,ye)var We=ye.dgst;ye=We,P=Error(s(419)),P.stack="",P.digest=ye,zl({value:P,source:null,stack:null}),_=ai(f,_,S)}else if(bs||cl(f,_,S,!1),ye=(S&f.childLanes)!==0,bs||ye){if(ye=Es,ye!==null&&(P=S&-S,P=(P&42)!==0?1:cs(P),P=(P&(ye.suspendedLanes|S))!==0?0:P,P!==0&&P!==ke.retryLane))throw ke.retryLane=P,fa(f,P),ar(ye,f,P),rf;Se.data==="$?"||Ia(),_=ai(f,_,S)}else Se.data==="$?"?(_.flags|=192,_.child=f.child,_=null):(f=ke.treeContext,Vs=so(Se.nextSibling),Cr=_,is=!0,ol=null,ga=!1,f!==null&&(pi[Ii++]=pa,pi[Ii++]=Hi,pi[Ii++]=ei,pa=f.id,Hi=f.overflow,ei=_),_=Zl(_,P.children),_.flags|=4096);return _}return W?(Ya(),W=P.fallback,Se=_.mode,ke=f.child,We=ke.sibling,P=ma(ke,{mode:"hidden",children:P.children}),P.subtreeFlags=ke.subtreeFlags&65011712,We!==null?W=ma(We,W):(W=za(W,Se,S,null),W.flags|=2),W.return=_,P.return=_,P.sibling=W,_.child=P,P=W,W=_.child,Se=f.child.memoizedState,Se===null?Se=Po(S):(ke=Se.cachePool,ke!==null?(We=tr._currentValue,ke=ke.parent!==We?{parent:We,pool:We}:ke):ke=ti(),Se={baseLanes:Se.baseLanes|S,cachePool:ke}),W.memoizedState=Se,W.childLanes=Io(f,ye,S),_.memoizedState=ed,P):(Ao(_),S=f.child,f=S.sibling,S=ma(S,{mode:"visible",children:P.children}),S.return=_,S.sibling=null,f!==null&&(ye=_.deletions,ye===null?(_.deletions=[f],_.flags|=16):ye.push(f)),_.child=S,_.memoizedState=null,S)}function Zl(f,_){return _=Ur({mode:"visible",children:_},f.mode),_.return=f,f.child=_}function Ur(f,_){return f=Jr(22,f,null,_),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function ai(f,_,S){return Wl(_,f.child,null,S),f=Zl(_,_.pendingProps.children),f.flags|=2,_.memoizedState=null,f}function No(f,_,S){f.lanes|=_;var P=f.alternate;P!==null&&(P.lanes|=_),Mu(f.return,_,S)}function Yi(f,_,S,P,W){var ae=f.memoizedState;ae===null?f.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:P,tail:S,tailMode:W}:(ae.isBackwards=_,ae.rendering=null,ae.renderingStartTime=0,ae.last=P,ae.tail=S,ae.tailMode=W)}function wa(f,_,S){var P=_.pendingProps,W=P.revealOrder,ae=P.tail;if(xr(f,_,P.children,S),P=Kn.current,(P&2)!==0)P=P&1|2,_.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=_.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&No(f,S,_);else if(f.tag===19)No(f,S,_);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===_)break e;for(;f.sibling===null;){if(f.return===null||f.return===_)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}P&=1}switch(Te(Kn,P),W){case"forwards":for(S=_.child,W=null;S!==null;)f=S.alternate,f!==null&&tu(f)===null&&(W=S),S=S.sibling;S=W,S===null?(W=_.child,_.child=null):(W=S.sibling,S.sibling=null),Yi(_,!1,W,S,ae);break;case"backwards":for(S=null,W=_.child,_.child=null;W!==null;){if(f=W.alternate,f!==null&&tu(f)===null){_.child=W;break}f=W.sibling,W.sibling=S,S=W,W=f}Yi(_,!0,S,null,ae);break;case"together":Yi(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Os(f,_,S){if(f!==null&&(_.dependencies=f.dependencies),Ss|=_.lanes,(S&_.childLanes)===0)if(f!==null){if(cl(f,_,S,!1),(S&_.childLanes)===0)return null}else return null;if(f!==null&&_.child!==f.child)throw Error(s(153));if(_.child!==null){for(f=_.child,S=ma(f,f.pendingProps),_.child=S,S.return=_;f.sibling!==null;)f=f.sibling,S=S.sibling=ma(f,f.pendingProps),S.return=_;S.sibling=null}return _.child}function _l(f,_){return(f.lanes&_)!==0?!0:(f=f.dependencies,!!(f!==null&&Vu(f)))}function jo(f,_,S){switch(_.tag){case 3:Ve(_,_.stateNode.containerInfo),ji(_,tr,f.memoizedState.cache),Fl();break;case 27:case 5:Fe(_);break;case 4:Ve(_,_.stateNode.containerInfo);break;case 10:ji(_,_.type,_.memoizedProps.value);break;case 13:var P=_.memoizedState;if(P!==null)return P.dehydrated!==null?(Ao(_),_.flags|=128,null):(S&_.child.childLanes)!==0?ru(f,_,S):(Ao(_),f=Os(f,_,S),f!==null?f.sibling:null);Ao(_);break;case 19:var W=(f.flags&128)!==0;if(P=(S&_.childLanes)!==0,P||(cl(f,_,S,!1),P=(S&_.childLanes)!==0),W){if(P)return wa(f,_,S);_.flags|=128}if(W=_.memoizedState,W!==null&&(W.rendering=null,W.tail=null,W.lastEffect=null),Te(Kn,Kn.current),P)break;return null;case 22:case 23:return _.lanes=0,lf(f,_,S);case 24:ji(_,tr,f.memoizedState.cache)}return Os(f,_,S)}function iu(f,_,S){if(f!==null)if(f.memoizedProps!==_.pendingProps)bs=!0;else{if(!_l(f,S)&&(_.flags&128)===0)return bs=!1,jo(f,_,S);bs=(f.flags&131072)!==0}else bs=!1,is&&(_.flags&1048576)!==0&&vd(_,Lc,_.index);switch(_.lanes=0,_.tag){case 16:e:{f=_.pendingProps;var P=_.elementType,W=P._init;if(P=W(P._payload),_.type=P,typeof P=="function")Ll(P)?(f=Xa(P,f),_.tag=1,_=Jd(null,_,P,f,S)):(_.tag=0,_=zr(null,_,P,f,S));else{if(P!=null){if(W=P.$$typeof,W===ee){_.tag=11,_=af(null,_,P,f,S);break e}else if(W===se){_.tag=14,_=Qu(null,_,P,f,S);break e}}throw _=_e(P)||P,Error(s(306,_,""))}}return _;case 0:return zr(f,_,_.type,_.pendingProps,S);case 1:return P=_.type,W=Xa(P,_.pendingProps),Jd(f,_,P,W,S);case 3:e:{if(Ve(_,_.stateNode.containerInfo),f===null)throw Error(s(387));P=_.pendingProps;var ae=_.memoizedState;W=ae.element,qc(f,_),wo(_,P,null,S);var ye=_.memoizedState;if(P=ye.cache,ji(_,tr,P),P!==ae.cache&&fs(_,[tr],S,!0),Hc(),P=ye.element,ae.isDehydrated)if(ae={element:P,isDehydrated:!1,cache:ye.cache},_.updateQueue.baseState=ae,_.memoizedState=ae,_.flags&256){_=Ju(f,_,P,S);break e}else if(P!==W){W=pr(Error(s(424)),_),zl(W),_=Ju(f,_,P,S);break e}else{switch(f=_.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(Vs=so(f.firstChild),Cr=_,is=!0,ol=null,ga=!0,S=Wd(_,null,P,S),_.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling}else{if(Fl(),P===W){_=Os(f,_,S);break e}xr(f,_,P,S)}_=_.child}return _;case 26:return Co(f,_),f===null?(S=Sm(_.type,null,_.pendingProps,null))?_.memoizedState=S:is||(S=_.type,f=_.pendingProps,P=gf(Ce.current).createElement(S),P[$n]=_,P[es]=f,$r(P,S,f),Gs(P),_.stateNode=P):_.memoizedState=Sm(_.type,f.memoizedProps,_.pendingProps,f.memoizedState),null;case 27:return Fe(_),f===null&&is&&(P=_.stateNode=Em(_.type,_.pendingProps,Ce.current),Cr=_,ga=!0,W=Vs,uc(_.type)?(Jf=W,Vs=so(P.firstChild)):Vs=W),xr(f,_,_.pendingProps.children,S),Co(f,_),f===null&&(_.flags|=4194304),_.child;case 5:return f===null&&is&&((W=P=Vs)&&(P=Jm(P,_.type,_.pendingProps,ga),P!==null?(_.stateNode=P,Cr=_,Vs=so(P.firstChild),ga=!1,W=!0):W=!1),W||_o(_)),Fe(_),W=_.type,ae=_.pendingProps,ye=f!==null?f.memoizedProps:null,P=ae.children,Xf(W,ae)?P=null:ye!==null&&Xf(W,ye)&&(_.flags|=32),_.memoizedState!==null&&(W=ni(f,_,yr,null,null,S),dh._currentValue=W),Co(f,_),xr(f,_,P,S),_.child;case 6:return f===null&&is&&((f=S=Vs)&&(S=ep(S,_.pendingProps,ga),S!==null?(_.stateNode=S,Cr=_,Vs=null,f=!0):f=!1),f||_o(_)),null;case 13:return ru(f,_,S);case 4:return Ve(_,_.stateNode.containerInfo),P=_.pendingProps,f===null?_.child=Wl(_,null,P,S):xr(f,_,P,S),_.child;case 11:return af(f,_,_.type,_.pendingProps,S);case 7:return xr(f,_,_.pendingProps,S),_.child;case 8:return xr(f,_,_.pendingProps.children,S),_.child;case 12:return xr(f,_,_.pendingProps.children,S),_.child;case 10:return P=_.pendingProps,ji(_,_.type,P.value),xr(f,_,P.children,S),_.child;case 9:return W=_.type._context,P=_.pendingProps.children,Eo(_),W=Pr(W),P=P(W),_.flags|=1,xr(f,_,P,S),_.child;case 14:return Qu(f,_,_.type,_.pendingProps,S);case 15:return of(f,_,_.type,_.pendingProps,S);case 19:return wa(f,_,S);case 31:return P=_.pendingProps,S=_.mode,P={mode:P.mode,children:P.children},f===null?(S=Ur(P,S),S.ref=_.ref,_.child=S,S.return=_,_=S):(S=ma(f.child,P),S.ref=_.ref,_.child=S,S.return=_,_=S),_;case 22:return lf(f,_,S);case 24:return Eo(_),P=Pr(tr),f===null?(W=Fn(),W===null&&(W=Es,ae=Ul(),W.pooledCache=ae,ae.refCount++,ae!==null&&(W.pooledCacheLanes|=S),W=ae),_.memoizedState={parent:P,cache:W},Uc(_),ji(_,tr,W)):((f.lanes&S)!==0&&(qc(f,_),wo(_,null,null,S),Hc()),W=f.memoizedState,ae=_.memoizedState,W.parent!==P?(W={parent:P,cache:P},_.memoizedState=W,_.lanes===0&&(_.memoizedState=_.updateQueue.baseState=W),ji(_,tr,P)):(P=ae.cache,ji(_,tr,P),P!==W.cache&&fs(_,[tr],S,!0))),xr(f,_,_.pendingProps.children,S),_.child;case 29:throw _.pendingProps}throw Error(s(156,_.tag))}function zs(f){f.flags|=4}function sr(f,_){if(_.type!=="stylesheet"||(_.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!Im(_)){if(_=gi.current,_!==null&&((ns&4194048)===ns?Ra!==null:(ns&62914560)!==ns&&(ns&536870912)===0||_!==Ra))throw zc=Ro,Rh;f.flags|=8192}}function rs(f,_){_!==null&&(f.flags|=4),f.flags&16384&&(_=f.tag!==22?Zs():536870912,f.lanes|=_,rc|=_)}function Ki(f,_){if(!is)switch(f.tailMode){case"hidden":_=f.tail;for(var S=null;_!==null;)_.alternate!==null&&(S=_),_=_.sibling;S===null?f.tail=null:S.sibling=null;break;case"collapsed":S=f.tail;for(var P=null;S!==null;)S.alternate!==null&&(P=S),S=S.sibling;P===null?_||f.tail===null?f.tail=null:f.tail.sibling=null:P.sibling=null}}function ds(f){var _=f.alternate!==null&&f.alternate.child===f.child,S=0,P=0;if(_)for(var W=f.child;W!==null;)S|=W.lanes|W.childLanes,P|=W.subtreeFlags&65011712,P|=W.flags&65011712,W.return=f,W=W.sibling;else for(W=f.child;W!==null;)S|=W.lanes|W.childLanes,P|=W.subtreeFlags,P|=W.flags,W.return=f,W=W.sibling;return f.subtreeFlags|=P,f.childLanes=S,_}function eh(f,_,S){var P=_.pendingProps;switch(Du(_),_.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ds(_),null;case 1:return ds(_),null;case 3:return S=_.stateNode,P=null,f!==null&&(P=f.memoizedState.cache),_.memoizedState.cache!==P&&(_.flags|=2048),xa(tr),$e(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(f===null||f.child===null)&&(vo(_)?zs(_):f===null||f.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,Rd())),ds(_),null;case 26:return S=_.memoizedState,f===null?(zs(_),S!==null?(ds(_),sr(_,S)):(ds(_),_.flags&=-16777217)):S?S!==f.memoizedState?(zs(_),ds(_),sr(_,S)):(ds(_),_.flags&=-16777217):(f.memoizedProps!==P&&zs(_),ds(_),_.flags&=-16777217),null;case 27:je(_),S=Ce.current;var W=_.type;if(f!==null&&_.stateNode!=null)f.memoizedProps!==P&&zs(_);else{if(!P){if(_.stateNode===null)throw Error(s(166));return ds(_),null}f=Le.current,vo(_)?Ed(_):(f=Em(W,P,S),_.stateNode=f,zs(_))}return ds(_),null;case 5:if(je(_),S=_.type,f!==null&&_.stateNode!=null)f.memoizedProps!==P&&zs(_);else{if(!P){if(_.stateNode===null)throw Error(s(166));return ds(_),null}if(f=Le.current,vo(_))Ed(_);else{switch(W=gf(Ce.current),f){case 1:f=W.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:f=W.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":f=W.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":f=W.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":f=W.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof P.is=="string"?W.createElement("select",{is:P.is}):W.createElement("select"),P.multiple?f.multiple=!0:P.size&&(f.size=P.size);break;default:f=typeof P.is=="string"?W.createElement(S,{is:P.is}):W.createElement(S)}}f[$n]=_,f[es]=P;e:for(W=_.child;W!==null;){if(W.tag===5||W.tag===6)f.appendChild(W.stateNode);else if(W.tag!==4&&W.tag!==27&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===_)break e;for(;W.sibling===null;){if(W.return===null||W.return===_)break e;W=W.return}W.sibling.return=W.return,W=W.sibling}_.stateNode=f;e:switch($r(f,S,P),S){case"button":case"input":case"select":case"textarea":f=!!P.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&zs(_)}}return ds(_),_.flags&=-16777217,null;case 6:if(f&&_.stateNode!=null)f.memoizedProps!==P&&zs(_);else{if(typeof P!="string"&&_.stateNode===null)throw Error(s(166));if(f=Ce.current,vo(_)){if(f=_.stateNode,S=_.memoizedProps,P=null,W=Cr,W!==null)switch(W.tag){case 27:case 5:P=W.memoizedProps}f[$n]=_,f=!!(f.nodeValue===S||P!==null&&P.suppressHydrationWarning===!0||pm(f.nodeValue,S)),f||_o(_)}else f=gf(f).createTextNode(P),f[$n]=_,_.stateNode=f}return ds(_),null;case 13:if(P=_.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(W=vo(_),P!==null&&P.dehydrated!==null){if(f===null){if(!W)throw Error(s(318));if(W=_.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(s(317));W[$n]=_}else Fl(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;ds(_),W=!1}else W=Rd(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=W),W=!0;if(!W)return _.flags&256?(Ka(_),_):(Ka(_),null)}if(Ka(_),(_.flags&128)!==0)return _.lanes=S,_;if(S=P!==null,f=f!==null&&f.memoizedState!==null,S){P=_.child,W=null,P.alternate!==null&&P.alternate.memoizedState!==null&&P.alternate.memoizedState.cachePool!==null&&(W=P.alternate.memoizedState.cachePool.pool);var ae=null;P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(ae=P.memoizedState.cachePool.pool),ae!==W&&(P.flags|=2048)}return S!==f&&S&&(_.child.flags|=8192),rs(_,_.updateQueue),ds(_),null;case 4:return $e(),f===null&&Hf(_.stateNode.containerInfo),ds(_),null;case 10:return xa(_.type),ds(_),null;case 19:if(Oe(Kn),W=_.memoizedState,W===null)return ds(_),null;if(P=(_.flags&128)!==0,ae=W.rendering,ae===null)if(P)Ki(W,!1);else{if(Un!==0||f!==null&&(f.flags&128)!==0)for(f=_.child;f!==null;){if(ae=tu(f),ae!==null){for(_.flags|=128,Ki(W,!1),f=ae.updateQueue,_.updateQueue=f,rs(_,f),_.subtreeFlags=0,f=S,S=_.child;S!==null;)Iu(S,f),S=S.sibling;return Te(Kn,Kn.current&1|2),_.child}f=f.sibling}W.tail!==null&&pt()>El&&(_.flags|=128,P=!0,Ki(W,!1),_.lanes=4194304)}else{if(!P)if(f=tu(ae),f!==null){if(_.flags|=128,P=!0,f=f.updateQueue,_.updateQueue=f,rs(_,f),Ki(W,!0),W.tail===null&&W.tailMode==="hidden"&&!ae.alternate&&!is)return ds(_),null}else 2*pt()-W.renderingStartTime>El&&S!==536870912&&(_.flags|=128,P=!0,Ki(W,!1),_.lanes=4194304);W.isBackwards?(ae.sibling=_.child,_.child=ae):(f=W.last,f!==null?f.sibling=ae:_.child=ae,W.last=ae)}return W.tail!==null?(_=W.tail,W.rendering=_,W.tail=_.sibling,W.renderingStartTime=pt(),_.sibling=null,f=Kn.current,Te(Kn,P?f&1|2:f&1),_):(ds(_),null);case 22:case 23:return Ka(_),Id(),P=_.memoizedState!==null,f!==null?f.memoizedState!==null!==P&&(_.flags|=8192):P&&(_.flags|=8192),P?(S&536870912)!==0&&(_.flags&128)===0&&(ds(_),_.subtreeFlags&6&&(_.flags|=8192)):ds(_),S=_.updateQueue,S!==null&&rs(_,S.retryQueue),S=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),P=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(P=_.memoizedState.cachePool.pool),P!==S&&(_.flags|=2048),f!==null&&Oe(qa),null;case 24:return S=null,f!==null&&(S=f.memoizedState.cache),_.memoizedState.cache!==S&&(_.flags|=2048),xa(tr),ds(_),null;case 25:return null;case 30:return null}throw Error(s(156,_.tag))}function yi(f,_){switch(Du(_),_.tag){case 1:return f=_.flags,f&65536?(_.flags=f&-65537|128,_):null;case 3:return xa(tr),$e(),f=_.flags,(f&65536)!==0&&(f&128)===0?(_.flags=f&-65537|128,_):null;case 26:case 27:case 5:return je(_),null;case 13:if(Ka(_),f=_.memoizedState,f!==null&&f.dehydrated!==null){if(_.alternate===null)throw Error(s(340));Fl()}return f=_.flags,f&65536?(_.flags=f&-65537|128,_):null;case 19:return Oe(Kn),null;case 4:return $e(),null;case 10:return xa(_.type),null;case 22:case 23:return Ka(_),Id(),f!==null&&Oe(qa),f=_.flags,f&65536?(_.flags=f&-65537|128,_):null;case 24:return xa(tr),null;case 25:return null;default:return null}}function au(f,_){switch(Du(_),_.tag){case 3:xa(tr),$e();break;case 26:case 27:case 5:je(_);break;case 4:$e();break;case 13:Ka(_);break;case 19:Oe(Kn);break;case 10:xa(_.type);break;case 22:case 23:Ka(_),Id(),f!==null&&Oe(qa);break;case 24:xa(tr)}}function Xi(f,_){try{var S=_.updateQueue,P=S!==null?S.lastEffect:null;if(P!==null){var W=P.next;S=W;do{if((S.tag&f)===f){P=void 0;var ae=S.create,ye=S.inst;P=ae(),ye.destroy=P}S=S.next}while(S!==W)}}catch(Se){Ge(_,_.return,Se)}}function Ir(f,_,S){try{var P=_.updateQueue,W=P!==null?P.lastEffect:null;if(W!==null){var ae=W.next;P=ae;do{if((P.tag&f)===f){var ye=P.inst,Se=ye.destroy;if(Se!==void 0){ye.destroy=void 0,W=_;var ke=S,We=Se;try{We()}catch(It){Ge(W,ke,It)}}}P=P.next}while(P!==ae)}}catch(It){Ge(_,_.return,It)}}function uf(f){var _=f.updateQueue;if(_!==null){var S=f.stateNode;try{wh(_,S)}catch(P){Ge(f,f.return,P)}}}function df(f,_,S){S.props=Xa(f.type,f.memoizedProps),S.state=f.memoizedState;try{S.componentWillUnmount()}catch(P){Ge(f,_,P)}}function ou(f,_){try{var S=f.ref;if(S!==null){switch(f.tag){case 26:case 27:case 5:var P=f.stateNode;break;case 30:P=f.stateNode;break;default:P=f.stateNode}typeof S=="function"?f.refCleanup=S(P):S.current=P}}catch(W){Ge(f,_,W)}}function ms(f,_){var S=f.ref,P=f.refCleanup;if(S!==null)if(typeof P=="function")try{P()}catch(W){Ge(f,_,W)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(W){Ge(f,_,W)}else S.current=null}function lu(f){var _=f.type,S=f.memoizedProps,P=f.stateNode;try{e:switch(_){case"button":case"input":case"select":case"textarea":S.autoFocus&&P.focus();break e;case"img":S.src?P.src=S.src:S.srcSet&&(P.srcset=S.srcSet)}}catch(W){Ge(f,f.return,W)}}function Do(f,_,S){try{var P=f.stateNode;Km(P,f.type,S,_),P[es]=_}catch(W){Ge(f,f.return,W)}}function td(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&uc(f.type)||f.tag===4}function Jl(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||td(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&uc(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function cu(f,_,S){var P=f.tag;if(P===5||P===6)f=f.stateNode,_?(S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S).insertBefore(f,_):(_=S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S,_.appendChild(f),S=S._reactRootContainer,S!=null||_.onclick!==null||(_.onclick=pf));else if(P!==4&&(P===27&&uc(f.type)&&(S=f.stateNode,_=null),f=f.child,f!==null))for(cu(f,_,S),f=f.sibling;f!==null;)cu(f,_,S),f=f.sibling}function Qa(f,_,S){var P=f.tag;if(P===5||P===6)f=f.stateNode,_?S.insertBefore(f,_):S.appendChild(f);else if(P!==4&&(P===27&&uc(f.type)&&(S=f.stateNode),f=f.child,f!==null))for(Qa(f,_,S),f=f.sibling;f!==null;)Qa(f,_,S),f=f.sibling}function ec(f){var _=f.stateNode,S=f.memoizedProps;try{for(var P=f.type,W=_.attributes;W.length;)_.removeAttributeNode(W[0]);$r(_,P,S),_[$n]=f,_[es]=S}catch(ae){Ge(f,f.return,ae)}}var Wi=!1,As=!1,Oo=!1,th=typeof WeakSet=="function"?WeakSet:Set,ks=null;function Lf(f,_){if(f=f.containerInfo,Yf=Ef,f=gd(f),nl(f)){if("selectionStart"in f)var S={start:f.selectionStart,end:f.selectionEnd};else e:{S=(S=f.ownerDocument)&&S.defaultView||window;var P=S.getSelection&&S.getSelection();if(P&&P.rangeCount!==0){S=P.anchorNode;var W=P.anchorOffset,ae=P.focusNode;P=P.focusOffset;try{S.nodeType,ae.nodeType}catch{S=null;break e}var ye=0,Se=-1,ke=-1,We=0,It=0,kt=f,Je=null;t:for(;;){for(var et;kt!==S||W!==0&&kt.nodeType!==3||(Se=ye+W),kt!==ae||P!==0&&kt.nodeType!==3||(ke=ye+P),kt.nodeType===3&&(ye+=kt.nodeValue.length),(et=kt.firstChild)!==null;)Je=kt,kt=et;for(;;){if(kt===f)break t;if(Je===S&&++We===W&&(Se=ye),Je===ae&&++It===P&&(ke=ye),(et=kt.nextSibling)!==null)break;kt=Je,Je=kt.parentNode}kt=et}S=Se===-1||ke===-1?null:{start:Se,end:ke}}else S=null}S=S||{start:0,end:0}}else S=null;for(Kf={focusedElem:f,selectionRange:S},Ef=!1,ks=_;ks!==null;)if(_=ks,f=_.child,(_.subtreeFlags&1024)!==0&&f!==null)f.return=_,ks=f;else for(;ks!==null;){switch(_=ks,ae=_.alternate,f=_.flags,_.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&ae!==null){f=void 0,S=_,W=ae.memoizedProps,ae=ae.memoizedState,P=S.stateNode;try{var jn=Xa(S.type,W,S.elementType===S.type);f=P.getSnapshotBeforeUpdate(jn,ae),P.__reactInternalSnapshotBeforeUpdate=f}catch(Tn){Ge(S,S.return,Tn)}}break;case 3:if((f&1024)!==0){if(f=_.stateNode.containerInfo,S=f.nodeType,S===9)Qf(f);else if(S===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":Qf(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(s(163))}if(f=_.sibling,f!==null){f.return=_.return,ks=f;break}ks=_.return}}function tc(f,_,S){var P=S.flags;switch(S.tag){case 0:case 11:case 15:ts(f,S),P&4&&Xi(5,S);break;case 1:if(ts(f,S),P&4)if(f=S.stateNode,_===null)try{f.componentDidMount()}catch(ye){Ge(S,S.return,ye)}else{var W=Xa(S.type,_.memoizedProps);_=_.memoizedState;try{f.componentDidUpdate(W,_,f.__reactInternalSnapshotBeforeUpdate)}catch(ye){Ge(S,S.return,ye)}}P&64&&uf(S),P&512&&ou(S,S.return);break;case 3:if(ts(f,S),P&64&&(f=S.updateQueue,f!==null)){if(_=null,S.child!==null)switch(S.child.tag){case 27:case 5:_=S.child.stateNode;break;case 1:_=S.child.stateNode}try{wh(f,_)}catch(ye){Ge(S,S.return,ye)}}break;case 27:_===null&&P&4&&ec(S);case 26:case 5:ts(f,S),_===null&&P&4&&lu(S),P&512&&ou(S,S.return);break;case 12:ts(f,S);break;case 13:ts(f,S),P&4&&vl(f,S),P&64&&(f=S.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(S=pn.bind(null,S),tp(f,S))));break;case 22:if(P=S.memoizedState!==null||Wi,!P){_=_!==null&&_.memoizedState!==null||As,W=Wi;var ae=As;Wi=P,(As=_)&&!ae?Qi(f,S,(S.subtreeFlags&8772)!==0):ts(f,S),Wi=W,As=ae}break;case 30:break;default:ts(f,S)}}function nd(f){var _=f.alternate;_!==null&&(f.alternate=null,nd(_)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(_=f.stateNode,_!==null&&Ji(_)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var ws=null,vr=!1;function oi(f,_,S){for(S=S.child;S!==null;)xi(f,_,S),S=S.sibling}function xi(f,_,S){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(Ct,S)}catch{}switch(S.tag){case 26:As||ms(S,_),oi(f,_,S),S.memoizedState?S.memoizedState.count--:S.stateNode&&(S=S.stateNode,S.parentNode.removeChild(S));break;case 27:As||ms(S,_);var P=ws,W=vr;uc(S.type)&&(ws=S.stateNode,vr=!1),oi(f,_,S),oh(S.stateNode),ws=P,vr=W;break;case 5:As||ms(S,_);case 6:if(P=ws,W=vr,ws=null,oi(f,_,S),ws=P,vr=W,ws!==null)if(vr)try{(ws.nodeType===9?ws.body:ws.nodeName==="HTML"?ws.ownerDocument.body:ws).removeChild(S.stateNode)}catch(ae){Ge(S,_,ae)}else try{ws.removeChild(S.stateNode)}catch(ae){Ge(S,_,ae)}break;case 18:ws!==null&&(vr?(f=ws,vm(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,S.stateNode),ph(f)):vm(ws,S.stateNode));break;case 4:P=ws,W=vr,ws=S.stateNode.containerInfo,vr=!0,oi(f,_,S),ws=P,vr=W;break;case 0:case 11:case 14:case 15:As||Ir(2,S,_),As||Ir(4,S,_),oi(f,_,S);break;case 1:As||(ms(S,_),P=S.stateNode,typeof P.componentWillUnmount=="function"&&df(S,_,P)),oi(f,_,S);break;case 21:oi(f,_,S);break;case 22:As=(P=As)||S.memoizedState!==null,oi(f,_,S),As=P;break;default:oi(f,_,S)}}function vl(f,_){if(_.memoizedState===null&&(f=_.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{ph(f)}catch(S){Ge(_,_.return,S)}}function nh(f){switch(f.tag){case 13:case 19:var _=f.stateNode;return _===null&&(_=f.stateNode=new th),_;case 22:return f=f.stateNode,_=f._retryCache,_===null&&(_=f._retryCache=new th),_;default:throw Error(s(435,f.tag))}}function Sa(f,_){var S=nh(f);_.forEach(function(P){var W=Vn.bind(null,f,P);S.has(P)||(S.add(P),P.then(W,W))})}function qr(f,_){var S=_.deletions;if(S!==null)for(var P=0;P<S.length;P++){var W=S[P],ae=f,ye=_,Se=ye;e:for(;Se!==null;){switch(Se.tag){case 27:if(uc(Se.type)){ws=Se.stateNode,vr=!1;break e}break;case 5:ws=Se.stateNode,vr=!1;break e;case 3:case 4:ws=Se.stateNode.containerInfo,vr=!0;break e}Se=Se.return}if(ws===null)throw Error(s(160));xi(ae,ye,W),ws=null,vr=!1,ae=W.alternate,ae!==null&&(ae.return=null),W.return=null}if(_.subtreeFlags&13878)for(_=_.child;_!==null;)uu(_,f),_=_.sibling}var Nr=null;function uu(f,_){var S=f.alternate,P=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:qr(_,f),rr(f),P&4&&(Ir(3,f,f.return),Xi(3,f),Ir(5,f,f.return));break;case 1:qr(_,f),rr(f),P&512&&(As||S===null||ms(S,S.return)),P&64&&Wi&&(f=f.updateQueue,f!==null&&(P=f.callbacks,P!==null&&(S=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=S===null?P:S.concat(P))));break;case 26:var W=Nr;if(qr(_,f),rr(f),P&512&&(As||S===null||ms(S,S.return)),P&4){var ae=S!==null?S.memoizedState:null;if(P=f.memoizedState,S===null)if(P===null)if(f.stateNode===null){e:{P=f.type,S=f.memoizedProps,W=W.ownerDocument||W;t:switch(P){case"title":ae=W.getElementsByTagName("title")[0],(!ae||ae[Vr]||ae[$n]||ae.namespaceURI==="http://www.w3.org/2000/svg"||ae.hasAttribute("itemprop"))&&(ae=W.createElement(P),W.head.insertBefore(ae,W.querySelector("head > title"))),$r(ae,P,S),ae[$n]=f,Gs(ae),P=ae;break e;case"link":var ye=Cm("link","href",W).get(P+(S.href||""));if(ye){for(var Se=0;Se<ye.length;Se++)if(ae=ye[Se],ae.getAttribute("href")===(S.href==null||S.href===""?null:S.href)&&ae.getAttribute("rel")===(S.rel==null?null:S.rel)&&ae.getAttribute("title")===(S.title==null?null:S.title)&&ae.getAttribute("crossorigin")===(S.crossOrigin==null?null:S.crossOrigin)){ye.splice(Se,1);break t}}ae=W.createElement(P),$r(ae,P,S),W.head.appendChild(ae);break;case"meta":if(ye=Cm("meta","content",W).get(P+(S.content||""))){for(Se=0;Se<ye.length;Se++)if(ae=ye[Se],ae.getAttribute("content")===(S.content==null?null:""+S.content)&&ae.getAttribute("name")===(S.name==null?null:S.name)&&ae.getAttribute("property")===(S.property==null?null:S.property)&&ae.getAttribute("http-equiv")===(S.httpEquiv==null?null:S.httpEquiv)&&ae.getAttribute("charset")===(S.charSet==null?null:S.charSet)){ye.splice(Se,1);break t}}ae=W.createElement(P),$r(ae,P,S),W.head.appendChild(ae);break;default:throw Error(s(468,P))}ae[$n]=f,Gs(ae),P=ae}f.stateNode=P}else Pm(W,f.type,f.stateNode);else f.stateNode=Am(W,P,f.memoizedProps);else ae!==P?(ae===null?S.stateNode!==null&&(S=S.stateNode,S.parentNode.removeChild(S)):ae.count--,P===null?Pm(W,f.type,f.stateNode):Am(W,P,f.memoizedProps)):P===null&&f.stateNode!==null&&Do(f,f.memoizedProps,S.memoizedProps)}break;case 27:qr(_,f),rr(f),P&512&&(As||S===null||ms(S,S.return)),S!==null&&P&4&&Do(f,f.memoizedProps,S.memoizedProps);break;case 5:if(qr(_,f),rr(f),P&512&&(As||S===null||ms(S,S.return)),f.flags&32){W=f.stateNode;try{ci(W,"")}catch(et){Ge(f,f.return,et)}}P&4&&f.stateNode!=null&&(W=f.memoizedProps,Do(f,W,S!==null?S.memoizedProps:W)),P&1024&&(Oo=!0);break;case 6:if(qr(_,f),rr(f),P&4){if(f.stateNode===null)throw Error(s(162));P=f.memoizedProps,S=f.stateNode;try{S.nodeValue=P}catch(et){Ge(f,f.return,et)}}break;case 3:if(_f=null,W=Nr,Nr=yf(_.containerInfo),qr(_,f),Nr=W,rr(f),P&4&&S!==null&&S.memoizedState.isDehydrated)try{ph(_.containerInfo)}catch(et){Ge(f,f.return,et)}Oo&&(Oo=!1,Bn(f));break;case 4:P=Nr,Nr=yf(f.stateNode.containerInfo),qr(_,f),rr(f),Nr=P;break;case 12:qr(_,f),rr(f);break;case 13:qr(_,f),rr(f),f.child.flags&8192&&f.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(ac=pt()),P&4&&(P=f.updateQueue,P!==null&&(f.updateQueue=null,Sa(f,P)));break;case 22:W=f.memoizedState!==null;var ke=S!==null&&S.memoizedState!==null,We=Wi,It=As;if(Wi=We||W,As=It||ke,qr(_,f),As=It,Wi=We,rr(f),P&8192)e:for(_=f.stateNode,_._visibility=W?_._visibility&-2:_._visibility|1,W&&(S===null||ke||Wi||As||Cs(f)),S=null,_=f;;){if(_.tag===5||_.tag===26){if(S===null){ke=S=_;try{if(ae=ke.stateNode,W)ye=ae.style,typeof ye.setProperty=="function"?ye.setProperty("display","none","important"):ye.display="none";else{Se=ke.stateNode;var kt=ke.memoizedProps.style,Je=kt!=null&&kt.hasOwnProperty("display")?kt.display:null;Se.style.display=Je==null||typeof Je=="boolean"?"":(""+Je).trim()}}catch(et){Ge(ke,ke.return,et)}}}else if(_.tag===6){if(S===null){ke=_;try{ke.stateNode.nodeValue=W?"":ke.memoizedProps}catch(et){Ge(ke,ke.return,et)}}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===f)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===f)break e;for(;_.sibling===null;){if(_.return===null||_.return===f)break e;S===_&&(S=null),_=_.return}S===_&&(S=null),_.sibling.return=_.return,_=_.sibling}P&4&&(P=f.updateQueue,P!==null&&(S=P.retryQueue,S!==null&&(P.retryQueue=null,Sa(f,S))));break;case 19:qr(_,f),rr(f),P&4&&(P=f.updateQueue,P!==null&&(f.updateQueue=null,Sa(f,P)));break;case 30:break;case 21:break;default:qr(_,f),rr(f)}}function rr(f){var _=f.flags;if(_&2){try{for(var S,P=f.return;P!==null;){if(td(P)){S=P;break}P=P.return}if(S==null)throw Error(s(160));switch(S.tag){case 27:var W=S.stateNode,ae=Jl(f);Qa(f,ae,W);break;case 5:var ye=S.stateNode;S.flags&32&&(ci(ye,""),S.flags&=-33);var Se=Jl(f);Qa(f,Se,ye);break;case 3:case 4:var ke=S.stateNode.containerInfo,We=Jl(f);cu(f,We,ke);break;default:throw Error(s(161))}}catch(It){Ge(f,f.return,It)}f.flags&=-3}_&4096&&(f.flags&=-4097)}function Bn(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var _=f;Bn(_),_.tag===5&&_.flags&1024&&_.stateNode.reset(),f=f.sibling}}function ts(f,_){if(_.subtreeFlags&8772)for(_=_.child;_!==null;)tc(f,_.alternate,_),_=_.sibling}function Cs(f){for(f=f.child;f!==null;){var _=f;switch(_.tag){case 0:case 11:case 14:case 15:Ir(4,_,_.return),Cs(_);break;case 1:ms(_,_.return);var S=_.stateNode;typeof S.componentWillUnmount=="function"&&df(_,_.return,S),Cs(_);break;case 27:oh(_.stateNode);case 26:case 5:ms(_,_.return),Cs(_);break;case 22:_.memoizedState===null&&Cs(_);break;case 30:Cs(_);break;default:Cs(_)}f=f.sibling}}function Qi(f,_,S){for(S=S&&(_.subtreeFlags&8772)!==0,_=_.child;_!==null;){var P=_.alternate,W=f,ae=_,ye=ae.flags;switch(ae.tag){case 0:case 11:case 15:Qi(W,ae,S),Xi(4,ae);break;case 1:if(Qi(W,ae,S),P=ae,W=P.stateNode,typeof W.componentDidMount=="function")try{W.componentDidMount()}catch(We){Ge(P,P.return,We)}if(P=ae,W=P.updateQueue,W!==null){var Se=P.stateNode;try{var ke=W.shared.hiddenCallbacks;if(ke!==null)for(W.shared.hiddenCallbacks=null,W=0;W<ke.length;W++)En(ke[W],Se)}catch(We){Ge(P,P.return,We)}}S&&ye&64&&uf(ae),ou(ae,ae.return);break;case 27:ec(ae);case 26:case 5:Qi(W,ae,S),S&&P===null&&ye&4&&lu(ae),ou(ae,ae.return);break;case 12:Qi(W,ae,S);break;case 13:Qi(W,ae,S),S&&ye&4&&vl(W,ae);break;case 22:ae.memoizedState===null&&Qi(W,ae,S),ou(ae,ae.return);break;case 30:break;default:Qi(W,ae,S)}_=_.sibling}}function Mo(f,_){var S=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),f=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(f=_.memoizedState.cachePool.pool),f!==S&&(f!=null&&f.refCount++,S!=null&&Gi(S))}function Za(f,_){f=null,_.alternate!==null&&(f=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==f&&(_.refCount++,f!=null&&Gi(f))}function _i(f,_,S,P){if(_.subtreeFlags&10256)for(_=_.child;_!==null;)nc(f,_,S,P),_=_.sibling}function nc(f,_,S,P){var W=_.flags;switch(_.tag){case 0:case 11:case 15:_i(f,_,S,P),W&2048&&Xi(9,_);break;case 1:_i(f,_,S,P);break;case 3:_i(f,_,S,P),W&2048&&(f=null,_.alternate!==null&&(f=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==f&&(_.refCount++,f!=null&&Gi(f)));break;case 12:if(W&2048){_i(f,_,S,P),f=_.stateNode;try{var ae=_.memoizedProps,ye=ae.id,Se=ae.onPostCommit;typeof Se=="function"&&Se(ye,_.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(ke){Ge(_,_.return,ke)}}else _i(f,_,S,P);break;case 13:_i(f,_,S,P);break;case 23:break;case 22:ae=_.stateNode,ye=_.alternate,_.memoizedState!==null?ae._visibility&2?_i(f,_,S,P):du(f,_):ae._visibility&2?_i(f,_,S,P):(ae._visibility|=2,Zi(f,_,S,P,(_.subtreeFlags&10256)!==0)),W&2048&&Mo(ye,_);break;case 24:_i(f,_,S,P),W&2048&&Za(_.alternate,_);break;default:_i(f,_,S,P)}}function Zi(f,_,S,P,W){for(W=W&&(_.subtreeFlags&10256)!==0,_=_.child;_!==null;){var ae=f,ye=_,Se=S,ke=P,We=ye.flags;switch(ye.tag){case 0:case 11:case 15:Zi(ae,ye,Se,ke,W),Xi(8,ye);break;case 23:break;case 22:var It=ye.stateNode;ye.memoizedState!==null?It._visibility&2?Zi(ae,ye,Se,ke,W):du(ae,ye):(It._visibility|=2,Zi(ae,ye,Se,ke,W)),W&&We&2048&&Mo(ye.alternate,ye);break;case 24:Zi(ae,ye,Se,ke,W),W&&We&2048&&Za(ye.alternate,ye);break;default:Zi(ae,ye,Se,ke,W)}_=_.sibling}}function du(f,_){if(_.subtreeFlags&10256)for(_=_.child;_!==null;){var S=f,P=_,W=P.flags;switch(P.tag){case 22:du(S,P),W&2048&&Mo(P.alternate,P);break;case 24:du(S,P),W&2048&&Za(P.alternate,P);break;default:du(S,P)}_=_.sibling}}var Vo=8192;function bl(f){if(f.subtreeFlags&Vo)for(f=f.child;f!==null;)sh(f),f=f.sibling}function sh(f){switch(f.tag){case 26:bl(f),f.flags&Vo&&f.memoizedState!==null&&pp(Nr,f.memoizedState,f.memoizedProps);break;case 5:bl(f);break;case 3:case 4:var _=Nr;Nr=yf(f.stateNode.containerInfo),bl(f),Nr=_;break;case 22:f.memoizedState===null&&(_=f.alternate,_!==null&&_.memoizedState!==null?(_=Vo,Vo=16777216,bl(f),Vo=_):bl(f));break;default:bl(f)}}function hf(f){var _=f.alternate;if(_!==null&&(f=_.child,f!==null)){_.child=null;do _=f.sibling,f.sibling=null,f=_;while(f!==null)}}function Ta(f){var _=f.deletions;if((f.flags&16)!==0){if(_!==null)for(var S=0;S<_.length;S++){var P=_[S];ks=P,rh(P,f)}hf(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)sc(f),f=f.sibling}function sc(f){switch(f.tag){case 0:case 11:case 15:Ta(f),f.flags&2048&&Ir(9,f,f.return);break;case 3:Ta(f);break;case 12:Ta(f);break;case 22:var _=f.stateNode;f.memoizedState!==null&&_._visibility&2&&(f.return===null||f.return.tag!==13)?(_._visibility&=-3,Ja(f)):Ta(f);break;default:Ta(f)}}function Ja(f){var _=f.deletions;if((f.flags&16)!==0){if(_!==null)for(var S=0;S<_.length;S++){var P=_[S];ks=P,rh(P,f)}hf(f)}for(f=f.child;f!==null;){switch(_=f,_.tag){case 0:case 11:case 15:Ir(8,_,_.return),Ja(_);break;case 22:S=_.stateNode,S._visibility&2&&(S._visibility&=-3,Ja(_));break;default:Ja(_)}f=f.sibling}}function rh(f,_){for(;ks!==null;){var S=ks;switch(S.tag){case 0:case 11:case 15:Ir(8,S,_);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var P=S.memoizedState.cachePool.pool;P!=null&&P.refCount++}break;case 24:Gi(S.memoizedState.cache)}if(P=S.child,P!==null)P.return=S,ks=P;else e:for(S=f;ks!==null;){P=ks;var W=P.sibling,ae=P.return;if(nd(P),P===S){ks=null;break e}if(W!==null){W.return=ae,ks=W;break e}ks=ae}}}var Oi={getCacheForType:function(f){var _=Pr(tr),S=_.data.get(f);return S===void 0&&(S=f(),_.data.set(f,S)),S}},Aa=typeof WeakMap=="function"?WeakMap:Map,In=0,Es=null,Yn=null,ns=0,Nn=0,Hr=null,jr=!1,Ps=!1,hu=!1,Ca=0,Un=0,Ss=0,ir=0,vi=0,br=0,rc=0,ko=null,Er=null,ic=!1,ac=0,El=1/0,Lo=null,Bo=null,Rn=0,as=null,Mn=null,qn=0,ps=0,Gr=null,eo=null,Pa=0,fu=null;function Qs(){if((In&2)!==0&&ns!==0)return ns&-ns;if(we.T!==null){var f=ql;return f!==0?f:Ff()}return Ls()}function Us(){br===0&&(br=(ns&536870912)===0||is?Ms():536870912);var f=gi.current;return f!==null&&(f.flags|=32),br}function ar(f,_,S){(f===Es&&(Nn===2||Nn===9)||f.cancelPendingCommit!==null)&&(Uo(f,0),bi(f,ns,br,!1)),On(f,S),((In&2)===0||f!==Es)&&(f===Es&&((In&2)===0&&(ir|=S),Un===4&&bi(f,ns,br,!1)),gn(f))}function Fo(f,_,S){if((In&6)!==0)throw Error(s(327));var P=!S&&(_&124)===0&&(_&f.expiredLanes)===0||Xn(f,_),W=P?lc(f,_):dr(f,_,!0),ae=P;do{if(W===0){Ps&&!P&&bi(f,_,0,!1);break}else{if(S=f.current.alternate,ae&&!Mi(S)){W=dr(f,_,!1),ae=!1;continue}if(W===2){if(ae=_,f.errorRecoveryDisabledLanes&ae)var ye=0;else ye=f.pendingLanes&-536870913,ye=ye!==0?ye:ye&536870912?536870912:0;if(ye!==0){_=ye;e:{var Se=f;W=ko;var ke=Se.current.memoizedState.isDehydrated;if(ke&&(Uo(Se,ye).flags|=256),ye=dr(Se,ye,!1),ye!==2){if(hu&&!ke){Se.errorRecoveryDisabledLanes|=ae,ir|=ae,W=4;break e}ae=Er,Er=W,ae!==null&&(Er===null?Er=ae:Er.push.apply(Er,ae))}W=ye}if(ae=!1,W!==2)continue}}if(W===1){Uo(f,0),bi(f,_,0,!0);break}e:{switch(P=f,ae=W,ae){case 0:case 1:throw Error(s(345));case 4:if((_&4194048)!==_)break;case 6:bi(P,_,br,!jr);break e;case 2:Er=null;break;case 3:case 5:break;default:throw Error(s(329))}if((_&62914560)===_&&(W=ac+300-pt(),10<W)){if(bi(P,_,br,!jr),Gn(P,0,!0)!==0)break e;P.timeoutHandle=xm(sd.bind(null,P,S,Er,Lo,ic,_,br,ir,rc,jr,ae,2,-0,0),W);break e}sd(P,S,Er,Lo,ic,_,br,ir,rc,jr,ae,0,-0,0)}}break}while(!0);gn(f)}function sd(f,_,S,P,W,ae,ye,Se,ke,We,It,kt,Je,et){if(f.timeoutHandle=-1,kt=_.subtreeFlags,(kt&8192||(kt&16785408)===16785408)&&(uh={stylesheets:null,count:0,unsuspend:mp},sh(_),kt=gp(),kt!==null)){f.cancelPendingCommit=kt(E.bind(null,f,_,ae,S,P,W,ye,Se,ke,It,1,Je,et)),bi(f,ae,ye,!We);return}E(f,_,ae,S,P,W,ye,Se,ke)}function Mi(f){for(var _=f;;){var S=_.tag;if((S===0||S===11||S===15)&&_.flags&16384&&(S=_.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var P=0;P<S.length;P++){var W=S[P],ae=W.getSnapshot;W=W.value;try{if(!fi(ae(),W))return!1}catch{return!1}}if(S=_.child,_.subtreeFlags&16384&&S!==null)S.return=_,_=S;else{if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function bi(f,_,S,P){_&=~vi,_&=~ir,f.suspendedLanes|=_,f.pingedLanes&=~_,P&&(f.warmLanes|=_),P=f.expirationTimes;for(var W=_;0<W;){var ae=31-un(W),ye=1<<ae;P[ae]=-1,W&=~ye}S!==0&&Ln(f,S,_)}function zo(){return(In&6)===0?(_s(0),!1):!0}function Dr(){if(Yn!==null){if(Nn===0)var f=Yn.return;else f=Yn,ya=bo=null,jd(f),Xl=null,Fr=0,f=Yn;for(;f!==null;)au(f.alternate,f),f=f.return;Yn=null}}function Uo(f,_){var S=f.timeoutHandle;S!==-1&&(f.timeoutHandle=-1,Wm(S)),S=f.cancelPendingCommit,S!==null&&(f.cancelPendingCommit=null,S()),Dr(),Es=f,Yn=S=ma(f.current,null),ns=_,Nn=0,Hr=null,jr=!1,Ps=Xn(f,_),hu=!1,rc=br=vi=ir=Ss=Un=0,Er=ko=null,ic=!1,(_&8)!==0&&(_|=_&32);var P=f.entangledLanes;if(P!==0)for(f=f.entanglements,P&=_;0<P;){var W=31-un(P),ae=1<<W;_|=f[W],P&=~ae}return Ca=_,mi(),S}function rd(f,_){zn=null,we.H=Yu,_===hl||_===fl?(_=Ad(),Nn=3):_===Rh?(_=Ad(),Nn=4):Nn=_===rf?8:_!==null&&typeof _=="object"&&typeof _.then=="function"?6:1,Hr=_,Yn===null&&(Un=1,Xu(f,pr(_,f.current)))}function oc(){var f=we.H;return we.H=Yu,f===null?Yu:f}function mu(){var f=we.A;return we.A=Oi,f}function Ia(){Un=4,jr||(ns&4194048)!==ns&&gi.current!==null||(Ps=!0),(Ss&134217727)===0&&(ir&134217727)===0||Es===null||bi(Es,ns,br,!1)}function dr(f,_,S){var P=In;In|=2;var W=oc(),ae=mu();(Es!==f||ns!==_)&&(Lo=null,Uo(f,_)),_=!1;var ye=Un;e:do try{if(Nn!==0&&Yn!==null){var Se=Yn,ke=Hr;switch(Nn){case 8:Dr(),ye=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(_=!0);var We=Nn;if(Nn=0,Hr=null,Rl(f,Se,ke,We),S&&Ps){ye=0;break e}break;default:We=Nn,Nn=0,Hr=null,Rl(f,Se,ke,We)}}qo(),ye=Un;break}catch(It){rd(f,It)}while(!0);return _&&f.shellSuspendCounter++,ya=bo=null,In=P,we.H=W,we.A=ae,Yn===null&&(Es=null,ns=0,mi()),ye}function qo(){for(;Yn!==null;)ad(Yn)}function lc(f,_){var S=In;In|=2;var P=oc(),W=mu();Es!==f||ns!==_?(Lo=null,El=pt()+500,Uo(f,_)):Ps=Xn(f,_);e:do try{if(Nn!==0&&Yn!==null){_=Yn;var ae=Hr;t:switch(Nn){case 1:Nn=0,Hr=null,Rl(f,_,ae,1);break;case 2:case 9:if(ml(ae)){Nn=0,Hr=null,od(_);break}_=function(){Nn!==2&&Nn!==9||Es!==f||(Nn=7),gn(f)},ae.then(_,_);break e;case 3:Nn=7;break e;case 4:Nn=5;break e;case 7:ml(ae)?(Nn=0,Hr=null,od(_)):(Nn=0,Hr=null,Rl(f,_,ae,7));break;case 5:var ye=null;switch(Yn.tag){case 26:ye=Yn.memoizedState;case 5:case 27:var Se=Yn;if(!ye||Im(ye)){Nn=0,Hr=null;var ke=Se.sibling;if(ke!==null)Yn=ke;else{var We=Se.return;We!==null?(Yn=We,Ho(We)):Yn=null}break t}}Nn=0,Hr=null,Rl(f,_,ae,5);break;case 6:Nn=0,Hr=null,Rl(f,_,ae,6);break;case 8:Dr(),Un=6;break e;default:throw Error(s(462))}}cc();break}catch(It){rd(f,It)}while(!0);return ya=bo=null,we.H=P,we.A=W,In=S,Yn!==null?0:(Es=null,ns=0,mi(),Un)}function cc(){for(;Yn!==null&&!Ne();)ad(Yn)}function ad(f){var _=iu(f.alternate,f,Ca);f.memoizedProps=f.pendingProps,_===null?Ho(f):Yn=_}function od(f){var _=f,S=_.alternate;switch(_.tag){case 15:case 0:_=Zu(S,_,_.pendingProps,_.type,void 0,ns);break;case 11:_=Zu(S,_,_.pendingProps,_.type.render,_.ref,ns);break;case 5:jd(_);default:au(S,_),_=Yn=Iu(_,Ca),_=iu(S,_,Ca)}f.memoizedProps=f.pendingProps,_===null?Ho(f):Yn=_}function Rl(f,_,S,P){ya=bo=null,jd(_),Xl=null,Fr=0;var W=_.return;try{if(kf(f,W,_,S,ns)){Un=1,Xu(f,pr(S,f.current)),Yn=null;return}}catch(ae){if(W!==null)throw Yn=W,ae;Un=1,Xu(f,pr(S,f.current)),Yn=null;return}_.flags&32768?(is||P===1?f=!0:Ps||(ns&536870912)!==0?f=!1:(jr=f=!0,(P===2||P===9||P===3||P===6)&&(P=gi.current,P!==null&&P.tag===13&&(P.flags|=16384))),ld(_,f)):Ho(_)}function Ho(f){var _=f;do{if((_.flags&32768)!==0){ld(_,jr);return}f=_.return;var S=eh(_.alternate,_,Ca);if(S!==null){Yn=S;return}if(_=_.sibling,_!==null){Yn=_;return}Yn=_=f}while(_!==null);Un===0&&(Un=5)}function ld(f,_){do{var S=yi(f.alternate,f);if(S!==null){S.flags&=32767,Yn=S;return}if(S=f.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!_&&(f=f.sibling,f!==null)){Yn=f;return}Yn=f=S}while(f!==null);Un=6,Yn=null}function E(f,_,S,P,W,ae,ye,Se,ke){f.cancelPendingCommit=null;do he();while(Rn!==0);if((In&6)!==0)throw Error(s(327));if(_!==null){if(_===f.current)throw Error(s(177));if(ae=_.lanes|_.childLanes,ae|=Dc,vn(f,S,ae,ye,Se,ke),f===Es&&(Yn=Es=null,ns=0),Mn=_,as=f,qn=S,ps=ae,Gr=W,eo=P,(_.subtreeFlags&10256)!==0||(_.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,Vi(Lt,function(){return Pe(),null})):(f.callbackNode=null,f.callbackPriority=0),P=(_.flags&13878)!==0,(_.subtreeFlags&13878)!==0||P){P=we.T,we.T=null,W=de.p,de.p=2,ye=In,In|=4;try{Lf(f,_,S)}finally{In=ye,de.p=W,we.T=P}}Rn=1,R(),I(),Z()}}function R(){if(Rn===1){Rn=0;var f=as,_=Mn,S=(_.flags&13878)!==0;if((_.subtreeFlags&13878)!==0||S){S=we.T,we.T=null;var P=de.p;de.p=2;var W=In;In|=4;try{uu(_,f);var ae=Kf,ye=gd(f.containerInfo),Se=ae.focusedElem,ke=ae.selectionRange;if(ye!==Se&&Se&&Se.ownerDocument&&pd(Se.ownerDocument.documentElement,Se)){if(ke!==null&&nl(Se)){var We=ke.start,It=ke.end;if(It===void 0&&(It=We),"selectionStart"in Se)Se.selectionStart=We,Se.selectionEnd=Math.min(It,Se.value.length);else{var kt=Se.ownerDocument||document,Je=kt&&kt.defaultView||window;if(Je.getSelection){var et=Je.getSelection(),jn=Se.textContent.length,Tn=Math.min(ke.start,jn),Ns=ke.end===void 0?Tn:Math.min(ke.end,jn);!et.extend&&Tn>Ns&&(ye=Ns,Ns=Tn,Tn=ye);var He=Ba(Se,Tn),ze=Ba(Se,Ns);if(He&&ze&&(et.rangeCount!==1||et.anchorNode!==He.node||et.anchorOffset!==He.offset||et.focusNode!==ze.node||et.focusOffset!==ze.offset)){var Xe=kt.createRange();Xe.setStart(He.node,He.offset),et.removeAllRanges(),Tn>Ns?(et.addRange(Xe),et.extend(ze.node,ze.offset)):(Xe.setEnd(ze.node,ze.offset),et.addRange(Xe))}}}}for(kt=[],et=Se;et=et.parentNode;)et.nodeType===1&&kt.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof Se.focus=="function"&&Se.focus(),Se=0;Se<kt.length;Se++){var Nt=kt[Se];Nt.element.scrollLeft=Nt.left,Nt.element.scrollTop=Nt.top}}Ef=!!Yf,Kf=Yf=null}finally{In=W,de.p=P,we.T=S}}f.current=_,Rn=2}}function I(){if(Rn===2){Rn=0;var f=as,_=Mn,S=(_.flags&8772)!==0;if((_.subtreeFlags&8772)!==0||S){S=we.T,we.T=null;var P=de.p;de.p=2;var W=In;In|=4;try{tc(f,_.alternate,_)}finally{In=W,de.p=P,we.T=S}}Rn=3}}function Z(){if(Rn===4||Rn===3){Rn=0,Ue();var f=as,_=Mn,S=qn,P=eo;(_.subtreeFlags&10256)!==0||(_.flags&10256)!==0?Rn=5:(Rn=0,Mn=as=null,oe(f,f.pendingLanes));var W=f.pendingLanes;if(W===0&&(Bo=null),js(S),_=_.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(Ct,_,void 0,(_.current.flags&128)===128)}catch{}if(P!==null){_=we.T,W=de.p,de.p=2,we.T=null;try{for(var ae=f.onRecoverableError,ye=0;ye<P.length;ye++){var Se=P[ye];ae(Se.value,{componentStack:Se.stack})}}finally{we.T=_,de.p=W}}(qn&3)!==0&&he(),gn(f),W=f.pendingLanes,(S&4194090)!==0&&(W&42)!==0?f===fu?Pa++:(Pa=0,fu=f):Pa=0,_s(0)}}function oe(f,_){(f.pooledCacheLanes&=_)===0&&(_=f.pooledCache,_!=null&&(f.pooledCache=null,Gi(_)))}function he(f){return R(),I(),Z(),Pe()}function Pe(){if(Rn!==5)return!1;var f=as,_=ps;ps=0;var S=js(qn),P=we.T,W=de.p;try{de.p=32>S?32:S,we.T=null,S=Gr,Gr=null;var ae=as,ye=qn;if(Rn=0,Mn=as=null,qn=0,(In&6)!==0)throw Error(s(331));var Se=In;if(In|=4,sc(ae.current),nc(ae,ae.current,ye,S),In=Se,_s(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(Ct,ae)}catch{}return!0}finally{de.p=W,we.T=P,oe(f,_)}}function Be(f,_,S){_=pr(S,_),_=Ql(f.stateNode,_,2),f=Br(f,_,2),f!==null&&(On(f,2),gn(f))}function Ge(f,_,S){if(f.tag===3)Be(f,f,S);else for(;_!==null;){if(_.tag===3){Be(_,f,S);break}else if(_.tag===1){var P=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(Bo===null||!Bo.has(P))){f=pr(S,f),S=su(2),P=Br(_,S,2),P!==null&&(Wu(S,P,_,f),On(P,2),gn(P));break}}_=_.return}}function Bt(f,_,S){var P=f.pingCache;if(P===null){P=f.pingCache=new Aa;var W=new Set;P.set(_,W)}else W=P.get(_),W===void 0&&(W=new Set,P.set(_,W));W.has(S)||(hu=!0,W.add(S),f=Kt.bind(null,f,_,S),_.then(f,f))}function Kt(f,_,S){var P=f.pingCache;P!==null&&P.delete(_),f.pingedLanes|=f.suspendedLanes&S,f.warmLanes&=~S,Es===f&&(ns&S)===S&&(Un===4||Un===3&&(ns&62914560)===ns&&300>pt()-ac?(In&2)===0&&Uo(f,0):vi|=S,rc===ns&&(rc=0)),gn(f)}function fn(f,_){_===0&&(_=Zs()),f=fa(f,_),f!==null&&(On(f,_),gn(f))}function pn(f){var _=f.memoizedState,S=0;_!==null&&(S=_.retryLane),fn(f,S)}function Vn(f,_){var S=0;switch(f.tag){case 13:var P=f.stateNode,W=f.memoizedState;W!==null&&(S=W.retryLane);break;case 19:P=f.stateNode;break;case 22:P=f.stateNode._retryCache;break;default:throw Error(s(314))}P!==null&&P.delete(_),fn(f,S)}function Vi(f,_){return Ie(f,_)}var Go=null,ki=null,Qe=!1,qe=!1,nt=!1,qt=0;function gn(f){f!==ki&&f.next===null&&(ki===null?Go=ki=f:ki=ki.next=f),qe=!0,Qe||(Qe=!0,Bf())}function _s(f,_){if(!nt&&qe){nt=!0;do for(var S=!1,P=Go;P!==null;){if(f!==0){var W=P.pendingLanes;if(W===0)var ae=0;else{var ye=P.suspendedLanes,Se=P.pingedLanes;ae=(1<<31-un(42|f)+1)-1,ae&=W&~(ye&~Se),ae=ae&201326741?ae&201326741|1:ae?ae|2:0}ae!==0&&(S=!0,no(P,ae))}else ae=ns,ae=Gn(P,P===Es?ae:0,P.cancelPendingCommit!==null||P.timeoutHandle!==-1),(ae&3)===0||Xn(P,ae)||(S=!0,no(P,ae));P=P.next}while(S);nt=!1}}function An(){os()}function os(){qe=Qe=!1;var f=0;qt!==0&&(Xm()&&(f=qt),qt=0);for(var _=pt(),S=null,P=Go;P!==null;){var W=P.next,ae=hr(P,_);ae===0?(P.next=null,S===null?Go=W:S.next=W,W===null&&(ki=S)):(S=P,(f!==0||(ae&3)!==0)&&(qe=!0)),P=W}_s(f)}function hr(f,_){for(var S=f.suspendedLanes,P=f.pingedLanes,W=f.expirationTimes,ae=f.pendingLanes&-62914561;0<ae;){var ye=31-un(ae),Se=1<<ye,ke=W[ye];ke===-1?((Se&S)===0||(Se&P)!==0)&&(W[ye]=kn(Se,_)):ke<=_&&(f.expiredLanes|=Se),ae&=~Se}if(_=Es,S=ns,S=Gn(f,f===_?S:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),P=f.callbackNode,S===0||f===_&&(Nn===2||Nn===9)||f.cancelPendingCommit!==null)return P!==null&&P!==null&&Re(P),f.callbackNode=null,f.callbackPriority=0;if((S&3)===0||Xn(f,S)){if(_=S&-S,_===f.callbackPriority)return _;switch(P!==null&&Re(P),js(S)){case 2:case 8:S=Ut;break;case 32:S=Lt;break;case 268435456:S=Gt;break;default:S=Lt}return P=ls.bind(null,f),S=Ie(S,P),f.callbackPriority=_,f.callbackNode=S,_}return P!==null&&P!==null&&Re(P),f.callbackPriority=2,f.callbackNode=null,2}function ls(f,_){if(Rn!==0&&Rn!==5)return f.callbackNode=null,f.callbackPriority=0,null;var S=f.callbackNode;if(he()&&f.callbackNode!==S)return null;var P=ns;return P=Gn(f,f===Es?P:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),P===0?null:(Fo(f,P,_),hr(f,pt()),f.callbackNode!=null&&f.callbackNode===S?ls.bind(null,f):null)}function no(f,_){if(he())return null;Fo(f,_,!0)}function Bf(){Qm(function(){(In&6)!==0?Ie(mn,An):os()})}function Ff(){return qt===0&&(qt=Ms()),qt}function cm(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:Pl(""+f)}function um(f,_){var S=_.ownerDocument.createElement("input");return S.name=_.name,S.value=_.value,f.id&&S.setAttribute("form",f.id),_.parentNode.insertBefore(S,_),f=new FormData(f),S.parentNode.removeChild(S),f}function Um(f,_,S,P,W){if(_==="submit"&&S&&S.stateNode===W){var ae=cm((W[es]||null).action),ye=P.submitter;ye&&(_=(_=ye[es]||null)?cm(_.formAction):ye.getAttribute("formAction"),_!==null&&(ae=_,ye=null));var Se=new Wo("action","action",null,P,W);f.push({event:Se,listeners:[{instance:null,listener:function(){if(P.defaultPrevented){if(qt!==0){var ke=ye?um(W,ye):new FormData(W);Hd(S,{pending:!0,data:ke,method:W.method,action:ae},null,ke)}}else typeof ae=="function"&&(Se.preventDefault(),ke=ye?um(W,ye):new FormData(W),Hd(S,{pending:!0,data:ke,method:W.method,action:ae},ae,ke))},currentTarget:W}]})}}for(var zf=0;zf<Tr.length;zf++){var Uf=Tr[zf],qm=Uf.toLowerCase(),Hm=Uf[0].toUpperCase()+Uf.slice(1);Pi(qm,"on"+Hm)}Pi(yd,"onAnimationEnd"),Pi(Ci,"onAnimationIteration"),Pi(Pu,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(xh,"onTransitionRun"),Pi(Nf,"onTransitionStart"),Pi(xd,"onTransitionCancel"),Pi(Sr,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ih));function dm(f,_){_=(_&4)!==0;for(var S=0;S<f.length;S++){var P=f[S],W=P.event;P=P.listeners;e:{var ae=void 0;if(_)for(var ye=P.length-1;0<=ye;ye--){var Se=P[ye],ke=Se.instance,We=Se.currentTarget;if(Se=Se.listener,ke!==ae&&W.isPropagationStopped())break e;ae=Se,W.currentTarget=We;try{ae(W)}catch(It){Wa(It)}W.currentTarget=null,ae=ke}else for(ye=0;ye<P.length;ye++){if(Se=P[ye],ke=Se.instance,We=Se.currentTarget,Se=Se.listener,ke!==ae&&W.isPropagationStopped())break e;ae=Se,W.currentTarget=We;try{ae(W)}catch(It){Wa(It)}W.currentTarget=null,ae=ke}}}}function ss(f,_){var S=_[Mr];S===void 0&&(S=_[Mr]=new Set);var P=f+"__bubble";S.has(P)||(hm(_,f,2,!1),S.add(P))}function qf(f,_,S){var P=0;_&&(P|=4),hm(S,f,P,_)}var ff="_reactListening"+Math.random().toString(36).slice(2);function Hf(f){if(!f[ff]){f[ff]=!0,$o.forEach(function(S){S!=="selectionchange"&&(Gm.has(S)||qf(S,!1,f),qf(S,!0,f))});var _=f.nodeType===9?f:f.ownerDocument;_===null||_[ff]||(_[ff]=!0,qf("selectionchange",!1,_))}}function hm(f,_,S,P){switch(Vm(_)){case 2:var W=_p;break;case 8:W=vp;break;default:W=rm}S=W.bind(null,_,S,f),W=void 0,!ui||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(W=!0),P?W!==void 0?f.addEventListener(_,S,{capture:!0,passive:W}):f.addEventListener(_,S,!0):W!==void 0?f.addEventListener(_,S,{passive:W}):f.addEventListener(_,S,!1)}function Gf(f,_,S,P,W){var ae=P;if((_&1)===0&&(_&2)===0&&P!==null)e:for(;;){if(P===null)return;var ye=P.tag;if(ye===3||ye===4){var Se=P.stateNode.containerInfo;if(Se===W)break;if(ye===4)for(ye=P.return;ye!==null;){var ke=ye.tag;if((ke===3||ke===4)&&ye.stateNode.containerInfo===W)return;ye=ye.return}for(;Se!==null;){if(ye=li(Se),ye===null)return;if(ke=ye.tag,ke===5||ke===6||ke===26||ke===27){P=ae=ye;continue e}Se=Se.parentNode}}P=P.return}_c(function(){var We=ae,It=_r(S),kt=[];e:{var Je=_d.get(f);if(Je!==void 0){var et=Wo,jn=f;switch(f){case"keypress":if(Si(S)===0)break e;case"keydown":case"keyup":et=La;break;case"focusin":jn="focus",et=oa;break;case"focusout":jn="blur",et=oa;break;case"beforeblur":case"afterblur":et=oa;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=kr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=Rc;break;case yd:case Ci:case Pu:et=Zo;break;case Sr:et=er;break;case"scroll":case"scrollend":et=_u;break;case"wheel":et=tl;break;case"copy":case"cut":case"paste":et=di;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=el;break;case"toggle":case"beforetoggle":et=Sc}var Tn=(_&4)!==0,Ns=!Tn&&(f==="scroll"||f==="scrollend"),He=Tn?Je!==null?Je+"Capture":null:Je;Tn=[];for(var ze=We,Xe;ze!==null;){var Nt=ze;if(Xe=Nt.stateNode,Nt=Nt.tag,Nt!==5&&Nt!==26&&Nt!==27||Xe===null||He===null||(Nt=co(ze,He),Nt!=null&&Tn.push(ah(ze,Nt,Xe))),Ns)break;ze=ze.return}0<Tn.length&&(Je=new et(Je,jn,null,S,It),kt.push({event:Je,listeners:Tn}))}}if((_&7)===0){e:{if(Je=f==="mouseover"||f==="pointerover",et=f==="mouseout"||f==="pointerout",Je&&S!==na&&(jn=S.relatedTarget||S.fromElement)&&(li(jn)||jn[Rs]))break e;if((et||Je)&&(Je=It.window===It?It:(Je=It.ownerDocument)?Je.defaultView||Je.parentWindow:window,et?(jn=S.relatedTarget||S.toElement,et=We,jn=jn?li(jn):null,jn!==null&&(Ns=u(jn),Tn=jn.tag,jn!==Ns||Tn!==5&&Tn!==27&&Tn!==6)&&(jn=null)):(et=null,jn=We),et!==jn)){if(Tn=kr,Nt="onMouseLeave",He="onMouseEnter",ze="mouse",(f==="pointerout"||f==="pointerover")&&(Tn=el,Nt="onPointerLeave",He="onPointerEnter",ze="pointer"),Ns=et==null?Je:Bi(et),Xe=jn==null?Je:Bi(jn),Je=new Tn(Nt,ze+"leave",et,S,It),Je.target=Ns,Je.relatedTarget=Xe,Nt=null,li(It)===We&&(Tn=new Tn(He,ze+"enter",jn,S,It),Tn.target=Xe,Tn.relatedTarget=Ns,Nt=Tn),Ns=Nt,et&&jn)t:{for(Tn=et,He=jn,ze=0,Xe=Tn;Xe;Xe=cd(Xe))ze++;for(Xe=0,Nt=He;Nt;Nt=cd(Nt))Xe++;for(;0<ze-Xe;)Tn=cd(Tn),ze--;for(;0<Xe-ze;)He=cd(He),Xe--;for(;ze--;){if(Tn===He||He!==null&&Tn===He.alternate)break t;Tn=cd(Tn),He=cd(He)}Tn=null}else Tn=null;et!==null&&fm(kt,Je,et,Tn,!1),jn!==null&&Ns!==null&&fm(kt,Ns,jn,Tn,!0)}}e:{if(Je=We?Bi(We):window,et=Je.nodeName&&Je.nodeName.toLowerCase(),et==="select"||et==="input"&&Je.type==="file")var yn=Zr;else if(Ws(Je))if(fd)yn=Fs;else{yn=Tu;var Jn=gh}else et=Je.nodeName,!et||et.toLowerCase()!=="input"||Je.type!=="checkbox"&&Je.type!=="radio"?We&&Cl(We.elementType)&&(yn=Zr):yn=Ic;if(yn&&(yn=yn(f,We))){ua(kt,yn,S,It);break e}Jn&&Jn(f,Je,We),f==="focusout"&&We&&Je.type==="number"&&We.memoizedProps.value!=null&&Oa(Je,"number",Je.value)}switch(Jn=We?Bi(We):window,f){case"focusin":(Ws(Jn)||Jn.contentEditable==="true")&&(sl=Jn,Nc=We,kl=null);break;case"focusout":kl=Nc=sl=null;break;case"mousedown":jc=!0;break;case"contextmenu":case"mouseup":case"dragend":jc=!1,Au(kt,S,It);break;case"selectionchange":if(da)break;case"keydown":case"keyup":Au(kt,S,It)}var bn;if(hi)e:{switch(f){case"compositionstart":var Cn="onCompositionStart";break e;case"compositionend":Cn="onCompositionEnd";break e;case"compositionupdate":Cn="onCompositionUpdate";break e}Cn=void 0}else Wn?vt(f,S)&&(Cn="onCompositionEnd"):f==="keydown"&&S.keyCode===229&&(Cn="onCompositionStart");Cn&&(ge&&S.locale!=="ko"&&(Wn||Cn!=="onCompositionStart"?Cn==="onCompositionEnd"&&Wn&&(bn=Il()):(Ui=It,ra="value"in Ui?Ui.value:Ui.textContent,Wn=!0)),Jn=mf(We,Cn),0<Jn.length&&(Cn=new Ti(Cn,f,null,S,It),kt.push({event:Cn,listeners:Jn}),bn?Cn.data=bn:(bn=Wt(S),bn!==null&&(Cn.data=bn)))),(bn=fe?$s(f,S):Qn(f,S))&&(Cn=mf(We,"onBeforeInput"),0<Cn.length&&(Jn=new Ti("onBeforeInput","beforeinput",null,S,It),kt.push({event:Jn,listeners:Cn}),Jn.data=bn)),Um(kt,f,We,S,It)}dm(kt,_)})}function ah(f,_,S){return{instance:f,listener:_,currentTarget:S}}function mf(f,_){for(var S=_+"Capture",P=[];f!==null;){var W=f,ae=W.stateNode;if(W=W.tag,W!==5&&W!==26&&W!==27||ae===null||(W=co(f,S),W!=null&&P.unshift(ah(f,W,ae)),W=co(f,_),W!=null&&P.push(ah(f,W,ae))),f.tag===3)return P;f=f.return}return[]}function cd(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function fm(f,_,S,P,W){for(var ae=_._reactName,ye=[];S!==null&&S!==P;){var Se=S,ke=Se.alternate,We=Se.stateNode;if(Se=Se.tag,ke!==null&&ke===P)break;Se!==5&&Se!==26&&Se!==27||We===null||(ke=We,W?(We=co(S,ae),We!=null&&ye.unshift(ah(S,We,ke))):W||(We=co(S,ae),We!=null&&ye.push(ah(S,We,ke)))),S=S.return}ye.length!==0&&f.push({event:_,listeners:ye})}var $m=/\r\n?/g,Ym=/\u0000|\uFFFD/g;function mm(f){return(typeof f=="string"?f:""+f).replace($m,`
`).replace(Ym,"")}function pm(f,_){return _=mm(_),mm(f)===_}function pf(){}function Is(f,_,S,P,W,ae){switch(S){case"children":typeof P=="string"?_==="body"||_==="textarea"&&P===""||ci(f,P):(typeof P=="number"||typeof P=="bigint")&&_!=="body"&&ci(f,""+P);break;case"className":Ei(f,"class",P);break;case"tabIndex":Ei(f,"tabindex",P);break;case"dir":case"role":case"viewBox":case"width":case"height":Ei(f,S,P);break;case"style":Al(f,P,ae);break;case"data":if(_!=="object"){Ei(f,"data",P);break}case"src":case"href":if(P===""&&(_!=="a"||S!=="href")){f.removeAttribute(S);break}if(P==null||typeof P=="function"||typeof P=="symbol"||typeof P=="boolean"){f.removeAttribute(S);break}P=Pl(""+P),f.setAttribute(S,P);break;case"action":case"formAction":if(typeof P=="function"){f.setAttribute(S,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ae=="function"&&(S==="formAction"?(_!=="input"&&Is(f,_,"name",W.name,W,null),Is(f,_,"formEncType",W.formEncType,W,null),Is(f,_,"formMethod",W.formMethod,W,null),Is(f,_,"formTarget",W.formTarget,W,null)):(Is(f,_,"encType",W.encType,W,null),Is(f,_,"method",W.method,W,null),Is(f,_,"target",W.target,W,null)));if(P==null||typeof P=="symbol"||typeof P=="boolean"){f.removeAttribute(S);break}P=Pl(""+P),f.setAttribute(S,P);break;case"onClick":P!=null&&(f.onclick=pf);break;case"onScroll":P!=null&&ss("scroll",f);break;case"onScrollEnd":P!=null&&ss("scrollend",f);break;case"dangerouslySetInnerHTML":if(P!=null){if(typeof P!="object"||!("__html"in P))throw Error(s(61));if(S=P.__html,S!=null){if(W.children!=null)throw Error(s(60));f.innerHTML=S}}break;case"multiple":f.multiple=P&&typeof P!="function"&&typeof P!="symbol";break;case"muted":f.muted=P&&typeof P!="function"&&typeof P!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(P==null||typeof P=="function"||typeof P=="boolean"||typeof P=="symbol"){f.removeAttribute("xlink:href");break}S=Pl(""+P),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",S);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":P!=null&&typeof P!="function"&&typeof P!="symbol"?f.setAttribute(S,""+P):f.removeAttribute(S);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":P&&typeof P!="function"&&typeof P!="symbol"?f.setAttribute(S,""):f.removeAttribute(S);break;case"capture":case"download":P===!0?f.setAttribute(S,""):P!==!1&&P!=null&&typeof P!="function"&&typeof P!="symbol"?f.setAttribute(S,P):f.removeAttribute(S);break;case"cols":case"rows":case"size":case"span":P!=null&&typeof P!="function"&&typeof P!="symbol"&&!isNaN(P)&&1<=P?f.setAttribute(S,P):f.removeAttribute(S);break;case"rowSpan":case"start":P==null||typeof P=="function"||typeof P=="symbol"||isNaN(P)?f.removeAttribute(S):f.setAttribute(S,P);break;case"popover":ss("beforetoggle",f),ss("toggle",f),ea(f,"popover",P);break;case"xlinkActuate":or(f,"http://www.w3.org/1999/xlink","xlink:actuate",P);break;case"xlinkArcrole":or(f,"http://www.w3.org/1999/xlink","xlink:arcrole",P);break;case"xlinkRole":or(f,"http://www.w3.org/1999/xlink","xlink:role",P);break;case"xlinkShow":or(f,"http://www.w3.org/1999/xlink","xlink:show",P);break;case"xlinkTitle":or(f,"http://www.w3.org/1999/xlink","xlink:title",P);break;case"xlinkType":or(f,"http://www.w3.org/1999/xlink","xlink:type",P);break;case"xmlBase":or(f,"http://www.w3.org/XML/1998/namespace","xml:base",P);break;case"xmlLang":or(f,"http://www.w3.org/XML/1998/namespace","xml:lang",P);break;case"xmlSpace":or(f,"http://www.w3.org/XML/1998/namespace","xml:space",P);break;case"is":ea(f,"is",P);break;case"innerText":case"textContent":break;default:(!(2<S.length)||S[0]!=="o"&&S[0]!=="O"||S[1]!=="n"&&S[1]!=="N")&&(S=yu.get(S)||S,ea(f,S,P))}}function $f(f,_,S,P,W,ae){switch(S){case"style":Al(f,P,ae);break;case"dangerouslySetInnerHTML":if(P!=null){if(typeof P!="object"||!("__html"in P))throw Error(s(61));if(S=P.__html,S!=null){if(W.children!=null)throw Error(s(60));f.innerHTML=S}}break;case"children":typeof P=="string"?ci(f,P):(typeof P=="number"||typeof P=="bigint")&&ci(f,""+P);break;case"onScroll":P!=null&&ss("scroll",f);break;case"onScrollEnd":P!=null&&ss("scrollend",f);break;case"onClick":P!=null&&(f.onclick=pf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ro.hasOwnProperty(S))e:{if(S[0]==="o"&&S[1]==="n"&&(W=S.endsWith("Capture"),_=S.slice(2,W?S.length-7:void 0),ae=f[es]||null,ae=ae!=null?ae[S]:null,typeof ae=="function"&&f.removeEventListener(_,ae,W),typeof P=="function")){typeof ae!="function"&&ae!==null&&(S in f?f[S]=null:f.hasAttribute(S)&&f.removeAttribute(S)),f.addEventListener(_,P,W);break e}S in f?f[S]=P:P===!0?f.setAttribute(S,""):ea(f,S,P)}}}function $r(f,_,S){switch(_){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ss("error",f),ss("load",f);var P=!1,W=!1,ae;for(ae in S)if(S.hasOwnProperty(ae)){var ye=S[ae];if(ye!=null)switch(ae){case"src":P=!0;break;case"srcSet":W=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,_));default:Is(f,_,ae,ye,S,null)}}W&&Is(f,_,"srcSet",S.srcSet,S,null),P&&Is(f,_,"src",S.src,S,null);return;case"input":ss("invalid",f);var Se=ae=ye=W=null,ke=null,We=null;for(P in S)if(S.hasOwnProperty(P)){var It=S[P];if(It!=null)switch(P){case"name":W=It;break;case"type":ye=It;break;case"checked":ke=It;break;case"defaultChecked":We=It;break;case"value":ae=It;break;case"defaultValue":Se=It;break;case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(s(137,_));break;default:Is(f,_,P,It,S,null)}}Da(f,ae,Se,ke,We,ye,W,!1),Xo(f);return;case"select":ss("invalid",f),P=ye=ae=null;for(W in S)if(S.hasOwnProperty(W)&&(Se=S[W],Se!=null))switch(W){case"value":ae=Se;break;case"defaultValue":ye=Se;break;case"multiple":P=Se;default:Is(f,_,W,Se,S,null)}_=ae,S=ye,f.multiple=!!P,_!=null?Ma(f,!!P,_,!1):S!=null&&Ma(f,!!P,S,!0);return;case"textarea":ss("invalid",f),ae=W=P=null;for(ye in S)if(S.hasOwnProperty(ye)&&(Se=S[ye],Se!=null))switch(ye){case"value":P=Se;break;case"defaultValue":W=Se;break;case"children":ae=Se;break;case"dangerouslySetInnerHTML":if(Se!=null)throw Error(s(91));break;default:Is(f,_,ye,Se,S,null)}oo(f,P,W,ae),Xo(f);return;case"option":for(ke in S)if(S.hasOwnProperty(ke)&&(P=S[ke],P!=null))switch(ke){case"selected":f.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Is(f,_,ke,P,S,null)}return;case"dialog":ss("beforetoggle",f),ss("toggle",f),ss("cancel",f),ss("close",f);break;case"iframe":case"object":ss("load",f);break;case"video":case"audio":for(P=0;P<ih.length;P++)ss(ih[P],f);break;case"image":ss("error",f),ss("load",f);break;case"details":ss("toggle",f);break;case"embed":case"source":case"link":ss("error",f),ss("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in S)if(S.hasOwnProperty(We)&&(P=S[We],P!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,_));default:Is(f,_,We,P,S,null)}return;default:if(Cl(_)){for(It in S)S.hasOwnProperty(It)&&(P=S[It],P!==void 0&&$f(f,_,It,P,S,void 0));return}}for(Se in S)S.hasOwnProperty(Se)&&(P=S[Se],P!=null&&Is(f,_,Se,P,S,null))}function Km(f,_,S,P){switch(_){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var W=null,ae=null,ye=null,Se=null,ke=null,We=null,It=null;for(et in S){var kt=S[et];if(S.hasOwnProperty(et)&&kt!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":ke=kt;default:P.hasOwnProperty(et)||Is(f,_,et,null,P,kt)}}for(var Je in P){var et=P[Je];if(kt=S[Je],P.hasOwnProperty(Je)&&(et!=null||kt!=null))switch(Je){case"type":ae=et;break;case"name":W=et;break;case"checked":We=et;break;case"defaultChecked":It=et;break;case"value":ye=et;break;case"defaultValue":Se=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(s(137,_));break;default:et!==kt&&Is(f,_,Je,et,P,kt)}}Xr(f,ye,Se,ke,We,It,ae,W);return;case"select":et=ye=Se=Je=null;for(ae in S)if(ke=S[ae],S.hasOwnProperty(ae)&&ke!=null)switch(ae){case"value":break;case"multiple":et=ke;default:P.hasOwnProperty(ae)||Is(f,_,ae,null,P,ke)}for(W in P)if(ae=P[W],ke=S[W],P.hasOwnProperty(W)&&(ae!=null||ke!=null))switch(W){case"value":Je=ae;break;case"defaultValue":Se=ae;break;case"multiple":ye=ae;default:ae!==ke&&Is(f,_,W,ae,P,ke)}_=Se,S=ye,P=et,Je!=null?Ma(f,!!S,Je,!1):!!P!=!!S&&(_!=null?Ma(f,!!S,_,!0):Ma(f,!!S,S?[]:"",!1));return;case"textarea":et=Je=null;for(Se in S)if(W=S[Se],S.hasOwnProperty(Se)&&W!=null&&!P.hasOwnProperty(Se))switch(Se){case"value":break;case"children":break;default:Is(f,_,Se,null,P,W)}for(ye in P)if(W=P[ye],ae=S[ye],P.hasOwnProperty(ye)&&(W!=null||ae!=null))switch(ye){case"value":Je=W;break;case"defaultValue":et=W;break;case"children":break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(91));break;default:W!==ae&&Is(f,_,ye,W,P,ae)}xs(f,Je,et);return;case"option":for(var jn in S)if(Je=S[jn],S.hasOwnProperty(jn)&&Je!=null&&!P.hasOwnProperty(jn))switch(jn){case"selected":f.selected=!1;break;default:Is(f,_,jn,null,P,Je)}for(ke in P)if(Je=P[ke],et=S[ke],P.hasOwnProperty(ke)&&Je!==et&&(Je!=null||et!=null))switch(ke){case"selected":f.selected=Je&&typeof Je!="function"&&typeof Je!="symbol";break;default:Is(f,_,ke,Je,P,et)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tn in S)Je=S[Tn],S.hasOwnProperty(Tn)&&Je!=null&&!P.hasOwnProperty(Tn)&&Is(f,_,Tn,null,P,Je);for(We in P)if(Je=P[We],et=S[We],P.hasOwnProperty(We)&&Je!==et&&(Je!=null||et!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(s(137,_));break;default:Is(f,_,We,Je,P,et)}return;default:if(Cl(_)){for(var Ns in S)Je=S[Ns],S.hasOwnProperty(Ns)&&Je!==void 0&&!P.hasOwnProperty(Ns)&&$f(f,_,Ns,void 0,P,Je);for(It in P)Je=P[It],et=S[It],!P.hasOwnProperty(It)||Je===et||Je===void 0&&et===void 0||$f(f,_,It,Je,P,et);return}}for(var He in S)Je=S[He],S.hasOwnProperty(He)&&Je!=null&&!P.hasOwnProperty(He)&&Is(f,_,He,null,P,Je);for(kt in P)Je=P[kt],et=S[kt],!P.hasOwnProperty(kt)||Je===et||Je==null&&et==null||Is(f,_,kt,Je,P,et)}var Yf=null,Kf=null;function gf(f){return f.nodeType===9?f:f.ownerDocument}function gm(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ym(f,_){if(f===0)switch(_){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&_==="foreignObject"?0:f}function Xf(f,_){return f==="textarea"||f==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.children=="bigint"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Wf=null;function Xm(){var f=window.event;return f&&f.type==="popstate"?f===Wf?!1:(Wf=f,!0):(Wf=null,!1)}var xm=typeof setTimeout=="function"?setTimeout:void 0,Wm=typeof clearTimeout=="function"?clearTimeout:void 0,_m=typeof Promise=="function"?Promise:void 0,Qm=typeof queueMicrotask=="function"?queueMicrotask:typeof _m<"u"?function(f){return _m.resolve(null).then(f).catch(Zm)}:xm;function Zm(f){setTimeout(function(){throw f})}function uc(f){return f==="head"}function vm(f,_){var S=_,P=0,W=0;do{var ae=S.nextSibling;if(f.removeChild(S),ae&&ae.nodeType===8)if(S=ae.data,S==="/$"){if(0<P&&8>P){S=P;var ye=f.ownerDocument;if(S&1&&oh(ye.documentElement),S&2&&oh(ye.body),S&4)for(S=ye.head,oh(S),ye=S.firstChild;ye;){var Se=ye.nextSibling,ke=ye.nodeName;ye[Vr]||ke==="SCRIPT"||ke==="STYLE"||ke==="LINK"&&ye.rel.toLowerCase()==="stylesheet"||S.removeChild(ye),ye=Se}}if(W===0){f.removeChild(ae),ph(_);return}W--}else S==="$"||S==="$?"||S==="$!"?W++:P=S.charCodeAt(0)-48;else P=0;S=ae}while(S);ph(_)}function Qf(f){var _=f.firstChild;for(_&&_.nodeType===10&&(_=_.nextSibling);_;){var S=_;switch(_=_.nextSibling,S.nodeName){case"HTML":case"HEAD":case"BODY":Qf(S),Ji(S);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(S.rel.toLowerCase()==="stylesheet")continue}f.removeChild(S)}}function Jm(f,_,S,P){for(;f.nodeType===1;){var W=S;if(f.nodeName.toLowerCase()!==_.toLowerCase()){if(!P&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(P){if(!f[Vr])switch(_){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(ae=f.getAttribute("rel"),ae==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(ae!==W.rel||f.getAttribute("href")!==(W.href==null||W.href===""?null:W.href)||f.getAttribute("crossorigin")!==(W.crossOrigin==null?null:W.crossOrigin)||f.getAttribute("title")!==(W.title==null?null:W.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(ae=f.getAttribute("src"),(ae!==(W.src==null?null:W.src)||f.getAttribute("type")!==(W.type==null?null:W.type)||f.getAttribute("crossorigin")!==(W.crossOrigin==null?null:W.crossOrigin))&&ae&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(_==="input"&&f.type==="hidden"){var ae=W.name==null?null:""+W.name;if(W.type==="hidden"&&f.getAttribute("name")===ae)return f}else return f;if(f=so(f.nextSibling),f===null)break}return null}function ep(f,_,S){if(_==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!S||(f=so(f.nextSibling),f===null))return null;return f}function Zf(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function tp(f,_){var S=f.ownerDocument;if(f.data!=="$?"||S.readyState==="complete")_();else{var P=function(){_(),S.removeEventListener("DOMContentLoaded",P)};S.addEventListener("DOMContentLoaded",P),f._reactRetry=P}}function so(f){for(;f!=null;f=f.nextSibling){var _=f.nodeType;if(_===1||_===3)break;if(_===8){if(_=f.data,_==="$"||_==="$!"||_==="$?"||_==="F!"||_==="F")break;if(_==="/$")return null}}return f}var Jf=null;function bm(f){f=f.previousSibling;for(var _=0;f;){if(f.nodeType===8){var S=f.data;if(S==="$"||S==="$!"||S==="$?"){if(_===0)return f;_--}else S==="/$"&&_++}f=f.previousSibling}return null}function Em(f,_,S){switch(_=gf(S),f){case"html":if(f=_.documentElement,!f)throw Error(s(452));return f;case"head":if(f=_.head,!f)throw Error(s(453));return f;case"body":if(f=_.body,!f)throw Error(s(454));return f;default:throw Error(s(451))}}function oh(f){for(var _=f.attributes;_.length;)f.removeAttributeNode(_[0]);Ji(f)}var Na=new Map,Rm=new Set;function yf(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var wl=de.d;de.d={f:np,r:sp,D:rp,C:ip,L:ap,m:op,X:cp,S:lp,M:dp};function np(){var f=wl.f(),_=zo();return f||_}function sp(f){var _=Yr(f);_!==null&&_.tag===5&&_.type==="form"?Xh(_):wl.r(f)}var ud=typeof document>"u"?null:document;function wm(f,_,S){var P=ud;if(P&&typeof _=="string"&&_){var W=Xs(_);W='link[rel="'+f+'"][href="'+W+'"]',typeof S=="string"&&(W+='[crossorigin="'+S+'"]'),Rm.has(W)||(Rm.add(W),f={rel:f,crossOrigin:S,href:_},P.querySelector(W)===null&&(_=P.createElement("link"),$r(_,"link",f),Gs(_),P.head.appendChild(_)))}}function rp(f){wl.D(f),wm("dns-prefetch",f,null)}function ip(f,_){wl.C(f,_),wm("preconnect",f,_)}function ap(f,_,S){wl.L(f,_,S);var P=ud;if(P&&f&&_){var W='link[rel="preload"][as="'+Xs(_)+'"]';_==="image"&&S&&S.imageSrcSet?(W+='[imagesrcset="'+Xs(S.imageSrcSet)+'"]',typeof S.imageSizes=="string"&&(W+='[imagesizes="'+Xs(S.imageSizes)+'"]')):W+='[href="'+Xs(f)+'"]';var ae=W;switch(_){case"style":ae=dd(f);break;case"script":ae=hd(f)}Na.has(ae)||(f=w({rel:"preload",href:_==="image"&&S&&S.imageSrcSet?void 0:f,as:_},S),Na.set(ae,f),P.querySelector(W)!==null||_==="style"&&P.querySelector(lh(ae))||_==="script"&&P.querySelector(ch(ae))||(_=P.createElement("link"),$r(_,"link",f),Gs(_),P.head.appendChild(_)))}}function op(f,_){wl.m(f,_);var S=ud;if(S&&f){var P=_&&typeof _.as=="string"?_.as:"script",W='link[rel="modulepreload"][as="'+Xs(P)+'"][href="'+Xs(f)+'"]',ae=W;switch(P){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ae=hd(f)}if(!Na.has(ae)&&(f=w({rel:"modulepreload",href:f},_),Na.set(ae,f),S.querySelector(W)===null)){switch(P){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(S.querySelector(ch(ae)))return}P=S.createElement("link"),$r(P,"link",f),Gs(P),S.head.appendChild(P)}}}function lp(f,_,S){wl.S(f,_,S);var P=ud;if(P&&f){var W=Rr(P).hoistableStyles,ae=dd(f);_=_||"default";var ye=W.get(ae);if(!ye){var Se={loading:0,preload:null};if(ye=P.querySelector(lh(ae)))Se.loading=5;else{f=w({rel:"stylesheet",href:f,"data-precedence":_},S),(S=Na.get(ae))&&em(f,S);var ke=ye=P.createElement("link");Gs(ke),$r(ke,"link",f),ke._p=new Promise(function(We,It){ke.onload=We,ke.onerror=It}),ke.addEventListener("load",function(){Se.loading|=1}),ke.addEventListener("error",function(){Se.loading|=2}),Se.loading|=4,xf(ye,_,P)}ye={type:"stylesheet",instance:ye,count:1,state:Se},W.set(ae,ye)}}}function cp(f,_){wl.X(f,_);var S=ud;if(S&&f){var P=Rr(S).hoistableScripts,W=hd(f),ae=P.get(W);ae||(ae=S.querySelector(ch(W)),ae||(f=w({src:f,async:!0},_),(_=Na.get(W))&&tm(f,_),ae=S.createElement("script"),Gs(ae),$r(ae,"link",f),S.head.appendChild(ae)),ae={type:"script",instance:ae,count:1,state:null},P.set(W,ae))}}function dp(f,_){wl.M(f,_);var S=ud;if(S&&f){var P=Rr(S).hoistableScripts,W=hd(f),ae=P.get(W);ae||(ae=S.querySelector(ch(W)),ae||(f=w({src:f,async:!0,type:"module"},_),(_=Na.get(W))&&tm(f,_),ae=S.createElement("script"),Gs(ae),$r(ae,"link",f),S.head.appendChild(ae)),ae={type:"script",instance:ae,count:1,state:null},P.set(W,ae))}}function Sm(f,_,S,P){var W=(W=Ce.current)?yf(W):null;if(!W)throw Error(s(446));switch(f){case"meta":case"title":return null;case"style":return typeof S.precedence=="string"&&typeof S.href=="string"?(_=dd(S.href),S=Rr(W).hoistableStyles,P=S.get(_),P||(P={type:"style",instance:null,count:0,state:null},S.set(_,P)),P):{type:"void",instance:null,count:0,state:null};case"link":if(S.rel==="stylesheet"&&typeof S.href=="string"&&typeof S.precedence=="string"){f=dd(S.href);var ae=Rr(W).hoistableStyles,ye=ae.get(f);if(ye||(W=W.ownerDocument||W,ye={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ae.set(f,ye),(ae=W.querySelector(lh(f)))&&!ae._p&&(ye.instance=ae,ye.state.loading=5),Na.has(f)||(S={rel:"preload",as:"style",href:S.href,crossOrigin:S.crossOrigin,integrity:S.integrity,media:S.media,hrefLang:S.hrefLang,referrerPolicy:S.referrerPolicy},Na.set(f,S),ae||hp(W,f,S,ye.state))),_&&P===null)throw Error(s(528,""));return ye}if(_&&P!==null)throw Error(s(529,""));return null;case"script":return _=S.async,S=S.src,typeof S=="string"&&_&&typeof _!="function"&&typeof _!="symbol"?(_=hd(S),S=Rr(W).hoistableScripts,P=S.get(_),P||(P={type:"script",instance:null,count:0,state:null},S.set(_,P)),P):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,f))}}function dd(f){return'href="'+Xs(f)+'"'}function lh(f){return'link[rel="stylesheet"]['+f+"]"}function Tm(f){return w({},f,{"data-precedence":f.precedence,precedence:null})}function hp(f,_,S,P){f.querySelector('link[rel="preload"][as="style"]['+_+"]")?P.loading=1:(_=f.createElement("link"),P.preload=_,_.addEventListener("load",function(){return P.loading|=1}),_.addEventListener("error",function(){return P.loading|=2}),$r(_,"link",S),Gs(_),f.head.appendChild(_))}function hd(f){return'[src="'+Xs(f)+'"]'}function ch(f){return"script[async]"+f}function Am(f,_,S){if(_.count++,_.instance===null)switch(_.type){case"style":var P=f.querySelector('style[data-href~="'+Xs(S.href)+'"]');if(P)return _.instance=P,Gs(P),P;var W=w({},S,{"data-href":S.href,"data-precedence":S.precedence,href:null,precedence:null});return P=(f.ownerDocument||f).createElement("style"),Gs(P),$r(P,"style",W),xf(P,S.precedence,f),_.instance=P;case"stylesheet":W=dd(S.href);var ae=f.querySelector(lh(W));if(ae)return _.state.loading|=4,_.instance=ae,Gs(ae),ae;P=Tm(S),(W=Na.get(W))&&em(P,W),ae=(f.ownerDocument||f).createElement("link"),Gs(ae);var ye=ae;return ye._p=new Promise(function(Se,ke){ye.onload=Se,ye.onerror=ke}),$r(ae,"link",P),_.state.loading|=4,xf(ae,S.precedence,f),_.instance=ae;case"script":return ae=hd(S.src),(W=f.querySelector(ch(ae)))?(_.instance=W,Gs(W),W):(P=S,(W=Na.get(ae))&&(P=w({},S),tm(P,W)),f=f.ownerDocument||f,W=f.createElement("script"),Gs(W),$r(W,"link",P),f.head.appendChild(W),_.instance=W);case"void":return null;default:throw Error(s(443,_.type))}else _.type==="stylesheet"&&(_.state.loading&4)===0&&(P=_.instance,_.state.loading|=4,xf(P,S.precedence,f));return _.instance}function xf(f,_,S){for(var P=S.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),W=P.length?P[P.length-1]:null,ae=W,ye=0;ye<P.length;ye++){var Se=P[ye];if(Se.dataset.precedence===_)ae=Se;else if(ae!==W)break}ae?ae.parentNode.insertBefore(f,ae.nextSibling):(_=S.nodeType===9?S.head:S,_.insertBefore(f,_.firstChild))}function em(f,_){f.crossOrigin==null&&(f.crossOrigin=_.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=_.referrerPolicy),f.title==null&&(f.title=_.title)}function tm(f,_){f.crossOrigin==null&&(f.crossOrigin=_.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=_.referrerPolicy),f.integrity==null&&(f.integrity=_.integrity)}var _f=null;function Cm(f,_,S){if(_f===null){var P=new Map,W=_f=new Map;W.set(S,P)}else W=_f,P=W.get(S),P||(P=new Map,W.set(S,P));if(P.has(f))return P;for(P.set(f,null),S=S.getElementsByTagName(f),W=0;W<S.length;W++){var ae=S[W];if(!(ae[Vr]||ae[$n]||f==="link"&&ae.getAttribute("rel")==="stylesheet")&&ae.namespaceURI!=="http://www.w3.org/2000/svg"){var ye=ae.getAttribute(_)||"";ye=f+ye;var Se=P.get(ye);Se?Se.push(ae):P.set(ye,[ae])}}return P}function Pm(f,_,S){f=f.ownerDocument||f,f.head.insertBefore(S,_==="title"?f.querySelector("head > title"):null)}function fp(f,_,S){if(S===1||_.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof _.precedence!="string"||typeof _.href!="string"||_.href==="")break;return!0;case"link":if(typeof _.rel!="string"||typeof _.href!="string"||_.href===""||_.onLoad||_.onError)break;switch(_.rel){case"stylesheet":return f=_.disabled,typeof _.precedence=="string"&&f==null;default:return!0}case"script":if(_.async&&typeof _.async!="function"&&typeof _.async!="symbol"&&!_.onLoad&&!_.onError&&_.src&&typeof _.src=="string")return!0}return!1}function Im(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var uh=null;function mp(){}function pp(f,_,S){if(uh===null)throw Error(s(475));var P=uh;if(_.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var W=dd(S.href),ae=f.querySelector(lh(W));if(ae){f=ae._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(P.count++,P=vf.bind(P),f.then(P,P)),_.state.loading|=4,_.instance=ae,Gs(ae);return}ae=f.ownerDocument||f,S=Tm(S),(W=Na.get(W))&&em(S,W),ae=ae.createElement("link"),Gs(ae);var ye=ae;ye._p=new Promise(function(Se,ke){ye.onload=Se,ye.onerror=ke}),$r(ae,"link",S),_.instance=ae}P.stylesheets===null&&(P.stylesheets=new Map),P.stylesheets.set(_,f),(f=_.state.preload)&&(_.state.loading&3)===0&&(P.count++,_=vf.bind(P),f.addEventListener("load",_),f.addEventListener("error",_))}}function gp(){if(uh===null)throw Error(s(475));var f=uh;return f.stylesheets&&f.count===0&&nm(f,f.stylesheets),0<f.count?function(_){var S=setTimeout(function(){if(f.stylesheets&&nm(f,f.stylesheets),f.unsuspend){var P=f.unsuspend;f.unsuspend=null,P()}},6e4);return f.unsuspend=_,function(){f.unsuspend=null,clearTimeout(S)}}:null}function vf(){if(this.count--,this.count===0){if(this.stylesheets)nm(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var bf=null;function nm(f,_){f.stylesheets=null,f.unsuspend!==null&&(f.count++,bf=new Map,_.forEach(yp,f),bf=null,vf.call(f))}function yp(f,_){if(!(_.state.loading&4)){var S=bf.get(f);if(S)var P=S.get(null);else{S=new Map,bf.set(f,S);for(var W=f.querySelectorAll("link[data-precedence],style[data-precedence]"),ae=0;ae<W.length;ae++){var ye=W[ae];(ye.nodeName==="LINK"||ye.getAttribute("media")!=="not all")&&(S.set(ye.dataset.precedence,ye),P=ye)}P&&S.set(null,P)}W=_.instance,ye=W.getAttribute("data-precedence"),ae=S.get(ye)||P,ae===P&&S.set(null,W),S.set(ye,W),this.count++,P=vf.bind(this),W.addEventListener("load",P),W.addEventListener("error",P),ae?ae.parentNode.insertBefore(W,ae.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(W,f.firstChild)),_.state.loading|=4}}var dh={$$typeof:U,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function xp(f,_,S,P,W,ae,ye,Se){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fr(0),this.hiddenUpdates=fr(null),this.identifierPrefix=P,this.onUncaughtError=W,this.onCaughtError=ae,this.onRecoverableError=ye,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function Nm(f,_,S,P,W,ae,ye,Se,ke,We,It,kt){return f=new xp(f,_,S,ye,Se,ke,We,kt),_=1,ae===!0&&(_|=24),ae=Jr(3,null,null,_),f.current=ae,ae.stateNode=f,_=Ul(),_.refCount++,f.pooledCache=_,_.refCount++,ae.memoizedState={element:P,isDehydrated:S,cache:_},Uc(ae),f}function jm(f){return f?(f=il,f):il}function Dm(f,_,S,P,W,ae){W=jm(W),P.context===null?P.context=W:P.pendingContext=W,P=va(_),P.payload={element:S},ae=ae===void 0?null:ae,ae!==null&&(P.callback=ae),S=Br(f,P,_),S!==null&&(ar(S,f,_),pl(S,f,_))}function Om(f,_){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var S=f.retryLane;f.retryLane=S!==0&&S<_?S:_}}function sm(f,_){Om(f,_),(f=f.alternate)&&Om(f,_)}function Mm(f){if(f.tag===13){var _=fa(f,67108864);_!==null&&ar(_,f,67108864),sm(f,67108864)}}var Ef=!0;function _p(f,_,S,P){var W=we.T;we.T=null;var ae=de.p;try{de.p=2,rm(f,_,S,P)}finally{de.p=ae,we.T=W}}function vp(f,_,S,P){var W=we.T;we.T=null;var ae=de.p;try{de.p=8,rm(f,_,S,P)}finally{de.p=ae,we.T=W}}function rm(f,_,S,P){if(Ef){var W=im(P);if(W===null)Gf(f,_,P,Rf,S),km(f,P);else if(Ep(W,f,_,S,P))P.stopPropagation();else if(km(f,P),_&4&&-1<bp.indexOf(f)){for(;W!==null;){var ae=Yr(W);if(ae!==null)switch(ae.tag){case 3:if(ae=ae.stateNode,ae.current.memoizedState.isDehydrated){var ye=Pn(ae.pendingLanes);if(ye!==0){var Se=ae;for(Se.pendingLanes|=2,Se.entangledLanes|=2;ye;){var ke=1<<31-un(ye);Se.entanglements[1]|=ke,ye&=~ke}gn(ae),(In&6)===0&&(El=pt()+500,_s(0))}}break;case 13:Se=fa(ae,2),Se!==null&&ar(Se,ae,2),zo(),sm(ae,2)}if(ae=im(P),ae===null&&Gf(f,_,P,Rf,S),ae===W)break;W=ae}W!==null&&P.stopPropagation()}else Gf(f,_,P,null,S)}}function im(f){return f=_r(f),am(f)}var Rf=null;function am(f){if(Rf=null,f=li(f),f!==null){var _=u(f);if(_===null)f=null;else{var S=_.tag;if(S===13){if(f=d(_),f!==null)return f;f=null}else if(S===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;f=null}else _!==f&&(f=null)}}return Rf=f,null}function Vm(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ze()){case mn:return 2;case Ut:return 8;case Lt:case Dt:return 32;case Gt:return 268435456;default:return 32}default:return 32}}var om=!1,dc=null,hc=null,fc=null,hh=new Map,fh=new Map,mc=[],bp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function km(f,_){switch(f){case"focusin":case"focusout":dc=null;break;case"dragenter":case"dragleave":hc=null;break;case"mouseover":case"mouseout":fc=null;break;case"pointerover":case"pointerout":hh.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(_.pointerId)}}function mh(f,_,S,P,W,ae){return f===null||f.nativeEvent!==ae?(f={blockedOn:_,domEventName:S,eventSystemFlags:P,nativeEvent:ae,targetContainers:[W]},_!==null&&(_=Yr(_),_!==null&&Mm(_)),f):(f.eventSystemFlags|=P,_=f.targetContainers,W!==null&&_.indexOf(W)===-1&&_.push(W),f)}function Ep(f,_,S,P,W){switch(_){case"focusin":return dc=mh(dc,f,_,S,P,W),!0;case"dragenter":return hc=mh(hc,f,_,S,P,W),!0;case"mouseover":return fc=mh(fc,f,_,S,P,W),!0;case"pointerover":var ae=W.pointerId;return hh.set(ae,mh(hh.get(ae)||null,f,_,S,P,W)),!0;case"gotpointercapture":return ae=W.pointerId,fh.set(ae,mh(fh.get(ae)||null,f,_,S,P,W)),!0}return!1}function Lm(f){var _=li(f.target);if(_!==null){var S=u(_);if(S!==null){if(_=S.tag,_===13){if(_=d(S),_!==null){f.blockedOn=_,Ks(f.priority,function(){if(S.tag===13){var P=Qs();P=cs(P);var W=fa(S,P);W!==null&&ar(W,S,P),sm(S,P)}});return}}else if(_===3&&S.stateNode.current.memoizedState.isDehydrated){f.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}f.blockedOn=null}function wf(f){if(f.blockedOn!==null)return!1;for(var _=f.targetContainers;0<_.length;){var S=im(f.nativeEvent);if(S===null){S=f.nativeEvent;var P=new S.constructor(S.type,S);na=P,S.target.dispatchEvent(P),na=null}else return _=Yr(S),_!==null&&Mm(_),f.blockedOn=S,!1;_.shift()}return!0}function Bm(f,_,S){wf(f)&&S.delete(_)}function Rp(){om=!1,dc!==null&&wf(dc)&&(dc=null),hc!==null&&wf(hc)&&(hc=null),fc!==null&&wf(fc)&&(fc=null),hh.forEach(Bm),fh.forEach(Bm)}function Sf(f,_){f.blockedOn===_&&(f.blockedOn=null,om||(om=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Rp)))}var Tf=null;function Fm(f){Tf!==f&&(Tf=f,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Tf===f&&(Tf=null);for(var _=0;_<f.length;_+=3){var S=f[_],P=f[_+1],W=f[_+2];if(typeof P!="function"){if(am(P||S)===null)continue;break}var ae=Yr(S);ae!==null&&(f.splice(_,3),_-=3,Hd(ae,{pending:!0,data:W,method:S.method,action:P},P,W))}}))}function ph(f){function _(ke){return Sf(ke,f)}dc!==null&&Sf(dc,f),hc!==null&&Sf(hc,f),fc!==null&&Sf(fc,f),hh.forEach(_),fh.forEach(_);for(var S=0;S<mc.length;S++){var P=mc[S];P.blockedOn===f&&(P.blockedOn=null)}for(;0<mc.length&&(S=mc[0],S.blockedOn===null);)Lm(S),S.blockedOn===null&&mc.shift();if(S=(f.ownerDocument||f).$$reactFormReplay,S!=null)for(P=0;P<S.length;P+=3){var W=S[P],ae=S[P+1],ye=W[es]||null;if(typeof ae=="function")ye||Fm(S);else if(ye){var Se=null;if(ae&&ae.hasAttribute("formAction")){if(W=ae,ye=ae[es]||null)Se=ye.formAction;else if(am(W)!==null)continue}else Se=ye.action;typeof Se=="function"?S[P+1]=Se:(S.splice(P,3),P-=3),Fm(S)}}}function lm(f){this._internalRoot=f}Af.prototype.render=lm.prototype.render=function(f){var _=this._internalRoot;if(_===null)throw Error(s(409));var S=_.current,P=Qs();Dm(S,P,f,_,null,null)},Af.prototype.unmount=lm.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var _=f.containerInfo;Dm(f.current,2,null,f,null,null),zo(),_[Rs]=null}};function Af(f){this._internalRoot=f}Af.prototype.unstable_scheduleHydration=function(f){if(f){var _=Ls();f={blockedOn:null,target:f,priority:_};for(var S=0;S<mc.length&&_!==0&&_<mc[S].priority;S++);mc.splice(S,0,f),S===0&&Lm(f)}};var zm=e.version;if(zm!=="19.1.0")throw Error(s(527,zm,"19.1.0"));de.findDOMNode=function(f){var _=f._reactInternals;if(_===void 0)throw typeof f.render=="function"?Error(s(188)):(f=Object.keys(f).join(","),Error(s(268,f)));return f=y(_),f=f!==null?v(f):null,f=f===null?null:f.stateNode,f};var wp={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:we,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cf.isDisabled&&Cf.supportsFiber)try{Ct=Cf.inject(wp),tt=Cf}catch{}}return reactDomClient_production.createRoot=function(f,_){if(!o(f))throw Error(s(299));var S=!1,P="",W=xl,ae=ii,ye=sf,Se=null;return _!=null&&(_.unstable_strictMode===!0&&(S=!0),_.identifierPrefix!==void 0&&(P=_.identifierPrefix),_.onUncaughtError!==void 0&&(W=_.onUncaughtError),_.onCaughtError!==void 0&&(ae=_.onCaughtError),_.onRecoverableError!==void 0&&(ye=_.onRecoverableError),_.unstable_transitionCallbacks!==void 0&&(Se=_.unstable_transitionCallbacks)),_=Nm(f,1,!1,null,null,S,P,W,ae,ye,Se,null),f[Rs]=_.current,Hf(f),new lm(_)},reactDomClient_production.hydrateRoot=function(f,_,S){if(!o(f))throw Error(s(299));var P=!1,W="",ae=xl,ye=ii,Se=sf,ke=null,We=null;return S!=null&&(S.unstable_strictMode===!0&&(P=!0),S.identifierPrefix!==void 0&&(W=S.identifierPrefix),S.onUncaughtError!==void 0&&(ae=S.onUncaughtError),S.onCaughtError!==void 0&&(ye=S.onCaughtError),S.onRecoverableError!==void 0&&(Se=S.onRecoverableError),S.unstable_transitionCallbacks!==void 0&&(ke=S.unstable_transitionCallbacks),S.formState!==void 0&&(We=S.formState)),_=Nm(f,1,!0,_,S??null,P,W,ae,ye,Se,ke,We),_.context=jm(null),S=_.current,P=Qs(),P=cs(P),W=va(P),W.callback=null,Br(S,W,P),S=P,_.current.lanes=S,On(_,S),gn(_),f[Rs]=_.current,Hf(f),new Af(_)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let o=t.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},byteArrayToString=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const o=t[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=t[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=t[n++],d=t[n++],g=t[n++],y=((o&7)<<18|(u&63)<<12|(d&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const u=t[n++],d=t[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<t.length;o+=3){const u=t[o],d=o+1<t.length,g=d?t[o+1]:0,y=o+2<t.length,v=y?t[o+2]:0,w=u>>2,T=(u&3)<<4|g>>4;let A=(g&15)<<2|v>>6,C=v&63;y||(C=64,d||(A=64)),s.push(n[w],n[T],n[A],n[C])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(stringToByteArray$1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):byteArrayToString(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<t.length;){const u=n[t.charAt(o++)],g=o<t.length?n[t.charAt(o)]:0;++o;const v=o<t.length?n[t.charAt(o)]:64;++o;const T=o<t.length?n[t.charAt(o)]:64;if(++o,u==null||g==null||v==null||T==null)throw new DecodeBase64StringError;const A=u<<2|g>>4;if(s.push(A),v!==64){const C=g<<4&240|v>>2;if(s.push(C),T!==64){const j=v<<6&192|T;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(t){const e=stringToByteArray$1(t);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(t){return base64Encode(t).replace(/\./g,"")},base64Decode=function(t){try{return base64.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const t=define_process_env_default.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&base64Decode(t[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},getDefaultEmulatorHost=t=>{var e,n;return(n=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},getDefaultEmulatorHostnameAndPort=t=>{const e=getDefaultEmulatorHost(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},getDefaultAppConfig=()=>{var t;return(t=getDefaults())===null||t===void 0?void 0:t.config},getExperimentalSetting=t=>{var e;return(e=getDefaults())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(t){return t.endsWith(".cloudworkstations.dev")}async function pingServer(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=t.iat||0,u=t.sub||t.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},t);return[base64urlEncodeWithoutPadding(JSON.stringify(n)),base64urlEncodeWithoutPadding(JSON.stringify(d)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const t={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?t.emulator.push(e):t.prod.push(e);return t}function getOrCreateEl(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(t,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[t]===e||emulatorStatus[t]||previouslyDismissed)return;emulatorStatus[t]=e;function n(A){return`__firebase__banner__${A}`}const s="__firebase__banner",u=getEmulatorSummary().prod.length>0;function d(){const A=document.getElementById(s);A&&A.remove()}function g(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function y(A,C){A.setAttribute("width","24"),A.setAttribute("id",C),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function v(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{previouslyDismissed=!0,d()},A}function w(A,C){A.setAttribute("id",C),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=getOrCreateEl(s),C=n("text"),j=document.getElementById(C)||document.createElement("span"),D=n("learnmore"),H=document.getElementById(D)||document.createElement("a"),ne=n("preprendIcon"),Y=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const U=A.element;g(U),w(H,D);const ee=v();y(Y,ne),U.append(Y,j,H,ee),document.body.appendChild(U)}u?(j.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode$2(){var t;const e=(t=getDefaults())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const t=getUA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function isSafari$1(){return!isNode$2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?replaceTemplate(u,s):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new FirebaseError(o,g,s)}}function replaceTemplate(t,e){return t.replace(PATTERN,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function deepEqual$1(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=t[o],d=e[o];if(isObject$2(u)&&isObject$2(d)){if(!deepEqual$1(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function isObject$2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function querystringDecode(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function extractQuerystring(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function createSubscribe(t,e){const n=new ObserverProxy(t,e);return n.subscribe.bind(n)}class ObserverProxy{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=noop$3),o.error===void 0&&(o.error=noop$3),o.complete===void 0&&(o.complete=noop$3);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function noop$3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(t){return t&&t._delegate?t._delegate:t}class Component{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Deferred;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(t){return t===DEFAULT_ENTRY_NAME$1?void 0:t}function isComponentEager(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Provider(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),o=ConsoleMethod[e];if(o)console[o](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(t,e)=>e.some(n=>t instanceof n);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(t){const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("success",u),t.removeEventListener("error",d)},u=()=>{n(wrap(t.result)),o()},d=()=>{s(t.error),o()};t.addEventListener("success",u),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&cursorRequestMap.set(n,t)}).catch(()=>{}),reverseTransformCache.set(e,t),e}function cacheDonePromiseForTransaction(t){if(transactionDoneMap.has(t))return;const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("complete",u),t.removeEventListener("error",d),t.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",u),t.addEventListener("error",d),t.addEventListener("abort",d)});transactionDoneMap.set(t,e)}let idbProxyTraps={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||transactionStoreNamesMap.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wrap(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps(t){idbProxyTraps=t(idbProxyTraps)}function wrapFunction(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(unwrap(this),e,...n);return transactionStoreNamesMap.set(s,e.sort?e.sort():[e]),wrap(s)}:getCursorAdvanceMethods().includes(t)?function(...e){return t.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(t.apply(unwrap(this),e))}}function transformCachableValue(t){return typeof t=="function"?wrapFunction(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction(t),instanceOfAny(t,getIdbProxyableTypes())?new Proxy(t,idbProxyTraps):t)}function wrap(t){if(t instanceof IDBRequest)return promisifyRequest(t);if(transformCache.has(t))return transformCache.get(t);const e=transformCachableValue(t);return e!==t&&(transformCache.set(t,e),reverseTransformCache.set(e,t)),e}const unwrap=t=>reverseTransformCache.get(t);function openDB(t,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(t,e),g=wrap(d);return s&&d.addEventListener("upgradeneeded",y=>{s(wrap(d.result),y.oldVersion,y.newVersion,wrap(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),g.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=writeMethods.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||readMethods.includes(n)))return;const u=async function(d,...g){const y=this.transaction(d,o?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(g.shift())),(await Promise.all([v[n](...g),o&&y.done]))[0]};return cachedMethods.set(e,u),u}replaceTraps(t=>({...t,get:(e,n,s)=>getMethod(e,n)||t.get(e,n,s),has:(e,n)=>!!getMethod(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(isVersionServiceProvider(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function isVersionServiceProvider(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const name$q="@firebase/app",version$1$1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$4="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(t,e){try{t.container.addComponent(e)}catch(n){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _registerComponent(t){const e=t.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,t);for(const n of _apps.values())_addComponent(n,t);for(const n of _serverApps.values())_addComponent(n,t);return!0}function _getProvider(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _isFirebaseServerApp(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$4;function initializeApp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw ERROR_FACTORY.create("bad-app-name",{appName:String(o)});if(n||(n=getDefaultAppConfig()),!n)throw ERROR_FACTORY.create("no-options");const u=_apps.get(o);if(u){if(deepEqual$1(n,u.options)&&deepEqual$1(s,u.config))return u;throw ERROR_FACTORY.create("duplicate-app",{appName:o})}const d=new ComponentContainer(o);for(const y of _components.values())d.addComponent(y);const g=new FirebaseAppImpl(n,s,d);return _apps.set(o,g),g}function getApp(t=DEFAULT_ENTRY_NAME){const e=_apps.get(t);if(!e&&t===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:t});return e}function registerVersion(t,e,n){var s;let o=(s=PLATFORM_LOG_STRING[t])!==null&&s!==void 0?s:t;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const g=[`Unable to register library "${o}" with version "${e}":`];u&&g.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(g.join(" "));return}_registerComponent(new Component(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(STORE_NAME)}catch(n){console.warn(n)}}}}).catch(t=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:t.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(t){try{const n=(await getDbPromise()).transaction(STORE_NAME),s=await n.objectStore(STORE_NAME).get(computeKey(t));return await n.done,s}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const n=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});logger.warn(n.message)}}}async function writeHeartbeatsToIndexedDB(t,e){try{const s=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await s.objectStore(STORE_NAME).put(e,computeKey(t)),await s.done}catch(n){if(n instanceof FirebaseError)logger.warn(n.message);else{const s=ERROR_FACTORY.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});logger.warn(s.message)}}}function computeKey(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=getUTCDateString();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const d=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){logger.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=getUTCDateString(),{heartbeatsToSend:s,unsentEntries:o}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),u=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return logger.warn(n),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(t,e=MAX_HEADER_BYTES){const n=[];let s=t.slice();for(const o of t){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),countBytes(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),countBytes(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await readHeartbeatsFromIndexedDB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function countBytes(t){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}function getEarliestHeartbeatIdx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(t){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,t),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var __assign=function(){return __assign=Object.assign||function(e){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])}return e},__assign.apply(this,arguments)};function __rest(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n}function __spreadArray(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,u;s<o;s++)(u||!(s in e))&&(u||(u=Array.prototype.slice.call(e,0,s)),u[s]=e[s]);return t.concat(u||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(t,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${t}`,...e)}function _logError(t,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(t,...e){throw createErrorInternal(t,...e)}function _createError(t,...e){return createErrorInternal(t,...e)}function _errorWithCustomMessage(t,e,n){const s=Object.assign(Object.assign({},prodErrorMap()),{[e]:n});return new ErrorFactory("auth","Firebase",s).create(e,{appName:t.name})}function _serverAppCurrentUserOperationNotSupportedError(t){return _errorWithCustomMessage(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return _DEFAULT_AUTH_ERROR_FACTORY.create(t,...e)}function _assert(t,e,...n){if(!t)throw createErrorInternal(e,...n)}function debugFail(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _logError(e),new Error(e)}function debugAssert(t,e){t||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,n){this.shortDelay=e,this.longDelay=n,debugAssert(n>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(t,e){debugAssert(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _performApiRequest(t,e,n,s,o={}){return _performFetchWithErrorHandling(t,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const g=querystring(Object.assign({key:t.config.apiKey},d)).slice(1),y=await t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);const v=Object.assign({method:e,headers:y},u);return isCloudflareWorker()||(v.referrerPolicy="no-referrer"),t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(v.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(t,t.config.apiHost,n,g),v)})}async function _performFetchWithErrorHandling(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},SERVER_ERROR_MAP),e);try{const o=new NetworkTimeout(t),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw _makeTaggedError(t,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const g=u.ok?d.errorMessage:d.error.message,[y,v]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(t,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw _makeTaggedError(t,"email-already-in-use",d);if(y==="USER_DISABLED")throw _makeTaggedError(t,"user-disabled",d);const w=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw _errorWithCustomMessage(t,w,v);_fail(t,w)}}catch(o){if(o instanceof FirebaseError)throw o;_fail(t,"network-request-failed",{message:String(o)})}}async function _performSignInRequest(t,e,n,s,o={}){const u=await _performApiRequest(t,e,n,s,o);return"mfaPendingCredential"in u&&_fail(t,"multi-factor-auth-required",{_serverResponse:u}),u}async function _getFinalTarget(t,e,n,s){const o=`${e}${n}?${s}`,u=t,d=u.config.emulator?_emulatorUrl(t.config,o):`${t.config.apiScheme}://${o}`;return CookieAuthProxiedEndpoints.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function _parseEnforcementState(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=_createError(t,e,s);return o.customData._tokenResponse=n,o}function isEnterprise(t){return t!==void 0&&t.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _parseEnforcementState(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(t,e){return _performApiRequest(t,"GET","/v2/recaptchaConfig",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(t,e){return _performApiRequest(t,"POST","/v1/accounts:delete",e)}async function getAccountInfo(t,e){return _performApiRequest(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(t,e=!1){const n=getModularInstance(t),s=await n.getIdToken(e),o=_parseToken(s);_assert(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:utcTimestampToDateString(secondsStringToMilliseconds(o.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(o.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function secondsStringToMilliseconds(t){return Number(t)*1e3}function _parseToken(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const o=base64Decode(n);return o?JSON.parse(o):(_logError("Failed to decode base64 JWT payload"),null)}catch(o){return _logError("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function _tokenExpiresIn(t){const e=_parseToken(t);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof FirebaseError&&isUserInvalidated(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function isUserInvalidated({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(t){var e;const n=t.auth,s=await t.getIdToken(),o=await _logoutIfInvalidated(t,getAccountInfo(n,{idToken:s}));_assert(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];t._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?extractProviderData(u.providerUserInfo):[],g=mergeProviderData(t.providerData,d),y=t.isAnonymous,v=!(t.email&&u.passwordHash)&&!(g!=null&&g.length),w=y?v:!1,T={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:g,metadata:new UserMetadata(u.createdAt,u.lastLoginAt),isAnonymous:w};Object.assign(t,T)}async function reload(t){const e=getModularInstance(t);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(t,e){return[...t.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function extractProviderData(t){return t.map(e=>{var{providerId:n}=e,s=__rest(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(t,e){const n=await _performFetchWithErrorHandling(t,{},async()=>{const s=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=t.config,d=await _getFinalTarget(t,o,"/v1/token",`key=${u}`),g=await t._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:s};return t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(y.credentials="include"),FetchProvider.fetch()(d,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function revokeToken(t,e){return _performApiRequest(t,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const n=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await requestStsToken(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new StsTokenManager;return s&&(_assert(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(_assert(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(_assert(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(t,e){_assert(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class UserImpl{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new UserMetadata(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,d,g,y,v,w;const T=(s=n.displayName)!==null&&s!==void 0?s:void 0,A=(o=n.email)!==null&&o!==void 0?o:void 0,C=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,j=(d=n.photoURL)!==null&&d!==void 0?d:void 0,D=(g=n.tenantId)!==null&&g!==void 0?g:void 0,H=(y=n._redirectEventId)!==null&&y!==void 0?y:void 0,ne=(v=n.createdAt)!==null&&v!==void 0?v:void 0,Y=(w=n.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:U,emailVerified:ee,isAnonymous:J,providerData:ie,stsTokenManager:se}=n;_assert(U&&se,e,"internal-error");const K=StsTokenManager.fromJSON(this.name,se);_assert(typeof U=="string",e,"internal-error"),assertStringOrUndefined(T,e.name),assertStringOrUndefined(A,e.name),_assert(typeof ee=="boolean",e,"internal-error"),_assert(typeof J=="boolean",e,"internal-error"),assertStringOrUndefined(C,e.name),assertStringOrUndefined(j,e.name),assertStringOrUndefined(D,e.name),assertStringOrUndefined(H,e.name),assertStringOrUndefined(ne,e.name),assertStringOrUndefined(Y,e.name);const te=new UserImpl({uid:U,auth:e,email:A,emailVerified:ee,displayName:T,isAnonymous:J,photoURL:j,phoneNumber:C,tenantId:D,stsTokenManager:K,createdAt:ne,lastLoginAt:Y});return ie&&Array.isArray(ie)&&(te.providerData=ie.map(re=>Object.assign({},re))),H&&(te._redirectEventId=H),te}static async _fromIdTokenResponse(e,n,s=!1){const o=new StsTokenManager;o.updateFromServerResponse(n);const u=new UserImpl({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await _reloadWithoutSaving(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];_assert(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?extractProviderData(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new StsTokenManager;g.updateFromIdToken(s);const y=new UserImpl({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new UserMetadata(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(t){debugAssert(t instanceof Function,"Expected a class definition");let e=instanceCache.get(t);return e?(debugAssert(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,instanceCache.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(t,e,n){return`firebase:${t}:${e}:${n}`}class PersistenceUserManager{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,o.apiKey,u),this.fullPersistenceKey=_persistenceKeyName("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return n?UserImpl._fromGetAccountInfoResponse(this.auth,n,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,s);const o=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=o[0]||_getInstance(inMemoryPersistence);const d=_persistenceKeyName(s,e.config.apiKey,e.name);let g=null;for(const v of n)try{const w=await v._get(d);if(w){let T;if(typeof w=="string"){const A=await getAccountInfo(e,{idToken:w}).catch(()=>{});if(!A)break;T=await UserImpl._fromGetAccountInfoResponse(e,A,w)}else T=UserImpl._fromJSON(e,w);v!==u&&(g=T),u=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new PersistenceUserManager(u,e,s):(u=y[0],g&&await u._set(d,g.toJSON()),await Promise.all(n.map(async v=>{if(v!==u)try{await v._remove(d)}catch{}})),new PersistenceUserManager(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function _isFirefox(t=getUA()){return/firefox\//i.test(t)}function _isSafari(t=getUA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(t=getUA()){return/crios\//i.test(t)}function _isIEMobile(t=getUA()){return/iemobile/i.test(t)}function _isAndroid(t=getUA()){return/android/i.test(t)}function _isBlackBerry(t=getUA()){return/blackberry/i.test(t)}function _isWebOS(t=getUA()){return/webos/i.test(t)}function _isIOS(t=getUA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _isIOSStandalone(t=getUA()){var e;return _isIOS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(t=getUA()){return _isIOS(t)||_isAndroid(t)||_isWebOS(t)||_isBlackBerry(t)||/windows phone/i.test(t)||_isIEMobile(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(t,e=[]){let n;switch(t){case"Browser":n=_getBrowserName(getUA());break;case"Worker":n=`${_getBrowserName(getUA())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${SDK_VERSION}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,g)=>{try{const y=e(u);d(y)}catch(y){g(y)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(t,e={}){return _performApiRequest(t,"GET","/v2/passwordPolicy",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){var n,s,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:MINIMUM_MIN_PASSWORD_LENGTH,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,d,g;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(n=y.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),y.isValid&&(y.isValid=(s=y.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),y.isValid&&(y.isValid=(o=y.containsLowercaseLetter)!==null&&o!==void 0?o:!0),y.isValid&&(y.isValid=(u=y.containsUppercaseLetter)!==null&&u!==void 0?u:!0),y.isValid&&(y.isValid=(d=y.containsNumericCharacter)!==null&&d!==void 0?d:!0),y.isValid&&(y.isValid=(g=y.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),y}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_getInstance(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await getAccountInfo(this,{idToken:e}),s=await UserImpl._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_isFirebaseServerApp(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=o==null?void 0:o._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===g)&&(y!=null&&y.user)&&(o=y.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const n=e?getModularInstance(e):null;return n&&_assert(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),n=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await revokeToken(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_getInstance(e)||this._popupRedirectResolver;_assert(n,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(g,this,"internal-error"),g.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,s,o);return()=>{d=!0,y()}}else{const y=e.addObserver(n);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_logWarn(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _castAuth(t){return getModularInstance(t)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(n=>this.observer=n)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(t){externalJSProvider=t}function _loadJS(t){return externalJSProvider.loadJS(t)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MockGreCAPTCHA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,g)=>{getRecaptchaConfig(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const v=new RecaptchaConfig(y);return u.tenantId==null?u._agentRecaptchaConfig=v:u._tenantRecaptchaConfigs[u.tenantId]=v,d(v.siteKey)}}).catch(y=>{g(y)})})}function o(u,d,g){const y=window.grecaptcha;isEnterprise(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(v=>{d(v)}).catch(()=>{d(FAKE_TOKEN)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(g=>{if(!n&&isEnterprise(window.grecaptcha))o(g,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=_recaptchaEnterpriseScriptUrl();y.length!==0&&(y+=g),_loadJS(y).then(()=>{o(g,u,d)}).catch(v=>{d(v)})}}).catch(g=>{d(g)})})}}async function injectRecaptchaFields(t,e,n,s=!1,o=!1){const u=new RecaptchaEnterpriseVerifier(t);let d;if(o)d=FAKE_TOKEN;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const g=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,v=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function handleRecaptchaFlow(t,e,n,s,o){var u;if(!((u=t._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await injectRecaptchaFields(t,e,n,n==="getOobCode");return s(t,d)}else return s(t,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await injectRecaptchaFields(t,e,n,n==="getOobCode");return s(t,g)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(t,e){const n=_getProvider(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(deepEqual$1(u,e??{}))return o;_fail(o,"already-initialized")}return n.initialize({options:e})}function _initializeAuthInstance(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(_getInstance);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function connectAuthEmulator(t,e,n){const s=_castAuth(t);_assert(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=extractProtocol(e),{host:d,port:g}=extractHostAndPort(e),y=g===null?"":`:${g}`,v={url:`${u}//${d}${y}/`},w=Object.freeze({host:d,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){_assert(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_assert(deepEqual$1(v,s.config.emulator)&&deepEqual$1(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(d)?(pingServer(`${u}//${d}${y}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function extractHostAndPort(t){const e=extractProtocol(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:parsePort(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:parsePort(d)}}}function parsePort(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function emitEmulatorWarning(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,n){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function linkEmailPassword(t,e){return _performApiRequest(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}async function signInWithEmailLinkForLinking(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new EmailAuthCredential(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new EmailAuthCredential(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,n,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,s,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:n,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_fail("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=__rest(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new OAuthCredential(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return signInWithIdp(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,signInWithIdp(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,signInWithIdp(e,n)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=querystring(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(t){const e=querystringDecode(extractQuerystring(t)).link,n=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,s=querystringDecode(extractQuerystring(t)).deep_link_id;return(s?querystringDecode(extractQuerystring(s)).link:null)||s||n||e||t}class ActionCodeURL{constructor(e){var n,s,o,u,d,g;const y=querystringDecode(extractQuerystring(e)),v=(n=y.apiKey)!==null&&n!==void 0?n:null,w=(s=y.oobCode)!==null&&s!==void 0?s:null,T=parseMode((o=y.mode)!==null&&o!==void 0?o:null);_assert(v&&w&&T,"argument-error"),this.apiKey=v,this.operation=T,this.code=w,this.continueUrl=(u=y.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(d=y.lang)!==null&&d!==void 0?d:null,this.tenantId=(g=y.tenantId)!==null&&g!==void 0?g:null}static parseLink(e){const n=parseDeepLink(e);try{return new ActionCodeURL(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,n){return EmailAuthCredential._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=ActionCodeURL.parseLink(n);return _assert(s,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,s.code,s.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return GoogleAuthProvider.credential(n,s)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,n){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return TwitterAuthProvider.credential(n,s)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signUp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await UserImpl._fromIdTokenResponse(e,s,o),d=providerIdForResponse(s);return new UserCredentialImpl({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=providerIdForResponse(s);return new UserCredentialImpl({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function providerIdForResponse(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new MultiFactorError(e,n,s,o)}}function _processCredentialSavingMfaContextIfNecessary(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(t,u,e,s):u})}async function _link$1(t,e,n=!1){const s=await _logoutIfInvalidated(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return UserCredentialImpl._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(t,e,n=!1){const{auth:s}=t;if(_isFirebaseServerApp(s.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(s));const o="reauthenticate";try{const u=await _logoutIfInvalidated(t,_processCredentialSavingMfaContextIfNecessary(s,o,e,t),n);_assert(u.idToken,s,"internal-error");const d=_parseToken(u.idToken);_assert(d,s,"internal-error");const{sub:g}=d;return _assert(t.uid===g,s,"user-mismatch"),UserCredentialImpl._forOperation(t,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&_fail(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(t,e,n=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const s="signIn",o=await _processCredentialSavingMfaContextIfNecessary(t,s,e),u=await UserCredentialImpl._fromIdTokenResponse(t,s,o);return n||await t._updateCurrentUser(u.user),u}async function signInWithCredential(t,e){return _signInWithCredential(_castAuth(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(t){const e=_castAuth(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function createUserWithEmailAndPassword(t,e,n){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const s=_castAuth(t),d=await handleRecaptchaFlow(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),y}),g=await UserCredentialImpl._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(g.user),g}function signInWithEmailAndPassword(t,e,n){return _isFirebaseServerApp(t.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t)):signInWithCredential(getModularInstance(t),EmailAuthProvider.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile$1(t,e){return _performApiRequest(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=getModularInstance(t),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await _logoutIfInvalidated(s,updateProfile$1(s.auth,u));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const g=s.providerData.find(({providerId:y})=>y==="password");g&&(g.displayName=s.displayName,g.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function onIdTokenChanged(t,e,n,s){return getModularInstance(t).onIdTokenChanged(e,n,s)}function beforeAuthStateChanged(t,e,n){return getModularInstance(t).beforeAuthStateChanged(e,n)}function onAuthStateChanged(t,e,n,s){return getModularInstance(t).onAuthStateChanged(e,n,s)}function signOut(t){return getModularInstance(t).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,y)=>{this.notifyListeners(d,y)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);_isIE10()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,IE10_LOCAL_STORAGE_SYNC_DELAY):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Receiver(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(d).map(async v=>v(n.origin,u)),y=await _allSettled(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((g,y)=>{const v=_generateEventId("",20);o.port1.start();const w=setTimeout(()=>{y(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===v)switch(A.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(A.data.response);break;default:clearTimeout(w),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(t){_window().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function getObjectStore(t,e){return t.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const t=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(t).toPromise()}function _openDatabase(){const t=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(s):(s.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(t,e,n){const s=getObjectStore(t,!0).put({[DB_DATA_KEYPATH]:e,value:n});return new DBPromise(s).toPromise()}async function getObject(t,e){const n=getObjectStore(t,!1).get(e),s=await new DBPromise(n).toPromise();return s===void 0?null:s.value}function _deleteObject(t,e){const n=getObjectStore(t,!0).delete(e);return new DBPromise(n).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>_TRANSACTION_RETRY_COUNT)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>_putObject(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>getObject(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_deleteObject(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=getObjectStore(o,!1).getAll();return new DBPromise(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(t,e){return e?_getInstance(e):(_assert(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return signInWithIdp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _signIn(t){return _signInWithCredential(t.auth,new IdpCredential(t),t.bypassAuthState)}function _reauth(t){const{auth:e,user:n}=t;return _assert(n,e,"internal-error"),_reauthenticate(n,new IdpCredential(t),t.bypassAuthState)}async function _link(t){const{auth:e,user:n}=t;return _assert(n,e,"internal-error"),_link$1(n,new IdpCredential(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:g}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const s=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(t,e){const n=pendingRedirectKey(e),s=resolverPersistence(t);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function _overrideRedirectResult(t,e){redirectOutcomeMap.set(t._key(),e)}function resolverPersistence(t){return _getInstance(t._redirectPersistence)}function pendingRedirectKey(t){return _persistenceKeyName(PENDING_REDIRECT_KEY,t.config.apiKey,t.name)}async function _getRedirectResult(t,e,n=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const s=_castAuth(t),o=_withDefaultResolver(s,e),d=await new RedirectAction(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!isNullRedirectEvent(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(_createError(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function isRedirectEvent(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(t,e={}){return _performApiRequest(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(t);for(const n of e)try{if(matchDomain(n))return}catch{}_fail(t,"unauthorized-domain")}function matchDomain(t){const e=_getCurrentUrl(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const d=new URL(t);return d.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!HTTP_REGEX.test(n))return!1;if(IP_ADDRESS_REGEX.test(t))return s===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const t=_window().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function loadGapi(t){return new Promise((e,n)=>{var s,o,u;function d(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),n(_createError(t,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((o=(s=_window().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=_window().gapi)===null||u===void 0)&&u.load)d();else{const g=_generateCallbackName("iframefcb");return _window()[g]=()=>{gapi.load?d():n(_createError(t,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${g}`).catch(y=>n(y))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(t){return cachedGApiLoader=cachedGApiLoader||loadGapi(t),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(t){const e=t.config;_assert(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${t.config.authDomain}/${IFRAME_PATH}`,s={apiKey:e.apiKey,appName:t.name,v:SDK_VERSION},o=EID_FROM_APIHOST.get(t.config.apiHost);o&&(s.eid=o);const u=t._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${querystring(s).slice(1)}`}async function _openIframe(t){const e=await _loadGapi(t),n=_window().gapi;return _assert(n,t,"internal-error"),e.open({where:document.body,url:getIframeUrl(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=_createError(t,"network-request-failed"),g=_window().setTimeout(()=>{u(d)},PING_TIMEOUT.get());function y(){_window().clearTimeout(g),o(s)}s.ping(y).then(y,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(t,e,n,s=DEFAULT_WIDTH,o=DEFAULT_HEIGHT){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const y=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:s.toString(),height:o.toString(),top:u,left:d}),v=getUA().toLowerCase();n&&(g=_isChromeIOS(v)?TARGET_BLANK:n),_isFirefox(v)&&(e=e||FIREFOX_EMPTY_URL,y.scrollbars="yes");const w=Object.entries(y).reduce((A,[C,j])=>`${A}${C}=${j},`,"");if(_isIOSStandalone(v)&&g!=="_self")return openAsNewWindowIOS(e||"",g),new AuthPopup(null);const T=window.open(e||"",g,w);_assert(T,t,"popup-blocked");try{T.focus()}catch{}return new AuthPopup(T)}function openAsNewWindowIOS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(t,e,n,s,o,u){_assert(t.config.authDomain,t,"auth-domain-config-required"),_assert(t.config.apiKey,t,"invalid-api-key");const d={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:SDK_VERSION,eventId:o};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(t.languageCode),d.providerId=e.providerId||"",isEmpty$1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))d[w]=T}if(e instanceof BaseOAuthProvider){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(d.scopes=w.join(","))}t.tenantId&&(d.tid=t.tenantId);const g=d;for(const w of Object.keys(g))g[w]===void 0&&delete g[w];const y=await t._getAppCheckToken(),v=y?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(y)}`:"";return`${getHandlerBase(t)}?${querystring(g).slice(1)}${v}`}function getHandlerBase({config:t}){return t.emulator?_emulatorUrl(t,EMULATOR_WIDGET_PATH):`https://${t.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,n,s,o){var u;debugAssert((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await _getRedirectUrl(e,n,s,_getCurrentUrl(),o);return _open(e,d,_generateEventId())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await _getRedirectUrl(e,n,s,_getCurrentUrl(),o);return _setWindowLocation(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(debugAssert(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await _openIframe(e),s=new AuthEventManager(e);return n.register("authEvent",o=>(_assert(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[WEB_STORAGE_SUPPORT_KEY];d!==void 0&&n(!!d),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_validateOrigin(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$1="@firebase/auth",version$3="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(t){_registerComponent(new Component("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;_assert(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:d,authDomain:g,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(t)},v=new AuthImpl(s,o,u,y);return _initializeAuthInstance(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const n=_castAuth(e.getProvider("auth").getImmediate());return(s=>new AuthInterop(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$1,version$3,getVersionForPlatform(t)),registerVersion(name$1,version$3,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>authIdTokenMaxAge)return;const o=n==null?void 0:n.token;lastPostedIdToken!==o&&(lastPostedIdToken=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function getAuth(t=getApp()){const e=_getProvider(t,"auth");if(e.isInitialized())return e.getImmediate();const n=initializeAuth(t,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),s=getExperimentalSetting("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=mintCookieFactory(u.toString());beforeAuthStateChanged(n,d,()=>d(n.currentUser)),onIdTokenChanged(n,g=>d(g))}}const o=getDefaultEmulatorHost("auth");return o&&connectAuthEmulator(n,`http://${o}`),n}function getScriptParentElement(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_setExternalJSProvider({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=o=>{const u=_createError("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",getScriptParentElement().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(se,K){function te(){}te.prototype=K.prototype,se.D=K.prototype,se.prototype=new te,se.prototype.constructor=se,se.C=function(re,ce,le){for(var ue=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)ue[_e-2]=arguments[_e];return K.prototype[ce].apply(re,ue)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(se,K,te){te||(te=0);var re=Array(16);if(typeof K=="string")for(var ce=0;16>ce;++ce)re[ce]=K.charCodeAt(te++)|K.charCodeAt(te++)<<8|K.charCodeAt(te++)<<16|K.charCodeAt(te++)<<24;else for(ce=0;16>ce;++ce)re[ce]=K[te++]|K[te++]<<8|K[te++]<<16|K[te++]<<24;K=se.g[0],te=se.g[1],ce=se.g[2];var le=se.g[3],ue=K+(le^te&(ce^le))+re[0]+3614090360&4294967295;K=te+(ue<<7&4294967295|ue>>>25),ue=le+(ce^K&(te^ce))+re[1]+3905402710&4294967295,le=K+(ue<<12&4294967295|ue>>>20),ue=ce+(te^le&(K^te))+re[2]+606105819&4294967295,ce=le+(ue<<17&4294967295|ue>>>15),ue=te+(K^ce&(le^K))+re[3]+3250441966&4294967295,te=ce+(ue<<22&4294967295|ue>>>10),ue=K+(le^te&(ce^le))+re[4]+4118548399&4294967295,K=te+(ue<<7&4294967295|ue>>>25),ue=le+(ce^K&(te^ce))+re[5]+1200080426&4294967295,le=K+(ue<<12&4294967295|ue>>>20),ue=ce+(te^le&(K^te))+re[6]+2821735955&4294967295,ce=le+(ue<<17&4294967295|ue>>>15),ue=te+(K^ce&(le^K))+re[7]+4249261313&4294967295,te=ce+(ue<<22&4294967295|ue>>>10),ue=K+(le^te&(ce^le))+re[8]+1770035416&4294967295,K=te+(ue<<7&4294967295|ue>>>25),ue=le+(ce^K&(te^ce))+re[9]+2336552879&4294967295,le=K+(ue<<12&4294967295|ue>>>20),ue=ce+(te^le&(K^te))+re[10]+4294925233&4294967295,ce=le+(ue<<17&4294967295|ue>>>15),ue=te+(K^ce&(le^K))+re[11]+2304563134&4294967295,te=ce+(ue<<22&4294967295|ue>>>10),ue=K+(le^te&(ce^le))+re[12]+1804603682&4294967295,K=te+(ue<<7&4294967295|ue>>>25),ue=le+(ce^K&(te^ce))+re[13]+4254626195&4294967295,le=K+(ue<<12&4294967295|ue>>>20),ue=ce+(te^le&(K^te))+re[14]+2792965006&4294967295,ce=le+(ue<<17&4294967295|ue>>>15),ue=te+(K^ce&(le^K))+re[15]+1236535329&4294967295,te=ce+(ue<<22&4294967295|ue>>>10),ue=K+(ce^le&(te^ce))+re[1]+4129170786&4294967295,K=te+(ue<<5&4294967295|ue>>>27),ue=le+(te^ce&(K^te))+re[6]+3225465664&4294967295,le=K+(ue<<9&4294967295|ue>>>23),ue=ce+(K^te&(le^K))+re[11]+643717713&4294967295,ce=le+(ue<<14&4294967295|ue>>>18),ue=te+(le^K&(ce^le))+re[0]+3921069994&4294967295,te=ce+(ue<<20&4294967295|ue>>>12),ue=K+(ce^le&(te^ce))+re[5]+3593408605&4294967295,K=te+(ue<<5&4294967295|ue>>>27),ue=le+(te^ce&(K^te))+re[10]+38016083&4294967295,le=K+(ue<<9&4294967295|ue>>>23),ue=ce+(K^te&(le^K))+re[15]+3634488961&4294967295,ce=le+(ue<<14&4294967295|ue>>>18),ue=te+(le^K&(ce^le))+re[4]+3889429448&4294967295,te=ce+(ue<<20&4294967295|ue>>>12),ue=K+(ce^le&(te^ce))+re[9]+568446438&4294967295,K=te+(ue<<5&4294967295|ue>>>27),ue=le+(te^ce&(K^te))+re[14]+3275163606&4294967295,le=K+(ue<<9&4294967295|ue>>>23),ue=ce+(K^te&(le^K))+re[3]+4107603335&4294967295,ce=le+(ue<<14&4294967295|ue>>>18),ue=te+(le^K&(ce^le))+re[8]+1163531501&4294967295,te=ce+(ue<<20&4294967295|ue>>>12),ue=K+(ce^le&(te^ce))+re[13]+2850285829&4294967295,K=te+(ue<<5&4294967295|ue>>>27),ue=le+(te^ce&(K^te))+re[2]+4243563512&4294967295,le=K+(ue<<9&4294967295|ue>>>23),ue=ce+(K^te&(le^K))+re[7]+1735328473&4294967295,ce=le+(ue<<14&4294967295|ue>>>18),ue=te+(le^K&(ce^le))+re[12]+2368359562&4294967295,te=ce+(ue<<20&4294967295|ue>>>12),ue=K+(te^ce^le)+re[5]+4294588738&4294967295,K=te+(ue<<4&4294967295|ue>>>28),ue=le+(K^te^ce)+re[8]+2272392833&4294967295,le=K+(ue<<11&4294967295|ue>>>21),ue=ce+(le^K^te)+re[11]+1839030562&4294967295,ce=le+(ue<<16&4294967295|ue>>>16),ue=te+(ce^le^K)+re[14]+4259657740&4294967295,te=ce+(ue<<23&4294967295|ue>>>9),ue=K+(te^ce^le)+re[1]+2763975236&4294967295,K=te+(ue<<4&4294967295|ue>>>28),ue=le+(K^te^ce)+re[4]+1272893353&4294967295,le=K+(ue<<11&4294967295|ue>>>21),ue=ce+(le^K^te)+re[7]+4139469664&4294967295,ce=le+(ue<<16&4294967295|ue>>>16),ue=te+(ce^le^K)+re[10]+3200236656&4294967295,te=ce+(ue<<23&4294967295|ue>>>9),ue=K+(te^ce^le)+re[13]+681279174&4294967295,K=te+(ue<<4&4294967295|ue>>>28),ue=le+(K^te^ce)+re[0]+3936430074&4294967295,le=K+(ue<<11&4294967295|ue>>>21),ue=ce+(le^K^te)+re[3]+3572445317&4294967295,ce=le+(ue<<16&4294967295|ue>>>16),ue=te+(ce^le^K)+re[6]+76029189&4294967295,te=ce+(ue<<23&4294967295|ue>>>9),ue=K+(te^ce^le)+re[9]+3654602809&4294967295,K=te+(ue<<4&4294967295|ue>>>28),ue=le+(K^te^ce)+re[12]+3873151461&4294967295,le=K+(ue<<11&4294967295|ue>>>21),ue=ce+(le^K^te)+re[15]+530742520&4294967295,ce=le+(ue<<16&4294967295|ue>>>16),ue=te+(ce^le^K)+re[2]+3299628645&4294967295,te=ce+(ue<<23&4294967295|ue>>>9),ue=K+(ce^(te|~le))+re[0]+4096336452&4294967295,K=te+(ue<<6&4294967295|ue>>>26),ue=le+(te^(K|~ce))+re[7]+1126891415&4294967295,le=K+(ue<<10&4294967295|ue>>>22),ue=ce+(K^(le|~te))+re[14]+2878612391&4294967295,ce=le+(ue<<15&4294967295|ue>>>17),ue=te+(le^(ce|~K))+re[5]+4237533241&4294967295,te=ce+(ue<<21&4294967295|ue>>>11),ue=K+(ce^(te|~le))+re[12]+1700485571&4294967295,K=te+(ue<<6&4294967295|ue>>>26),ue=le+(te^(K|~ce))+re[3]+2399980690&4294967295,le=K+(ue<<10&4294967295|ue>>>22),ue=ce+(K^(le|~te))+re[10]+4293915773&4294967295,ce=le+(ue<<15&4294967295|ue>>>17),ue=te+(le^(ce|~K))+re[1]+2240044497&4294967295,te=ce+(ue<<21&4294967295|ue>>>11),ue=K+(ce^(te|~le))+re[8]+1873313359&4294967295,K=te+(ue<<6&4294967295|ue>>>26),ue=le+(te^(K|~ce))+re[15]+4264355552&4294967295,le=K+(ue<<10&4294967295|ue>>>22),ue=ce+(K^(le|~te))+re[6]+2734768916&4294967295,ce=le+(ue<<15&4294967295|ue>>>17),ue=te+(le^(ce|~K))+re[13]+1309151649&4294967295,te=ce+(ue<<21&4294967295|ue>>>11),ue=K+(ce^(te|~le))+re[4]+4149444226&4294967295,K=te+(ue<<6&4294967295|ue>>>26),ue=le+(te^(K|~ce))+re[11]+3174756917&4294967295,le=K+(ue<<10&4294967295|ue>>>22),ue=ce+(K^(le|~te))+re[2]+718787259&4294967295,ce=le+(ue<<15&4294967295|ue>>>17),ue=te+(le^(ce|~K))+re[9]+3951481745&4294967295,se.g[0]=se.g[0]+K&4294967295,se.g[1]=se.g[1]+(ce+(ue<<21&4294967295|ue>>>11))&4294967295,se.g[2]=se.g[2]+ce&4294967295,se.g[3]=se.g[3]+le&4294967295}s.prototype.u=function(se,K){K===void 0&&(K=se.length);for(var te=K-this.blockSize,re=this.B,ce=this.h,le=0;le<K;){if(ce==0)for(;le<=te;)o(this,se,le),le+=this.blockSize;if(typeof se=="string"){for(;le<K;)if(re[ce++]=se.charCodeAt(le++),ce==this.blockSize){o(this,re),ce=0;break}}else for(;le<K;)if(re[ce++]=se[le++],ce==this.blockSize){o(this,re),ce=0;break}}this.h=ce,this.o+=K},s.prototype.v=function(){var se=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);se[0]=128;for(var K=1;K<se.length-8;++K)se[K]=0;var te=8*this.o;for(K=se.length-8;K<se.length;++K)se[K]=te&255,te/=256;for(this.u(se),se=Array(16),K=te=0;4>K;++K)for(var re=0;32>re;re+=8)se[te++]=this.g[K]>>>re&255;return se};function u(se,K){var te=g;return Object.prototype.hasOwnProperty.call(te,se)?te[se]:te[se]=K(se)}function d(se,K){this.h=K;for(var te=[],re=!0,ce=se.length-1;0<=ce;ce--){var le=se[ce]|0;re&&le==K||(te[ce]=le,re=!1)}this.g=te}var g={};function y(se){return-128<=se&&128>se?u(se,function(K){return new d([K|0],0>K?-1:0)}):new d([se|0],0>se?-1:0)}function v(se){if(isNaN(se)||!isFinite(se))return T;if(0>se)return H(v(-se));for(var K=[],te=1,re=0;se>=te;re++)K[re]=se/te|0,te*=4294967296;return new d(K,0)}function w(se,K){if(se.length==0)throw Error("number format error: empty string");if(K=K||10,2>K||36<K)throw Error("radix out of range: "+K);if(se.charAt(0)=="-")return H(w(se.substring(1),K));if(0<=se.indexOf("-"))throw Error('number format error: interior "-" character');for(var te=v(Math.pow(K,8)),re=T,ce=0;ce<se.length;ce+=8){var le=Math.min(8,se.length-ce),ue=parseInt(se.substring(ce,ce+le),K);8>le?(le=v(Math.pow(K,le)),re=re.j(le).add(v(ue))):(re=re.j(te),re=re.add(v(ue)))}return re}var T=y(0),A=y(1),C=y(16777216);t=d.prototype,t.m=function(){if(D(this))return-H(this).m();for(var se=0,K=1,te=0;te<this.g.length;te++){var re=this.i(te);se+=(0<=re?re:4294967296+re)*K,K*=4294967296}return se},t.toString=function(se){if(se=se||10,2>se||36<se)throw Error("radix out of range: "+se);if(j(this))return"0";if(D(this))return"-"+H(this).toString(se);for(var K=v(Math.pow(se,6)),te=this,re="";;){var ce=ee(te,K).g;te=ne(te,ce.j(K));var le=((0<te.g.length?te.g[0]:te.h)>>>0).toString(se);if(te=ce,j(te))return le+re;for(;6>le.length;)le="0"+le;re=le+re}},t.i=function(se){return 0>se?0:se<this.g.length?this.g[se]:this.h};function j(se){if(se.h!=0)return!1;for(var K=0;K<se.g.length;K++)if(se.g[K]!=0)return!1;return!0}function D(se){return se.h==-1}t.l=function(se){return se=ne(this,se),D(se)?-1:j(se)?0:1};function H(se){for(var K=se.g.length,te=[],re=0;re<K;re++)te[re]=~se.g[re];return new d(te,~se.h).add(A)}t.abs=function(){return D(this)?H(this):this},t.add=function(se){for(var K=Math.max(this.g.length,se.g.length),te=[],re=0,ce=0;ce<=K;ce++){var le=re+(this.i(ce)&65535)+(se.i(ce)&65535),ue=(le>>>16)+(this.i(ce)>>>16)+(se.i(ce)>>>16);re=ue>>>16,le&=65535,ue&=65535,te[ce]=ue<<16|le}return new d(te,te[te.length-1]&-2147483648?-1:0)};function ne(se,K){return se.add(H(K))}t.j=function(se){if(j(this)||j(se))return T;if(D(this))return D(se)?H(this).j(H(se)):H(H(this).j(se));if(D(se))return H(this.j(H(se)));if(0>this.l(C)&&0>se.l(C))return v(this.m()*se.m());for(var K=this.g.length+se.g.length,te=[],re=0;re<2*K;re++)te[re]=0;for(re=0;re<this.g.length;re++)for(var ce=0;ce<se.g.length;ce++){var le=this.i(re)>>>16,ue=this.i(re)&65535,_e=se.i(ce)>>>16,Ee=se.i(ce)&65535;te[2*re+2*ce]+=ue*Ee,Y(te,2*re+2*ce),te[2*re+2*ce+1]+=le*Ee,Y(te,2*re+2*ce+1),te[2*re+2*ce+1]+=ue*_e,Y(te,2*re+2*ce+1),te[2*re+2*ce+2]+=le*_e,Y(te,2*re+2*ce+2)}for(re=0;re<K;re++)te[re]=te[2*re+1]<<16|te[2*re];for(re=K;re<2*K;re++)te[re]=0;return new d(te,0)};function Y(se,K){for(;(se[K]&65535)!=se[K];)se[K+1]+=se[K]>>>16,se[K]&=65535,K++}function U(se,K){this.g=se,this.h=K}function ee(se,K){if(j(K))throw Error("division by zero");if(j(se))return new U(T,T);if(D(se))return K=ee(H(se),K),new U(H(K.g),H(K.h));if(D(K))return K=ee(se,H(K)),new U(H(K.g),K.h);if(30<se.g.length){if(D(se)||D(K))throw Error("slowDivide_ only works with positive integers.");for(var te=A,re=K;0>=re.l(se);)te=J(te),re=J(re);var ce=ie(te,1),le=ie(re,1);for(re=ie(re,2),te=ie(te,2);!j(re);){var ue=le.add(re);0>=ue.l(se)&&(ce=ce.add(te),le=ue),re=ie(re,1),te=ie(te,1)}return K=ne(se,ce.j(K)),new U(ce,K)}for(ce=T;0<=se.l(K);){for(te=Math.max(1,Math.floor(se.m()/K.m())),re=Math.ceil(Math.log(te)/Math.LN2),re=48>=re?1:Math.pow(2,re-48),le=v(te),ue=le.j(K);D(ue)||0<ue.l(se);)te-=re,le=v(te),ue=le.j(K);j(le)&&(le=A),ce=ce.add(le),se=ne(se,ue)}return new U(ce,se)}t.A=function(se){return ee(this,se).h},t.and=function(se){for(var K=Math.max(this.g.length,se.g.length),te=[],re=0;re<K;re++)te[re]=this.i(re)&se.i(re);return new d(te,this.h&se.h)},t.or=function(se){for(var K=Math.max(this.g.length,se.g.length),te=[],re=0;re<K;re++)te[re]=this.i(re)|se.i(re);return new d(te,this.h|se.h)},t.xor=function(se){for(var K=Math.max(this.g.length,se.g.length),te=[],re=0;re<K;re++)te[re]=this.i(re)^se.i(re);return new d(te,this.h^se.h)};function J(se){for(var K=se.g.length+1,te=[],re=0;re<K;re++)te[re]=se.i(re)<<1|se.i(re-1)>>>31;return new d(te,se.h)}function ie(se,K){var te=K>>5;K%=32;for(var re=se.g.length-te,ce=[],le=0;le<re;le++)ce[le]=0<K?se.i(le+te)>>>K|se.i(le+te+1)<<32-K:se.i(le+te);return new d(ce,se.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Md5=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=w,Integer=d}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(V,fe,ge){return V==Array.prototype||V==Object.prototype||(V[fe]=ge.value),V};function n(V){V=[typeof globalThis=="object"&&globalThis,V,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var fe=0;fe<V.length;++fe){var ge=V[fe];if(ge&&ge.Math==Math)return ge}throw Error("Cannot find global object")}var s=n(this);function o(V,fe){if(fe)e:{var ge=s;V=V.split(".");for(var Ae=0;Ae<V.length-1;Ae++){var Ye=V[Ae];if(!(Ye in ge))break e;ge=ge[Ye]}V=V[V.length-1],Ae=ge[V],fe=fe(Ae),fe!=Ae&&fe!=null&&e(ge,V,{configurable:!0,writable:!0,value:fe})}}function u(V,fe){V instanceof String&&(V+="");var ge=0,Ae=!1,Ye={next:function(){if(!Ae&&ge<V.length){var vt=ge++;return{value:fe(vt,V[vt]),done:!1}}return Ae=!0,{done:!0,value:void 0}}};return Ye[Symbol.iterator]=function(){return Ye},Ye}o("Array.prototype.values",function(V){return V||function(){return u(this,function(fe,ge){return ge})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function y(V){var fe=typeof V;return fe=fe!="object"?fe:V?Array.isArray(V)?"array":fe:"null",fe=="array"||fe=="object"&&typeof V.length=="number"}function v(V){var fe=typeof V;return fe=="object"&&V!=null||fe=="function"}function w(V,fe,ge){return V.call.apply(V.bind,arguments)}function T(V,fe,ge){if(!V)throw Error();if(2<arguments.length){var Ae=Array.prototype.slice.call(arguments,2);return function(){var Ye=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ye,Ae),V.apply(fe,Ye)}}return function(){return V.apply(fe,arguments)}}function A(V,fe,ge){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:T,A.apply(null,arguments)}function C(V,fe){var ge=Array.prototype.slice.call(arguments,1);return function(){var Ae=ge.slice();return Ae.push.apply(Ae,arguments),V.apply(this,Ae)}}function j(V,fe){function ge(){}ge.prototype=fe.prototype,V.aa=fe.prototype,V.prototype=new ge,V.prototype.constructor=V,V.Qb=function(Ae,Ye,vt){for(var Wt=Array(arguments.length-2),Wn=2;Wn<arguments.length;Wn++)Wt[Wn-2]=arguments[Wn];return fe.prototype[Ye].apply(Ae,Wt)}}function D(V){const fe=V.length;if(0<fe){const ge=Array(fe);for(let Ae=0;Ae<fe;Ae++)ge[Ae]=V[Ae];return ge}return[]}function H(V,fe){for(let ge=1;ge<arguments.length;ge++){const Ae=arguments[ge];if(y(Ae)){const Ye=V.length||0,vt=Ae.length||0;V.length=Ye+vt;for(let Wt=0;Wt<vt;Wt++)V[Ye+Wt]=Ae[Wt]}else V.push(Ae)}}class ne{constructor(fe,ge){this.i=fe,this.j=ge,this.h=0,this.g=null}get(){let fe;return 0<this.h?(this.h--,fe=this.g,this.g=fe.next,fe.next=null):fe=this.i(),fe}}function Y(V){return/^[\s\xa0]*$/.test(V)}function U(){var V=g.navigator;return V&&(V=V.userAgent)?V:""}function ee(V){return ee[" "](V),V}ee[" "]=function(){};var J=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function ie(V,fe,ge){for(const Ae in V)fe.call(ge,V[Ae],Ae,V)}function se(V,fe){for(const ge in V)fe.call(void 0,V[ge],ge,V)}function K(V){const fe={};for(const ge in V)fe[ge]=V[ge];return fe}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(V,fe){let ge,Ae;for(let Ye=1;Ye<arguments.length;Ye++){Ae=arguments[Ye];for(ge in Ae)V[ge]=Ae[ge];for(let vt=0;vt<te.length;vt++)ge=te[vt],Object.prototype.hasOwnProperty.call(Ae,ge)&&(V[ge]=Ae[ge])}}function ce(V){var fe=1;V=V.split(":");const ge=[];for(;0<fe&&V.length;)ge.push(V.shift()),fe--;return V.length&&ge.push(V.join(":")),ge}function le(V){g.setTimeout(()=>{throw V},0)}function ue(){var V=xe;let fe=null;return V.g&&(fe=V.g,V.g=V.g.next,V.g||(V.h=null),fe.next=null),fe}class _e{constructor(){this.h=this.g=null}add(fe,ge){const Ae=Ee.get();Ae.set(fe,ge),this.h?this.h.next=Ae:this.g=Ae,this.h=Ae}}var Ee=new ne(()=>new we,V=>V.reset());class we{constructor(){this.next=this.g=this.h=null}set(fe,ge){this.h=fe,this.g=ge,this.next=null}reset(){this.next=this.g=this.h=null}}let de,me=!1,xe=new _e,pe=()=>{const V=g.Promise.resolve(void 0);de=()=>{V.then(ve)}};var ve=()=>{for(var V;V=ue();){try{V.h.call(V.g)}catch(ge){le(ge)}var fe=Ee;fe.j(V),100>fe.h&&(fe.h++,V.next=fe.g,fe.g=V)}me=!1};function Oe(){this.s=this.s,this.C=this.C}Oe.prototype.s=!1,Oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(V,fe){this.type=V,this.g=this.target=fe,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var V=!1,fe=Object.defineProperty({},"passive",{get:function(){V=!0}});try{const ge=()=>{};g.addEventListener("test",ge,fe),g.removeEventListener("test",ge,fe)}catch{}return V}();function Me(V,fe){if(Te.call(this,V?V.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,V){var ge=this.type=V.type,Ae=V.changedTouches&&V.changedTouches.length?V.changedTouches[0]:null;if(this.target=V.target||V.srcElement,this.g=fe,fe=V.relatedTarget){if(J){e:{try{ee(fe.nodeName);var Ye=!0;break e}catch{}Ye=!1}Ye||(fe=null)}}else ge=="mouseover"?fe=V.fromElement:ge=="mouseout"&&(fe=V.toElement);this.relatedTarget=fe,Ae?(this.clientX=Ae.clientX!==void 0?Ae.clientX:Ae.pageX,this.clientY=Ae.clientY!==void 0?Ae.clientY:Ae.pageY,this.screenX=Ae.screenX||0,this.screenY=Ae.screenY||0):(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0),this.button=V.button,this.key=V.key||"",this.ctrlKey=V.ctrlKey,this.altKey=V.altKey,this.shiftKey=V.shiftKey,this.metaKey=V.metaKey,this.pointerId=V.pointerId||0,this.pointerType=typeof V.pointerType=="string"?V.pointerType:Ce[V.pointerType]||"",this.state=V.state,this.i=V,V.defaultPrevented&&Me.aa.h.call(this)}}j(Me,Te);var Ce={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var V=this.i;V.preventDefault?V.preventDefault():V.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function $e(V,fe,ge,Ae,Ye){this.listener=V,this.proxy=null,this.src=fe,this.type=ge,this.capture=!!Ae,this.ha=Ye,this.key=++Ve,this.da=this.fa=!1}function Fe(V){V.da=!0,V.listener=null,V.proxy=null,V.src=null,V.ha=null}function je(V){this.src=V,this.g={},this.h=0}je.prototype.add=function(V,fe,ge,Ae,Ye){var vt=V.toString();V=this.g[vt],V||(V=this.g[vt]=[],this.h++);var Wt=Ie(V,fe,Ae,Ye);return-1<Wt?(fe=V[Wt],ge||(fe.fa=!1)):(fe=new $e(fe,this.src,vt,!!Ae,Ye),fe.fa=ge,V.push(fe)),fe};function De(V,fe){var ge=fe.type;if(ge in V.g){var Ae=V.g[ge],Ye=Array.prototype.indexOf.call(Ae,fe,void 0),vt;(vt=0<=Ye)&&Array.prototype.splice.call(Ae,Ye,1),vt&&(Fe(fe),V.g[ge].length==0&&(delete V.g[ge],V.h--))}}function Ie(V,fe,ge,Ae){for(var Ye=0;Ye<V.length;++Ye){var vt=V[Ye];if(!vt.da&&vt.listener==fe&&vt.capture==!!ge&&vt.ha==Ae)return Ye}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),Ne={};function Ue(V,fe,ge,Ae,Ye){if(Array.isArray(fe)){for(var vt=0;vt<fe.length;vt++)Ue(V,fe[vt],ge,Ae,Ye);return null}return ge=rt(ge),V&&V[be]?V.K(fe,ge,v(Ae)?!!Ae.capture:!1,Ye):pt(V,fe,ge,!1,Ae,Ye)}function pt(V,fe,ge,Ae,Ye,vt){if(!fe)throw Error("Invalid event type");var Wt=v(Ye)?!!Ye.capture:!!Ye,Wn=Gt(V);if(Wn||(V[Re]=Wn=new je(V)),ge=Wn.add(fe,ge,Ae,Wt,vt),ge.proxy)return ge;if(Ae=Ze(),ge.proxy=Ae,Ae.src=V,Ae.listener=ge,V.addEventListener)Le||(Ye=Wt),Ye===void 0&&(Ye=!1),V.addEventListener(fe.toString(),Ae,Ye);else if(V.attachEvent)V.attachEvent(Lt(fe.toString()),Ae);else if(V.addListener&&V.removeListener)V.addListener(Ae);else throw Error("addEventListener and attachEvent are unavailable.");return ge}function Ze(){function V(ge){return fe.call(V.src,V.listener,ge)}const fe=Dt;return V}function mn(V,fe,ge,Ae,Ye){if(Array.isArray(fe))for(var vt=0;vt<fe.length;vt++)mn(V,fe[vt],ge,Ae,Ye);else Ae=v(Ae)?!!Ae.capture:!!Ae,ge=rt(ge),V&&V[be]?(V=V.i,fe=String(fe).toString(),fe in V.g&&(vt=V.g[fe],ge=Ie(vt,ge,Ae,Ye),-1<ge&&(Fe(vt[ge]),Array.prototype.splice.call(vt,ge,1),vt.length==0&&(delete V.g[fe],V.h--)))):V&&(V=Gt(V))&&(fe=V.g[fe.toString()],V=-1,fe&&(V=Ie(fe,ge,Ae,Ye)),(ge=-1<V?fe[V]:null)&&Ut(ge))}function Ut(V){if(typeof V!="number"&&V&&!V.da){var fe=V.src;if(fe&&fe[be])De(fe.i,V);else{var ge=V.type,Ae=V.proxy;fe.removeEventListener?fe.removeEventListener(ge,Ae,V.capture):fe.detachEvent?fe.detachEvent(Lt(ge),Ae):fe.addListener&&fe.removeListener&&fe.removeListener(Ae),(ge=Gt(fe))?(De(ge,V),ge.h==0&&(ge.src=null,fe[Re]=null)):Fe(V)}}}function Lt(V){return V in Ne?Ne[V]:Ne[V]="on"+V}function Dt(V,fe){if(V.da)V=!0;else{fe=new Me(fe,this);var ge=V.listener,Ae=V.ha||V.src;V.fa&&Ut(V),V=ge.call(Ae,fe)}return V}function Gt(V){return V=V[Re],V instanceof je?V:null}var Ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function rt(V){return typeof V=="function"?V:(V[Ke]||(V[Ke]=function(fe){return V.handleEvent(fe)}),V[Ke])}function Ct(){Oe.call(this),this.i=new je(this),this.M=this,this.F=null}j(Ct,Oe),Ct.prototype[be]=!0,Ct.prototype.removeEventListener=function(V,fe,ge,Ae){mn(this,V,fe,ge,Ae)};function tt(V,fe){var ge,Ae=V.F;if(Ae)for(ge=[];Ae;Ae=Ae.F)ge.push(Ae);if(V=V.M,Ae=fe.type||fe,typeof fe=="string")fe=new Te(fe,V);else if(fe instanceof Te)fe.target=fe.target||V;else{var Ye=fe;fe=new Te(Ae,V),re(fe,Ye)}if(Ye=!0,ge)for(var vt=ge.length-1;0<=vt;vt--){var Wt=fe.g=ge[vt];Ye=Et(Wt,Ae,!0,fe)&&Ye}if(Wt=fe.g=V,Ye=Et(Wt,Ae,!0,fe)&&Ye,Ye=Et(Wt,Ae,!1,fe)&&Ye,ge)for(vt=0;vt<ge.length;vt++)Wt=fe.g=ge[vt],Ye=Et(Wt,Ae,!1,fe)&&Ye}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var V=this.i,fe;for(fe in V.g){for(var ge=V.g[fe],Ae=0;Ae<ge.length;Ae++)Fe(ge[Ae]);delete V.g[fe],V.h--}}this.F=null},Ct.prototype.K=function(V,fe,ge,Ae){return this.i.add(String(V),fe,!1,ge,Ae)},Ct.prototype.L=function(V,fe,ge,Ae){return this.i.add(String(V),fe,!0,ge,Ae)};function Et(V,fe,ge,Ae){if(fe=V.i.g[String(fe)],!fe)return!0;fe=fe.concat();for(var Ye=!0,vt=0;vt<fe.length;++vt){var Wt=fe[vt];if(Wt&&!Wt.da&&Wt.capture==ge){var Wn=Wt.listener,$s=Wt.ha||Wt.src;Wt.fa&&De(V.i,Wt),Ye=Wn.call($s,Ae)!==!1&&Ye}}return Ye&&!Ae.defaultPrevented}function un(V,fe,ge){if(typeof V=="function")ge&&(V=A(V,ge));else if(V&&typeof V.handleEvent=="function")V=A(V.handleEvent,V);else throw Error("Invalid listener argument");return 2147483647<Number(fe)?-1:g.setTimeout(V,fe||0)}function hn(V){V.g=un(()=>{V.g=null,V.i&&(V.i=!1,hn(V))},V.l);const fe=V.h;V.h=null,V.m.apply(null,fe)}class xn extends Oe{constructor(fe,ge){super(),this.m=fe,this.l=ge,this.h=null,this.i=!1,this.g=null}j(fe){this.h=arguments,this.g?this.i=!0:hn(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(V){Oe.call(this),this.h=V,this.g={}}j(Dn,Oe);var Sn=[];function Hn(V){ie(V.g,function(fe,ge){this.g.hasOwnProperty(ge)&&Ut(fe)},V),V.g={}}Dn.prototype.N=function(){Dn.aa.N.call(this),Hn(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pn=g.JSON.stringify,Gn=g.JSON.parse,Xn=class{stringify(V){return g.JSON.stringify(V,void 0)}parse(V){return g.JSON.parse(V,void 0)}};function kn(){}kn.prototype.h=null;function Ms(V){return V.h||(V.h=V.i())}function Zs(){}var fr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function On(){Te.call(this,"d")}j(On,Te);function vn(){Te.call(this,"c")}j(vn,Te);var Ln={},gs=null;function cs(){return gs=gs||new Ct}Ln.La="serverreachability";function js(V){Te.call(this,Ln.La,V)}j(js,Te);function Ls(V){const fe=cs();tt(fe,new js(fe))}Ln.STAT_EVENT="statevent";function Ks(V,fe){Te.call(this,Ln.STAT_EVENT,V),this.stat=fe}j(Ks,Te);function wn(V){const fe=cs();tt(fe,new Ks(fe,V))}Ln.Ma="timingevent";function $n(V,fe){Te.call(this,Ln.Ma,V),this.size=fe}j($n,Te);function es(V,fe){if(typeof V!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){V()},fe)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function Mr(V,fe,ge,Ae,Ye,vt){V.info(function(){if(V.g)if(vt)for(var Wt="",Wn=vt.split("&"),$s=0;$s<Wn.length;$s++){var Qn=Wn[$s].split("=");if(1<Qn.length){var cr=Qn[0];Qn=Qn[1];var Ws=cr.split("_");Wt=2<=Ws.length&&Ws[1]=="type"?Wt+(cr+"="+Qn+"&"):Wt+(cr+"=redacted&")}}else Wt=null;else Wt=vt;return"XMLHTTP REQ ("+Ae+") [attempt "+Ye+"]: "+fe+`
`+ge+`
`+Wt})}function qs(V,fe,ge,Ae,Ye,vt,Wt){V.info(function(){return"XMLHTTP RESP ("+Ae+") [ attempt "+Ye+"]: "+fe+`
`+ge+`
`+vt+" "+Wt})}function Ts(V,fe,ge,Ae){V.info(function(){return"XMLHTTP TEXT ("+fe+"): "+Vr(V,ge)+(Ae?" "+Ae:"")})}function Hs(V,fe){V.info(function(){return"TIMEOUT: "+fe})}Rs.prototype.info=function(){};function Vr(V,fe){if(!V.g)return fe;if(!fe)return null;try{var ge=JSON.parse(fe);if(ge){for(V=0;V<ge.length;V++)if(Array.isArray(ge[V])){var Ae=ge[V];if(!(2>Ae.length)){var Ye=Ae[1];if(Array.isArray(Ye)&&!(1>Ye.length)){var vt=Ye[0];if(vt!="noop"&&vt!="stop"&&vt!="close")for(var Wt=1;Wt<Ye.length;Wt++)Ye[Wt]=""}}}}return Pn(ge)}catch{return fe}}var Ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},li={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yr;function Bi(){}j(Bi,kn),Bi.prototype.g=function(){return new XMLHttpRequest},Bi.prototype.i=function(){return{}},Yr=new Bi;function Rr(V,fe,ge,Ae){this.j=V,this.i=fe,this.l=ge,this.R=Ae||1,this.U=new Dn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gs}function Gs(){this.i=null,this.g="",this.h=!1}var $o={},ro={};function hs(V,fe,ge){V.L=1,V.v=oo(Xr(fe)),V.m=ge,V.P=!0,Fi(V,null)}function Fi(V,fe){V.F=Date.now(),io(V),V.A=Xr(V.v);var ge=V.A,Ae=V.R;Array.isArray(Ae)||(Ae=[String(Ae)]),lo(ge.i,"t",Ae),V.C=0,ge=V.j.J,V.h=new Gs,V.g=er(V.j,ge?fe:null,!V.m),0<V.O&&(V.M=new xn(A(V.Y,V,V.g),V.O)),fe=V.U,ge=V.g,Ae=V.ca;var Ye="readystatechange";Array.isArray(Ye)||(Ye&&(Sn[0]=Ye.toString()),Ye=Sn);for(var vt=0;vt<Ye.length;vt++){var Wt=Ue(ge,Ye[vt],Ae||fe.handleEvent,!1,fe.h||fe);if(!Wt)break;fe.g[Wt.key]=Wt}fe=V.H?K(V.H):{},V.m?(V.u||(V.u="POST"),fe["Content-Type"]="application/x-www-form-urlencoded",V.g.ea(V.A,V.u,V.m,fe)):(V.u="GET",V.g.ea(V.A,V.u,null,fe)),Ls(),Mr(V.i,V.u,V.A,V.l,V.R,V.m)}Rr.prototype.ca=function(V){V=V.target;const fe=this.M;fe&&kr(V)==3?fe.j():this.Y(V)},Rr.prototype.Y=function(V){try{if(V==this.g)e:{const Ws=kr(this.g);var fe=this.g.Ba();const ua=this.g.Z();if(!(3>Ws)&&(Ws!=3||this.g&&(this.h.h||this.g.oa()||vc(this.g)))){this.J||Ws!=4||fe==7||(fe==8||0>=ua?Ls(3):Ls(2)),ea(this);var ge=this.g.Z();this.X=ge;t:if(Sl(this)){var Ae=vc(this.g);V="";var Ye=Ae.length,vt=kr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){or(this),Ei(this);var Wt="";break t}this.h.i=new g.TextDecoder}for(fe=0;fe<Ye;fe++)this.h.h=!0,V+=this.h.i.decode(Ae[fe],{stream:!(vt&&fe==Ye-1)});Ae.length=0,this.h.g+=V,this.C=0,Wt=this.h.g}else Wt=this.g.oa();if(this.o=ge==200,qs(this.i,this.u,this.A,this.l,this.R,Ws,ge),this.o){if(this.T&&!this.K){t:{if(this.g){var Wn,$s=this.g;if((Wn=$s.g?$s.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Wn)){var Qn=Wn;break t}}Qn=null}if(ge=Qn)Ts(this.i,this.l,ge,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Js(this,ge);else{this.o=!1,this.s=3,wn(12),or(this),Ei(this);break e}}if(this.P){ge=!0;let Ds;for(;!this.J&&this.C<Wt.length;)if(Ds=gc(this,Wt),Ds==ro){Ws==4&&(this.s=4,wn(14),ge=!1),Ts(this.i,this.l,null,"[Incomplete Response]");break}else if(Ds==$o){this.s=4,wn(15),Ts(this.i,this.l,Wt,"[Invalid Chunk]"),ge=!1;break}else Ts(this.i,this.l,Ds,null),Js(this,Ds);if(Sl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ws!=4||Wt.length!=0||this.h.h||(this.s=1,wn(16),ge=!1),this.o=this.o&&ge,!ge)Ts(this.i,this.l,Wt,"[Invalid Chunked Response]"),or(this),Ei(this);else if(0<Wt.length&&!this.W){this.W=!0;var cr=this.j;cr.g==this&&cr.ba&&!cr.M&&(cr.j.info("Great, no buffering proxy detected. Bytes received: "+Wt.length),mo(cr),cr.M=!0,wn(11))}}else Ts(this.i,this.l,Wt,null),Js(this,Wt);Ws==4&&or(this),this.o&&!this.J&&(Ws==4?Ec(this.j,this):(this.o=!1,io(this)))}else vu(this.g),ge==400&&0<Wt.indexOf("Unknown SID")?(this.s=3,wn(12)):(this.s=0,wn(13)),or(this),Ei(this)}}}catch{}finally{}};function Sl(V){return V.g?V.u=="GET"&&V.L!=2&&V.j.Ca:!1}function gc(V,fe){var ge=V.C,Ae=fe.indexOf(`
`,ge);return Ae==-1?ro:(ge=Number(fe.substring(ge,Ae)),isNaN(ge)?$o:(Ae+=1,Ae+ge>fe.length?ro:(fe=fe.slice(Ae,Ae+ge),V.C=Ae+ge,fe)))}Rr.prototype.cancel=function(){this.J=!0,or(this)};function io(V){V.S=Date.now()+V.I,pu(V,V.I)}function pu(V,fe){if(V.B!=null)throw Error("WatchDog timer not null");V.B=es(A(V.ba,V),fe)}function ea(V){V.B&&(g.clearTimeout(V.B),V.B=null)}Rr.prototype.ba=function(){this.B=null;const V=Date.now();0<=V-this.S?(Hs(this.i,this.A),this.L!=2&&(Ls(),wn(17)),or(this),this.s=2,Ei(this)):pu(this,this.S-V)};function Ei(V){V.j.G==0||V.J||Ec(V.j,V)}function or(V){ea(V);var fe=V.M;fe&&typeof fe.ma=="function"&&fe.ma(),V.M=null,Hn(V.U),V.g&&(fe=V.g,V.g=null,fe.abort(),fe.ma())}function Js(V,fe){try{var ge=V.j;if(ge.G!=0&&(ge.g==V||Yo(ge.h,V))){if(!V.K&&Yo(ge.h,V)&&ge.G==3){try{var Ae=ge.Da.g.parse(fe)}catch{Ae=null}if(Array.isArray(Ae)&&Ae.length==3){var Ye=Ae;if(Ye[0]==0){e:if(!ge.u){if(ge.g)if(ge.g.F+3e3<V.F)La(ge),Zo(ge);else break e;Ol(ge),wn(18)}}else ge.za=Ye[1],0<ge.za-ge.T&&37500>Ye[2]&&ge.F&&ge.v==0&&!ge.C&&(ge.C=es(A(ge.Za,ge),6e3));if(1>=ja(ge.h)&&ge.ca){try{ge.ca()}catch{}ge.ca=void 0}}else ca(ge,11)}else if((V.K||ge.g==V)&&La(ge),!Y(fe))for(Ye=ge.Da.g.parse(fe),fe=0;fe<Ye.length;fe++){let Qn=Ye[fe];if(ge.T=Qn[0],Qn=Qn[1],ge.G==2)if(Qn[0]=="c"){ge.K=Qn[1],ge.ia=Qn[2];const cr=Qn[3];cr!=null&&(ge.la=cr,ge.j.info("VER="+ge.la));const Ws=Qn[4];Ws!=null&&(ge.Aa=Ws,ge.j.info("SVER="+ge.Aa));const ua=Qn[5];ua!=null&&typeof ua=="number"&&0<ua&&(Ae=1.5*ua,ge.L=Ae,ge.j.info("backChannelRequestTimeoutMs_="+Ae)),Ae=ge;const Ds=V.g;if(Ds){const Ai=Ds.g?Ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ai){var vt=Ae.h;vt.g||Ai.indexOf("spdy")==-1&&Ai.indexOf("quic")==-1&&Ai.indexOf("h2")==-1||(vt.j=vt.l,vt.g=new Set,vt.h&&(Kr(vt,vt.h),vt.h=null))}if(Ae.D){const Ac=Ds.g?Ds.g.getResponseHeader("X-HTTP-Session-Id"):null;Ac&&(Ae.ya=Ac,xs(Ae.I,Ae.D,Ac))}}ge.G=3,ge.l&&ge.l.ua(),ge.ba&&(ge.R=Date.now()-V.F,ge.j.info("Handshake RTT: "+ge.R+"ms")),Ae=ge;var Wt=V;if(Ae.qa=Eu(Ae,Ae.J?Ae.ia:null,Ae.W),Wt.K){mr(Ae.h,Wt);var Wn=Wt,$s=Ae.L;$s&&(Wn.I=$s),Wn.B&&(ea(Wn),io(Wn)),Ae.g=Wt}else Dl(Ae);0<ge.i.length&&di(ge)}else Qn[0]!="stop"&&Qn[0]!="close"||ca(ge,7);else ge.G==3&&(Qn[0]=="stop"||Qn[0]=="close"?Qn[0]=="stop"?ca(ge,7):fo(ge):Qn[0]!="noop"&&ge.l&&ge.l.ta(Qn),ge.v=0)}}Ls(4)}catch{}}var Bs=class{constructor(V,fe){this.g=V,this.map=fe}};function zi(V){this.l=V||10,g.PerformanceNavigationTiming?(V=g.performance.getEntriesByType("navigation"),V=0<V.length&&(V[0].nextHopProtocol=="hq"||V[0].nextHopProtocol=="h2")):V=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=V?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ta(V){return V.h?!0:V.g?V.g.size>=V.j:!1}function ja(V){return V.h?1:V.g?V.g.size:0}function Yo(V,fe){return V.h?V.h==fe:V.g?V.g.has(fe):!1}function Kr(V,fe){V.g?V.g.add(fe):V.h=fe}function mr(V,fe){V.h&&V.h==fe?V.h=null:V.g&&V.g.has(fe)&&V.g.delete(fe)}zi.prototype.cancel=function(){if(this.i=Ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const V of this.g.values())V.cancel();this.g.clear()}};function Ko(V){if(V.h!=null)return V.i.concat(V.h.D);if(V.g!=null&&V.g.size!==0){let fe=V.i;for(const ge of V.g.values())fe=fe.concat(ge.D);return fe}return D(V.i)}function yc(V){if(V.V&&typeof V.V=="function")return V.V();if(typeof Map<"u"&&V instanceof Map||typeof Set<"u"&&V instanceof Set)return Array.from(V.values());if(typeof V=="string")return V.split("");if(y(V)){for(var fe=[],ge=V.length,Ae=0;Ae<ge;Ae++)fe.push(V[Ae]);return fe}fe=[],ge=0;for(Ae in V)fe[ge++]=V[Ae];return fe}function Xo(V){if(V.na&&typeof V.na=="function")return V.na();if(!V.V||typeof V.V!="function"){if(typeof Map<"u"&&V instanceof Map)return Array.from(V.keys());if(!(typeof Set<"u"&&V instanceof Set)){if(y(V)||typeof V=="string"){var fe=[];V=V.length;for(var ge=0;ge<V;ge++)fe.push(ge);return fe}fe=[],ge=0;for(const Ae in V)fe[ge++]=Ae;return fe}}}function Tl(V,fe){if(V.forEach&&typeof V.forEach=="function")V.forEach(fe,void 0);else if(y(V)||typeof V=="string")Array.prototype.forEach.call(V,fe,void 0);else for(var ge=Xo(V),Ae=yc(V),Ye=Ae.length,vt=0;vt<Ye;vt++)fe.call(void 0,Ae[vt],ge&&ge[vt],V)}var ao=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gu(V,fe){if(V){V=V.split("&");for(var ge=0;ge<V.length;ge++){var Ae=V[ge].indexOf("="),Ye=null;if(0<=Ae){var vt=V[ge].substring(0,Ae);Ye=V[ge].substring(Ae+1)}else vt=V[ge];fe(vt,Ye?decodeURIComponent(Ye.replace(/\+/g," ")):"")}}}function Xs(V){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,V instanceof Xs){this.h=V.h,Da(this,V.j),this.o=V.o,this.g=V.g,Oa(this,V.s),this.l=V.l;var fe=V.i,ge=new na;ge.i=fe.i,fe.g&&(ge.g=new Map(fe.g),ge.h=fe.h),Ma(this,ge),this.m=V.m}else V&&(fe=String(V).match(ao))?(this.h=!1,Da(this,fe[1]||"",!0),this.o=ci(fe[2]||""),this.g=ci(fe[3]||"",!0),Oa(this,fe[4]),this.l=ci(fe[5]||"",!0),Ma(this,fe[6]||"",!0),this.m=ci(fe[7]||"")):(this.h=!1,this.i=new na(null,this.h))}Xs.prototype.toString=function(){var V=[],fe=this.j;fe&&V.push(Va(fe,Al,!0),":");var ge=this.g;return(ge||fe=="file")&&(V.push("//"),(fe=this.o)&&V.push(Va(fe,Al,!0),"@"),V.push(encodeURIComponent(String(ge)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ge=this.s,ge!=null&&V.push(":",String(ge))),(ge=this.l)&&(this.g&&ge.charAt(0)!="/"&&V.push("/"),V.push(Va(ge,ge.charAt(0)=="/"?yu:Cl,!0))),(ge=this.i.toString())&&V.push("?",ge),(ge=this.m)&&V.push("#",Va(ge,Pl)),V.join("")};function Xr(V){return new Xs(V)}function Da(V,fe,ge){V.j=ge?ci(fe,!0):fe,V.j&&(V.j=V.j.replace(/:$/,""))}function Oa(V,fe){if(fe){if(fe=Number(fe),isNaN(fe)||0>fe)throw Error("Bad port number "+fe);V.s=fe}else V.s=null}function Ma(V,fe,ge){fe instanceof na?(V.i=fe,_c(V.i,V.h)):(ge||(fe=Va(fe,xu)),V.i=new na(fe,V.h))}function xs(V,fe,ge){V.i.set(fe,ge)}function oo(V){return xs(V,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),V}function ci(V,fe){return V?fe?decodeURI(V.replace(/%25/g,"%2525")):decodeURIComponent(V):""}function Va(V,fe,ge){return typeof V=="string"?(V=encodeURI(V).replace(fe,xc),ge&&(V=V.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V):null}function xc(V){return V=V.charCodeAt(0),"%"+(V>>4&15).toString(16)+(V&15).toString(16)}var Al=/[#\/\?@]/g,Cl=/[#\?:]/g,yu=/[#\?]/g,xu=/[#\?@]/g,Pl=/#/g;function na(V,fe){this.h=this.g=null,this.i=V||null,this.j=!!fe}function _r(V){V.g||(V.g=new Map,V.h=0,V.i&&gu(V.i,function(fe,ge){V.add(decodeURIComponent(fe.replace(/\+/g," ")),ge)}))}t=na.prototype,t.add=function(V,fe){_r(this),this.i=null,V=Wr(this,V);var ge=this.g.get(V);return ge||this.g.set(V,ge=[]),ge.push(fe),this.h+=1,this};function Ri(V,fe){_r(V),fe=Wr(V,fe),V.g.has(fe)&&(V.i=null,V.h-=V.g.get(fe).length,V.g.delete(fe))}function sa(V,fe){return _r(V),fe=Wr(V,fe),V.g.has(fe)}t.forEach=function(V,fe){_r(this),this.g.forEach(function(ge,Ae){ge.forEach(function(Ye){V.call(fe,Ye,Ae,this)},this)},this)},t.na=function(){_r(this);const V=Array.from(this.g.values()),fe=Array.from(this.g.keys()),ge=[];for(let Ae=0;Ae<fe.length;Ae++){const Ye=V[Ae];for(let vt=0;vt<Ye.length;vt++)ge.push(fe[Ae])}return ge},t.V=function(V){_r(this);let fe=[];if(typeof V=="string")sa(this,V)&&(fe=fe.concat(this.g.get(Wr(this,V))));else{V=Array.from(this.g.values());for(let ge=0;ge<V.length;ge++)fe=fe.concat(V[ge])}return fe},t.set=function(V,fe){return _r(this),this.i=null,V=Wr(this,V),sa(this,V)&&(this.h-=this.g.get(V).length),this.g.set(V,[fe]),this.h+=1,this},t.get=function(V,fe){return V?(V=this.V(V),0<V.length?String(V[0]):fe):fe};function lo(V,fe,ge){Ri(V,fe),0<ge.length&&(V.i=null,V.g.set(Wr(V,fe),D(ge)),V.h+=ge.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const V=[],fe=Array.from(this.g.keys());for(var ge=0;ge<fe.length;ge++){var Ae=fe[ge];const vt=encodeURIComponent(String(Ae)),Wt=this.V(Ae);for(Ae=0;Ae<Wt.length;Ae++){var Ye=vt;Wt[Ae]!==""&&(Ye+="="+encodeURIComponent(String(Wt[Ae]))),V.push(Ye)}}return this.i=V.join("&")};function Wr(V,fe){return fe=String(fe),V.j&&(fe=fe.toLowerCase()),fe}function _c(V,fe){fe&&!V.j&&(_r(V),V.i=null,V.g.forEach(function(ge,Ae){var Ye=Ae.toLowerCase();Ae!=Ye&&(Ri(this,Ae),lo(this,Ye,ge))},V)),V.j=fe}function co(V,fe){const ge=new Rs;if(g.Image){const Ae=new Image;Ae.onload=C(ui,ge,"TestLoadImage: loaded",!0,fe,Ae),Ae.onerror=C(ui,ge,"TestLoadImage: error",!1,fe,Ae),Ae.onabort=C(ui,ge,"TestLoadImage: abort",!1,fe,Ae),Ae.ontimeout=C(ui,ge,"TestLoadImage: timeout",!1,fe,Ae),g.setTimeout(function(){Ae.ontimeout&&Ae.ontimeout()},1e4),Ae.src=V}else fe(!1)}function wi(V,fe){const ge=new Rs,Ae=new AbortController,Ye=setTimeout(()=>{Ae.abort(),ui(ge,"TestPingServer: timeout",!1,fe)},1e4);fetch(V,{signal:Ae.signal}).then(vt=>{clearTimeout(Ye),vt.ok?ui(ge,"TestPingServer: ok",!0,fe):ui(ge,"TestPingServer: server error",!1,fe)}).catch(()=>{clearTimeout(Ye),ui(ge,"TestPingServer: error",!1,fe)})}function ui(V,fe,ge,Ae,Ye){try{Ye&&(Ye.onload=null,Ye.onerror=null,Ye.onabort=null,Ye.ontimeout=null),Ae(ge)}catch{}}function uo(){this.g=new Xn}function Ui(V,fe,ge){const Ae=ge||"";try{Tl(V,function(Ye,vt){let Wt=Ye;v(Ye)&&(Wt=Pn(Ye)),fe.push(Ae+vt+"="+encodeURIComponent(Wt))})}catch(Ye){throw fe.push(Ae+"type="+encodeURIComponent("_badmap")),Ye}}function ra(V){this.l=V.Ub||null,this.j=V.eb||!1}j(ra,kn),ra.prototype.g=function(){return new ia(this.l,this.j)},ra.prototype.i=function(V){return function(){return V}}({});function ia(V,fe){Ct.call(this),this.D=V,this.o=fe,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(ia,Ct),t=ia.prototype,t.open=function(V,fe){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=V,this.A=fe,this.readyState=1,qi(this)},t.send=function(V){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const fe={headers:this.u,method:this.B,credentials:this.m,cache:void 0};V&&(fe.body=V),(this.D||g).fetch(new Request(this.A,fe)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Si(this)),this.readyState=0},t.Sa=function(V){if(this.g&&(this.l=V,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=V.headers,this.readyState=2,qi(this)),this.g&&(this.readyState=3,qi(this),this.g)))if(this.responseType==="arraybuffer")V.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in V){if(this.j=V.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Il(this)}else V.text().then(this.Ra.bind(this),this.ga.bind(this))};function Il(V){V.j.read().then(V.Pa.bind(V)).catch(V.ga.bind(V))}t.Pa=function(V){if(this.g){if(this.o&&V.value)this.response.push(V.value);else if(!this.o){var fe=V.value?V.value:new Uint8Array(0);(fe=this.v.decode(fe,{stream:!V.done}))&&(this.response=this.responseText+=fe)}V.done?Si(this):qi(this),this.readyState==3&&Il(this)}},t.Ra=function(V){this.g&&(this.response=this.responseText=V,Si(this))},t.Qa=function(V){this.g&&(this.response=V,Si(this))},t.ga=function(){this.g&&Si(this)};function Si(V){V.readyState=4,V.l=null,V.j=null,V.v=null,qi(V)}t.setRequestHeader=function(V,fe){this.u.append(V,fe)},t.getResponseHeader=function(V){return this.h&&this.h.get(V.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const V=[],fe=this.h.entries();for(var ge=fe.next();!ge.done;)ge=ge.value,V.push(ge[0]+": "+ge[1]),ge=fe.next();return V.join(`\r
`)};function qi(V){V.onreadystatechange&&V.onreadystatechange.call(V)}Object.defineProperty(ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(V){this.m=V?"include":"same-origin"}});function Nl(V){let fe="";return ie(V,function(ge,Ae){fe+=Ae,fe+=":",fe+=ge,fe+=`\r
`}),fe}function lr(V,fe,ge){e:{for(Ae in ge){var Ae=!1;break e}Ae=!0}Ae||(ge=Nl(ge),typeof V=="string"?ge!=null&&encodeURIComponent(String(ge)):xs(V,fe,ge))}function us(V){Ct.call(this),this.headers=new Map,this.o=V||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(us,Ct);var Wo=/^https?$/i,ho=["POST","PUT"];t=us.prototype,t.Ha=function(V){this.J=V},t.ea=function(V,fe,ge,Ae){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+V);fe=fe?fe.toUpperCase():"GET",this.D=V,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yr.g(),this.v=this.o?Ms(this.o):Ms(Yr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(fe,String(V),!0),this.B=!1}catch(vt){_u(this,vt);return}if(V=ge||"",ge=new Map(this.headers),Ae)if(Object.getPrototypeOf(Ae)===Object.prototype)for(var Ye in Ae)ge.set(Ye,Ae[Ye]);else if(typeof Ae.keys=="function"&&typeof Ae.get=="function")for(const vt of Ae.keys())ge.set(vt,Ae.get(vt));else throw Error("Unknown input type for opt_headers: "+String(Ae));Ae=Array.from(ge.keys()).find(vt=>vt.toLowerCase()=="content-type"),Ye=g.FormData&&V instanceof g.FormData,!(0<=Array.prototype.indexOf.call(ho,fe,void 0))||Ae||Ye||ge.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[vt,Wt]of ge)this.g.setRequestHeader(vt,Wt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ka(this),this.u=!0,this.g.send(V),this.u=!1}catch(vt){_u(this,vt)}};function _u(V,fe){V.h=!1,V.g&&(V.j=!0,V.g.abort(),V.j=!1),V.l=fe,V.m=5,jl(V),Qr(V)}function jl(V){V.A||(V.A=!0,tt(V,"complete"),tt(V,"error"))}t.abort=function(V){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=V||7,tt(this,"complete"),tt(this,"abort"),Qr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qr(this,!0)),us.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qo(this):this.bb())},t.bb=function(){Qo(this)};function Qo(V){if(V.h&&typeof d<"u"&&(!V.v[1]||kr(V)!=4||V.Z()!=2)){if(V.u&&kr(V)==4)un(V.Ea,0,V);else if(tt(V,"readystatechange"),kr(V)==4){V.h=!1;try{const Wt=V.Z();e:switch(Wt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var fe=!0;break e;default:fe=!1}var ge;if(!(ge=fe)){var Ae;if(Ae=Wt===0){var Ye=String(V.D).match(ao)[1]||null;!Ye&&g.self&&g.self.location&&(Ye=g.self.location.protocol.slice(0,-1)),Ae=!Wo.test(Ye?Ye.toLowerCase():"")}ge=Ae}if(ge)tt(V,"complete"),tt(V,"success");else{V.m=6;try{var vt=2<kr(V)?V.g.statusText:""}catch{vt=""}V.l=vt+" ["+V.Z()+"]",jl(V)}}finally{Qr(V)}}}}function Qr(V,fe){if(V.g){ka(V);const ge=V.g,Ae=V.v[0]?()=>{}:null;V.g=null,V.v=null,fe||tt(V,"ready");try{ge.onreadystatechange=Ae}catch{}}}function ka(V){V.I&&(g.clearTimeout(V.I),V.I=null)}t.isActive=function(){return!!this.g};function kr(V){return V.g?V.g.readyState:0}t.Z=function(){try{return 2<kr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(V){if(this.g){var fe=this.g.responseText;return V&&fe.indexOf(V)==0&&(fe=fe.substring(V.length)),Gn(fe)}};function vc(V){try{if(!V.g)return null;if("response"in V.g)return V.g.response;switch(V.H){case"":case"text":return V.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in V.g)return V.g.mozResponseArrayBuffer}return null}catch{return null}}function vu(V){const fe={};V=(V.g&&2<=kr(V)&&V.g.getAllResponseHeaders()||"").split(`\r
`);for(let Ae=0;Ae<V.length;Ae++){if(Y(V[Ae]))continue;var ge=ce(V[Ae]);const Ye=ge[0];if(ge=ge[1],typeof ge!="string")continue;ge=ge.trim();const vt=fe[Ye]||[];fe[Ye]=vt,vt.push(ge)}se(fe,function(Ae){return Ae.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function aa(V,fe,ge){return ge&&ge.internalChannelParams&&ge.internalChannelParams[V]||fe}function oa(V){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=aa("failFast",!1,V),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=aa("baseRetryDelayMs",5e3,V),this.cb=aa("retryDelaySeedMs",1e4,V),this.Wa=aa("forwardChannelMaxRetries",2,V),this.wa=aa("forwardChannelRequestTimeoutMs",2e4,V),this.pa=V&&V.xmlHttpFactory||void 0,this.Xa=V&&V.Tb||void 0,this.Ca=V&&V.useFetchStreams||!1,this.L=void 0,this.J=V&&V.supportsCrossDomainXhr||!1,this.K="",this.h=new zi(V&&V.concurrentRequestLimit),this.Da=new uo,this.P=V&&V.fastHandshake||!1,this.O=V&&V.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=V&&V.Rb||!1,V&&V.xa&&this.j.xa(),V&&V.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&V&&V.detectBufferingProxy||!1,this.ja=void 0,V&&V.longPollingTimeout&&0<V.longPollingTimeout&&(this.ja=V.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=oa.prototype,t.la=8,t.G=1,t.connect=function(V,fe,ge,Ae){wn(0),this.W=V,this.H=fe||{},ge&&Ae!==void 0&&(this.H.OSID=ge,this.H.OAID=Ae),this.F=this.X,this.I=Eu(this,null,this.W),di(this)};function fo(V){if(bc(V),V.G==3){var fe=V.U++,ge=Xr(V.I);if(xs(ge,"SID",V.K),xs(ge,"RID",fe),xs(ge,"TYPE","terminate"),Lr(V,ge),fe=new Rr(V,V.j,fe),fe.L=2,fe.v=oo(Xr(ge)),ge=!1,g.navigator&&g.navigator.sendBeacon)try{ge=g.navigator.sendBeacon(fe.v.toString(),"")}catch{}!ge&&g.Image&&(new Image().src=fe.v,ge=!0),ge||(fe.g=er(fe.j,null),fe.g.ea(fe.v)),fe.F=Date.now(),io(fe)}Rc(V)}function Zo(V){V.g&&(mo(V),V.g.cancel(),V.g=null)}function bc(V){Zo(V),V.u&&(g.clearTimeout(V.u),V.u=null),La(V),V.h.cancel(),V.s&&(typeof V.s=="number"&&g.clearTimeout(V.s),V.s=null)}function di(V){if(!ta(V.h)&&!V.s){V.s=!0;var fe=V.Ga;de||pe(),me||(de(),me=!0),xe.add(fe,V),V.B=0}}function bu(V,fe){return ja(V.h)>=V.h.j-(V.s?1:0)?!1:V.s?(V.i=fe.D.concat(V.i),!0):V.G==1||V.G==2||V.B>=(V.Va?0:V.Wa)?!1:(V.s=es(A(V.Ga,V,fe),el(V,V.B)),V.B++,!0)}t.Ga=function(V){if(this.s)if(this.s=null,this.G==1){if(!V){this.U=Math.floor(1e5*Math.random()),V=this.U++;const Ye=new Rr(this,this.j,V);let vt=this.o;if(this.S&&(vt?(vt=K(vt),re(vt,this.S)):vt=this.S),this.m!==null||this.O||(Ye.H=vt,vt=null),this.P)e:{for(var fe=0,ge=0;ge<this.i.length;ge++){t:{var Ae=this.i[ge];if("__data__"in Ae.map&&(Ae=Ae.map.__data__,typeof Ae=="string")){Ae=Ae.length;break t}Ae=void 0}if(Ae===void 0)break;if(fe+=Ae,4096<fe){fe=ge;break e}if(fe===4096||ge===this.i.length-1){fe=ge+1;break e}}fe=1e3}else fe=1e3;fe=Jo(this,Ye,fe),ge=Xr(this.I),xs(ge,"RID",V),xs(ge,"CVER",22),this.D&&xs(ge,"X-HTTP-Session-Id",this.D),Lr(this,ge),vt&&(this.O?fe="headers="+encodeURIComponent(String(Nl(vt)))+"&"+fe:this.m&&lr(ge,this.m,vt)),Kr(this.h,Ye),this.Ua&&xs(ge,"TYPE","init"),this.P?(xs(ge,"$req",fe),xs(ge,"SID","null"),Ye.T=!0,hs(Ye,ge,null)):hs(Ye,ge,fe),this.G=2}}else this.G==3&&(V?Ti(this,V):this.i.length==0||ta(this.h)||Ti(this))};function Ti(V,fe){var ge;fe?ge=fe.l:ge=V.U++;const Ae=Xr(V.I);xs(Ae,"SID",V.K),xs(Ae,"RID",ge),xs(Ae,"AID",V.T),Lr(V,Ae),V.m&&V.o&&lr(Ae,V.m,V.o),ge=new Rr(V,V.j,ge,V.B+1),V.m===null&&(ge.H=V.o),fe&&(V.i=fe.D.concat(V.i)),fe=Jo(V,ge,1e3),ge.I=Math.round(.5*V.wa)+Math.round(.5*V.wa*Math.random()),Kr(V.h,ge),hs(ge,Ae,fe)}function Lr(V,fe){V.H&&ie(V.H,function(ge,Ae){xs(fe,Ae,ge)}),V.l&&Tl({},function(ge,Ae){xs(fe,Ae,ge)})}function Jo(V,fe,ge){ge=Math.min(V.i.length,ge);var Ae=V.l?A(V.l.Na,V.l,V):null;e:{var Ye=V.i;let vt=-1;for(;;){const Wt=["count="+ge];vt==-1?0<ge?(vt=Ye[0].g,Wt.push("ofs="+vt)):vt=0:Wt.push("ofs="+vt);let Wn=!0;for(let $s=0;$s<ge;$s++){let Qn=Ye[$s].g;const cr=Ye[$s].map;if(Qn-=vt,0>Qn)vt=Math.max(0,Ye[$s].g-100),Wn=!1;else try{Ui(cr,Wt,"req"+Qn+"_")}catch{Ae&&Ae(cr)}}if(Wn){Ae=Wt.join("&");break e}}}return V=V.i.splice(0,ge),fe.D=V,Ae}function Dl(V){if(!V.g&&!V.u){V.Y=1;var fe=V.Fa;de||pe(),me||(de(),me=!0),xe.add(fe,V),V.v=0}}function Ol(V){return V.g||V.u||3<=V.v?!1:(V.Y++,V.u=es(A(V.Fa,V),el(V,V.v)),V.v++,!0)}t.Fa=function(){if(this.u=null,la(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var V=2*this.R;this.j.info("BP detection timer enabled: "+V),this.A=es(A(this.ab,this),V)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wn(10),Zo(this),la(this))};function mo(V){V.A!=null&&(g.clearTimeout(V.A),V.A=null)}function la(V){V.g=new Rr(V,V.j,"rpc",V.Y),V.m===null&&(V.g.H=V.o),V.g.O=0;var fe=Xr(V.qa);xs(fe,"RID","rpc"),xs(fe,"SID",V.K),xs(fe,"AID",V.T),xs(fe,"CI",V.F?"0":"1"),!V.F&&V.ja&&xs(fe,"TO",V.ja),xs(fe,"TYPE","xmlhttp"),Lr(V,fe),V.m&&V.o&&lr(fe,V.m,V.o),V.L&&(V.g.I=V.L);var ge=V.g;V=V.ia,ge.L=1,ge.v=oo(Xr(fe)),ge.m=null,ge.P=!0,Fi(ge,V)}t.Za=function(){this.C!=null&&(this.C=null,Zo(this),Ol(this),wn(19))};function La(V){V.C!=null&&(g.clearTimeout(V.C),V.C=null)}function Ec(V,fe){var ge=null;if(V.g==fe){La(V),mo(V),V.g=null;var Ae=2}else if(Yo(V.h,fe))ge=fe.D,mr(V.h,fe),Ae=1;else return;if(V.G!=0){if(fe.o)if(Ae==1){ge=fe.m?fe.m.length:0,fe=Date.now()-fe.F;var Ye=V.B;Ae=cs(),tt(Ae,new $n(Ae,ge)),di(V)}else Dl(V);else if(Ye=fe.s,Ye==3||Ye==0&&0<fe.X||!(Ae==1&&bu(V,fe)||Ae==2&&Ol(V)))switch(ge&&0<ge.length&&(fe=V.h,fe.i=fe.i.concat(ge)),Ye){case 1:ca(V,5);break;case 4:ca(V,10);break;case 3:ca(V,6);break;default:ca(V,2)}}}function el(V,fe){let ge=V.Ta+Math.floor(Math.random()*V.cb);return V.isActive()||(ge*=2),ge*fe}function ca(V,fe){if(V.j.info("Error code "+fe),fe==2){var ge=A(V.fb,V),Ae=V.Xa;const Ye=!Ae;Ae=new Xs(Ae||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Da(Ae,"https"),oo(Ae),Ye?co(Ae.toString(),ge):wi(Ae.toString(),ge)}else wn(2);V.G=0,V.l&&V.l.sa(fe),Rc(V),bc(V)}t.fb=function(V){V?(this.j.info("Successfully pinged google.com"),wn(2)):(this.j.info("Failed to ping google.com"),wn(1))};function Rc(V){if(V.G=0,V.ka=[],V.l){const fe=Ko(V.h);(fe.length!=0||V.i.length!=0)&&(H(V.ka,fe),H(V.ka,V.i),V.h.i.length=0,D(V.i),V.i.length=0),V.l.ra()}}function Eu(V,fe,ge){var Ae=ge instanceof Xs?Xr(ge):new Xs(ge);if(Ae.g!="")fe&&(Ae.g=fe+"."+Ae.g),Oa(Ae,Ae.s);else{var Ye=g.location;Ae=Ye.protocol,fe=fe?fe+"."+Ye.hostname:Ye.hostname,Ye=+Ye.port;var vt=new Xs(null);Ae&&Da(vt,Ae),fe&&(vt.g=fe),Ye&&Oa(vt,Ye),ge&&(vt.l=ge),Ae=vt}return ge=V.D,fe=V.ya,ge&&fe&&xs(Ae,ge,fe),xs(Ae,"VER",V.la),Lr(V,Ae),Ae}function er(V,fe,ge){if(fe&&!V.J)throw Error("Can't create secondary domain capable XhrIo object.");return fe=V.Ca&&!V.pa?new us(new ra({eb:ge})):new us(V.pa),fe.Ha(V.J),fe}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wc(){}t=wc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function tl(){}tl.prototype.g=function(V,fe){return new wr(V,fe)};function wr(V,fe){Ct.call(this),this.g=new oa(fe),this.l=V,this.h=fe&&fe.messageUrlParams||null,V=fe&&fe.messageHeaders||null,fe&&fe.clientProtocolHeaderRequired&&(V?V["X-Client-Protocol"]="webchannel":V={"X-Client-Protocol":"webchannel"}),this.g.o=V,V=fe&&fe.initMessageHeaders||null,fe&&fe.messageContentType&&(V?V["X-WebChannel-Content-Type"]=fe.messageContentType:V={"X-WebChannel-Content-Type":fe.messageContentType}),fe&&fe.va&&(V?V["X-WebChannel-Client-Profile"]=fe.va:V={"X-WebChannel-Client-Profile":fe.va}),this.g.S=V,(V=fe&&fe.Sb)&&!Y(V)&&(this.g.m=V),this.v=fe&&fe.supportsCrossDomainXhr||!1,this.u=fe&&fe.sendRawJson||!1,(fe=fe&&fe.httpSessionIdParam)&&!Y(fe)&&(this.g.D=fe,V=this.h,V!==null&&fe in V&&(V=this.h,fe in V&&delete V[fe])),this.j=new hi(this)}j(wr,Ct),wr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wr.prototype.close=function(){fo(this.g)},wr.prototype.o=function(V){var fe=this.g;if(typeof V=="string"){var ge={};ge.__data__=V,V=ge}else this.u&&(ge={},ge.__data__=Pn(V),V=ge);fe.i.push(new Bs(fe.Ya++,V)),fe.G==3&&di(fe)},wr.prototype.N=function(){this.g.l=null,delete this.j,fo(this.g),delete this.g,wr.aa.N.call(this)};function Sc(V){On.call(this),V.__headers__&&(this.headers=V.__headers__,this.statusCode=V.__status__,delete V.__headers__,delete V.__status__);var fe=V.__sm__;if(fe){e:{for(const ge in fe){V=ge;break e}V=void 0}(this.i=V)&&(V=this.i,fe=fe!==null&&V in fe?fe[V]:void 0),this.data=fe}else this.data=V}j(Sc,On);function Tc(){vn.call(this),this.status=1}j(Tc,vn);function hi(V){this.g=V}j(hi,wc),hi.prototype.ua=function(){tt(this.g,"a")},hi.prototype.ta=function(V){tt(this.g,new Sc(V))},hi.prototype.sa=function(V){tt(this.g,new Tc)},hi.prototype.ra=function(){tt(this.g,"b")},tl.prototype.createWebChannel=tl.prototype.g,wr.prototype.send=wr.prototype.o,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,createWebChannelTransport=function(){return new tl},getStatEventTarget=function(){return cs()},Event$1=Ln,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ji.NO_ERROR=0,Ji.TIMEOUT=8,Ji.HTTP_ERROR=6,ErrorCode=Ji,li.COMPLETE="complete",EventType=li,Zs.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,WebChannel=Zs,us.prototype.listenOnce=us.prototype.L,us.prototype.getLastError=us.prototype.Ka,us.prototype.getLastErrorCode=us.prototype.Ba,us.prototype.getStatus=us.prototype.Z,us.prototype.getResponseJson=us.prototype.Oa,us.prototype.getResponseText=us.prototype.oa,us.prototype.send=us.prototype.ea,us.prototype.setWithCredentials=us.prototype.Ha,XhrIo=us}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F="@firebase/firestore",M="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let User$1=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};User$1.UNAUTHENTICATED=new User$1(null),User$1.GOOGLE_CREDENTIALS=new User$1("google-credentials-uid"),User$1.FIRST_PARTY=new User$1("first-party-uid"),User$1.MOCK_USER=new User$1("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$1="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O.logLevel}function __PRIVATE_logDebug(t,...e){if(O.logLevel<=LogLevel.DEBUG){const n=e.map(__PRIVATE_argToString);O.debug(`Firestore (${x$1}): ${t}`,...n)}}function __PRIVATE_logError(t,...e){if(O.logLevel<=LogLevel.ERROR){const n=e.map(__PRIVATE_argToString);O.error(`Firestore (${x$1}): ${t}`,...n)}}function __PRIVATE_logWarn(t,...e){if(O.logLevel<=LogLevel.WARN){const n=e.map(__PRIVATE_argToString);O.warn(`Firestore (${x$1}): ${t}`,...n)}}function __PRIVATE_argToString(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,__PRIVATE__fail(t,s,n)}function __PRIVATE__fail(t,e,n){let s=`FIRESTORE (${x$1}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw __PRIVATE_logError(s),new Error(s)}function __PRIVATE_hardAssert(t,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,t||__PRIVATE__fail(e,o,s)}function __PRIVATE_debugCast(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(User$1.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User$1.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){__PRIVATE_hardAssert(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let u=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new __PRIVATE_Deferred,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},g=y=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new __PRIVATE_Deferred)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(__PRIVATE_hardAssert(typeof s.accessToken=="string",31837,{l:s}),new __PRIVATE_OAuthToken(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User$1(e)}}class __PRIVATE_FirstPartyToken{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=User$1.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(User$1.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){__PRIVATE_hardAssert(this.o===void 0,3512);const s=u=>{u.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(__PRIVATE_hardAssert(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new AppCheckToken(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=__PRIVATE_randomBytes(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function __PRIVATE_primitiveComparator(t,e){return t<e?-1:t>e?1:0}function __PRIVATE_compareUtf8Strings(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return __PRIVATE_primitiveComparator(s,o);{const u=__PRIVATE_newTextEncoder(),d=__PRIVATE_compareByteArrays$1(u.encode(__PRIVATE_getUtf8SafeSubstring(t,n)),u.encode(__PRIVATE_getUtf8SafeSubstring(e,n)));return d!==0?d:__PRIVATE_primitiveComparator(s,o)}}n+=s>65535?2:1}return __PRIVATE_primitiveComparator(t.length,e.length)}function __PRIVATE_getUtf8SafeSubstring(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function __PRIVATE_compareByteArrays$1(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return __PRIVATE_primitiveComparator(t[n],e[n]);return __PRIVATE_primitiveComparator(t.length,e.length)}function __PRIVATE_arrayEquals(t,e,n){return t.length===e.length&&t.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=-62135596800,L=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*L);return new Timestamp(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<B)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-B;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k="__name__";class BasePath{constructor(e,n,s){n===void 0?n=0:n>e.length&&fail(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&fail(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=BasePath.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return __PRIVATE_primitiveComparator(e.length,n.length)}static compareSegments(e,n){const s=BasePath.isNumericId(e),o=BasePath.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(n)):__PRIVATE_compareUtf8Strings(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,n,s){return new ResourcePath(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ResourcePath(n)}static emptyPath(){return new ResourcePath([])}}const q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,n,s){return new FieldPath$1(e,n,s)}static isValidIdentifier(e){return q.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k}static keyField(){return new FieldPath$1([k])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new FirestoreError(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new FirestoreError(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(s+=g,o++):(u(),o++)}if(u(),d)throw new FirestoreError(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(n)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ResourcePath.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,o=SnapshotVersion.fromTimestamp(s===1e9?new Timestamp(n+1,0):new Timestamp(n,s));return new IndexOffset(o,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(t){return new IndexOffset(t.readTime,t.key,Q)}class IndexOffset{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),Q)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),Q)}}function __PRIVATE_indexOffsetComparator(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=DocumentKey.comparator(t.documentKey,e.documentKey),n!==0?n:__PRIVATE_primitiveComparator(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==$)throw t;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof PersistencePromise?n:PersistencePromise.resolve(n)}catch(n){return PersistencePromise.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):PersistencePromise.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):PersistencePromise.reject(n)}static resolve(e){return new PersistencePromise((n,s)=>{n(e)})}static reject(e){return new PersistencePromise((n,s)=>{s(e)})}static waitFor(e){return new PersistencePromise((n,s)=>{let o=0,u=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++u,d&&u===o&&n()},y=>s(y))}),d=!0,u===o&&n()})}static or(e){let n=PersistencePromise.resolve(!1);for(const s of e)n=n.next(o=>o?PersistencePromise.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new PersistencePromise((s,o)=>{const u=e.length,d=new Array(u);let g=0;for(let y=0;y<u;y++){const v=y;n(e[v]).next(w=>{d[v]=w,++g,g===u&&s(d)},w=>o(w))}})}static doWhile(e,n){return new PersistencePromise((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function __PRIVATE_getAndroidVersion(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function __PRIVATE_isIndexedDbTransactionError(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}__PRIVATE_ListenSequence.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G=-1;function __PRIVATE_isNullOrUndefined(t){return t==null}function __PRIVATE_isNegativeZero(t){return t===0&&1/t==-1/0}function isSafeInteger(t){return typeof t=="number"&&Number.isInteger(t)&&!__PRIVATE_isNegativeZero(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z="";function __PRIVATE_encodeResourcePath(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(t.get(n),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(t,e){let n=e;const s=t.length;for(let o=0;o<s;o++){const u=t.charAt(o);switch(u){case"\0":n+="";break;case z:n+="";break;default:n+=u}}return n}function __PRIVATE_encodeSeparator(t){return t+z+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function forEach(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function isEmpty(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,n){this.comparator=e,this.root=n||LLRBNode.EMPTY}insert(e,n){return new SortedMap(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??LLRBNode.RED,this.left=o??LLRBNode.EMPTY,this.right=u??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new LLRBNode(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return LLRBNode.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new LLRBNode(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new SortedSet(this.comparator);return n.data=e,n}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let n=new SortedSet(FieldPath$1.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new FieldMask(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+u):u}}(e);return new ByteString(n)}static fromUint8Array(e){const n=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new ByteString(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const it=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(t){if(__PRIVATE_hardAssert(!!t,39018),typeof t=="string"){let e=0;const n=it.exec(t);if(__PRIVATE_hardAssert(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(t.seconds),nanos:__PRIVATE_normalizeNumber(t.nanos)}}function __PRIVATE_normalizeNumber(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function __PRIVATE_normalizeByteString(t){return typeof t=="string"?ByteString.fromBase64String(t):ByteString.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="server_timestamp",ot="__type__",_t="__previous_value__",at="__local_write_time__";function __PRIVATE_isServerTimestamp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ot])===null||n===void 0?void 0:n.stringValue)===st}function __PRIVATE_getPreviousValue(t){const e=t.mapValue.fields[_t];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(t){const e=__PRIVATE_normalizeTimestamp(t.mapValue.fields[at].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,n,s,o,u,d,g,y,v,w){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=w}}const ut="(default)";class DatabaseId{constructor(e,n){this.projectId=e,this.database=n||ut}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===ut}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="__type__",lt="__max__",ht={mapValue:{}},Pt="__vector__",Tt="value";function __PRIVATE_typeOrder(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?__PRIVATE_isServerTimestamp(t)?4:__PRIVATE_isMaxValue(t)?9007199254740991:__PRIVATE_isVectorValue(t)?10:11:fail(28295,{value:t})}function __PRIVATE_valueEquals(t,e){if(t===e)return!0;const n=__PRIVATE_typeOrder(t);if(n!==__PRIVATE_typeOrder(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(t).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=__PRIVATE_normalizeTimestamp(o.timestampValue),g=__PRIVATE_normalizeTimestamp(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,u){return __PRIVATE_normalizeByteString(o.bytesValue).isEqual(__PRIVATE_normalizeByteString(u.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,u){return __PRIVATE_normalizeNumber(o.geoPointValue.latitude)===__PRIVATE_normalizeNumber(u.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(o.geoPointValue.longitude)===__PRIVATE_normalizeNumber(u.geoPointValue.longitude)}(t,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return __PRIVATE_normalizeNumber(o.integerValue)===__PRIVATE_normalizeNumber(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=__PRIVATE_normalizeNumber(o.doubleValue),g=__PRIVATE_normalizeNumber(u.doubleValue);return d===g?__PRIVATE_isNegativeZero(d)===__PRIVATE_isNegativeZero(g):isNaN(d)&&isNaN(g)}return!1}(t,e);case 9:return __PRIVATE_arrayEquals(t.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(__PRIVATE_objectSize(d)!==__PRIVATE_objectSize(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!__PRIVATE_valueEquals(d[y],g[y])))return!1;return!0}(t,e);default:return fail(52216,{left:t})}}function __PRIVATE_arrayValueContains(t,e){return(t.values||[]).find(n=>__PRIVATE_valueEquals(n,e))!==void 0}function __PRIVATE_valueCompare(t,e){if(t===e)return 0;const n=__PRIVATE_typeOrder(t),s=__PRIVATE_typeOrder(e);if(n!==s)return __PRIVATE_primitiveComparator(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(t.booleanValue,e.booleanValue);case 2:return function(u,d){const g=__PRIVATE_normalizeNumber(u.integerValue||u.doubleValue),y=__PRIVATE_normalizeNumber(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1}(t,e);case 3:return __PRIVATE_compareTimestamps(t.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(t),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(t.stringValue,e.stringValue);case 6:return function(u,d){const g=__PRIVATE_normalizeByteString(u),y=__PRIVATE_normalizeByteString(d);return g.compareTo(y)}(t.bytesValue,e.bytesValue);case 7:return function(u,d){const g=u.split("/"),y=d.split("/");for(let v=0;v<g.length&&v<y.length;v++){const w=__PRIVATE_primitiveComparator(g[v],y[v]);if(w!==0)return w}return __PRIVATE_primitiveComparator(g.length,y.length)}(t.referenceValue,e.referenceValue);case 8:return function(u,d){const g=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(u.latitude),__PRIVATE_normalizeNumber(d.latitude));return g!==0?g:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(u.longitude),__PRIVATE_normalizeNumber(d.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(t.arrayValue,e.arrayValue);case 10:return function(u,d){var g,y,v,w;const T=u.fields||{},A=d.fields||{},C=(g=T[Tt])===null||g===void 0?void 0:g.arrayValue,j=(y=A[Tt])===null||y===void 0?void 0:y.arrayValue,D=__PRIVATE_primitiveComparator(((v=C==null?void 0:C.values)===null||v===void 0?void 0:v.length)||0,((w=j==null?void 0:j.values)===null||w===void 0?void 0:w.length)||0);return D!==0?D:__PRIVATE_compareArrays(C,j)}(t.mapValue,e.mapValue);case 11:return function(u,d){if(u===ht.mapValue&&d===ht.mapValue)return 0;if(u===ht.mapValue)return 1;if(d===ht.mapValue)return-1;const g=u.fields||{},y=Object.keys(g),v=d.fields||{},w=Object.keys(v);y.sort(),w.sort();for(let T=0;T<y.length&&T<w.length;++T){const A=__PRIVATE_compareUtf8Strings(y[T],w[T]);if(A!==0)return A;const C=__PRIVATE_valueCompare(g[y[T]],v[w[T]]);if(C!==0)return C}return __PRIVATE_primitiveComparator(y.length,w.length)}(t.mapValue,e.mapValue);default:throw fail(23264,{Pe:n})}}function __PRIVATE_compareTimestamps(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return __PRIVATE_primitiveComparator(t,e);const n=__PRIVATE_normalizeTimestamp(t),s=__PRIVATE_normalizeTimestamp(e),o=__PRIVATE_primitiveComparator(n.seconds,s.seconds);return o!==0?o:__PRIVATE_primitiveComparator(n.nanos,s.nanos)}function __PRIVATE_compareArrays(t,e){const n=t.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=__PRIVATE_valueCompare(n[o],s[o]);if(u)return u}return __PRIVATE_primitiveComparator(n.length,s.length)}function canonicalId(t){return __PRIVATE_canonifyValue(t)}function __PRIVATE_canonifyValue(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=__PRIVATE_normalizeTimestamp(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return __PRIVATE_normalizeByteString(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return DocumentKey.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=__PRIVATE_canonifyValue(u);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${__PRIVATE_canonifyValue(n.fields[d])}`;return o+"}"}(t.mapValue):fail(61005,{value:t})}function __PRIVATE_estimateByteSize(t){switch(__PRIVATE_typeOrder(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(t);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*t.stringValue.length;case 6:return __PRIVATE_normalizeByteString(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+__PRIVATE_estimateByteSize(u),0)}(t.arrayValue);case 10:case 11:return function(s){let o=0;return forEach(s.fields,(u,d)=>{o+=u.length+__PRIVATE_estimateByteSize(d)}),o}(t.mapValue);default:throw fail(13486,{value:t})}}function __PRIVATE_refValue(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function isInteger$1(t){return!!t&&"integerValue"in t}function isArray$1(t){return!!t&&"arrayValue"in t}function __PRIVATE_isNullValue(t){return!!t&&"nullValue"in t}function __PRIVATE_isNanValue(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function __PRIVATE_isMapValue(t){return!!t&&"mapValue"in t}function __PRIVATE_isVectorValue(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ct])===null||n===void 0?void 0:n.stringValue)===Pt}function __PRIVATE_deepClone(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return forEach(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=__PRIVATE_deepClone(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=__PRIVATE_deepClone(t.arrayValue.values[n]);return e}return Object.assign({},t)}function __PRIVATE_isMaxValue(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!__PRIVATE_isMapValue(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(n)}setAll(e){let n=FieldPath$1.emptyPath(),s={},o=[];e.forEach((d,g)=>{if(!n.isImmediateParentOf(g)){const y=this.getFieldsMap(n);this.applyChanges(y,s,o),s={},o=[],n=g.popLast()}d?s[g.lastSegment()]=__PRIVATE_deepClone(d):o.push(g.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());__PRIVATE_isMapValue(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];__PRIVATE_isMapValue(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){forEach(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(t){const e=[];return forEach(t.fields,(n,s)=>{const o=new FieldPath$1([n]);if(__PRIVATE_isMapValue(s)){const u=__PRIVATE_extractFieldMask(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,n,s,o,u,d,g){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,n,s,o){return new MutableDocument(e,1,n,SnapshotVersion.min(),s,o,0)}static newNoDocument(e,n){return new MutableDocument(e,2,n,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,n){return new MutableDocument(e,3,n,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,n){this.position=e,this.inclusive=n}}function __PRIVATE_boundCompareToDocument(t,e,n){let s=0;for(let o=0;o<t.position.length;o++){const u=e[o],d=t.position[o];if(u.field.isKeyField()?s=DocumentKey.comparator(DocumentKey.fromName(d.referenceValue),n.key):s=__PRIVATE_valueCompare(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function __PRIVATE_boundEquals(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!__PRIVATE_valueEquals(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,n="asc"){this.field=e,this.dir=n}}function __PRIVATE_orderByEquals(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new __PRIVATE_KeyFieldFilter(e,n,s):n==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,s):n==="in"?new __PRIVATE_InFilter(e,s):n==="not-in"?new __PRIVATE_NotInFilter(e,s):n==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,s):new FieldFilter(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new __PRIVATE_KeyFieldInFilter(e,s):new __PRIVATE_KeyFieldNotInFilter(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(n,this.value)):n!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(n)&&this.matchesComparison(__PRIVATE_valueCompare(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new CompositeFilter(e,n)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(t){return t.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(t){return __PRIVATE_compositeFilterIsFlat(t)&&__PRIVATE_compositeFilterIsConjunction(t)}function __PRIVATE_compositeFilterIsFlat(t){for(const e of t.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(t){if(t instanceof FieldFilter)return t.field.canonicalString()+t.op.toString()+canonicalId(t.value);if(__PRIVATE_compositeFilterIsFlatConjunction(t))return t.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=t.filters.map(n=>__PRIVATE_canonifyFilter(n)).join(",");return`${t.op}(${e})`}}function __PRIVATE_filterEquals(t,e){return t instanceof FieldFilter?function(s,o){return o instanceof FieldFilter&&s.op===o.op&&s.field.isEqual(o.field)&&__PRIVATE_valueEquals(s.value,o.value)}(t,e):t instanceof CompositeFilter?function(s,o){return o instanceof CompositeFilter&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,d,g)=>u&&__PRIVATE_filterEquals(d,o.filters[g]),!0):!1}(t,e):void fail(19439)}function __PRIVATE_stringifyFilter(t){return t instanceof FieldFilter?function(n){return`${n.field.canonicalString()} ${n.op} ${canonicalId(n.value)}`}(t):t instanceof CompositeFilter?function(n){return n.op.toString()+" {"+n.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(t):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,n,s){super(e,n,s),this.key=DocumentKey.fromName(s.referenceValue)}matches(e){const n=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(n)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,n){super(e,"in",n),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,n){super(e,"not-in",n),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>DocumentKey.fromName(s.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return isArray$1(n)&&__PRIVATE_arrayValueContains(n.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,n)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,n){super(e,"not-in",n)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,n)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!isArray$1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>__PRIVATE_arrayValueContains(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,n=null,s=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.Ie=null}}function __PRIVATE_newTarget(t,e=null,n=[],s=[],o=null,u=null,d=null){return new __PRIVATE_TargetImpl(t,e,n,s,o,u,d)}function __PRIVATE_canonifyTarget(t){const e=__PRIVATE_debugCast(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>__PRIVATE_canonifyFilter(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>canonicalId(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>canonicalId(s)).join(",")),e.Ie=n}return e.Ie}function __PRIVATE_targetEquals(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!__PRIVATE_orderByEquals(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!__PRIVATE_filterEquals(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(t.startAt,e.startAt)&&__PRIVATE_boundEquals(t.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(t){return DocumentKey.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,n=null,s=[],o=[],u=null,d="F",g=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(t,e,n,s,o,u,d,g){return new __PRIVATE_QueryImpl(t,e,n,s,o,u,d,g)}function __PRIVATE_newQueryForPath(t){return new __PRIVATE_QueryImpl(t)}function __PRIVATE_queryMatchesAllDocuments(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(t){return t.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(t){const e=__PRIVATE_debugCast(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new SortedSet(FieldPath$1.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(v=>{v.isInequality()&&(g=g.add(v.field))})}),g})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new OrderBy(u,s))}),n.has(FieldPath$1.keyField().canonicalString())||e.Ee.push(new OrderBy(FieldPath$1.keyField(),s))}return e.Ee}function __PRIVATE_queryToTarget(t){const e=__PRIVATE_debugCast(t);return e.de||(e.de=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(t))),e.de}function __PRIVATE__queryToTarget(t,e){if(t.limitType==="F")return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new OrderBy(o.field,u)});const n=t.endAt?new Bound(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Bound(t.startAt.position,t.startAt.inclusive):null;return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function __PRIVATE_queryWithAddedFilter(t,e){const n=t.filters.concat([e]);return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function __PRIVATE_queryWithLimit(t,e,n){return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function __PRIVATE_queryEquals(t,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(t),__PRIVATE_queryToTarget(e))&&t.limitType===e.limitType}function __PRIVATE_canonifyQuery(t){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(t))}|lt:${t.limitType}`}function __PRIVATE_stringifyQuery(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>__PRIVATE_stringifyFilter(o)).join(", ")}]`),__PRIVATE_isNullOrUndefined(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>canonicalId(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>canonicalId(o)).join(",")),`Target(${s})`}(__PRIVATE_queryToTarget(t))}; limitType=${t.limitType})`}function __PRIVATE_queryMatches(t,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):DocumentKey.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(t,e)&&function(s,o){for(const u of __PRIVATE_queryNormalizedOrderBy(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(t,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(t,e)&&function(s,o){return!(s.startAt&&!function(d,g,y){const v=__PRIVATE_boundCompareToDocument(d,g,y);return d.inclusive?v<=0:v<0}(s.startAt,__PRIVATE_queryNormalizedOrderBy(s),o)||s.endAt&&!function(d,g,y){const v=__PRIVATE_boundCompareToDocument(d,g,y);return d.inclusive?v>=0:v>0}(s.endAt,__PRIVATE_queryNormalizedOrderBy(s),o))}(t,e)}function __PRIVATE_queryCollectionGroup(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function __PRIVATE_newQueryComparator(t){return(e,n)=>{let s=!1;for(const o of __PRIVATE_queryNormalizedOrderBy(t)){const u=__PRIVATE_compareDocs(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(t,e,n){const s=t.field.isKeyField()?DocumentKey.comparator(e.key,n.key):function(u,d,g){const y=d.data.field(u),v=g.data.field(u);return y!==null&&v!==null?__PRIVATE_valueCompare(y,v):fail(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return fail(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return dt}const At=new SortedMap(DocumentKey.comparator);function documentMap(...t){let e=At;for(const n of t)e=e.insert(n.key,n);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(t){let e=At;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(t=>t.toString(),(t,e)=>t.isEqual(e))}const Rt=new SortedMap(DocumentKey.comparator),Vt=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...t){let e=Vt;for(const n of t)e=e.add(n);return e}const mt=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return mt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(t){return{integerValue:""+t}}function toNumber(t,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(t,e,n){return t instanceof __PRIVATE_ServerTimestampTransform?function(o,u){const d={fields:{[ot]:{stringValue:st},[at]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&__PRIVATE_isServerTimestamp(u)&&(u=__PRIVATE_getPreviousValue(u)),u&&(d.fields[_t]=u),{mapValue:d}}(n,e):t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):function(o,u){const d=__PRIVATE_computeTransformOperationBaseValue(o,u),g=asNumber$1(d)+asNumber$1(o.Re);return isInteger$1(d)&&isInteger$1(o.Re)?__PRIVATE_toInteger(g):__PRIVATE_toDouble(o.serializer,g)}(t,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(t,e,n){return t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):n}function __PRIVATE_computeTransformOperationBaseValue(t,e){return t instanceof __PRIVATE_NumericIncrementTransformOperation?function(s){return isInteger$1(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(t,e){const n=__PRIVATE_coercedFieldValuesArray(e);for(const s of t.elements)n.some(o=>__PRIVATE_valueEquals(o,s))||n.push(s);return{arrayValue:{values:n}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(t,e){let n=__PRIVATE_coercedFieldValuesArray(e);for(const s of t.elements)n=n.filter(o=>!__PRIVATE_valueEquals(o,s));return{arrayValue:{values:n}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,n){super(),this.serializer=e,this.Re=n}}function asNumber$1(t){return __PRIVATE_normalizeNumber(t.integerValue||t.doubleValue)}function __PRIVATE_coercedFieldValuesArray(t){return isArray$1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldTransform{constructor(e,n){this.field=e,this.transform=n}}function __PRIVATE_fieldTransformEquals(t,e){return t.field.isEqual(e.field)&&function(s,o){return s instanceof __PRIVATE_ArrayUnionTransformOperation&&o instanceof __PRIVATE_ArrayUnionTransformOperation||s instanceof __PRIVATE_ArrayRemoveTransformOperation&&o instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(s.elements,o.elements,__PRIVATE_valueEquals):s instanceof __PRIVATE_NumericIncrementTransformOperation&&o instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(s.Re,o.Re):s instanceof __PRIVATE_ServerTimestampTransform&&o instanceof __PRIVATE_ServerTimestampTransform}(t.transform,e.transform)}class MutationResult{constructor(e,n){this.version=e,this.transformResults=n}}class Precondition{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new __PRIVATE_DeleteMutation(t.key,Precondition.none()):new __PRIVATE_SetMutation(t.key,t.data,Precondition.none());{const n=t.data,s=ObjectValue.empty();let o=new SortedSet(FieldPath$1.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new __PRIVATE_PatchMutation(t.key,s,new FieldMask(o.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(t,e,n){t instanceof __PRIVATE_SetMutation?function(o,u,d){const g=o.value.clone(),y=__PRIVATE_serverTransformResults(o.fieldTransforms,u,d.transformResults);g.setAll(y),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(t,e,n):t instanceof __PRIVATE_PatchMutation?function(o,u,d){if(!__PRIVATE_preconditionIsValidForDocument(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=__PRIVATE_serverTransformResults(o.fieldTransforms,u,d.transformResults),y=u.data;y.setAll(__PRIVATE_getPatch(o)),y.setAll(g),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(t,e,n):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function __PRIVATE_mutationApplyToLocalView(t,e,n,s){return t instanceof __PRIVATE_SetMutation?function(u,d,g,y){if(!__PRIVATE_preconditionIsValidForDocument(u.precondition,d))return g;const v=u.value.clone(),w=__PRIVATE_localTransformResults(u.fieldTransforms,y,d);return v.setAll(w),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(t,e,n,s):t instanceof __PRIVATE_PatchMutation?function(u,d,g,y){if(!__PRIVATE_preconditionIsValidForDocument(u.precondition,d))return g;const v=__PRIVATE_localTransformResults(u.fieldTransforms,y,d),w=d.data;return w.setAll(__PRIVATE_getPatch(u)),w.setAll(v),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(T=>T.field))}(t,e,n,s):function(u,d,g){return __PRIVATE_preconditionIsValidForDocument(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(t,e,n)}function __PRIVATE_mutationExtractBaseValue(t,e){let n=null;for(const s of t.fieldTransforms){const o=e.data.field(s.field),u=__PRIVATE_computeTransformOperationBaseValue(s.transform,o||null);u!=null&&(n===null&&(n=ObjectValue.empty()),n.set(s.field,u))}return n||null}function __PRIVATE_mutationEquals(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&__PRIVATE_arrayEquals(s,o,(u,d)=>__PRIVATE_fieldTransformEquals(u,d))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function __PRIVATE_serverTransformResults(t,e,n){const s=new Map;__PRIVATE_hardAssert(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let o=0;o<n.length;o++){const u=t[o],d=u.transform,g=e.data.field(u.field);s.set(u.field,__PRIVATE_applyTransformOperationToRemoteDocument(d,g,n[o]))}return s}function __PRIVATE_localTransformResults(t,e,n){const s=new Map;for(const o of t){const u=o.transform,d=n.data.field(o.field);s.set(o.field,__PRIVATE_applyTransformOperationToLocalView(u,d,e))}return s}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=__PRIVATE_mutationApplyToLocalView(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=__PRIVATE_mutationApplyToLocalView(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=__PRIVATE_newMutationMap();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=n.has(o.key)?null:g;const y=__PRIVATE_calculateOverlayMutation(d,g);y!==null&&s.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(SnapshotVersion.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(n,s)=>__PRIVATE_mutationEquals(n,s))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(n,s)=>__PRIVATE_mutationEquals(n,s))}}class MutationBatchResult{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){__PRIVATE_hardAssert(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return Rt}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new MutationBatchResult(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,gt;function __PRIVATE_isPermanentError(t){switch(t){case N.OK:return fail(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return fail(15467,{code:t})}}function __PRIVATE_mapCodeFromRpcCode(t){if(t===void 0)return __PRIVATE_logError("GRPC error has no .code"),N.UNKNOWN;switch(t){case ft.OK:return N.OK;case ft.CANCELLED:return N.CANCELLED;case ft.UNKNOWN:return N.UNKNOWN;case ft.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ft.INTERNAL:return N.INTERNAL;case ft.UNAVAILABLE:return N.UNAVAILABLE;case ft.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ft.NOT_FOUND:return N.NOT_FOUND;case ft.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ft.ABORTED:return N.ABORTED;case ft.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ft.DATA_LOSS:return N.DATA_LOSS;default:return fail(39323,{code:t})}}(gt=ft||(ft={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(t){const e=__PRIVATE_newTextEncoder().encode(t),n=new Md5;return n.update(e),new Uint8Array(n.digest())}function __PRIVATE_get64BitUints(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Integer([n,s],0),new Integer([o,u],0)]}class BloomFilter{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${n}`);if(s<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Integer.fromNumber(this.pe)}we(e,n,s){let o=e.add(n.multiply(Integer.fromNumber(s)));return o.compare(yt)===1&&(o=new Integer([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=__PRIVATE_getMd5HashValue(e),[s,o]=__PRIVATE_get64BitUints(n);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);if(!this.be(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new BloomFilter(u,o,n);return s.forEach(g=>d.insert(g)),d}insert(e){if(this.pe===0)return;const n=__PRIVATE_getMd5HashValue(e),[s,o]=__PRIVATE_get64BitUints(n);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new RemoteEvent(SnapshotVersion.min(),o,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new TargetChange(s,n,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,n,s,o){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=o}}class __PRIVATE_ExistenceFilterChange{constructor(e,n){this.targetId=e,this.Ce=n}}class __PRIVATE_WatchTargetChange{constructor(e,n,s=ByteString.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class __PRIVATE_TargetState{constructor(){this.Fe=0,this.Me=__PRIVATE_snapshotChangesMap(),this.xe=ByteString.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=__PRIVATE_documentKeySet(),n=__PRIVATE_documentKeySet(),s=__PRIVATE_documentKeySet();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:fail(38017,{changeType:u})}}),new TargetChange(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=__PRIVATE_snapshotChangesMap()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,__PRIVATE_hardAssert(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.ze=e,this.je=new Map,this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:fail(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,s=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(__PRIVATE_targetIsDocumentTarget(u))if(s===0){const d=new DocumentKey(u.path);this.tt(n,d,MutableDocument.newNoDocument(d,SnapshotVersion.min()))}else __PRIVATE_hardAssert(s===1,20013,{expectedCount:s});else{const d=this.ut(n);if(d!==s){const g=this.ct(e),y=g?this.lt(g,e,d):1;if(y!==0){this.st(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,v)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,g;try{d=__PRIVATE_normalizeByteString(s).toUint8Array()}catch(y){if(y instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new BloomFilter(d,o,u)}catch(y){return __PRIVATE_logWarn(y instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.pe===0?null:g}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const d=this.ze.Pt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,d)=>{const g=this._t(d);if(g){if(u.current&&__PRIVATE_targetIsDocumentTarget(g.target)){const y=new DocumentKey(g.target.path);this.Et(y).has(d)||this.dt(d,y)||this.tt(d,y,MutableDocument.newNoDocument(y,e))}u.Le&&(n.set(d,u.qe()),u.Qe())}});let s=__PRIVATE_documentKeySet();this.Ye.forEach((u,d)=>{let g=!0;d.forEachWhile(y=>{const v=this._t(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(u))}),this.He.forEach((u,d)=>d.setReadTime(e));const o=new RemoteEvent(e,n,this.Ze,this.He,s);return this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator),o}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new __PRIVATE_TargetState,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new SortedSet(__PRIVATE_primitiveComparator),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new __PRIVATE_TargetState),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const wt={asc:"ASCENDING",desc:"DESCENDING"},bt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},St={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function __PRIVATE_toInt32Proto(t,e){return t.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(t,e){return toTimestamp(t,e.toTimestamp())}function __PRIVATE_fromVersion(t){return __PRIVATE_hardAssert(!!t,49232),SnapshotVersion.fromTimestamp(function(n){const s=__PRIVATE_normalizeTimestamp(n);return new Timestamp(s.seconds,s.nanos)}(t))}function __PRIVATE_toResourceName(t,e){return __PRIVATE_toResourcePath(t,e).canonicalString()}function __PRIVATE_toResourcePath(t,e){const n=function(o){return new ResourcePath(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function __PRIVATE_fromResourceName(t){const e=ResourcePath.fromString(t);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(t,e){return __PRIVATE_toResourceName(t.databaseId,e.path)}function fromName(t,e){const n=__PRIVATE_fromResourceName(e);if(n.get(1)!==t.databaseId.projectId)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(n))}function __PRIVATE_toQueryPath(t,e){return __PRIVATE_toResourceName(t.databaseId,e)}function __PRIVATE_fromQueryPath(t){const e=__PRIVATE_fromResourceName(t);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(t){return new ResourcePath(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(t){return __PRIVATE_hardAssert(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function __PRIVATE_toMutationDocument(t,e,n){return{name:__PRIVATE_toName(t,e),fields:n.value.mapValue.fields}}function __PRIVATE_fromWatchChange(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:fail(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(v,w){return v.useProto3Json?(__PRIVATE_hardAssert(w===void 0||typeof w=="string",58123),ByteString.fromBase64String(w||"")):(__PRIVATE_hardAssert(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),ByteString.fromUint8Array(w||new Uint8Array))}(t,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(v){const w=v.code===void 0?N.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(v.code);return new FirestoreError(w,v.message||"")}(d);n=new __PRIVATE_WatchTargetChange(s,o,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=fromName(t,s.document.name),u=__PRIVATE_fromVersion(s.document.updateTime),d=s.document.createTime?__PRIVATE_fromVersion(s.document.createTime):SnapshotVersion.min(),g=new ObjectValue({mapValue:{fields:s.document.fields}}),y=MutableDocument.newFoundDocument(o,u,d,g),v=s.targetIds||[],w=s.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange(v,w,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=fromName(t,s.document),u=s.readTime?__PRIVATE_fromVersion(s.readTime):SnapshotVersion.min(),d=MutableDocument.newNoDocument(o,u),g=s.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=fromName(t,s.document),u=s.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange([],u,o,null)}else{if(!("filter"in e))return fail(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new ExistenceFilter(o,u),g=s.targetId;n=new __PRIVATE_ExistenceFilterChange(g,d)}}return n}function toMutation(t,e){let n;if(e instanceof __PRIVATE_SetMutation)n={update:__PRIVATE_toMutationDocument(t,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)n={delete:__PRIVATE_toName(t,e.key)};else if(e instanceof __PRIVATE_PatchMutation)n={update:__PRIVATE_toMutationDocument(t,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{ft:e.type});n={verify:__PRIVATE_toName(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,d){const g=d.transform;if(g instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:d.field.canonicalString(),increment:g.Re};throw fail(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:fail(27497)}(t,e.precondition)),n}function __PRIVATE_fromWriteResults(t,e){return t&&t.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),t.map(n=>function(o,u){let d=o.updateTime?__PRIVATE_fromVersion(o.updateTime):__PRIVATE_fromVersion(u);return d.isEqual(SnapshotVersion.min())&&(d=__PRIVATE_fromVersion(u)),new MutationResult(d,o.transformResults||[])}(n,e))):[]}function __PRIVATE_toDocumentsTarget(t,e){return{documents:[__PRIVATE_toQueryPath(t,e.path)]}}function __PRIVATE_toQueryTarget(t,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=__PRIVATE_toQueryPath(t,o);const u=function(v){if(v.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(v,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const d=function(v){if(v.length!==0)return v.map(w=>function(A){return{field:__PRIVATE_toFieldPathReference(A.field),direction:__PRIVATE_toDirection(A.dir)}}(w))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=__PRIVATE_toInt32Proto(t,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:n,parent:o}}function __PRIVATE_convertQueryTargetToQuery(t){let e=__PRIVATE_fromQueryPath(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){__PRIVATE_hardAssert(s===1,65062);const w=n.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let u=[];n.where&&(u=function(T){const A=__PRIVATE_fromFilter(T);return A instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(A)?A.getFilters():[A]}(n.where));let d=[];n.orderBy&&(d=function(T){return T.map(A=>function(j){return new OrderBy(__PRIVATE_fromFieldPathReference(j.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(A))}(n.orderBy));let g=null;n.limit&&(g=function(T){let A;return A=typeof T=="object"?T.value:T,__PRIVATE_isNullOrUndefined(A)?null:A}(n.limit));let y=null;n.startAt&&(y=function(T){const A=!!T.before,C=T.values||[];return new Bound(C,A)}(n.startAt));let v=null;return n.endAt&&(v=function(T){const A=!T.before,C=T.values||[];return new Bound(C,A)}(n.endAt)),__PRIVATE_newQuery(e,o,d,u,g,"F",y,v)}function __PRIVATE_toListenRequestLabels(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function __PRIVATE_fromFilter(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(t):t.fieldFilter!==void 0?function(n){return FieldFilter.create(__PRIVATE_fromFieldPathReference(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return CompositeFilter.create(n.compositeFilter.filters.map(s=>__PRIVATE_fromFilter(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(n.compositeFilter.op))}(t):fail(30097,{filter:t})}function __PRIVATE_toDirection(t){return wt[t]}function __PRIVATE_toOperatorName(t){return bt[t]}function __PRIVATE_toCompositeOperatorName(t){return St[t]}function __PRIVATE_toFieldPathReference(t){return{fieldPath:t.canonicalString()}}function __PRIVATE_fromFieldPathReference(t){return FieldPath$1.fromServerFormat(t.fieldPath)}function __PRIVATE_toFilter(t){return t instanceof FieldFilter?function(n){if(n.op==="=="){if(__PRIVATE_isNanValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(__PRIVATE_isNanValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:__PRIVATE_toOperatorName(n.op),value:n.value}}}(t):t instanceof CompositeFilter?function(n){const s=n.getFilters().map(o=>__PRIVATE_toFilter(o));return s.length===1?s[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(n.op),filters:s}}}(t):fail(54877,{filter:t})}function __PRIVATE_toDocumentMask(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,n,s,o,u=SnapshotVersion.min(),d=SnapshotVersion.min(),g=ByteString.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.wt=e}}function __PRIVATE_fromBundledQuery(t){const e=__PRIVATE_convertQueryTargetToQuery({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,n){return this.Cn.add(n),PersistencePromise.resolve()}getCollectionParents(e,n){return PersistencePromise.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return PersistencePromise.resolve()}deleteFieldIndex(e,n){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,n){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,n){return PersistencePromise.resolve(null)}getIndexType(e,n){return PersistencePromise.resolve(0)}getFieldIndexes(e,n){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,n){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,n){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,n,s){return PersistencePromise.resolve()}updateIndexEntries(e,n){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new SortedSet(ResourcePath.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mt=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Mt,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new __PRIVATE_TargetIdGenerator(0)}static lr(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="LruGarbageCollector",Ot=1048576;function __PRIVATE_bufferEntryComparator([t,e],[n,s]){const o=__PRIVATE_primitiveComparator(t,n);return o===0?__PRIVATE_primitiveComparator(e,s):o}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Er=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();__PRIVATE_bufferEntryComparator(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){__PRIVATE_logDebug(xt,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){__PRIVATE_isIndexedDbTransactionError(n)?__PRIVATE_logDebug(xt,"Ignoring IndexedDB error during garbage collection: ",n):await __PRIVATE_ignoreIfPrimaryLeaseLoss(n)}await this.mr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.le);const s=new __PRIVATE_RollingSequenceNumberBuffer(n);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(Ft)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ft):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,o,u,d,g,y,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(s=T,g=Date.now(),this.removeTargets(e,s,n))).next(T=>(u=T,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(v=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${u} targets in `+(y-g)+`ms
	Removed ${T} documents in `+(v-y)+`ms
Total Duration: ${v-w}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T})))}}function __PRIVATE_newLruGarbageCollector(t,e){return new __PRIVATE_LruGarbageCollectorImpl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?PersistencePromise.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&__PRIVATE_mutationApplyToLocalView(s.mutation,o,FieldMask.empty(),Timestamp.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,__PRIVATE_documentKeySet()).next(()=>s))}getLocalViewOfDocuments(e,n,s=__PRIVATE_documentKeySet()){const o=__PRIVATE_newOverlayMap();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let d=documentMap();return u.forEach((g,y)=>{d=d.insert(g,y.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=__PRIVATE_newOverlayMap();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,__PRIVATE_documentKeySet()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,g)=>{n.set(d,g)})})}computeViews(e,n,s,o){let u=__PRIVATE_mutableDocumentMap();const d=__PRIVATE_newDocumentKeyMap(),g=function(){return __PRIVATE_newDocumentKeyMap()}();return n.forEach((y,v)=>{const w=s.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof __PRIVATE_PatchMutation)?u=u.insert(v.key,v):w!==void 0?(d.set(v.key,w.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(w.mutation,v,w.mutation.getFieldMask(),Timestamp.now())):d.set(v.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((v,w)=>d.set(v,w)),n.forEach((v,w)=>{var T;return g.set(v,new OverlayedDocument(w,(T=d.get(v))!==null&&T!==void 0?T:null))}),g))}recalculateAndSaveOverlays(e,n){const s=__PRIVATE_newDocumentKeyMap();let o=new SortedMap((d,g)=>d-g),u=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const g of d)g.keys().forEach(y=>{const v=n.get(y);if(v===null)return;let w=s.get(y)||FieldMask.empty();w=g.applyToLocalView(v,w),s.set(y,w);const T=(o.get(g.batchId)||__PRIVATE_documentKeySet()).add(y);o=o.insert(g.batchId,T)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),v=y.key,w=y.value,T=__PRIVATE_newMutationMap();w.forEach(A=>{if(!u.has(A)){const C=__PRIVATE_calculateOverlayMutation(n.get(A),s.get(A));C!==null&&T.set(A,C),u=u.add(A)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,T))}return PersistencePromise.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(d){return DocumentKey.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):__PRIVATE_isCollectionGroupQuery(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let g=Q,y=u;return d.next(v=>PersistencePromise.forEach(v,(w,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),u.get(w)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,w).next(A=>{y=y.insert(w,A)}))).next(()=>this.populateOverlays(e,v,u)).next(()=>this.computeViews(e,y,v,__PRIVATE_documentKeySet())).next(w=>({batchId:g,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(w)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new DocumentKey(n)).next(s=>{let o=documentMap();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=documentMap();return this.indexManager.getCollectionParents(e,u).next(g=>PersistencePromise.forEach(g,y=>{const v=function(T,A){return new __PRIVATE_QueryImpl(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next(w=>{w.forEach((T,A)=>{d=d.insert(T,A)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(d=>{u.forEach((y,v)=>{const w=v.getKey();d.get(w)===null&&(d=d.insert(w,MutableDocument.newInvalidDocument(w)))});let g=documentMap();return d.forEach((y,v)=>{const w=u.get(y);w!==void 0&&__PRIVATE_mutationApplyToLocalView(w.mutation,v,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(n,v)&&(g=g.insert(y,v))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return PersistencePromise.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:__PRIVATE_fromVersion(o.createTime)}}(n)),PersistencePromise.resolve()}getNamedQuery(e,n){return PersistencePromise.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:__PRIVATE_fromBundledQuery(o.bundledQuery),readTime:__PRIVATE_fromVersion(o.readTime)}}(n)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.Qr=new Map}getOverlay(e,n){return PersistencePromise.resolve(this.overlays.get(n))}getOverlays(e,n){const s=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.St(e,n,u)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(s)),PersistencePromise.resolve()}getOverlaysForCollection(e,n,s){const o=__PRIVATE_newOverlayMap(),u=n.length+1,d=new DocumentKey(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===u&&y.largestBatchId>s&&o.set(y.getKey(),y)}return PersistencePromise.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new SortedMap((v,w)=>v-w);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let w=u.get(v.largestBatchId);w===null&&(w=__PRIVATE_newOverlayMap(),u=u.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const g=__PRIVATE_newOverlayMap(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((v,w)=>g.set(v,w)),!(g.size()>=o)););return PersistencePromise.resolve(g)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new Overlay(n,s));let u=this.Qr.get(n);u===void 0&&(u=__PRIVATE_documentKeySet(),this.Qr.set(n,u)),this.Qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.$r=new SortedSet(__PRIVATE_DocReference.Ur),this.Kr=new SortedSet(__PRIVATE_DocReference.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new __PRIVATE_DocReference(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new __PRIVATE_DocReference(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new DocumentKey(new ResourcePath([])),s=new __PRIVATE_DocReference(n,e),o=new __PRIVATE_DocReference(n,e+1),u=[];return this.Kr.forEachInRange([s,o],d=>{this.zr(d),u.push(d.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new DocumentKey(new ResourcePath([])),s=new __PRIVATE_DocReference(n,e),o=new __PRIVATE_DocReference(n,e+1);let u=__PRIVATE_documentKeySet();return this.Kr.forEachInRange([s,o],d=>{u=u.add(d.key)}),u}containsKey(e){const n=new __PRIVATE_DocReference(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class __PRIVATE_DocReference{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return DocumentKey.comparator(e.key,n.key)||__PRIVATE_primitiveComparator(e.Zr,n.Zr)}static Wr(e,n){return __PRIVATE_primitiveComparator(e.Zr,n.Zr)||DocumentKey.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new SortedSet(__PRIVATE_DocReference.Ur)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new MutationBatch(u,n,s,o);this.mutationQueue.push(d);for(const g of o)this.Xr=this.Xr.add(new __PRIVATE_DocReference(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return PersistencePromise.resolve(d)}lookupMutationBatch(e,n){return PersistencePromise.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ti(s),u=o<0?0:o;return PersistencePromise.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?G:this.nr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new __PRIVATE_DocReference(n,0),o=new __PRIVATE_DocReference(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([s,o],d=>{const g=this.ei(d.Zr);u.push(g)}),PersistencePromise.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new SortedSet(__PRIVATE_primitiveComparator);return n.forEach(o=>{const u=new __PRIVATE_DocReference(o,0),d=new __PRIVATE_DocReference(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,d],g=>{s=s.add(g.Zr)})}),PersistencePromise.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;DocumentKey.isDocumentKey(u)||(u=u.child(""));const d=new __PRIVATE_DocReference(new DocumentKey(u),0);let g=new SortedSet(__PRIVATE_primitiveComparator);return this.Xr.forEachWhile(y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(g=g.add(y.Zr)),!0)},d),PersistencePromise.resolve(this.ni(g))}ni(e){const n=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){__PRIVATE_hardAssert(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return PersistencePromise.forEach(n.mutations,o=>{const u=new __PRIVATE_DocReference(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new __PRIVATE_DocReference(n,0),o=this.Xr.firstAfterOrEqual(s);return PersistencePromise.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ii=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return PersistencePromise.resolve(s?s.document.mutableCopy():MutableDocument.newInvalidDocument(n))}getEntries(e,n){let s=__PRIVATE_mutableDocumentMap();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():MutableDocument.newInvalidDocument(o))}),PersistencePromise.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=__PRIVATE_mutableDocumentMap();const d=n.path,g=new DocumentKey(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:v,value:{document:w}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(w),s)<=0||(o.has(w.key)||__PRIVATE_queryMatches(n,w))&&(u=u.insert(w.key,w.mutableCopy()))}return PersistencePromise.resolve(u)}getAllFromCollectionGroup(e,n,s,o){fail(9500)}si(e,n){return PersistencePromise.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),PersistencePromise.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.oi=new ObjectMap(n=>__PRIVATE_canonifyTarget(n),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this._i=0,this.ai=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ui=__PRIVATE_TargetIdGenerator.cr()}forEachTarget(e,n){return this.oi.forEach((s,o)=>n(o)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),PersistencePromise.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new __PRIVATE_TargetIdGenerator(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,n){return this.Tr(n),PersistencePromise.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.oi.forEach((d,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.oi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),PersistencePromise.waitFor(u).next(()=>o)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return PersistencePromise.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),PersistencePromise.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),PersistencePromise.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return PersistencePromise.resolve(s)}containsKey(e,n){return PersistencePromise.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,n){this.ci={},this.overlays={},this.li=new __PRIVATE_ListenSequence(0),this.hi=!1,this.hi=!0,this.Pi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Ti=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(o){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new __PRIVATE_LocalSerializer(n),this.Ei=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new __PRIVATE_MemoryMutationQueue(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const o=new __PRIVATE_MemoryTransaction(this.li.next());return this.referenceDelegate.di(),s(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return PersistencePromise.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Vi=new __PRIVATE_ReferenceSet,this.mi=null}static fi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get gi(){if(this.mi)return this.mi;throw fail(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),PersistencePromise.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),PersistencePromise.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.gi,s=>{const o=DocumentKey.fromPath(s);return this.pi(e,o).next(u=>{u||n.removeEntry(o,SnapshotVersion.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,n){this.persistence=e,this.yi=new ObjectMap(s=>__PRIVATE_encodeResourcePath(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,n)}static fi(e,n){return new __PRIVATE_MemoryLruDelegate(e,n)}di(){}Ai(e){return PersistencePromise.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return PersistencePromise.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(u=>u?PersistencePromise.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,d=>this.Dr(e,d,n).next(g=>{g||(s++,u.removeEntry(d,SnapshotVersion.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=__PRIVATE_estimateByteSize(e.data.value)),n}Dr(e,n,s){return PersistencePromise.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return PersistencePromise.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.ds=s,this.As=o}static Rs(e,n){let s=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new __PRIVATE_LocalViewChanges(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return isSafari$1()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ws(e,n).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.bs(e,n,o,s).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new QueryContext;return this.Ss(e,n,d).next(g=>{if(u.result=g,this.fs)return this.Ds(e,n,d,g.size)})}).next(()=>u.result)}Ds(e,n,s,o){return s.documentReadCount<this.gs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(n))):PersistencePromise.resolve())}ws(e,n){if(__PRIVATE_queryMatchesAllDocuments(n))return PersistencePromise.resolve(null);let s=__PRIVATE_queryToTarget(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=__PRIVATE_queryWithLimit(n,null,"F"),s=__PRIVATE_queryToTarget(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const d=__PRIVATE_documentKeySet(...u);return this.ys.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,s).next(y=>{const v=this.vs(n,g);return this.Cs(n,v,d,y.readTime)?this.ws(e,__PRIVATE_queryWithLimit(n,null,"F")):this.Fs(e,v,n,y)}))})))}bs(e,n,s,o){return __PRIVATE_queryMatchesAllDocuments(n)||o.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ys.getDocuments(e,s).next(u=>{const d=this.vs(n,u);return this.Cs(n,d,s,o)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),__PRIVATE_stringifyQuery(n)),this.Fs(e,d,n,__PRIVATE_newIndexOffsetSuccessorFromReadTime(o,Q)).next(g=>g))})}vs(e,n){let s=new SortedSet(__PRIVATE_newQueryComparator(e));return n.forEach((o,u)=>{__PRIVATE_queryMatches(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(n)),this.ys.getDocumentsMatchingQuery(e,n,IndexOffset.min(),s)}Fs(e,n,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="LocalStore",$t=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,n,s,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new SortedMap(__PRIVATE_primitiveComparator),this.Os=new ObjectMap(u=>__PRIVATE_canonifyTarget(u),__PRIVATE_targetEquals),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function __PRIVATE_newLocalStore(t,e,n,s){return new __PRIVATE_LocalStoreImpl(t,e,n,s)}async function __PRIVATE_localStoreHandleUserChange(t,e){const n=__PRIVATE_debugCast(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const d=[],g=[];let y=__PRIVATE_documentKeySet();for(const v of o){d.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}for(const v of u){g.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}return n.localDocuments.getDocuments(s,y).next(v=>({ks:v,removedBatchIds:d,addedBatchIds:g}))})})}function __PRIVATE_localStoreAcknowledgeBatch(t,e){const n=__PRIVATE_debugCast(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(g,y,v,w){const T=v.batch,A=T.keys();let C=PersistencePromise.resolve();return A.forEach(j=>{C=C.next(()=>w.getEntry(y,j)).next(D=>{const H=v.docVersions.get(j);__PRIVATE_hardAssert(H!==null,48541),D.version.compareTo(H)<0&&(T.applyToRemoteDocument(D,v),D.isValidDocument()&&(D.setReadTime(v.commitVersion),w.addEntry(D)))})}),C.next(()=>g.mutationQueue.removeMutationBatch(y,T))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let y=__PRIVATE_documentKeySet();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(y=y.add(g.batch.mutations[v].key));return y}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t){const e=__PRIVATE_debugCast(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(t,e){const n=__PRIVATE_debugCast(t),s=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const g=[];e.targetChanges.forEach((w,T)=>{const A=o.get(T);if(!A)return;g.push(n.Ti.removeMatchingKeys(u,w.removedDocuments,T).next(()=>n.Ti.addMatchingKeys(u,w.addedDocuments,T)));let C=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):w.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(w.resumeToken,s)),o=o.insert(T,C),function(D,H,ne){return D.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=$t?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0}(A,C,w)&&g.push(n.Ti.updateTargetData(u,C))});let y=__PRIVATE_mutableDocumentMap(),v=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,w))}),g.push(__PRIVATE_populateDocumentChangeBuffer(u,d,e.documentUpdates).next(w=>{y=w.qs,v=w.Qs})),!s.isEqual(SnapshotVersion.min())){const w=n.Ti.getLastRemoteSnapshotVersion(u).next(T=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,s));g.push(w)}return PersistencePromise.waitFor(g).next(()=>d.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,y,v)).next(()=>y)}).then(u=>(n.xs=o,u))}function __PRIVATE_populateDocumentChangeBuffer(t,e,n){let s=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();return n.forEach(u=>s=s.add(u)),e.getEntries(t,s).next(u=>{let d=__PRIVATE_mutableDocumentMap();return n.forEach((g,y)=>{const v=u.get(g);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(SnapshotVersion.min())?(e.removeEntry(g,y.readTime),d=d.insert(g,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(g,y)):__PRIVATE_logDebug(Qt,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",y.version)}),{qs:d,Qs:o}})}function __PRIVATE_localStoreGetNextMutationBatch(t,e){const n=__PRIVATE_debugCast(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=G),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function __PRIVATE_localStoreAllocateTarget(t,e){const n=__PRIVATE_debugCast(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Ti.getTargetData(s,e).next(u=>u?(o=u,PersistencePromise.resolve(o)):n.Ti.allocateTargetId(s).next(d=>(o=new TargetData(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function __PRIVATE_localStoreReleaseTarget(t,e,n){const s=__PRIVATE_debugCast(t),o=s.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!__PRIVATE_isIndexedDbTransactionError(d))throw d;__PRIVATE_logDebug(Qt,`Failed to update sequence numbers for target ${e}: ${d}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function __PRIVATE_localStoreExecuteQuery(t,e,n){const s=__PRIVATE_debugCast(t);let o=SnapshotVersion.min(),u=__PRIVATE_documentKeySet();return s.persistence.runTransaction("Execute query","readwrite",d=>function(y,v,w){const T=__PRIVATE_debugCast(y),A=T.Os.get(w);return A!==void 0?PersistencePromise.resolve(T.xs.get(A)):T.Ti.getTargetData(v,w)}(s,d,__PRIVATE_queryToTarget(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(d,g.targetId).next(y=>{u=y})}).next(()=>s.Ms.getDocumentsMatchingQuery(d,e,n?o:SnapshotVersion.min(),n?u:__PRIVATE_documentKeySet())).next(g=>(__PRIVATE_setMaxReadTime(s,__PRIVATE_queryCollectionGroup(e),g),{documents:g,$s:u})))}function __PRIVATE_setMaxReadTime(t,e,n){let s=t.Ns.get(e)||SnapshotVersion.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),t.Ns.set(e,s)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.xo=new __PRIVATE_LocalClientState,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){__PRIVATE_logDebug(zt,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){__PRIVATE_logDebug(zt,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jt=null;function __PRIVATE_generateUniqueDebugId(){return jt===null?jt=function(){return 268435456+Math.round(2147483648*Math.random())}():jt++,"0x"+jt.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="RestConnection",Jt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===ut?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,n,s,o,u){const d=__PRIVATE_generateUniqueDebugId(),g=this.jo(e,n.toUriEncodedString());__PRIVATE_logDebug(Ht,`Sending RPC '${e}' ${d}:`,g,s);const y={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(y,o,u);const{host:v}=new URL(g),w=isCloudWorkstation(v);return this.Jo(e,g,y,s,w).then(T=>(__PRIVATE_logDebug(Ht,`Received RPC '${e}' ${d}: `,T),T),T=>{throw __PRIVATE_logWarn(Ht,`RPC '${e}' ${d} failed with error: `,T,"url: ",g,"request:",s),T})}Yo(e,n,s,o,u,d){return this.zo(e,n,s,o,u)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x$1}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const s=Jt[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=__PRIVATE_generateUniqueDebugId();return new Promise((g,y)=>{const v=new XhrIo;v.setWithCredentials(!0),v.listenOnce(EventType.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case ErrorCode.NO_ERROR:const T=v.getResponseJson();__PRIVATE_logDebug(Yt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),g(T);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Yt,`RPC '${e}' ${d} timed out`),y(new FirestoreError(N.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const A=v.getStatus();if(__PRIVATE_logDebug(Yt,`RPC '${e}' ${d} failed with status:`,A,"response text:",v.getResponseText()),A>0){let C=v.getResponseJson();Array.isArray(C)&&(C=C[0]);const j=C==null?void 0:C.error;if(j&&j.status&&j.message){const D=function(ne){const Y=ne.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(Y)>=0?Y:N.UNKNOWN}(j.status);y(new FirestoreError(D,j.message))}else y(new FirestoreError(N.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new FirestoreError(N.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{h_:e,streamId:d,P_:v.getLastErrorCode(),T_:v.getLastError()})}}finally{__PRIVATE_logDebug(Yt,`RPC '${e}' ${d} completed.`)}});const w=JSON.stringify(o);__PRIVATE_logDebug(Yt,`RPC '${e}' ${d} sending request:`,o),v.send(n,"POST",w,s,15)})}I_(e,n,s){const o=__PRIVATE_generateUniqueDebugId(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=createWebChannelTransport(),g=getStatEventTarget(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Ho(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const w=u.join("");__PRIVATE_logDebug(Yt,`Creating RPC '${e}' stream ${o}: ${w}`,y);const T=d.createWebChannel(w,y);this.E_(T);let A=!1,C=!1;const j=new __PRIVATE_StreamBridge({Zo:H=>{C?__PRIVATE_logDebug(Yt,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(A||(__PRIVATE_logDebug(Yt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),A=!0),__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${o} sending:`,H),T.send(H))},Xo:()=>T.close()}),D=(H,ne,Y)=>{H.listen(ne,U=>{try{Y(U)}catch(ee){setTimeout(()=>{throw ee},0)}})};return D(T,WebChannel.EventType.OPEN,()=>{C||(__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${o} transport opened.`),j.__())}),D(T,WebChannel.EventType.CLOSE,()=>{C||(C=!0,__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${o} transport closed`),j.u_(),this.d_(T))}),D(T,WebChannel.EventType.ERROR,H=>{C||(C=!0,__PRIVATE_logWarn(Yt,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),j.u_(new FirestoreError(N.UNAVAILABLE,"The operation could not be completed")))}),D(T,WebChannel.EventType.MESSAGE,H=>{var ne;if(!C){const Y=H.data[0];__PRIVATE_hardAssert(!!Y,16349);const U=Y,ee=(U==null?void 0:U.error)||((ne=U[0])===null||ne===void 0?void 0:ne.error);if(ee){__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${o} received error:`,ee);const J=ee.status;let ie=function(te){const re=ft[te];if(re!==void 0)return __PRIVATE_mapCodeFromRpcCode(re)}(J),se=ee.message;ie===void 0&&(ie=N.INTERNAL,se="Unknown error status: "+J+" with message "+ee.message),C=!0,j.u_(new FirestoreError(ie,se)),T.close()}else __PRIVATE_logDebug(Yt,`RPC '${e}' stream ${o} received:`,Y),j.c_(Y)}}),D(g,Event$1.STAT_EVENT,H=>{H.stat===Stat.PROXY?__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{j.a_()},0),j}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(t){return new JsonProtoSerializer(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,n,s=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-s);o>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,n,s,o,u,d,g,y){this.xi=e,this.S_=s,this.D_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new __PRIVATE_ExponentialBackoff(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(__PRIVATE_logError(n.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.v_===n&&this.z_(s,o)},s=>{e(()=>{const o=new FirestoreError(N.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(o)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.j_(o))}),this.stream.onMessage(o=>{s(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return __PRIVATE_logDebug(Zt,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(__PRIVATE_logDebug(Zt,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=__PRIVATE_fromWatchChange(this.serializer,e),s=function(u){if(!("targetChange"in u))return SnapshotVersion.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?SnapshotVersion.min():d.readTime?__PRIVATE_fromVersion(d.readTime):SnapshotVersion.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=__PRIVATE_getEncodedDatabaseId(this.serializer),n.addTarget=function(u,d){let g;const y=d.target;if(g=__PRIVATE_targetIsDocumentTarget(y)?{documents:__PRIVATE_toDocumentsTarget(u,y)}:{query:__PRIVATE_toQueryTarget(u,y).gt},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=__PRIVATE_toBytes(u,d.resumeToken);const v=__PRIVATE_toInt32Proto(u,d.expectedCount);v!==null&&(g.expectedCount=v)}else if(d.snapshotVersion.compareTo(SnapshotVersion.min())>0){g.readTime=toTimestamp(u,d.snapshotVersion.toTimestamp());const v=__PRIVATE_toInt32Proto(u,d.expectedCount);v!==null&&(g.expectedCount=v)}return g}(this.serializer,e);const s=__PRIVATE_toListenRequestLabels(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=__PRIVATE_getEncodedDatabaseId(this.serializer),n.removeTarget=e,this.Q_(n)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),s=__PRIVATE_fromVersion(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>toMutation(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.zo(e,__PRIVATE_toResourcePath(n,s),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new FirestoreError(N.UNKNOWN,u.toString())})}Yo(e,n,s,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Yo(e,__PRIVATE_toResourcePath(n,s),o,d,g,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new FirestoreError(N.UNKNOWN,d.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(__PRIVATE_logError(n),this.ua=!1):__PRIVATE_logDebug("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(d=>{s.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(Xt,"Restarting streams for network reachability change."),await async function(y){const v=__PRIVATE_debugCast(y);v.da.add(4),await __PRIVATE_disableNetworkInternal(v),v.Va.set("Unknown"),v.da.delete(4),await __PRIVATE_enableNetworkInternal(v)}(this))})}),this.Va=new __PRIVATE_OnlineStateTracker(s,o)}}async function __PRIVATE_enableNetworkInternal(t){if(__PRIVATE_canUseNetwork(t))for(const e of t.Aa)await e(!0)}async function __PRIVATE_disableNetworkInternal(t){for(const e of t.Aa)await e(!1)}function __PRIVATE_remoteStoreListen(t,e){const n=__PRIVATE_debugCast(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(n)?__PRIVATE_startWatchStream(n):__PRIVATE_ensureWatchStream(n).N_()&&__PRIVATE_sendWatchRequest(n,e))}function __PRIVATE_remoteStoreUnlisten(t,e){const n=__PRIVATE_debugCast(t),s=__PRIVATE_ensureWatchStream(n);n.Ea.delete(e),s.N_()&&__PRIVATE_sendUnwatchRequest(n,e),n.Ea.size===0&&(s.N_()?s.k_():__PRIVATE_canUseNetwork(n)&&n.Va.set("Unknown"))}function __PRIVATE_sendWatchRequest(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}__PRIVATE_ensureWatchStream(t).Z_(e)}function __PRIVATE_sendUnwatchRequest(t,e){t.ma.Ke(e),__PRIVATE_ensureWatchStream(t).X_(e)}function __PRIVATE_startWatchStream(t){t.ma=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(t).start(),t.Va.ca()}function __PRIVATE_shouldStartWatchStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWatchStream(t).O_()&&t.Ea.size>0}function __PRIVATE_canUseNetwork(t){return __PRIVATE_debugCast(t).da.size===0}function __PRIVATE_cleanUpWatchStreamState(t){t.ma=void 0}async function __PRIVATE_onWatchStreamConnected(t){t.Va.set("Online")}async function __PRIVATE_onWatchStreamOpen(t){t.Ea.forEach((e,n)=>{__PRIVATE_sendWatchRequest(t,e)})}async function __PRIVATE_onWatchStreamClose(t,e){__PRIVATE_cleanUpWatchStreamState(t),__PRIVATE_shouldStartWatchStream(t)?(t.Va.Pa(e),__PRIVATE_startWatchStream(t)):t.Va.set("Unknown")}async function __PRIVATE_onWatchStreamChange(t,e,n){if(t.Va.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const g of u.targetIds)o.Ea.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ea.delete(g),o.ma.removeTarget(g))}(t,e)}catch(s){__PRIVATE_logDebug(Xt,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await __PRIVATE_disableNetworkUntilRecovery(t,s)}else if(e instanceof __PRIVATE_DocumentWatchChange?t.ma.Xe(e):e instanceof __PRIVATE_ExistenceFilterChange?t.ma.ot(e):t.ma.nt(e),!n.isEqual(SnapshotVersion.min()))try{const s=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore);n.compareTo(s)>=0&&await function(u,d){const g=u.ma.It(d);return g.targetChanges.forEach((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const w=u.Ea.get(v);w&&u.Ea.set(v,w.withResumeToken(y.resumeToken,d))}}),g.targetMismatches.forEach((y,v)=>{const w=u.Ea.get(y);if(!w)return;u.Ea.set(y,w.withResumeToken(ByteString.EMPTY_BYTE_STRING,w.snapshotVersion)),__PRIVATE_sendUnwatchRequest(u,y);const T=new TargetData(w.target,y,v,w.sequenceNumber);__PRIVATE_sendWatchRequest(u,T)}),u.remoteSyncer.applyRemoteEvent(g)}(t,n)}catch(s){__PRIVATE_logDebug(Xt,"Failed to raise snapshot:",s),await __PRIVATE_disableNetworkUntilRecovery(t,s)}}async function __PRIVATE_disableNetworkUntilRecovery(t,e,n){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;t.da.add(1),await __PRIVATE_disableNetworkInternal(t),t.Va.set("Offline"),n||(n=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(Xt,"Retrying IndexedDB access"),await n(),t.da.delete(1),await __PRIVATE_enableNetworkInternal(t)})}function __PRIVATE_executeWithRecovery(t,e){return e().catch(n=>__PRIVATE_disableNetworkUntilRecovery(t,n,e))}async function __PRIVATE_fillWritePipeline(t){const e=__PRIVATE_debugCast(t),n=__PRIVATE_ensureWriteStream(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:G;for(;__PRIVATE_canAddToWritePipeline(e);)try{const o=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,s);if(o===null){e.Ia.length===0&&n.k_();break}s=o.batchId,__PRIVATE_addToWritePipeline(e,o)}catch(o){await __PRIVATE_disableNetworkUntilRecovery(e,o)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(t){return __PRIVATE_canUseNetwork(t)&&t.Ia.length<10}function __PRIVATE_addToWritePipeline(t,e){t.Ia.push(e);const n=__PRIVATE_ensureWriteStream(t);n.N_()&&n.ea&&n.ta(e.mutations)}function __PRIVATE_shouldStartWriteStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWriteStream(t).O_()&&t.Ia.length>0}function __PRIVATE_startWriteStream(t){__PRIVATE_ensureWriteStream(t).start()}async function __PRIVATE_onWriteStreamOpen(t){__PRIVATE_ensureWriteStream(t).ia()}async function __PRIVATE_onWriteHandshakeComplete(t){const e=__PRIVATE_ensureWriteStream(t);for(const n of t.Ia)e.ta(n.mutations)}async function __PRIVATE_onMutationResult(t,e,n){const s=t.Ia.shift(),o=MutationBatchResult.from(s,e,n);await __PRIVATE_executeWithRecovery(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await __PRIVATE_fillWritePipeline(t)}async function __PRIVATE_onWriteStreamClose(t,e){e&&__PRIVATE_ensureWriteStream(t).ea&&await async function(s,o){if(function(d){return __PRIVATE_isPermanentError(d)&&d!==N.ABORTED}(o.code)){const u=s.Ia.shift();__PRIVATE_ensureWriteStream(s).L_(),await __PRIVATE_executeWithRecovery(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await __PRIVATE_fillWritePipeline(s)}}(t,e),__PRIVATE_shouldStartWriteStream(t)&&__PRIVATE_startWriteStream(t)}async function __PRIVATE_remoteStoreHandleCredentialChange(t,e){const n=__PRIVATE_debugCast(t);n.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Xt,"RemoteStore received new credentials");const s=__PRIVATE_canUseNetwork(n);n.da.add(3),await __PRIVATE_disableNetworkInternal(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await __PRIVATE_enableNetworkInternal(n)}async function __PRIVATE_remoteStoreApplyPrimaryState(t,e){const n=__PRIVATE_debugCast(t);e?(n.da.delete(2),await __PRIVATE_enableNetworkInternal(n)):e||(n.da.add(2),await __PRIVATE_disableNetworkInternal(n),n.Va.set("Unknown"))}function __PRIVATE_ensureWatchStream(t){return t.fa||(t.fa=function(n,s,o){const u=__PRIVATE_debugCast(n);return u.oa(),new __PRIVATE_PersistentListenStream(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(t.datastore,t.asyncQueue,{e_:__PRIVATE_onWatchStreamConnected.bind(null,t),n_:__PRIVATE_onWatchStreamOpen.bind(null,t),i_:__PRIVATE_onWatchStreamClose.bind(null,t),Y_:__PRIVATE_onWatchStreamChange.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),__PRIVATE_shouldStartWatchStream(t)?__PRIVATE_startWatchStream(t):t.Va.set("Unknown")):(await t.fa.stop(),__PRIVATE_cleanUpWatchStreamState(t))})),t.fa}function __PRIVATE_ensureWriteStream(t){return t.ga||(t.ga=function(n,s,o){const u=__PRIVATE_debugCast(n);return u.oa(),new __PRIVATE_PersistentWriteStream(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:__PRIVATE_onWriteStreamOpen.bind(null,t),i_:__PRIVATE_onWriteStreamClose.bind(null,t),na:__PRIVATE_onWriteHandshakeComplete.bind(null,t),ra:__PRIVATE_onMutationResult.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await __PRIVATE_fillWritePipeline(t)):(await t.ga.stop(),t.Ia.length>0&&(__PRIVATE_logDebug(Xt,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,g=new DelayedOperation(e,n,d,o,u);return g.start(s),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(t,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${t}`),__PRIVATE_isIndexedDbTransactionError(t))return new FirestoreError(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||DocumentKey.comparator(n.key,s.key):(n,s)=>DocumentKey.comparator(n.key,s.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new DocumentSet;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.pa=new SortedMap(DocumentKey.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):fail(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class ViewSnapshot{constructor(e,n,s,o,u,d,g,y,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach(g=>{d.push({type:0,doc:g})}),new ViewSnapshot(e,n,DocumentSet.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=__PRIVATE_debugCast(n),u=o.queries;o.queries=__PRIVATE_newQueriesObjectMap(),u.forEach((d,g)=>{for(const y of g.Sa)y.onError(s)})})(this,new FirestoreError(N.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(t=>__PRIVATE_canonifyQuery(t),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(t,e){const n=__PRIVATE_debugCast(t);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Da()&&e.va()&&(s=2):(u=new __PRIVATE_QueryListenersInfo,s=e.va()?0:1);try{switch(s){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=__PRIVATE_wrapInUserErrorIfRecoverable(d,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&__PRIVATE_raiseSnapshotsInSyncEvent(n)}async function __PRIVATE_eventManagerUnlisten(t,e){const n=__PRIVATE_debugCast(t),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function __PRIVATE_eventManagerOnWatchChange(t,e){const n=__PRIVATE_debugCast(t);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const g of d.Sa)g.Ma(o)&&(s=!0);d.ba=o}}s&&__PRIVATE_raiseSnapshotsInSyncEvent(n)}function __PRIVATE_eventManagerOnWatchError(t,e,n){const s=__PRIVATE_debugCast(t),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(t){t.Ca.forEach(e=>{e.next()})}var en,tn;(tn=en||(en={})).xa="default",tn.Cache="cache";class __PRIVATE_QueryListener{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==en.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.Za=__PRIVATE_newQueryComparator(e),this.Xa=new DocumentSet(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new __PRIVATE_DocumentChangeSet,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,T)=>{const A=o.get(w),C=__PRIVATE_queryMatches(this.query,T)?T:null,j=!!A&&this.mutatedKeys.has(A.key),D=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let H=!1;A&&C?A.data.isEqual(C.data)?j!==D&&(s.track({type:3,doc:C}),H=!0):this.ru(A,C)||(s.track({type:2,doc:C}),H=!0,(y&&this.Za(C,y)>0||v&&this.Za(C,v)<0)&&(g=!0)):!A&&C?(s.track({type:0,doc:C}),H=!0):A&&!C&&(s.track({type:1,doc:A}),H=!0,(y||v)&&(g=!0)),H&&(C?(d=d.add(C),u=D?u.add(w):u.delete(w)):(d=d.delete(w),u=u.delete(w)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),u=u.delete(w.key),s.track({type:1,doc:w})}return{Xa:d,nu:s,Cs:g,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const d=e.nu.wa();d.sort((w,T)=>function(C,j){const D=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Vt:H})}};return D(C)-D(j)}(w.type,T.type)||this.Za(w.doc,T.doc)),this.iu(s),o=o!=null&&o;const g=n&&!o?this.su():[],y=this.Ya.size===0&&this.current&&!o?1:0,v=y!==this.Ja;return this.Ja=y,d.length!==0||v?{snapshot:new ViewSnapshot(this.query,e.Xa,u,d,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:g}:{ou:g}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=__PRIVATE_documentKeySet(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new __PRIVATE_RemovedLimboDocument(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new __PRIVATE_AddedLimboDocument(s))}),n}au(e){this.Ha=e.$s,this.Ya=__PRIVATE_documentKeySet();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return ViewSnapshot.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const nn="SyncEngine";class __PRIVATE_QueryView{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class LimboResolution{constructor(e){this.key=e,this.cu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.lu={},this.hu=new ObjectMap(g=>__PRIVATE_canonifyQuery(g),__PRIVATE_queryEquals),this.Pu=new Map,this.Tu=new Set,this.Iu=new SortedMap(DocumentKey.comparator),this.Eu=new Map,this.du=new __PRIVATE_ReferenceSet,this.Au={},this.Ru=new Map,this.Vu=__PRIVATE_TargetIdGenerator.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function __PRIVATE_syncEngineListen(t,e,n=!0){const s=__PRIVATE_ensureWatchCallbacks(t);let o;const u=s.hu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await __PRIVATE_allocateTargetAndMaybeListen(s,e,n,!0),o}async function __PRIVATE_triggerRemoteStoreListen(t,e){const n=__PRIVATE_ensureWatchCallbacks(t);await __PRIVATE_allocateTargetAndMaybeListen(n,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(t,e,n,s){const o=await __PRIVATE_localStoreAllocateTarget(t.localStore,__PRIVATE_queryToTarget(e)),u=o.targetId,d=t.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await __PRIVATE_initializeViewAndComputeSnapshot(t,e,u,d==="current",o.resumeToken)),t.isPrimaryClient&&n&&__PRIVATE_remoteStoreListen(t.remoteStore,o),g}async function __PRIVATE_initializeViewAndComputeSnapshot(t,e,n,s,o){t.fu=(T,A,C)=>async function(D,H,ne,Y){let U=H.view.tu(ne);U.Cs&&(U=await __PRIVATE_localStoreExecuteQuery(D.localStore,H.query,!1).then(({documents:se})=>H.view.tu(se,U)));const ee=Y&&Y.targetChanges.get(H.targetId),J=Y&&Y.targetMismatches.get(H.targetId)!=null,ie=H.view.applyChanges(U,D.isPrimaryClient,ee,J);return __PRIVATE_updateTrackedLimbos(D,H.targetId,ie.ou),ie.snapshot}(t,T,A,C);const u=await __PRIVATE_localStoreExecuteQuery(t.localStore,e,!0),d=new __PRIVATE_View(e,u.$s),g=d.tu(u.documents),y=TargetChange.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",o),v=d.applyChanges(g,t.isPrimaryClient,y);__PRIVATE_updateTrackedLimbos(t,n,v.ou);const w=new __PRIVATE_QueryView(e,n,d);return t.hu.set(e,w),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),v.snapshot}async function __PRIVATE_syncEngineUnlisten(t,e,n){const s=__PRIVATE_debugCast(t),o=s.hu.get(e),u=s.Pu.get(o.targetId);if(u.length>1)return s.Pu.set(o.targetId,u.filter(d=>!__PRIVATE_queryEquals(d,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await __PRIVATE_localStoreReleaseTarget(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&__PRIVATE_remoteStoreUnlisten(s.remoteStore,o.targetId),__PRIVATE_removeAndCleanupTarget(s,o.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(s,o.targetId),await __PRIVATE_localStoreReleaseTarget(s.localStore,o.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(t,e){const n=__PRIVATE_debugCast(t),s=n.hu.get(e),o=n.Pu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),__PRIVATE_remoteStoreUnlisten(n.remoteStore,s.targetId))}async function __PRIVATE_syncEngineWrite(t,e,n){const s=__PRIVATE_syncEngineEnsureWriteCallbacks(t);try{const o=await function(d,g){const y=__PRIVATE_debugCast(d),v=Timestamp.now(),w=g.reduce((C,j)=>C.add(j.key),__PRIVATE_documentKeySet());let T,A;return y.persistence.runTransaction("Locally write mutations","readwrite",C=>{let j=__PRIVATE_mutableDocumentMap(),D=__PRIVATE_documentKeySet();return y.Bs.getEntries(C,w).next(H=>{j=H,j.forEach((ne,Y)=>{Y.isValidDocument()||(D=D.add(ne))})}).next(()=>y.localDocuments.getOverlayedDocuments(C,j)).next(H=>{T=H;const ne=[];for(const Y of g){const U=__PRIVATE_mutationExtractBaseValue(Y,T.get(Y.key).overlayedDocument);U!=null&&ne.push(new __PRIVATE_PatchMutation(Y.key,U,__PRIVATE_extractFieldMask(U.value.mapValue),Precondition.exists(!0)))}return y.mutationQueue.addMutationBatch(C,v,ne,g)}).next(H=>{A=H;const ne=H.applyToLocalDocumentSet(T,D);return y.documentOverlayCache.saveOverlays(C,H.batchId,ne)})}).then(()=>({batchId:A.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,g,y){let v=d.Au[d.currentUser.toKey()];v||(v=new SortedMap(__PRIVATE_primitiveComparator)),v=v.insert(g,y),d.Au[d.currentUser.toKey()]=v}(s,o.batchId,n),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o.changes),await __PRIVATE_fillWritePipeline(s.remoteStore)}catch(o){const u=__PRIVATE_wrapInUserErrorIfRecoverable(o,"Failed to persist write");n.reject(u)}}async function __PRIVATE_syncEngineApplyRemoteEvent(t,e){const n=__PRIVATE_debugCast(t);try{const s=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(n.localStore,e);e.targetChanges.forEach((o,u)=>{const d=n.Eu.get(u);d&&(__PRIVATE_hardAssert(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.cu=!0:o.modifiedDocuments.size>0?__PRIVATE_hardAssert(d.cu,14607):o.removedDocuments.size>0&&(__PRIVATE_hardAssert(d.cu,42227),d.cu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,s,e)}catch(s){await __PRIVATE_ignoreIfPrimaryLeaseLoss(s)}}function __PRIVATE_syncEngineApplyOnlineStateChange(t,e,n){const s=__PRIVATE_debugCast(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.hu.forEach((u,d)=>{const g=d.view.Fa(e);g.snapshot&&o.push(g.snapshot)}),function(d,g){const y=__PRIVATE_debugCast(d);y.onlineState=g;let v=!1;y.queries.forEach((w,T)=>{for(const A of T.Sa)A.Fa(g)&&(v=!0)}),v&&__PRIVATE_raiseSnapshotsInSyncEvent(y)}(s.eventManager,e),o.length&&s.lu.Y_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(t,e,n){const s=__PRIVATE_debugCast(t);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Eu.get(e),u=o&&o.key;if(u){let d=new SortedMap(DocumentKey.comparator);d=d.insert(u,MutableDocument.newNoDocument(u,SnapshotVersion.min()));const g=__PRIVATE_documentKeySet().add(u),y=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),d,g);await __PRIVATE_syncEngineApplyRemoteEvent(s,y),s.Iu=s.Iu.remove(u),s.Eu.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(s)}else await __PRIVATE_localStoreReleaseTarget(s.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(s,e,n)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(t,e){const n=__PRIVATE_debugCast(t),s=e.batch.batchId;try{const o=await __PRIVATE_localStoreAcknowledgeBatch(n.localStore,e);__PRIVATE_processUserCallback(n,s,null),__PRIVATE_triggerPendingWritesCallbacks(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,o)}catch(o){await __PRIVATE_ignoreIfPrimaryLeaseLoss(o)}}async function __PRIVATE_syncEngineRejectFailedWrite(t,e,n){const s=__PRIVATE_debugCast(t);try{const o=await function(d,g){const y=__PRIVATE_debugCast(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let w;return y.mutationQueue.lookupMutationBatch(v,g).next(T=>(__PRIVATE_hardAssert(T!==null,37113),w=T.keys(),y.mutationQueue.removeMutationBatch(v,T))).next(()=>y.mutationQueue.performConsistencyCheck(v)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(v,w,g)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w)).next(()=>y.localDocuments.getDocuments(v,w))})}(s.localStore,e);__PRIVATE_processUserCallback(s,e,n),__PRIVATE_triggerPendingWritesCallbacks(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o)}catch(o){await __PRIVATE_ignoreIfPrimaryLeaseLoss(o)}}function __PRIVATE_triggerPendingWritesCallbacks(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function __PRIVATE_processUserCallback(t,e,n){const s=__PRIVATE_debugCast(t);let o=s.Au[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Au[s.currentUser.toKey()]=o}}function __PRIVATE_removeAndCleanupTarget(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Pu.get(e))t.hu.delete(s),n&&t.lu.gu(s,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(s=>{t.du.containsKey(s)||__PRIVATE_removeLimboTarget(t,s)})}function __PRIVATE_removeLimboTarget(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(__PRIVATE_remoteStoreUnlisten(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_updateTrackedLimbos(t,e,n){for(const s of n)s instanceof __PRIVATE_AddedLimboDocument?(t.du.addReference(s.key,e),__PRIVATE_trackLimboChange(t,s)):s instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(nn,"Document no longer in limbo: "+s.key),t.du.removeReference(s.key,e),t.du.containsKey(s.key)||__PRIVATE_removeLimboTarget(t,s.key)):fail(19791,{pu:s})}function __PRIVATE_trackLimboChange(t,e){const n=e.key,s=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(s)||(__PRIVATE_logDebug(nn,"New document in limbo: "+n),t.Tu.add(s),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_pumpEnqueuedLimboResolutions(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new DocumentKey(ResourcePath.fromString(e)),s=t.Vu.next();t.Eu.set(s,new LimboResolution(n)),t.Iu=t.Iu.insert(n,s),__PRIVATE_remoteStoreListen(t.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(n.path)),s,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.le))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,e,n){const s=__PRIVATE_debugCast(t),o=[],u=[],d=[];s.hu.isEmpty()||(s.hu.forEach((g,y)=>{d.push(s.fu(y,e,n).then(v=>{var w;if((v||n)&&s.isPrimaryClient){const T=v?!v.fromCache:(w=n==null?void 0:n.targetChanges.get(y.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(v){o.push(v);const T=__PRIVATE_LocalViewChanges.Rs(y.targetId,v);u.push(T)}}))}),await Promise.all(d),s.lu.Y_(o),await async function(y,v){const w=__PRIVATE_debugCast(y);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>PersistencePromise.forEach(v,A=>PersistencePromise.forEach(A.ds,C=>w.persistence.referenceDelegate.addReference(T,A.targetId,C)).next(()=>PersistencePromise.forEach(A.As,C=>w.persistence.referenceDelegate.removeReference(T,A.targetId,C)))))}catch(T){if(!__PRIVATE_isIndexedDbTransactionError(T))throw T;__PRIVATE_logDebug(Qt,"Failed to update sequence numbers: "+T)}for(const T of v){const A=T.targetId;if(!T.fromCache){const C=w.xs.get(A),j=C.snapshotVersion,D=C.withLastLimboFreeSnapshotVersion(j);w.xs=w.xs.insert(A,D)}}}(s.localStore,u))}async function __PRIVATE_syncEngineHandleCredentialChange(t,e){const n=__PRIVATE_debugCast(t);if(!n.currentUser.isEqual(e)){__PRIVATE_logDebug(nn,"User change. New user:",e.toKey());const s=await __PRIVATE_localStoreHandleUserChange(n.localStore,e);n.currentUser=e,function(u,d){u.Ru.forEach(g=>{g.forEach(y=>{y.reject(new FirestoreError(N.CANCELLED,d))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,s.ks)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(t,e){const n=__PRIVATE_debugCast(t),s=n.Eu.get(e);if(s&&s.cu)return __PRIVATE_documentKeySet().add(s.key);{let o=__PRIVATE_documentKeySet();const u=n.Pu.get(e);if(!u)return o;for(const d of u){const g=n.hu.get(d);o=o.unionWith(g.view.eu)}return o}}function __PRIVATE_ensureWatchCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.lu.Y_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.lu.gu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Su(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.fi,this.serializer)}bu(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(s=>__PRIVATE_MemoryLruDelegate.fi(s,n),this.serializer)}}class OnlineComponentProvider{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const n=__PRIVATE_newSerializer(e.databaseInfo.databaseId),s=function(u){return new __PRIVATE_WebChannelConnection(u)}(e.databaseInfo);return function(u,d,g,y){return new __PRIVATE_DatastoreImpl(u,d,g,y)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,d,g){return new __PRIVATE_RemoteStoreImpl(s,o,u,d,g)}(this.localStore,this.datastore,e.asyncQueue,n=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,n,0),function(){return __PRIVATE_BrowserConnectivityMonitor.C()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,n){return function(o,u,d,g,y,v,w){const T=new __PRIVATE_SyncEngineImpl(o,u,d,g,y,v);return w&&(T.mu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=__PRIVATE_debugCast(o);__PRIVATE_logDebug(Xt,"RemoteStore shutting down."),u.da.add(5),await __PRIVATE_disableNetworkInternal(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="FirestoreClient";class FirestoreClient{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=User$1.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async d=>{__PRIVATE_logDebug(rn,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(__PRIVATE_logDebug(rn,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=__PRIVATE_wrapInUserErrorIfRecoverable(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(rn,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async o=>{s.isEqual(o)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress();const n=await __PRIVATE_ensureOfflineComponents(t);__PRIVATE_logDebug(rn,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,o)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,o)),t._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){__PRIVATE_logDebug(rn,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===N.FAILED_PRECONDITION||o.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+n),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(rn,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return t._offlineComponents}async function __PRIVATE_ensureOnlineComponents(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(__PRIVATE_logDebug(rn,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,t._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(rn,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,new OnlineComponentProvider))),t._onlineComponents}function __PRIVATE_getSyncEngine(t){return __PRIVATE_ensureOnlineComponents(t).then(e=>e.syncEngine)}async function __PRIVATE_getEventManager(t){const e=await __PRIVATE_ensureOnlineComponents(t),n=e.eventManager;return n.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),n.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),n}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(t,e,n={}){const s=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>function(u,d,g,y,v){const w=new __PRIVATE_AsyncObserver({next:A=>{w.xu(),d.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(u,T));const C=A.docs.has(g);!C&&A.fromCache?v.reject(new FirestoreError(N.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&A.fromCache&&y&&y.source==="server"?v.reject(new FirestoreError(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(A)},error:A=>v.reject(A)}),T=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(g.path),w,{includeMetadataChanges:!0,Qa:!0});return __PRIVATE_eventManagerListen(u,T)}(await __PRIVATE_getEventManager(t),t.asyncQueue,e,n,s)),s.promise}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(t,e,n={}){const s=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>function(u,d,g,y,v){const w=new __PRIVATE_AsyncObserver({next:A=>{w.xu(),d.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(u,T)),A.fromCache&&y.source==="server"?v.reject(new FirestoreError(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(A)},error:A=>v.reject(A)}),T=new __PRIVATE_QueryListener(g,w,{includeMetadataChanges:!0,Qa:!0});return __PRIVATE_eventManagerListen(u,T)}(await __PRIVATE_getEventManager(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(t,e,n){if(!n)throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(t,e,n,s){if(e===!0&&s===!0)throw new FirestoreError(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function __PRIVATE_validateDocumentPath(t){if(!DocumentKey.isDocumentKey(t))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_validateCollectionPath(t){if(DocumentKey.isDocumentKey(t))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_valueDescription(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fail(12329,{type:typeof t})}function __PRIVATE_cast(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new FirestoreError(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=__PRIVATE_valueDescription(t);throw new FirestoreError(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on$1="firestore.googleapis.com",_n=!0;class FirestoreSettingsImpl{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=on$1,this.ssl=_n}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:_n;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mt;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ot)throw new FirestoreError(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(s.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new FirestoreError(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=sn.get(n);s&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),sn.delete(n),s.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(t,e,n,s={}){var o;t=__PRIVATE_cast(t,Firestore$1);const u=isCloudWorkstation(e),d=t._getSettings(),g=Object.assign(Object.assign({},d),{emulatorOptions:t._getEmulatorOptions()}),y=`${e}:${n}`;u&&(pingServer(`https://${y}`),updateEmulatorBanner("Firestore",!0)),d.host!==on$1&&d.host!==y&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:y,ssl:u,emulatorOptions:s});if(!deepEqual$1(v,g)&&(t._setSettings(v),s.mockUserToken)){let w,T;if(typeof s.mockUserToken=="string")w=s.mockUserToken,T=User$1.MOCK_USER;else{w=createMockUserToken(s.mockUserToken,(o=t._app)===null||o===void 0?void 0:o.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new FirestoreError(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new User$1(A)}t._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(w,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}}class CollectionReference extends Query{constructor(e,n,s){super(e,n,__PRIVATE_newQueryForPath(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(t,e,...n){if(t=getModularInstance(t),__PRIVATE_validateNonEmptyArgument("collection","path",e),t instanceof Firestore$1){const s=ResourcePath.fromString(e,...n);return __PRIVATE_validateCollectionPath(s),new CollectionReference(t,null,s)}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ResourcePath.fromString(e,...n));return __PRIVATE_validateCollectionPath(s),new CollectionReference(t.firestore,null,s)}}function doc(t,e,...n){if(t=getModularInstance(t),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),t instanceof Firestore$1){const s=ResourcePath.fromString(e,...n);return __PRIVATE_validateDocumentPath(s),new DocumentReference(t,null,new DocumentKey(s))}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ResourcePath.fromString(e,...n));return __PRIVATE_validateDocumentPath(s),new DocumentReference(t.firestore,t instanceof CollectionReference?t.converter:null,new DocumentKey(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.rc=()=>{const s=getDocument();s&&__PRIVATE_logDebug(an,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=getDocument();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=getDocument();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new __PRIVATE_Deferred;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(an,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=DelayedOperation.createAndSchedule(this,e,n,s,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&fail(47125,{cc:__PRIVATE_getMessageOrStack(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function __PRIVATE_getMessageOrStack(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Firestore extends Firestore$1{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(t,e){const n=typeof t=="object"?t:getApp(),s=typeof t=="string"?t:ut,o=_getProvider(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=getDefaultEmulatorHostnameAndPort("firestore");u&&connectFirestoreEmulator(o,...u)}return o}function ensureFirestoreConfigured(t){if(t._terminated)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||__PRIVATE_configureFirestore(t),t._firestoreClient}function __PRIVATE_configureFirestore(t){var e,n,s;const o=t._freezeSettings(),u=function(g,y,v,w){return new DatabaseInfo(g,y,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,o);t._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),t._firestoreClient=new FirestoreClient(t._authCredentials,t._appCheckCredentials,t._queue,u,t._componentsProvider&&function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(n){throw new FirestoreError(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new FirestoreError(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn$1=/^__.*__$/;class ParsedSetData{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,n,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,n,this.fieldTransforms)}}class ParsedUpdateData{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function __PRIVATE_isWrite(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ic:t})}}class __PRIVATE_ParseContextImpl{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Vc(e),o}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ic)&&cn$1.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||__PRIVATE_newSerializer(e)}bc(e,n,s,o=!1){return new __PRIVATE_ParseContextImpl({Ic:e,methodName:n,wc:s,path:FieldPath$1.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(t){const e=t._freezeSettings(),n=__PRIVATE_newSerializer(t._databaseId);return new __PRIVATE_UserDataReader(t._databaseId,!!e.ignoreUndefinedProperties,n)}function __PRIVATE_parseSetData(t,e,n,s,o,u={}){const d=t.bc(u.merge||u.mergeFields?2:0,e,n,o);__PRIVATE_validatePlainObject("Data must be an object, but it was:",d,s);const g=__PRIVATE_parseObject(s,d);let y,v;if(u.merge)y=new FieldMask(d.fieldMask),v=d.fieldTransforms;else if(u.mergeFields){const w=[];for(const T of u.mergeFields){const A=__PRIVATE_fieldPathFromArgument$1(e,T,n);if(!d.contains(A))throw new FirestoreError(N.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(w,A)||w.push(A)}y=new FieldMask(w),v=d.fieldTransforms.filter(T=>y.covers(T.field))}else y=null,v=d.fieldTransforms;return new ParsedSetData(new ObjectValue(g),y,v)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}class __PRIVATE_ServerTimestampFieldValueImpl extends FieldValue{_toFieldTransform(e){return new FieldTransform(e.path,new __PRIVATE_ServerTimestampTransform)}isEqual(e){return e instanceof __PRIVATE_ServerTimestampFieldValueImpl}}function __PRIVATE_parseUpdateData(t,e,n,s){const o=t.bc(1,e,n);__PRIVATE_validatePlainObject("Data must be an object, but it was:",o,s);const u=[],d=ObjectValue.empty();forEach(s,(y,v)=>{const w=__PRIVATE_fieldPathFromDotSeparatedString(e,y,n);v=getModularInstance(v);const T=o.mc(w);if(v instanceof __PRIVATE_DeleteFieldValueImpl)u.push(w);else{const A=__PRIVATE_parseData(v,T);A!=null&&(u.push(w),d.set(w,A))}});const g=new FieldMask(u);return new ParsedUpdateData(d,g,o.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(t,e,n,s,o,u){const d=t.bc(1,e,n),g=[__PRIVATE_fieldPathFromArgument$1(e,s,n)],y=[o];if(u.length%2!=0)throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)g.push(__PRIVATE_fieldPathFromArgument$1(e,u[A])),y.push(u[A+1]);const v=[],w=ObjectValue.empty();for(let A=g.length-1;A>=0;--A)if(!__PRIVATE_fieldMaskContains(v,g[A])){const C=g[A];let j=y[A];j=getModularInstance(j);const D=d.mc(C);if(j instanceof __PRIVATE_DeleteFieldValueImpl)v.push(C);else{const H=__PRIVATE_parseData(j,D);H!=null&&(v.push(C),w.set(C,H))}}const T=new FieldMask(v);return new ParsedUpdateData(w,T,d.fieldTransforms)}function __PRIVATE_parseQueryValue(t,e,n,s=!1){return __PRIVATE_parseData(n,t.bc(s?4:3,e))}function __PRIVATE_parseData(t,e){if(__PRIVATE_looksLikeJsonObject(t=getModularInstance(t)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,t),__PRIVATE_parseObject(t,e);if(t instanceof FieldValue)return function(s,o){if(!__PRIVATE_isWrite(o.Ic))throw o.gc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,o){const u=[];let d=0;for(const g of s){let y=__PRIVATE_parseData(g,o.fc(d));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),d++}return{arrayValue:{values:u}}}(t,e)}return function(s,o){if((s=getModularInstance(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return toNumber(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Timestamp.fromDate(s);return{timestampValue:toTimestamp(o.serializer,u)}}if(s instanceof Timestamp){const u=new Timestamp(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:toTimestamp(o.serializer,u)}}if(s instanceof GeoPoint)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(o.serializer,s._byteString)};if(s instanceof DocumentReference){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.gc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:__PRIVATE_toResourceName(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof VectorValue)return function(d,g){return{mapValue:{fields:{[ct]:{stringValue:Pt},[Tt]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw g.gc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(g.serializer,v)})}}}}}}(s,o);throw o.gc(`Unsupported field value: ${__PRIVATE_valueDescription(s)}`)}(t,e)}function __PRIVATE_parseObject(t,e){const n={};return isEmpty(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(t,(s,o)=>{const u=__PRIVATE_parseData(o,e.Ac(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function __PRIVATE_looksLikeJsonObject(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Timestamp||t instanceof GeoPoint||t instanceof Bytes||t instanceof DocumentReference||t instanceof FieldValue||t instanceof VectorValue)}function __PRIVATE_validatePlainObject(t,e,n){if(!__PRIVATE_looksLikeJsonObject(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=__PRIVATE_valueDescription(n);throw s==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+s)}}function __PRIVATE_fieldPathFromArgument$1(t,e,n){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(t,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",t,!1,void 0,n)}const ln=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(t,e,n){if(e.search(ln)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function __PRIVATE_createError(t,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||d)&&(y+=" (found",u&&(y+=` in field ${s}`),d&&(y+=` in document ${o}`),y+=")"),new FirestoreError(N.INVALID_ARGUMENT,g+t+y)}function __PRIVATE_fieldMaskContains(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(t,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(t,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new FirestoreError(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(t,e,...n){let s=[];e instanceof AppliableConstraint&&s.push(e),s=s.concat(n),function(u){const d=u.filter(y=>y instanceof QueryCompositeFilterConstraint).length,g=u.filter(y=>y instanceof QueryFieldFilterConstraint).length;if(d>1||d>0&&g>0)throw new FirestoreError(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)t=o._apply(t);return t}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new QueryFieldFilterConstraint(e,n,s)}_apply(e){const n=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,n),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,n))}_parse(e){const n=__PRIVATE_newUserDataReader(e.firestore);return function(u,d,g,y,v,w,T){let A;if(v.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(T,w);const j=[];for(const D of T)j.push(__PRIVATE_parseDocumentIdValue(y,u,D));A={arrayValue:{values:j}}}else A=__PRIVATE_parseDocumentIdValue(y,u,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(T,w),A=__PRIVATE_parseQueryValue(g,d,T,w==="in"||w==="not-in");return FieldFilter.create(v,w,A)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function where(t,e,n){const s=e,o=__PRIVATE_fieldPathFromArgument("where",t);return QueryFieldFilterConstraint._create(o,s,n)}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new QueryCompositeFilterConstraint(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:CompositeFilter.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let d=o;const g=u.getFlattenedFilters();for(const y of g)__PRIVATE_validateNewFieldFilter(d,y),d=__PRIVATE_queryWithAddedFilter(d,y)}(e._query,n),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new QueryOrderByConstraint(e,n)}_apply(e){const n=function(o,u,d){if(o.startAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(u,d)}(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new __PRIVATE_QueryImpl(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function orderBy(t,e="asc"){const n=e,s=__PRIVATE_fieldPathFromArgument("orderBy",t);return QueryOrderByConstraint._create(s,n)}function __PRIVATE_parseDocumentIdValue(t,e,n){if(typeof(n=getModularInstance(n))=="string"){if(n==="")throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&n.indexOf("/")!==-1)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ResourcePath.fromString(n));if(!DocumentKey.isDocumentKey(s))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return __PRIVATE_refValue(t,new DocumentKey(s))}if(n instanceof DocumentReference)return __PRIVATE_refValue(t,n._key);throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(n)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(t,e){if(!Array.isArray(t)||t.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(t,e){const n=function(o,u){for(const d of o)for(const g of d.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null}(t.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,n="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return forEach(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Tt].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>__PRIVATE_normalizeNumber(d.doubleValue));return new VectorValue(u)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=__PRIVATE_getPreviousValue(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const n=__PRIVATE_normalizeTimestamp(e);return new Timestamp(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(s),9688,{name:e});const o=new DatabaseId(s.get(1),s.get(3)),u=new DocumentKey(s.popFirst(5));return o.isEqual(n)||__PRIVATE_logError(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new SnapshotMetadata(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,s.key,s,new SnapshotMetadata(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>{const y=new QueryDocumentSnapshot(o._firestore,o._userDataWriter,g.doc.key,g.doc,new SnapshotMetadata(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>u||g.type!==3).map(g=>{const y=new QueryDocumentSnapshot(o._firestore,o._userDataWriter,g.doc.key,g.doc,new SnapshotMetadata(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return g.type!==0&&(v=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),w=d.indexOf(g.doc.key)),{type:__PRIVATE_resultChangeType(g.type),doc:y,oldIndex:v,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function __PRIVATE_resultChangeType(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(t){t=__PRIVATE_cast(t,DocumentReference);const e=__PRIVATE_cast(t.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),t._key).then(n=>__PRIVATE_convertToDocSnapshot(e,t,n))}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,n)}}function getDocs(t){t=__PRIVATE_cast(t,Query);const e=__PRIVATE_cast(t.firestore,Firestore),n=ensureFirestoreConfigured(e),s=new __PRIVATE_ExpUserDataWriter(e);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(t._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(n,t._query).then(o=>new QuerySnapshot(e,s,t,o))}function setDoc(t,e,n){t=__PRIVATE_cast(t,DocumentReference);const s=__PRIVATE_cast(t.firestore,Firestore),o=__PRIVATE_applyFirestoreDataConverter(t.converter,e,n);return executeWrite(s,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(s),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,Precondition.none())])}function updateDoc(t,e,n,...s){t=__PRIVATE_cast(t,DocumentReference);const o=__PRIVATE_cast(t.firestore,Firestore),u=__PRIVATE_newUserDataReader(o);let d;return d=typeof(e=getModularInstance(e))=="string"||e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(u,"updateDoc",t._key,e,n,s):__PRIVATE_parseUpdateData(u,"updateDoc",t._key,e),executeWrite(o,[d.toMutation(t._key,Precondition.exists(!0))])}function deleteDoc(t){return executeWrite(__PRIVATE_cast(t.firestore,Firestore),[new __PRIVATE_DeleteMutation(t._key,Precondition.none())])}function addDoc(t,e){const n=__PRIVATE_cast(t.firestore,Firestore),s=doc(t),o=__PRIVATE_applyFirestoreDataConverter(t.converter,e);return executeWrite(n,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(t.firestore),"addDoc",s._key,o,t.converter!==null,{}).toMutation(s._key,Precondition.exists(!1))]).then(()=>s)}function executeWrite(t,e){return function(s,o){const u=new __PRIVATE_Deferred;return s.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(s),o,u)),u.promise}(ensureFirestoreConfigured(t),e)}function __PRIVATE_convertToDocSnapshot(t,e,n){const s=n.docs.get(e._key),o=new __PRIVATE_ExpUserDataWriter(t);return new DocumentSnapshot(t,o,e._key,s,new SnapshotMetadata(n.hasPendingWrites,n.fromCache),e.converter)}function serverTimestamp(){return new __PRIVATE_ServerTimestampFieldValueImpl("serverTimestamp")}(function(e,n=!0){(function(o){x$1=o})(SDK_VERSION),_registerComponent(new Component("firestore",(s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),g=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(s.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(d,s.getProvider("app-check-internal")),function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new FirestoreError(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(v.options.projectId,w)}(d,o),d);return u=Object.assign({useFetchStreams:n},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),registerVersion(F,M,e),registerVersion(F,M,"esm2017")})();var name="firebase",version$2="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name,version$2,"app");const firebaseConfig={apiKey:"AIzaSyC47zD98jUi-_T67Tn5sPNbClG56YOwu4Y",authDomain:"caminhantes-office.firebaseapp.com",projectId:"caminhantes-office",storageBucket:"caminhantes-office.firebasestorage.app",messagingSenderId:"1054244552778",appId:"1:1054244552778:web:3b37d72d563f3eeb3766b3"},app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),AuthContext=reactExports.createContext(void 0),useAuth=()=>{const t=reactExports.useContext(AuthContext);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},AuthProvider=({children:t})=>{const[e,n]=reactExports.useState(null),[s,o]=reactExports.useState(!0),u=async(v,w)=>{const{user:T}=await signInWithEmailAndPassword(auth,v,w);try{await updateDoc(doc(db,"users",T.uid),{lastLogin:serverTimestamp(),updatedAt:serverTimestamp()})}catch(A){console.error("Erro ao atualizar último login:",A)}},d=async(v,w,T)=>{const{user:A}=await createUserWithEmailAndPassword(auth,v,w);await updateProfile(A,{displayName:T})},g=async()=>{await signOut(auth)};reactExports.useEffect(()=>onAuthStateChanged(auth,w=>{n(w),o(!1)}),[]);const y={currentUser:e,login:u,register:d,logout:g,loading:s};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:y,children:!s&&t})},UserContext=reactExports.createContext(void 0),useUser=()=>{const t=reactExports.useContext(UserContext);if(t===void 0)throw new Error("useUser must be used within a UserProvider");return t},UserProvider=({children:t})=>{const{currentUser:e}=useAuth(),[n,s]=reactExports.useState(null),[o,u]=reactExports.useState([]),[d,g]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{var ne,Y,U,ee,J;if(e)try{const ie=await getDoc(doc(db,"users",e.uid));if(ie.exists()){const se=ie.data(),K={...se,id:e.uid,createdAt:(ne=se.createdAt)!=null&&ne.toDate?se.createdAt.toDate():new Date(se.createdAt),updatedAt:(Y=se.updatedAt)!=null&&Y.toDate?se.updatedAt.toDate():new Date(se.updatedAt),lastLogin:(U=se.lastLogin)!=null&&U.toDate?se.lastLogin.toDate():se.lastLogin?new Date(se.lastLogin):void 0};s(K)}else{const se={name:e.displayName||"Usuário",email:e.email||"",role:"user",active:!0,createdAt:serverTimestamp(),updatedAt:serverTimestamp()};await setDoc(doc(db,"users",e.uid),se);const K=await getDoc(doc(db,"users",e.uid));if(K.exists()){const te=K.data();s({...te,id:e.uid,createdAt:(ee=te.createdAt)!=null&&ee.toDate?te.createdAt.toDate():new Date,updatedAt:(J=te.updatedAt)!=null&&J.toDate?te.updatedAt.toDate():new Date})}}}catch(ie){console.error("Erro ao carregar dados do usuário:",ie)}else s(null);g(!1)})()},[e]);const y=async H=>{try{const{user:ne}=await createUserWithEmailAndPassword(auth,H.email,H.password);await updateProfile(ne,{displayName:H.name});const Y={name:H.name,email:H.email,role:H.role,active:H.active??!0,createdAt:serverTimestamp(),updatedAt:serverTimestamp(),createdBy:e==null?void 0:e.uid};await setDoc(doc(db,"users",ne.uid),Y),await T()}catch(ne){throw console.error("Erro ao criar usuário:",ne),ne}},v=async(H,ne)=>{try{await updateDoc(doc(db,"users",H),{active:ne,updatedAt:serverTimestamp()}),u(Y=>Y.map(U=>U.id===H?{...U,active:ne}:U))}catch(Y){throw console.error("Erro ao atualizar status do usuário:",Y),Y}},w=async(H,ne)=>{try{await updateDoc(doc(db,"users",H),{role:ne,updatedAt:serverTimestamp()}),u(Y=>Y.map(U=>U.id===H?{...U,role:ne}:U))}catch(Y){throw console.error("Erro ao atualizar role do usuário:",Y),Y}},T=async()=>{try{const H=query(collection(db,"users"),orderBy("createdAt","desc")),ne=await getDocs(H),Y=[];ne.forEach(U=>{var J,ie,se;const ee=U.data();Y.push({...ee,id:U.id,createdAt:(J=ee.createdAt)!=null&&J.toDate?ee.createdAt.toDate():new Date(ee.createdAt),updatedAt:(ie=ee.updatedAt)!=null&&ie.toDate?ee.updatedAt.toDate():new Date(ee.updatedAt),lastLogin:(se=ee.lastLogin)!=null&&se.toDate?ee.lastLogin.toDate():ee.lastLogin?new Date(ee.lastLogin):void 0})}),u(Y)}catch(H){throw console.error("Erro ao carregar usuários:",H),H}},D={currentUserData:n,users:o,loading:d,createUser:y,updateUserStatus:v,updateUserRole:w,loadUsers:T,canAccessAdmin:()=>(n==null?void 0:n.role)==="root"||(n==null?void 0:n.role)==="editor",canManageUsers:()=>(n==null?void 0:n.role)==="root"||(n==null?void 0:n.role)==="editor",isRoot:()=>(n==null?void 0:n.role)==="root"};return jsxRuntimeExports.jsx(UserContext.Provider,{value:D,children:t})},IMGBB_API_KEY="bcd04b7d89a2adaba76c1df8a88a8ac4",IMGBB_API_URL="https://api.imgbb.com/1/upload",uploadToImgBB=async t=>{var e;try{const n=validateImageFile(t);if(!n.valid)return{success:!1,url:"",error:n.error||"Arquivo inválido"};const s=await fileToBase64(t),o=new FormData;o.append("key",IMGBB_API_KEY),o.append("image",s.split(",")[1]),o.append("name",t.name);const u=await fetch(IMGBB_API_URL,{method:"POST",body:o});if(!u.ok)return{success:!1,url:"",error:`Erro HTTP: ${u.status} - ${u.statusText}`};const d=await u.json();return d.success?{success:!0,url:d.data.url,deleteUrl:d.data.delete_url}:{success:!1,url:"",error:((e=d.error)==null?void 0:e.message)||"Erro no upload para ImgBB"}}catch(n){return console.error("Erro no upload para ImgBB:",n),{success:!1,url:"",error:n instanceof Error?n.message:"Erro de conexão com o serviço de upload"}}},fileToBase64=t=>new Promise((e,n)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>e(s.result),s.onerror=o=>n(o)}),validateImageFile=t=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type))return{valid:!1,error:"Formato não suportado. Use JPG, PNG ou WebP."};const n=32*1024*1024;return t.size>n?{valid:!1,error:"Arquivo muito grande. Máximo 32MB."}:{valid:!0}},PLAYER_POSITIONS={GOL:"Goleiro",DEF:"Defensor",MEI:"Meio-campo",ATA:"Atacante"},POSITION_COLORS={GOL:"bg-yellow-100 text-yellow-800",DEF:"bg-blue-100 text-blue-800",MEI:"bg-green-100 text-green-800",ATA:"bg-red-100 text-red-800"},INITIAL_LIVERPOOL_SQUAD=[{name:"Alisson",number:"1",position:"GOL"},{name:"Kelleher",number:"62",position:"GOL"},{name:"Jaros",number:"56",position:"GOL"},{name:"Alexander-Arnold",number:"66",position:"DEF"},{name:"Bradley",number:"84",position:"DEF"},{name:"Konaté",number:"5",position:"DEF"},{name:"Quansah",number:"78",position:"DEF"},{name:"Virgil",number:"4",position:"DEF"},{name:"Gomez",number:"2",position:"DEF"},{name:"Robertson",number:"26",position:"DEF"},{name:"Tsimikas",number:"21",position:"DEF"},{name:"Gravenberch",number:"38",position:"MEI"},{name:"Endo",number:"3",position:"MEI"},{name:"Mac Allister",number:"10",position:"MEI"},{name:"Jones",number:"17",position:"MEI"},{name:"Szoboszlai",number:"8",position:"MEI"},{name:"Elliott",number:"19",position:"MEI"},{name:"Nyoni",number:"98",position:"MEI"},{name:"McConnell",number:"53",position:"MEI"},{name:"Morton",number:"80",position:"MEI"},{name:"Gakpo",number:"18",position:"ATA"},{name:"Díaz",number:"7",position:"ATA"},{name:"Jota",number:"20",position:"ATA"},{name:"Núñez",number:"9",position:"ATA"},{name:"Chiesa",number:"14",position:"ATA"},{name:"Salah",number:"11",position:"ATA"},{name:"Ngumoha",number:"73",position:"ATA"}],SquadContext=reactExports.createContext(void 0),useSquad=()=>{const t=reactExports.useContext(SquadContext);if(t===void 0)throw new Error("useSquad must be used within a SquadProvider");return t},SquadProvider=({children:t})=>{const[e,n]=reactExports.useState([]),[s,o]=reactExports.useState(!0),{currentUser:u}=useAuth(),d=async()=>{try{o(!0);const Y=collection(db,"squad"),U=await getDocs(Y),ee=[];U.forEach(J=>{var se,K;const ie=J.data();ee.push({id:J.id,name:ie.name,number:ie.number,position:ie.position,imgUrl:ie.imgUrl||[],createdAt:((se=ie.createdAt)==null?void 0:se.toDate())||new Date,updatedAt:((K=ie.updatedAt)==null?void 0:K.toDate())||new Date})}),ee.sort((J,ie)=>{const se={GOL:1,DEF:2,MEI:3,ATA:4},K=se[J.position]-se[ie.position];return K!==0?K:parseInt(J.number)-parseInt(ie.number)}),n(ee)}catch(Y){console.error("Erro ao carregar elenco:",Y)}finally{o(!1)}},g=async Y=>{if(!u)return{success:!1,error:"Usuário não autenticado"};const U=H(Y);if(!U.valid)return{success:!1,error:U.error};if(C(Y.number))return{success:!1,error:`Número ${Y.number} já está em uso`};try{const ee=doc(collection(db,"squad")),J=new Date;await setDoc(ee,{name:Y.name.trim(),number:Y.number.trim(),position:Y.position,imgUrl:[],createdAt:J,updatedAt:J});const ie={id:ee.id,name:Y.name.trim(),number:Y.number.trim(),position:Y.position,imgUrl:[],createdAt:J,updatedAt:J};return n(se=>[...se,ie].sort((te,re)=>{const ce={GOL:1,DEF:2,MEI:3,ATA:4},le=ce[te.position]-ce[re.position];return le!==0?le:parseInt(te.number)-parseInt(re.number)})),{success:!0}}catch(ee){return console.error("Erro ao adicionar jogador:",ee),{success:!1,error:"Erro interno ao adicionar jogador"}}},y=async(Y,U)=>{const ee=H(U);if(!ee.valid)return{success:!1,error:ee.error};if(C(U.number,Y))return{success:!1,error:`Número ${U.number} já está em uso`};try{const J=doc(db,"squad",Y),ie=new Date;return await updateDoc(J,{name:U.name.trim(),number:U.number.trim(),position:U.position,updatedAt:ie}),n(se=>se.map(te=>te.id===Y?{...te,name:U.name.trim(),number:U.number.trim(),position:U.position,updatedAt:ie}:te).sort((te,re)=>{const ce={GOL:1,DEF:2,MEI:3,ATA:4},le=ce[te.position]-ce[re.position];return le!==0?le:parseInt(te.number)-parseInt(re.number)})),{success:!0}}catch(J){return console.error("Erro ao atualizar jogador:",J),{success:!1,error:"Erro interno ao atualizar jogador"}}},v=async Y=>{try{return await deleteDoc(doc(db,"squad",Y)),n(U=>U.filter(ee=>ee.id!==Y)),{success:!0}}catch(U){return console.error("Erro ao deletar jogador:",U),{success:!1,error:"Erro ao deletar jogador"}}},w=async(Y,U)=>{if(!u)return{success:!1,error:"Usuário não autenticado"};const ee=e.find(J=>J.id===Y);if(!ee)return{success:!1,error:"Jogador não encontrado"};if(ee.imgUrl&&ee.imgUrl.length>=2)return{success:!1,error:"Jogador já possui o máximo de 2 imagens"};try{const J=await uploadToImgBB(U);if(!J.success||!J.url)return{success:!1,error:J.error||"Erro no upload da imagem"};const ie=doc(db,"squad",Y),K=[...ee.imgUrl||[],J.url];return await updateDoc(ie,{imgUrl:K,updatedAt:new Date}),n(te=>te.map(re=>re.id===Y?{...re,imgUrl:K,updatedAt:new Date}:re)),{success:!0,imageUrl:J.url}}catch(J){return console.error("Erro ao fazer upload da imagem:",J),{success:!1,error:"Erro interno no upload da imagem"}}},T=async(Y,U)=>{if(!u)return{success:!1,error:"Usuário não autenticado"};const ee=e.find(J=>J.id===Y);if(!ee)return{success:!1,error:"Jogador não encontrado"};try{const ie=(ee.imgUrl||[]).filter(K=>K!==U),se=doc(db,"squad",Y);return await updateDoc(se,{imgUrl:ie,updatedAt:new Date}),n(K=>K.map(te=>te.id===Y?{...te,imgUrl:ie,updatedAt:new Date}:te)),{success:!0}}catch(J){return console.error("Erro ao remover imagem:",J),{success:!1,error:"Erro interno ao remover imagem"}}},A=Y=>e.filter(U=>U.position===Y),C=(Y,U)=>e.some(ee=>ee.number===Y.trim()&&ee.id!==U),j=async()=>{if(!u)return{success:!1,error:"Usuário não autenticado"};try{if(o(!0),e.length>0)return{success:!1,error:"Elenco já foi inicializado"};const Y=[],U=new Date;for(const ee of INITIAL_LIVERPOOL_SQUAD){const J=doc(collection(db,"squad"));Y.push(setDoc(J,{...ee,imgUrl:[],createdAt:U,updatedAt:U}))}return await Promise.all(Y),await d(),{success:!0}}catch(Y){return console.error("Erro ao inicializar elenco:",Y),{success:!1,error:"Erro ao inicializar elenco"}}finally{o(!1)}},D=async()=>{await d()},H=Y=>{if(!Y.name.trim())return{valid:!1,error:"Nome é obrigatório"};if(Y.name.trim().length<2)return{valid:!1,error:"Nome deve ter pelo menos 2 caracteres"};if(!Y.number.trim())return{valid:!1,error:"Número é obrigatório"};const U=parseInt(Y.number.trim());return isNaN(U)||U<1||U>99?{valid:!1,error:"Número deve ser entre 1 e 99"}:Y.position?{valid:!0}:{valid:!1,error:"Posição é obrigatória"}};reactExports.useEffect(()=>{d()},[]);const ne={players:e,loading:s,addPlayer:g,updatePlayer:y,deletePlayer:v,getPlayersByPosition:A,isNumberTaken:C,initializeSquad:j,refreshSquad:D,uploadPlayerImage:w,removePlayerImage:T};return jsxRuntimeExports.jsx(SquadContext.Provider,{value:ne,children:t})};var parser={},hasRequiredParser;function requireParser(){return hasRequiredParser||(hasRequiredParser=1,parser.load=function(t,e,n={}){var s,o,u;for(s in e)u=e[s],n[s]=(o=t[s])!=null?o:u;return n},parser.overwrite=function(t,e,n={}){var s,o;for(s in t)o=t[s],e[s]!==void 0&&(n[s]=o);return n}),parser}var DLList_1,hasRequiredDLList;function requireDLList(){if(hasRequiredDLList)return DLList_1;hasRequiredDLList=1;var t;return t=class{constructor(n,s){this.incr=n,this.decr=s,this._first=null,this._last=null,this.length=0}push(n){var s;this.length++,typeof this.incr=="function"&&this.incr(),s={value:n,prev:this._last,next:null},this._last!=null?(this._last.next=s,this._last=s):this._first=this._last=s}shift(){var n;if(this._first!=null)return this.length--,typeof this.decr=="function"&&this.decr(),n=this._first.value,(this._first=this._first.next)!=null?this._first.prev=null:this._last=null,n}first(){if(this._first!=null)return this._first.value}getArray(){var n,s,o;for(n=this._first,o=[];n!=null;)o.push((s=n,n=n.next,s.value));return o}forEachShift(n){var s;for(s=this.shift();s!=null;)n(s),s=this.shift()}debug(){var n,s,o,u,d;for(n=this._first,d=[];n!=null;)d.push((s=n,n=n.next,{value:s.value,prev:(o=s.prev)!=null?o.value:void 0,next:(u=s.next)!=null?u.value:void 0}));return d}},DLList_1=t,DLList_1}var Events_1,hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return Events_1;hasRequiredEvents=1;function t(s,o,u,d,g,y,v){try{var w=s[y](v),T=w.value}catch(A){u(A);return}w.done?o(T):Promise.resolve(T).then(d,g)}function e(s){return function(){var o=this,u=arguments;return new Promise(function(d,g){var y=s.apply(o,u);function v(T){t(y,d,g,v,w,"next",T)}function w(T){t(y,d,g,v,w,"throw",T)}v(void 0)})}}var n;return n=class{constructor(o){if(this.instance=o,this._events={},this.instance.on!=null||this.instance.once!=null||this.instance.removeAllListeners!=null)throw new Error("An Emitter already exists for this object");this.instance.on=(u,d)=>this._addListener(u,"many",d),this.instance.once=(u,d)=>this._addListener(u,"once",d),this.instance.removeAllListeners=(u=null)=>u!=null?delete this._events[u]:this._events={}}_addListener(o,u,d){var g;return(g=this._events)[o]==null&&(g[o]=[]),this._events[o].push({cb:d,status:u}),this.instance}listenerCount(o){return this._events[o]!=null?this._events[o].length:0}trigger(o,...u){var d=this;return e(function*(){var g,y;try{return o!=="debug"&&d.trigger("debug",`Event triggered: ${o}`,u),d._events[o]==null?void 0:(d._events[o]=d._events[o].filter(function(v){return v.status!=="none"}),y=d._events[o].map(function(){var v=e(function*(w){var T,A;if(w.status!=="none"){w.status==="once"&&(w.status="none");try{return A=typeof w.cb=="function"?w.cb(...u):void 0,typeof(A!=null?A.then:void 0)=="function"?yield A:A}catch(C){return T=C,d.trigger("error",T),null}}});return function(w){return v.apply(this,arguments)}}()),(yield Promise.all(y)).find(function(v){return v!=null}))}catch(v){return g=v,d.trigger("error",g),null}})()}},Events_1=n,Events_1}var Queues_1,hasRequiredQueues;function requireQueues(){if(hasRequiredQueues)return Queues_1;hasRequiredQueues=1;var t,e,n;return t=requireDLList(),e=requireEvents(),n=class{constructor(o){this.Events=new e(this),this._length=0,this._lists=(function(){var u,d,g;for(g=[],u=1,d=o;1<=d?u<=d:u>=d;1<=d?++u:--u)g.push(new t(()=>this.incr(),()=>this.decr()));return g}).call(this)}incr(){if(this._length++===0)return this.Events.trigger("leftzero")}decr(){if(--this._length===0)return this.Events.trigger("zero")}push(o){return this._lists[o.options.priority].push(o)}queued(o){return o!=null?this._lists[o].length:this._length}shiftAll(o){return this._lists.forEach(function(u){return u.forEachShift(o)})}getFirst(o=this._lists){var u,d,g;for(u=0,d=o.length;u<d;u++)if(g=o[u],g.length>0)return g;return[]}shiftLastFrom(o){return this.getFirst(this._lists.slice(o).reverse()).shift()}},Queues_1=n,Queues_1}var BottleneckError_1,hasRequiredBottleneckError;function requireBottleneckError(){if(hasRequiredBottleneckError)return BottleneckError_1;hasRequiredBottleneckError=1;var t;return t=class extends Error{},BottleneckError_1=t,BottleneckError_1}var Job_1,hasRequiredJob;function requireJob(){if(hasRequiredJob)return Job_1;hasRequiredJob=1;function t(g,y,v,w,T,A,C){try{var j=g[A](C),D=j.value}catch(H){v(H);return}j.done?y(D):Promise.resolve(D).then(w,T)}function e(g){return function(){var y=this,v=arguments;return new Promise(function(w,T){var A=g.apply(y,v);function C(D){t(A,w,T,C,j,"next",D)}function j(D){t(A,w,T,C,j,"throw",D)}C(void 0)})}}var n,s,o,u,d;return u=10,s=5,d=requireParser(),n=requireBottleneckError(),o=class{constructor(y,v,w,T,A,C,j,D){this.task=y,this.args=v,this.rejectOnDrop=A,this.Events=C,this._states=j,this.Promise=D,this.options=d.load(w,T),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===T.id&&(this.options.id=`${this.options.id}-${this._randomIndex()}`),this.promise=new this.Promise((H,ne)=>{this._resolve=H,this._reject=ne}),this.retryCount=0}_sanitizePriority(y){var v;return v=~~y!==y?s:y,v<0?0:v>u-1?u-1:v}_randomIndex(){return Math.random().toString(36).slice(2)}doDrop({error:y,message:v="This job has been dropped by Bottleneck"}={}){return this._states.remove(this.options.id)?(this.rejectOnDrop&&this._reject(y??new n(v)),this.Events.trigger("dropped",{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0):!1}_assertStatus(y){var v;if(v=this._states.jobStatus(this.options.id),!(v===y||y==="DONE"&&v===null))throw new n(`Invalid job status ${v}, expected ${y}. Please open an issue at https://github.com/SGrondin/bottleneck/issues`)}doReceive(){return this._states.start(this.options.id),this.Events.trigger("received",{args:this.args,options:this.options})}doQueue(y,v){return this._assertStatus("RECEIVED"),this._states.next(this.options.id),this.Events.trigger("queued",{args:this.args,options:this.options,reachedHWM:y,blocked:v})}doRun(){return this.retryCount===0?(this._assertStatus("QUEUED"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),this.Events.trigger("scheduled",{args:this.args,options:this.options})}doExecute(y,v,w,T){var A=this;return e(function*(){var C,j,D;A.retryCount===0?(A._assertStatus("RUNNING"),A._states.next(A.options.id)):A._assertStatus("EXECUTING"),j={args:A.args,options:A.options,retryCount:A.retryCount},A.Events.trigger("executing",j);try{if(D=yield y!=null?y.schedule(A.options,A.task,...A.args):A.task(...A.args),v())return A.doDone(j),yield T(A.options,j),A._assertStatus("DONE"),A._resolve(D)}catch(H){return C=H,A._onFailure(C,j,v,w,T)}})()}doExpire(y,v,w){var T,A;return this._states.jobStatus(this.options.id==="RUNNING")&&this._states.next(this.options.id),this._assertStatus("EXECUTING"),A={args:this.args,options:this.options,retryCount:this.retryCount},T=new n(`This job timed out after ${this.options.expiration} ms.`),this._onFailure(T,A,y,v,w)}_onFailure(y,v,w,T,A){var C=this;return e(function*(){var j,D;if(w())return j=yield C.Events.trigger("failed",y,v),j!=null?(D=~~j,C.Events.trigger("retry",`Retrying ${C.options.id} after ${D} ms`,v),C.retryCount++,T(D)):(C.doDone(v),yield A(C.options,v),C._assertStatus("DONE"),C._reject(y))})()}doDone(y){return this._assertStatus("EXECUTING"),this._states.next(this.options.id),this.Events.trigger("done",y)}},Job_1=o,Job_1}var LocalDatastore_1,hasRequiredLocalDatastore;function requireLocalDatastore(){if(hasRequiredLocalDatastore)return LocalDatastore_1;hasRequiredLocalDatastore=1;function t(u,d,g,y,v,w,T){try{var A=u[w](T),C=A.value}catch(j){g(j);return}A.done?d(C):Promise.resolve(C).then(y,v)}function e(u){return function(){var d=this,g=arguments;return new Promise(function(y,v){var w=u.apply(d,g);function T(C){t(w,y,v,T,A,"next",C)}function A(C){t(w,y,v,T,A,"throw",C)}T(void 0)})}}var n,s,o;return o=requireParser(),n=requireBottleneckError(),s=class{constructor(d,g,y){this.instance=d,this.storeOptions=g,this.clientId=this.instance._randomIndex(),o.load(y,y,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat()}_startHeartbeat(){var d;return this.heartbeat==null&&(this.storeOptions.reservoirRefreshInterval!=null&&this.storeOptions.reservoirRefreshAmount!=null||this.storeOptions.reservoirIncreaseInterval!=null&&this.storeOptions.reservoirIncreaseAmount!=null)?typeof(d=this.heartbeat=setInterval(()=>{var g,y,v,w,T;if(w=Date.now(),this.storeOptions.reservoirRefreshInterval!=null&&w>=this._lastReservoirRefresh+this.storeOptions.reservoirRefreshInterval&&(this._lastReservoirRefresh=w,this.storeOptions.reservoir=this.storeOptions.reservoirRefreshAmount,this.instance._drainAll(this.computeCapacity())),this.storeOptions.reservoirIncreaseInterval!=null&&w>=this._lastReservoirIncrease+this.storeOptions.reservoirIncreaseInterval){var A=this.storeOptions;if(g=A.reservoirIncreaseAmount,v=A.reservoirIncreaseMaximum,T=A.reservoir,this._lastReservoirIncrease=w,y=v!=null?Math.min(g,v-T):g,y>0)return this.storeOptions.reservoir+=y,this.instance._drainAll(this.computeCapacity())}},this.heartbeatInterval)).unref=="function"?d.unref():void 0:clearInterval(this.heartbeat)}__publish__(d){var g=this;return e(function*(){return yield g.yieldLoop(),g.instance.Events.trigger("message",d.toString())})()}__disconnect__(d){var g=this;return e(function*(){return yield g.yieldLoop(),clearInterval(g.heartbeat),g.Promise.resolve()})()}yieldLoop(d=0){return new this.Promise(function(g,y){return setTimeout(g,d)})}computePenalty(){var d;return(d=this.storeOptions.penalty)!=null?d:15*this.storeOptions.minTime||5e3}__updateSettings__(d){var g=this;return e(function*(){return yield g.yieldLoop(),o.overwrite(d,d,g.storeOptions),g._startHeartbeat(),g.instance._drainAll(g.computeCapacity()),!0})()}__running__(){var d=this;return e(function*(){return yield d.yieldLoop(),d._running})()}__queued__(){var d=this;return e(function*(){return yield d.yieldLoop(),d.instance.queued()})()}__done__(){var d=this;return e(function*(){return yield d.yieldLoop(),d._done})()}__groupCheck__(d){var g=this;return e(function*(){return yield g.yieldLoop(),g._nextRequest+g.timeout<d})()}computeCapacity(){var d,g,y=this.storeOptions;return d=y.maxConcurrent,g=y.reservoir,d!=null&&g!=null?Math.min(d-this._running,g):d!=null?d-this._running:g??null}conditionsCheck(d){var g;return g=this.computeCapacity(),g==null||d<=g}__incrementReservoir__(d){var g=this;return e(function*(){var y;return yield g.yieldLoop(),y=g.storeOptions.reservoir+=d,g.instance._drainAll(g.computeCapacity()),y})()}__currentReservoir__(){var d=this;return e(function*(){return yield d.yieldLoop(),d.storeOptions.reservoir})()}isBlocked(d){return this._unblockTime>=d}check(d,g){return this.conditionsCheck(d)&&this._nextRequest-g<=0}__check__(d){var g=this;return e(function*(){var y;return yield g.yieldLoop(),y=Date.now(),g.check(d,y)})()}__register__(d,g,y){var v=this;return e(function*(){var w,T;return yield v.yieldLoop(),w=Date.now(),v.conditionsCheck(g)?(v._running+=g,v.storeOptions.reservoir!=null&&(v.storeOptions.reservoir-=g),T=Math.max(v._nextRequest-w,0),v._nextRequest=w+T+v.storeOptions.minTime,{success:!0,wait:T,reservoir:v.storeOptions.reservoir}):{success:!1}})()}strategyIsBlock(){return this.storeOptions.strategy===3}__submit__(d,g){var y=this;return e(function*(){var v,w,T;if(yield y.yieldLoop(),y.storeOptions.maxConcurrent!=null&&g>y.storeOptions.maxConcurrent)throw new n(`Impossible to add a job having a weight of ${g} to a limiter having a maxConcurrent setting of ${y.storeOptions.maxConcurrent}`);return w=Date.now(),T=y.storeOptions.highWater!=null&&d===y.storeOptions.highWater&&!y.check(g,w),v=y.strategyIsBlock()&&(T||y.isBlocked(w)),v&&(y._unblockTime=w+y.computePenalty(),y._nextRequest=y._unblockTime+y.storeOptions.minTime,y.instance._dropAllQueued()),{reachedHWM:T,blocked:v,strategy:y.storeOptions.strategy}})()}__free__(d,g){var y=this;return e(function*(){return yield y.yieldLoop(),y._running-=g,y._done+=g,y.instance._drainAll(y.computeCapacity()),{running:y._running}})()}},LocalDatastore_1=s,LocalDatastore_1}var Scripts={};const require$$0={"blacklist_client.lua":`local blacklist = ARGV[num_static_argv + 1]

if redis.call('zscore', client_last_seen_key, blacklist) then
  redis.call('zadd', client_last_seen_key, 0, blacklist)
end


return {}
`,"check.lua":`local weight = tonumber(ARGV[num_static_argv + 1])

local capacity = process_tick(now, false)['capacity']
local nextRequest = tonumber(redis.call('hget', settings_key, 'nextRequest'))

return conditions_check(capacity, weight) and nextRequest - now <= 0
`,"conditions_check.lua":`local conditions_check = function (capacity, weight)
  return capacity == nil or weight <= capacity
end
`,"current_reservoir.lua":`return process_tick(now, false)['reservoir']
`,"done.lua":`process_tick(now, false)

return tonumber(redis.call('hget', settings_key, 'done'))
`,"free.lua":`local index = ARGV[num_static_argv + 1]

redis.call('zadd', job_expirations_key, 0, index)

return process_tick(now, false)['running']
`,"get_time.lua":`redis.replicate_commands()

local get_time = function ()
  local time = redis.call('time')

  return tonumber(time[1]..string.sub(time[2], 1, 3))
end
`,"group_check.lua":`return not (redis.call('exists', settings_key) == 1)
`,"heartbeat.lua":`process_tick(now, true)
`,"increment_reservoir.lua":`local incr = tonumber(ARGV[num_static_argv + 1])

redis.call('hincrby', settings_key, 'reservoir', incr)

local reservoir = process_tick(now, true)['reservoir']

local groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))
refresh_expiration(0, 0, groupTimeout)

return reservoir
`,"init.lua":`local clear = tonumber(ARGV[num_static_argv + 1])
local limiter_version = ARGV[num_static_argv + 2]
local num_local_argv = num_static_argv + 2

if clear == 1 then
  redis.call('del', unpack(KEYS))
end

if redis.call('exists', settings_key) == 0 then
  -- Create
  local args = {'hmset', settings_key}

  for i = num_local_argv + 1, #ARGV do
    table.insert(args, ARGV[i])
  end

  redis.call(unpack(args))
  redis.call('hmset', settings_key,
    'nextRequest', now,
    'lastReservoirRefresh', now,
    'lastReservoirIncrease', now,
    'running', 0,
    'done', 0,
    'unblockTime', 0,
    'capacityPriorityCounter', 0
  )

else
  -- Apply migrations
  local settings = redis.call('hmget', settings_key,
    'id',
    'version'
  )
  local id = settings[1]
  local current_version = settings[2]

  if current_version ~= limiter_version then
    local version_digits = {}
    for k, v in string.gmatch(current_version, "([^.]+)") do
      table.insert(version_digits, tonumber(k))
    end

    -- 2.10.0
    if version_digits[2] < 10 then
      redis.call('hsetnx', settings_key, 'reservoirRefreshInterval', '')
      redis.call('hsetnx', settings_key, 'reservoirRefreshAmount', '')
      redis.call('hsetnx', settings_key, 'lastReservoirRefresh', '')
      redis.call('hsetnx', settings_key, 'done', 0)
      redis.call('hset', settings_key, 'version', '2.10.0')
    end

    -- 2.11.1
    if version_digits[2] < 11 or (version_digits[2] == 11 and version_digits[3] < 1) then
      if redis.call('hstrlen', settings_key, 'lastReservoirRefresh') == 0 then
        redis.call('hmset', settings_key,
          'lastReservoirRefresh', now,
          'version', '2.11.1'
        )
      end
    end

    -- 2.14.0
    if version_digits[2] < 14 then
      local old_running_key = 'b_'..id..'_running'
      local old_executing_key = 'b_'..id..'_executing'

      if redis.call('exists', old_running_key) == 1 then
        redis.call('rename', old_running_key, job_weights_key)
      end
      if redis.call('exists', old_executing_key) == 1 then
        redis.call('rename', old_executing_key, job_expirations_key)
      end
      redis.call('hset', settings_key, 'version', '2.14.0')
    end

    -- 2.15.2
    if version_digits[2] < 15 or (version_digits[2] == 15 and version_digits[3] < 2) then
      redis.call('hsetnx', settings_key, 'capacityPriorityCounter', 0)
      redis.call('hset', settings_key, 'version', '2.15.2')
    end

    -- 2.17.0
    if version_digits[2] < 17 then
      redis.call('hsetnx', settings_key, 'clientTimeout', 10000)
      redis.call('hset', settings_key, 'version', '2.17.0')
    end

    -- 2.18.0
    if version_digits[2] < 18 then
      redis.call('hsetnx', settings_key, 'reservoirIncreaseInterval', '')
      redis.call('hsetnx', settings_key, 'reservoirIncreaseAmount', '')
      redis.call('hsetnx', settings_key, 'reservoirIncreaseMaximum', '')
      redis.call('hsetnx', settings_key, 'lastReservoirIncrease', now)
      redis.call('hset', settings_key, 'version', '2.18.0')
    end

  end

  process_tick(now, false)
end

local groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))
refresh_expiration(0, 0, groupTimeout)

return {}
`,"process_tick.lua":`local process_tick = function (now, always_publish)

  local compute_capacity = function (maxConcurrent, running, reservoir)
    if maxConcurrent ~= nil and reservoir ~= nil then
      return math.min((maxConcurrent - running), reservoir)
    elseif maxConcurrent ~= nil then
      return maxConcurrent - running
    elseif reservoir ~= nil then
      return reservoir
    else
      return nil
    end
  end

  local settings = redis.call('hmget', settings_key,
    'id',
    'maxConcurrent',
    'running',
    'reservoir',
    'reservoirRefreshInterval',
    'reservoirRefreshAmount',
    'lastReservoirRefresh',
    'reservoirIncreaseInterval',
    'reservoirIncreaseAmount',
    'reservoirIncreaseMaximum',
    'lastReservoirIncrease',
    'capacityPriorityCounter',
    'clientTimeout'
  )
  local id = settings[1]
  local maxConcurrent = tonumber(settings[2])
  local running = tonumber(settings[3])
  local reservoir = tonumber(settings[4])
  local reservoirRefreshInterval = tonumber(settings[5])
  local reservoirRefreshAmount = tonumber(settings[6])
  local lastReservoirRefresh = tonumber(settings[7])
  local reservoirIncreaseInterval = tonumber(settings[8])
  local reservoirIncreaseAmount = tonumber(settings[9])
  local reservoirIncreaseMaximum = tonumber(settings[10])
  local lastReservoirIncrease = tonumber(settings[11])
  local capacityPriorityCounter = tonumber(settings[12])
  local clientTimeout = tonumber(settings[13])

  local initial_capacity = compute_capacity(maxConcurrent, running, reservoir)

  --
  -- Process 'running' changes
  --
  local expired = redis.call('zrangebyscore', job_expirations_key, '-inf', '('..now)

  if #expired > 0 then
    redis.call('zremrangebyscore', job_expirations_key, '-inf', '('..now)

    local flush_batch = function (batch, acc)
      local weights = redis.call('hmget', job_weights_key, unpack(batch))
                      redis.call('hdel',  job_weights_key, unpack(batch))
      local clients = redis.call('hmget', job_clients_key, unpack(batch))
                      redis.call('hdel',  job_clients_key, unpack(batch))

      -- Calculate sum of removed weights
      for i = 1, #weights do
        acc['total'] = acc['total'] + (tonumber(weights[i]) or 0)
      end

      -- Calculate sum of removed weights by client
      local client_weights = {}
      for i = 1, #clients do
        local removed = tonumber(weights[i]) or 0
        if removed > 0 then
          acc['client_weights'][clients[i]] = (acc['client_weights'][clients[i]] or 0) + removed
        end
      end
    end

    local acc = {
      ['total'] = 0,
      ['client_weights'] = {}
    }
    local batch_size = 1000

    -- Compute changes to Zsets and apply changes to Hashes
    for i = 1, #expired, batch_size do
      local batch = {}
      for j = i, math.min(i + batch_size - 1, #expired) do
        table.insert(batch, expired[j])
      end

      flush_batch(batch, acc)
    end

    -- Apply changes to Zsets
    if acc['total'] > 0 then
      redis.call('hincrby', settings_key, 'done', acc['total'])
      running = tonumber(redis.call('hincrby', settings_key, 'running', -acc['total']))
    end

    for client, weight in pairs(acc['client_weights']) do
      redis.call('zincrby', client_running_key, -weight, client)
    end
  end

  --
  -- Process 'reservoir' changes
  --
  local reservoirRefreshActive = reservoirRefreshInterval ~= nil and reservoirRefreshAmount ~= nil
  if reservoirRefreshActive and now >= lastReservoirRefresh + reservoirRefreshInterval then
    reservoir = reservoirRefreshAmount
    redis.call('hmset', settings_key,
      'reservoir', reservoir,
      'lastReservoirRefresh', now
    )
  end

  local reservoirIncreaseActive = reservoirIncreaseInterval ~= nil and reservoirIncreaseAmount ~= nil
  if reservoirIncreaseActive and now >= lastReservoirIncrease + reservoirIncreaseInterval then
    local num_intervals = math.floor((now - lastReservoirIncrease) / reservoirIncreaseInterval)
    local incr = reservoirIncreaseAmount * num_intervals
    if reservoirIncreaseMaximum ~= nil then
      incr = math.min(incr, reservoirIncreaseMaximum - (reservoir or 0))
    end
    if incr > 0 then
      reservoir = (reservoir or 0) + incr
    end
    redis.call('hmset', settings_key,
      'reservoir', reservoir,
      'lastReservoirIncrease', lastReservoirIncrease + (num_intervals * reservoirIncreaseInterval)
    )
  end

  --
  -- Clear unresponsive clients
  --
  local unresponsive = redis.call('zrangebyscore', client_last_seen_key, '-inf', (now - clientTimeout))
  local unresponsive_lookup = {}
  local terminated_clients = {}
  for i = 1, #unresponsive do
    unresponsive_lookup[unresponsive[i]] = true
    if tonumber(redis.call('zscore', client_running_key, unresponsive[i])) == 0 then
      table.insert(terminated_clients, unresponsive[i])
    end
  end
  if #terminated_clients > 0 then
    redis.call('zrem', client_running_key,         unpack(terminated_clients))
    redis.call('hdel', client_num_queued_key,      unpack(terminated_clients))
    redis.call('zrem', client_last_registered_key, unpack(terminated_clients))
    redis.call('zrem', client_last_seen_key,       unpack(terminated_clients))
  end

  --
  -- Broadcast capacity changes
  --
  local final_capacity = compute_capacity(maxConcurrent, running, reservoir)

  if always_publish or (initial_capacity ~= nil and final_capacity == nil) then
    -- always_publish or was not unlimited, now unlimited
    redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))

  elseif initial_capacity ~= nil and final_capacity ~= nil and final_capacity > initial_capacity then
    -- capacity was increased
    -- send the capacity message to the limiter having the lowest number of running jobs
    -- the tiebreaker is the limiter having not registered a job in the longest time

    local lowest_concurrency_value = nil
    local lowest_concurrency_clients = {}
    local lowest_concurrency_last_registered = {}
    local client_concurrencies = redis.call('zrange', client_running_key, 0, -1, 'withscores')

    for i = 1, #client_concurrencies, 2 do
      local client = client_concurrencies[i]
      local concurrency = tonumber(client_concurrencies[i+1])

      if (
        lowest_concurrency_value == nil or lowest_concurrency_value == concurrency
      ) and (
        not unresponsive_lookup[client]
      ) and (
        tonumber(redis.call('hget', client_num_queued_key, client)) > 0
      ) then
        lowest_concurrency_value = concurrency
        table.insert(lowest_concurrency_clients, client)
        local last_registered = tonumber(redis.call('zscore', client_last_registered_key, client))
        table.insert(lowest_concurrency_last_registered, last_registered)
      end
    end

    if #lowest_concurrency_clients > 0 then
      local position = 1
      local earliest = lowest_concurrency_last_registered[1]

      for i,v in ipairs(lowest_concurrency_last_registered) do
        if v < earliest then
          position = i
          earliest = v
        end
      end

      local next_client = lowest_concurrency_clients[position]
      redis.call('publish', 'b_'..id,
        'capacity-priority:'..(final_capacity or '')..
        ':'..next_client..
        ':'..capacityPriorityCounter
      )
      redis.call('hincrby', settings_key, 'capacityPriorityCounter', '1')
    else
      redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))
    end
  end

  return {
    ['capacity'] = final_capacity,
    ['running'] = running,
    ['reservoir'] = reservoir
  }
end
`,"queued.lua":`local clientTimeout = tonumber(redis.call('hget', settings_key, 'clientTimeout'))
local valid_clients = redis.call('zrangebyscore', client_last_seen_key, (now - clientTimeout), 'inf')
local client_queued = redis.call('hmget', client_num_queued_key, unpack(valid_clients))

local sum = 0
for i = 1, #client_queued do
  sum = sum + tonumber(client_queued[i])
end

return sum
`,"refresh_expiration.lua":`local refresh_expiration = function (now, nextRequest, groupTimeout)

  if groupTimeout ~= nil then
    local ttl = (nextRequest + groupTimeout) - now

    for i = 1, #KEYS do
      redis.call('pexpire', KEYS[i], ttl)
    end
  end

end
`,"refs.lua":`local settings_key = KEYS[1]
local job_weights_key = KEYS[2]
local job_expirations_key = KEYS[3]
local job_clients_key = KEYS[4]
local client_running_key = KEYS[5]
local client_num_queued_key = KEYS[6]
local client_last_registered_key = KEYS[7]
local client_last_seen_key = KEYS[8]

local now = tonumber(ARGV[1])
local client = ARGV[2]

local num_static_argv = 2
`,"register.lua":`local index = ARGV[num_static_argv + 1]
local weight = tonumber(ARGV[num_static_argv + 2])
local expiration = tonumber(ARGV[num_static_argv + 3])

local state = process_tick(now, false)
local capacity = state['capacity']
local reservoir = state['reservoir']

local settings = redis.call('hmget', settings_key,
  'nextRequest',
  'minTime',
  'groupTimeout'
)
local nextRequest = tonumber(settings[1])
local minTime = tonumber(settings[2])
local groupTimeout = tonumber(settings[3])

if conditions_check(capacity, weight) then

  redis.call('hincrby', settings_key, 'running', weight)
  redis.call('hset', job_weights_key, index, weight)
  if expiration ~= nil then
    redis.call('zadd', job_expirations_key, now + expiration, index)
  end
  redis.call('hset', job_clients_key, index, client)
  redis.call('zincrby', client_running_key, weight, client)
  redis.call('hincrby', client_num_queued_key, client, -1)
  redis.call('zadd', client_last_registered_key, now, client)

  local wait = math.max(nextRequest - now, 0)
  local newNextRequest = now + wait + minTime

  if reservoir == nil then
    redis.call('hset', settings_key,
      'nextRequest', newNextRequest
    )
  else
    reservoir = reservoir - weight
    redis.call('hmset', settings_key,
      'reservoir', reservoir,
      'nextRequest', newNextRequest
    )
  end

  refresh_expiration(now, newNextRequest, groupTimeout)

  return {true, wait, reservoir}

else
  return {false}
end
`,"register_client.lua":`local queued = tonumber(ARGV[num_static_argv + 1])

-- Could have been re-registered concurrently
if not redis.call('zscore', client_last_seen_key, client) then
  redis.call('zadd', client_running_key, 0, client)
  redis.call('hset', client_num_queued_key, client, queued)
  redis.call('zadd', client_last_registered_key, 0, client)
end

redis.call('zadd', client_last_seen_key, now, client)

return {}
`,"running.lua":`return process_tick(now, false)['running']
`,"submit.lua":`local queueLength = tonumber(ARGV[num_static_argv + 1])
local weight = tonumber(ARGV[num_static_argv + 2])

local capacity = process_tick(now, false)['capacity']

local settings = redis.call('hmget', settings_key,
  'id',
  'maxConcurrent',
  'highWater',
  'nextRequest',
  'strategy',
  'unblockTime',
  'penalty',
  'minTime',
  'groupTimeout'
)
local id = settings[1]
local maxConcurrent = tonumber(settings[2])
local highWater = tonumber(settings[3])
local nextRequest = tonumber(settings[4])
local strategy = tonumber(settings[5])
local unblockTime = tonumber(settings[6])
local penalty = tonumber(settings[7])
local minTime = tonumber(settings[8])
local groupTimeout = tonumber(settings[9])

if maxConcurrent ~= nil and weight > maxConcurrent then
  return redis.error_reply('OVERWEIGHT:'..weight..':'..maxConcurrent)
end

local reachedHWM = (highWater ~= nil and queueLength == highWater
  and not (
    conditions_check(capacity, weight)
    and nextRequest - now <= 0
  )
)

local blocked = strategy == 3 and (reachedHWM or unblockTime >= now)

if blocked then
  local computedPenalty = penalty
  if computedPenalty == nil then
    if minTime == 0 then
      computedPenalty = 5000
    else
      computedPenalty = 15 * minTime
    end
  end

  local newNextRequest = now + computedPenalty + minTime

  redis.call('hmset', settings_key,
    'unblockTime', now + computedPenalty,
    'nextRequest', newNextRequest
  )

  local clients_queued_reset = redis.call('hkeys', client_num_queued_key)
  local queued_reset = {}
  for i = 1, #clients_queued_reset do
    table.insert(queued_reset, clients_queued_reset[i])
    table.insert(queued_reset, 0)
  end
  redis.call('hmset', client_num_queued_key, unpack(queued_reset))

  redis.call('publish', 'b_'..id, 'blocked:')

  refresh_expiration(now, newNextRequest, groupTimeout)
end

if not blocked and not reachedHWM then
  redis.call('hincrby', client_num_queued_key, client, 1)
end

return {reachedHWM, blocked, strategy}
`,"update_settings.lua":`local args = {'hmset', settings_key}

for i = num_static_argv + 1, #ARGV do
  table.insert(args, ARGV[i])
end

redis.call(unpack(args))

process_tick(now, true)

local groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))
refresh_expiration(0, 0, groupTimeout)

return {}
`,"validate_client.lua":`if not redis.call('zscore', client_last_seen_key, client) then
  return redis.error_reply('UNKNOWN_CLIENT')
end

redis.call('zadd', client_last_seen_key, now, client)
`,"validate_keys.lua":`if not (redis.call('exists', settings_key) == 1) then
  return redis.error_reply('SETTINGS_KEY_NOT_FOUND')
end
`};var hasRequiredScripts;function requireScripts(){return hasRequiredScripts||(hasRequiredScripts=1,function(t){var e,n,s;n=require$$0,e={refs:n["refs.lua"],validate_keys:n["validate_keys.lua"],validate_client:n["validate_client.lua"],refresh_expiration:n["refresh_expiration.lua"],process_tick:n["process_tick.lua"],conditions_check:n["conditions_check.lua"],get_time:n["get_time.lua"]},t.allKeys=function(o){return[`b_${o}_settings`,`b_${o}_job_weights`,`b_${o}_job_expirations`,`b_${o}_job_clients`,`b_${o}_client_running`,`b_${o}_client_num_queued`,`b_${o}_client_last_registered`,`b_${o}_client_last_seen`]},s={init:{keys:t.allKeys,headers:["process_tick"],refresh_expiration:!0,code:n["init.lua"]},group_check:{keys:t.allKeys,headers:[],refresh_expiration:!1,code:n["group_check.lua"]},register_client:{keys:t.allKeys,headers:["validate_keys"],refresh_expiration:!1,code:n["register_client.lua"]},blacklist_client:{keys:t.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:n["blacklist_client.lua"]},heartbeat:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["heartbeat.lua"]},update_settings:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["update_settings.lua"]},running:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["running.lua"]},queued:{keys:t.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:n["queued.lua"]},done:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["done.lua"]},check:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!1,code:n["check.lua"]},submit:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:n["submit.lua"]},register:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:n["register.lua"]},free:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["free.lua"]},current_reservoir:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["current_reservoir.lua"]},increment_reservoir:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["increment_reservoir.lua"]}},t.names=Object.keys(s),t.keys=function(o,u){return s[o].keys(u)},t.payload=function(o){var u;return u=s[o],Array.prototype.concat(e.refs,u.headers.map(function(d){return e[d]}),u.refresh_expiration?e.refresh_expiration:"",u.code).join(`
`)}}(Scripts)),Scripts}var RedisConnection_1,hasRequiredRedisConnection;function requireRedisConnection(){if(hasRequiredRedisConnection)return RedisConnection_1;hasRequiredRedisConnection=1;function asyncGeneratorStep(t,e,n,s,o,u,d){try{var g=t[u](d),y=g.value}catch(v){n(v);return}g.done?e(y):Promise.resolve(y).then(s,o)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise(function(s,o){var u=t.apply(e,n);function d(y){asyncGeneratorStep(u,s,o,d,g,"next",y)}function g(y){asyncGeneratorStep(u,s,o,d,g,"throw",y)}d(void 0)})}}var Events,RedisConnection,Scripts,parser;return parser=requireParser(),Events=requireEvents(),Scripts=requireScripts(),RedisConnection=(function(){class RedisConnection{constructor(options={}){parser.load(options,this.defaults,this),this.Redis==null&&(this.Redis=eval("require")("redis")),this.Events==null&&(this.Events=new Events(this)),this.terminated=!1,this.client==null&&(this.client=this.Redis.createClient(this.clientOptions)),this.subscriber=this.client.duplicate(),this.limiters={},this.shas={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then(()=>this._loadScripts()).then(()=>({client:this.client,subscriber:this.subscriber}))}_setup(t,e){return t.setMaxListeners(0),new this.Promise((n,s)=>(t.on("error",o=>this.Events.trigger("error",o)),e&&t.on("message",(o,u)=>{var d;return(d=this.limiters[o])!=null?d._store.onMessage(o,u):void 0}),t.ready?n():t.once("ready",n)))}_loadScript(t){return new this.Promise((e,n)=>{var s;return s=Scripts.payload(t),this.client.multi([["script","load",s]]).exec((o,u)=>o!=null?n(o):(this.shas[t]=u[0],e(u[0])))})}_loadScripts(){return this.Promise.all(Scripts.names.map(t=>this._loadScript(t)))}__runCommand__(t){var e=this;return _asyncToGenerator(function*(){return yield e.ready,new e.Promise((n,s)=>e.client.multi([t]).exec_atomic(function(o,u){return o!=null?s(o):n(u[0])}))})()}__addLimiter__(t){return this.Promise.all([t.channel(),t.channel_client()].map(e=>new this.Promise((n,s)=>{var o;return o=u=>{if(u===e)return this.subscriber.removeListener("subscribe",o),this.limiters[e]=t,n()},this.subscriber.on("subscribe",o),this.subscriber.subscribe(e)})))}__removeLimiter__(t){var e=this;return this.Promise.all([t.channel(),t.channel_client()].map(function(){var n=_asyncToGenerator(function*(s){return e.terminated||(yield new e.Promise((o,u)=>e.subscriber.unsubscribe(s,function(d,g){if(d!=null)return u(d);if(g===s)return o()}))),delete e.limiters[s]});return function(s){return n.apply(this,arguments)}}()))}__scriptArgs__(t,e,n,s){var o;return o=Scripts.keys(t,e),[this.shas[t],o.length].concat(o,n,s)}__scriptFn__(t){return this.client.evalsha.bind(this.client)}disconnect(t=!0){var e,n,s,o;for(o=Object.keys(this.limiters),e=0,s=o.length;e<s;e++)n=o[e],clearInterval(this.limiters[n]._store.heartbeat);return this.limiters={},this.terminated=!0,this.client.end(t),this.subscriber.end(t),this.Promise.resolve()}}return RedisConnection.prototype.datastore="redis",RedisConnection.prototype.defaults={Redis:null,clientOptions:{},client:null,Promise,Events:null},RedisConnection}).call(void 0),RedisConnection_1=RedisConnection,RedisConnection_1}var IORedisConnection_1,hasRequiredIORedisConnection;function requireIORedisConnection(){if(hasRequiredIORedisConnection)return IORedisConnection_1;hasRequiredIORedisConnection=1;function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],s=!0,o=!1,u=void 0;try{for(var d=t[Symbol.iterator](),g;!(s=(g=d.next()).done)&&(n.push(g.value),!(e&&n.length===e));s=!0);}catch(y){o=!0,u=y}finally{try{!s&&d.return!=null&&d.return()}finally{if(o)throw u}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function asyncGeneratorStep(t,e,n,s,o,u,d){try{var g=t[u](d),y=g.value}catch(v){n(v);return}g.done?e(y):Promise.resolve(y).then(s,o)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise(function(s,o){var u=t.apply(e,n);function d(y){asyncGeneratorStep(u,s,o,d,g,"next",y)}function g(y){asyncGeneratorStep(u,s,o,d,g,"throw",y)}d(void 0)})}}var Events,IORedisConnection,Scripts,parser;return parser=requireParser(),Events=requireEvents(),Scripts=requireScripts(),IORedisConnection=(function(){class IORedisConnection{constructor(options={}){parser.load(options,this.defaults,this),this.Redis==null&&(this.Redis=eval("require")("ioredis")),this.Events==null&&(this.Events=new Events(this)),this.terminated=!1,this.clusterNodes!=null?(this.client=new this.Redis.Cluster(this.clusterNodes,this.clientOptions),this.subscriber=new this.Redis.Cluster(this.clusterNodes,this.clientOptions)):this.client!=null&&this.client.duplicate==null?this.subscriber=new this.Redis.Cluster(this.client.startupNodes,this.client.options):(this.client==null&&(this.client=new this.Redis(this.clientOptions)),this.subscriber=this.client.duplicate()),this.limiters={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then(()=>(this._loadScripts(),{client:this.client,subscriber:this.subscriber}))}_setup(t,e){return t.setMaxListeners(0),new this.Promise((n,s)=>(t.on("error",o=>this.Events.trigger("error",o)),e&&t.on("message",(o,u)=>{var d;return(d=this.limiters[o])!=null?d._store.onMessage(o,u):void 0}),t.status==="ready"?n():t.once("ready",n)))}_loadScripts(){return Scripts.names.forEach(t=>this.client.defineCommand(t,{lua:Scripts.payload(t)}))}__runCommand__(t){var e=this;return _asyncToGenerator(function*(){var n;yield e.ready;var s=yield e.client.pipeline([t]).exec(),o=_slicedToArray(s,1),u=_slicedToArray(o[0],2);return u[0],n=u[1],n})()}__addLimiter__(t){return this.Promise.all([t.channel(),t.channel_client()].map(e=>new this.Promise((n,s)=>this.subscriber.subscribe(e,()=>(this.limiters[e]=t,n())))))}__removeLimiter__(t){var e=this;return[t.channel(),t.channel_client()].forEach(function(){var n=_asyncToGenerator(function*(s){return e.terminated||(yield e.subscriber.unsubscribe(s)),delete e.limiters[s]});return function(s){return n.apply(this,arguments)}}())}__scriptArgs__(t,e,n,s){var o;return o=Scripts.keys(t,e),[o.length].concat(o,n,s)}__scriptFn__(t){return this.client[t].bind(this.client)}disconnect(t=!0){var e,n,s,o;for(o=Object.keys(this.limiters),e=0,s=o.length;e<s;e++)n=o[e],clearInterval(this.limiters[n]._store.heartbeat);return this.limiters={},this.terminated=!0,t?this.Promise.all([this.client.quit(),this.subscriber.quit()]):(this.client.disconnect(),this.subscriber.disconnect(),this.Promise.resolve())}}return IORedisConnection.prototype.datastore="ioredis",IORedisConnection.prototype.defaults={Redis:null,clientOptions:{},clusterNodes:null,client:null,Promise,Events:null},IORedisConnection}).call(void 0),IORedisConnection_1=IORedisConnection,IORedisConnection_1}var RedisDatastore_1,hasRequiredRedisDatastore;function requireRedisDatastore(){if(hasRequiredRedisDatastore)return RedisDatastore_1;hasRequiredRedisDatastore=1;function t(T,A){return s(T)||n(T,A)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(T,A){var C=[],j=!0,D=!1,H=void 0;try{for(var ne=T[Symbol.iterator](),Y;!(j=(Y=ne.next()).done)&&(C.push(Y.value),!(A&&C.length===A));j=!0);}catch(U){D=!0,H=U}finally{try{!j&&ne.return!=null&&ne.return()}finally{if(D)throw H}}return C}function s(T){if(Array.isArray(T))return T}function o(T,A,C,j,D,H,ne){try{var Y=T[H](ne),U=Y.value}catch(ee){C(ee);return}Y.done?A(U):Promise.resolve(U).then(j,D)}function u(T){return function(){var A=this,C=arguments;return new Promise(function(j,D){var H=T.apply(A,C);function ne(U){o(H,j,D,ne,Y,"next",U)}function Y(U){o(H,j,D,ne,Y,"throw",U)}ne(void 0)})}}var d,g,y,v,w;return w=requireParser(),d=requireBottleneckError(),y=requireRedisConnection(),g=requireIORedisConnection(),v=class{constructor(A,C,j){this.instance=A,this.storeOptions=C,this.originalId=this.instance.id,this.clientId=this.instance._randomIndex(),w.load(j,j,this),this.clients={},this.capacityPriorityCounters={},this.sharedConnection=this.connection!=null,this.connection==null&&(this.connection=this.instance.datastore==="redis"?new y({Redis:this.Redis,clientOptions:this.clientOptions,Promise:this.Promise,Events:this.instance.Events}):this.instance.datastore==="ioredis"?new g({Redis:this.Redis,clientOptions:this.clientOptions,clusterNodes:this.clusterNodes,Promise:this.Promise,Events:this.instance.Events}):void 0),this.instance.connection=this.connection,this.instance.datastore=this.connection.datastore,this.ready=this.connection.ready.then(D=>(this.clients=D,this.runScript("init",this.prepareInitSettings(this.clearDatastore)))).then(()=>this.connection.__addLimiter__(this.instance)).then(()=>this.runScript("register_client",[this.instance.queued()])).then(()=>{var D;return typeof(D=this.heartbeat=setInterval(()=>this.runScript("heartbeat",[]).catch(H=>this.instance.Events.trigger("error",H)),this.heartbeatInterval)).unref=="function"&&D.unref(),this.clients})}__publish__(A){var C=this;return u(function*(){var j,D=yield C.ready;return j=D.client,j.publish(C.instance.channel(),`message:${A.toString()}`)})()}onMessage(A,C){var j=this;return u(function*(){var D,H,ne,Y,U,ee,J,ie,se,K;try{J=C.indexOf(":");var te=[C.slice(0,J),C.slice(J+1)];if(K=te[0],ne=te[1],K==="capacity")return yield j.instance._drainAll(ne.length>0?~~ne:void 0);if(K==="capacity-priority"){var re=ne.split(":"),ce=t(re,3);return se=ce[0],ie=ce[1],H=ce[2],D=se.length>0?~~se:void 0,ie===j.clientId?(Y=yield j.instance._drainAll(D),ee=D!=null?D-(Y||0):"",yield j.clients.client.publish(j.instance.channel(),`capacity-priority:${ee}::${H}`)):ie===""?(clearTimeout(j.capacityPriorityCounters[H]),delete j.capacityPriorityCounters[H],j.instance._drainAll(D)):j.capacityPriorityCounters[H]=setTimeout(u(function*(){var le;try{return delete j.capacityPriorityCounters[H],yield j.runScript("blacklist_client",[ie]),yield j.instance._drainAll(D)}catch(ue){return le=ue,j.instance.Events.trigger("error",le)}}),1e3)}else{if(K==="message")return j.instance.Events.trigger("message",ne);if(K==="blocked")return yield j.instance._dropAllQueued()}}catch(le){return U=le,j.instance.Events.trigger("error",U)}})()}__disconnect__(A){return clearInterval(this.heartbeat),this.sharedConnection?this.connection.__removeLimiter__(this.instance):this.connection.disconnect(A)}runScript(A,C){var j=this;return u(function*(){return A==="init"||A==="register_client"||(yield j.ready),new j.Promise((D,H)=>{var ne,Y;return ne=[Date.now(),j.clientId].concat(C),j.instance.Events.trigger("debug",`Calling Redis script: ${A}.lua`,ne),Y=j.connection.__scriptArgs__(A,j.originalId,ne,function(U,ee){return U!=null?H(U):D(ee)}),j.connection.__scriptFn__(A)(...Y)}).catch(D=>D.message==="SETTINGS_KEY_NOT_FOUND"?A==="heartbeat"?j.Promise.resolve():j.runScript("init",j.prepareInitSettings(!1)).then(()=>j.runScript(A,C)):D.message==="UNKNOWN_CLIENT"?j.runScript("register_client",[j.instance.queued()]).then(()=>j.runScript(A,C)):j.Promise.reject(D))})()}prepareArray(A){var C,j,D,H;for(D=[],C=0,j=A.length;C<j;C++)H=A[C],D.push(H!=null?H.toString():"");return D}prepareObject(A){var C,j,D;C=[];for(j in A)D=A[j],C.push(j,D!=null?D.toString():"");return C}prepareInitSettings(A){var C;return C=this.prepareObject(Object.assign({},this.storeOptions,{id:this.originalId,version:this.instance.version,groupTimeout:this.timeout,clientTimeout:this.clientTimeout})),C.unshift(A?1:0,this.instance.version),C}convertBool(A){return!!A}__updateSettings__(A){var C=this;return u(function*(){return yield C.runScript("update_settings",C.prepareObject(A)),w.overwrite(A,A,C.storeOptions)})()}__running__(){return this.runScript("running",[])}__queued__(){return this.runScript("queued",[])}__done__(){return this.runScript("done",[])}__groupCheck__(){var A=this;return u(function*(){return A.convertBool(yield A.runScript("group_check",[]))})()}__incrementReservoir__(A){return this.runScript("increment_reservoir",[A])}__currentReservoir__(){return this.runScript("current_reservoir",[])}__check__(A){var C=this;return u(function*(){return C.convertBool(yield C.runScript("check",C.prepareArray([A])))})()}__register__(A,C,j){var D=this;return u(function*(){var H,ne,Y,U=yield D.runScript("register",D.prepareArray([A,C,j])),ee=t(U,3);return ne=ee[0],Y=ee[1],H=ee[2],{success:D.convertBool(ne),wait:Y,reservoir:H}})()}__submit__(A,C){var j=this;return u(function*(){var D,H,ne,Y,U;try{var ee=yield j.runScript("submit",j.prepareArray([A,C])),J=t(ee,3);return Y=J[0],D=J[1],U=J[2],{reachedHWM:j.convertBool(Y),blocked:j.convertBool(D),strategy:U}}catch(K){if(H=K,H.message.indexOf("OVERWEIGHT")===0){var ie=H.message.split(":"),se=t(ie,3);throw se[0],C=se[1],ne=se[2],new d(`Impossible to add a job having a weight of ${C} to a limiter having a maxConcurrent setting of ${ne}`)}else throw H}})()}__free__(A,C){var j=this;return u(function*(){var D;return D=yield j.runScript("free",j.prepareArray([A])),{running:D}})()}},RedisDatastore_1=v,RedisDatastore_1}var States_1,hasRequiredStates;function requireStates(){if(hasRequiredStates)return States_1;hasRequiredStates=1;var t,e;return t=requireBottleneckError(),e=class{constructor(s){this.status=s,this._jobs={},this.counts=this.status.map(function(){return 0})}next(s){var o,u;if(o=this._jobs[s],u=o+1,o!=null&&u<this.status.length)return this.counts[o]--,this.counts[u]++,this._jobs[s]++;if(o!=null)return this.counts[o]--,delete this._jobs[s]}start(s){var o;return o=0,this._jobs[s]=o,this.counts[o]++}remove(s){var o;return o=this._jobs[s],o!=null&&(this.counts[o]--,delete this._jobs[s]),o!=null}jobStatus(s){var o;return(o=this.status[this._jobs[s]])!=null?o:null}statusJobs(s){var o,u,d,g,y;if(s!=null){if(u=this.status.indexOf(s),u<0)throw new t(`status must be one of ${this.status.join(", ")}`);d=this._jobs,g=[];for(o in d)y=d[o],y===u&&g.push(o);return g}else return Object.keys(this._jobs)}statusCounts(){return this.counts.reduce((s,o,u)=>(s[this.status[u]]=o,s),{})}},States_1=e,States_1}var Sync_1,hasRequiredSync;function requireSync(){if(hasRequiredSync)return Sync_1;hasRequiredSync=1;function t(o,u,d,g,y,v,w){try{var T=o[v](w),A=T.value}catch(C){d(C);return}T.done?u(A):Promise.resolve(A).then(g,y)}function e(o){return function(){var u=this,d=arguments;return new Promise(function(g,y){var v=o.apply(u,d);function w(A){t(v,g,y,w,T,"next",A)}function T(A){t(v,g,y,w,T,"throw",A)}w(void 0)})}}var n,s;return n=requireDLList(),s=class{constructor(u,d){this.schedule=this.schedule.bind(this),this.name=u,this.Promise=d,this._running=0,this._queue=new n}isEmpty(){return this._queue.length===0}_tryToRun(){var u=this;return e(function*(){var d,g,y,v,w,T,A;if(u._running<1&&u._queue.length>0){u._running++;var C=u._queue.shift();return A=C.task,d=C.args,w=C.resolve,v=C.reject,g=yield e(function*(){try{return T=yield A(...d),function(){return w(T)}}catch(j){return y=j,function(){return v(y)}}})(),u._running--,u._tryToRun(),g()}})()}schedule(u,...d){var g,y,v;return v=y=null,g=new this.Promise(function(w,T){return v=w,y=T}),this._queue.push({task:u,args:d,resolve:v,reject:y}),this._tryToRun(),g}},Sync_1=s,Sync_1}const version$1="2.19.5",require$$8={version:version$1};var Group_1,hasRequiredGroup$1;function requireGroup$1(){if(hasRequiredGroup$1)return Group_1;hasRequiredGroup$1=1;function t(A,C){return s(A)||n(A,C)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(A,C){var j=[],D=!0,H=!1,ne=void 0;try{for(var Y=A[Symbol.iterator](),U;!(D=(U=Y.next()).done)&&(j.push(U.value),!(C&&j.length===C));D=!0);}catch(ee){H=!0,ne=ee}finally{try{!D&&Y.return!=null&&Y.return()}finally{if(H)throw ne}}return j}function s(A){if(Array.isArray(A))return A}function o(A,C,j,D,H,ne,Y){try{var U=A[ne](Y),ee=U.value}catch(J){j(J);return}U.done?C(ee):Promise.resolve(ee).then(D,H)}function u(A){return function(){var C=this,j=arguments;return new Promise(function(D,H){var ne=A.apply(C,j);function Y(ee){o(ne,D,H,Y,U,"next",ee)}function U(ee){o(ne,D,H,Y,U,"throw",ee)}Y(void 0)})}}var d,g,y,v,w,T;return T=requireParser(),d=requireEvents(),v=requireRedisConnection(),y=requireIORedisConnection(),w=requireScripts(),g=(function(){class A{constructor(j={}){this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=j,T.load(this.limiterOptions,this.defaults,this),this.Events=new d(this),this.instances={},this.Bottleneck=requireBottleneck(),this._startAutoCleanup(),this.sharedConnection=this.connection!=null,this.connection==null&&(this.limiterOptions.datastore==="redis"?this.connection=new v(Object.assign({},this.limiterOptions,{Events:this.Events})):this.limiterOptions.datastore==="ioredis"&&(this.connection=new y(Object.assign({},this.limiterOptions,{Events:this.Events}))))}key(j=""){var D;return(D=this.instances[j])!=null?D:(()=>{var H;return H=this.instances[j]=new this.Bottleneck(Object.assign(this.limiterOptions,{id:`${this.id}-${j}`,timeout:this.timeout,connection:this.connection})),this.Events.trigger("created",H,j),H})()}deleteKey(j=""){var D=this;return u(function*(){var H,ne;return ne=D.instances[j],D.connection&&(H=yield D.connection.__runCommand__(["del",...w.allKeys(`${D.id}-${j}`)])),ne!=null&&(delete D.instances[j],yield ne.disconnect()),ne!=null||H>0})()}limiters(){var j,D,H,ne;D=this.instances,H=[];for(j in D)ne=D[j],H.push({key:j,limiter:ne});return H}keys(){return Object.keys(this.instances)}clusterKeys(){var j=this;return u(function*(){var D,H,ne,Y,U,ee,J,ie,se;if(j.connection==null)return j.Promise.resolve(j.keys());for(ee=[],D=null,se=`b_${j.id}-`.length,H=9;D!==0;){var K=yield j.connection.__runCommand__(["scan",D??0,"match",`b_${j.id}-*_settings`,"count",1e4]),te=t(K,2);for(ie=te[0],ne=te[1],D=~~ie,Y=0,J=ne.length;Y<J;Y++)U=ne[Y],ee.push(U.slice(se,-H))}return ee})()}_startAutoCleanup(){var j=this,D;return clearInterval(this.interval),typeof(D=this.interval=setInterval(u(function*(){var H,ne,Y,U,ee,J;ee=Date.now(),Y=j.instances,U=[];for(ne in Y){J=Y[ne];try{(yield J._store.__groupCheck__(ee))?U.push(j.deleteKey(ne)):U.push(void 0)}catch(ie){H=ie,U.push(J.Events.trigger("error",H))}}return U}),this.timeout/2)).unref=="function"?D.unref():void 0}updateSettings(j={}){if(T.overwrite(j,this.defaults,this),T.overwrite(j,j,this.limiterOptions),j.timeout!=null)return this._startAutoCleanup()}disconnect(j=!0){var D;if(!this.sharedConnection)return(D=this.connection)!=null?D.disconnect(j):void 0}}return A.prototype.defaults={timeout:1e3*60*5,connection:null,Promise,id:"group-key"},A}).call(void 0),Group_1=g,Group_1}var Batcher_1,hasRequiredBatcher;function requireBatcher(){if(hasRequiredBatcher)return Batcher_1;hasRequiredBatcher=1;var t,e,n;return n=requireParser(),e=requireEvents(),t=(function(){class s{constructor(u={}){this.options=u,n.load(this.options,this.defaults,this),this.Events=new e(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now()}_resetPromise(){return this._promise=new this.Promise((u,d)=>this._resolve=u)}_flush(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger("batch",this._arr),this._arr=[],this._resetPromise()}add(u){var d;return this._arr.push(u),d=this._promise,this._arr.length===this.maxSize?this._flush():this.maxTime!=null&&this._arr.length===1&&(this._timeout=setTimeout(()=>this._flush(),this.maxTime)),d}}return s.prototype.defaults={maxTime:null,maxSize:null,Promise},s}).call(void 0),Batcher_1=t,Batcher_1}var Bottleneck_1,hasRequiredBottleneck;function requireBottleneck(){if(hasRequiredBottleneck)return Bottleneck_1;hasRequiredBottleneck=1;function t(ee,J){return u(ee)||e(ee,J)||s()}function e(ee,J){var ie=[],se=!0,K=!1,te=void 0;try{for(var re=ee[Symbol.iterator](),ce;!(se=(ce=re.next()).done)&&(ie.push(ce.value),!(J&&ie.length===J));se=!0);}catch(le){K=!0,te=le}finally{try{!se&&re.return!=null&&re.return()}finally{if(K)throw te}}return ie}function n(ee){return u(ee)||o(ee)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(ee){if(Symbol.iterator in Object(ee)||Object.prototype.toString.call(ee)==="[object Arguments]")return Array.from(ee)}function u(ee){if(Array.isArray(ee))return ee}function d(ee,J,ie,se,K,te,re){try{var ce=ee[te](re),le=ce.value}catch(ue){ie(ue);return}ce.done?J(le):Promise.resolve(le).then(se,K)}function g(ee){return function(){var J=this,ie=arguments;return new Promise(function(se,K){var te=ee.apply(J,ie);function re(le){d(te,se,K,re,ce,"next",le)}function ce(le){d(te,se,K,re,ce,"throw",le)}re(void 0)})}}var y,v,w,T,A,C,j,D,H,ne,Y,U=[].splice;return C=10,v=5,Y=requireParser(),j=requireQueues(),T=requireJob(),A=requireLocalDatastore(),D=requireRedisDatastore(),w=requireEvents(),H=requireStates(),ne=requireSync(),y=(function(){class ee{constructor(ie={},...se){var K,te;this._addToQueue=this._addToQueue.bind(this),this._validateOptions(ie,se),Y.load(ie,this.instanceDefaults,this),this._queues=new j(C),this._scheduled={},this._states=new H(["RECEIVED","QUEUED","RUNNING","EXECUTING"].concat(this.trackDoneStatus?["DONE"]:[])),this._limiter=null,this.Events=new w(this),this._submitLock=new ne("submit",this.Promise),this._registerLock=new ne("register",this.Promise),te=Y.load(ie,this.storeDefaults,{}),this._store=(function(){if(this.datastore==="redis"||this.datastore==="ioredis"||this.connection!=null)return K=Y.load(ie,this.redisStoreDefaults,{}),new D(this,te,K);if(this.datastore==="local")return K=Y.load(ie,this.localStoreDefaults,{}),new A(this,te,K);throw new ee.prototype.BottleneckError(`Invalid datastore type: ${this.datastore}`)}).call(this),this._queues.on("leftzero",()=>{var re;return(re=this._store.heartbeat)!=null&&typeof re.ref=="function"?re.ref():void 0}),this._queues.on("zero",()=>{var re;return(re=this._store.heartbeat)!=null&&typeof re.unref=="function"?re.unref():void 0})}_validateOptions(ie,se){if(!(ie!=null&&typeof ie=="object"&&se.length===0))throw new ee.prototype.BottleneckError("Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.")}ready(){return this._store.ready}clients(){return this._store.clients}channel(){return`b_${this.id}`}channel_client(){return`b_${this.id}_${this._store.clientId}`}publish(ie){return this._store.__publish__(ie)}disconnect(ie=!0){return this._store.__disconnect__(ie)}chain(ie){return this._limiter=ie,this}queued(ie){return this._queues.queued(ie)}clusterQueued(){return this._store.__queued__()}empty(){return this.queued()===0&&this._submitLock.isEmpty()}running(){return this._store.__running__()}done(){return this._store.__done__()}jobStatus(ie){return this._states.jobStatus(ie)}jobs(ie){return this._states.statusJobs(ie)}counts(){return this._states.statusCounts()}_randomIndex(){return Math.random().toString(36).slice(2)}check(ie=1){return this._store.__check__(ie)}_clearGlobalState(ie){return this._scheduled[ie]!=null?(clearTimeout(this._scheduled[ie].expiration),delete this._scheduled[ie],!0):!1}_free(ie,se,K,te){var re=this;return g(function*(){var ce,le;try{var ue=yield re._store.__free__(ie,K.weight);if(le=ue.running,re.Events.trigger("debug",`Freed ${K.id}`,te),le===0&&re.empty())return re.Events.trigger("idle")}catch(_e){return ce=_e,re.Events.trigger("error",ce)}})()}_run(ie,se,K){var te,re,ce;return se.doRun(),te=this._clearGlobalState.bind(this,ie),ce=this._run.bind(this,ie,se),re=this._free.bind(this,ie,se),this._scheduled[ie]={timeout:setTimeout(()=>se.doExecute(this._limiter,te,ce,re),K),expiration:se.options.expiration!=null?setTimeout(function(){return se.doExpire(te,ce,re)},K+se.options.expiration):void 0,job:se}}_drainOne(ie){return this._registerLock.schedule(()=>{var se,K,te,re,ce;if(this.queued()===0)return this.Promise.resolve(null);ce=this._queues.getFirst();var le=te=ce.first();return re=le.options,se=le.args,ie!=null&&re.weight>ie?this.Promise.resolve(null):(this.Events.trigger("debug",`Draining ${re.id}`,{args:se,options:re}),K=this._randomIndex(),this._store.__register__(K,re.weight,re.expiration).then(({success:ue,wait:_e,reservoir:Ee})=>{var we;return this.Events.trigger("debug",`Drained ${re.id}`,{success:ue,args:se,options:re}),ue?(ce.shift(),we=this.empty(),we&&this.Events.trigger("empty"),Ee===0&&this.Events.trigger("depleted",we),this._run(K,te,_e),this.Promise.resolve(re.weight)):this.Promise.resolve(null)}))})}_drainAll(ie,se=0){return this._drainOne(ie).then(K=>{var te;return K!=null?(te=ie!=null?ie-K:ie,this._drainAll(te,se+K)):this.Promise.resolve(se)}).catch(K=>this.Events.trigger("error",K))}_dropAllQueued(ie){return this._queues.shiftAll(function(se){return se.doDrop({message:ie})})}stop(ie={}){var se,K;return ie=Y.load(ie,this.stopDefaults),K=te=>{var re;return re=()=>{var ce;return ce=this._states.counts,ce[0]+ce[1]+ce[2]+ce[3]===te},new this.Promise((ce,le)=>re()?ce():this.on("done",()=>{if(re())return this.removeAllListeners("done"),ce()}))},se=ie.dropWaitingJobs?(this._run=function(te,re){return re.doDrop({message:ie.dropErrorMessage})},this._drainOne=()=>this.Promise.resolve(null),this._registerLock.schedule(()=>this._submitLock.schedule(()=>{var te,re,ce;re=this._scheduled;for(te in re)ce=re[te],this.jobStatus(ce.job.options.id)==="RUNNING"&&(clearTimeout(ce.timeout),clearTimeout(ce.expiration),ce.job.doDrop({message:ie.dropErrorMessage}));return this._dropAllQueued(ie.dropErrorMessage),K(0)}))):this.schedule({priority:C-1,weight:0},()=>K(1)),this._receive=function(te){return te._reject(new ee.prototype.BottleneckError(ie.enqueueErrorMessage))},this.stop=()=>this.Promise.reject(new ee.prototype.BottleneckError("stop() has already been called")),se}_addToQueue(ie){var se=this;return g(function*(){var K,te,re,ce,le,ue,_e;K=ie.args,ce=ie.options;try{var Ee=yield se._store.__submit__(se.queued(),ce.weight);le=Ee.reachedHWM,te=Ee.blocked,_e=Ee.strategy}catch(we){return re=we,se.Events.trigger("debug",`Could not queue ${ce.id}`,{args:K,options:ce,error:re}),ie.doDrop({error:re}),!1}return te?(ie.doDrop(),!0):le&&(ue=_e===ee.prototype.strategy.LEAK?se._queues.shiftLastFrom(ce.priority):_e===ee.prototype.strategy.OVERFLOW_PRIORITY?se._queues.shiftLastFrom(ce.priority+1):_e===ee.prototype.strategy.OVERFLOW?ie:void 0,ue!=null&&ue.doDrop(),ue==null||_e===ee.prototype.strategy.OVERFLOW)?(ue==null&&ie.doDrop(),le):(ie.doQueue(le,te),se._queues.push(ie),yield se._drainAll(),le)})()}_receive(ie){return this._states.jobStatus(ie.options.id)!=null?(ie._reject(new ee.prototype.BottleneckError(`A job with the same id already exists (id=${ie.options.id})`)),!1):(ie.doReceive(),this._submitLock.schedule(this._addToQueue,ie))}submit(...ie){var se,K,te,re,ce,le,ue;if(typeof ie[0]=="function"){var _e,Ee,we,de;ce=ie,_e=ce,Ee=n(_e),K=Ee[0],ie=Ee.slice(1),we=U.call(ie,-1),de=t(we,1),se=de[0],re=Y.load({},this.jobDefaults)}else{var me,xe,pe,ve;le=ie,me=le,xe=n(me),re=xe[0],K=xe[1],ie=xe.slice(2),pe=U.call(ie,-1),ve=t(pe,1),se=ve[0],re=Y.load(re,this.jobDefaults)}return ue=(...Oe)=>new this.Promise(function(Te,Le){return K(...Oe,function(...Me){return(Me[0]!=null?Le:Te)(Me)})}),te=new T(ue,ie,re,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),te.promise.then(function(Oe){return typeof se=="function"?se(...Oe):void 0}).catch(function(Oe){return Array.isArray(Oe)?typeof se=="function"?se(...Oe):void 0:typeof se=="function"?se(Oe):void 0}),this._receive(te)}schedule(...ie){var se,K,te;if(typeof ie[0]=="function"){var re=ie,ce=n(re);te=ce[0],ie=ce.slice(1),K={}}else{var le=ie,ue=n(le);K=ue[0],te=ue[1],ie=ue.slice(2)}return se=new T(te,ie,K,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(se),se.promise}wrap(ie){var se,K;return se=this.schedule.bind(this),K=function(...re){return se(ie.bind(this),...re)},K.withOptions=function(te,...re){return se(te,ie,...re)},K}updateSettings(ie={}){var se=this;return g(function*(){return yield se._store.__updateSettings__(Y.overwrite(ie,se.storeDefaults)),Y.overwrite(ie,se.instanceDefaults,se),se})()}currentReservoir(){return this._store.__currentReservoir__()}incrementReservoir(ie=0){return this._store.__incrementReservoir__(ie)}}return ee.default=ee,ee.Events=w,ee.version=ee.prototype.version=require$$8.version,ee.strategy=ee.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},ee.BottleneckError=ee.prototype.BottleneckError=requireBottleneckError(),ee.Group=ee.prototype.Group=requireGroup$1(),ee.RedisConnection=ee.prototype.RedisConnection=requireRedisConnection(),ee.IORedisConnection=ee.prototype.IORedisConnection=requireIORedisConnection(),ee.Batcher=ee.prototype.Batcher=requireBatcher(),ee.prototype.jobDefaults={priority:v,weight:1,expiration:null,id:"<no-id>"},ee.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:ee.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},ee.prototype.localStoreDefaults={Promise,timeout:null,heartbeatInterval:250},ee.prototype.redisStoreDefaults={Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},ee.prototype.instanceDefaults={datastore:"local",connection:null,id:"<no-id>",rejectOnDrop:!0,trackDoneStatus:!1,Promise},ee.prototype.stopDefaults={enqueueErrorMessage:"This limiter has been stopped and cannot accept new jobs.",dropWaitingJobs:!0,dropErrorMessage:"This limiter has been stopped."},ee}).call(void 0),Bottleneck_1=y,Bottleneck_1}var lib$2,hasRequiredLib$1;function requireLib$1(){return hasRequiredLib$1||(hasRequiredLib$1=1,lib$2=requireBottleneck()),lib$2}var libExports=requireLib$1();const Bottleneck=getDefaultExportFromCjs(libExports);async function getTeamAlias(t){const e=getFirestore(),n=collection(e,"aliases"),s=query(n,where("name","==",t)),o=await getDocs(s);return o.empty?t:o.docs[0].data().alias||t}const TeamsContext=reactExports.createContext(void 0),teamDataCache={},limiter=new Bottleneck({reservoir:100,reservoirRefreshAmount:100,reservoirRefreshInterval:60*1e3});async function fetchTeamData(t){var n;const e=t.replace(/\./g,"");if(teamDataCache[e])return teamDataCache[e];try{const u=(n=(await(await limiter.schedule(()=>fetch(`https://www.thesportsdb.com/api/v1/json/3/searchteams.php?t=${e}`))).json()).teams)==null?void 0:n[0];return u&&(teamDataCache[e]=u),u}catch(s){console.error(`Erro ao buscar time "${e}"`,s);return}}const TeamsProvider=({children:t})=>{const[e,n]=reactExports.useState({}),[s,o]=reactExports.useState(!1),u=reactExports.useCallback(async d=>{if(d){o(!0);try{const g=d.teams.home.name.replace(/\./g,""),y=d.teams.away.name.replace(/\./g,""),[v,w]=await Promise.all([getTeamAlias(g),getTeamAlias(y)]),[T,A]=await Promise.all([fetchTeamData(v),fetchTeamData(w)]);n({homeTeam:T,awayTeam:A})}catch(g){console.error("Erro ao buscar dados dos times:",g)}finally{o(!1)}}},[]);return jsxRuntimeExports.jsx(TeamsContext.Provider,{value:{teams:e,getTeams:u,loading:s},children:t})};function useSportDbTeams(t){const e=reactExports.useContext(TeamsContext);if(!e)throw new Error("useTeams deve ser usado dentro de <TeamsProvider>");const{getTeams:n,teams:s,loading:o}=e;return reactExports.useEffect(()=>{t&&n(t)},[t,n]),{...s,loading:o}}const useRoundTranslations=()=>{const[t,e]=reactExports.useState([]),[n,s]=reactExports.useState(!0),[o,u]=reactExports.useState(null);return reactExports.useEffect(()=>{(async()=>{try{s(!0),u(null);const g=collection(db,"translations"),v=(await getDocs(g)).docs.map(w=>w.data());e(v)}catch(g){console.error("Error fetching translations:",g),u("Failed to load translations. Please try again.")}finally{s(!1)}})()},[]),{translations:t,loading:n,error:o}},GlobalContext=reactExports.createContext(void 0),useGlobal=()=>{const t=reactExports.useContext(GlobalContext);if(t===void 0)throw new Error("useGlobal must be used within a GlobalProvider");return t},GlobalProvider=({children:t})=>{const[e,n]=reactExports.useState(!1),[s,o]=reactExports.useState(!1),[u,d]=reactExports.useState(null),[g,y]=reactExports.useState({theme:"light",language:"pt-BR"}),v=A=>{y(C=>({...C,...A}))},w=(A,C)=>{console.log(`${C.toUpperCase()}: ${A}`)};useRoundTranslations();const T={isLoading:e,setIsLoading:n,isMenuOpen:s,setIsMenuOpen:o,appSettings:g,updateAppSettings:v,currentEscalacao:u,setCurrentEscalacao:d,showNotification:w};return jsxRuntimeExports.jsx(GlobalContext.Provider,{value:T,children:t})};var IMAGE_SECTIONS=(t=>(t.ESCALACAO="escalacao",t.MATCHDAY="matchday",t.PROXIMO_JOGO="proximo_jogo",t.FIM_DE_JOGO="fim_de_jogo",t.MAN_OF_THE_MATCH="man_of_the_match",t.CONFRONTO="confronto",t.INICIO_JOGO="inicio_jogo",t.INTERVALO="intervalo",t.INICIO_SEGUNDO_TEMPO="inicio_segundo_tempo",t.INICIO_PRORROGACAO="inicio_prorrogacao",t.INICIO_SEGUNDO_TEMPO_PRORROGACAO="inicio_segundo_tempo_prorrogacao",t.GOL="gol",t.SUBSTITUICAO="substituicao",t.PALPITES="palpites",t))(IMAGE_SECTIONS||{});const SECTIONS_CONFIG={escalacao:{key:"escalacao",label:"Escalação",description:"Imagens para posts de escalação do time",allowedTypes:["quadrada","vertical","horizontal"]},matchday:{key:"matchday",label:"Matchday",description:"Imagens para posts do dia do jogo",allowedTypes:["quadrada","vertical"]},proximo_jogo:{key:"proximo_jogo",label:"Próximo Jogo",description:"Imagens para posts do próximo jogo",allowedTypes:["quadrada","vertical"]},fim_de_jogo:{key:"fim_de_jogo",label:"Fim de Jogo",description:"Imagens para posts do fim de jogo",allowedTypes:["quadrada","vertical"]},man_of_the_match:{key:"man_of_the_match",label:"Man of the Match",description:"Imagens para posts do melhor jogador",allowedTypes:["quadrada","vertical"]},confronto:{key:"confronto",label:"Confronto",description:"Imagens de fundo para o gerador de confrontos com gráfico.",allowedTypes:["quadrada","vertical"]},inicio_jogo:{key:"inicio_jogo",label:"Início de Jogo",description:"Imagens para posts do início da partida",allowedTypes:["quadrada","vertical"]},intervalo:{key:"intervalo",label:"Intervalo",description:"Imagens para posts do intervalo da partida",allowedTypes:["quadrada","vertical"]},inicio_segundo_tempo:{key:"inicio_segundo_tempo",label:"Início do Segundo Tempo",description:"Imagens para posts do início do segundo tempo",allowedTypes:["quadrada","vertical"]},inicio_prorrogacao:{key:"inicio_prorrogacao",label:"Início da Prorrogação",description:"Imagens para posts do início da prorrogação",allowedTypes:["quadrada","vertical"]},inicio_segundo_tempo_prorrogacao:{key:"inicio_segundo_tempo_prorrogacao",label:"Início do Segundo Tempo da Prorrogação",description:"Imagens para posts do início do segundo tempo da prorrogação",allowedTypes:["quadrada","vertical"]},gol:{key:"gol",label:"Gol",description:"Imagens para posts de gols marcados",allowedTypes:["quadrada","vertical"]},substituicao:{key:"substituicao",label:"Substituição",description:"Imagens para posts de substituições",allowedTypes:["quadrada","vertical"]},palpites:{key:"palpites",label:"Palpites",description:"Imagens para posts de palpites",allowedTypes:["quadrada","vertical"]}},IMAGE_TYPES_CONFIG={quadrada:{key:"quadrada",label:"Quadrada",description:"Para posts quadrados (Instagram feed)",dimensions:"1080x1080"},vertical:{key:"vertical",label:"Vertical",description:"Para stories (Instagram/Facebook)",dimensions:"1080x1920"},horizontal:{key:"horizontal",label:"Horizontal",description:"Para posts horizontais (Facebook/Twitter)",dimensions:"1200x630"}},getSectionConfig=t=>SECTIONS_CONFIG[t],getImageTypeConfig=t=>IMAGE_TYPES_CONFIG[t],getAllowedTypesForSection=t=>SECTIONS_CONFIG[t].allowedTypes,generateImageId=(t,e)=>`${t}_${e}`,ImagesContext=reactExports.createContext(void 0),ImagesProvider=({children:t})=>{const{currentUser:e}=useAuth(),[n,s]=reactExports.useState([]),[o,u]=reactExports.useState(null),[d,g]=reactExports.useState([]),[y,v]=reactExports.useState(!0);reactExports.useEffect(()=>{e&&w()},[e]);const w=async()=>{var K;try{v(!0);const re=(await getDocs(collection(db,"baseImages"))).docs.map(_e=>{var Ee;return{id:_e.id,..._e.data(),uploadedAt:((Ee=_e.data().uploadedAt)==null?void 0:Ee.toDate())||new Date}});s(re);const ce=await getDocs(collection(db,"gameArt"));if(!ce.empty){const _e=ce.docs[0];u({id:_e.id,..._e.data(),uploadedAt:((K=_e.data().uploadedAt)==null?void 0:K.toDate())||new Date})}const ue=(await getDocs(collection(db,"channels"))).docs.map(_e=>{var we;const Ee=_e.data();return{id:_e.id,name:Ee.name,logoUrl:Ee.logoUrl,type:Ee.type,uploadedAt:((we=Ee.uploadedAt)==null?void 0:we.toDate())||new Date}});g(ue),re.length===0&&await T()}catch(te){console.error("Erro ao carregar imagens:",te)}finally{v(!1)}},T=async()=>{var K;try{const te=await getDocs(collection(db,"legacyBaseImages"));if(!te.empty){const re=[];for(const ce of te.docs){const le=ce.data(),ue={id:generateImageId(IMAGE_SECTIONS.ESCALACAO,le.type),section:IMAGE_SECTIONS.ESCALACAO,type:le.type,url:le.url,filename:le.filename,uploadedAt:((K=le.uploadedAt)==null?void 0:K.toDate())||new Date,uploadedBy:le.uploadedBy};await setDoc(doc(db,"baseImages",ue.id),{section:ue.section,type:ue.type,url:ue.url,filename:ue.filename,uploadedAt:serverTimestamp(),uploadedBy:ue.uploadedBy}),re.push(ue)}s(re)}}catch(te){console.error("Erro na migração:",te)}},A=async(K,te,re)=>{if(!e)return{success:!1,error:"Usuário não autenticado"};try{const ce=n.find(we=>we.section===te&&we.type===re),le=await uploadToImgBB(K);if(!le.success)return le;const ue=generateImageId(te,re),_e={section:te,type:re,url:le.url,filename:K.name,uploadedAt:serverTimestamp(),uploadedBy:e.uid};await setDoc(doc(db,"baseImages",ue),_e);const Ee={id:ue,section:te,type:re,url:le.url,filename:K.name,uploadedAt:new Date,uploadedBy:e.uid};return s(ce?we=>we.map(de=>de.section===te&&de.type===re?Ee:de):we=>[...we,Ee]),{success:!0,url:le.url}}catch(ce){return console.error("Erro ao fazer upload da imagem:",ce),{success:!1,error:"Erro ao fazer upload da imagem"}}},C=async(K,te)=>{try{const re=generateImageId(K,te);return await deleteDoc(doc(db,"baseImages",re)),s(ce=>ce.filter(le=>!(le.section===K&&le.type===te))),{success:!0}}catch(re){return console.error("Erro ao remover imagem:",re),{success:!1,error:"Erro ao remover imagem"}}},j=K=>n.find(te=>te.section===K.section&&te.type===K.type),se={baseImages:n,loading:y,uploadBaseImage:A,removeBaseImage:C,getImageByIdentifier:j,getImagesBySection:K=>n.filter(te=>te.section===K),getImageByType:K=>j({section:IMAGE_SECTIONS.ESCALACAO,type:K})||null,uploadLegacyImage:async(K,te)=>A(K,IMAGE_SECTIONS.ESCALACAO,te),removeLegacyImage:async K=>{try{const te=n.find(re=>re.id===K);return te?C(te.section,te.type):{success:!1,error:"Imagem não encontrada"}}catch(te){return console.error("Erro ao remover imagem legacy:",te),{success:!1,error:"Erro ao remover imagem"}}},gameArt:o,uploadGameArt:async K=>{if(!e)return{success:!1,error:"Usuário não autenticado"};try{const te=await uploadToImgBB(K);if(!te.success)return te;const re={url:te.url,filename:K.name,uploadedAt:new Date,uploadedBy:e.uid};if(o)await setDoc(doc(db,"gameArt",o.id),{...re,uploadedAt:serverTimestamp()}),u({...re,id:o.id,uploadedAt:new Date});else{const ce=doc(collection(db,"gameArt"));await setDoc(ce,{...re,uploadedAt:serverTimestamp()}),u({...re,id:ce.id,uploadedAt:new Date})}return{success:!0,url:te.url}}catch(te){return console.error("Erro ao fazer upload da arte do jogo:",te),{success:!1,error:"Erro ao fazer upload da arte do jogo"}}},removeGameArt:async()=>{if(!o)return{success:!1,error:"Nenhuma arte do jogo para remover"};try{return await deleteDoc(doc(db,"gameArt",o.id)),u(null),{success:!0}}catch(K){return console.error("Erro ao remover arte do jogo:",K),{success:!1,error:"Erro ao remover arte do jogo"}}},channelLogos:d,getChannelLogoById:K=>d.find(te=>te.id===K),getChannelLogosByType:K=>d.filter(te=>te.type===K)};return jsxRuntimeExports.jsx(ImagesContext.Provider,{value:se,children:t})},useImages=()=>{const t=reactExports.useContext(ImagesContext);if(!t)throw new Error("useImages deve ser usado dentro de um ImagesProvider");return t};/*!
* sweetalert2 v11.22.1
* Released under the MIT License.
*/function _assertClassBrand(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function _checkPrivateRedeclaration(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet2(t,e){return t.get(_assertClassBrand(t,e))}function _classPrivateFieldInitSpec(t,e,n){_checkPrivateRedeclaration(t,e),e.set(t,n)}function _classPrivateFieldSet2(t,e,n){return t.set(_assertClassBrand(t,e),n),n}const RESTORE_FOCUS_TIMEOUT=100,globalState={},focusPreviousActiveElement=()=>{globalState.previousActiveElement instanceof HTMLElement?(globalState.previousActiveElement.focus(),globalState.previousActiveElement=null):document.body&&document.body.focus()},restoreActiveElement=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,s=window.scrollY;globalState.restoreFocusTimeout=setTimeout(()=>{focusPreviousActiveElement(),e()},RESTORE_FOCUS_TIMEOUT),window.scrollTo(n,s)}),swalPrefix="swal2-",classNames=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],swalClasses=classNames.reduce((t,e)=>(t[e]=swalPrefix+e,t),{}),icons=["success","warning","info","question","error"],iconTypes=icons.reduce((t,e)=>(t[e]=swalPrefix+e,t),{}),consolePrefix="SweetAlert2:",capitalizeFirstLetter=t=>t.charAt(0).toUpperCase()+t.slice(1),warn=t=>{console.warn(`${consolePrefix} ${typeof t=="object"?t.join(" "):t}`)},error=t=>{console.error(`${consolePrefix} ${t}`)},previousWarnOnceMessages=[],warnOnce=t=>{previousWarnOnceMessages.includes(t)||(previousWarnOnceMessages.push(t),warn(t))},warnAboutDeprecation=(t,e=null)=>{warnOnce(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},callIfFunction=t=>typeof t=="function"?t():t,hasToPromiseFn=t=>t&&typeof t.toPromise=="function",asPromise=t=>hasToPromiseFn(t)?t.toPromise():Promise.resolve(t),isPromise=t=>t&&Promise.resolve(t)===t,getContainer=()=>document.body.querySelector(`.${swalClasses.container}`),elementBySelector=t=>{const e=getContainer();return e?e.querySelector(t):null},elementByClass=t=>elementBySelector(`.${t}`),getPopup=()=>elementByClass(swalClasses.popup),getIcon=()=>elementByClass(swalClasses.icon),getIconContent=()=>elementByClass(swalClasses["icon-content"]),getTitle=()=>elementByClass(swalClasses.title),getHtmlContainer=()=>elementByClass(swalClasses["html-container"]),getImage=()=>elementByClass(swalClasses.image),getProgressSteps=()=>elementByClass(swalClasses["progress-steps"]),getValidationMessage=()=>elementByClass(swalClasses["validation-message"]),getConfirmButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.confirm}`),getCancelButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.cancel}`),getDenyButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.deny}`),getInputLabel=()=>elementByClass(swalClasses["input-label"]),getLoader=()=>elementBySelector(`.${swalClasses.loader}`),getActions=()=>elementByClass(swalClasses.actions),getFooter=()=>elementByClass(swalClasses.footer),getTimerProgressBar=()=>elementByClass(swalClasses["timer-progress-bar"]),getCloseButton=()=>elementByClass(swalClasses.close),focusable=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,getFocusableElements=()=>{const t=getPopup();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((u,d)=>{const g=parseInt(u.getAttribute("tabindex")||"0"),y=parseInt(d.getAttribute("tabindex")||"0");return g>y?1:g<y?-1:0}),s=t.querySelectorAll(focusable),o=Array.from(s).filter(u=>u.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(o))].filter(u=>isVisible$1(u))},isModal=()=>hasClass(document.body,swalClasses.shown)&&!hasClass(document.body,swalClasses["toast-shown"])&&!hasClass(document.body,swalClasses["no-backdrop"]),isToast=()=>{const t=getPopup();return t?hasClass(t,swalClasses.toast):!1},isLoading=()=>{const t=getPopup();return t?t.hasAttribute("data-loading"):!1},setInnerHtml=(t,e)=>{if(t.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),o=s.querySelector("head");o&&Array.from(o.childNodes).forEach(d=>{t.appendChild(d)});const u=s.querySelector("body");u&&Array.from(u.childNodes).forEach(d=>{d instanceof HTMLVideoElement||d instanceof HTMLAudioElement?t.appendChild(d.cloneNode(!0)):t.appendChild(d)})}},hasClass=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let s=0;s<n.length;s++)if(!t.classList.contains(n[s]))return!1;return!0},removeCustomClasses=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(swalClasses).includes(n)&&!Object.values(iconTypes).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},applyCustomClass=(t,e,n)=>{if(removeCustomClasses(t,e),!e.customClass)return;const s=e.customClass[n];if(s){if(typeof s!="string"&&!s.forEach){warn(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof s}"`);return}addClass(t,s)}},getInput$1=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${swalClasses.popup} > .${swalClasses[e]}`);case"checkbox":return t.querySelector(`.${swalClasses.popup} > .${swalClasses.checkbox} input`);case"radio":return t.querySelector(`.${swalClasses.popup} > .${swalClasses.radio} input:checked`)||t.querySelector(`.${swalClasses.popup} > .${swalClasses.radio} input:first-child`);case"range":return t.querySelector(`.${swalClasses.popup} > .${swalClasses.range} input`);default:return t.querySelector(`.${swalClasses.popup} > .${swalClasses.input}`)}},focusInput=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},toggleClass=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(t)?t.forEach(o=>{n?o.classList.add(s):o.classList.remove(s)}):n?t.classList.add(s):t.classList.remove(s)}))},addClass=(t,e)=>{toggleClass(t,e,!0)},removeClass=(t,e)=>{toggleClass(t,e,!1)},getDirectChildByClass=(t,e)=>{const n=Array.from(t.children);for(let s=0;s<n.length;s++){const o=n[s];if(o instanceof HTMLElement&&hasClass(o,e))return o}},applyNumericalStyle=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},show=(t,e="flex")=>{t&&(t.style.display=e)},hide$3=t=>{t&&(t.style.display="none")},showWhenInnerHtmlPresent=(t,e="block")=>{t&&new MutationObserver(()=>{toggle(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},setStyle$2=(t,e,n,s)=>{const o=t.querySelector(e);o&&o.style.setProperty(n,s)},toggle=(t,e,n="flex")=>{e?show(t,n):hide$3(t)},isVisible$1=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),allButtonsAreHidden=()=>!isVisible$1(getConfirmButton())&&!isVisible$1(getDenyButton())&&!isVisible$1(getCancelButton()),isScrollable$1=t=>t.scrollHeight>t.clientHeight,selfOrParentIsScrollable=(t,e)=>{let n=t;for(;n&&n!==e;){if(isScrollable$1(n))return!0;n=n.parentElement}return!1},hasCssAnimation=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||s>0},animateTimerProgressBar=(t,e=!1)=>{const n=getTimerProgressBar();n&&isVisible$1(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},stopTimerProgressBar=()=>{const t=getTimerProgressBar();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),s=e/n*100;t.style.width=`${s}%`},isNodeEnv=()=>typeof window>"u"||typeof document>"u",sweetHTML=`
 <div aria-labelledby="${swalClasses.title}" aria-describedby="${swalClasses["html-container"]}" class="${swalClasses.popup}" tabindex="-1">
   <button type="button" class="${swalClasses.close}"></button>
   <ul class="${swalClasses["progress-steps"]}"></ul>
   <div class="${swalClasses.icon}"></div>
   <img class="${swalClasses.image}" />
   <h2 class="${swalClasses.title}" id="${swalClasses.title}"></h2>
   <div class="${swalClasses["html-container"]}" id="${swalClasses["html-container"]}"></div>
   <input class="${swalClasses.input}" id="${swalClasses.input}" />
   <input type="file" class="${swalClasses.file}" />
   <div class="${swalClasses.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${swalClasses.select}" id="${swalClasses.select}"></select>
   <div class="${swalClasses.radio}"></div>
   <label class="${swalClasses.checkbox}">
     <input type="checkbox" id="${swalClasses.checkbox}" />
     <span class="${swalClasses.label}"></span>
   </label>
   <textarea class="${swalClasses.textarea}" id="${swalClasses.textarea}"></textarea>
   <div class="${swalClasses["validation-message"]}" id="${swalClasses["validation-message"]}"></div>
   <div class="${swalClasses.actions}">
     <div class="${swalClasses.loader}"></div>
     <button type="button" class="${swalClasses.confirm}"></button>
     <button type="button" class="${swalClasses.deny}"></button>
     <button type="button" class="${swalClasses.cancel}"></button>
   </div>
   <div class="${swalClasses.footer}"></div>
   <div class="${swalClasses["timer-progress-bar-container"]}">
     <div class="${swalClasses["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),resetOldContainer=()=>{const t=getContainer();return t?(t.remove(),removeClass([document.documentElement,document.body],[swalClasses["no-backdrop"],swalClasses["toast-shown"],swalClasses["has-column"]]),!0):!1},resetValidationMessage$1=()=>{globalState.currentInstance.resetValidationMessage()},addInputChangeListeners=()=>{const t=getPopup(),e=getDirectChildByClass(t,swalClasses.input),n=getDirectChildByClass(t,swalClasses.file),s=t.querySelector(`.${swalClasses.range} input`),o=t.querySelector(`.${swalClasses.range} output`),u=getDirectChildByClass(t,swalClasses.select),d=t.querySelector(`.${swalClasses.checkbox} input`),g=getDirectChildByClass(t,swalClasses.textarea);e.oninput=resetValidationMessage$1,n.onchange=resetValidationMessage$1,u.onchange=resetValidationMessage$1,d.onchange=resetValidationMessage$1,g.oninput=resetValidationMessage$1,s.oninput=()=>{resetValidationMessage$1(),o.value=s.value},s.onchange=()=>{resetValidationMessage$1(),o.value=s.value}},getTarget=t=>typeof t=="string"?document.querySelector(t):t,setupAccessibility=t=>{const e=getPopup();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},setupRTL=t=>{window.getComputedStyle(t).direction==="rtl"&&addClass(getContainer(),swalClasses.rtl)},init=t=>{const e=resetOldContainer();if(isNodeEnv()){error("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=swalClasses.container,e&&addClass(n,swalClasses["no-transition"]),setInnerHtml(n,sweetHTML),n.dataset.swal2Theme=t.theme;const s=getTarget(t.target);s.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),setupAccessibility(t),setupRTL(s),addInputChangeListeners()},parseHtmlToContainer=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?handleObject(t,e):t&&setInnerHtml(e,t)},handleObject=(t,e)=>{t.jquery?handleJqueryElem(e,t):setInnerHtml(e,t.toString())},handleJqueryElem=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},renderActions=(t,e)=>{const n=getActions(),s=getLoader();!n||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?hide$3(n):show(n),applyCustomClass(n,e,"actions"),renderButtons(n,s,e),setInnerHtml(s,e.loaderHtml||""),applyCustomClass(s,e,"loader"))};function renderButtons(t,e,n){const s=getConfirmButton(),o=getDenyButton(),u=getCancelButton();!s||!o||!u||(renderButton(s,"confirm",n),renderButton(o,"deny",n),renderButton(u,"cancel",n),handleButtonsStyling(s,o,u,n),n.reverseButtons&&(n.toast?(t.insertBefore(u,s),t.insertBefore(o,s)):(t.insertBefore(u,e),t.insertBefore(o,e),t.insertBefore(s,e))))}function handleButtonsStyling(t,e,n,s){if(!s.buttonsStyling){removeClass([t,e,n],swalClasses.styled);return}addClass([t,e,n],swalClasses.styled),s.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",s.confirmButtonColor),s.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",s.denyButtonColor),s.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",s.cancelButtonColor),applyOutlineColor(t),applyOutlineColor(e),applyOutlineColor(n)}function applyOutlineColor(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function renderButton(t,e,n){const s=capitalizeFirstLetter(e);toggle(t,n[`show${s}Button`],"inline-block"),setInnerHtml(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=swalClasses[e],applyCustomClass(t,n,`${e}Button`)}const renderCloseButton=(t,e)=>{const n=getCloseButton();n&&(setInnerHtml(n,e.closeButtonHtml||""),applyCustomClass(n,e,"closeButton"),toggle(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},renderContainer=(t,e)=>{const n=getContainer();n&&(handleBackdropParam(n,e.backdrop),handlePositionParam(n,e.position),handleGrowParam(n,e.grow),applyCustomClass(n,e,"container"))};function handleBackdropParam(t,e){typeof e=="string"?t.style.background=e:e||addClass([document.documentElement,document.body],swalClasses["no-backdrop"])}function handlePositionParam(t,e){e&&(e in swalClasses?addClass(t,swalClasses[e]):(warn('The "position" parameter is not valid, defaulting to "center"'),addClass(t,swalClasses.center)))}function handleGrowParam(t,e){e&&addClass(t,swalClasses[`grow-${e}`])}var privateProps={innerParams:new WeakMap,domCache:new WeakMap};const inputClasses=["input","file","range","select","radio","checkbox","textarea"],renderInput=(t,e)=>{const n=getPopup();if(!n)return;const s=privateProps.innerParams.get(t),o=!s||e.input!==s.input;inputClasses.forEach(u=>{const d=getDirectChildByClass(n,swalClasses[u]);d&&(setAttributes(u,e.inputAttributes),d.className=swalClasses[u],o&&hide$3(d))}),e.input&&(o&&showInput(e),setCustomClass(e))},showInput=t=>{if(!t.input)return;if(!renderInputType[t.input]){error(`Unexpected type of input! Expected ${Object.keys(renderInputType).join(" | ")}, got "${t.input}"`);return}const e=getInputContainer(t.input);if(!e)return;const n=renderInputType[t.input](e,t);show(e),t.inputAutoFocus&&setTimeout(()=>{focusInput(n)})},removeAttributes=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},setAttributes=(t,e)=>{const n=getPopup();if(!n)return;const s=getInput$1(n,t);if(s){removeAttributes(s);for(const o in e)s.setAttribute(o,e[o])}},setCustomClass=t=>{if(!t.input)return;const e=getInputContainer(t.input);e&&applyCustomClass(e,t,"input")},setInputPlaceholder=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},setInputLabel=(t,e,n)=>{if(n.inputLabel){const s=document.createElement("label"),o=swalClasses["input-label"];s.setAttribute("for",t.id),s.className=o,typeof n.customClass=="object"&&addClass(s,n.customClass.inputLabel),s.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",s)}},getInputContainer=t=>{const e=getPopup();if(e)return getDirectChildByClass(e,swalClasses[t]||swalClasses.input)},checkAndSetInputValue=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:isPromise(e)||warn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},renderInputType={};renderInputType.text=renderInputType.email=renderInputType.password=renderInputType.number=renderInputType.tel=renderInputType.url=renderInputType.search=renderInputType.date=renderInputType["datetime-local"]=renderInputType.time=renderInputType.week=renderInputType.month=(t,e)=>(checkAndSetInputValue(t,e.inputValue),setInputLabel(t,t,e),setInputPlaceholder(t,e),t.type=e.input,t);renderInputType.file=(t,e)=>(setInputLabel(t,t,e),setInputPlaceholder(t,e),t);renderInputType.range=(t,e)=>{const n=t.querySelector("input"),s=t.querySelector("output");return checkAndSetInputValue(n,e.inputValue),n.type=e.input,checkAndSetInputValue(s,e.inputValue),setInputLabel(n,t,e),t};renderInputType.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");setInnerHtml(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return setInputLabel(t,t,e),t};renderInputType.radio=t=>(t.textContent="",t);renderInputType.checkbox=(t,e)=>{const n=getInput$1(getPopup(),"checkbox");n.value="1",n.checked=!!e.inputValue;const s=t.querySelector("span");return setInnerHtml(s,e.inputPlaceholder||e.inputLabel),n};renderInputType.textarea=(t,e)=>{checkAndSetInputValue(t,e.inputValue),setInputPlaceholder(t,e),setInputLabel(t,t,e);const n=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(getPopup()).width),o=()=>{if(!document.body.contains(t))return;const u=t.offsetWidth+n(t);u>s?getPopup().style.width=`${u}px`:applyNumericalStyle(getPopup(),"width",e.width)};new MutationObserver(o).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const renderContent=(t,e)=>{const n=getHtmlContainer();n&&(showWhenInnerHtmlPresent(n),applyCustomClass(n,e,"htmlContainer"),e.html?(parseHtmlToContainer(e.html,n),show(n,"block")):e.text?(n.textContent=e.text,show(n,"block")):hide$3(n),renderInput(t,e))},renderFooter=(t,e)=>{const n=getFooter();n&&(showWhenInnerHtmlPresent(n),toggle(n,e.footer,"block"),e.footer&&parseHtmlToContainer(e.footer,n),applyCustomClass(n,e,"footer"))},renderIcon=(t,e)=>{const n=privateProps.innerParams.get(t),s=getIcon();if(!s)return;if(n&&e.icon===n.icon){setContent(s,e),applyStyles(s,e);return}if(!e.icon&&!e.iconHtml){hide$3(s);return}if(e.icon&&Object.keys(iconTypes).indexOf(e.icon)===-1){error(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),hide$3(s);return}show(s),setContent(s,e),applyStyles(s,e),addClass(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",adjustSuccessIconBackgroundColor)},applyStyles=(t,e)=>{for(const[n,s]of Object.entries(iconTypes))e.icon!==n&&removeClass(t,s);addClass(t,e.icon&&iconTypes[e.icon]),setColor(t,e),adjustSuccessIconBackgroundColor(),applyCustomClass(t,e,"icon")},adjustSuccessIconBackgroundColor=()=>{const t=getPopup();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<n.length;s++)n[s].style.backgroundColor=e},successIconHtml=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,errorIconHtml=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,setContent=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,s="";e.iconHtml?s=iconContent(e.iconHtml):e.icon==="success"?(s=successIconHtml,n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?s=errorIconHtml:e.icon&&(s=iconContent({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==s.trim()&&setInnerHtml(t,s)},setColor=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])setStyle$2(t,n,"background-color",e.iconColor);setStyle$2(t,".swal2-success-ring","border-color",e.iconColor)}},iconContent=t=>`<div class="${swalClasses["icon-content"]}">${t}</div>`,renderImage=(t,e)=>{const n=getImage();if(n){if(!e.imageUrl){hide$3(n);return}show(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),applyNumericalStyle(n,"width",e.imageWidth),applyNumericalStyle(n,"height",e.imageHeight),n.className=swalClasses.image,applyCustomClass(n,e,"image")}};let dragging=!1,mousedownX=0,mousedownY=0,initialX=0,initialY=0;const addDraggableListeners=t=>{t.addEventListener("mousedown",down),document.body.addEventListener("mousemove",move),t.addEventListener("mouseup",up),t.addEventListener("touchstart",down),document.body.addEventListener("touchmove",move),t.addEventListener("touchend",up)},removeDraggableListeners=t=>{t.removeEventListener("mousedown",down),document.body.removeEventListener("mousemove",move),t.removeEventListener("mouseup",up),t.removeEventListener("touchstart",down),document.body.removeEventListener("touchmove",move),t.removeEventListener("touchend",up)},down=t=>{const e=getPopup();if(t.target===e||getIcon().contains(t.target)){dragging=!0;const n=getClientXY(t);mousedownX=n.clientX,mousedownY=n.clientY,initialX=parseInt(e.style.insetInlineStart)||0,initialY=parseInt(e.style.insetBlockStart)||0,addClass(e,"swal2-dragging")}},move=t=>{const e=getPopup();if(dragging){let{clientX:n,clientY:s}=getClientXY(t);e.style.insetInlineStart=`${initialX+(n-mousedownX)}px`,e.style.insetBlockStart=`${initialY+(s-mousedownY)}px`}},up=()=>{const t=getPopup();dragging=!1,removeClass(t,"swal2-dragging")},getClientXY=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},renderPopup=(t,e)=>{const n=getContainer(),s=getPopup();if(!(!n||!s)){if(e.toast){applyNumericalStyle(n,"width",e.width),s.style.width="100%";const o=getLoader();o&&s.insertBefore(o,getIcon())}else applyNumericalStyle(s,"width",e.width);applyNumericalStyle(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),hide$3(getValidationMessage()),addClasses$1(s,e),e.draggable&&!e.toast?(addClass(s,swalClasses.draggable),addDraggableListeners(s)):(removeClass(s,swalClasses.draggable),removeDraggableListeners(s))}},addClasses$1=(t,e)=>{const n=e.showClass||{};t.className=`${swalClasses.popup} ${isVisible$1(t)?n.popup:""}`,e.toast?(addClass([document.documentElement,document.body],swalClasses["toast-shown"]),addClass(t,swalClasses.toast)):addClass(t,swalClasses.modal),applyCustomClass(t,e,"popup"),typeof e.customClass=="string"&&addClass(t,e.customClass),e.icon&&addClass(t,swalClasses[`icon-${e.icon}`])},renderProgressSteps=(t,e)=>{const n=getProgressSteps();if(!n)return;const{progressSteps:s,currentProgressStep:o}=e;if(!s||s.length===0||o===void 0){hide$3(n);return}show(n),n.textContent="",o>=s.length&&warn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((u,d)=>{const g=createStepElement(u);if(n.appendChild(g),d===o&&addClass(g,swalClasses["active-progress-step"]),d!==s.length-1){const y=createLineElement(e);n.appendChild(y)}})},createStepElement=t=>{const e=document.createElement("li");return addClass(e,swalClasses["progress-step"]),setInnerHtml(e,t),e},createLineElement=t=>{const e=document.createElement("li");return addClass(e,swalClasses["progress-step-line"]),t.progressStepsDistance&&applyNumericalStyle(e,"width",t.progressStepsDistance),e},renderTitle=(t,e)=>{const n=getTitle();n&&(showWhenInnerHtmlPresent(n),toggle(n,e.title||e.titleText,"block"),e.title&&parseHtmlToContainer(e.title,n),e.titleText&&(n.innerText=e.titleText),applyCustomClass(n,e,"title"))},render=(t,e)=>{renderPopup(t,e),renderContainer(t,e),renderProgressSteps(t,e),renderIcon(t,e),renderImage(t,e),renderTitle(t,e),renderCloseButton(t,e),renderContent(t,e),renderActions(t,e),renderFooter(t,e);const n=getPopup();typeof e.didRender=="function"&&n&&e.didRender(n),globalState.eventEmitter.emit("didRender",n)},isVisible=()=>isVisible$1(getPopup()),clickConfirm=()=>{var t;return(t=getConfirmButton())===null||t===void 0?void 0:t.click()},clickDeny=()=>{var t;return(t=getDenyButton())===null||t===void 0?void 0:t.click()},clickCancel=()=>{var t;return(t=getCancelButton())===null||t===void 0?void 0:t.click()},DismissReason=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),removeKeydownHandler=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},addKeydownHandler=(t,e,n)=>{removeKeydownHandler(t),e.toast||(t.keydownHandler=s=>keydownHandler(e,s,n),t.keydownTarget=e.keydownListenerCapture?window:getPopup(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},setFocus=(t,e)=>{var n;const s=getFocusableElements();if(s.length){t=t+e,t===-2&&(t=s.length-1),t===s.length?t=0:t===-1&&(t=s.length-1),s[t].focus();return}(n=getPopup())===null||n===void 0||n.focus()},arrowKeysNextButton=["ArrowRight","ArrowDown"],arrowKeysPreviousButton=["ArrowLeft","ArrowUp"],keydownHandler=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?handleEnter(e,t):e.key==="Tab"?handleTab(e):[...arrowKeysNextButton,...arrowKeysPreviousButton].includes(e.key)?handleArrows(e.key):e.key==="Escape"&&handleEsc(e,t,n)))},handleEnter=(t,e)=>{if(!callIfFunction(e.allowEnterKey))return;const n=getInput$1(getPopup(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;clickConfirm(),t.preventDefault()}},handleTab=t=>{const e=t.target,n=getFocusableElements();let s=-1;for(let o=0;o<n.length;o++)if(e===n[o]){s=o;break}t.shiftKey?setFocus(s,-1):setFocus(s,1),t.stopPropagation(),t.preventDefault()},handleArrows=t=>{const e=getActions(),n=getConfirmButton(),s=getDenyButton(),o=getCancelButton();if(!e||!n||!s||!o)return;const u=[n,s,o];if(document.activeElement instanceof HTMLElement&&!u.includes(document.activeElement))return;const d=arrowKeysNextButton.includes(t)?"nextElementSibling":"previousElementSibling";let g=document.activeElement;if(g){for(let y=0;y<e.children.length;y++){if(g=g[d],!g)return;if(g instanceof HTMLButtonElement&&isVisible$1(g))break}g instanceof HTMLButtonElement&&g.focus()}},handleEsc=(t,e,n)=>{t.preventDefault(),callIfFunction(e.allowEscapeKey)&&n(DismissReason.esc)};var privateMethods={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const setAriaHidden=()=>{const t=getContainer();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},unsetAriaHidden=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},isSafariOrIOS=typeof window<"u"&&!!window.GestureEvent,iOSfix=()=>{if(isSafariOrIOS&&!hasClass(document.body,swalClasses.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,addClass(document.body,swalClasses.iosfix),lockBodyScroll()}},lockBodyScroll=()=>{const t=getContainer();if(!t)return;let e;t.ontouchstart=n=>{e=shouldPreventTouchMove(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},shouldPreventTouchMove=t=>{const e=t.target,n=getContainer(),s=getHtmlContainer();return!n||!s||isStylus(t)||isZoom(t)?!1:e===n||!isScrollable$1(n)&&e instanceof HTMLElement&&!selfOrParentIsScrollable(e,s)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(isScrollable$1(s)&&s.contains(e))},isStylus=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",isZoom=t=>t.touches&&t.touches.length>1,undoIOSfix=()=>{if(hasClass(document.body,swalClasses.iosfix)){const t=parseInt(document.body.style.top,10);removeClass(document.body,swalClasses.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},measureScrollbar=()=>{const t=document.createElement("div");t.className=swalClasses["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let previousBodyPadding=null;const replaceScrollbarWithPadding=t=>{previousBodyPadding===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${previousBodyPadding+measureScrollbar()}px`)},undoReplaceScrollbarWithPadding=()=>{previousBodyPadding!==null&&(document.body.style.paddingRight=`${previousBodyPadding}px`,previousBodyPadding=null)};function removePopupAndResetState(t,e,n,s){isToast()?triggerDidCloseAndDispose(t,s):(restoreActiveElement(n).then(()=>triggerDidCloseAndDispose(t,s)),removeKeydownHandler(globalState)),isSafariOrIOS?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),isModal()&&(undoReplaceScrollbarWithPadding(),undoIOSfix(),unsetAriaHidden()),removeBodyClasses()}function removeBodyClasses(){removeClass([document.documentElement,document.body],[swalClasses.shown,swalClasses["height-auto"],swalClasses["no-backdrop"],swalClasses["toast-shown"]])}function close(t){t=prepareResolveValue(t);const e=privateMethods.swalPromiseResolve.get(this),n=triggerClosePopup(this);this.isAwaitingPromise?t.isDismissed||(handleAwaitingPromise(this),e(t)):n&&e(t)}const triggerClosePopup=t=>{const e=getPopup();if(!e)return!1;const n=privateProps.innerParams.get(t);if(!n||hasClass(e,n.hideClass.popup))return!1;removeClass(e,n.showClass.popup),addClass(e,n.hideClass.popup);const s=getContainer();return removeClass(s,n.showClass.backdrop),addClass(s,n.hideClass.backdrop),handlePopupAnimation(t,e,n),!0};function rejectPromise(t){const e=privateMethods.swalPromiseReject.get(this);handleAwaitingPromise(this),e&&e(t)}const handleAwaitingPromise=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,privateProps.innerParams.get(t)||t._destroy())},prepareResolveValue=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),handlePopupAnimation=(t,e,n)=>{var s;const o=getContainer(),u=hasCssAnimation(e);typeof n.willClose=="function"&&n.willClose(e),(s=globalState.eventEmitter)===null||s===void 0||s.emit("willClose",e),u?animatePopup(t,e,o,n.returnFocus,n.didClose):removePopupAndResetState(t,o,n.returnFocus,n.didClose)},animatePopup=(t,e,n,s,o)=>{globalState.swalCloseEventFinishedCallback=removePopupAndResetState.bind(null,t,n,s,o);const u=function(d){if(d.target===e){var g;(g=globalState.swalCloseEventFinishedCallback)===null||g===void 0||g.call(globalState),delete globalState.swalCloseEventFinishedCallback,e.removeEventListener("animationend",u),e.removeEventListener("transitionend",u)}};e.addEventListener("animationend",u),e.addEventListener("transitionend",u)},triggerDidCloseAndDispose=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=globalState.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},showLoading=t=>{let e=getPopup();if(e||new Swal,e=getPopup(),!e)return;const n=getLoader();isToast()?hide$3(getIcon()):replaceButton(e,t),show(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},replaceButton=(t,e)=>{const n=getActions(),s=getLoader();!n||!s||(!e&&isVisible$1(getConfirmButton())&&(e=getConfirmButton()),show(n),e&&(hide$3(e),s.setAttribute("data-button-to-replace",e.className),n.insertBefore(s,e)),addClass([t,n],swalClasses.loading))},handleInputOptionsAndValue=(t,e)=>{e.input==="select"||e.input==="radio"?handleInputOptions(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(hasToPromiseFn(e.inputValue)||isPromise(e.inputValue))&&(showLoading(getConfirmButton()),handleInputValue(t,e))},getInputValue=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return getCheckboxValue(n);case"radio":return getRadioValue(n);case"file":return getFileValue(n);default:return e.inputAutoTrim?n.value.trim():n.value}},getCheckboxValue=t=>t.checked?1:0,getRadioValue=t=>t.checked?t.value:null,getFileValue=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,handleInputOptions=(t,e)=>{const n=getPopup();if(!n)return;const s=o=>{e.input==="select"?populateSelectOptions(n,formatInputOptions(o),e):e.input==="radio"&&populateRadioOptions(n,formatInputOptions(o),e)};hasToPromiseFn(e.inputOptions)||isPromise(e.inputOptions)?(showLoading(getConfirmButton()),asPromise(e.inputOptions).then(o=>{t.hideLoading(),s(o)})):typeof e.inputOptions=="object"?s(e.inputOptions):error(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},handleInputValue=(t,e)=>{const n=t.getInput();n&&(hide$3(n),asPromise(e.inputValue).then(s=>{n.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,show(n),n.focus(),t.hideLoading()}).catch(s=>{error(`Error in inputValue promise: ${s}`),n.value="",show(n),n.focus(),t.hideLoading()}))};function populateSelectOptions(t,e,n){const s=getDirectChildByClass(t,swalClasses.select);if(!s)return;const o=(u,d,g)=>{const y=document.createElement("option");y.value=g,setInnerHtml(y,d),y.selected=isSelected(g,n.inputValue),u.appendChild(y)};e.forEach(u=>{const d=u[0],g=u[1];if(Array.isArray(g)){const y=document.createElement("optgroup");y.label=d,y.disabled=!1,s.appendChild(y),g.forEach(v=>o(y,v[1],v[0]))}else o(s,g,d)}),s.focus()}function populateRadioOptions(t,e,n){const s=getDirectChildByClass(t,swalClasses.radio);if(!s)return;e.forEach(u=>{const d=u[0],g=u[1],y=document.createElement("input"),v=document.createElement("label");y.type="radio",y.name=swalClasses.radio,y.value=d,isSelected(d,n.inputValue)&&(y.checked=!0);const w=document.createElement("span");setInnerHtml(w,g),w.className=swalClasses.label,v.appendChild(y),v.appendChild(w),s.appendChild(v)});const o=s.querySelectorAll("input");o.length&&o[0].focus()}const formatInputOptions=t=>{const e=[];return t instanceof Map?t.forEach((n,s)=>{let o=n;typeof o=="object"&&(o=formatInputOptions(o)),e.push([s,o])}):Object.keys(t).forEach(n=>{let s=t[n];typeof s=="object"&&(s=formatInputOptions(s)),e.push([n,s])}),e},isSelected=(t,e)=>!!e&&e.toString()===t.toString(),handleConfirmButtonClick=t=>{const e=privateProps.innerParams.get(t);t.disableButtons(),e.input?handleConfirmOrDenyWithInput(t,"confirm"):confirm(t,!0)},handleDenyButtonClick=t=>{const e=privateProps.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?handleConfirmOrDenyWithInput(t,"deny"):deny(t,!1)},handleCancelButtonClick=(t,e)=>{t.disableButtons(),e(DismissReason.cancel)},handleConfirmOrDenyWithInput=(t,e)=>{const n=privateProps.innerParams.get(t);if(!n.input){error(`The "input" parameter is needed to be set when using returnInputValueOn${capitalizeFirstLetter(e)}`);return}const s=t.getInput(),o=getInputValue(t,n);n.inputValidator?handleInputValidator(t,o,e):s&&!s.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||s.validationMessage)):e==="deny"?deny(t,o):confirm(t,o)},handleInputValidator=(t,e,n)=>{const s=privateProps.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>asPromise(s.inputValidator(e,s.validationMessage))).then(u=>{t.enableButtons(),t.enableInput(),u?t.showValidationMessage(u):n==="deny"?deny(t,e):confirm(t,e)})},deny=(t,e)=>{const n=privateProps.innerParams.get(t||void 0);n.showLoaderOnDeny&&showLoading(getDenyButton()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>asPromise(n.preDeny(e,n.validationMessage))).then(o=>{o===!1?(t.hideLoading(),handleAwaitingPromise(t)):t.close({isDenied:!0,value:typeof o>"u"?e:o})}).catch(o=>rejectWith(t||void 0,o))):t.close({isDenied:!0,value:e})},succeedWith=(t,e)=>{t.close({isConfirmed:!0,value:e})},rejectWith=(t,e)=>{t.rejectPromise(e)},confirm=(t,e)=>{const n=privateProps.innerParams.get(t||void 0);n.showLoaderOnConfirm&&showLoading(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>asPromise(n.preConfirm(e,n.validationMessage))).then(o=>{isVisible$1(getValidationMessage())||o===!1?(t.hideLoading(),handleAwaitingPromise(t)):succeedWith(t,typeof o>"u"?e:o)}).catch(o=>rejectWith(t||void 0,o))):succeedWith(t,e)};function hideLoading(){const t=privateProps.innerParams.get(this);if(!t)return;const e=privateProps.domCache.get(this);hide$3(e.loader),isToast()?t.icon&&show(getIcon()):showRelatedButton(e),removeClass([e.popup,e.actions],swalClasses.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const showRelatedButton=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?show(e[0],"inline-block"):allButtonsAreHidden()&&hide$3(t.actions)};function getInput(){const t=privateProps.innerParams.get(this),e=privateProps.domCache.get(this);return e?getInput$1(e.popup,t.input):null}function setButtonsDisabled(t,e,n){const s=privateProps.domCache.get(t);e.forEach(o=>{s[o].disabled=n})}function setInputDisabled(t,e){const n=getPopup();if(!(!n||!t))if(t.type==="radio"){const s=n.querySelectorAll(`[name="${swalClasses.radio}"]`);for(let o=0;o<s.length;o++)s[o].disabled=e}else t.disabled=e}function enableButtons(){setButtonsDisabled(this,["confirmButton","denyButton","cancelButton"],!1)}function disableButtons(){setButtonsDisabled(this,["confirmButton","denyButton","cancelButton"],!0)}function enableInput(){setInputDisabled(this.getInput(),!1)}function disableInput(){setInputDisabled(this.getInput(),!0)}function showValidationMessage(t){const e=privateProps.domCache.get(this),n=privateProps.innerParams.get(this);setInnerHtml(e.validationMessage,t),e.validationMessage.className=swalClasses["validation-message"],n.customClass&&n.customClass.validationMessage&&addClass(e.validationMessage,n.customClass.validationMessage),show(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",swalClasses["validation-message"]),focusInput(s),addClass(s,swalClasses.inputerror))}function resetValidationMessage(){const t=privateProps.domCache.get(this);t.validationMessage&&hide$3(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),removeClass(e,swalClasses.inputerror))}const defaultParams={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},updatableParams=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],deprecatedParams={allowEnterKey:void 0},toastIncompatibleParams=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],isValidParameter=t=>Object.prototype.hasOwnProperty.call(defaultParams,t),isUpdatableParameter=t=>updatableParams.indexOf(t)!==-1,isDeprecatedParameter=t=>deprecatedParams[t],checkIfParamIsValid=t=>{isValidParameter(t)||warn(`Unknown parameter "${t}"`)},checkIfToastParamIsValid=t=>{toastIncompatibleParams.includes(t)&&warn(`The parameter "${t}" is incompatible with toasts`)},checkIfParamIsDeprecated=t=>{const e=isDeprecatedParameter(t);e&&warnAboutDeprecation(t,e)},showWarningsForParams=t=>{t.backdrop===!1&&t.allowOutsideClick&&warn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&warn(`Invalid theme "${t.theme}"`);for(const e in t)checkIfParamIsValid(e),t.toast&&checkIfToastParamIsValid(e),checkIfParamIsDeprecated(e)};function update(t){const e=getContainer(),n=getPopup(),s=privateProps.innerParams.get(this);if(!n||hasClass(n,s.hideClass.popup)){warn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const o=filterValidParams(t),u=Object.assign({},s,o);showWarningsForParams(u),e.dataset.swal2Theme=u.theme,render(this,u),privateProps.innerParams.set(this,u),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const filterValidParams=t=>{const e={};return Object.keys(t).forEach(n=>{isUpdatableParameter(n)?e[n]=t[n]:warn(`Invalid parameter to update: ${n}`)}),e};function _destroy(){const t=privateProps.domCache.get(this),e=privateProps.innerParams.get(this);if(!e){disposeWeakMaps(this);return}t.popup&&globalState.swalCloseEventFinishedCallback&&(globalState.swalCloseEventFinishedCallback(),delete globalState.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),globalState.eventEmitter.emit("didDestroy"),disposeSwal(this)}const disposeSwal=t=>{disposeWeakMaps(t),delete t.params,delete globalState.keydownHandler,delete globalState.keydownTarget,delete globalState.currentInstance},disposeWeakMaps=t=>{t.isAwaitingPromise?(unsetWeakMaps(privateProps,t),t.isAwaitingPromise=!0):(unsetWeakMaps(privateMethods,t),unsetWeakMaps(privateProps,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},unsetWeakMaps=(t,e)=>{for(const n in t)t[n].delete(e)};var instanceMethods=Object.freeze({__proto__:null,_destroy,close,closeModal:close,closePopup:close,closeToast:close,disableButtons,disableInput,disableLoading:hideLoading,enableButtons,enableInput,getInput,handleAwaitingPromise,hideLoading,rejectPromise,resetValidationMessage,showValidationMessage,update});const handlePopupClick=(t,e,n)=>{t.toast?handleToastClick(t,e,n):(handleModalMousedown(e),handleContainerMousedown(e),handleModalClick(t,e,n))},handleToastClick=(t,e,n)=>{e.popup.onclick=()=>{t&&(isAnyButtonShown(t)||t.timer||t.input)||n(DismissReason.close)}},isAnyButtonShown=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let ignoreOutsideClick=!1;const handleModalMousedown=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(ignoreOutsideClick=!0)}}},handleContainerMousedown=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(ignoreOutsideClick=!0)}}},handleModalClick=(t,e,n)=>{e.container.onclick=s=>{if(ignoreOutsideClick){ignoreOutsideClick=!1;return}s.target===e.container&&callIfFunction(t.allowOutsideClick)&&n(DismissReason.backdrop)}},isJqueryElement=t=>typeof t=="object"&&t.jquery,isElement$1=t=>t instanceof Element||isJqueryElement(t),argsToParams=t=>{const e={};return typeof t[0]=="object"&&!isElement$1(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,s)=>{const o=t[s];typeof o=="string"||isElement$1(o)?e[n]=o:o!==void 0&&error(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof o}`)}),e};function fire(...t){return new this(...t)}function mixin(t){class e extends this{_main(s,o){return super._main(s,Object.assign({},t,o))}}return e}const getTimerLeft=()=>globalState.timeout&&globalState.timeout.getTimerLeft(),stopTimer=()=>{if(globalState.timeout)return stopTimerProgressBar(),globalState.timeout.stop()},resumeTimer=()=>{if(globalState.timeout){const t=globalState.timeout.start();return animateTimerProgressBar(t),t}},toggleTimer=()=>{const t=globalState.timeout;return t&&(t.running?stopTimer():resumeTimer())},increaseTimer=t=>{if(globalState.timeout){const e=globalState.timeout.increase(t);return animateTimerProgressBar(e,!0),e}},isTimerRunning=()=>!!(globalState.timeout&&globalState.timeout.isRunning());let bodyClickListenerAdded=!1;const clickHandlers={};function bindClickHandler(t="data-swal-template"){clickHandlers[t]=this,bodyClickListenerAdded||(document.body.addEventListener("click",bodyClickListener),bodyClickListenerAdded=!0)}const bodyClickListener=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in clickHandlers){const s=e.getAttribute(n);if(s){clickHandlers[n].fire({template:s});return}}};class EventEmitter{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const s=this._getHandlersByEventName(e);s.includes(n)||s.push(n)}once(e,n){const s=(...o)=>{this.removeListener(e,s),n.apply(this,o)};this.on(e,s)}emit(e,...n){this._getHandlersByEventName(e).forEach(s=>{try{s.apply(this,n)}catch(o){console.error(o)}})}removeListener(e,n){const s=this._getHandlersByEventName(e),o=s.indexOf(n);o>-1&&s.splice(o,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}globalState.eventEmitter=new EventEmitter;const on=(t,e)=>{globalState.eventEmitter.on(t,e)},once$1=(t,e)=>{globalState.eventEmitter.once(t,e)},off=(t,e)=>{if(!t){globalState.eventEmitter.reset();return}e?globalState.eventEmitter.removeListener(t,e):globalState.eventEmitter.removeAllListeners(t)};var staticMethods=Object.freeze({__proto__:null,argsToParams,bindClickHandler,clickCancel,clickConfirm,clickDeny,enableLoading:showLoading,fire,getActions,getCancelButton,getCloseButton,getConfirmButton,getContainer,getDenyButton,getFocusableElements,getFooter,getHtmlContainer,getIcon,getIconContent,getImage,getInputLabel,getLoader,getPopup,getProgressSteps,getTimerLeft,getTimerProgressBar,getTitle,getValidationMessage,increaseTimer,isDeprecatedParameter,isLoading,isTimerRunning,isUpdatableParameter,isValidParameter,isVisible,mixin,off,on,once:once$1,resumeTimer,showLoading,stopTimer,toggleTimer});class Timer{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const swalStringParams=["swal-title","swal-html","swal-footer"],getTemplateParams=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return showWarningsForElements(n),Object.assign(getSwalParams(n),getSwalFunctionParams(n),getSwalButtons(n),getSwalImage(n),getSwalIcon(n),getSwalInput(n),getSwalStringParams(n,swalStringParams))},getSwalParams=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(s=>{showWarningsForAttributes(s,["name","value"]);const o=s.getAttribute("name"),u=s.getAttribute("value");!o||!u||(typeof defaultParams[o]=="boolean"?e[o]=u!=="false":typeof defaultParams[o]=="object"?e[o]=JSON.parse(u):e[o]=u)}),e},getSwalFunctionParams=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(s=>{const o=s.getAttribute("name"),u=s.getAttribute("value");!o||!u||(e[o]=new Function(`return ${u}`)())}),e},getSwalButtons=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(s=>{showWarningsForAttributes(s,["type","color","aria-label"]);const o=s.getAttribute("type");!o||!["confirm","cancel","deny"].includes(o)||(e[`${o}ButtonText`]=s.innerHTML,e[`show${capitalizeFirstLetter(o)}Button`]=!0,s.hasAttribute("color")&&(e[`${o}ButtonColor`]=s.getAttribute("color")),s.hasAttribute("aria-label")&&(e[`${o}ButtonAriaLabel`]=s.getAttribute("aria-label")))}),e},getSwalImage=t=>{const e={},n=t.querySelector("swal-image");return n&&(showWarningsForAttributes(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},getSwalIcon=t=>{const e={},n=t.querySelector("swal-icon");return n&&(showWarningsForAttributes(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},getSwalInput=t=>{const e={},n=t.querySelector("swal-input");n&&(showWarningsForAttributes(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const s=Array.from(t.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(o=>{showWarningsForAttributes(o,["value"]);const u=o.getAttribute("value");if(!u)return;const d=o.innerHTML;e.inputOptions[u]=d})),e},getSwalStringParams=(t,e)=>{const n={};for(const s in e){const o=e[s],u=t.querySelector(o);u&&(showWarningsForAttributes(u,[]),n[o.replace(/^swal-/,"")]=u.innerHTML.trim())}return n},showWarningsForElements=t=>{const e=swalStringParams.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const s=n.tagName.toLowerCase();e.includes(s)||warn(`Unrecognized element <${s}>`)})},showWarningsForAttributes=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&warn([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},SHOW_CLASS_TIMEOUT=10,openPopup=t=>{const e=getContainer(),n=getPopup();typeof t.willOpen=="function"&&t.willOpen(n),globalState.eventEmitter.emit("willOpen",n);const o=window.getComputedStyle(document.body).overflowY;addClasses(e,n,t),setTimeout(()=>{setScrollingVisibility(e,n)},SHOW_CLASS_TIMEOUT),isModal()&&(fixScrollContainer(e,t.scrollbarPadding,o),setAriaHidden()),!isToast()&&!globalState.previousActiveElement&&(globalState.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),globalState.eventEmitter.emit("didOpen",n),removeClass(e,swalClasses["no-transition"])},swalOpenAnimationFinished=t=>{const e=getPopup();if(t.target!==e)return;const n=getContainer();e.removeEventListener("animationend",swalOpenAnimationFinished),e.removeEventListener("transitionend",swalOpenAnimationFinished),n.style.overflowY="auto"},setScrollingVisibility=(t,e)=>{hasCssAnimation(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",swalOpenAnimationFinished),e.addEventListener("transitionend",swalOpenAnimationFinished)):t.style.overflowY="auto"},fixScrollContainer=(t,e,n)=>{iOSfix(),e&&n!=="hidden"&&replaceScrollbarWithPadding(n),setTimeout(()=>{t.scrollTop=0})},addClasses=(t,e,n)=>{addClass(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),show(e,"grid"),setTimeout(()=>{addClass(e,n.showClass.popup),e.style.removeProperty("opacity")},SHOW_CLASS_TIMEOUT)):show(e,"grid"),addClass([document.documentElement,document.body],swalClasses.shown),n.heightAuto&&n.backdrop&&!n.toast&&addClass([document.documentElement,document.body],swalClasses["height-auto"])};var defaultInputValidators={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function setDefaultInputValidators(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=defaultInputValidators.email),t.input==="url"&&(t.inputValidator=defaultInputValidators.url))}function validateCustomTargetElement(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(warn('Target parameter is not valid, defaulting to "body"'),t.target="body")}function setParameters(t){setDefaultInputValidators(t),t.showLoaderOnConfirm&&!t.preConfirm&&warn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),validateCustomTargetElement(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),init(t)}let currentInstance;var _promise=new WeakMap;class SweetAlert{constructor(...e){if(_classPrivateFieldInitSpec(this,_promise,void 0),typeof window>"u")return;currentInstance=this;const n=Object.freeze(this.constructor.argsToParams(e));this.params=n,this.isAwaitingPromise=!1,_classPrivateFieldSet2(_promise,this,this._main(currentInstance.params))}_main(e,n={}){if(showWarningsForParams(Object.assign({},n,e)),globalState.currentInstance){const u=privateMethods.swalPromiseResolve.get(globalState.currentInstance),{isAwaitingPromise:d}=globalState.currentInstance;globalState.currentInstance._destroy(),d||u({isDismissed:!0}),isModal()&&unsetAriaHidden()}globalState.currentInstance=currentInstance;const s=prepareParams(e,n);setParameters(s),Object.freeze(s),globalState.timeout&&(globalState.timeout.stop(),delete globalState.timeout),clearTimeout(globalState.restoreFocusTimeout);const o=populateDomCache(currentInstance);return render(currentInstance,s),privateProps.innerParams.set(currentInstance,s),swalPromise(currentInstance,o,s)}then(e){return _classPrivateFieldGet2(_promise,this).then(e)}finally(e){return _classPrivateFieldGet2(_promise,this).finally(e)}}const swalPromise=(t,e,n)=>new Promise((s,o)=>{const u=d=>{t.close({isDismissed:!0,dismiss:d})};privateMethods.swalPromiseResolve.set(t,s),privateMethods.swalPromiseReject.set(t,o),e.confirmButton.onclick=()=>{handleConfirmButtonClick(t)},e.denyButton.onclick=()=>{handleDenyButtonClick(t)},e.cancelButton.onclick=()=>{handleCancelButtonClick(t,u)},e.closeButton.onclick=()=>{u(DismissReason.close)},handlePopupClick(n,e,u),addKeydownHandler(globalState,n,u),handleInputOptionsAndValue(t,n),openPopup(n),setupTimer(globalState,n,u),initFocus(e,n),setTimeout(()=>{e.container.scrollTop=0})}),prepareParams=(t,e)=>{const n=getTemplateParams(t),s=Object.assign({},defaultParams,e,n,t);return s.showClass=Object.assign({},defaultParams.showClass,s.showClass),s.hideClass=Object.assign({},defaultParams.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},populateDomCache=t=>{const e={popup:getPopup(),container:getContainer(),actions:getActions(),confirmButton:getConfirmButton(),denyButton:getDenyButton(),cancelButton:getCancelButton(),loader:getLoader(),closeButton:getCloseButton(),validationMessage:getValidationMessage(),progressSteps:getProgressSteps()};return privateProps.domCache.set(t,e),e},setupTimer=(t,e,n)=>{const s=getTimerProgressBar();hide$3(s),e.timer&&(t.timeout=new Timer(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(show(s),applyCustomClass(s,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&animateTimerProgressBar(e.timer)})))},initFocus=(t,e)=>{if(!e.toast){if(!callIfFunction(e.allowEnterKey)){warnAboutDeprecation("allowEnterKey"),blurActiveElement();return}focusAutofocus(t)||focusButton(t,e)||setFocus(-1,1)}},focusAutofocus=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&isVisible$1(n))return n.focus(),!0;return!1},focusButton=(t,e)=>e.focusDeny&&isVisible$1(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&isVisible$1(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&isVisible$1(t.confirmButton)?(t.confirmButton.focus(),!0):!1,blurActiveElement=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${t}`)}SweetAlert.prototype.disableButtons=disableButtons;SweetAlert.prototype.enableButtons=enableButtons;SweetAlert.prototype.getInput=getInput;SweetAlert.prototype.disableInput=disableInput;SweetAlert.prototype.enableInput=enableInput;SweetAlert.prototype.hideLoading=hideLoading;SweetAlert.prototype.disableLoading=hideLoading;SweetAlert.prototype.showValidationMessage=showValidationMessage;SweetAlert.prototype.resetValidationMessage=resetValidationMessage;SweetAlert.prototype.close=close;SweetAlert.prototype.closePopup=close;SweetAlert.prototype.closeModal=close;SweetAlert.prototype.closeToast=close;SweetAlert.prototype.rejectPromise=rejectPromise;SweetAlert.prototype.update=update;SweetAlert.prototype._destroy=_destroy;Object.assign(SweetAlert,staticMethods);Object.keys(instanceMethods).forEach(t=>{SweetAlert[t]=function(...e){return currentInstance&&currentInstance[t]?currentInstance[t](...e):null}});SweetAlert.DismissReason=DismissReason;SweetAlert.version="11.22.1";const Swal=SweetAlert;Swal.default=Swal;typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const showConfirmDialog=async t=>{const{title:e,text:n="",icon:s="question",confirmButtonText:o="Confirmar",cancelButtonText:u="Cancelar",confirmButtonColor:d="#3085d6",cancelButtonColor:g="#d33"}=t;return(await Swal.fire({title:e,text:n,icon:s,showCancelButton:!0,confirmButtonColor:d,cancelButtonColor:g,confirmButtonText:o,cancelButtonText:u,reverseButtons:!0,customClass:{popup:"rounded-lg",confirmButton:"rounded-md px-4 py-2 mx-2",cancelButton:"rounded-md px-4 py-2 mx-2"}})).isConfirmed},showSuccessAlert=async(t,e)=>{await Swal.fire({title:t,text:e,icon:"success",confirmButtonText:"OK",confirmButtonColor:"#10b981",customClass:{popup:"rounded-lg",confirmButton:"rounded-md px-4 py-2"}})},showErrorAlert=async(t,e)=>{await Swal.fire({title:t,text:e,icon:"error",confirmButtonText:"OK",confirmButtonColor:"#ef4444",customClass:{popup:"rounded-lg",confirmButton:"rounded-md px-4 py-2"}})},showInfoAlert=async(t,e)=>{await Swal.fire({title:t,text:e,icon:"info",confirmButtonText:"OK",confirmButtonColor:"#3b82f6",customClass:{popup:"rounded-lg",confirmButton:"rounded-md px-4 py-2"}})},executeWithConfirmationAndLoading=async(t,e,n={})=>{const{title:s="Processando...",text:o="Por favor, aguarde..."}=n;if(!await showConfirmDialog(t))return!1;Swal.fire({title:s,text:o,allowOutsideClick:!1,didOpen:()=>{Swal.showLoading()}});try{return await e(),Swal.close(),await showSuccessAlert(t.title||"Sucesso!","Operação concluída com êxito."),!0}catch(d){return Swal.close(),await showErrorAlert(t.title||"Erro!",d.message||"Ocorreu um erro inesperado."),console.error("Erro na operação:",d),!1}},useConfirmDialog=()=>({showConfirmDialog,showSuccessAlert,showErrorAlert,showInfoAlert,executeWithConfirmationAndLoading});async function uploadImageToImageBB(t){const e="bcd04b7d89a2adaba76c1df8a88a8ac4",n=new FormData;n.append("image",t);try{const o=await(await fetch(`https://api.imgbb.com/1/upload?key=${e}`,{method:"POST",body:n})).json();return o.success?o.data.url:(console.error("Erro no upload para ImageBB:",o.error.message),null)}catch(s){return console.error("Falha ao fazer upload da imagem:",s),null}}const ChannelContext=reactExports.createContext(void 0),ChannelProvider=({children:t})=>{const[e,n]=reactExports.useState([]),[s,o]=reactExports.useState(!0),u=collection(db,"channels"),d=async()=>{o(!0);try{const T=(await getDocs(u)).docs.map(A=>({...A.data(),id:A.id}));n(T.sort((A,C)=>A.name.localeCompare(C.name)))}catch(w){console.error("Erro ao buscar canais:",w)}finally{o(!1)}};reactExports.useEffect(()=>{d()},[]);const g=async(w,T)=>await executeWithConfirmationAndLoading({title:"Criar Canal",text:`Tem certeza que deseja criar o canal ${w.name}?`,confirmButtonText:"Criar",cancelButtonText:"Cancelar",icon:"question"},async()=>{let C=null;if(T&&(C=await uploadImageToImageBB(T),!C))throw new Error("Falha no upload da logo.");await addDoc(u,{...w,logoUrl:C}),await d()},{title:"Criando Canal...",text:`Adicionando ${w.name}. Por favor, aguarde.`})?(console.log(`Canal ${w.name} criado com sucesso!`),{success:!0}):(console.log(`Criação do canal ${w.name} cancelada ou falhou.`),{success:!1,error:"Criação cancelada ou falha na operação."}),y=async(w,T,A)=>await executeWithConfirmationAndLoading({title:"Atualizar Canal",text:`Tem certeza que deseja atualizar o canal ${T.name}?`,confirmButtonText:"Atualizar",cancelButtonText:"Cancelar"},async()=>{const j=doc(db,"channels",w),D={...T};if(A){const H=await uploadImageToImageBB(A);if(!H)throw new Error("Falha no upload da nova logo.");D.logoUrl=H}await updateDoc(j,D),await d()},{title:"Atualizando Canal...",text:`Atualizando ${T.name}. Por favor, aguarde.`})?(console.log(`Canal ${T.name} atualizado com sucesso!`),{success:!0}):(console.log(`Atualização do canal ${T.name} cancelada ou falhou.`),{success:!1,error:"Atualização cancelada ou falha na operação."}),v=async(w,T)=>await executeWithConfirmationAndLoading({title:"Deletar Canal",text:`Tem certeza que deseja deletar o canal "${T}"? Esta ação é irreversível.`,icon:"warning",confirmButtonText:"Sim, Deletar!",cancelButtonText:"Cancelar",confirmButtonColor:"#dc3545"},async()=>{const C=doc(db,"channels",w);await deleteDoc(C),await d()},{title:"Deletando Canal...",text:`Removendo "${T}". Por favor, aguarde.`})?(console.log(`Canal "${T}" deletado com sucesso!`),{success:!0}):(console.log(`Exclusão do canal "${T}" cancelada ou falhou.`),{success:!1,error:"Exclusão cancelada ou falha na operação."});return jsxRuntimeExports.jsx(ChannelContext.Provider,{value:{channels:e,loading:s,addChannel:g,updateChannel:y,deleteChannel:v},children:t})},useChannels=()=>{const t=reactExports.useContext(ChannelContext);if(t===void 0)throw new Error("useChannels deve ser usado dentro de um ChannelProvider");return t},DatabaseContext=reactExports.createContext(void 0),DatabaseProvider=({children:t})=>{const e=async(T,A)=>(await addDoc(collection(db,T),{...A,createdAt:new Date,updatedAt:new Date})).id,n=async(T,A)=>{const C=doc(db,T,A),j=await getDoc(C);return j.exists()?{id:j.id,...j.data()}:null},s=async(T,A,C)=>{const j=doc(db,T,A);await updateDoc(j,{...C,updatedAt:new Date})},o=async(T,A)=>{const C=doc(db,T,A);await deleteDoc(C)},u=async(T,A=[])=>{const C=query(collection(db,T),...A);return(await getDocs(C)).docs.map(D=>({id:D.id,...D.data()}))},w={create:e,read:n,update:s,delete:o,list:u,createEscalacao:async T=>await e("escalacoes",T),getEscalacoes:async T=>await u("escalacoes",[where("userId","==",T),orderBy("createdAt","desc")]),updateEscalacao:async(T,A)=>{await s("escalacoes",T,A)},deleteEscalacao:async T=>{await o("escalacoes",T)}};return jsxRuntimeExports.jsx(DatabaseContext.Provider,{value:w,children:t})},AliasContext=reactExports.createContext(void 0),AliasProvider=({children:t})=>{const[e,n]=reactExports.useState([]),[s,o]=reactExports.useState(!0),u=collection(db,"aliases"),d=async()=>{o(!0);const T=(await getDocs(u)).docs.map(A=>({...A.data(),id:A.id}));n(T),o(!1)};reactExports.useEffect(()=>{d()},[]);const g=async w=>await executeWithConfirmationAndLoading({title:"Criar Alias",text:`Deseja criar o alias para "${w.name}"?`,confirmButtonText:"Criar",cancelButtonText:"Cancelar",icon:"question"},async()=>{await addDoc(u,w),await d()},{title:"Criando Alias...",text:`Adicionando "${w.name}". Por favor, aguarde.`}),y=async w=>w.id?await executeWithConfirmationAndLoading({title:"Atualizar Alias",text:`Deseja atualizar o alias "${w.name}"?`,confirmButtonText:"Atualizar",cancelButtonText:"Cancelar",icon:"question"},async()=>{await updateDoc(doc(u,w.id),{name:w.name,alias:w.alias}),await d()},{title:"Atualizando Alias...",text:`Salvando alterações de "${w.name}"...`}):!1,v=async(w,T)=>await executeWithConfirmationAndLoading({title:"Excluir Alias",text:`Tem certeza que deseja excluir o alias "${T}"?`,confirmButtonText:"Excluir",cancelButtonText:"Cancelar",icon:"warning"},async()=>{await deleteDoc(doc(u,w)),await d()},{title:"Excluindo Alias...",text:`Removendo "${T}". Aguarde um momento.`});return jsxRuntimeExports.jsx(AliasContext.Provider,{value:{aliases:e,loading:s,addAlias:g,updateAlias:y,deleteAlias:v},children:t})},useAliases=()=>{const t=reactExports.useContext(AliasContext);if(!t)throw new Error("useAliases deve ser usado dentro de AliasProvider");return t},AppProviders=({children:t})=>jsxRuntimeExports.jsx(GlobalProvider,{children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(DatabaseProvider,{children:jsxRuntimeExports.jsx(AliasProvider,{children:jsxRuntimeExports.jsx(UserProvider,{children:jsxRuntimeExports.jsx(TeamsProvider,{children:jsxRuntimeExports.jsx(ImagesProvider,{children:jsxRuntimeExports.jsx(ChannelProvider,{children:jsxRuntimeExports.jsx(SquadProvider,{children:t})})})})})})})})});/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),toPascalCase=t=>{const e=toCamelCase(t);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),hasA11yProp=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes$1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:d,...g},y)=>reactExports.createElement("svg",{ref:y,...defaultAttributes$1,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:mergeClasses("lucide",o),...!u&&!hasA11yProp(g)&&{"aria-hidden":"true"},...g},[...d.map(([v,w])=>reactExports.createElement(v,w)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(t,e)=>{const n=reactExports.forwardRef(({className:s,...o},u)=>reactExports.createElement(Icon,{ref:u,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(t))}`,`lucide-${t}`,s),...o}));return n.displayName=toPascalCase(t),n};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$U=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ArrowDown=createLucideIcon("arrow-down",__iconNode$U);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$T=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],ArrowLeftRight=createLucideIcon("arrow-left-right",__iconNode$T);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$S=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$S);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$R=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$R);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Q=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ArrowUp=createLucideIcon("arrow-up",__iconNode$Q);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$P=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],Brush=createLucideIcon("brush",__iconNode$P);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$O=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$O);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$N=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ChartPie=createLucideIcon("chart-pie",__iconNode$N);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$M);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$L);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$K);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],ClipboardCheck=createLucideIcon("clipboard-check",__iconNode$J);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Clock=createLucideIcon("clock",__iconNode$I);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Coffee=createLucideIcon("coffee",__iconNode$H);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$G);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$F);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Database=createLucideIcon("database",__iconNode$E);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Download=createLucideIcon("download",__iconNode$D);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$C);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$B);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M12 13V2l8 4-8 4",key:"5wlwwj"}],["path",{d:"M20.561 10.222a9 9 0 1 1-12.55-5.29",key:"1c0wjv"}],["path",{d:"M8.002 9.997a5 5 0 1 0 8.9 2.02",key:"gb1g7m"}]],Goal=createLucideIcon("goal",__iconNode$A);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],GripVertical=createLucideIcon("grip-vertical",__iconNode$z);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],House=createLucideIcon("house",__iconNode$y);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$2=createLucideIcon("image",__iconNode$x);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$w);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],LayoutTemplate=createLucideIcon("layout-template",__iconNode$v);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Link2=createLucideIcon("link-2",__iconNode$u);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Loader=createLucideIcon("loader",__iconNode$t);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$s);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],LogOut=createLucideIcon("log-out",__iconNode$r);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$q);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],MapPin=createLucideIcon("map-pin",__iconNode$p);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Menu=createLucideIcon("menu",__iconNode$o);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M5 12h14",key:"1ays0h"}]],Minus=createLucideIcon("minus",__iconNode$n);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Palette=createLucideIcon("palette",__iconNode$m);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$l);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Play=createLucideIcon("play",__iconNode$k);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$j);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Repeat=createLucideIcon("repeat",__iconNode$i);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$h);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$g);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$f);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ShieldCheck=createLucideIcon("shield-check",__iconNode$e);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$d);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Sparkles=createLucideIcon("sparkles",__iconNode$c);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],SquarePen=createLucideIcon("square-pen",__iconNode$b);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],Swords=createLucideIcon("swords",__iconNode$a);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Trash2=createLucideIcon("trash-2",__iconNode$8);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Trophy=createLucideIcon("trophy",__iconNode$7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]],Tv=createLucideIcon("tv",__iconNode$6);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Upload=createLucideIcon("upload",__iconNode$5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],UserCheck=createLucideIcon("user-check",__iconNode$4);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],UserX=createLucideIcon("user-x",__iconNode$3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode$1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode);function setRef(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function composeRefs(...t){return e=>{let n=!1;const s=t.map(o=>{const u=setRef(o,e);return!n&&typeof u=="function"&&(n=!0),u});if(n)return()=>{for(let o=0;o<s.length;o++){const u=s[o];typeof u=="function"?u():setRef(t[o],null)}}}}function useComposedRefs(...t){return reactExports.useCallback(composeRefs(...t),t)}function createSlot(t){const e=createSlotClone(t),n=reactExports.forwardRef((s,o)=>{const{children:u,...d}=s,g=reactExports.Children.toArray(u),y=g.find(isSlottable);if(y){const v=y.props.children,w=g.map(T=>T===y?reactExports.Children.count(v)>1?reactExports.Children.only(null):reactExports.isValidElement(v)?v.props.children:null:T);return jsxRuntimeExports.jsx(e,{...d,ref:o,children:reactExports.isValidElement(v)?reactExports.cloneElement(v,void 0,w):null})}return jsxRuntimeExports.jsx(e,{...d,ref:o,children:u})});return n.displayName=`${t}.Slot`,n}var Slot$1=createSlot("Slot");function createSlotClone(t){const e=reactExports.forwardRef((n,s)=>{const{children:o,...u}=n,d=reactExports.isValidElement(o)?getElementRef$1(o):void 0,g=useComposedRefs(d,s);if(reactExports.isValidElement(o)){const y=mergeProps(u,o.props);return o.type!==reactExports.Fragment&&(y.ref=g),reactExports.cloneElement(o,y)}return reactExports.Children.count(o)>1?reactExports.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function isSlottable(t){return reactExports.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(t,e){const n={...e};for(const s in e){const o=t[s],u=e[s];/^on[A-Z]/.test(s)?o&&u?n[s]=(...g)=>{const y=u(...g);return o(...g),y}:o&&(n[s]=o):s==="style"?n[s]={...o,...u}:s==="className"&&(n[s]=[o,u].filter(Boolean).join(" "))}return{...t,...n}}function getElementRef$1(t){var s,o;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function r(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=r(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function clsx(){for(var t,e,n=0,s="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=r(t))&&(s&&(s+=" "),s+=e);return s}const falsyToString=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,cx=clsx,cva=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return cx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:u}=e,d=Object.keys(o).map(v=>{const w=n==null?void 0:n[v],T=u==null?void 0:u[v];if(w===null)return null;const A=falsyToString(w)||falsyToString(T);return o[v][A]}),g=n&&Object.entries(n).reduce((v,w)=>{let[T,A]=w;return A===void 0||(v[T]=A),v},{}),y=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((v,w)=>{let{class:T,className:A,...C}=w;return Object.entries(C).every(j=>{let[D,H]=j;return Array.isArray(H)?H.includes({...u,...g}[D]):{...u,...g}[D]===H})?[...v,T,A]:v},[]);return cx(t,d,y,n==null?void 0:n.class,n==null?void 0:n.className)},CLASS_PART_SEPARATOR="-",createClassGroupUtils=t=>{const e=createClassMap(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:d=>{const g=d.split(CLASS_PART_SEPARATOR);return g[0]===""&&g.length!==1&&g.shift(),getGroupRecursive(g,e)||getGroupIdForArbitraryProperty(d)},getConflictingClassGroupIds:(d,g)=>{const y=n[d]||[];return g&&s[d]?[...y,...s[d]]:y}}},getGroupRecursive=(t,e)=>{var d;if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),o=s?getGroupRecursive(t.slice(1),s):void 0;if(o)return o;if(e.validators.length===0)return;const u=t.join(CLASS_PART_SEPARATOR);return(d=e.validators.find(({validator:g})=>g(u)))==null?void 0:d.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=t=>{if(arbitraryPropertyRegex.test(t)){const e=arbitraryPropertyRegex.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},createClassMap=t=>{const{theme:e,classGroups:n}=t,s={nextPart:new Map,validators:[]};for(const o in n)processClassesRecursively(n[o],s,o,e);return s},processClassesRecursively=(t,e,n,s)=>{t.forEach(o=>{if(typeof o=="string"){const u=o===""?e:getPart(e,o);u.classGroupId=n;return}if(typeof o=="function"){if(isThemeGetter(o)){processClassesRecursively(o(s),e,n,s);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([u,d])=>{processClassesRecursively(d,getPart(e,u),n,s)})})},getPart=(t,e)=>{let n=t;return e.split(CLASS_PART_SEPARATOR).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},isThemeGetter=t=>t.isThemeGetter,createLruCache=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const o=(u,d)=>{n.set(u,d),e++,e>t&&(e=0,s=n,n=new Map)};return{get(u){let d=n.get(u);if(d!==void 0)return d;if((d=s.get(u))!==void 0)return o(u,d),d},set(u,d){n.has(u)?n.set(u,d):o(u,d)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",MODIFIER_SEPARATOR_LENGTH=MODIFIER_SEPARATOR.length,createParseClassName=t=>{const{prefix:e,experimentalParseClassName:n}=t;let s=o=>{const u=[];let d=0,g=0,y=0,v;for(let j=0;j<o.length;j++){let D=o[j];if(d===0&&g===0){if(D===MODIFIER_SEPARATOR){u.push(o.slice(y,j)),y=j+MODIFIER_SEPARATOR_LENGTH;continue}if(D==="/"){v=j;continue}}D==="["?d++:D==="]"?d--:D==="("?g++:D===")"&&g--}const w=u.length===0?o:o.substring(y),T=stripImportantModifier(w),A=T!==w,C=v&&v>y?v-y:void 0;return{modifiers:u,hasImportantModifier:A,baseClassName:T,maybePostfixModifierPosition:C}};if(e){const o=e+MODIFIER_SEPARATOR,u=s;s=d=>d.startsWith(o)?u(d.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(n){const o=s;s=u=>n({className:u,parseClassName:o})}return s},stripImportantModifier=t=>t.endsWith(IMPORTANT_MODIFIER)?t.substring(0,t.length-1):t.startsWith(IMPORTANT_MODIFIER)?t.substring(1):t,createSortModifiers=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const o=[];let u=[];return s.forEach(d=>{d[0]==="["||e[d]?(o.push(...u.sort(),d),u=[]):u.push(d)}),o.push(...u.sort()),o}},createConfigUtils=t=>({cache:createLruCache(t.cacheSize),parseClassName:createParseClassName(t),sortModifiers:createSortModifiers(t),...createClassGroupUtils(t)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:o,sortModifiers:u}=e,d=[],g=t.trim().split(SPLIT_CLASSES_REGEX);let y="";for(let v=g.length-1;v>=0;v-=1){const w=g[v],{isExternal:T,modifiers:A,hasImportantModifier:C,baseClassName:j,maybePostfixModifierPosition:D}=n(w);if(T){y=w+(y.length>0?" "+y:y);continue}let H=!!D,ne=s(H?j.substring(0,D):j);if(!ne){if(!H){y=w+(y.length>0?" "+y:y);continue}if(ne=s(j),!ne){y=w+(y.length>0?" "+y:y);continue}H=!1}const Y=u(A).join(":"),U=C?Y+IMPORTANT_MODIFIER:Y,ee=U+ne;if(d.includes(ee))continue;d.push(ee);const J=o(ne,H);for(let ie=0;ie<J.length;++ie){const se=J[ie];d.push(U+se)}y=w+(y.length>0?" "+y:y)}return y};function twJoin(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=toValue(e))&&(s&&(s+=" "),s+=n);return s}const toValue=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=toValue(t[s]))&&(n&&(n+=" "),n+=e);return n};function createTailwindMerge(t,...e){let n,s,o,u=d;function d(y){const v=e.reduce((w,T)=>T(w),t());return n=createConfigUtils(v),s=n.cache.get,o=n.cache.set,u=g,g(y)}function g(y){const v=s(y);if(v)return v;const w=mergeClassList(y,n);return o(y,w),w}return function(){return u(twJoin.apply(null,arguments))}}const fromTheme=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+\/\d+$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=t=>fractionRegex.test(t),isNumber$1=t=>!!t&&!Number.isNaN(Number(t)),isInteger=t=>!!t&&Number.isInteger(Number(t)),isPercent=t=>t.endsWith("%")&&isNumber$1(t.slice(0,-1)),isTshirtSize=t=>tshirtUnitRegex.test(t),isAny=()=>!0,isLengthOnly=t=>lengthUnitRegex.test(t)&&!colorFunctionRegex.test(t),isNever=()=>!1,isShadow=t=>shadowRegex.test(t),isImage=t=>imageRegex.test(t),isAnyNonArbitrary=t=>!isArbitraryValue(t)&&!isArbitraryVariable(t),isArbitrarySize=t=>getIsArbitraryValue(t,isLabelSize,isNever),isArbitraryValue=t=>arbitraryValueRegex.test(t),isArbitraryLength=t=>getIsArbitraryValue(t,isLabelLength,isLengthOnly),isArbitraryNumber=t=>getIsArbitraryValue(t,isLabelNumber,isNumber$1),isArbitraryPosition=t=>getIsArbitraryValue(t,isLabelPosition,isNever),isArbitraryImage=t=>getIsArbitraryValue(t,isLabelImage,isImage),isArbitraryShadow=t=>getIsArbitraryValue(t,isLabelShadow,isShadow),isArbitraryVariable=t=>arbitraryVariableRegex.test(t),isArbitraryVariableLength=t=>getIsArbitraryVariable(t,isLabelLength),isArbitraryVariableFamilyName=t=>getIsArbitraryVariable(t,isLabelFamilyName),isArbitraryVariablePosition=t=>getIsArbitraryVariable(t,isLabelPosition),isArbitraryVariableSize=t=>getIsArbitraryVariable(t,isLabelSize),isArbitraryVariableImage=t=>getIsArbitraryVariable(t,isLabelImage),isArbitraryVariableShadow=t=>getIsArbitraryVariable(t,isLabelShadow,!0),getIsArbitraryValue=(t,e,n)=>{const s=arbitraryValueRegex.exec(t);return s?s[1]?e(s[1]):n(s[2]):!1},getIsArbitraryVariable=(t,e,n=!1)=>{const s=arbitraryVariableRegex.exec(t);return s?s[1]?e(s[1]):n:!1},isLabelPosition=t=>t==="position"||t==="percentage",isLabelImage=t=>t==="image"||t==="url",isLabelSize=t=>t==="length"||t==="size"||t==="bg-size",isLabelLength=t=>t==="length",isLabelNumber=t=>t==="number",isLabelFamilyName=t=>t==="family-name",isLabelShadow=t=>t==="shadow",getDefaultConfig=()=>{const t=fromTheme("color"),e=fromTheme("font"),n=fromTheme("text"),s=fromTheme("font-weight"),o=fromTheme("tracking"),u=fromTheme("leading"),d=fromTheme("breakpoint"),g=fromTheme("container"),y=fromTheme("spacing"),v=fromTheme("radius"),w=fromTheme("shadow"),T=fromTheme("inset-shadow"),A=fromTheme("text-shadow"),C=fromTheme("drop-shadow"),j=fromTheme("blur"),D=fromTheme("perspective"),H=fromTheme("aspect"),ne=fromTheme("ease"),Y=fromTheme("animate"),U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...ee(),isArbitraryVariable,isArbitraryValue],ie=()=>["auto","hidden","clip","visible","scroll"],se=()=>["auto","contain","none"],K=()=>[isArbitraryVariable,isArbitraryValue,y],te=()=>[isFraction,"full","auto",...K()],re=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],ce=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],le=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],ue=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],_e=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ee=()=>["start","end","center","stretch","center-safe","end-safe"],we=()=>["auto",...K()],de=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...K()],me=()=>[t,isArbitraryVariable,isArbitraryValue],xe=()=>[...ee(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],pe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ve=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],Oe=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],Te=()=>["","none","full",v,isArbitraryVariable,isArbitraryValue],Le=()=>["",isNumber$1,isArbitraryVariableLength,isArbitraryLength],Me=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],be=()=>[isNumber$1,isPercent,isArbitraryVariablePosition,isArbitraryPosition],Ve=()=>["","none",j,isArbitraryVariable,isArbitraryValue],$e=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],Fe=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],je=()=>[isNumber$1,isArbitraryVariable,isArbitraryValue],De=()=>[isFraction,"full",...K()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber$1],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,H]}],container:["container"],columns:[{columns:[isNumber$1,isArbitraryValue,isArbitraryVariable,g]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:ie()}],"overflow-x":[{"overflow-x":ie()}],"overflow-y":[{"overflow-y":ie()}],overscroll:[{overscroll:se()}],"overscroll-x":[{"overscroll-x":se()}],"overscroll-y":[{"overscroll-y":se()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:te()}],"inset-x":[{"inset-x":te()}],"inset-y":[{"inset-y":te()}],start:[{start:te()}],end:[{end:te()}],top:[{top:te()}],right:[{right:te()}],bottom:[{bottom:te()}],left:[{left:te()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",g,...K()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber$1,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":re()}],"col-start-end":[{col:ce()}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":re()}],"row-start-end":[{row:ce()}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ue()}],"auto-rows":[{"auto-rows":ue()}],gap:[{gap:K()}],"gap-x":[{"gap-x":K()}],"gap-y":[{"gap-y":K()}],"justify-content":[{justify:[..._e(),"normal"]}],"justify-items":[{"justify-items":[...Ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ee()]}],"align-content":[{content:["normal",..._e()]}],"align-items":[{items:[...Ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":_e()}],"place-items":[{"place-items":[...Ee(),"baseline"]}],"place-self":[{"place-self":["auto",...Ee()]}],p:[{p:K()}],px:[{px:K()}],py:[{py:K()}],ps:[{ps:K()}],pe:[{pe:K()}],pt:[{pt:K()}],pr:[{pr:K()}],pb:[{pb:K()}],pl:[{pl:K()}],m:[{m:we()}],mx:[{mx:we()}],my:[{my:we()}],ms:[{ms:we()}],me:[{me:we()}],mt:[{mt:we()}],mr:[{mr:we()}],mb:[{mb:we()}],ml:[{ml:we()}],"space-x":[{"space-x":K()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":K()}],"space-y-reverse":["space-y-reverse"],size:[{size:de()}],w:[{w:[g,"screen",...de()]}],"min-w":[{"min-w":[g,"screen","none",...de()]}],"max-w":[{"max-w":[g,"screen","none","prose",{screen:[d]},...de()]}],h:[{h:["screen","lh",...de()]}],"min-h":[{"min-h":["screen","lh","none",...de()]}],"max-h":[{"max-h":["screen","lh",...de()]}],"font-size":[{text:["base",n,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber$1,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[u,...K()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:me()}],"text-color":[{text:me()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Me(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber$1,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:me()}],"underline-offset":[{"underline-offset":[isNumber$1,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:xe()}],"bg-repeat":[{bg:pe()}],"bg-size":[{bg:ve()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:me()}],"gradient-from-pos":[{from:Oe()}],"gradient-via-pos":[{via:Oe()}],"gradient-to-pos":[{to:Oe()}],"gradient-from":[{from:me()}],"gradient-via":[{via:me()}],"gradient-to":[{to:me()}],rounded:[{rounded:Te()}],"rounded-s":[{"rounded-s":Te()}],"rounded-e":[{"rounded-e":Te()}],"rounded-t":[{"rounded-t":Te()}],"rounded-r":[{"rounded-r":Te()}],"rounded-b":[{"rounded-b":Te()}],"rounded-l":[{"rounded-l":Te()}],"rounded-ss":[{"rounded-ss":Te()}],"rounded-se":[{"rounded-se":Te()}],"rounded-ee":[{"rounded-ee":Te()}],"rounded-es":[{"rounded-es":Te()}],"rounded-tl":[{"rounded-tl":Te()}],"rounded-tr":[{"rounded-tr":Te()}],"rounded-br":[{"rounded-br":Te()}],"rounded-bl":[{"rounded-bl":Te()}],"border-w":[{border:Le()}],"border-w-x":[{"border-x":Le()}],"border-w-y":[{"border-y":Le()}],"border-w-s":[{"border-s":Le()}],"border-w-e":[{"border-e":Le()}],"border-w-t":[{"border-t":Le()}],"border-w-r":[{"border-r":Le()}],"border-w-b":[{"border-b":Le()}],"border-w-l":[{"border-l":Le()}],"divide-x":[{"divide-x":Le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Me(),"hidden","none"]}],"divide-style":[{divide:[...Me(),"hidden","none"]}],"border-color":[{border:me()}],"border-color-x":[{"border-x":me()}],"border-color-y":[{"border-y":me()}],"border-color-s":[{"border-s":me()}],"border-color-e":[{"border-e":me()}],"border-color-t":[{"border-t":me()}],"border-color-r":[{"border-r":me()}],"border-color-b":[{"border-b":me()}],"border-color-l":[{"border-l":me()}],"divide-color":[{divide:me()}],"outline-style":[{outline:[...Me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:me()}],shadow:[{shadow:["","none",w,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:me()}],"inset-shadow":[{"inset-shadow":["none",T,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":me()}],"ring-w":[{ring:Le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:me()}],"ring-offset-w":[{"ring-offset":[isNumber$1,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":me()}],"inset-ring-w":[{"inset-ring":Le()}],"inset-ring-color":[{"inset-ring":me()}],"text-shadow":[{"text-shadow":["none",A,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":me()}],opacity:[{opacity:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber$1]}],"mask-image-linear-from-pos":[{"mask-linear-from":be()}],"mask-image-linear-to-pos":[{"mask-linear-to":be()}],"mask-image-linear-from-color":[{"mask-linear-from":me()}],"mask-image-linear-to-color":[{"mask-linear-to":me()}],"mask-image-t-from-pos":[{"mask-t-from":be()}],"mask-image-t-to-pos":[{"mask-t-to":be()}],"mask-image-t-from-color":[{"mask-t-from":me()}],"mask-image-t-to-color":[{"mask-t-to":me()}],"mask-image-r-from-pos":[{"mask-r-from":be()}],"mask-image-r-to-pos":[{"mask-r-to":be()}],"mask-image-r-from-color":[{"mask-r-from":me()}],"mask-image-r-to-color":[{"mask-r-to":me()}],"mask-image-b-from-pos":[{"mask-b-from":be()}],"mask-image-b-to-pos":[{"mask-b-to":be()}],"mask-image-b-from-color":[{"mask-b-from":me()}],"mask-image-b-to-color":[{"mask-b-to":me()}],"mask-image-l-from-pos":[{"mask-l-from":be()}],"mask-image-l-to-pos":[{"mask-l-to":be()}],"mask-image-l-from-color":[{"mask-l-from":me()}],"mask-image-l-to-color":[{"mask-l-to":me()}],"mask-image-x-from-pos":[{"mask-x-from":be()}],"mask-image-x-to-pos":[{"mask-x-to":be()}],"mask-image-x-from-color":[{"mask-x-from":me()}],"mask-image-x-to-color":[{"mask-x-to":me()}],"mask-image-y-from-pos":[{"mask-y-from":be()}],"mask-image-y-to-pos":[{"mask-y-to":be()}],"mask-image-y-from-color":[{"mask-y-from":me()}],"mask-image-y-to-color":[{"mask-y-to":me()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":be()}],"mask-image-radial-to-pos":[{"mask-radial-to":be()}],"mask-image-radial-from-color":[{"mask-radial-from":me()}],"mask-image-radial-to-color":[{"mask-radial-to":me()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ee()}],"mask-image-conic-pos":[{"mask-conic":[isNumber$1]}],"mask-image-conic-from-pos":[{"mask-conic-from":be()}],"mask-image-conic-to-pos":[{"mask-conic-to":be()}],"mask-image-conic-from-color":[{"mask-conic-from":me()}],"mask-image-conic-to-color":[{"mask-conic-to":me()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:xe()}],"mask-repeat":[{mask:pe()}],"mask-size":[{mask:ve()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:Ve()}],brightness:[{brightness:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",C,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":me()}],grayscale:[{grayscale:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":Ve()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":K()}],"border-spacing-x":[{"border-spacing-x":K()}],"border-spacing-y":[{"border-spacing-y":K()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber$1,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",ne,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",Y,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[D,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:$e()}],"rotate-x":[{"rotate-x":$e()}],"rotate-y":[{"rotate-y":$e()}],"rotate-z":[{"rotate-z":$e()}],scale:[{scale:Fe()}],"scale-x":[{"scale-x":Fe()}],"scale-y":[{"scale-y":Fe()}],"scale-z":[{"scale-z":Fe()}],"scale-3d":["scale-3d"],skew:[{skew:je()}],"skew-x":[{"skew-x":je()}],"skew-y":[{"skew-y":je()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:De()}],"translate-x":[{"translate-x":De()}],"translate-y":[{"translate-y":De()}],"translate-z":[{"translate-z":De()}],"translate-none":["translate-none"],accent:[{accent:me()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:me()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...me()]}],"stroke-w":[{stroke:[isNumber$1,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...me()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...t){return twMerge(clsx(t))}const buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Button({className:t,variant:e,size:n,asChild:s=!1,...o}){const u=s?Slot$1:"button";return jsxRuntimeExports.jsx(u,{"data-slot":"button",className:cn(buttonVariants({variant:e,size:n,className:t})),...o})}const caminhantesClock="/caminhantes-clock.png",LoginForm=()=>{const[t,e]=reactExports.useState(""),[n,s]=reactExports.useState(""),[o,u]=reactExports.useState(!1),[d,g]=reactExports.useState(!1),{login:y}=useAuth(),{showErrorAlert:v,showSuccessAlert:w}=useConfirmDialog(),T=async A=>{if(A.preventDefault(),!t||!n){await v("Campos obrigatórios","Por favor, preencha email e senha.");return}g(!0);try{await y(t,n),await w("Login realizado!","Bem-vindo ao Caminhantes Office!")}catch(C){let j="Erro ao fazer login. Tente novamente.";C.code==="auth/user-not-found"?j="Usuário não encontrado.":C.code==="auth/wrong-password"?j="Senha incorreta.":C.code==="auth/invalid-email"&&(j="Email inválido."),await v("Erro no login",j)}finally{g(!1)}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("img",{src:caminhantesClock,alt:"Caminhantes",className:"w-24 h-24 mx-auto mb-4 drop-shadow-lg"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Caminhantes Office"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Faça login para acessar suas aplicações"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[jsxRuntimeExports.jsxs("form",{onSubmit:T,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{id:"email",type:"email",value:t,onChange:A=>e(A.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors",placeholder:"seu@email.com",disabled:d})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{id:"password",type:o?"text":"password",value:n,onChange:A=>s(A.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors",placeholder:"••••••••",disabled:d}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:d,children:o?jsxRuntimeExports.jsx(EyeOff,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Eye,{className:"w-5 h-5"})})]})]}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:d,className:"w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:d?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Entrando..."]}):"Entrar"})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Não tem uma conta?"," ",jsxRuntimeExports.jsx("span",{className:"text-red-600 font-medium cursor-help",title:"Entre em contato com o administrador do sistema",children:"Entre em contato com o administrador"})]})})]}),jsxRuntimeExports.jsx("div",{className:"text-center mt-8",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["© ",new Date().getFullYear()," Caminhantes Office. Todos os direitos reservados."]})})]})})},LayoutGroupContext=reactExports.createContext({});function useConstant(t){const e=reactExports.useRef(null);return e.current===null&&(e.current=t()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect$2=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(t,e){t.indexOf(e)===-1&&t.push(e)}function removeItem(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const clamp$1=(t,e,n)=>n>e?e:n<t?t:n;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function isObject$1(t){return typeof t=="object"&&t!==null}const isZeroValueString=t=>/^0[^.\s]+$/u.test(t);function memo(t){let e;return()=>(e===void 0&&(e=t()),e)}const noop$2=t=>t,combineFunctions=(t,e)=>n=>e(t(n)),pipe=(...t)=>t.reduce(combineFunctions),progress=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,n,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,s);else for(let u=0;u<o;u++){const d=this.subscriptions[u];d&&d(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=t=>t*1e3,millisecondsToSeconds=t=>t/1e3;function velocityPerSecond(t,e){return e?t*(1e3/e):0}const calcBezier=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(t,e,n,s,o){let u,d,g=0;do d=e+(n-e)/2,u=calcBezier(d,s,o)-t,u>0?n=d:e=d;while(Math.abs(u)>subdivisionPrecision&&++g<subdivisionMaxIterations);return d}function cubicBezier(t,e,n,s){if(t===e&&n===s)return noop$2;const o=u=>binarySubdivide(u,0,1,t,n);return u=>u===0||u===1?u:calcBezier(o(u),e,s)}const mirrorEasing=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,reverseEasing=t=>e=>1-t(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=t=>(t*=2)<1?.5*backIn(t):.5*(2-Math.pow(2,-10*(t-1))),circIn=t=>1-Math.sin(Math.acos(t)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=t=>Array.isArray(t)&&typeof t[0]!="number",isBezierDefinition=t=>Array.isArray(t)&&typeof t[0]=="number",easingLookup={linear:noop$2,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=t=>typeof t=="string",easingDefinitionToFunction=t=>{if(isBezierDefinition(t)){invariant(t.length===4);const[e,n,s,o]=t;return cubicBezier(e,n,s,o)}else if(isValidEasing(t))return easingLookup[t];return t},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],statsBuffer={value:null};function createRenderStep(t,e){let n=new Set,s=new Set,o=!1,u=!1;const d=new WeakSet;let g={delta:0,timestamp:0,isProcessing:!1},y=0;function v(T){d.has(T)&&(w.schedule(T),t()),y++,T(g)}const w={schedule:(T,A=!1,C=!1)=>{const D=C&&o?n:s;return A&&d.add(T),D.has(T)||D.add(T),T},cancel:T=>{s.delete(T),d.delete(T)},process:T=>{if(g=T,o){u=!0;return}o=!0,[n,s]=[s,n],n.forEach(v),e&&statsBuffer.value&&statsBuffer.value.frameloop[e].push(y),y=0,n.clear(),o=!1,u&&(u=!1,w.process(T))}};return w}const maxElapsed=40;function createRenderBatcher(t,e){let n=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},u=()=>n=!0,d=stepsOrder.reduce((U,ee)=>(U[ee]=createRenderStep(u,e?ee:void 0),U),{}),{setup:g,read:y,resolveKeyframes:v,preUpdate:w,update:T,preRender:A,render:C,postRender:j}=d,D=()=>{const U=MotionGlobalConfig.useManualTiming?o.timestamp:performance.now();n=!1,MotionGlobalConfig.useManualTiming||(o.delta=s?1e3/60:Math.max(Math.min(U-o.timestamp,maxElapsed),1)),o.timestamp=U,o.isProcessing=!0,g.process(o),y.process(o),v.process(o),w.process(o),T.process(o),A.process(o),C.process(o),j.process(o),o.isProcessing=!1,n&&e&&(s=!1,t(D))},H=()=>{n=!0,s=!0,o.isProcessing||t(D)};return{schedule:stepsOrder.reduce((U,ee)=>{const J=d[ee];return U[ee]=(ie,se=!1,K=!1)=>(n||H(),J.schedule(ie,se,K)),U},{}),cancel:U=>{for(let ee=0;ee<stepsOrder.length;ee++)d[stepsOrder[ee]].cancel(U)},state:o,steps:d}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$2,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:t=>{now=t,queueMicrotask(clearTime)}},checkStringStartsWith=t=>e=>typeof e=="string"&&e.startsWith(t),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=t=>startsAsVariableToken(t)?singleCssVariableRegex.test(t.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},alpha$1={...number,transform:t=>clamp$1(0,1,t)},scale={...number,default:1},sanitize=t=>Math.round(t*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(t){return t==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(t,e)=>n=>!!(typeof n=="string"&&singleColorRegex.test(n)&&n.startsWith(t)||e&&!isNullish(n)&&Object.prototype.hasOwnProperty.call(n,e)),splitColor=(t,e,n)=>s=>{if(typeof s!="string")return s;const[o,u,d,g]=s.match(floatRegex);return{[t]:parseFloat(o),[e]:parseFloat(u),[n]:parseFloat(d),alpha:g!==void 0?parseFloat(g):1}},clampRgbUnit=t=>clamp$1(0,255,t),rgbUnit={...number,transform:t=>Math.round(clampRgbUnit(t))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+rgbUnit.transform(t)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(n)+", "+sanitize(alpha$1.transform(s))+")"};function parseHex(t){let e="",n="",s="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,s+=s,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const hex$1={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:t=>percent.parse(t)/100,transform:t=>percent.transform(t*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(n))+", "+sanitize(alpha$1.transform(s))+")"},color$1={test:t=>rgba.test(t)||hex$1.test(t)||hsla.test(t),parse:t=>rgba.test(t)?rgba.parse(t):hsla.test(t)?hsla.parse(t):hex$1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rgba.transform(t):hsla.transform(t)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(floatRegex))==null?void 0:e.length)||0)+(((n=t.match(colorRegex))==null?void 0:n.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},o=[];let u=0;const g=e.replace(complexRegex,y=>(color$1.test(y)?(s.color.push(u),o.push(COLOR_TOKEN),n.push(color$1.parse(y))):y.startsWith(VAR_FUNCTION_TOKEN)?(s.var.push(u),o.push(VAR_TOKEN),n.push(y)):(s.number.push(u),o.push(NUMBER_TOKEN),n.push(parseFloat(y))),++u,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:n,split:g,indexes:s,types:o}}function parseComplexValue(t){return analyseComplexValue(t).values}function createTransformer(t){const{split:e,types:n}=analyseComplexValue(t),s=e.length;return o=>{let u="";for(let d=0;d<s;d++)if(u+=e[d],o[d]!==void 0){const g=n[d];g===NUMBER_TOKEN?u+=sanitize(o[d]):g===COLOR_TOKEN?u+=color$1.transform(o[d]):u+=o[d]}return u}}const convertNumbersToZero=t=>typeof t=="number"?0:t;function getAnimatableNone$1(t){const e=parseComplexValue(t);return createTransformer(t)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hslaToRgba({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let o=0,u=0,d=0;if(!e)o=u=d=n;else{const g=n<.5?n*(1+e):n+e-n*e,y=2*n-g;o=hueToRgb(y,g,t+1/3),u=hueToRgb(y,g,t),d=hueToRgb(y,g,t-1/3)}return{red:Math.round(o*255),green:Math.round(u*255),blue:Math.round(d*255),alpha:s}}function mixImmediate(t,e){return n=>n>0?e:t}const mixNumber$1=(t,e,n)=>t+(e-t)*n,mixLinearColor=(t,e,n)=>{const s=t*t,o=n*(e*e-s)+s;return o<0?0:Math.sqrt(o)},colorTypes=[hex$1,rgba,hsla],getColorType=t=>colorTypes.find(e=>e.test(t));function asRGBA(t){const e=getColorType(t);if(!e)return!1;let n=e.parse(t);return e===hsla&&(n=hslaToRgba(n)),n}const mixColor=(t,e)=>{const n=asRGBA(t),s=asRGBA(e);if(!n||!s)return mixImmediate(t,e);const o={...n};return u=>(o.red=mixLinearColor(n.red,s.red,u),o.green=mixLinearColor(n.green,s.green,u),o.blue=mixLinearColor(n.blue,s.blue,u),o.alpha=mixNumber$1(n.alpha,s.alpha,u),rgba.transform(o))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(t,e){return invisibleValues.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function mixNumber(t,e){return n=>mixNumber$1(t,e,n)}function getMixer(t){return typeof t=="number"?mixNumber:typeof t=="string"?isCSSVariableToken(t)?mixImmediate:color$1.test(t)?mixColor:mixComplex:Array.isArray(t)?mixArray:typeof t=="object"?color$1.test(t)?mixColor:mixObject:mixImmediate}function mixArray(t,e){const n=[...t],s=n.length,o=t.map((u,d)=>getMixer(u)(u,e[d]));return u=>{for(let d=0;d<s;d++)n[d]=o[d](u);return n}}function mixObject(t,e){const n={...t,...e},s={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(s[o]=getMixer(t[o])(t[o],e[o]));return o=>{for(const u in s)n[u]=s[u](o);return n}}function matchOrder(t,e){const n=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const u=e.types[o],d=t.indexes[u][s[u]],g=t.values[d]??0;n[o]=g,s[u]++}return n}const mixComplex=(t,e)=>{const n=complex.createTransformer(e),s=analyseComplexValue(t),o=analyseComplexValue(e);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?invisibleValues.has(t)&&!o.values.length||invisibleValues.has(e)&&!s.values.length?mixVisibility(t,e):pipe(mixArray(matchOrder(s,o),o.values),n):mixImmediate(t,e)};function mix(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?mixNumber$1(t,e,n):getMixer(t)(t,e)}const frameloopDriver=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>frame.update(e,n),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(t,e,n=10)=>{let s="";const o=Math.max(Math.round(e/n),2);for(let u=0;u<o;u++)s+=t(u/(o-1))+", ";return`linear(${s.substring(0,s.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<maxGeneratorDuration;)e+=n,s=t.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(t,e=100,n){const s=n({...t,keyframes:[0,e]}),o=Math.min(calcGeneratorDuration(s),maxGeneratorDuration);return{type:"keyframes",ease:u=>s.next(o*u).value/e,duration:millisecondsToSeconds(o)}}const velocitySampleDuration=5;function calcGeneratorVelocity(t,e,n){const s=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(n-t(s),e-s)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:t=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:n=springDefaults.velocity,mass:s=springDefaults.mass}){let o,u,d=1-e;d=clamp$1(springDefaults.minDamping,springDefaults.maxDamping,d),t=clamp$1(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(t)),d<1?(o=v=>{const w=v*d,T=w*t,A=w-n,C=calcAngularFreq(v,d),j=Math.exp(-T);return safeMin-A/C*j},u=v=>{const T=v*d*t,A=T*n+n,C=Math.pow(d,2)*Math.pow(v,2)*t,j=Math.exp(-T),D=calcAngularFreq(Math.pow(v,2),d);return(-o(v)+safeMin>0?-1:1)*((A-C)*j)/D}):(o=v=>{const w=Math.exp(-v*t),T=(v-n)*t+1;return-.001+w*T},u=v=>{const w=Math.exp(-v*t),T=(n-v)*(t*t);return w*T});const g=5/t,y=approximateRoot(o,u,g);if(t=secondsToMilliseconds(t),isNaN(y))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:t};{const v=Math.pow(y,2)*s;return{stiffness:v,damping:d*2*Math.sqrt(s*v),duration:t}}}const rootIterations=12;function approximateRoot(t,e,n){let s=n;for(let o=1;o<rootIterations;o++)s=s-t(s)/e(s);return s}function calcAngularFreq(t,e){return t*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(t,e){return e.some(n=>t[n]!==void 0)}function getSpringOptions(t){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...t};if(!isSpringType(t,physicsKeys)&&isSpringType(t,durationKeys))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),o=s*s,u=2*clamp$1(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:springDefaults.mass,stiffness:o,damping:u}}else{const n=findSpring(t);e={...e,...n,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(t=springDefaults.visualDuration,e=springDefaults.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:o}=n;const u=n.keyframes[0],d=n.keyframes[n.keyframes.length-1],g={done:!1,value:u},{stiffness:y,damping:v,mass:w,duration:T,velocity:A,isResolvedFromDuration:C}=getSpringOptions({...n,velocity:-millisecondsToSeconds(n.velocity||0)}),j=A||0,D=v/(2*Math.sqrt(y*w)),H=d-u,ne=millisecondsToSeconds(Math.sqrt(y/w)),Y=Math.abs(H)<5;s||(s=Y?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),o||(o=Y?springDefaults.restDelta.granular:springDefaults.restDelta.default);let U;if(D<1){const J=calcAngularFreq(ne,D);U=ie=>{const se=Math.exp(-D*ne*ie);return d-se*((j+D*ne*H)/J*Math.sin(J*ie)+H*Math.cos(J*ie))}}else if(D===1)U=J=>d-Math.exp(-ne*J)*(H+(j+ne*H)*J);else{const J=ne*Math.sqrt(D*D-1);U=ie=>{const se=Math.exp(-D*ne*ie),K=Math.min(J*ie,300);return d-se*((j+D*ne*H)*Math.sinh(K)+J*H*Math.cosh(K))/J}}const ee={calculatedDuration:C&&T||null,next:J=>{const ie=U(J);if(C)g.done=J>=T;else{let se=J===0?j:0;D<1&&(se=J===0?secondsToMilliseconds(j):calcGeneratorVelocity(U,J,ie));const K=Math.abs(se)<=s,te=Math.abs(d-ie)<=o;g.done=K&&te}return g.value=g.done?d:ie,g},toString:()=>{const J=Math.min(calcGeneratorDuration(ee),maxGeneratorDuration),ie=generateLinearEasing(se=>ee.next(J*se).value,J,30);return J+"ms "+ie},toTransition:()=>{}};return ee}spring.applyToOptions=t=>{const e=createGeneratorEasing(t,100,spring);return t.ease=e.ease,t.duration=secondsToMilliseconds(e.duration),t.type="keyframes",t};function inertia({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:u=500,modifyTarget:d,min:g,max:y,restDelta:v=.5,restSpeed:w}){const T=t[0],A={done:!1,value:T},C=K=>g!==void 0&&K<g||y!==void 0&&K>y,j=K=>g===void 0?y:y===void 0||Math.abs(g-K)<Math.abs(y-K)?g:y;let D=n*e;const H=T+D,ne=d===void 0?H:d(H);ne!==H&&(D=ne-T);const Y=K=>-D*Math.exp(-K/s),U=K=>ne+Y(K),ee=K=>{const te=Y(K),re=U(K);A.done=Math.abs(te)<=v,A.value=A.done?ne:re};let J,ie;const se=K=>{C(A.value)&&(J=K,ie=spring({keyframes:[A.value,j(A.value)],velocity:calcGeneratorVelocity(U,K,A.value),damping:o,stiffness:u,restDelta:v,restSpeed:w}))};return se(0),{calculatedDuration:null,next:K=>{let te=!1;return!ie&&J===void 0&&(te=!0,ee(K),se(K)),J!==void 0&&K>=J?ie.next(K-J):(!te&&ee(K),A)}}}function createMixers(t,e,n){const s=[],o=n||MotionGlobalConfig.mix||mix,u=t.length-1;for(let d=0;d<u;d++){let g=o(t[d],t[d+1]);if(e){const y=Array.isArray(e)?e[d]||noop$2:e;g=pipe(y,g)}s.push(g)}return s}function interpolate$2(t,e,{clamp:n=!0,ease:s,mixer:o}={}){const u=t.length;if(invariant(u===e.length),u===1)return()=>e[0];if(u===2&&e[0]===e[1])return()=>e[1];const d=t[0]===t[1];t[0]>t[u-1]&&(t=[...t].reverse(),e=[...e].reverse());const g=createMixers(e,s,o),y=g.length,v=w=>{if(d&&w<t[0])return e[0];let T=0;if(y>1)for(;T<t.length-2&&!(w<t[T+1]);T++);const A=progress(t[T],t[T+1],w);return g[T](A)};return n?w=>v(clamp$1(t[0],t[u-1],w)):v}function fillOffset(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const o=progress(0,e,s);t.push(mixNumber$1(n,1,o))}}function defaultOffset(t){const e=[0];return fillOffset(e,t.length-1),e}function convertOffsetToTimes(t,e){return t.map(n=>n*e)}function defaultEasing(t,e){return t.map(()=>e||easeInOut).splice(0,t.length-1)}function keyframes({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const o=isEasingArray(s)?s.map(easingDefinitionToFunction):easingDefinitionToFunction(s),u={done:!1,value:e[0]},d=convertOffsetToTimes(n&&n.length===e.length?n:defaultOffset(e),t),g=interpolate$2(d,e,{ease:Array.isArray(o)?o:defaultEasing(e,o)});return{calculatedDuration:t,next:y=>(u.value=g(y),u.done=y>=t,u)}}const isNotNull$2=t=>t!==null;function getFinalKeyframe$1(t,{repeat:e,repeatType:n="loop"},s,o=1){const u=t.filter(isNotNull$2),g=o<0||e&&n!=="loop"&&e%2===1?0:u.length-1;return!g||s===void 0?u[g]:s}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(t){typeof t.type=="string"&&(t.type=transitionTypeMap[t.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const percentToProgress=t=>t/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,o;const{motionValue:n}=this.options;n&&n.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(s=this.options).onStop)==null||o.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:n=keyframes,repeat:s=0,repeatDelay:o=0,repeatType:u,velocity:d=0}=e;let{keyframes:g}=e;const y=n||keyframes;y!==keyframes&&typeof g[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(g[0],g[1])),g=[0,100]);const v=y({...e,keyframes:g});u==="mirror"&&(this.mirroredGenerator=y({...e,keyframes:[...g].reverse(),velocity:-d})),v.calculatedDuration===null&&(v.calculatedDuration=calcGeneratorDuration(v));const{calculatedDuration:w}=v;this.calculatedDuration=w,this.resolvedDuration=w+o,this.totalDuration=this.resolvedDuration*(s+1)-o,this.generator=v}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:o,mixKeyframes:u,mirroredGenerator:d,resolvedDuration:g,calculatedDuration:y}=this;if(this.startTime===null)return s.next(0);const{delay:v=0,keyframes:w,repeat:T,repeatType:A,repeatDelay:C,type:j,onUpdate:D,finalKeyframe:H}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const ne=this.currentTime-v*(this.playbackSpeed>=0?1:-1),Y=this.playbackSpeed>=0?ne<0:ne>o;this.currentTime=Math.max(ne,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let U=this.currentTime,ee=s;if(T){const K=Math.min(this.currentTime,o)/g;let te=Math.floor(K),re=K%1;!re&&K>=1&&(re=1),re===1&&te--,te=Math.min(te,T+1),!!(te%2)&&(A==="reverse"?(re=1-re,C&&(re-=C/g)):A==="mirror"&&(ee=d)),U=clamp$1(0,1,re)*g}const J=Y?{done:!1,value:w[0]}:ee.next(U);u&&(J.value=u(J.value));let{done:ie}=J;!Y&&y!==null&&(ie=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const se=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ie);return se&&j!==inertia&&(J.value=getFinalKeyframe$1(w,this.options,H,this.speed)),D&&D(J.value),se&&this.finish(),J}then(e,n){return this.finished.then(e,n)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){var n;e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=millisecondsToSeconds(this.currentTime))}play(){var o,u;if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:n}=this.options;this.driver||(this.driver=e(d=>this.tick(d))),(u=(o=this.options).onPlay)==null||u.call(o);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function fillWildcards(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const radToDeg=t=>t*180/Math.PI,rotate$1=t=>{const e=radToDeg(Math.atan2(t[1],t[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:rotate$1,rotateZ:rotate$1,skewX:t=>radToDeg(Math.atan(t[1])),skewY:t=>radToDeg(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rebaseAngle=t=>(t=t%360,t<0&&(t+=360),t),rotateZ=rotate$1,scaleX=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),scaleY=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:t=>(scaleX(t)+scaleY(t))/2,rotateX:t=>rebaseAngle(radToDeg(Math.atan2(t[6],t[5]))),rotateY:t=>rebaseAngle(radToDeg(Math.atan2(-t[2],t[0]))),rotateZ,rotate:rotateZ,skewX:t=>radToDeg(Math.atan(t[4])),skewY:t=>radToDeg(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function defaultTransformValue(t){return t.includes("scale")?1:0}function parseValueFromTransform(t,e){if(!t||t==="none")return defaultTransformValue(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,o;if(n)s=matrix3dParsers,o=n;else{const g=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=matrix2dParsers,o=g}if(!o)return defaultTransformValue(e);const u=s[e],d=o[1].split(",").map(convertTransformToNumber);return typeof u=="function"?u(d):d[u]}const readTransformValue=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return parseValueFromTransform(n,e)};function convertTransformToNumber(t){return parseFloat(t.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=t=>t===number||t===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(t=>!transformKeys.has(t));function removeNonTranslationalTransform(t){const e=[];return nonTranslationalTransformKeys.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>parseValueFromTransform(e,"x"),y:(t,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const t=Array.from(toResolve).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const o=removeNonTranslationalTransform(s);o.length&&(n.set(s,o),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const o=n.get(s);o&&o.forEach(([u,d])=>{var g;(g=s.getValue(u))==null||g.set(d)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(t=>t.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,n,s,o,u,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=o,this.element=u,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:o}=this;if(e[0]===null){const u=o==null?void 0:o.get(),d=e[e.length-1];if(u!==void 0)e[0]=u;else if(s&&n){const g=s.readValue(n,d);g!=null&&(e[0]=g)}e[0]===void 0&&(e[0]=d),o&&u===void 0&&o.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=t=>t.startsWith("--");function setStyle$1(t,e,n){isCSSVar(e)?t.style.setProperty(e,n):t.style[e]=n}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(t,e){const n=memo(t);return()=>supportsFlags[e]??n()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(t,e){if(t)return typeof t=="function"?supportsLinearEasing()?generateLinearEasing(t,e):"ease-out":isBezierDefinition(t)?cubicBezierAsString(t):Array.isArray(t)?t.map(n=>mapEasingToNativeEasing(n,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[t]}function startWaapiAnimation(t,e,n,{delay:s=0,duration:o=300,repeat:u=0,repeatType:d="loop",ease:g="easeOut",times:y}={},v=void 0){const w={[e]:n};y&&(w.offset=y);const T=mapEasingToNativeEasing(g,o);Array.isArray(T)&&(w.easing=T);const A={delay:s,duration:o,easing:Array.isArray(T)?"linear":T,fill:"both",iterations:u+1,direction:d==="reverse"?"alternate":"normal"};return v&&(A.pseudoElement=v),t.animate(w,A)}function isGenerator(t){return typeof t=="function"&&"applyToOptions"in t}function applyGeneratorOptions({type:t,...e}){return isGenerator(t)&&supportsLinearEasing()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:o,pseudoElement:u,allowFlatten:d=!1,finalKeyframe:g,onComplete:y}=e;this.isPseudoElement=!!u,this.allowFlatten=d,this.options=e,invariant(typeof e.type!="string");const v=applyGeneratorOptions(e);this.animation=startWaapiAnimation(n,s,o,v,u),v.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const w=getFinalKeyframe$1(o,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(w):setStyle$1(n,s,w),this.animation.cancel()}y==null||y(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop$2):n(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(t){return t in unsupportedEasingFunctions}function replaceStringEasing(t){typeof t.ease=="string"&&isUnsupportedEase(t.ease)&&(t.ease=unsupportedEasingFunctions[t.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:o,element:u,...d}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const g=new JSAnimation({...d,autoplay:!1}),y=secondsToMilliseconds(this.finishedTime??this.time);n.setWithVelocity(g.sample(y-sampleDelta).value,g.sample(y).value,sampleDelta),g.stop()}}const isAnimatable=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(complex.test(t)||t==="0")&&!t.startsWith("url("));function hasKeyframesChanged(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function canAnimate(t,e,n,s){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const u=t[t.length-1],d=isAnimatable(o,e),g=isAnimatable(u,e);return!d||!g?!1:hasKeyframesChanged(t)||(n==="spring"||isGenerator(n))&&s}function isHTMLElement$2(t){return isObject$1(t)&&"offsetHeight"in t}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(t){var v;const{motionValue:e,name:n,repeatDelay:s,repeatType:o,damping:u,type:d}=t;if(!isHTMLElement$2((v=e==null?void 0:e.owner)==null?void 0:v.current))return!1;const{onUpdate:g,transformTemplate:y}=e.owner.getProps();return supportsWaapi()&&n&&acceleratedValues.has(n)&&(n!=="transform"||!y)&&!g&&!s&&o!=="mirror"&&u!==0&&d!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:d="loop",keyframes:g,name:y,motionValue:v,element:w,...T}){var j;super(),this.stop=()=>{var D,H;this._animation&&(this._animation.stop(),(D=this.stopTimeline)==null||D.call(this)),(H=this.keyframeResolver)==null||H.cancel()},this.createdAt=time.now();const A={autoplay:e,delay:n,type:s,repeat:o,repeatDelay:u,repeatType:d,name:y,motionValue:v,element:w,...T},C=(w==null?void 0:w.KeyframeResolver)||KeyframeResolver;this.keyframeResolver=new C(g,(D,H,ne)=>this.onKeyframesResolved(D,H,A,!ne),y,v,w),(j=this.keyframeResolver)==null||j.scheduleResolve()}onKeyframesResolved(e,n,s,o){this.keyframeResolver=void 0;const{name:u,type:d,velocity:g,delay:y,isHandoff:v,onUpdate:w}=s;this.resolvedAt=time.now(),canAnimate(e,u,d,g)||((MotionGlobalConfig.instantAnimations||!y)&&(w==null||w(getFinalKeyframe$1(e,s,n))),e[0]=e[e.length-1],s.duration=0,s.repeat=0);const A={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},C=!v&&supportsBrowserAnimation(A)?new NativeAnimationExtended({...A,element:A.motionValue.owner.current}):new JSAnimation(A);C.finished.then(()=>this.notifyFinished()).catch(noop$2),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(t){const e=splitCSSVariableRegex.exec(t);if(!e)return[,];const[,n,s,o]=e;return[`--${n??s}`,o]}function getVariableValue(t,e,n=1){const[s,o]=parseCSSVariable(t);if(!s)return;const u=window.getComputedStyle(e).getPropertyValue(s);if(u){const d=u.trim();return isNumericalString(d)?parseFloat(d):d}return isCSSVariableToken(o)?getVariableValue(o,e,n+1):o}function getValueTransition(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:t=>t==="auto",parse:t=>t},testValueType=t=>e=>e.test(t),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=t=>dimensionValueTypes.find(testValueType(t));function isNone(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||isZeroValueString(t):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(floatRegex)||[];if(!s)return t;const o=n.replace(s,"");let u=maxDefaults.has(e)?1:0;return s!==n&&(u*=100),e+"("+u+o+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:t=>{const e=t.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):t}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter,WebkitFilter:filter},getDefaultValueType=t=>defaultValueTypes[t];function getAnimatableNone(t,e){let n=getDefaultValueType(t);return n!==filter&&(n=complex),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(t,e,n){let s=0,o;for(;s<t.length&&!o;){const u=t[s];typeof u=="string"&&!invalidTemplates.has(u)&&analyseComplexValue(u).values.length&&(o=t[s]),s++}if(o&&n)for(const u of e)t[u]=getAnimatableNone(n,o)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,n,s,o,u){super(e,n,s,o,u,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let y=0;y<e.length;y++){let v=e[y];if(typeof v=="string"&&(v=v.trim(),isCSSVariableToken(v))){const w=getVariableValue(v,n.current);w!==void 0&&(e[y]=w),y===e.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(s)||e.length!==2)return;const[o,u]=e,d=findDimensionValueType(o),g=findDimensionValueType(u);if(d!==g)if(isNumOrPxType(d)&&isNumOrPxType(g))for(let y=0;y<e.length;y++){const v=e[y];typeof v=="string"&&(e[y]=parseFloat(v))}else positionalValues[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let o=0;o<e.length;o++)(e[o]===null||isNone(e[o]))&&s.push(o);s.length&&makeNoneKeyframesAnimatable(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(s,o).jump(o,!1)}measureEndState(){var g;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const u=s.length-1,d=s[u];s[u]=positionalValues[n](e.measureViewportBox(),window.getComputedStyle(e.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),(g=this.removedTransforms)!=null&&g.length&&this.removedTransforms.forEach(([y,v])=>{e.getValue(y).set(v)}),this.resolveNoneKeyframes()}}function resolveElements(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const o=(n==null?void 0:n[t])??s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const getValueAsType=(t,e)=>e&&typeof t=="number"?e.transform(t):t,MAX_VELOCITY_DELTA=30,isFloat=t=>!isNaN(parseFloat(t));class MotionValue{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,o=!0)=>{var d,g;const u=time.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((d=this.events.change)==null||d.notify(this.current),this.dependents))for(const y of this.dependents)y.dirty();o&&((g=this.events.renderRequest)==null||g.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new SubscriptionManager);const s=this.events[e].add(n);return e==="change"?()=>{s(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(t,e){return new MotionValue(t,e)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(t){return t==="x"||t==="y"?isDragging[t]?null:(isDragging[t]=!0,()=>{isDragging[t]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(t,e){const n=resolveElements(t),s=new AbortController,o={passive:!0,...e,signal:s.signal};return[n,o,()=>s.abort()]}function isValidHover(t){return!(t.pointerType==="touch"||isDragActive())}function hover(t,e,n={}){const[s,o,u]=setupGesture(t,n),d=g=>{if(!isValidHover(g))return;const{target:y}=g,v=e(y,g);if(typeof v!="function"||!y)return;const w=T=>{isValidHover(T)&&(v(T),y.removeEventListener("pointerleave",w))};y.addEventListener("pointerleave",w,o)};return s.forEach(g=>{g.addEventListener("pointerenter",d,o)}),u}const isNodeOrChild=(t,e)=>e?t===e?!0:isNodeOrChild(t,e.parentElement):!1,isPrimaryPointer=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(t){return focusableElements.has(t.tagName)||t.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(t){return e=>{e.key==="Enter"&&t(e)}}function firePointerEvent(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=filterEvents(()=>{if(isPressing.has(n))return;firePointerEvent(n,"down");const o=filterEvents(()=>{firePointerEvent(n,"up")}),u=()=>firePointerEvent(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",u,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function isValidPressEvent(t){return isPrimaryPointer(t)&&!isDragActive()}function press(t,e,n={}){const[s,o,u]=setupGesture(t,n),d=g=>{const y=g.currentTarget;if(!isValidPressEvent(g))return;isPressing.add(y);const v=e(y,g),w=(C,j)=>{window.removeEventListener("pointerup",T),window.removeEventListener("pointercancel",A),isPressing.has(y)&&isPressing.delete(y),isValidPressEvent(C)&&typeof v=="function"&&v(C,{success:j})},T=C=>{w(C,y===window||y===document||n.useGlobalTarget||isNodeOrChild(y,C.target))},A=C=>{w(C,!1)};window.addEventListener("pointerup",T,o),window.addEventListener("pointercancel",A,o)};return s.forEach(g=>{(n.useGlobalTarget?window:g).addEventListener("pointerdown",d,o),isHTMLElement$2(g)&&(g.addEventListener("focus",v=>enableKeyboardPress(v,o)),!isElementKeyboardAccessible(g)&&!g.hasAttribute("tabindex")&&(g.tabIndex=0))}),u}function isSVGElement$1(t){return isObject$1(t)&&"ownerSVGElement"in t}function isSVGSVGElement(t){return isSVGElement$1(t)&&t.tagName==="svg"}const isMotionValue=t=>!!(t&&t.getVelocity),valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=t=>valueTypes.find(testValueType(t)),MotionConfigContext=reactExports.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,o=isHTMLElement$2(s)&&s.offsetWidth||0,u=this.props.sizeRef.current;u.height=n.offsetHeight||0,u.width=n.offsetWidth||0,u.top=n.offsetTop,u.left=n.offsetLeft,u.right=o-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:t,isPresent:e,anchorX:n}){const s=reactExports.useId(),o=reactExports.useRef(null),u=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:g,height:y,top:v,left:w,right:T}=u.current;if(e||!o.current||!g||!y)return;const A=n==="left"?`left: ${w}`:`right: ${T}`;o.current.dataset.motionPopId=s;const C=document.createElement("style");return d&&(C.nonce=d),document.head.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${y}px !important;
            ${A}px !important;
            top: ${v}px !important;
          }
        `),()=>{document.head.contains(C)&&document.head.removeChild(C)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:o,sizeRef:u,children:reactExports.cloneElement(t,{ref:o})})}const PresenceChild=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:o,presenceAffectsLayout:u,mode:d,anchorX:g})=>{const y=useConstant(newChildrenMap),v=reactExports.useId();let w=!0,T=reactExports.useMemo(()=>(w=!1,{id:v,initial:e,isPresent:n,custom:o,onExitComplete:A=>{y.set(A,!0);for(const C of y.values())if(!C)return;s&&s()},register:A=>(y.set(A,!1),()=>y.delete(A))}),[n,y,s]);return u&&w&&(T={...T}),reactExports.useMemo(()=>{y.forEach((A,C)=>y.set(C,!1))},[n]),reactExports.useEffect(()=>{!n&&!y.size&&s&&s()},[n]),d==="popLayout"&&(t=jsxRuntimeExports.jsx(PopChild,{isPresent:n,anchorX:g,children:t})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:T,children:t})};function newChildrenMap(){return new Map}function usePresence$1(t=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=e,u=reactExports.useId();reactExports.useEffect(()=>{if(t)return o(u)},[t]);const d=reactExports.useCallback(()=>t&&s&&s(u),[u,s,t]);return!n&&s?[!1,d]:[!0]}const getChildKey=t=>t.key||"";function onlyElements(t){const e=[];return reactExports.Children.forEach(t,n=>{reactExports.isValidElement(n)&&e.push(n)}),e}const AnimatePresence=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:u="sync",propagate:d=!1,anchorX:g="left"})=>{const[y,v]=usePresence$1(d),w=reactExports.useMemo(()=>onlyElements(t),[t]),T=d&&!y?[]:w.map(getChildKey),A=reactExports.useRef(!0),C=reactExports.useRef(w),j=useConstant(()=>new Map),[D,H]=reactExports.useState(w),[ne,Y]=reactExports.useState(w);useIsomorphicLayoutEffect$2(()=>{A.current=!1,C.current=w;for(let J=0;J<ne.length;J++){const ie=getChildKey(ne[J]);T.includes(ie)?j.delete(ie):j.get(ie)!==!0&&j.set(ie,!1)}},[ne,T.length,T.join("-")]);const U=[];if(w!==D){let J=[...w];for(let ie=0;ie<ne.length;ie++){const se=ne[ie],K=getChildKey(se);T.includes(K)||(J.splice(ie,0,se),U.push(se))}return u==="wait"&&U.length&&(J=U),Y(onlyElements(J)),H(w),null}const{forceRender:ee}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ne.map(J=>{const ie=getChildKey(J),se=d&&!y?!1:w===ne||T.includes(ie),K=()=>{if(j.has(ie))j.set(ie,!0);else return;let te=!0;j.forEach(re=>{re||(te=!1)}),te&&(ee==null||ee(),Y(C.current),d&&(v==null||v()),s&&s())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:se,initial:!A.current||n?void 0:!1,custom:e,presenceAffectsLayout:o,mode:u,onExitComplete:se?void 0:K,anchorX:g,children:J},ie)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const t in featureProps)featureDefinitions[t]={isEnabled:e=>featureProps[t].some(n=>!!e[n])};function loadFeatures(t){for(const e in t)featureDefinitions[e]={...featureDefinitions[e],...t[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||validMotionProps.has(t)}let shouldForward=t=>!isValidMotionProp(t);function loadExternalIsValidProp(t){t&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):t(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(t,e,n){const s={};for(const o in t)o==="values"&&typeof t.values=="object"||(shouldForward(o)||n===!0&&isValidMotionProp(o)||!e&&!isValidMotionProp(o)||t.draggable&&o.startsWith("onDrag"))&&(s[o]=t[o]);return s}function createDOMMotionComponentProxy(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,o)=>o==="create"?t:(e.has(o)||e.set(o,t(o)),e.get(o))})}const MotionContext=reactExports.createContext({});function isAnimationControls(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function isVariantLabel(t){return typeof t=="string"||Array.isArray(t)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(t){return isAnimationControls(t.animate)||variantProps.some(e=>isVariantLabel(t[e]))}function isVariantNode(t){return!!(isControllingVariants(t)||t.variants)}function getCurrentTreeVariants(t,e){if(isControllingVariants(t)){const{initial:n,animate:s}=t;return{initial:n===!1||isVariantLabel(n)?n:void 0,animate:isVariantLabel(s)?s:void 0}}return t.inherit!==!1?e:{}}function useCreateMotionContext(t){const{initial:e,animate:n}=getCurrentTreeVariants(t,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:n}),[variantLabelsAsDependency(e),variantLabelsAsDependency(n)])}function variantLabelsAsDependency(t){return Array.isArray(t)?t.join(" "):t}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function useMotionRef(t,e,n){return reactExports.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):isRefObject(n)&&(n.current=s))},[e])}const camelToDash=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(t,e,n,s,o){var D,H;const{visualElement:u}=reactExports.useContext(MotionContext),d=reactExports.useContext(LazyContext),g=reactExports.useContext(PresenceContext),y=reactExports.useContext(MotionConfigContext).reducedMotion,v=reactExports.useRef(null);s=s||d.renderer,!v.current&&s&&(v.current=s(t,{visualState:e,parent:u,props:n,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:y}));const w=v.current,T=reactExports.useContext(SwitchLayoutGroupContext);w&&!w.projection&&o&&(w.type==="html"||w.type==="svg")&&createProjectionNode$1(v.current,n,o,T);const A=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{w&&A.current&&w.update(n,g)});const C=n[optimizedAppearDataAttribute],j=reactExports.useRef(!!C&&!((D=window.MotionHandoffIsComplete)!=null&&D.call(window,C))&&((H=window.MotionHasOptimisedAnimation)==null?void 0:H.call(window,C)));return useIsomorphicLayoutEffect$2(()=>{w&&(A.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),microtask.render(w.render),j.current&&w.animationState&&w.animationState.animateChanges())}),reactExports.useEffect(()=>{w&&(!j.current&&w.animationState&&w.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{var ne;(ne=window.MotionHandoffMarkAsComplete)==null||ne.call(window,C)}),j.current=!1))}),w}function createProjectionNode$1(t,e,n,s){const{layoutId:o,layout:u,drag:d,dragConstraints:g,layoutScroll:y,layoutRoot:v,layoutCrossfade:w}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(t.parent)),t.projection.setOptions({layoutId:o,layout:u,alwaysMeasureLayout:!!d||g&&isRefObject(g),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,crossfade:w,layoutScroll:y,layoutRoot:v})}function getClosestProjectingNode(t){if(t)return t.options.allowProjection!==!1?t.projection:getClosestProjectingNode(t.parent)}function createRendererMotionComponent({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:o}){t&&loadFeatures(t);function u(g,y){let v;const w={...reactExports.useContext(MotionConfigContext),...g,layoutId:useLayoutId(g)},{isStatic:T}=w,A=useCreateMotionContext(g),C=s(g,T);if(!T&&isBrowser){useStrictMode();const j=getProjectionFunctionality(w);v=j.MeasureLayout,A.visualElement=useVisualElement(o,C,w,e,j.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:A,children:[v&&A.visualElement?jsxRuntimeExports.jsx(v,{visualElement:A.visualElement,...w}):null,n(o,g,useMotionRef(C,A.visualElement,y),C,T,A.visualElement)]})}u.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const d=reactExports.forwardRef(u);return d[motionComponentSymbol]=o,d}function useLayoutId({layoutId:t}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&t!==void 0?e+"-"+t:t}function useStrictMode(t,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(t){const{drag:e,layout:n}=featureDefinitions;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const scaleCorrectors={};function addScaleCorrector(t){for(const e in t)scaleCorrectors[e]=t[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(t,{layout:e,layoutId:n}){return transformProps.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!scaleCorrectors[t]||t==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(t,e,n){let s="",o=!0;for(let u=0;u<numTransforms;u++){const d=transformPropOrder[u],g=t[d];if(g===void 0)continue;let y=!0;if(typeof g=="number"?y=g===(d.startsWith("scale")?1:0):y=parseFloat(g)===0,!y||n){const v=getValueAsType(g,numberValueTypes[d]);if(!y){o=!1;const w=translateAlias[d]||d;s+=`${w}(${v}) `}n&&(e[d]=v)}}return s=s.trim(),n?s=n(e,o?"":s):o&&(s="none"),s}function buildHTMLStyles(t,e,n){const{style:s,vars:o,transformOrigin:u}=t;let d=!1,g=!1;for(const y in e){const v=e[y];if(transformProps.has(y)){d=!0;continue}else if(isCSSVariableName(y)){o[y]=v;continue}else{const w=getValueAsType(v,numberValueTypes[y]);y.startsWith("origin")?(g=!0,u[y]=w):s[y]=w}}if(e.transform||(d||n?s.transform=buildTransform(e,t.transform,n):s.transform&&(s.transform="none")),g){const{originX:y="50%",originY:v="50%",originZ:w=0}=u;s.transformOrigin=`${y} ${v} ${w}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(t,e,n){for(const s in e)!isMotionValue(e[s])&&!isForcedMotionValue(s,n)&&(t[s]=e[s])}function useInitialMotionValues({transformTemplate:t},e){return reactExports.useMemo(()=>{const n=createHtmlRenderState();return buildHTMLStyles(n,e,t),Object.assign({},n.vars,n.style)},[e])}function useStyle(t,e){const n=t.style||{},s={};return copyRawValuesOnly(s,n,t),Object.assign(s,useInitialMotionValues(t,e)),s}function useHTMLProps(t,e){const n={},s=useStyle(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(t,e,n=1,s=0,o=!0){t.pathLength=1;const u=o?dashKeys:camelKeys;t[u.offset]=px.transform(-s);const d=px.transform(e),g=px.transform(n);t[u.array]=`${d} ${g}`}function buildSVGAttrs(t,{attrX:e,attrY:n,attrScale:s,pathLength:o,pathSpacing:u=1,pathOffset:d=0,...g},y,v,w){if(buildHTMLStyles(t,g,v),y){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:A}=t;T.transform&&(A.transform=T.transform,delete T.transform),(A.transform||T.transformOrigin)&&(A.transformOrigin=T.transformOrigin??"50% 50%",delete T.transformOrigin),A.transform&&(A.transformBox=(w==null?void 0:w.transformBox)??"fill-box",delete T.transformBox),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),s!==void 0&&(T.scale=s),o!==void 0&&buildSVGPath(T,o,u,d,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=t=>typeof t=="string"&&t.toLowerCase()==="svg";function useSVGProps(t,e,n,s){const o=reactExports.useMemo(()=>{const u=createSvgRenderState();return buildSVGAttrs(u,e,isSVGTag(s),t.transformTemplate,t.style),{...u.attrs,style:{...u.style}}},[e]);if(t.style){const u={};copyRawValuesOnly(u,t.style,t),o.style={...u,...o.style}}return o}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(t){return typeof t!="string"||t.includes("-")?!1:!!(lowercaseSVGElements.indexOf(t)>-1||/[A-Z]/u.test(t))}function createUseRender(t=!1){return(n,s,o,{latestValues:u},d)=>{const y=(isSVGComponent(n)?useSVGProps:useHTMLProps)(s,u,d,n),v=filterProps(s,typeof n=="string",t),w=n!==reactExports.Fragment?{...v,...y,ref:o}:{},{children:T}=s,A=reactExports.useMemo(()=>isMotionValue(T)?T.get():T,[T]);return reactExports.createElement(n,{...w,children:A})}}function getValueState(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function resolveVariantFromProps(t,e,n,s){if(typeof e=="function"){const[o,u]=getValueState(s);e=e(n!==void 0?n:t.custom,o,u)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,u]=getValueState(s);e=e(n!==void 0?n:t.custom,o,u)}return e}function resolveMotionValue(t){return isMotionValue(t)?t.get():t}function makeState({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,o){return{latestValues:makeLatestValues(n,s,o,t),renderState:e()}}const makeUseVisualState=t=>(e,n)=>{const s=reactExports.useContext(MotionContext),o=reactExports.useContext(PresenceContext),u=()=>makeState(t,e,s,o);return n?u():useConstant(u)};function makeLatestValues(t,e,n,s){const o={},u=s(t,{});for(const A in u)o[A]=resolveMotionValue(u[A]);let{initial:d,animate:g}=t;const y=isControllingVariants(t),v=isVariantNode(t);e&&v&&!y&&t.inherit!==!1&&(d===void 0&&(d=e.initial),g===void 0&&(g=e.animate));let w=n?n.initial===!1:!1;w=w||d===!1;const T=w?g:d;if(T&&typeof T!="boolean"&&!isAnimationControls(T)){const A=Array.isArray(T)?T:[T];for(let C=0;C<A.length;C++){const j=resolveVariantFromProps(t,A[C]);if(j){const{transitionEnd:D,transition:H,...ne}=j;for(const Y in ne){let U=ne[Y];if(Array.isArray(U)){const ee=w?U.length-1:0;U=U[ee]}U!==null&&(o[Y]=U)}for(const Y in D)o[Y]=D[Y]}}}return o}function scrapeMotionValuesFromProps$1(t,e,n){var u;const{style:s}=t,o={};for(const d in s)(isMotionValue(s[d])||e.style&&isMotionValue(e.style[d])||isForcedMotionValue(d,t)||((u=n==null?void 0:n.getValue(d))==null?void 0:u.liveStyle)!==void 0)&&(o[d]=s[d]);return o}const htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function scrapeMotionValuesFromProps(t,e,n){const s=scrapeMotionValuesFromProps$1(t,e,n);for(const o in t)if(isMotionValue(t[o])||isMotionValue(e[o])){const u=transformPropOrder.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[u]=t[o]}return s}const svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState})};function createMotionComponentFactory(t,e){return function(s,{forwardMotionProps:o}={forwardMotionProps:!1}){const d={...isSVGComponent(s)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:t,useRender:createUseRender(o),createVisualElement:e,Component:s};return createRendererMotionComponent(d)}}function resolveVariant(t,e,n){const s=t.getProps();return resolveVariantFromProps(s,e,n!==void 0?n:s.custom,t)}const isKeyframesTarget=t=>Array.isArray(t);function setMotionValue(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,motionValue(n))}function resolveFinalValueInKeyframes(t){return isKeyframesTarget(t)?t[t.length-1]||0:t}function setTarget(t,e){const n=resolveVariant(t,e);let{transitionEnd:s={},transition:o={},...u}=n||{};u={...u,...s};for(const d in u){const g=resolveFinalValueInKeyframes(u[d]);setMotionValue(t,d,g)}}function isWillChangeMotionValue(t){return!!(isMotionValue(t)&&t.add)}function addValueToWillChange(t,e){const n=t.getValue("willChange");if(isWillChangeMotionValue(n))return n.add(e);if(!n&&MotionGlobalConfig.WillChange){const s=new MotionGlobalConfig.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function getOptimisedAppearId(t){return t.props[optimizedAppearDataAttribute]}const isNotNull$1=t=>t!==null;function getFinalKeyframe(t,{repeat:e,repeatType:n="loop"},s){const o=t.filter(isNotNull$1),u=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[u]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(t,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(t)?t.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:o,repeat:u,repeatType:d,repeatDelay:g,from:y,elapsed:v,...w}){return!!Object.keys(w).length}const animateMotionValue=(t,e,n,s={},o,u)=>d=>{const g=getValueTransition(s,t)||{},y=g.delay||s.delay||0;let{elapsed:v=0}=s;v=v-secondsToMilliseconds(y);const w={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...g,delay:-v,onUpdate:A=>{e.set(A),g.onUpdate&&g.onUpdate(A)},onComplete:()=>{d(),g.onComplete&&g.onComplete()},name:t,motionValue:e,element:u?void 0:o};isTransitionDefined(g)||Object.assign(w,getDefaultTransition(t,w)),w.duration&&(w.duration=secondsToMilliseconds(w.duration)),w.repeatDelay&&(w.repeatDelay=secondsToMilliseconds(w.repeatDelay)),w.from!==void 0&&(w.keyframes[0]=w.from);let T=!1;if((w.type===!1||w.duration===0&&!w.repeatDelay)&&(w.duration=0,w.delay===0&&(T=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(T=!0,w.duration=0,w.delay=0),w.allowFlatten=!g.type&&!g.ease,T&&!u&&e.get()!==void 0){const A=getFinalKeyframe(w.keyframes,g);if(A!==void 0){frame.update(()=>{w.onUpdate(A),w.onComplete()});return}}return g.isSync?new JSAnimation(w):new AsyncMotionValueAnimation(w)};function shouldBlockAnimation({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function animateTarget(t,e,{delay:n=0,transitionOverride:s,type:o}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:d,...g}=e;s&&(u=s);const y=[],v=o&&t.animationState&&t.animationState.getState()[o];for(const w in g){const T=t.getValue(w,t.latestValues[w]??null),A=g[w];if(A===void 0||v&&shouldBlockAnimation(v,w))continue;const C={delay:n,...getValueTransition(u||{},w)},j=T.get();if(j!==void 0&&!T.isAnimating&&!Array.isArray(A)&&A===j&&!C.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const ne=getOptimisedAppearId(t);if(ne){const Y=window.MotionHandoffAnimation(ne,w,frame);Y!==null&&(C.startTime=Y,D=!0)}}addValueToWillChange(t,w),T.start(animateMotionValue(w,T,A,t.shouldReduceMotion&&positionalKeys.has(w)?{type:!1}:C,t,D));const H=T.animation;H&&y.push(H)}return d&&Promise.all(y).then(()=>{frame.update(()=>{d&&setTarget(t,d)})}),y}function animateVariant(t,e,n={}){var y;const s=resolveVariant(t,e,n.type==="exit"?(y=t.presenceContext)==null?void 0:y.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const u=s?()=>Promise.all(animateTarget(t,s,n)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(v=0)=>{const{delayChildren:w=0,staggerChildren:T,staggerDirection:A}=o;return animateChildren(t,e,w+v,T,A,n)}:()=>Promise.resolve(),{when:g}=o;if(g){const[v,w]=g==="beforeChildren"?[u,d]:[d,u];return v().then(()=>w())}else return Promise.all([u(),d(n.delay)])}function animateChildren(t,e,n=0,s=0,o=1,u){const d=[],g=(t.variantChildren.size-1)*s,y=o===1?(v=0)=>v*s:(v=0)=>g-v*s;return Array.from(t.variantChildren).sort(sortByTreeOrder).forEach((v,w)=>{v.notify("AnimationStart",e),d.push(animateVariant(v,e,{...u,delay:n+y(w)}).then(()=>v.notify("AnimationComplete",e)))}),Promise.all(d)}function sortByTreeOrder(t,e){return t.sortNodePosition(e)}function animateVisualElement(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const o=e.map(u=>animateVariant(t,u,n));s=Promise.all(o)}else if(typeof e=="string")s=animateVariant(t,e,n);else{const o=typeof e=="function"?resolveVariant(t,e,n.custom):e;s=Promise.all(animateTarget(t,o,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function shallowCompare(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?getVariantContext(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<numVariantProps;n++){const s=variantProps[n],o=t.props[s];(isVariantLabel(o)||o===!1)&&(e[s]=o)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(t){return e=>Promise.all(e.map(({animation:n,options:s})=>animateVisualElement(t,n,s)))}function createAnimationState(t){let e=animateList(t),n=createState(),s=!0;const o=y=>(v,w)=>{var A;const T=resolveVariant(t,w,y==="exit"?(A=t.presenceContext)==null?void 0:A.custom:void 0);if(T){const{transition:C,transitionEnd:j,...D}=T;v={...v,...D,...j}}return v};function u(y){e=y(t)}function d(y){const{props:v}=t,w=getVariantContext(t.parent)||{},T=[],A=new Set;let C={},j=1/0;for(let H=0;H<numAnimationTypes;H++){const ne=reversePriorityOrder[H],Y=n[ne],U=v[ne]!==void 0?v[ne]:w[ne],ee=isVariantLabel(U),J=ne===y?Y.isActive:null;J===!1&&(j=H);let ie=U===w[ne]&&U!==v[ne]&&ee;if(ie&&s&&t.manuallyAnimateOnMount&&(ie=!1),Y.protectedKeys={...C},!Y.isActive&&J===null||!U&&!Y.prevProp||isAnimationControls(U)||typeof U=="boolean")continue;const se=checkVariantsDidChange(Y.prevProp,U);let K=se||ne===y&&Y.isActive&&!ie&&ee||H>j&&ee,te=!1;const re=Array.isArray(U)?U:[U];let ce=re.reduce(o(ne),{});J===!1&&(ce={});const{prevResolvedValues:le={}}=Y,ue={...le,...ce},_e=de=>{K=!0,A.has(de)&&(te=!0,A.delete(de)),Y.needsAnimating[de]=!0;const me=t.getValue(de);me&&(me.liveStyle=!1)};for(const de in ue){const me=ce[de],xe=le[de];if(C.hasOwnProperty(de))continue;let pe=!1;isKeyframesTarget(me)&&isKeyframesTarget(xe)?pe=!shallowCompare(me,xe):pe=me!==xe,pe?me!=null?_e(de):A.add(de):me!==void 0&&A.has(de)?_e(de):Y.protectedKeys[de]=!0}Y.prevProp=U,Y.prevResolvedValues=ce,Y.isActive&&(C={...C,...ce}),s&&t.blockInitialAnimation&&(K=!1),K&&(!(ie&&se)||te)&&T.push(...re.map(de=>({animation:de,options:{type:ne}})))}if(A.size){const H={};if(typeof v.initial!="boolean"){const ne=resolveVariant(t,Array.isArray(v.initial)?v.initial[0]:v.initial);ne&&ne.transition&&(H.transition=ne.transition)}A.forEach(ne=>{const Y=t.getBaseTarget(ne),U=t.getValue(ne);U&&(U.liveStyle=!0),H[ne]=Y??null}),T.push({animation:H})}let D=!!T.length;return s&&(v.initial===!1||v.initial===v.animate)&&!t.manuallyAnimateOnMount&&(D=!1),s=!1,D?e(T):Promise.resolve()}function g(y,v){var T;if(n[y].isActive===v)return Promise.resolve();(T=t.variantChildren)==null||T.forEach(A=>{var C;return(C=A.animationState)==null?void 0:C.setActive(y,v)}),n[y].isActive=v;const w=d(y);for(const A in n)n[A].protectedKeys={};return w}return{animateChanges:d,setActive:g,setAnimateFunction:u,getState:()=>n,reset:()=>{n=createState(),s=!0}}}function checkVariantsDidChange(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!shallowCompare(e,t):!1}function createTypeState(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function extractEventInfo(t){return{point:{x:t.pageX,y:t.pageY}}}const addPointerInfo=t=>e=>isPrimaryPointer(e)&&t(e,extractEventInfo(e));function addPointerEvent(t,e,n,s){return addDomEvent(t,e,addPointerInfo(n),s)}function convertBoundingBoxToBox({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function convertBoxToBoundingBox({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function transformBoxPoints(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(t){return t.max-t.min}function isNear(t,e,n){return Math.abs(t-e)<=n}function calcAxisDelta(t,e,n,s=.5){t.origin=s,t.originPoint=mixNumber$1(e.min,e.max,t.origin),t.scale=calcLength(n)/calcLength(e),t.translate=mixNumber$1(n.min,n.max,t.origin)-t.originPoint,(t.scale>=SCALE_MIN&&t.scale<=SCALE_MAX||isNaN(t.scale))&&(t.scale=1),(t.translate>=TRANSLATE_MIN&&t.translate<=TRANSLATE_MAX||isNaN(t.translate))&&(t.translate=0)}function calcBoxDelta(t,e,n,s){calcAxisDelta(t.x,e.x,n.x,s?s.originX:void 0),calcAxisDelta(t.y,e.y,n.y,s?s.originY:void 0)}function calcRelativeAxis(t,e,n){t.min=n.min+e.min,t.max=t.min+calcLength(e)}function calcRelativeBox(t,e,n){calcRelativeAxis(t.x,e.x,n.x),calcRelativeAxis(t.y,e.y,n.y)}function calcRelativeAxisPosition(t,e,n){t.min=e.min-n.min,t.max=t.min+calcLength(e)}function calcRelativePosition(t,e,n){calcRelativeAxisPosition(t.x,e.x,n.x),calcRelativeAxisPosition(t.y,e.y,n.y)}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(t){return[t("x"),t("y")]}function isIdentityScale(t){return t===void 0||t===1}function hasScale({scale:t,scaleX:e,scaleY:n}){return!isIdentityScale(t)||!isIdentityScale(e)||!isIdentityScale(n)}function hasTransform(t){return hasScale(t)||has2DTranslate(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function has2DTranslate(t){return is2DTranslate(t.x)||is2DTranslate(t.y)}function is2DTranslate(t){return t&&t!=="0%"}function scalePoint(t,e,n){const s=t-n,o=e*s;return n+o}function applyPointDelta(t,e,n,s,o){return o!==void 0&&(t=scalePoint(t,o,s)),scalePoint(t,n,s)+e}function applyAxisDelta(t,e=0,n=1,s,o){t.min=applyPointDelta(t.min,e,n,s,o),t.max=applyPointDelta(t.max,e,n,s,o)}function applyBoxDelta(t,{x:e,y:n}){applyAxisDelta(t.x,e.translate,e.scale,e.originPoint),applyAxisDelta(t.y,n.translate,n.scale,n.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(t,e,n,s=!1){const o=n.length;if(!o)return;e.x=e.y=1;let u,d;for(let g=0;g<o;g++){u=n[g],d=u.projectionDelta;const{visualElement:y}=u.options;y&&y.props.style&&y.props.style.display==="contents"||(s&&u.options.layoutScroll&&u.scroll&&u!==u.root&&transformBox(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),d&&(e.x*=d.x.scale,e.y*=d.y.scale,applyBoxDelta(t,d)),s&&hasTransform(u.latestValues)&&transformBox(t,u.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(t,e){t.min=t.min+e,t.max=t.max+e}function transformAxis(t,e,n,s,o=.5){const u=mixNumber$1(t.min,t.max,o);applyAxisDelta(t,e,n,u,s)}function transformBox(t,e){transformAxis(t.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(t.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(t,e){return convertBoundingBoxToBox(transformBoxPoints(t.getBoundingClientRect(),e))}function measurePageBox(t,e,n){const s=measureViewportBox(t,n),{scroll:o}=e;return o&&(translateAxis(s.x,o.offset.x),translateAxis(s.y,o.offset.y)),s}const getContextWindow=({current:t})=>t?t.ownerDocument.defaultView:null,distance=(t,e)=>Math.abs(t-e);function distance2D(t,e){const n=distance(t.x,e.x),s=distance(t.y,e.y);return Math.sqrt(n**2+s**2)}class PanSession{constructor(e,n,{transformPagePoint:s,contextWindow:o,dragSnapToOrigin:u=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=getPanInfo(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,C=distance2D(T.offset,{x:0,y:0})>=3;if(!A&&!C)return;const{point:j}=T,{timestamp:D}=frameData;this.history.push({...j,timestamp:D});const{onStart:H,onMove:ne}=this.handlers;A||(H&&H(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),ne&&ne(this.lastMoveEvent,T)},this.handlePointerMove=(T,A)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=transformPoint(A,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(T,A)=>{this.end();const{onEnd:C,onSessionEnd:j,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const H=getPanInfo(T.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(A,this.transformPagePoint),this.history);this.startEvent&&C&&C(T,H),j&&j(T,H)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=u,this.handlers=n,this.transformPagePoint=s,this.contextWindow=o||window;const d=extractEventInfo(e),g=transformPoint(d,this.transformPagePoint),{point:y}=g,{timestamp:v}=frameData;this.history=[{...y,timestamp:v}];const{onSessionStart:w}=n;w&&w(e,getPanInfo(g,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(t,e){return e?{point:e(t.point)}:t}function subtractPoint(t,e){return{x:t.x-e.x,y:t.y-e.y}}function getPanInfo({point:t},e){return{point:t,delta:subtractPoint(t,lastDevicePoint(e)),offset:subtractPoint(t,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(t){return t[0]}function lastDevicePoint(t){return t[t.length-1]}function getVelocity(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const o=lastDevicePoint(t);for(;n>=0&&(s=t[n],!(o.timestamp-s.timestamp>secondsToMilliseconds(e)));)n--;if(!s)return{x:0,y:0};const u=millisecondsToSeconds(o.timestamp-s.timestamp);if(u===0)return{x:0,y:0};const d={x:(o.x-s.x)/u,y:(o.y-s.y)/u};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function applyConstraints(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?mixNumber$1(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?mixNumber$1(n,t,s.max):Math.min(t,n)),t}function calcRelativeAxisConstraints(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function calcRelativeConstraints(t,{top:e,left:n,bottom:s,right:o}){return{x:calcRelativeAxisConstraints(t.x,n,o),y:calcRelativeAxisConstraints(t.y,e,s)}}function calcViewportAxisConstraints(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function calcViewportConstraints(t,e){return{x:calcViewportAxisConstraints(t.x,e.x),y:calcViewportAxisConstraints(t.y,e.y)}}function calcOrigin(t,e){let n=.5;const s=calcLength(t),o=calcLength(e);return o>s?n=progress(e.min,e.max-s,t.min):s>o&&(n=progress(t.min,t.max-o,e.min)),clamp$1(0,1,n)}function rebaseAxisConstraints(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const defaultElastic=.35;function resolveDragElastic(t=defaultElastic){return t===!1?t=0:t===!0&&(t=defaultElastic),{x:resolveAxisElastic(t,"left","right"),y:resolveAxisElastic(t,"top","bottom")}}function resolveAxisElastic(t,e,n){return{min:resolvePointElastic(t,e),max:resolvePointElastic(t,n)}}function resolvePointElastic(t,e){return typeof t=="number"?t:t[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=w=>{const{dragSnapToOrigin:T}=this.getProps();T?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(extractEventInfo(w).point)},u=(w,T)=>{const{drag:A,dragPropagation:C,onDragStart:j}=this.getProps();if(A&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(A),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(H=>{let ne=this.getAxisMotionValue(H).get()||0;if(percent.test(ne)){const{projection:Y}=this.visualElement;if(Y&&Y.layout){const U=Y.layout.layoutBox[H];U&&(ne=calcLength(U)*(parseFloat(ne)/100))}}this.originPoint[H]=ne}),j&&frame.postRender(()=>j(w,T)),addValueToWillChange(this.visualElement,"transform");const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},d=(w,T)=>{const{dragPropagation:A,dragDirectionLock:C,onDirectionLock:j,onDrag:D}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:H}=T;if(C&&this.currentDirection===null){this.currentDirection=getCurrentDirection(H),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",T.point,H),this.updateAxis("y",T.point,H),this.visualElement.render(),D&&D(w,T)},g=(w,T)=>this.stop(w,T),y=()=>eachAxis(w=>{var T;return this.getAnimationState(w)==="paused"&&((T=this.getAxisMotionValue(w).animation)==null?void 0:T.play())}),{dragSnapToOrigin:v}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:o,onStart:u,onMove:d,onSessionEnd:g,resumeAnimation:y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,contextWindow:getContextWindow(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:u}=this.getProps();u&&frame.postRender(()=>u(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:o}=this.getProps();if(!s||!shouldDrag(e,o,this.currentDirection))return;const u=this.getAxisMotionValue(e);let d=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(d=applyConstraints(d,this.constraints[e],this.elastic[e])),u.set(d)}resolveConstraints(){var u;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,o=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=calcRelativeConstraints(s.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(n),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=rebaseAxisConstraints(s.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!isRefObject(e))return!1;const s=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const u=measurePageBox(s,o.root,this.visualElement.getTransformPagePoint());let d=calcViewportConstraints(o.layout.layoutBox,u);if(n){const g=n(convertBoxToBoundingBox(d));this.hasMutatedConstraints=!!g,g&&(d=convertBoundingBoxToBox(g))}return d}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:o,dragTransition:u,dragSnapToOrigin:d,onDragTransitionEnd:g}=this.getProps(),y=this.constraints||{},v=eachAxis(w=>{if(!shouldDrag(w,n,this.currentDirection))return;let T=y&&y[w]||{};d&&(T={min:0,max:0});const A=o?200:1e6,C=o?40:1e7,j={type:"inertia",velocity:s?e[w]:0,bounceStiffness:A,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...u,...T};return this.startAxisValueAnimation(w,j)});return Promise.all(v).then(g)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),s.start(animateMotionValue(e,s,0,n,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),o=s[n];return o||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(n=>{const{drag:s}=this.getProps();if(!shouldDrag(n,s,this.currentDirection))return;const{projection:o}=this.visualElement,u=this.getAxisMotionValue(n);if(o&&o.layout){const{min:d,max:g}=o.layout.layoutBox[n];u.set(e[n]-mixNumber$1(d,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!isRefObject(n)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};eachAxis(d=>{const g=this.getAxisMotionValue(d);if(g&&this.constraints!==!1){const y=g.get();o[d]=calcOrigin({min:y,max:y},this.constraints[d])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),eachAxis(d=>{if(!shouldDrag(d,e,null))return;const g=this.getAxisMotionValue(d),{min:y,max:v}=this.constraints[d];g.set(mixNumber$1(y,v,o[d]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,n=addPointerEvent(e,"pointerdown",y=>{const{drag:v,dragListener:w=!0}=this.getProps();v&&w&&this.start(y)}),s=()=>{const{dragConstraints:y}=this.getProps();isRefObject(y)&&y.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,u=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),frame.read(s);const d=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),g=o.addEventListener("didUpdate",({delta:y,hasLayoutChanged:v})=>{this.isDragging&&v&&(eachAxis(w=>{const T=this.getAxisMotionValue(w);T&&(this.originPoint[w]+=y[w].translate,T.set(T.get()+y[w].translate))}),this.visualElement.render())});return()=>{d(),n(),u(),g&&g()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:u=!1,dragElastic:d=defaultElastic,dragMomentum:g=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:o,dragConstraints:u,dragElastic:d,dragMomentum:g}}}function shouldDrag(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function getCurrentDirection(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$2,this.removeListeners=noop$2,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$2}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=t=>(e,n)=>{t&&frame.postRender(()=>t(e,n))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$2}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(n),onMove:s,onEnd:(u,d)=>{delete this.session,o&&frame.postRender(()=>o(u,d))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const correctBorderRadius={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(px.test(t))t=parseFloat(t);else return t;const n=pixelsToPercent(t,e.target.x),s=pixelsToPercent(t,e.target.y);return`${n}% ${s}%`}},correctBoxShadow={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,o=complex.parse(t);if(o.length>5)return s;const u=complex.createTransformer(t),d=typeof o[0]!="number"?1:0,g=n.x.scale*e.x,y=n.y.scale*e.y;o[0+d]/=g,o[1+d]/=y;const v=mixNumber$1(g,y,.5);return typeof o[2+d]=="number"&&(o[2+d]/=v),typeof o[3+d]=="number"&&(o[3+d]/=v),u(o)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:o}=this.props,{projection:u}=e;addScaleCorrector(defaultScaleCorrectors),u&&(n.group&&n.group.add(u),s&&s.register&&o&&s.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:o,isPresent:u}=this.props,{projection:d}=s;return d&&(d.isPresent=u,o||e.layoutDependency!==n||n===void 0||e.isPresent!==u?d.willUpdate():this.safeToRemove(),e.isPresent!==u&&(u?d.promote():d.relegate()||frame.postRender(()=>{const g=d.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(t){const[e,n]=usePresence$1(),s=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...t,layoutGroup:s,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:n})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(t,e,n){const s=isMotionValue(t)?t:motionValue(t);return s.start(animateMotionValue("",s,e,n)),s.animation}const compareByDepth=(t,e)=>t.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(t,e){const n=time.now(),s=({timestamp:o})=>{const u=o-n;u>=e&&(cancelFrame(s),t(u-e))};return frame.setup(s,!0),()=>cancelFrame(s)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=t=>typeof t=="string"?parseFloat(t):t,isPx=t=>typeof t=="number"||px.test(t);function mixValues(t,e,n,s,o,u){o?(t.opacity=mixNumber$1(0,n.opacity??1,easeCrossfadeIn(s)),t.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(s))):u&&(t.opacity=mixNumber$1(e.opacity??1,n.opacity??1,s));for(let d=0;d<numBorders;d++){const g=`border${borders[d]}Radius`;let y=getRadius(e,g),v=getRadius(n,g);if(y===void 0&&v===void 0)continue;y||(y=0),v||(v=0),y===0||v===0||isPx(y)===isPx(v)?(t[g]=Math.max(mixNumber$1(asNumber(y),asNumber(v),s),0),(percent.test(v)||percent.test(y))&&(t[g]+="%")):t[g]=v}(e.rotate||n.rotate)&&(t.rotate=mixNumber$1(e.rotate||0,n.rotate||0,s))}function getRadius(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$2);function compress(t,e,n){return s=>s<t?0:s>e?1:n(progress(t,e,s))}function copyAxisInto(t,e){t.min=e.min,t.max=e.max}function copyBoxInto(t,e){copyAxisInto(t.x,e.x),copyAxisInto(t.y,e.y)}function copyAxisDeltaInto(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function removePointDelta(t,e,n,s,o){return t-=e,t=scalePoint(t,1/n,s),o!==void 0&&(t=scalePoint(t,1/o,s)),t}function removeAxisDelta(t,e=0,n=1,s=.5,o,u=t,d=t){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(d.min,d.max,e/100)-d.min),typeof e!="number")return;let g=mixNumber$1(u.min,u.max,s);t===u&&(g-=e),t.min=removePointDelta(t.min,e,n,g,o),t.max=removePointDelta(t.max,e,n,g,o)}function removeAxisTransforms(t,e,[n,s,o],u,d){removeAxisDelta(t,e[n],e[s],e[o],e.scale,u,d)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(t,e,n,s){removeAxisTransforms(t.x,e,xKeys,n?n.x:void 0,s?s.x:void 0),removeAxisTransforms(t.y,e,yKeys,n?n.y:void 0,s?s.y:void 0)}function isAxisDeltaZero(t){return t.translate===0&&t.scale===1}function isDeltaZero(t){return isAxisDeltaZero(t.x)&&isAxisDeltaZero(t.y)}function axisEquals(t,e){return t.min===e.min&&t.max===e.max}function boxEquals(t,e){return axisEquals(t.x,e.x)&&axisEquals(t.y,e.y)}function axisEqualsRounded(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function boxEqualsRounded(t,e){return axisEqualsRounded(t.x,e.x)&&axisEqualsRounded(t.y,e.y)}function aspectRatio(t){return calcLength(t.x)/calcLength(t.y)}function axisDeltaEquals(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let s;for(let o=n;o>=0;o--){const u=this.members[o];if(u.isPresent!==!1){s=u;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(t,e,n){let s="";const o=t.x.translate/e.x,u=t.y.translate/e.y,d=(n==null?void 0:n.z)||0;if((o||u||d)&&(s=`translate3d(${o}px, ${u}px, ${d}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:v,rotate:w,rotateX:T,rotateY:A,skewX:C,skewY:j}=n;v&&(s=`perspective(${v}px) ${s}`),w&&(s+=`rotate(${w}deg) `),T&&(s+=`rotateX(${T}deg) `),A&&(s+=`rotateY(${A}deg) `),C&&(s+=`skewX(${C}deg) `),j&&(s+=`skewY(${j}deg) `)}const g=t.x.scale*e.x,y=t.y.scale*e.y;return(g!==1||y!==1)&&(s+=`scale(${g}, ${y})`),s||"none"}const transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(t,e,n,s){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),s&&(s[t]=0))}function cancelTreeOptimisedTransformAnimations(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",frame,!(o||u))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(s)}function createProjectionNode({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:o}){return class{constructor(d={},g=e==null?void 0:e()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let y=0;y<this.path.length;y++)this.path[y].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(d,g){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new SubscriptionManager),this.eventHandlers.get(d).add(g)}notifyListeners(d,...g){const y=this.eventHandlers.get(d);y&&y.notify(...g)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=isSVGElement$1(d)&&!isSVGSVGElement(d),this.instance=d;const{layoutId:g,layout:y,visualElement:v}=this.options;if(v&&!v.current&&v.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(y||g)&&(this.isLayoutDirty=!0),t){let w;const T=()=>this.root.updateBlockedByResize=!1;t(d,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=delay(T,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&v&&(g||y)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:T,hasRelativeLayoutChanged:A,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||v.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:D,onLayoutAnimationComplete:H}=v.getProps(),ne=!this.targetLayout||!boxEqualsRounded(this.targetLayout,C),Y=!T&&A;if(this.options.layoutRoot||this.resumeFrom||Y||T&&(ne||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const U={...getValueTransition(j,"layout"),onPlay:D,onComplete:H};(v.shouldReduceMotion||this.options.layoutRoot)&&(U.delay=0,U.type=!1),this.startAnimation(U),this.setAnimationOrigin(w,Y)}else T||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const T=this.path[w];T.shouldResetTransform=!0,T.updateScroll("snapshot"),T.options.layoutRoot&&T.willUpdate(!1)}const{layoutId:g,layout:y}=this.options;if(g===void 0&&!y)return;const v=this.getTransformTemplate();this.prevTransformTemplateValue=v?v(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const g=time.now();frameData.delta=clamp$1(0,1e3/60,g-frameData.timestamp),frameData.timestamp=g,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let y=0;y<this.path.length;y++)this.path[y].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(g=!1),g&&this.instance){const y=s(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:y,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:y}}}resetTransform(){if(!o)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!isDeltaZero(this.projectionDelta),y=this.getTransformTemplate(),v=y?y(this.latestValues,""):void 0,w=v!==this.prevTransformTemplateValue;d&&this.instance&&(g||hasTransform(this.latestValues)||w)&&(o(this.instance,v),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const g=this.measurePageBox();let y=this.removeElementScroll(g);return d&&(y=this.removeTransform(y)),roundBox(y),{animationId:this.root.animationId,measuredBox:g,layoutBox:y,latestValues:{},source:this.id}}measurePageBox(){var v;const{visualElement:d}=this.options;if(!d)return createBox();const g=d.measureViewportBox();if(!(((v=this.scroll)==null?void 0:v.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:w}=this.root;w&&(translateAxis(g.x,w.offset.x),translateAxis(g.y,w.offset.y))}return g}removeElementScroll(d){var y;const g=createBox();if(copyBoxInto(g,d),(y=this.scroll)!=null&&y.wasRoot)return g;for(let v=0;v<this.path.length;v++){const w=this.path[v],{scroll:T,options:A}=w;w!==this.root&&T&&A.layoutScroll&&(T.wasRoot&&copyBoxInto(g,d),translateAxis(g.x,T.offset.x),translateAxis(g.y,T.offset.y))}return g}applyTransform(d,g=!1){const y=createBox();copyBoxInto(y,d);for(let v=0;v<this.path.length;v++){const w=this.path[v];!g&&w.options.layoutScroll&&w.scroll&&w!==w.root&&transformBox(y,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),hasTransform(w.latestValues)&&transformBox(y,w.latestValues)}return hasTransform(this.latestValues)&&transformBox(y,this.latestValues),y}removeTransform(d){const g=createBox();copyBoxInto(g,d);for(let y=0;y<this.path.length;y++){const v=this.path[y];if(!v.instance||!hasTransform(v.latestValues))continue;hasScale(v.latestValues)&&v.updateSnapshot();const w=createBox(),T=v.measurePageBox();copyBoxInto(w,T),removeBoxTransforms(g,v.latestValues,v.snapshot?v.snapshot.layoutBox:void 0,w)}return hasTransform(this.latestValues)&&removeBoxTransforms(g,this.latestValues),g}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){var A;const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const y=!!this.resumingFrom||this!==g;if(!(d||y&&this.isSharedProjectionDirty||this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:T}=this.options;if(!(!this.layout||!(w||T))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const C=this.getClosestProjectingParent();C&&C.layout&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,C.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const C=this.getClosestProjectingParent();C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,C.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var j;const d=this.getLead(),g=!!this.resumingFrom||this!==d;let y=!0;if((this.isProjectionDirty||(j=this.parent)!=null&&j.isProjectionDirty)&&(y=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(y=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(y=!1),y)return;const{layout:v,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||w))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,A=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,g),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=createBox());const{target:C}=d;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==A||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){var g;if((g=this.options.visualElement)==null||g.scheduleRender(),d){const y=this.getStack();y&&y.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(d,g=!1){const y=this.snapshot,v=y?y.latestValues:{},w={...this.latestValues},T=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const A=createBox(),C=y?y.source:void 0,j=this.layout?this.layout.source:void 0,D=C!==j,H=this.getStack(),ne=!H||H.members.length<=1,Y=!!(D&&!ne&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let U;this.mixTargetDelta=ee=>{const J=ee/1e3;mixAxisDelta(T.x,d.x,J),mixAxisDelta(T.y,d.y,J),this.setTargetDelta(T),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,A,J),U&&boxEquals(this.relativeTarget,U)&&(this.isProjectionDirty=!1),U||(U=createBox()),copyBoxInto(U,this.relativeTarget)),D&&(this.animationValues=w,mixValues(w,v,this.latestValues,J,Y,ne)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=J},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){var g,y,v;this.notifyListeners("animationStart"),(g=this.currentAnimation)==null||g.stop(),(v=(y=this.resumingFrom)==null?void 0:y.currentAnimation)==null||v.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...d,isSync:!0,onUpdate:w=>{this.mixTargetDelta(w),d.onUpdate&&d.onUpdate(w)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:g,target:y,layout:v,latestValues:w}=d;if(!(!g||!y||!v)){if(this!==d&&this.layout&&v&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,v.layoutBox)){y=this.target||createBox();const T=calcLength(this.layout.layoutBox.x);y.x.min=d.target.x.min,y.x.max=y.x.min+T;const A=calcLength(this.layout.layoutBox.y);y.y.min=d.target.y.min,y.y.max=y.y.min+A}copyBoxInto(g,y),transformBox(g,w),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,g,w)}}registerSharedNode(d,g){this.sharedNodes.has(d)||this.sharedNodes.set(d,new NodeStack),this.sharedNodes.get(d).add(g);const v=g.options.initialPromotionConfig;g.promote({transition:v?v.transition:void 0,preserveFollowOpacity:v&&v.shouldPreserveFollowOpacity?v.shouldPreserveFollowOpacity(g):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){var g;const{layoutId:d}=this.options;return d?((g=this.getStack())==null?void 0:g.lead)||this:this}getPrevLead(){var g;const{layoutId:d}=this.options;return d?(g=this.getStack())==null?void 0:g.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:g,preserveFollowOpacity:y}={}){const v=this.getStack();v&&v.promote(this,y),d&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let g=!1;const{latestValues:y}=d;if((y.z||y.rotate||y.rotateX||y.rotateY||y.rotateZ||y.skewX||y.skewY)&&(g=!0),!g)return;const v={};y.z&&resetDistortingTransform("z",d,v,this.animationValues);for(let w=0;w<transformAxes.length;w++)resetDistortingTransform(`rotate${transformAxes[w]}`,d,v,this.animationValues),resetDistortingTransform(`skew${transformAxes[w]}`,d,v,this.animationValues);d.render();for(const w in v)d.setStaticValue(w,v[w]),this.animationValues&&(this.animationValues[w]=v[w]);d.scheduleRender()}getProjectionStyles(d){if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const g={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,g.opacity="",g.pointerEvents=resolveMotionValue(d==null?void 0:d.pointerEvents)||"",g.transform=y?y(this.latestValues,""):"none",g;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=resolveMotionValue(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(C.transform=y?y({},""):"none",this.hasProjected=!1),C}const w=v.animationValues||v.latestValues;this.applyTransformsToTarget(),g.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,w),y&&(g.transform=y(w,g.transform));const{x:T,y:A}=this.projectionDelta;g.transformOrigin=`${T.origin*100}% ${A.origin*100}% 0`,v.animationValues?g.opacity=v===this?w.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:g.opacity=v===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const C in scaleCorrectors){if(w[C]===void 0)continue;const{correct:j,applyTo:D,isCSSVariable:H}=scaleCorrectors[C],ne=g.transform==="none"?w[C]:j(w[C],v);if(D){const Y=D.length;for(let U=0;U<Y;U++)g[D[U]]=ne}else H?this.options.visualElement.renderState.vars[C]=ne:g[C]=ne}return this.options.layoutId&&(g.pointerEvents=v===this?resolveMotionValue(d==null?void 0:d.pointerEvents)||"":"none"),g}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>{var g;return(g=d.currentAnimation)==null?void 0:g.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(t){t.updateLayout()}function notifyLayoutUpdate(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=t.layout,{animationType:u}=t.options,d=e.source!==t.layout.source;u==="size"?eachAxis(T=>{const A=d?e.measuredBox[T]:e.layoutBox[T],C=calcLength(A);A.min=s[T].min,A.max=A.min+C}):shouldAnimatePositionOnly(u,e.layoutBox,s)&&eachAxis(T=>{const A=d?e.measuredBox[T]:e.layoutBox[T],C=calcLength(s[T]);A.max=A.min+C,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[T].max=t.relativeTarget[T].min+C)});const g=createDelta();calcBoxDelta(g,s,e.layoutBox);const y=createDelta();d?calcBoxDelta(y,t.applyTransform(o,!0),e.measuredBox):calcBoxDelta(y,s,e.layoutBox);const v=!isDeltaZero(g);let w=!1;if(!t.resumeFrom){const T=t.getClosestProjectingParent();if(T&&!T.resumeFrom){const{snapshot:A,layout:C}=T;if(A&&C){const j=createBox();calcRelativePosition(j,e.layoutBox,A.layoutBox);const D=createBox();calcRelativePosition(D,s,C.layoutBox),boxEqualsRounded(j,D)||(w=!0),T.options.layoutRoot&&(t.relativeTarget=D,t.relativeTargetOrigin=j,t.relativeParent=T)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:y,layoutDelta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:w})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function propagateDirtyNodes(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cleanDirtyNodes(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function clearSnapshot(t){t.clearSnapshot()}function clearMeasurements(t){t.clearMeasurements()}function clearIsLayoutDirty(t){t.isLayoutDirty=!1}function resetTransformStyle(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function finishAnimation(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function resolveTargetDelta(t){t.resolveTargetDelta()}function calcProjection(t){t.calcProjection()}function resetSkewAndRotation(t){t.resetSkewAndRotation()}function removeLeadSnapshots(t){t.removeLeadSnapshot()}function mixAxisDelta(t,e,n){t.translate=mixNumber$1(e.translate,0,n),t.scale=mixNumber$1(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function mixAxis(t,e,n,s){t.min=mixNumber$1(e.min,n.min,s),t.max=mixNumber$1(e.max,n.max,s)}function mixBox(t,e,n,s){mixAxis(t.x,e.x,n.x,s),mixAxis(t.y,e.y,n.y,s)}function hasOpacityCrossfade(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$2;function roundAxis(t){t.min=roundPoint(t.min),t.max=roundPoint(t.max)}function roundBox(t){roundAxis(t.x),roundAxis(t.y)}function shouldAnimatePositionOnly(t,e,n){return t==="position"||t==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(n),.2)}function checkNodeWasScrollRoot(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(t,e)=>addDomEvent(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const t=new DocumentProjectionNode({});t.mount(window),t.setOptions({layoutScroll:!0}),rootProjectionNode.current=t}return rootProjectionNode.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,u=s[o];u&&frame.postRender(()=>u(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(n,s)=>(handleHoverEvent(this.node,s,"Start"),o=>handleHoverEvent(this.node,o,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),u=s[o];u&&frame.postRender(()=>u(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(n,s)=>(handlePressEvent(this.node,s,"Start"),(o,{success:u})=>handlePressEvent(this.node,o,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=t=>{const e=observerCallbacks.get(t.target);e&&e(t)},fireAllObserverCallbacks=t=>{t.forEach(fireObserverCallback)};function initIntersectionObserver({root:t,...e}){const n=t||document;observers.has(n)||observers.set(n,{});const s=observers.get(n),o=JSON.stringify(e);return s[o]||(s[o]=new IntersectionObserver(fireAllObserverCallbacks,{root:t,...e})),s[o]}function observeIntersection(t,e,n){const s=initIntersectionObserver(e);return observerCallbacks.set(t,n),s.observe(t),()=>{observerCallbacks.delete(t),s.unobserve(t)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:o="some",once:u}=e,d={root:n?n.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:thresholdNames[o]},g=y=>{const{isIntersecting:v}=y;if(this.isInView===v||(this.isInView=v,u&&!v&&this.hasEnteredView))return;v&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",v);const{onViewportEnter:w,onViewportLeave:T}=this.node.getProps(),A=v?w:T;A&&A(y)};return observeIntersection(this.node.current,d,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,n))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=t.matches;t.addListener(e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(t,e,n){for(const s in e){const o=e[s],u=n[s];if(isMotionValue(o))t.addValue(s,o);else if(isMotionValue(u))t.addValue(s,motionValue(o,{owner:t}));else if(u!==o)if(t.hasValue(s)){const d=t.getValue(s);d.liveStyle===!0?d.jump(o):d.hasAnimated||d.set(o)}else{const d=t.getStaticValue(s);t.addValue(s,motionValue(d!==void 0?d:o,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:o,blockInitialAnimation:u,visualState:d},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=time.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,frame.render(this.render,!1,!0))};const{latestValues:y,renderState:v}=d;this.latestValues=y,this.baseTarget={...y},this.initialValues=n.initial?{...y}:{},this.renderState=v,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=g,this.blockInitialAnimation=!!u,this.isControllingVariants=isControllingVariants(n),this.isVariantNode=isVariantNode(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:w,...T}=this.scrapeMotionValuesFromProps(n,{},this);for(const A in T){const C=T[A];y[A]!==void 0&&isMotionValue(C)&&C.set(y[A],!1)}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=transformProps.has(e);s&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",g=>{this.latestValues[e]=g,this.props.onUpdate&&frame.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),u=n.on("renderRequest",this.scheduleRender);let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),u(),d&&d(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const n=featureDefinitions[e];if(!n)continue;const{isEnabled:s,Feature:o}=n;if(!this.features[e]&&o&&s(this.props)&&(this.features[e]=new o(this)),this.features[e]){const u=this.features[e];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<propEventHandlers.length;s++){const o=propEventHandlers[s];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const u="on"+o,d=e[u];d&&(this.propEventSubscriptions[o]=this.on(o,d))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=motionValue(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(isNumericalString(s)||isZeroValueString(s))?s=parseFloat(s):!findValueType(s)&&complex.test(n)&&(s=getAnimatableNone(e,n)),this.setBaseTarget(e,isMotionValue(s)?s.get():s)),isMotionValue(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var u;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const d=resolveVariantFromProps(this.props,n,(u=this.presenceContext)==null?void 0:u.custom);d&&(s=d[e])}if(n&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!isMotionValue(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function renderHTML(t,{style:e,vars:n},s,o){Object.assign(t.style,e,o&&o.getProjectionStyles(s));for(const u in n)t.style.setProperty(u,n[u])}function getComputedStyle$3(t){return window.getComputedStyle(t)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,n){var s;if(transformProps.has(n))return(s=this.projection)!=null&&s.isProjecting?defaultTransformValue(n):readTransformValue(e,n);{const o=getComputedStyle$3(e),u=(isCSSVariableName(n)?o.getPropertyValue(n):o[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(e,{transformPagePoint:n}){return measureViewportBox(e,n)}build(e,n,s){buildHTMLStyles(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return scrapeMotionValuesFromProps$1(e,n,s)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(t,e,n,s){renderHTML(t,e,void 0,s);for(const o in e.attrs)t.setAttribute(camelCaseAttributes.has(o)?o:camelToDash(o),e.attrs[o])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(transformProps.has(n)){const s=getDefaultValueType(n);return s&&s.default||0}return n=camelCaseAttributes.has(n)?n:camelToDash(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return scrapeMotionValuesFromProps(e,n,s)}build(e,n,s){buildSVGAttrs(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,o){renderSVG(e,n,s,o)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(t,e)=>isSVGComponent(t)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:t!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent),navigationItems=[{id:"gameArt",title:"Artes do Jogo",description:"Crie artes para todos os momentos da partida: início, gols, substituições e mais",icon:jsxRuntimeExports.jsx(Brush,{className:"w-8 h-8 text-cyan-600"}),lucideIcon:Brush,roles:["user","root","editor"],isCard:!0,colorClasses:{border:"border-cyan-200",iconBg:"bg-cyan-100",iconColor:"text-cyan-600",button:"bg-cyan-600 hover:bg-cyan-700"}},{id:"escalacoes",title:"Gerador de Escalações",description:"Crie escalações personalizadas com logos, jogadores e informações da partida",icon:jsxRuntimeExports.jsx(LayoutTemplate,{className:"w-8 h-8 text-blue-600"}),lucideIcon:LayoutTemplate,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-red-100 hover:border-red-300",iconBg:"bg-red-100",iconColor:"text-red-600",button:"bg-red-600 hover:bg-red-700"}},{id:"matchday",title:"Dia de Jogo",description:"Crie a arte de anúncio da partida do dia",icon:jsxRuntimeExports.jsx(Sparkles,{className:"w-8 h-8 text-yellow-600"}),lucideIcon:Sparkles,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-blue-100 hover:border-blue-300",iconBg:"bg-blue-100",iconColor:"text-blue-600",button:"bg-blue-600 hover:bg-blue-700"}},{id:"nextGame",title:"Próximo Jogo",description:"Anuncie qual será o próximo confronto",icon:jsxRuntimeExports.jsx(ShieldCheck,{className:"w-8 h-8 text-green-600"}),lucideIcon:ShieldCheck,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-purple-100 hover:border-purple-300",iconBg:"bg-purple-100",iconColor:"text-purple-600",button:"bg-purple-600 hover:bg-purple-700"}},{id:"motm",title:"Melhor da Partida",description:'Destaque o jogador que foi o "Man of the Match"',icon:jsxRuntimeExports.jsx(Trophy,{className:"w-8 h-8 text-orange-600"}),lucideIcon:Trophy,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-yellow-100 hover:border-yellow-300",iconBg:"bg-yellow-100",iconColor:"text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700"}},{id:"fullTime",title:"Fim de Jogo",description:"Gere cards de resultado final com placar, estatísticas e informações da partida",icon:jsxRuntimeExports.jsx(Clock,{className:"w-8 h-8 text-purple-600"}),lucideIcon:Clock,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-green-100 hover:border-green-300",iconBg:"bg-green-100",iconColor:"text-green-600",button:"bg-green-600 hover:bg-green-700"}},{id:"confronto",title:"Confronto Direto",description:"Crie uma arte com o histórico de confrontos, incluindo um gráfico de pizza",icon:jsxRuntimeExports.jsx(Swords,{className:"w-8 h-8 text-red-600"}),lucideIcon:Swords,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-pink-100 hover:border-pink-300",iconBg:"bg-pink-100",iconColor:"text-pink-600",button:"bg-pink-600 hover:bg-pink-700"}},{id:"palpites",title:"Palpites",description:"Crie artes para todos os momentos da partida: início, gols, substituições e mais",icon:jsxRuntimeExports.jsx(Goal,{className:"w-8 h-8 text-orange-600"}),lucideIcon:Goal,roles:["user","root","editor"],isCard:!0,colorClasses:{border:"border-orange-200",iconBg:"bg-orange-100",iconColor:"text-orange-600",button:"bg-orange-600 hover:bg-orange-700"}},{id:"admin",title:"Administração",description:t=>`Gerencie ${(t==null?void 0:t.role)==="root"?"usuários, ":""}elenco, canais e mais`,icon:jsxRuntimeExports.jsx(Settings,{className:"w-8 h-8 text-teal-600"}),lucideIcon:Settings,roles:["editor","root"],isCard:!0,colorClasses:{border:"border border-teal-100 hover:border-teal-300",iconBg:"bg-teal-100",iconColor:"text-teal-600",button:"bg-teal-600 hover:bg-teal-700"}},{id:"home",title:"Início",description:"Voltar para a tela inicial",icon:jsxRuntimeExports.jsx(House,{className:"w-5 h-5"}),lucideIcon:House,roles:["user","editor","root"],isCard:!1}],getVisibleNavItems=t=>t?navigationItems.filter(e=>e.roles.includes(t.role)):[],MobileMenu=({onNavigate:t,onLogout:e})=>{const{isMenuOpen:n,setIsMenuOpen:s}=useGlobal(),{currentUserData:o}=useUser(),u=getVisibleNavItems(o),d=w=>{t(w),s(!1)},g=()=>{e(),s(!1)},y={visible:{opacity:1},hidden:{opacity:0}},v={open:{x:0},closed:{x:"100%"}};return jsxRuntimeExports.jsx(AnimatePresence,{children:n&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{variants:y,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.3},onClick:()=>s(!1),className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),jsxRuntimeExports.jsxs(motion.div,{variants:v,initial:"closed",animate:"open",exit:"closed",transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white shadow-xl z-50 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"font-display-bold text-lg text-gray-800",children:"Menu"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>s(!1),className:"cursor-pointer",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-grow p-4 space-y-4 overflow-y-auto",children:[jsxRuntimeExports.jsx("h3",{className:"font-display-semibold text-gray-700",children:"Navegação"}),jsxRuntimeExports.jsx("nav",{className:"flex flex-col space-y-2",children:u.map(w=>jsxRuntimeExports.jsx(MenuItem,{icon:w.icon,text:w.title,onClick:()=>d(w.id)},w.id))})]}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-gray-200 mt-auto",children:jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-gray-200 mt-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3",children:jsxRuntimeExports.jsx(User,{className:"w-5 h-5 text-red-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-semibold text-gray-800",children:(o==null?void 0:o.name)||"Usuário"}),(o==null?void 0:o.role)&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 capitalize",children:o.role})]})]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",onClick:g,className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50 font-display-medium cursor-pointer",children:[jsxRuntimeExports.jsx(LogOut,{className:"w-4 h-4 mr-2"}),"Sair"]})]})})]})]})})},MenuItem=({icon:t,text:e,onClick:n})=>jsxRuntimeExports.jsxs("button",{onClick:n,className:"flex items-center w-full text-left p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors duration-200 font-display-medium cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 flex items-center justify-center mr-3 text-gray-500",children:t}),e]}),CreateUserModal=({isOpen:t,onClose:e,onSuccess:n})=>{const{createUser:s,currentUserData:o}=useUser(),{showSuccessAlert:u,showErrorAlert:d}=useConfirmDialog(),[g,y]=reactExports.useState({name:"",email:"",password:"",role:"user",active:!0}),[v,w]=reactExports.useState(!1),T=async C=>{if(C.preventDefault(),!g.name||!g.email||!g.password){await d("Campos obrigatórios","Por favor, preencha todos os campos.");return}if(g.password.length<6){await d("Senha inválida","A senha deve ter pelo menos 6 caracteres.");return}w(!0);try{await s(g),await u("Usuário criado!",`${g.name} foi criado com sucesso.`),y({name:"",email:"",password:"",role:"user",active:!0}),n(),e()}catch(j){let D="Erro ao criar usuário. Tente novamente.";j.code==="auth/email-already-in-use"?D="Este email já está em uso.":j.code==="auth/invalid-email"?D="Email inválido.":j.code==="auth/weak-password"&&(D="Senha muito fraca."),await d("Erro ao criar usuário",D)}finally{w(!1)}},A=(C,j)=>{y(D=>({...D,[C]:j}))};return t?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800",children:"Criar Novo Usuário"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-400 hover:text-gray-600 cursor-pointer",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:T,className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"name",className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Nome completo"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{id:"name",type:"text",value:g.name,onChange:C=>A("name",C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors font-display",placeholder:"Nome do usuário",disabled:v})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Email"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{id:"email",type:"email",value:g.email,onChange:C=>A("email",C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors font-display",placeholder:"email@exemplo.com",disabled:v})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Senha"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{id:"password",type:"password",value:g.password,onChange:C=>A("password",C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors font-display",placeholder:"Mínimo 6 caracteres",disabled:v})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"role",className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Cargo"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Shield,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsxs("select",{id:"role",value:g.role,onChange:C=>A("role",C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors cursor-pointer font-display",disabled:v,children:[jsxRuntimeExports.jsx("option",{value:"user",children:"Usuário"}),jsxRuntimeExports.jsx("option",{value:"editor",children:"Editor"}),(o==null?void 0:o.role)==="root"&&jsxRuntimeExports.jsx("option",{value:"root",children:"Root"})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1 font-display",children:[g.role==="user"&&"Acesso apenas às aplicações básicas",g.role==="editor"&&"Acesso às aplicações e área administrativa",g.role==="root"&&"Acesso total ao sistema"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{id:"active",type:"checkbox",checked:g.active,onChange:C=>A("active",C.target.checked),className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded cursor-pointer",disabled:v}),jsxRuntimeExports.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-700 cursor-pointer font-display",children:"Usuário ativo (pode fazer login)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",onClick:e,disabled:v,className:"cursor-pointer font-display-medium",children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:v,className:"bg-teal-600 hover:bg-teal-700 text-white cursor-pointer font-display-medium",children:v?jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Criando..."]}):"Criar Usuário"})]})]})]})}):null},UserManagement=()=>{const{users:t,loadUsers:e,updateUserStatus:n,updateUserRole:s,currentUserData:o}=useUser(),{showConfirmDialog:u,showSuccessAlert:d,showErrorAlert:g}=useConfirmDialog(),[y,v]=reactExports.useState(!1),[w,T]=reactExports.useState(!1);reactExports.useEffect(()=>{A()},[]);const A=async()=>{T(!0);try{await e()}catch{await g("Erro","Não foi possível carregar os usuários.")}finally{T(!1)}},C=async U=>{const ee=U.active?"desativar":"ativar";if(await u({title:`Confirmar ${ee}`,text:`Tem certeza que deseja ${ee} o usuário ${U.name}?`,icon:"question",confirmButtonText:ee.charAt(0).toUpperCase()+ee.slice(1),cancelButtonText:"Cancelar"}))try{await n(U.id,!U.active),await d("Sucesso!",`Usuário ${ee}do com sucesso.`)}catch{await g("Erro",`Não foi possível ${ee} o usuário.`)}},j=async(U,ee)=>{if(U.id===(o==null?void 0:o.id)&&ee!=="root"){await g("Erro","Você não pode alterar seu próprio cargo de root.");return}if(await u({title:"Confirmar alteração de cargo",text:`Alterar cargo de ${U.name} para ${ee}?`,icon:"question",confirmButtonText:"Alterar",cancelButtonText:"Cancelar"}))try{await s(U.id,ee),await d("Sucesso!","Cargo alterado com sucesso.")}catch{await g("Erro","Não foi possível alterar o cargo.")}},D=U=>{switch(U){case"root":return jsxRuntimeExports.jsx(Crown,{className:"w-4 h-4 text-yellow-600"});case"editor":return jsxRuntimeExports.jsx(Shield,{className:"w-4 h-4 text-teal-600"});case"user":return jsxRuntimeExports.jsx(User,{className:"w-4 h-4 text-gray-600"})}},H=U=>{switch(U){case"root":return"bg-yellow-100 text-yellow-800";case"editor":return"bg-teal-100 text-teal-800";case"user":return"bg-gray-100 text-gray-800"}},ne=U=>U?new Date(U).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Nunca",Y=U=>{if(!U)return{text:"Nunca",color:"text-gray-500"};const J=new Date().getTime()-new Date(U).getTime(),ie=Math.floor(J/(1e3*60*60*24));return ie===0?{text:"Hoje",color:"text-green-600"}:ie===1?{text:"Ontem",color:"text-green-500"}:ie<=7?{text:`${ie} dias`,color:"text-yellow-600"}:ie<=30?{text:`${ie} dias`,color:"text-orange-600"}:{text:`${ie} dias`,color:"text-red-600"}};return w?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600 font-display",children:"Carregando usuários..."})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-extrabold text-gray-800",children:"Gerenciamento de Usuários"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-1 font-display",children:"Gerencie usuários, permissões e acessos do sistema"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>v(!0),className:"bg-teal-600 hover:bg-teal-700 text-white cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Novo Usuário"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(User,{className:"w-8 h-8 text-teal-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-600",children:"Total"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-800",children:t.length})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(UserCheck,{className:"w-8 h-8 text-green-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-600",children:"Ativos"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-800",children:t.filter(U=>U.active).length})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Crown,{className:"w-8 h-8 text-yellow-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-600",children:"Admins"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-800",children:t.filter(U=>U.role==="root"||U.role==="editor").length})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(UserX,{className:"w-8 h-8 text-red-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-600",children:"Inativos"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-800",children:t.filter(U=>!U.active).length})]})]})})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Usuário"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Cargo"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Último Login"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Criado em"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(U=>{const ee=Y(U.lastLogin);return jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:jsxRuntimeExports.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-display-semibold text-gray-700",children:U.name.charAt(0).toUpperCase()})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-display-medium text-gray-900",children:U.name}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500 font-display",children:U.email})]})]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[D(U.role),jsxRuntimeExports.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-display-semibold rounded-full ${H(U.role)}`,children:U.role})]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-display-semibold rounded-full ${U.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.active?"Ativo":"Inativo"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"text-sm font-display",children:[jsxRuntimeExports.jsx("div",{className:`font-display-medium ${ee.color}`,children:ee.text}),U.lastLogin&&jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 font-display",children:ne(U.lastLogin)})]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-display",children:ne(U.createdAt)}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[(o==null?void 0:o.role)==="root"&&jsxRuntimeExports.jsxs("select",{value:U.role,onChange:J=>j(U,J.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 cursor-pointer font-display",disabled:U.id===(o==null?void 0:o.id),children:[jsxRuntimeExports.jsx("option",{value:"user",children:"user"}),jsxRuntimeExports.jsx("option",{value:"editor",children:"editor"}),jsxRuntimeExports.jsx("option",{value:"root",children:"root"})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>C(U),className:`cursor-pointer ${U.active?"text-red-600 hover:text-red-700 hover:bg-red-50":"text-green-600 hover:text-green-700 hover:bg-green-50"}`,disabled:U.id===(o==null?void 0:o.id),children:U.active?jsxRuntimeExports.jsx(UserX,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(UserCheck,{className:"w-4 h-4"})})]})})]},U.id)})})]})})}),jsxRuntimeExports.jsx(CreateUserModal,{isOpen:y,onClose:()=>v(!1),onSuccess:A})]})},BaseImagesManager=()=>{const{baseImages:t,loading:e,uploadBaseImage:n,removeBaseImage:s,getImageByIdentifier:o,getImagesBySection:u}=useImages(),{showConfirmDialog:d}=useConfirmDialog(),[g,y]=reactExports.useState(null),[v,w]=reactExports.useState(IMAGE_SECTIONS.ESCALACAO),T=async(Y,U,ee)=>{y({section:U,type:ee});try{const ie=await n(Y,U,ee);ie.success||alert(`Erro no upload: ${ie.error}`)}catch{alert("Erro inesperado no upload")}finally{y(null)}},A=async(Y,U)=>{const ee=getSectionConfig(Y),J=getImageTypeConfig(U);if(await d({title:"Deletar Imagem",text:`Tem certeza que deseja deletar a imagem ${J.label} da seção ${ee.label}? Esta ação não pode ser desfeita.`,confirmButtonText:"Deletar",cancelButtonText:"Cancelar"})){const se=await s(Y,U);se.success||alert(`Erro ao deletar: ${se.error}`)}},C=(Y,U)=>(g==null?void 0:g.section)===Y&&(g==null?void 0:g.type)===U,j=({section:Y,type:U})=>{const ee=o({section:Y,type:U}),J=C(Y,U),ie=getImageTypeConfig(U);return jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-semibold text-gray-800 mb-2",children:ie.label}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:ie.description}),jsxRuntimeExports.jsx("span",{className:"inline-block mt-1 px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded font-display-medium",children:ie.dimensions})]}),jsxRuntimeExports.jsx("div",{className:"mb-4",children:ee?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:ee.url,alt:`Imagem ${ie.label}`,className:"w-full h-32 object-cover rounded-lg border border-gray-300"}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-500 bg-white rounded-full"})})]}):jsxRuntimeExports.jsx("div",{className:"w-full h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Image$2,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 font-display",children:"Nenhuma imagem"})]})})}),ee&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-left bg-gray-50 rounded-lg p-3",children:[jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 font-display",children:[jsxRuntimeExports.jsx("strong",{children:"Arquivo:"})," ",ee.filename]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 font-display",children:[jsxRuntimeExports.jsx("strong",{children:"Upload:"})," ",ee.uploadedAt.toLocaleDateString("pt-BR")]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:se=>{var te;const K=(te=se.target.files)==null?void 0:te[0];K&&T(K,Y,U)},className:"hidden",id:`upload-${Y}-${U}`,disabled:J}),jsxRuntimeExports.jsx("label",{htmlFor:`upload-${Y}-${U}`,className:`w-full inline-flex items-center justify-center px-4 py-2 rounded-lg font-display-medium cursor-pointer transition-colors ${J?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-teal-600 hover:bg-teal-700 text-white"}`,children:J?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"}),"Enviando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4 mr-2"}),ee?"Substituir":"Enviar"]})})]}),ee&&!J&&jsxRuntimeExports.jsxs(Button,{onClick:()=>A(Y,U),variant:"outline",size:"sm",className:"w-full text-red-600 border-red-300 hover:bg-red-50 cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4 mr-2"}),"Deletar"]})]})]})})},D=({section:Y})=>{const U=getSectionConfig(Y),ee=getAllowedTypesForSection(Y),J=u(Y);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-bold text-gray-800 mb-2",children:U.label}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:U.description})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ee.map(ie=>jsxRuntimeExports.jsx(j,{section:Y,type:ie},`${Y}-${ie}`))}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("h4",{className:"font-display-semibold text-gray-800 mb-2",children:["Estatísticas - ",U.label]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-teal-600",children:J.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Configuradas"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-600",children:ee.length-J.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Pendentes"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-display-bold text-green-600",children:[Math.round(J.length/ee.length*100),"%"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Completo"})]})]})]})]})};if(e)return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx(Loader,{className:"w-8 h-8 animate-spin text-teal-600"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600 font-display",children:"Carregando imagens..."})]});const H=t.length,ne=Object.values(SECTIONS_CONFIG).reduce((Y,U)=>Y+U.allowedTypes.length,0);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800 mb-2",children:"Gerenciar Imagens por Seção"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Gerencie as imagens base organizadas por seção. Cada seção tem tipos específicos de imagem permitidos."})]}),!1,jsxRuntimeExports.jsx("div",{className:"border-b border-gray-200",children:jsxRuntimeExports.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:Object.values(IMAGE_SECTIONS).map(Y=>{const U=getSectionConfig(Y),ee=u(Y),J=getAllowedTypesForSection(Y),ie=v===Y,se=J.length>0?Math.round(ee.length/J.length*100):0;return jsxRuntimeExports.jsx("button",{onClick:()=>w(Y),className:`whitespace-nowrap py-2 px-1 border-b-2 font-display-medium text-sm transition-colors ${ie?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} cursor-pointer`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{children:U.label}),jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-display-medium ${se===100?"bg-green-100 text-green-800":se>0?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[ee.length,"/",J.length]})]})},Y)})})}),jsxRuntimeExports.jsx(D,{section:v}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-display-semibold text-gray-800 mb-2",children:"Estatísticas Gerais"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-teal-600",children:H-3}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Total Configuradas"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-600",children:ne-(H-3)}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Total Pendentes"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-display-bold text-green-600",children:[ne>0?Math.round((H-3)/ne*100):0,"%"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Progresso Geral"})]})]})]})]})},PlayerImageManager=({player:t,onClose:e})=>{const{uploadPlayerImage:n,removePlayerImage:s}=useSquad(),[o,u]=reactExports.useState(!1),[d,g]=reactExports.useState(!1),y=async j=>{if(!j.type.startsWith("image/")){alert("Por favor, selecione apenas arquivos de imagem.");return}if(j.size>10*1024*1024){alert("Arquivo muito grande. Máximo 10MB.");return}u(!0);try{const D=await n(t.id,j);D.success||alert(D.error||"Erro ao fazer upload da imagem")}catch(D){console.error("Erro no upload:",D),alert("Erro interno no upload da imagem")}finally{u(!1)}},v=j=>{j.preventDefault(),g(!1);const D=Array.from(j.dataTransfer.files);D.length>0&&y(D[0])},w=j=>{const D=Array.from(j.target.files||[]);D.length>0&&y(D[0])},T=async j=>{if(await showConfirmDialog({title:"Remover Imagem",text:"Tem certeza que deseja remover esta imagem?",confirmButtonText:"Remover",cancelButtonText:"Cancelar"})){const H=await s(t.id,j);H.success||alert(H.error||"Erro ao remover imagem")}},A=t.imgUrl||[],C=A.length<2;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-display-bold text-gray-800",children:"Imagens do Jogador"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 font-display",children:[t.number," - ",t.name]})]}),jsxRuntimeExports.jsx(Button,{onClick:e,variant:"ghost",size:"sm",className:"cursor-pointer",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[A.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-display-semibold text-gray-800 mb-4",children:["Imagens Atuais (",A.length,"/2)"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:A.map((j,D)=>jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:j,alt:`${t.name} - Imagem ${D+1}`,className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>T(j),variant:"destructive",size:"sm",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]},D))})]}),C&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-4",children:A.length===0?"Adicionar Imagens":"Adicionar Mais Uma Imagem"}),jsxRuntimeExports.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${d?"border-red-400 bg-red-50":o?"border-gray-300 bg-gray-50":"border-gray-300 hover:border-red-400 hover:bg-red-50 cursor-pointer"}`,onDrop:v,onDragOver:j=>{j.preventDefault(),g(!0)},onDragLeave:()=>g(!1),onClick:()=>{var j;o||(j=document.getElementById("image-upload"))==null||j.click()},children:o?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(Loader,{className:"w-8 h-8 text-red-600 animate-spin mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Fazendo upload..."})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(Upload,{className:"w-8 h-8 text-gray-400 mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display-medium mb-1",children:"Clique ou arraste uma imagem aqui"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 font-display",children:"PNG, JPG até 10MB"})]})}),jsxRuntimeExports.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:w,className:"hidden",disabled:o})]}),!C&&jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-yellow-600 mr-2"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-800 font-display-medium",children:"Limite máximo de 2 imagens atingido"})]}),jsxRuntimeExports.jsx("p",{className:"text-yellow-700 text-sm mt-1 font-display",children:"Remova uma imagem existente para adicionar uma nova."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-medium text-gray-800 mb-2",children:"Dicas:"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 font-display",children:[jsxRuntimeExports.jsx("li",{children:"• Cada jogador pode ter até 2 imagens"}),jsxRuntimeExports.jsx("li",{children:"• Formatos aceitos: PNG, JPG, WebP"}),jsxRuntimeExports.jsx("li",{children:"• Tamanho máximo: 10MB por imagem"}),jsxRuntimeExports.jsx("li",{children:"• Imagens são armazenadas no ImgBB"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:jsxRuntimeExports.jsx(Button,{onClick:e,className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer font-display-medium",children:"Concluído"})})]})})},SquadManager=()=>{const{players:t,loading:e,addPlayer:n,updatePlayer:s,deletePlayer:o,initializeSquad:u,getPlayersByPosition:d}=useSquad(),[g,y]=reactExports.useState(""),[v,w]=reactExports.useState("all"),[T,A]=reactExports.useState(!1),[C,j]=reactExports.useState(null),[D,H]=reactExports.useState(null),ne=t.filter(se=>{const K=se.name.toLowerCase().includes(g.toLowerCase())||se.number.includes(g),te=v==="all"||se.position===v;return K&&te}),Y={GOL:d("GOL").length,DEF:d("DEF").length,MEI:d("MEI").length,ATA:d("ATA").length},U=async se=>{const K=await n(se);K.success?A(!1):alert(K.error||"Erro ao criar jogador")},ee=async se=>{if(!C)return;const K=await s(C.id,se);K.success?j(null):alert(K.error||"Erro ao atualizar jogador")},J=async se=>{if(await showConfirmDialog({title:"Deletar Jogador",text:`Tem certeza que deseja deletar ${se.name}?`,confirmButtonText:"Deletar",cancelButtonText:"Cancelar"})){const te=await o(se.id);te.success||alert(te.error||"Erro ao deletar jogador")}},ie=async()=>{if(await showConfirmDialog({title:"Inicializar Elenco",text:"Isso irá adicionar o elenco oficial do Liverpool. Continuar?",confirmButtonText:"Inicializar",cancelButtonText:"Cancelar"})){const K=await u();K.success||alert(K.error||"Erro ao inicializar elenco")}};return e?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx(Loader,{className:"w-8 h-8 animate-spin text-green-600"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600 font-display",children:"Carregando elenco..."})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800",children:"Elenco do Liverpool"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Gerencie os jogadores do elenco oficial"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[t.length===0&&jsxRuntimeExports.jsxs(Button,{onClick:ie,className:"bg-green-600 hover:bg-green-700 text-white cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Users,{className:"w-4 h-4 mr-2"}),"Inicializar Elenco"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>A(!0),className:"bg-green-600 hover:bg-green-700 text-white cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Novo Jogador"]})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(Y).map(([se,K])=>jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:PLAYER_POSITIONS[se]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-800",children:K})]}),jsxRuntimeExports.jsx("div",{className:`w-3 h-3 rounded-full ${POSITION_COLORS[se].split(" ")[0]}`})]})},se))}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar por nome ou número...",value:g,onChange:se=>y(se.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display"})]})}),jsxRuntimeExports.jsxs("select",{value:v,onChange:se=>w(se.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"Todas as posições"}),Object.entries(PLAYER_POSITIONS).map(([se,K])=>jsxRuntimeExports.jsx("option",{value:se,children:K},se))]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:ne.length===0?jsxRuntimeExports.jsxs("div",{className:"p-8 text-center",children:[jsxRuntimeExports.jsx(Users,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-medium text-gray-800 mb-2",children:t.length===0?"Nenhum jogador cadastrado":"Nenhum jogador encontrado"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:t.length===0?'Clique em "Inicializar Elenco" para adicionar o elenco oficial do Liverpool':"Tente ajustar os filtros de busca"})]}):jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Jogador"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Número"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Posição"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Imagens"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ne.map(se=>{var K;return jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("div",{className:"font-display-medium text-gray-800",children:se.name})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-display-medium bg-gray-100 text-gray-800",children:["#",se.number]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-display-medium ${POSITION_COLORS[se.position]}`,children:PLAYER_POSITIONS[se.position]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 font-display mr-2",children:[((K=se.imgUrl)==null?void 0:K.length)||0,"/2"]}),jsxRuntimeExports.jsx(Button,{onClick:()=>H(se),variant:"ghost",size:"sm",className:"cursor-pointer",children:jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4"})})]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>j(se),variant:"ghost",size:"sm",className:"cursor-pointer",children:jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>J(se),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 cursor-pointer",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})})]},se.id)})})]})})}),T&&jsxRuntimeExports.jsx(CreatePlayerModal,{onClose:()=>A(!1),onSubmit:U}),C&&jsxRuntimeExports.jsx(CreatePlayerModal,{player:C,onClose:()=>j(null),onSubmit:ee}),D&&jsxRuntimeExports.jsx(PlayerImageManager,{player:D,onClose:()=>H(null)})]})},CreatePlayerModal=({player:t,onClose:e,onSubmit:n})=>{const{isNumberTaken:s}=useSquad(),[o,u]=reactExports.useState({name:(t==null?void 0:t.name)||"",number:(t==null?void 0:t.number)||"",position:(t==null?void 0:t.position)||"ATA"}),[d,g]=reactExports.useState({}),y=()=>{const w={};if(o.name.trim()?o.name.trim().length<2&&(w.name="Nome deve ter pelo menos 2 caracteres"):w.name="Nome é obrigatório",!o.number.trim())w.number="Número é obrigatório";else{const T=parseInt(o.number.trim());isNaN(T)||T<1||T>99?w.number="Número deve ser entre 1 e 99":s(o.number.trim(),t==null?void 0:t.id)&&(w.number="Este número já está em uso")}return g(w),Object.keys(w).length===0},v=w=>{w.preventDefault(),y()&&n(o)};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-display-bold text-gray-800",children:t?"Editar Jogador":"Novo Jogador"}),jsxRuntimeExports.jsx(Button,{onClick:e,variant:"ghost",size:"sm",className:"cursor-pointer",children:"×"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:v,className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Nome"}),jsxRuntimeExports.jsx("input",{type:"text",value:o.name,onChange:w=>u(T=>({...T,name:w.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display ${d.name?"border-red-500":"border-gray-300"}`,placeholder:"Nome do jogador"}),d.name&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:d.name})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Número"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"99",value:o.number,onChange:w=>u(T=>({...T,number:w.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display ${d.number?"border-red-500":"border-gray-300"}`,placeholder:"Número da camisa"}),d.number&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:d.number})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Posição"}),jsxRuntimeExports.jsx("select",{value:o.position,onChange:w=>u(T=>({...T,position:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display",children:Object.entries(PLAYER_POSITIONS).map(([w,T])=>jsxRuntimeExports.jsx("option",{value:w,children:T},w))})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",onClick:e,variant:"outline",className:"cursor-pointer font-display-medium",children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white cursor-pointer font-display-medium",children:t?"Atualizar":"Criar"})]})]})]})})},CHANNEL_TYPES={TV_ABERTA:"TV Aberta",TV_FECHADA:"TV Fechada",STREAMING:"Streaming"},ChannelManager=()=>{const{channels:t,loading:e,addChannel:n,updateChannel:s,deleteChannel:o}=useChannels(),[u,d]=reactExports.useState(""),[g,y]=reactExports.useState(!1),[v,w]=reactExports.useState(null),T=t.filter(D=>D.name.toLowerCase().includes(u.toLowerCase())),A=(D=null)=>{w(D),y(!0)},C=()=>{w(null),y(!1)},j=async D=>{if(await showConfirmDialog({title:"Deletar Canal",text:`Tem certeza que deseja deletar o canal ${D.name}?`,confirmButtonText:"Deletar",cancelButtonText:"Cancelar"})){const ne=await o(D.id,D.name);ne.success||alert(ne.error||"Erro ao deletar canal")}};return e?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx(Loader,{className:"w-8 h-8 animate-spin text-green-600"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600 font-display",children:"Carregando canais..."})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800",children:"Canais de TV"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Gerencie os canais para exibição nos jogos"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>A(),className:"bg-green-600 hover:bg-green-700 text-white cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Novo Canal"]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar por nome do canal...",value:u,onChange:D=>d(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display"})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:T.length===0?jsxRuntimeExports.jsxs("div",{className:"p-8 text-center",children:[jsxRuntimeExports.jsx(Tv,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-medium text-gray-800 mb-2",children:"Nenhum canal encontrado"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:t.length===0?'Clique em "Novo Canal" para começar.':"Tente ajustar sua busca."})]}):jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Logo"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(D=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:D.logoUrl?jsxRuntimeExports.jsx("img",{src:D.logoUrl,alt:`Logo ${D.name}`,className:"h-8 w-auto object-contain"}):jsxRuntimeExports.jsx("div",{className:"h-8 w-12 bg-gray-100 flex items-center justify-center rounded",children:jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4 text-gray-400"})})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-display-medium text-gray-800",children:D.name}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-display",children:CHANNEL_TYPES[D.type]}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>A(D),variant:"ghost",size:"sm",children:jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>j(D),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})})]},D.id))})]})})}),g&&jsxRuntimeExports.jsx(ChannelModal,{channel:v,onClose:C,addChannel:n,updateChannel:s})]})},ChannelModal=({channel:t,onClose:e,addChannel:n,updateChannel:s})=>{const[o,u]=reactExports.useState({name:(t==null?void 0:t.name)||"",type:(t==null?void 0:t.type)||"TV_FECHADA"}),[d,g]=reactExports.useState(null),[y,v]=reactExports.useState((t==null?void 0:t.logoUrl)||null),[w,T]=reactExports.useState(""),A=reactExports.useRef(null),[C,j]=reactExports.useState(!1);reactExports.useEffect(()=>(t!=null&&t.logoUrl?v(t.logoUrl):!t&&!d&&v(null),()=>{y&&y.startsWith("blob:")&&URL.revokeObjectURL(y)}),[t,d]);const D=ie=>{ie?ie.type.startsWith("image/png")||ie.type.startsWith("image/jpeg")?(g(ie),y&&y.startsWith("blob:")&&URL.revokeObjectURL(y),v(URL.createObjectURL(ie)),T("")):(T("Por favor, selecione um arquivo de imagem PNG ou JPEG."),g(null),v((t==null?void 0:t.logoUrl)||null)):(g(null),v((t==null?void 0:t.logoUrl)||null))},H=ie=>{var se;D((se=ie.target.files)==null?void 0:se[0])},ne=ie=>{ie.preventDefault(),j(!0)},Y=ie=>{var se;ie.preventDefault(),j(!1),D((se=ie.dataTransfer.files)==null?void 0:se[0])},U=ie=>{ie.preventDefault(),j(!0)},ee=ie=>{ie.preventDefault(),j(!1)},J=async ie=>{if(ie.preventDefault(),!o.name.trim()){T("O nome do canal é obrigatório.");return}if(!t&&!d){T("A logo é obrigatória para um novo canal.");return}if(t&&!d&&!y){T("A logo é obrigatória. Por favor, mantenha a logo existente ou faça upload de uma nova.");return}T("");let se;t?se=await s(t.id,o,d===null&&y?void 0:d||void 0):se=await n(o,d),se.success?e():T(se.error||"Ocorreu um erro.")};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 font-inter",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-800",children:t?"Editar Canal":"Novo Canal"}),jsxRuntimeExports.jsx(Button,{onClick:e,variant:"ghost",size:"sm",children:"×"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:J,className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Canal"}),jsxRuntimeExports.jsx("input",{type:"text",value:o.name,onChange:ie=>u(se=>({...se,name:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Ex: ESPN"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Canal"}),jsxRuntimeExports.jsx("select",{value:o.type,onChange:ie=>u(se=>({...se,type:ie.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:Object.entries(CHANNEL_TYPES).map(([ie,se])=>jsxRuntimeExports.jsx("option",{value:ie,children:se},ie))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo do Canal (PNG transparente)"}),jsxRuntimeExports.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer 
                         ${C?"border-green-500 bg-green-50":"border-gray-300 hover:border-green-500"}`,onClick:()=>{var ie;return(ie=A.current)==null?void 0:ie.click()},onDragOver:ne,onDrop:Y,onDragEnter:U,onDragLeave:ee,children:[jsxRuntimeExports.jsx("input",{type:"file",ref:A,onChange:H,accept:"image/png, image/jpeg",className:"hidden"}),y?jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("img",{src:y,alt:"Pré-visualização",className:"max-h-24 mx-auto rounded-md shadow-sm"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:ie=>{ie.stopPropagation(),v(null),g(null),T("")},className:"absolute top-0 right-0 -mt-2 -mr-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity duration-200","aria-label":"Remover logo",children:"×"})]}):jsxRuntimeExports.jsxs("div",{className:"text-gray-500",children:[jsxRuntimeExports.jsx(Upload,{className:"mx-auto h-8 w-8 mb-2"}),jsxRuntimeExports.jsx("p",{children:C?"Solte o arquivo aqui!":"Clique para fazer upload ou arraste e solte"}),jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Recomendado: PNG sem fundo"})]})]})]}),w&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm font-medium",children:w}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",onClick:e,variant:"outline",className:"font-medium",children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-medium",children:t?"Atualizar":"Criar Canal"})]})]})]})})},AliasModal=({alias:t,onClose:e,onSave:n})=>{const[s,o]=reactExports.useState({name:(t==null?void 0:t.name)||"",alias:(t==null?void 0:t.alias)||""}),[u,d]=reactExports.useState(""),g=y=>{if(y.preventDefault(),!s.name.trim()||!s.alias.trim()){d("Preencha ambos os campos.");return}n({...t,...s}),e()};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-gray-800",children:t?"Editar Alias":"Novo Alias"}),jsxRuntimeExports.jsxs("form",{onSubmit:g,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nome"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.name,onChange:y=>o(v=>({...v,name:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Nome original"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Alias"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.alias,onChange:y=>o(v=>({...v,alias:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Nome alternativo"})]}),u&&jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600",children:u}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:e,children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"bg-green-600 text-white",children:"Salvar"})]})]})]})})},AliasManager=()=>{const{aliases:t,loading:e,addAlias:n,updateAlias:s,deleteAlias:o}=useAliases(),[u,d]=reactExports.useState(""),[g,y]=reactExports.useState(null),v=t.filter(T=>T.name.toLowerCase().includes(u.toLowerCase())),w=async(T,A)=>{await showConfirmDialog({title:"Deletar Alias",text:`Deseja mesmo deletar o alias de "${A}"?`,confirmButtonText:"Deletar",cancelButtonText:"Cancelar"})&&await o(T,A)};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800",children:"Aliases"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Mapeie nomes alternativos para entidades"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>y({name:"",alias:""}),className:"bg-green-600 text-white",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Novo Alias"]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white p-4 border rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar por nome...",value:u,onChange:T=>d(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]})}),e?jsxRuntimeExports.jsx("div",{className:"flex justify-center py-8",children:jsxRuntimeExports.jsx(Loader,{className:"w-6 h-6 animate-spin text-green-600"})}):jsxRuntimeExports.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:v.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(User,{className:"w-12 h-12 mx-auto mb-2"}),"Nenhum alias encontrado."]}):jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 text-xs text-gray-500 uppercase",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left",children:"Nome"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left",children:"Alias"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right",children:"Ações"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y",children:v.sort((T,A)=>T.alias.localeCompare(A.alias)).map(T=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-3",children:T.name}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3",children:T.alias}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-3 text-right space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>y(T),children:jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>w(T.id,T.name),children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})]},T.id))})]})}),g&&jsxRuntimeExports.jsx(AliasModal,{alias:g,onClose:()=>y(null),onSave:async T=>{T.id?await s(T):await n(T)}})]})};function SectionHeader({onBack:t,setCurrentView:e,setIsMenuOpen:n,title:s}){const{currentUser:o,logout:u}=useAuth(),{currentUserData:d}=useUser(),g=()=>(d==null?void 0:d.name)||(o==null?void 0:o.displayName)||"Usuário",y=w=>{e(w)},v=async()=>{await showConfirmDialog({title:"Confirmar logout",text:"Tem certeza que deseja sair?",icon:"question",confirmButtonText:"Sair",cancelButtonText:"Cancelar"})&&await u()};return jsxRuntimeExports.jsxs("header",{className:"bg-white shadow-sm border-b border-gray-200",children:[jsxRuntimeExports.jsx(MobileMenu,{onNavigate:y,onLogout:v}),jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center h-16",children:[t?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button,{onClick:t,variant:"ghost",size:"sm",className:"mr-4 cursor-pointer",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Voltar"]}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-display-bold text-gray-800",children:s})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("img",{src:caminhantesClock,alt:"Caminhantes",className:"w-10 h-10 mr-3"}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-display-bold text-gray-800",children:s})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-gray-600 font-display",children:[jsxRuntimeExports.jsx(User,{className:"w-4 h-4 mr-1"}),g(),(d==null?void 0:d.role)&&jsxRuntimeExports.jsx("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full font-display-medium",children:d.role})]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:v,className:"text-red-600 hover:text-red-700 hover:bg-red-50 cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(LogOut,{className:"w-4 h-4 mr-1"}),"Sair"]})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",className:"cursor-pointer",onClick:()=>n(!0),children:jsxRuntimeExports.jsx(Menu,{className:"w-5 h-5"})})]})]})})]})}const AdminDashboard=({onBack:t,onNavigate:e,onLogout:n})=>{const[s,o]=reactExports.useState("home"),{currentUserData:u}=useUser(),{setIsMenuOpen:d}=useGlobal(),g=(C,j,D)=>s!==C?null:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 to-teal-100",children:[jsxRuntimeExports.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-30",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>o("home"),variant:"ghost",size:"sm",className:"mr-4 cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Voltar"]}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-display-bold text-gray-800",children:j})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>d(!0),children:jsxRuntimeExports.jsx(Menu,{className:"w-5 h-5"})})]})})}),jsxRuntimeExports.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:jsxRuntimeExports.jsx(D,{})})]}),y=g("users","Administração de Usuários",UserManagement),v=g("images","Imagens Base",BaseImagesManager),w=g("squad","Elenco do Liverpool",SquadManager),T=g("channels","Canais de TV",ChannelManager),A=g("alias","Aliases",AliasManager);return s!=="home"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MobileMenu,{onNavigate:e,onLogout:n}),y||v||w||T||A||null]}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 to-teal-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:e,setIsMenuOpen:d,title:"Painel Administrativo"}),jsxRuntimeExports.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-display-extrabold text-gray-800 mb-4",children:"Administração do Sistema"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 font-display",children:"Selecione uma área para gerenciar."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[(u==null?void 0:u.role)==="root"&&jsxRuntimeExports.jsx(AdminCard,{title:"Usuários",description:"Gerencie usuários e permissões.",icon:jsxRuntimeExports.jsx(Users,{className:"w-8 h-8 text-teal-600"}),onClick:()=>o("users")}),(u==null?void 0:u.role)==="root"&&jsxRuntimeExports.jsx(AdminCard,{title:"Imagens Base",description:"Configure as imagens de fundo.",icon:jsxRuntimeExports.jsx(Image$2,{className:"w-8 h-8 text-teal-600"}),onClick:()=>o("images")}),(u==null?void 0:u.role)==="root"&&jsxRuntimeExports.jsx(AdminCard,{title:"Aliases",description:"Configure nomes alternativos para dados.",icon:jsxRuntimeExports.jsx(Link2,{className:"w-8 h-8 text-teal-600"}),onClick:()=>o("alias")}),((u==null?void 0:u.role)==="root"||(u==null?void 0:u.role)==="editor")&&jsxRuntimeExports.jsx(AdminCard,{title:"Elenco Liverpool",description:"Gerencie os jogadores do elenco.",icon:jsxRuntimeExports.jsx(Database,{className:"w-8 h-8 text-teal-600"}),onClick:()=>o("squad")}),((u==null?void 0:u.role)==="root"||(u==null?void 0:u.role)==="editor")&&jsxRuntimeExports.jsx(AdminCard,{title:"Canais de TV",description:"Adicione e gerencie os canais.",icon:jsxRuntimeExports.jsx(Tv,{className:"w-8 h-8 text-teal-600"}),onClick:()=>o("channels")})]})]})]})},AdminCard=({title:t,description:e,icon:n,onClick:s})=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all cursor-pointer border border-gray-200 hover:border-teal-300 flex flex-col",onClick:s,children:[jsxRuntimeExports.jsxs("div",{className:"text-center flex-grow",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-semibold text-gray-800 mb-2",children:t}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4 font-display",children:e})]}),jsxRuntimeExports.jsx(Button,{className:"w-full mt-auto bg-teal-600 hover:bg-teal-700 text-white cursor-pointer font-display-medium",children:"Gerenciar"})]});var domToImage={exports:{}},hasRequiredDomToImage;function requireDomToImage(){return hasRequiredDomToImage||(hasRequiredDomToImage=1,function(t){(function(e){var n=U(),s=ee(),o=J(),u=ie(),d={imagePlaceholder:void 0,cacheBust:!1},g={toSvg:y,toPng:w,toJpeg:T,toBlob:A,toPixelData:v,impl:{fontFaces:o,images:u,util:n,inliner:s,options:{}}};t.exports=g;function y(se,K){return K=K||{},C(K),Promise.resolve(se).then(function(re){return D(re,K.filter,!0)}).then(H).then(ne).then(te).then(function(re){return Y(re,K.width||n.width(se),K.height||n.height(se))});function te(re){return K.bgcolor&&(re.style.backgroundColor=K.bgcolor),K.width&&(re.style.width=K.width+"px"),K.height&&(re.style.height=K.height+"px"),K.style&&Object.keys(K.style).forEach(function(ce){re.style[ce]=K.style[ce]}),re}}function v(se,K){return j(se,K||{}).then(function(te){return te.getContext("2d").getImageData(0,0,n.width(se),n.height(se)).data})}function w(se,K){return j(se,K||{}).then(function(te){return te.toDataURL()})}function T(se,K){return K=K||{},j(se,K).then(function(te){return te.toDataURL("image/jpeg",K.quality||1)})}function A(se,K){return j(se,K||{}).then(n.canvasToBlob)}function C(se){typeof se.imagePlaceholder>"u"?g.impl.options.imagePlaceholder=d.imagePlaceholder:g.impl.options.imagePlaceholder=se.imagePlaceholder,typeof se.cacheBust>"u"?g.impl.options.cacheBust=d.cacheBust:g.impl.options.cacheBust=se.cacheBust}function j(se,K){return y(se,K).then(n.makeImage).then(n.delay(100)).then(function(re){var ce=te(se);return ce.getContext("2d").drawImage(re,0,0),ce});function te(re){var ce=document.createElement("canvas");if(ce.width=K.width||n.width(re),ce.height=K.height||n.height(re),K.bgcolor){var le=ce.getContext("2d");le.fillStyle=K.bgcolor,le.fillRect(0,0,ce.width,ce.height)}return ce}}function D(se,K,te){if(!te&&K&&!K(se))return Promise.resolve();return Promise.resolve(se).then(re).then(function(ue){return ce(se,ue,K)}).then(function(ue){return le(se,ue)});function re(ue){return ue instanceof HTMLCanvasElement?n.makeImage(ue.toDataURL()):ue.cloneNode(!1)}function ce(ue,_e,Ee){var we=ue.childNodes;if(we.length===0)return Promise.resolve(_e);return de(_e,n.asArray(we),Ee).then(function(){return _e});function de(me,xe,pe){var ve=Promise.resolve();return xe.forEach(function(Oe){ve=ve.then(function(){return D(Oe,pe)}).then(function(Te){Te&&me.appendChild(Te)})}),ve}}function le(ue,_e){if(!(_e instanceof Element))return _e;return Promise.resolve().then(Ee).then(we).then(de).then(me).then(function(){return _e});function Ee(){xe(window.getComputedStyle(ue),_e.style);function xe(pe,ve){pe.cssText?ve.cssText=pe.cssText:Oe(pe,ve);function Oe(Te,Le){n.asArray(Te).forEach(function(Me){Le.setProperty(Me,Te.getPropertyValue(Me),Te.getPropertyPriority(Me))})}}}function we(){[":before",":after"].forEach(function(pe){xe(pe)});function xe(pe){var ve=window.getComputedStyle(ue,pe),Oe=ve.getPropertyValue("content");if(Oe===""||Oe==="none")return;var Te=n.uid();_e.className=_e.className+" "+Te;var Le=document.createElement("style");Le.appendChild(Me(Te,pe,ve)),_e.appendChild(Le);function Me(Ce,be,Ve){var $e="."+Ce+":"+be,Fe=Ve.cssText?je(Ve):De(Ve);return document.createTextNode($e+"{"+Fe+"}");function je(Ie){var Re=Ie.getPropertyValue("content");return Ie.cssText+" content: "+Re+";"}function De(Ie){return n.asArray(Ie).map(Re).join("; ")+";";function Re(Ne){return Ne+": "+Ie.getPropertyValue(Ne)+(Ie.getPropertyPriority(Ne)?" !important":"")}}}}}function de(){ue instanceof HTMLTextAreaElement&&(_e.innerHTML=ue.value),ue instanceof HTMLInputElement&&_e.setAttribute("value",ue.value)}function me(){_e instanceof SVGElement&&(_e.setAttribute("xmlns","http://www.w3.org/2000/svg"),_e instanceof SVGRectElement&&["width","height"].forEach(function(xe){var pe=_e.getAttribute(xe);pe&&_e.style.setProperty(xe,pe)}))}}}function H(se){return o.resolveAll().then(function(K){var te=document.createElement("style");return se.appendChild(te),te.appendChild(document.createTextNode(K)),se})}function ne(se){return u.inlineAll(se).then(function(){return se})}function Y(se,K,te){return Promise.resolve(se).then(function(re){return re.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(re)}).then(n.escapeXhtml).then(function(re){return'<foreignObject x="0" y="0" width="100%" height="100%">'+re+"</foreignObject>"}).then(function(re){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+K+'" height="'+te+'">'+re+"</svg>"}).then(function(re){return"data:image/svg+xml;charset=utf-8,"+re})}function U(){return{escape:me,parseExtension:K,mimeType:te,dataAsUrl:de,isDataUrl:re,canvasToBlob:le,resolveUrl:ue,getAndEncode:we,uid:_e(),delay:xe,asArray:pe,escapeXhtml:ve,makeImage:Ee,width:Oe,height:Te};function se(){var Me="application/font-woff",Ce="image/jpeg";return{woff:Me,woff2:Me,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Ce,jpeg:Ce,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function K(Me){var Ce=/\.([^\.\/]*?)$/g.exec(Me);return Ce?Ce[1]:""}function te(Me){var Ce=K(Me).toLowerCase();return se()[Ce]||""}function re(Me){return Me.search(/^(data:)/)!==-1}function ce(Me){return new Promise(function(Ce){for(var be=window.atob(Me.toDataURL().split(",")[1]),Ve=be.length,$e=new Uint8Array(Ve),Fe=0;Fe<Ve;Fe++)$e[Fe]=be.charCodeAt(Fe);Ce(new Blob([$e],{type:"image/png"}))})}function le(Me){return Me.toBlob?new Promise(function(Ce){Me.toBlob(Ce)}):ce(Me)}function ue(Me,Ce){var be=document.implementation.createHTMLDocument(),Ve=be.createElement("base");be.head.appendChild(Ve);var $e=be.createElement("a");return be.body.appendChild($e),Ve.href=Ce,$e.href=Me,$e.href}function _e(){var Me=0;return function(){return"u"+Ce()+Me++;function Ce(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function Ee(Me){return new Promise(function(Ce,be){var Ve=new Image;Ve.onload=function(){Ce(Ve)},Ve.onerror=be,Ve.src=Me})}function we(Me){var Ce=3e4;return g.impl.options.cacheBust&&(Me+=(/\?/.test(Me)?"&":"?")+new Date().getTime()),new Promise(function(be){var Ve=new XMLHttpRequest;Ve.onreadystatechange=je,Ve.ontimeout=De,Ve.responseType="blob",Ve.timeout=Ce,Ve.open("GET",Me,!0),Ve.send();var $e;if(g.impl.options.imagePlaceholder){var Fe=g.impl.options.imagePlaceholder.split(/,/);Fe&&Fe[1]&&($e=Fe[1])}function je(){if(Ve.readyState===4){if(Ve.status!==200){$e?be($e):Ie("cannot fetch resource: "+Me+", status: "+Ve.status);return}var Re=new FileReader;Re.onloadend=function(){var Ne=Re.result.split(/,/)[1];be(Ne)},Re.readAsDataURL(Ve.response)}}function De(){$e?be($e):Ie("timeout of "+Ce+"ms occured while fetching resource: "+Me)}function Ie(Re){console.error(Re),be("")}})}function de(Me,Ce){return"data:"+Ce+";base64,"+Me}function me(Me){return Me.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function xe(Me){return function(Ce){return new Promise(function(be){setTimeout(function(){be(Ce)},Me)})}}function pe(Me){for(var Ce=[],be=Me.length,Ve=0;Ve<be;Ve++)Ce.push(Me[Ve]);return Ce}function ve(Me){return Me.replace(/#/g,"%23").replace(/\n/g,"%0A")}function Oe(Me){var Ce=Le(Me,"border-left-width"),be=Le(Me,"border-right-width");return Me.scrollWidth+Ce+be}function Te(Me){var Ce=Le(Me,"border-top-width"),be=Le(Me,"border-bottom-width");return Me.scrollHeight+Ce+be}function Le(Me,Ce){var be=window.getComputedStyle(Me).getPropertyValue(Ce);return parseFloat(be.replace("px",""))}}function ee(){var se=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:ce,shouldProcess:K,impl:{readUrls:te,inline:re}};function K(le){return le.search(se)!==-1}function te(le){for(var ue=[],_e;(_e=se.exec(le))!==null;)ue.push(_e[1]);return ue.filter(function(Ee){return!n.isDataUrl(Ee)})}function re(le,ue,_e,Ee){return Promise.resolve(ue).then(function(de){return _e?n.resolveUrl(de,_e):de}).then(Ee||n.getAndEncode).then(function(de){return n.dataAsUrl(de,n.mimeType(ue))}).then(function(de){return le.replace(we(ue),"$1"+de+"$3")});function we(de){return new RegExp(`(url\\(['"]?)(`+n.escape(de)+`)(['"]?\\))`,"g")}}function ce(le,ue,_e){if(Ee())return Promise.resolve(le);return Promise.resolve(le).then(te).then(function(we){var de=Promise.resolve(le);return we.forEach(function(me){de=de.then(function(xe){return re(xe,me,ue,_e)})}),de});function Ee(){return!K(le)}}}function J(){return{resolveAll:se,impl:{readAll:K}};function se(){return K().then(function(te){return Promise.all(te.map(function(re){return re.resolve()}))}).then(function(te){return te.join(`
`)})}function K(){return Promise.resolve(n.asArray(document.styleSheets)).then(re).then(te).then(function(le){return le.map(ce)});function te(le){return le.filter(function(ue){return ue.type===CSSRule.FONT_FACE_RULE}).filter(function(ue){return s.shouldProcess(ue.style.getPropertyValue("src"))})}function re(le){var ue=[];return le.forEach(function(_e){try{n.asArray(_e.cssRules||[]).forEach(ue.push.bind(ue))}catch(Ee){console.log("Error while reading CSS rules from "+_e.href,Ee.toString())}}),ue}function ce(le){return{resolve:function(){var _e=(le.parentStyleSheet||{}).href;return s.inlineAll(le.cssText,_e)},src:function(){return le.style.getPropertyValue("src")}}}}}function ie(){return{inlineAll:K,impl:{newImage:se}};function se(te){return{inline:re};function re(ce){return n.isDataUrl(te.src)?Promise.resolve():Promise.resolve(te.src).then(ce||n.getAndEncode).then(function(le){return n.dataAsUrl(le,n.mimeType(te.src))}).then(function(le){return new Promise(function(ue,_e){te.onload=ue,te.onerror=_e,te.src=le})})}}function K(te){if(!(te instanceof Element))return Promise.resolve(te);return re(te).then(function(){return te instanceof HTMLImageElement?se(te).inline():Promise.all(n.asArray(te.childNodes).map(function(ce){return K(ce)}))});function re(ce){var le=ce.style.getPropertyValue("background");return le?s.inlineAll(le).then(function(ue){ce.style.setProperty("background",ue,ce.style.getPropertyPriority("background"))}).then(function(){return ce}):Promise.resolve(ce)}}}})()}(domToImage)),domToImage.exports}var domToImageExports=requireDomToImage();const domtoimage=getDefaultExportFromCjs(domToImageExports),formatDateToBrazilian=t=>{const e=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],n=t.getDate(),s=e[t.getMonth()],o=t.getFullYear(),u=t.getHours().toString().padStart(2,"0"),d=t.getMinutes().toString().padStart(2,"0");return`${n} de ${s} de ${o} às ${u}:${d}`},formatCompetitionRound=(t,e)=>{if(!t)return"Data não encontrada";if(t.league.round.startsWith("Club Friendlies"))return"Amistoso";if(e){const n=e[0][t.league.id][t.league.round];return`${t.league.name} - ${n}`}return""},convertToSaoPauloTime=t=>{const n=t.getTime()+t.getTimezoneOffset()*6e4;return new Date(n+-180*6e4)},PlayerSelector=({formation:t,selectedPlayers:e,onPlayersChange:n,reservePlayers:s,onReservePlayersChange:o,onOfficialStatusChange:u,maxReserves:d=7,isOfficialLineUp:g=!1})=>{const{players:y,loading:v}=useSquad(),[w,T]=reactExports.useState(""),[A,C]=reactExports.useState("ALL"),[j,D]=reactExports.useState(!1),H=()=>new Set(Object.values(e).filter(Boolean).map(re=>re.id)),ne=re=>{const ce=H();if(re==="GOL")return y.filter(_e=>_e.position==="GOL"&&!ce.has(_e.id)).sort((_e,Ee)=>parseInt(_e.number)-parseInt(Ee.number));const le=y.filter(_e=>_e.position===re&&!ce.has(_e.id)).sort((_e,Ee)=>parseInt(_e.number)-parseInt(Ee.number)),ue=y.filter(_e=>_e.position!=="GOL"&&_e.position!==re&&!ce.has(_e.id)).sort((_e,Ee)=>parseInt(_e.number)-parseInt(Ee.number));return{specificPositionPlayers:le,otherAvailablePlayers:ue}},Y=()=>{const re=new Set([...H(),...s.map(ce=>ce.id)]);return y.filter(ce=>!(re.has(ce.id)||w&&!ce.name.toLowerCase().includes(w.toLowerCase())&&!ce.number.toString().includes(w)||A!=="ALL"&&ce.position!==A)).sort((ce,le)=>parseInt(ce.number)-parseInt(le.number))},U=(re,ce)=>{const le=s.some(ue=>ue.id===ce.id);n({...e,[re]:ce}),le&&o(s.filter(ue=>ue.id!==ce.id))},ee=re=>{n({...e,[re]:null})},J=re=>{s.length<d&&o([...s,re])},ie=re=>{o(s.filter(ce=>ce.id!==re))},se=()=>{u(!g)};if(reactExports.useEffect(()=>{D(!!g)},[g]),v)return jsxRuntimeExports.jsx("div",{children:"Carregando..."});if(y.length===0)return jsxRuntimeExports.jsx("div",{children:"Nenhum jogador cadastrado."});const K=t.positions.every(re=>e[re.id]),te={GOL:t.positions.filter(re=>re.position==="GOL"),DEF:t.positions.filter(re=>re.position==="DEF"),MEI:t.positions.filter(re=>re.position==="MEI"),ATA:t.positions.filter(re=>re.position==="ATA")};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-display-bold text-gray-800 mb-2",children:["Selecionar Jogadores - ",t.displayName]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Escolha os jogadores para cada posição da formação"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-gray-700",children:"Progresso da Escalação"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-display text-gray-600",children:[Object.values(e).filter(Boolean).length," / ",t.positions.length]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all duration-300",style:{width:`${Object.values(e).filter(Boolean).length/t.positions.length*100}%`}})})]}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:Object.entries(te).map(([re,ce])=>ce.length===0?null:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-display-semibold text-gray-800 mb-4 flex items-center",children:[jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-full mr-3 ${re==="GOL"?"bg-yellow-500":re==="DEF"?"bg-blue-500":re==="MEI"?"bg-green-600":"bg-red-500"}`}),PLAYER_POSITIONS[re]," (",ce.length,")"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ce.map(le=>{const ue=e[le.id],_e=ne(le.position),Ee=le.position==="GOL",we=Ee?_e.length>0:_e.specificPositionPlayers.length>0||_e.otherAvailablePlayers.length>0;return jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-700",children:le.label}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-display-medium ${POSITION_COLORS[le.position]}`,children:PLAYER_POSITIONS[le.position]})]}),ue?jsxRuntimeExports.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-display-bold mr-3",children:ue.number}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-medium text-gray-800",children:ue.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 font-display",children:PLAYER_POSITIONS[ue.position]})]})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>ee(le.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:we?jsxRuntimeExports.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display",value:"",onChange:de=>{const me=y.find(xe=>xe.id===de.target.value);me&&U(le.id,me)},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Selecionar jogador..."}),Ee?_e.map(de=>jsxRuntimeExports.jsxs("option",{value:de.id,children:["#",de.number," ",de.name]},de.id)):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("optgroup",{label:PLAYER_POSITIONS[le.position],children:_e.specificPositionPlayers.map(de=>jsxRuntimeExports.jsxs("option",{value:de.id,children:["#",de.number," ",de.name]},de.id))}),_e.otherAvailablePlayers.length>0&&jsxRuntimeExports.jsx("optgroup",{label:"Outros Jogadores",children:_e.otherAvailablePlayers.map(de=>jsxRuntimeExports.jsxs("option",{value:de.id,children:["#",de.number," ",de.name]},de.id))})]})]}):jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-yellow-600 mx-auto mb-1"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-yellow-700 font-display",children:"Nenhum jogador disponível"})]})})]},le.id)})})]},re))}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-display-semibold text-gray-800",children:"Banco de Reservas"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 font-display",children:[s.length," / ",d]})]}),s.length>0&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:s.map(re=>jsxRuntimeExports.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-display-bold mr-2",children:re.number}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-800",children:re.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 font-display",children:PLAYER_POSITIONS[re.position]})]})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>ie(re.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:jsxRuntimeExports.jsx(X,{className:"w-3 h-3"})})]})},re.id))}),s.length<d&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar jogador para o banco...",value:w,onChange:re=>T(re.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg w-full"})]}),jsxRuntimeExports.jsxs("select",{value:A,onChange:re=>C(re.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"ALL",children:"Todas as posições"}),Object.entries(PLAYER_POSITIONS).map(([re,ce])=>jsxRuntimeExports.jsx("option",{value:re,children:ce},re))]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 max-h-40 overflow-y-auto",children:Y().map(re=>jsxRuntimeExports.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-2 hover:border-red-300 cursor-pointer",onClick:()=>J(re),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-display-bold mr-2",children:re.number}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-800 truncate",children:re.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 font-display",children:PLAYER_POSITIONS[re.position]})]})]})},re.id))})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800",children:"Status da Escalação"}),jsxRuntimeExports.jsx("p",{className:"font-display text-sm text-gray-600",children:j?"Esta é uma escalação oficial.":"Isto é uma previsão de escalação."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:`font-display text-sm ${j?"text-gray-500":"text-red-600 font-display-semibold"}`,children:"Previsão"}),jsxRuntimeExports.jsx("button",{onClick:se,className:`cursor-pointer relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${j?"bg-red-600":"bg-gray-300"}`,role:"switch","aria-checked":j,children:jsxRuntimeExports.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${j?"translate-x-6":"translate-x-1"}`})}),jsxRuntimeExports.jsx("span",{className:`font-display text-sm ${j?"text-red-600 font-display-semibold":"text-gray-500"}`,children:"Oficial"})]})]})}),K&&jsxRuntimeExports.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Check,{className:"w-5 h-5 text-green-600 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-green-700 font-display-medium",children:"Escalação completa!"})]})})]})},StepperResponsive=({steps:t,currentStep:e,onStepClick:n,canAdvanceToStep:s})=>jsxRuntimeExports.jsx("div",{className:"w-full mb-8",children:jsxRuntimeExports.jsx("div",{className:"flex items-center",children:t.map((o,u)=>{const d=e>o.id,g=e===o.id,y=s(o.id);return jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>y&&n(o.id),disabled:!y,className:cn("flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all shrink-0",{"bg-green-600 border-green-600 text-white":d,"bg-red-600 border-red-600 text-white":g,"border-gray-300 text-gray-500 hover:border-red-500":!g&&!d&&y,"border-gray-200 text-gray-300 cursor-not-allowed":!y,"cursor-pointer":y}),children:d?jsxRuntimeExports.jsx(Check,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(o.icon,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("p",{className:cn("hidden md:block text-xs md:text-sm font-display-medium w-20 md:w-auto truncate md:whitespace-normal",{"text-red-600":g,"text-green-600":d,"text-gray-500":!g&&!d}),children:o.title}),jsxRuntimeExports.jsx("p",{className:"hidden md:block text-xs text-gray-500 font-display",children:o.description})]})]}),u<t.length-1&&jsxRuntimeExports.jsx("div",{className:cn("flex-1 h-px mx-2 md:mx-4",{"bg-green-500":d,"bg-gray-300":!d})})]},o.id)})})}),GameArtSelector=({onArtSelect:t,escalacaoData:e,offPlayer:n=!1,showChannelLogoSelection:s=!1,setShowChannelLogoSelection:o,selectedChannelLogos:u,onToggleChannelLogo:d,allChannelLogos:g})=>{var ee,J,ie,se,K,te,re,ce,le;const{gameArt:y}=useImages(),{players:v}=useSquad(),[w,T]=reactExports.useState(((ee=e.featuredPlayer)==null?void 0:ee.id)||""),[A,C]=reactExports.useState(e.featuredPlayerImgIndex||0),[j,D]=reactExports.useState(((ie=(J=e.featuredPlayer)==null?void 0:J.imgUrl)==null?void 0:ie[0])||""),H=v.filter(ue=>ue.imgUrl&&ue.imgUrl.length>0);reactExports.useEffect(()=>{if(y&&n&&t(y.url,null,null),w&&y&&j){const ue=v.find(_e=>_e.id===w);ue&&t(y.url,ue,j)}},[j,y,w,n,v]);const ne=ue=>{T(ue),C(0);const _e=v.find(Ee=>Ee.id===ue);_e&&_e.imgUrl&&_e.imgUrl.length>0&&D(_e.imgUrl[0])},Y=ue=>{C(ue);const _e=v.find(Ee=>Ee.id===w);_e&&_e.imgUrl&&_e.imgUrl[ue]&&D(_e.imgUrl[ue])},U=ue=>(u==null?void 0:u.some(_e=>_e.id===ue.id))||!1;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800 mb-2",children:n?"Canais de transmissão":s?"Jogador Destaque e Canais de transmissão":"Jogador Destaque"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:n?s?"Escolha os canais que transmitirão o jogo":"":s?"Selecione o jogador destaque e/ou as logos dos canais que transmitirão o jogo":"Selecione o jogador destaque"})]}),g&&u&&o&&d&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-display-semibold text-gray-800 flex items-center",children:[jsxRuntimeExports.jsx(Image$2,{className:"w-5 h-5 mr-2 text-red-600"}),"Logos de Canais"]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800",children:"Adicionar logos dos canais?"}),jsxRuntimeExports.jsx("p",{className:"font-display text-sm text-gray-600",children:s?"Adicionando as logos na arte.":"Logos não serão adicionadas a arte."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:`font-display text-sm ${s?"text-gray-500":"text-red-600 font-display-semibold"}`,children:"Não adicionar"}),jsxRuntimeExports.jsx("button",{onClick:()=>o(!s),className:`cursor-pointer relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s?"bg-red-600":"bg-gray-300"}`,role:"switch","aria-checked":s,children:jsxRuntimeExports.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})}),jsxRuntimeExports.jsx("span",{className:`font-display text-sm ${s?"text-red-600 font-display-semibold":"text-gray-500"}`,children:"Adicionar"})]})]})}),s&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:g.length===0?jsxRuntimeExports.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-yellow-600 mr-2"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-800 font-display-medium",children:"Nenhuma logo de canal disponível."})]})}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-4",children:g.sort((ue,_e)=>ue.name.localeCompare(_e.name)).map(ue=>jsxRuntimeExports.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 transition-all p-2 flex flex-col items-center justify-center text-center
                        ${U(ue)?"border-red-500 ring-2 ring-red-200 bg-red-300":"border-gray-200 hover:border-red-300 bg-red-100"}`,onClick:()=>d(ue),children:[jsxRuntimeExports.jsx("img",{src:ue.logoUrl||"",alt:`${ue.name} Logo`,className:"w-16 h-16 object-contain mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-xs font-display-medium text-gray-700 truncate w-full px-1",children:ue.name}),U(ue)&&jsxRuntimeExports.jsx("div",{className:"absolute top-1 right-1 bg-red-600 rounded-full p-0.5",children:jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-white"})})]},ue.id))})})]}),!n&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-display-semibold text-gray-800 flex items-center",children:[jsxRuntimeExports.jsx(User,{className:"w-5 h-5 mr-2 text-red-600"}),"Jogador Destaque"]}),H.length===0?jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-yellow-600 mr-2"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-800 font-display-medium",children:"Nenhum jogador com imagem disponível"})]}),jsxRuntimeExports.jsx("p",{className:"text-yellow-700 text-sm mt-1 font-display",children:"Adicione imagens aos jogadores na seção de administração do elenco."})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Selecionar Jogador"}),jsxRuntimeExports.jsxs("select",{value:w,onChange:ue=>ne(ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Selecione um jogador..."}),H.map(ue=>{var _e,Ee;return jsxRuntimeExports.jsxs("option",{value:ue.id,children:[ue.number," - ",ue.name," (",(_e=ue.imgUrl)==null?void 0:_e.length," ","image",((Ee=ue.imgUrl)==null?void 0:Ee.length)!==1?"ns":"m",")"]},ue.id)})]})]}),w&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Selecionar Imagem"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-3",children:(K=(se=v.find(ue=>ue.id===w))==null?void 0:se.imgUrl)==null?void 0:K.map((ue,_e)=>{var Ee;return jsxRuntimeExports.jsxs("div",{onClick:()=>Y(_e),className:`relative cursor-pointer rounded-lg border-2 transition-all ${A===_e?"border-red-500 ring-2 ring-red-200":"border-gray-200 hover:border-red-300"}`,children:[jsxRuntimeExports.jsx("img",{src:ue,alt:`${(Ee=v.find(we=>we.id===w))==null?void 0:Ee.name} - Imagem ${_e+1}`,className:"w-full h-32 object-cover rounded-lg"}),A===_e&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-red-600 bg-white rounded-full"})}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded font-display",children:["Imagem ",_e+1]})]},_e)})})]}),w&&jsxRuntimeExports.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-600 mr-2"}),jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-green-800",children:"Jogador Destaque Selecionado"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("img",{src:(re=(te=v.find(ue=>ue.id===w))==null?void 0:te.imgUrl)==null?void 0:re[A],alt:"Jogador destaque",className:"w-16 h-16 object-cover rounded-lg border"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-semibold text-green-800",children:(ce=v.find(ue=>ue.id===w))==null?void 0:ce.name}),jsxRuntimeExports.jsxs("p",{className:"text-green-700 text-sm font-display",children:["Número"," ",(le=v.find(ue=>ue.id===w))==null?void 0:le.number," ","• Imagem ",A+1]})]})]})]})]})]})]})},FORMATIONS=[{id:"4-3-3",name:"4-3-3",displayName:"4-3-3 (Clássico)",description:"Formação ofensiva com 3 atacantes",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"rb",x:80,y:20,position:"DEF",label:"RB"},{id:"cb1",x:60,y:20,position:"DEF",label:"CB"},{id:"cb2",x:40,y:20,position:"DEF",label:"CB"},{id:"lb",x:20,y:20,position:"DEF",label:"LB"},{id:"cdm",x:50,y:40,position:"MEI",label:"CDM"},{id:"cm1",x:35,y:50,position:"MEI",label:"CM"},{id:"cm2",x:65,y:50,position:"MEI",label:"CM"},{id:"lw",x:25,y:75,position:"ATA",label:"LW"},{id:"st",x:50,y:80,position:"ATA",label:"ST"},{id:"rw",x:75,y:75,position:"ATA",label:"RW"}]},{id:"4-4-2",name:"4-4-2",displayName:"4-4-2 (Equilibrado)",description:"Formação equilibrada com 2 atacantes",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"rb",x:80,y:20,position:"DEF",label:"RB"},{id:"cb1",x:60,y:20,position:"DEF",label:"CB"},{id:"cb2",x:40,y:20,position:"DEF",label:"CB"},{id:"lb",x:20,y:20,position:"DEF",label:"LB"},{id:"rm",x:80,y:50,position:"MEI",label:"RM"},{id:"cm1",x:60,y:45,position:"MEI",label:"CM"},{id:"cm2",x:40,y:45,position:"MEI",label:"CM"},{id:"lm",x:20,y:50,position:"MEI",label:"LM"},{id:"st1",x:40,y:75,position:"ATA",label:"ST"},{id:"st2",x:60,y:75,position:"ATA",label:"ST"}]},{id:"3-5-2",name:"3-5-2",displayName:"3-5-2 (Defensivo)",description:"Formação com 3 zagueiros e meio-campo forte",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"cb1",x:70,y:20,position:"DEF",label:"CB"},{id:"cb2",x:50,y:18,position:"DEF",label:"CB"},{id:"cb3",x:30,y:20,position:"DEF",label:"CB"},{id:"rwb",x:85,y:40,position:"DEF",label:"RWB"},{id:"cm1",x:65,y:50,position:"MEI",label:"CM"},{id:"cdm",x:50,y:45,position:"MEI",label:"CDM"},{id:"cm2",x:35,y:50,position:"MEI",label:"CM"},{id:"lwb",x:15,y:40,position:"DEF",label:"LWB"},{id:"st1",x:40,y:75,position:"ATA",label:"ST"},{id:"st2",x:60,y:75,position:"ATA",label:"ST"}]},{id:"4-2-3-1",name:"4-2-3-1",displayName:"4-2-3-1 (Moderno)",description:"Formação moderna com meio-campo criativo",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"rb",x:80,y:20,position:"DEF",label:"RB"},{id:"cb1",x:60,y:20,position:"DEF",label:"CB"},{id:"cb2",x:40,y:20,position:"DEF",label:"CB"},{id:"lb",x:20,y:20,position:"DEF",label:"LB"},{id:"cdm1",x:40,y:40,position:"MEI",label:"CDM"},{id:"cdm2",x:60,y:40,position:"MEI",label:"CDM"},{id:"lam",x:25,y:60,position:"MEI",label:"LAM"},{id:"cam",x:50,y:65,position:"MEI",label:"CAM"},{id:"ram",x:75,y:60,position:"MEI",label:"RAM"},{id:"st",x:50,y:80,position:"ATA",label:"ST"}]},{id:"3-4-3",name:"3-4-3",displayName:"3-4-3 (Ofensivo)",description:"Formação muito ofensiva com 3 atacantes",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"cb1",x:70,y:20,position:"DEF",label:"CB"},{id:"cb2",x:50,y:18,position:"DEF",label:"CB"},{id:"cb3",x:30,y:20,position:"DEF",label:"CB"},{id:"rm",x:80,y:45,position:"MEI",label:"RM"},{id:"cm1",x:60,y:50,position:"MEI",label:"CM"},{id:"cm2",x:40,y:50,position:"MEI",label:"CM"},{id:"lm",x:20,y:45,position:"MEI",label:"LM"},{id:"rw",x:75,y:75,position:"ATA",label:"RW"},{id:"st",x:50,y:80,position:"ATA",label:"ST"},{id:"lw",x:25,y:75,position:"ATA",label:"LW"}]},{id:"5-3-2",name:"5-3-2",displayName:"5-3-2 (Ultra Defensivo)",description:"Formação muito defensiva com 5 defensores",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"rwb",x:85,y:25,position:"DEF",label:"RWB"},{id:"cb1",x:65,y:20,position:"DEF",label:"CB"},{id:"cb2",x:50,y:18,position:"DEF",label:"CB"},{id:"cb3",x:35,y:20,position:"DEF",label:"CB"},{id:"lwb",x:15,y:25,position:"DEF",label:"LWB"},{id:"cm1",x:35,y:55,position:"MEI",label:"CM"},{id:"cdm",x:50,y:50,position:"MEI",label:"CDM"},{id:"cm2",x:65,y:55,position:"MEI",label:"CM"},{id:"st1",x:40,y:75,position:"ATA",label:"ST"},{id:"st2",x:60,y:75,position:"ATA",label:"ST"}]},{id:"4-1-4-1",name:"4-1-4-1",displayName:"4-1-4-1 (Controle)",description:"Formação com volante de contenção",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"rb",x:80,y:20,position:"DEF",label:"RB"},{id:"cb1",x:60,y:20,position:"DEF",label:"CB"},{id:"cb2",x:40,y:20,position:"DEF",label:"CB"},{id:"lb",x:20,y:20,position:"DEF",label:"LB"},{id:"cdm",x:50,y:35,position:"MEI",label:"CDM"},{id:"rm",x:80,y:55,position:"MEI",label:"RM"},{id:"cm1",x:60,y:50,position:"MEI",label:"CM"},{id:"cm2",x:40,y:50,position:"MEI",label:"CM"},{id:"lm",x:20,y:55,position:"MEI",label:"LM"},{id:"st",x:50,y:80,position:"ATA",label:"ST"}]}],getPositionsByType=(t,e)=>t.positions.filter(n=>n.position===e),FormationSelector=({selectedFormation:t,onFormationSelect:e})=>{const[n,s]=reactExports.useState(null),o=({formation:d,isSelected:g=!1,isHovered:y=!1})=>jsxRuntimeExports.jsxs("div",{className:"relative w-32 h-48 bg-green-100 rounded-lg overflow-hidden border-2 border-green-200",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-px h-full bg-green-300"}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 border border-green-300 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-16 h-6 border-t border-l border-r border-green-300"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-8 h-3 border-t border-l border-r border-green-300"})]}),d.positions.map(w=>jsxRuntimeExports.jsx("div",{className:`absolute w-3 h-3 rounded-full transform -translate-x-1/2 -translate-y-1/2 ${w.position==="GOL"?"bg-yellow-500":w.position==="DEF"?"bg-blue-500":w.position==="MEI"?"bg-green-600":"bg-red-500"}`,style:{left:`${w.x*.8}%`,top:`${(100-w.y)*.8+10}%`}},w.id)),g&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-red-500 bg-opacity-20 border-2 border-red-500 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(Check,{className:"w-6 h-6 text-red-600"})}),y&&!g&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-10 border-2 border-gray-400 rounded-lg"})]}),u=d=>({GOL:getPositionsByType(d,"GOL").length,DEF:getPositionsByType(d,"DEF").length,MEI:getPositionsByType(d,"MEI").length,ATA:getPositionsByType(d,"ATA").length});return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-bold text-gray-800 mb-2",children:"Escolher Formação Tática"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Selecione a formação que será usada na escalação"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:FORMATIONS.map(d=>{const g=(t==null?void 0:t.id)===d.id,y=(n==null?void 0:n.id)===d.id,v=u(d);return jsxRuntimeExports.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 cursor-pointer transition-all hover:shadow-lg ${g?"border-red-500 shadow-lg":"border-gray-200 hover:border-red-300"}`,onClick:()=>e(d),onMouseEnter:()=>s(d),onMouseLeave:()=>s(null),children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-3",children:jsxRuntimeExports.jsx(o,{formation:d,isSelected:g,isHovered:y})}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800 text-sm",children:d.displayName}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 font-display mt-1",children:d.description})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-1 text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mx-auto mb-1"}),jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-600",children:v.GOL})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mx-auto mb-1"}),jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-600",children:v.DEF})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full mx-auto mb-1"}),jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-600",children:v.MEI})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mx-auto mb-1"}),jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-600",children:v.ATA})]})]})]},d.id)})}),t&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(o,{formation:t,isSelected:!0})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-display-semibold text-gray-800 mb-2",children:t.displayName}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display mb-4",children:t.description}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(PLAYER_POSITIONS).map(([d,g])=>{const y=getPositionsByType(t,d).length;return y===0?null:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-full mx-auto mb-1 ${d==="GOL"?"bg-yellow-500":d==="DEF"?"bg-blue-500":d==="MEI"?"bg-green-600":"bg-red-500"}`}),jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-800",children:y}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 font-display",children:g})]},d)})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-3",children:[jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 text-gray-500 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-gray-700",children:"Legenda das Posições"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),jsxRuntimeExports.jsx("span",{className:"font-display text-gray-600",children:"Goleiro"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),jsxRuntimeExports.jsx("span",{className:"font-display text-gray-600",children:"Defensor"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full mr-2"}),jsxRuntimeExports.jsx("span",{className:"font-display text-gray-600",children:"Meio-campo"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),jsxRuntimeExports.jsx("span",{className:"font-display text-gray-600",children:"Atacante"})]})]})]})]})},API_BASE_URL$1="https://v3.football.api-sports.io",API_KEY$1="a3a4a4cc8c8f42b486a8e6abf0f3f892",API_HOST$1="v3.football.api-sports.io",fetchData$1=async t=>{try{const e=await fetch(t,{method:"GET",headers:{"x-rapidapi-host":API_HOST$1,"x-apisports-key":API_KEY$1,"Content-Type":"application/json"}});return e.ok?{success:!0,data:await e.json()}:{success:!1,error:`API Error: ${e.status} - ${e.statusText}`}}catch(e){return console.error("Fetch error:",e),{success:!1,error:"Network error or API connection issue."}}},useTeamCodes=()=>{const[t,e]=reactExports.useState({}),[n,s]=reactExports.useState(!0),[o,u]=reactExports.useState(null);return reactExports.useEffect(()=>{(async()=>{s(!0),u(null);try{const y=doc(db,"teamCodes","codes"),v=await getDoc(y);v.exists()?e(v.data()):(console.log("Documento 'codes' não encontrado no Firebase, criando um novo."),await setDoc(y,{}))}catch(y){console.error("Erro ao carregar cache do Firebase:",y),u("Falha ao carregar códigos de times do cache.")}finally{s(!1)}})()},[]),{getTeamCode:reactExports.useCallback(async(g,y)=>{if(t[g])return t[g];try{const v=doc(db,"teamCodes","codes"),w=await getDoc(v),T=w.exists()?w.data():{};if(T[g])return e(A=>({...A,[g]:T[g]})),T[g]}catch(v){console.error("Erro ao buscar código no Firebase durante getTeamCode:",v)}try{s(!0);const v=`${API_BASE_URL$1}/teams?id=${g}`,w=await fetchData$1(v);if(w.success&&w.data&&w.data.response.length>0){const T=w.data.response[0].team.code;if(T){const A=doc(db,"teamCodes","codes");return await setDoc(A,{...t,[g]:T},{merge:!0}),e(C=>({...C,[g]:T})),T}else{const A=y.substring(0,3).toUpperCase(),C=doc(db,"teamCodes","codes");return await setDoc(C,{...t,[g]:A},{merge:!0}),e(j=>({...j,[g]:A})),A}}else return u(w.error||`Não foi possível obter o código para o time ${y}.`),y.substring(0,3).toUpperCase()}catch(v){return console.error("Erro ao buscar código na API:",v),u(`Falha ao buscar código para ${y} na API.`),y.substring(0,3).toUpperCase()}finally{s(!1)}},[t]),loading:n,error:o}};function Textarea({className:t,...e}){return jsxRuntimeExports.jsx("textarea",{"data-slot":"textarea",className:cn("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}function composeEventHandlers(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function createContextScope(t,e=[]){let n=[];function s(u,d){const g=reactExports.createContext(d),y=n.length;n=[...n,d];const v=T=>{var ne;const{scope:A,children:C,...j}=T,D=((ne=A==null?void 0:A[t])==null?void 0:ne[y])||g,H=reactExports.useMemo(()=>j,Object.values(j));return jsxRuntimeExports.jsx(D.Provider,{value:H,children:C})};v.displayName=u+"Provider";function w(T,A){var D;const C=((D=A==null?void 0:A[t])==null?void 0:D[y])||g,j=reactExports.useContext(C);if(j)return j;if(d!==void 0)return d;throw new Error(`\`${T}\` must be used within \`${u}\``)}return[v,w]}const o=()=>{const u=n.map(d=>reactExports.createContext(d));return function(g){const y=(g==null?void 0:g[t])||u;return reactExports.useMemo(()=>({[`__scope${t}`]:{...g,[t]:y}}),[g,y])}};return o.scopeName=t,[s,composeContextScopes(o,...e)]}function composeContextScopes(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(u){const d=s.reduce((g,{useScope:y,scopeName:v})=>{const T=y(u)[`__scope${v}`];return{...g,...T}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:d}),[d])}};return n.scopeName=e.scopeName,n}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((t,e)=>{const n=createSlot(`Primitive.${e}`),s=reactExports.forwardRef((o,u)=>{const{asChild:d,...g}=o,y=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(y,{...g,ref:u})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function dispatchDiscreteCustomEvent(t,e){t&&reactDomExports.flushSync(()=>t.dispatchEvent(e))}function useCallbackRef$1(t){const e=reactExports.useRef(t);return reactExports.useEffect(()=>{e.current=t}),reactExports.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function useEscapeKeydown(t,e=globalThis==null?void 0:globalThis.document){const n=useCallbackRef$1(t);reactExports.useEffect(()=>{const s=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:u,onInteractOutside:d,onDismiss:g,...y}=t,v=reactExports.useContext(DismissableLayerContext),[w,T]=reactExports.useState(null),A=(w==null?void 0:w.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,C]=reactExports.useState({}),j=useComposedRefs(e,se=>T(se)),D=Array.from(v.layers),[H]=[...v.layersWithOutsidePointerEventsDisabled].slice(-1),ne=D.indexOf(H),Y=w?D.indexOf(w):-1,U=v.layersWithOutsidePointerEventsDisabled.size>0,ee=Y>=ne,J=usePointerDownOutside(se=>{const K=se.target,te=[...v.branches].some(re=>re.contains(K));!ee||te||(o==null||o(se),d==null||d(se),se.defaultPrevented||g==null||g())},A),ie=useFocusOutside(se=>{const K=se.target;[...v.branches].some(re=>re.contains(K))||(u==null||u(se),d==null||d(se),se.defaultPrevented||g==null||g())},A);return useEscapeKeydown(se=>{Y===v.layers.size-1&&(s==null||s(se),!se.defaultPrevented&&g&&(se.preventDefault(),g()))},A),reactExports.useEffect(()=>{if(w)return n&&(v.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),v.layersWithOutsidePointerEventsDisabled.add(w)),v.layers.add(w),dispatchUpdate(),()=>{n&&v.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=originalBodyPointerEvents)}},[w,A,n,v]),reactExports.useEffect(()=>()=>{w&&(v.layers.delete(w),v.layersWithOutsidePointerEventsDisabled.delete(w),dispatchUpdate())},[w,v]),reactExports.useEffect(()=>{const se=()=>C({});return document.addEventListener(CONTEXT_UPDATE,se),()=>document.removeEventListener(CONTEXT_UPDATE,se)},[]),jsxRuntimeExports.jsx(Primitive.div,{...y,ref:j,style:{pointerEvents:U?ee?"auto":"none":void 0,...t.style},onFocusCapture:composeEventHandlers(t.onFocusCapture,ie.onFocusCapture),onBlurCapture:composeEventHandlers(t.onBlurCapture,ie.onBlurCapture),onPointerDownCapture:composeEventHandlers(t.onPointerDownCapture,J.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((t,e)=>{const n=reactExports.useContext(DismissableLayerContext),s=reactExports.useRef(null),o=useComposedRefs(e,s);return reactExports.useEffect(()=>{const u=s.current;if(u)return n.branches.add(u),()=>{n.branches.delete(u)}},[n.branches]),jsxRuntimeExports.jsx(Primitive.div,{...t,ref:o})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(t,e=globalThis==null?void 0:globalThis.document){const n=useCallbackRef$1(t),s=reactExports.useRef(!1),o=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const u=g=>{if(g.target&&!s.current){let y=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,n,v,{discrete:!0})};const v={originalEvent:g};g.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=y,e.addEventListener("click",o.current,{once:!0})):y()}else e.removeEventListener("click",o.current);s.current=!1},d=window.setTimeout(()=>{e.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",u),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function useFocusOutside(t,e=globalThis==null?void 0:globalThis.document){const n=useCallbackRef$1(t),s=reactExports.useRef(!1);return reactExports.useEffect(()=>{const o=u=>{u.target&&!s.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,n,{originalEvent:u},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function dispatchUpdate(){const t=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(t)}function handleAndDispatchCustomEvent(t,e,n,{discrete:s}){const o=n.originalEvent.target,u=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),s?dispatchDiscreteCustomEvent(o,u):o.dispatchEvent(u)}var count$1=0;function useFocusGuards(){reactExports.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",t[1]??createFocusGuard()),count$1++,()=>{count$1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),count$1--}},[])}function createFocusGuard(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:o,onUnmountAutoFocus:u,...d}=t,[g,y]=reactExports.useState(null),v=useCallbackRef$1(o),w=useCallbackRef$1(u),T=reactExports.useRef(null),A=useComposedRefs(e,D=>y(D)),C=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(s){let D=function(U){if(C.paused||!g)return;const ee=U.target;g.contains(ee)?T.current=ee:focus(T.current,{select:!0})},H=function(U){if(C.paused||!g)return;const ee=U.relatedTarget;ee!==null&&(g.contains(ee)||focus(T.current,{select:!0}))},ne=function(U){if(document.activeElement===document.body)for(const J of U)J.removedNodes.length>0&&focus(g)};document.addEventListener("focusin",D),document.addEventListener("focusout",H);const Y=new MutationObserver(ne);return g&&Y.observe(g,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",D),document.removeEventListener("focusout",H),Y.disconnect()}}},[s,g,C.paused]),reactExports.useEffect(()=>{if(g){focusScopesStack.add(C);const D=document.activeElement;if(!g.contains(D)){const ne=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS);g.addEventListener(AUTOFOCUS_ON_MOUNT,v),g.dispatchEvent(ne),ne.defaultPrevented||(focusFirst(removeLinks(getTabbableCandidates(g)),{select:!0}),document.activeElement===D&&focus(g))}return()=>{g.removeEventListener(AUTOFOCUS_ON_MOUNT,v),setTimeout(()=>{const ne=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS);g.addEventListener(AUTOFOCUS_ON_UNMOUNT,w),g.dispatchEvent(ne),ne.defaultPrevented||focus(D??document.body,{select:!0}),g.removeEventListener(AUTOFOCUS_ON_UNMOUNT,w),focusScopesStack.remove(C)},0)}}},[g,v,w,C]);const j=reactExports.useCallback(D=>{if(!n&&!s||C.paused)return;const H=D.key==="Tab"&&!D.altKey&&!D.ctrlKey&&!D.metaKey,ne=document.activeElement;if(H&&ne){const Y=D.currentTarget,[U,ee]=getTabbableEdges(Y);U&&ee?!D.shiftKey&&ne===ee?(D.preventDefault(),n&&focus(U,{select:!0})):D.shiftKey&&ne===U&&(D.preventDefault(),n&&focus(ee,{select:!0})):ne===Y&&D.preventDefault()}},[n,s,C.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...d,ref:A,onKeyDown:j})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(focus(s,{select:e}),document.activeElement!==n)return}function getTabbableEdges(t){const e=getTabbableCandidates(t),n=findVisible(e,t),s=findVisible(e.reverse(),t);return[n,s]}function getTabbableCandidates(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function findVisible(t,e){for(const n of t)if(!isHidden(n,{upTo:e}))return n}function isHidden(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function isSelectableInput(t){return t instanceof HTMLInputElement&&"select"in t}function focus(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&isSelectableInput(t)&&e&&t.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=arrayRemove(t,e),t.unshift(e)},remove(e){var n;t=arrayRemove(t,e),(n=t[0])==null||n.resume()}}}function arrayRemove(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function removeLinks(t){return t.filter(e=>e.tagName!=="A")}var useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},useReactId=React$1[" useId ".trim().toString()]||(()=>{}),count=0;function useId(t){const[e,n]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{n(s=>s??String(count++))},[t]),t||(e?`radix-${e}`:"")}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round$1=Math.round,floor=Math.floor,createCoords=t=>({x:t,y:t}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(t,e,n){return max(t,min(e,n))}function evaluate(t,e){return typeof t=="function"?t(e):t}function getSide(t){return t.split("-")[0]}function getAlignment(t){return t.split("-")[1]}function getOppositeAxis(t){return t==="x"?"y":"x"}function getAxisLength(t){return t==="y"?"height":"width"}function getSideAxis(t){return["top","bottom"].includes(getSide(t))?"y":"x"}function getAlignmentAxis(t){return getOppositeAxis(getSideAxis(t))}function getAlignmentSides(t,e,n){n===void 0&&(n=!1);const s=getAlignment(t),o=getAlignmentAxis(t),u=getAxisLength(o);let d=o==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[u]>e.floating[u]&&(d=getOppositePlacement(d)),[d,getOppositePlacement(d)]}function getExpandedPlacements(t){const e=getOppositePlacement(t);return[getOppositeAlignmentPlacement(t),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(t){return t.replace(/start|end/g,e=>oppositeAlignmentMap[e])}function getSideList(t,e,n){const s=["left","right"],o=["right","left"],u=["top","bottom"],d=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:s:e?s:o;case"left":case"right":return e?u:d;default:return[]}}function getOppositeAxisPlacements(t,e,n,s){const o=getAlignment(t);let u=getSideList(getSide(t),n==="start",s);return o&&(u=u.map(d=>d+"-"+o),e&&(u=u.concat(u.map(getOppositeAlignmentPlacement)))),u}function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(t){return{top:0,right:0,bottom:0,left:0,...t}}function getPaddingObject(t){return typeof t!="number"?expandPaddingObject(t):{top:t,right:t,bottom:t,left:t}}function rectToClientRect(t){const{x:e,y:n,width:s,height:o}=t;return{width:s,height:o,top:n,left:e,right:e+s,bottom:n+o,x:e,y:n}}function computeCoordsFromPlacement(t,e,n){let{reference:s,floating:o}=t;const u=getSideAxis(e),d=getAlignmentAxis(e),g=getAxisLength(d),y=getSide(e),v=u==="y",w=s.x+s.width/2-o.width/2,T=s.y+s.height/2-o.height/2,A=s[g]/2-o[g]/2;let C;switch(y){case"top":C={x:w,y:s.y-o.height};break;case"bottom":C={x:w,y:s.y+s.height};break;case"right":C={x:s.x+s.width,y:T};break;case"left":C={x:s.x-o.width,y:T};break;default:C={x:s.x,y:s.y}}switch(getAlignment(e)){case"start":C[d]-=A*(n&&v?-1:1);break;case"end":C[d]+=A*(n&&v?-1:1);break}return C}const computePosition$1=async(t,e,n)=>{const{placement:s="bottom",strategy:o="absolute",middleware:u=[],platform:d}=n,g=u.filter(Boolean),y=await(d.isRTL==null?void 0:d.isRTL(e));let v=await d.getElementRects({reference:t,floating:e,strategy:o}),{x:w,y:T}=computeCoordsFromPlacement(v,s,y),A=s,C={},j=0;for(let D=0;D<g.length;D++){const{name:H,fn:ne}=g[D],{x:Y,y:U,data:ee,reset:J}=await ne({x:w,y:T,initialPlacement:s,placement:A,strategy:o,middlewareData:C,rects:v,platform:d,elements:{reference:t,floating:e}});w=Y??w,T=U??T,C={...C,[H]:{...C[H],...ee}},J&&j<=50&&(j++,typeof J=="object"&&(J.placement&&(A=J.placement),J.rects&&(v=J.rects===!0?await d.getElementRects({reference:t,floating:e,strategy:o}):J.rects),{x:w,y:T}=computeCoordsFromPlacement(v,A,y)),D=-1)}return{x:w,y:T,placement:A,strategy:o,middlewareData:C}};async function detectOverflow(t,e){var n;e===void 0&&(e={});const{x:s,y:o,platform:u,rects:d,elements:g,strategy:y}=t,{boundary:v="clippingAncestors",rootBoundary:w="viewport",elementContext:T="floating",altBoundary:A=!1,padding:C=0}=evaluate(e,t),j=getPaddingObject(C),H=g[A?T==="floating"?"reference":"floating":T],ne=rectToClientRect(await u.getClippingRect({element:(n=await(u.isElement==null?void 0:u.isElement(H)))==null||n?H:H.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(g.floating)),boundary:v,rootBoundary:w,strategy:y})),Y=T==="floating"?{x:s,y:o,width:d.floating.width,height:d.floating.height}:d.reference,U=await(u.getOffsetParent==null?void 0:u.getOffsetParent(g.floating)),ee=await(u.isElement==null?void 0:u.isElement(U))?await(u.getScale==null?void 0:u.getScale(U))||{x:1,y:1}:{x:1,y:1},J=rectToClientRect(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:g,rect:Y,offsetParent:U,strategy:y}):Y);return{top:(ne.top-J.top+j.top)/ee.y,bottom:(J.bottom-ne.bottom+j.bottom)/ee.y,left:(ne.left-J.left+j.left)/ee.x,right:(J.right-ne.right+j.right)/ee.x}}const arrow$3=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:o,rects:u,platform:d,elements:g,middlewareData:y}=e,{element:v,padding:w=0}=evaluate(t,e)||{};if(v==null)return{};const T=getPaddingObject(w),A={x:n,y:s},C=getAlignmentAxis(o),j=getAxisLength(C),D=await d.getDimensions(v),H=C==="y",ne=H?"top":"left",Y=H?"bottom":"right",U=H?"clientHeight":"clientWidth",ee=u.reference[j]+u.reference[C]-A[C]-u.floating[j],J=A[C]-u.reference[C],ie=await(d.getOffsetParent==null?void 0:d.getOffsetParent(v));let se=ie?ie[U]:0;(!se||!await(d.isElement==null?void 0:d.isElement(ie)))&&(se=g.floating[U]||u.floating[j]);const K=ee/2-J/2,te=se/2-D[j]/2-1,re=min(T[ne],te),ce=min(T[Y],te),le=re,ue=se-D[j]-ce,_e=se/2-D[j]/2+K,Ee=clamp(le,_e,ue),we=!y.arrow&&getAlignment(o)!=null&&_e!==Ee&&u.reference[j]/2-(_e<le?re:ce)-D[j]/2<0,de=we?_e<le?_e-le:_e-ue:0;return{[C]:A[C]+de,data:{[C]:Ee,centerOffset:_e-Ee-de,...we&&{alignmentOffset:de}},reset:we}}}),flip$2=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:o,middlewareData:u,rects:d,initialPlacement:g,platform:y,elements:v}=e,{mainAxis:w=!0,crossAxis:T=!0,fallbackPlacements:A,fallbackStrategy:C="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:D=!0,...H}=evaluate(t,e);if((n=u.arrow)!=null&&n.alignmentOffset)return{};const ne=getSide(o),Y=getSideAxis(g),U=getSide(g)===g,ee=await(y.isRTL==null?void 0:y.isRTL(v.floating)),J=A||(U||!D?[getOppositePlacement(g)]:getExpandedPlacements(g)),ie=j!=="none";!A&&ie&&J.push(...getOppositeAxisPlacements(g,D,j,ee));const se=[g,...J],K=await detectOverflow(e,H),te=[];let re=((s=u.flip)==null?void 0:s.overflows)||[];if(w&&te.push(K[ne]),T){const Ee=getAlignmentSides(o,d,ee);te.push(K[Ee[0]],K[Ee[1]])}if(re=[...re,{placement:o,overflows:te}],!te.every(Ee=>Ee<=0)){var ce,le;const Ee=(((ce=u.flip)==null?void 0:ce.index)||0)+1,we=se[Ee];if(we){var ue;const me=T==="alignment"?Y!==getSideAxis(we):!1,xe=((ue=re[0])==null?void 0:ue.overflows[0])>0;if(!me||xe)return{data:{index:Ee,overflows:re},reset:{placement:we}}}let de=(le=re.filter(me=>me.overflows[0]<=0).sort((me,xe)=>me.overflows[1]-xe.overflows[1])[0])==null?void 0:le.placement;if(!de)switch(C){case"bestFit":{var _e;const me=(_e=re.filter(xe=>{if(ie){const pe=getSideAxis(xe.placement);return pe===Y||pe==="y"}return!0}).map(xe=>[xe.placement,xe.overflows.filter(pe=>pe>0).reduce((pe,ve)=>pe+ve,0)]).sort((xe,pe)=>xe[1]-pe[1])[0])==null?void 0:_e[0];me&&(de=me);break}case"initialPlacement":de=g;break}if(o!==de)return{reset:{placement:de}}}return{}}}};function getSideOffsets(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function isAnySideFullyClipped(t){return sides.some(e=>t[e]>=0)}const hide$2=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:s="referenceHidden",...o}=evaluate(t,e);switch(s){case"referenceHidden":{const u=await detectOverflow(e,{...o,elementContext:"reference"}),d=getSideOffsets(u,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:isAnySideFullyClipped(d)}}}case"escaped":{const u=await detectOverflow(e,{...o,altBoundary:!0}),d=getSideOffsets(u,n.floating);return{data:{escapedOffsets:d,escaped:isAnySideFullyClipped(d)}}}default:return{}}}}};async function convertValueToCoords(t,e){const{placement:n,platform:s,elements:o}=t,u=await(s.isRTL==null?void 0:s.isRTL(o.floating)),d=getSide(n),g=getAlignment(n),y=getSideAxis(n)==="y",v=["left","top"].includes(d)?-1:1,w=u&&y?-1:1,T=evaluate(e,t);let{mainAxis:A,crossAxis:C,alignmentAxis:j}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return g&&typeof j=="number"&&(C=g==="end"?j*-1:j),y?{x:C*w,y:A*v}:{x:A*v,y:C*w}}const offset$2=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:o,y:u,placement:d,middlewareData:g}=e,y=await convertValueToCoords(e,t);return d===((n=g.offset)==null?void 0:n.placement)&&(s=g.arrow)!=null&&s.alignmentOffset?{}:{x:o+y.x,y:u+y.y,data:{...y,placement:d}}}}},shift$2=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:o}=e,{mainAxis:u=!0,crossAxis:d=!1,limiter:g={fn:H=>{let{x:ne,y:Y}=H;return{x:ne,y:Y}}},...y}=evaluate(t,e),v={x:n,y:s},w=await detectOverflow(e,y),T=getSideAxis(getSide(o)),A=getOppositeAxis(T);let C=v[A],j=v[T];if(u){const H=A==="y"?"top":"left",ne=A==="y"?"bottom":"right",Y=C+w[H],U=C-w[ne];C=clamp(Y,C,U)}if(d){const H=T==="y"?"top":"left",ne=T==="y"?"bottom":"right",Y=j+w[H],U=j-w[ne];j=clamp(Y,j,U)}const D=g.fn({...e,[A]:C,[T]:j});return{...D,data:{x:D.x-n,y:D.y-s,enabled:{[A]:u,[T]:d}}}}}},limitShift$2=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:o,rects:u,middlewareData:d}=e,{offset:g=0,mainAxis:y=!0,crossAxis:v=!0}=evaluate(t,e),w={x:n,y:s},T=getSideAxis(o),A=getOppositeAxis(T);let C=w[A],j=w[T];const D=evaluate(g,e),H=typeof D=="number"?{mainAxis:D,crossAxis:0}:{mainAxis:0,crossAxis:0,...D};if(y){const U=A==="y"?"height":"width",ee=u.reference[A]-u.floating[U]+H.mainAxis,J=u.reference[A]+u.reference[U]-H.mainAxis;C<ee?C=ee:C>J&&(C=J)}if(v){var ne,Y;const U=A==="y"?"width":"height",ee=["top","left"].includes(getSide(o)),J=u.reference[T]-u.floating[U]+(ee&&((ne=d.offset)==null?void 0:ne[T])||0)+(ee?0:H.crossAxis),ie=u.reference[T]+u.reference[U]+(ee?0:((Y=d.offset)==null?void 0:Y[T])||0)-(ee?H.crossAxis:0);j<J?j=J:j>ie&&(j=ie)}return{[A]:C,[T]:j}}}},size$2=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:o,rects:u,platform:d,elements:g}=e,{apply:y=()=>{},...v}=evaluate(t,e),w=await detectOverflow(e,v),T=getSide(o),A=getAlignment(o),C=getSideAxis(o)==="y",{width:j,height:D}=u.floating;let H,ne;T==="top"||T==="bottom"?(H=T,ne=A===(await(d.isRTL==null?void 0:d.isRTL(g.floating))?"start":"end")?"left":"right"):(ne=T,H=A==="end"?"top":"bottom");const Y=D-w.top-w.bottom,U=j-w.left-w.right,ee=min(D-w[H],Y),J=min(j-w[ne],U),ie=!e.middlewareData.shift;let se=ee,K=J;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(K=U),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(se=Y),ie&&!A){const re=max(w.left,0),ce=max(w.right,0),le=max(w.top,0),ue=max(w.bottom,0);C?K=j-2*(re!==0||ce!==0?re+ce:max(w.left,w.right)):se=D-2*(le!==0||ue!==0?le+ue:max(w.top,w.bottom))}await y({...e,availableWidth:K,availableHeight:se});const te=await d.getDimensions(g.floating);return j!==te.width||D!==te.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(t){return isNode$1(t)?(t.nodeName||"").toLowerCase():"#document"}function getWindow$1(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(t){var e;return(e=(isNode$1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function isNode$1(t){return hasWindow()?t instanceof Node||t instanceof getWindow$1(t).Node:!1}function isElement(t){return hasWindow()?t instanceof Element||t instanceof getWindow$1(t).Element:!1}function isHTMLElement$1(t){return hasWindow()?t instanceof HTMLElement||t instanceof getWindow$1(t).HTMLElement:!1}function isShadowRoot(t){return!hasWindow()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof getWindow$1(t).ShadowRoot}function isOverflowElement(t){const{overflow:e,overflowX:n,overflowY:s,display:o}=getComputedStyle$2(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!["inline","contents"].includes(o)}function isTableElement(t){return["table","td","th"].includes(getNodeName(t))}function isTopLayer(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function isContainingBlock(t){const e=isWebKit(),n=isElement(t)?getComputedStyle$2(t):t;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function getContainingBlock(t){let e=getParentNode(t);for(;isHTMLElement$1(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;if(isTopLayer(e))return null;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(t){return["html","body","#document"].includes(getNodeName(t))}function getComputedStyle$2(t){return getWindow$1(t).getComputedStyle(t)}function getNodeScroll(t){return isElement(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function getParentNode(t){if(getNodeName(t)==="html")return t;const e=t.assignedSlot||t.parentNode||isShadowRoot(t)&&t.host||getDocumentElement(t);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(t){const e=getParentNode(t);return isLastTraversableNode(e)?t.ownerDocument?t.ownerDocument.body:t.body:isHTMLElement$1(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=getNearestOverflowAncestor(t),u=o===((s=t.ownerDocument)==null?void 0:s.body),d=getWindow$1(o);if(u){const g=getFrameElement(d);return e.concat(d,d.visualViewport||[],isOverflowElement(o)?o:[],g&&n?getOverflowAncestors(g):[])}return e.concat(o,getOverflowAncestors(o,[],n))}function getFrameElement(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function getCssDimensions(t){const e=getComputedStyle$2(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const o=isHTMLElement$1(t),u=o?t.offsetWidth:n,d=o?t.offsetHeight:s,g=round$1(n)!==u||round$1(s)!==d;return g&&(n=u,s=d),{width:n,height:s,$:g}}function unwrapElement(t){return isElement(t)?t:t.contextElement}function getScale(t){const e=unwrapElement(t);if(!isHTMLElement$1(e))return createCoords(1);const n=e.getBoundingClientRect(),{width:s,height:o,$:u}=getCssDimensions(e);let d=(u?round$1(n.width):n.width)/s,g=(u?round$1(n.height):n.height)/o;return(!d||!Number.isFinite(d))&&(d=1),(!g||!Number.isFinite(g))&&(g=1),{x:d,y:g}}const noOffsets=createCoords(0);function getVisualOffsets(t){const e=getWindow$1(t);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==getWindow$1(t)?!1:e}function getBoundingClientRect(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),u=unwrapElement(t);let d=createCoords(1);e&&(s?isElement(s)&&(d=getScale(s)):d=getScale(t));const g=shouldAddVisualOffsets(u,n,s)?getVisualOffsets(u):createCoords(0);let y=(o.left+g.x)/d.x,v=(o.top+g.y)/d.y,w=o.width/d.x,T=o.height/d.y;if(u){const A=getWindow$1(u),C=s&&isElement(s)?getWindow$1(s):s;let j=A,D=getFrameElement(j);for(;D&&s&&C!==j;){const H=getScale(D),ne=D.getBoundingClientRect(),Y=getComputedStyle$2(D),U=ne.left+(D.clientLeft+parseFloat(Y.paddingLeft))*H.x,ee=ne.top+(D.clientTop+parseFloat(Y.paddingTop))*H.y;y*=H.x,v*=H.y,w*=H.x,T*=H.y,y+=U,v+=ee,j=getWindow$1(D),D=getFrameElement(j)}}return rectToClientRect({width:w,height:T,x:y,y:v})}function getWindowScrollBarX(t,e){const n=getNodeScroll(t).scrollLeft;return e?e.left+n:getBoundingClientRect(getDocumentElement(t)).left+n}function getHTMLOffset(t,e,n){n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=s.left+e.scrollLeft-(n?0:getWindowScrollBarX(t,s)),u=s.top+e.scrollTop;return{x:o,y:u}}function convertOffsetParentRelativeRectToViewportRelativeRect(t){let{elements:e,rect:n,offsetParent:s,strategy:o}=t;const u=o==="fixed",d=getDocumentElement(s),g=e?isTopLayer(e.floating):!1;if(s===d||g&&u)return n;let y={scrollLeft:0,scrollTop:0},v=createCoords(1);const w=createCoords(0),T=isHTMLElement$1(s);if((T||!T&&!u)&&((getNodeName(s)!=="body"||isOverflowElement(d))&&(y=getNodeScroll(s)),isHTMLElement$1(s))){const C=getBoundingClientRect(s);v=getScale(s),w.x=C.x+s.clientLeft,w.y=C.y+s.clientTop}const A=d&&!T&&!u?getHTMLOffset(d,y,!0):createCoords(0);return{width:n.width*v.x,height:n.height*v.y,x:n.x*v.x-y.scrollLeft*v.x+w.x+A.x,y:n.y*v.y-y.scrollTop*v.y+w.y+A.y}}function getClientRects(t){return Array.from(t.getClientRects())}function getDocumentRect(t){const e=getDocumentElement(t),n=getNodeScroll(t),s=t.ownerDocument.body,o=max(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),u=max(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let d=-n.scrollLeft+getWindowScrollBarX(t);const g=-n.scrollTop;return getComputedStyle$2(s).direction==="rtl"&&(d+=max(e.clientWidth,s.clientWidth)-o),{width:o,height:u,x:d,y:g}}function getViewportRect(t,e){const n=getWindow$1(t),s=getDocumentElement(t),o=n.visualViewport;let u=s.clientWidth,d=s.clientHeight,g=0,y=0;if(o){u=o.width,d=o.height;const v=isWebKit();(!v||v&&e==="fixed")&&(g=o.offsetLeft,y=o.offsetTop)}return{width:u,height:d,x:g,y}}function getInnerBoundingClientRect(t,e){const n=getBoundingClientRect(t,!0,e==="fixed"),s=n.top+t.clientTop,o=n.left+t.clientLeft,u=isHTMLElement$1(t)?getScale(t):createCoords(1),d=t.clientWidth*u.x,g=t.clientHeight*u.y,y=o*u.x,v=s*u.y;return{width:d,height:g,x:y,y:v}}function getClientRectFromClippingAncestor(t,e,n){let s;if(e==="viewport")s=getViewportRect(t,n);else if(e==="document")s=getDocumentRect(getDocumentElement(t));else if(isElement(e))s=getInnerBoundingClientRect(e,n);else{const o=getVisualOffsets(t);s={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return rectToClientRect(s)}function hasFixedPositionAncestor(t,e){const n=getParentNode(t);return n===e||!isElement(n)||isLastTraversableNode(n)?!1:getComputedStyle$2(n).position==="fixed"||hasFixedPositionAncestor(n,e)}function getClippingElementAncestors(t,e){const n=e.get(t);if(n)return n;let s=getOverflowAncestors(t,[],!1).filter(g=>isElement(g)&&getNodeName(g)!=="body"),o=null;const u=getComputedStyle$2(t).position==="fixed";let d=u?getParentNode(t):t;for(;isElement(d)&&!isLastTraversableNode(d);){const g=getComputedStyle$2(d),y=isContainingBlock(d);!y&&g.position==="fixed"&&(o=null),(u?!y&&!o:!y&&g.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||isOverflowElement(d)&&!y&&hasFixedPositionAncestor(t,d))?s=s.filter(w=>w!==d):o=g,d=getParentNode(d)}return e.set(t,s),s}function getClippingRect(t){let{element:e,boundary:n,rootBoundary:s,strategy:o}=t;const d=[...n==="clippingAncestors"?isTopLayer(e)?[]:getClippingElementAncestors(e,this._c):[].concat(n),s],g=d[0],y=d.reduce((v,w)=>{const T=getClientRectFromClippingAncestor(e,w,o);return v.top=max(T.top,v.top),v.right=min(T.right,v.right),v.bottom=min(T.bottom,v.bottom),v.left=max(T.left,v.left),v},getClientRectFromClippingAncestor(e,g,o));return{width:y.right-y.left,height:y.bottom-y.top,x:y.left,y:y.top}}function getDimensions(t){const{width:e,height:n}=getCssDimensions(t);return{width:e,height:n}}function getRectRelativeToOffsetParent(t,e,n){const s=isHTMLElement$1(e),o=getDocumentElement(e),u=n==="fixed",d=getBoundingClientRect(t,!0,u,e);let g={scrollLeft:0,scrollTop:0};const y=createCoords(0);function v(){y.x=getWindowScrollBarX(o)}if(s||!s&&!u)if((getNodeName(e)!=="body"||isOverflowElement(o))&&(g=getNodeScroll(e)),s){const C=getBoundingClientRect(e,!0,u,e);y.x=C.x+e.clientLeft,y.y=C.y+e.clientTop}else o&&v();u&&!s&&o&&v();const w=o&&!s&&!u?getHTMLOffset(o,g):createCoords(0),T=d.left+g.scrollLeft-y.x-w.x,A=d.top+g.scrollTop-y.y-w.y;return{x:T,y:A,width:d.width,height:d.height}}function isStaticPositioned(t){return getComputedStyle$2(t).position==="static"}function getTrueOffsetParent(t,e){if(!isHTMLElement$1(t)||getComputedStyle$2(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return getDocumentElement(t)===n&&(n=n.ownerDocument.body),n}function getOffsetParent(t,e){const n=getWindow$1(t);if(isTopLayer(t))return n;if(!isHTMLElement$1(t)){let o=getParentNode(t);for(;o&&!isLastTraversableNode(o);){if(isElement(o)&&!isStaticPositioned(o))return o;o=getParentNode(o)}return n}let s=getTrueOffsetParent(t,e);for(;s&&isTableElement(s)&&isStaticPositioned(s);)s=getTrueOffsetParent(s,e);return s&&isLastTraversableNode(s)&&isStaticPositioned(s)&&!isContainingBlock(s)?n:s||getContainingBlock(t)||n}const getElementRects=async function(t){const e=this.getOffsetParent||getOffsetParent,n=this.getDimensions,s=await n(t.floating);return{reference:getRectRelativeToOffsetParent(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function isRTL(t){return getComputedStyle$2(t).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function observeMove(t,e){let n=null,s;const o=getDocumentElement(t);function u(){var g;clearTimeout(s),(g=n)==null||g.disconnect(),n=null}function d(g,y){g===void 0&&(g=!1),y===void 0&&(y=1),u();const v=t.getBoundingClientRect(),{left:w,top:T,width:A,height:C}=v;if(g||e(),!A||!C)return;const j=floor(T),D=floor(o.clientWidth-(w+A)),H=floor(o.clientHeight-(T+C)),ne=floor(w),U={rootMargin:-j+"px "+-D+"px "+-H+"px "+-ne+"px",threshold:max(0,min(1,y))||1};let ee=!0;function J(ie){const se=ie[0].intersectionRatio;if(se!==y){if(!ee)return d();se?d(!1,se):s=setTimeout(()=>{d(!1,1e-7)},1e3)}se===1&&!rectsAreEqual(v,t.getBoundingClientRect())&&d(),ee=!1}try{n=new IntersectionObserver(J,{...U,root:o.ownerDocument})}catch{n=new IntersectionObserver(J,U)}n.observe(t)}return d(!0),u}function autoUpdate(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:o=!0,ancestorResize:u=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:g=typeof IntersectionObserver=="function",animationFrame:y=!1}=s,v=unwrapElement(t),w=o||u?[...v?getOverflowAncestors(v):[],...getOverflowAncestors(e)]:[];w.forEach(ne=>{o&&ne.addEventListener("scroll",n,{passive:!0}),u&&ne.addEventListener("resize",n)});const T=v&&g?observeMove(v,n):null;let A=-1,C=null;d&&(C=new ResizeObserver(ne=>{let[Y]=ne;Y&&Y.target===v&&C&&(C.unobserve(e),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{var U;(U=C)==null||U.observe(e)})),n()}),v&&!y&&C.observe(v),C.observe(e));let j,D=y?getBoundingClientRect(t):null;y&&H();function H(){const ne=getBoundingClientRect(t);D&&!rectsAreEqual(D,ne)&&n(),D=ne,j=requestAnimationFrame(H)}return n(),()=>{var ne;w.forEach(Y=>{o&&Y.removeEventListener("scroll",n),u&&Y.removeEventListener("resize",n)}),T==null||T(),(ne=C)==null||ne.disconnect(),C=null,y&&cancelAnimationFrame(j)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(t,e,n)=>{const s=new Map,o={platform,...n},u={...o.platform,_c:s};return computePosition$1(t,e,{...o,platform:u})};var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!deepEqual(t[s],e[s]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,o[s]))return!1;for(s=n;s--!==0;){const u=o[s];if(!(u==="_owner"&&t.$$typeof)&&!deepEqual(t[u],e[u]))return!1}return!0}return t!==t&&e!==e}function getDPR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(t,e){const n=getDPR(t);return Math.round(e*n)/n}function useLatestRef(t){const e=reactExports.useRef(t);return index$1(()=>{e.current=t}),e}function useFloating(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:o,elements:{reference:u,floating:d}={},transform:g=!0,whileElementsMounted:y,open:v}=t,[w,T]=reactExports.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[A,C]=reactExports.useState(s);deepEqual(A,s)||C(s);const[j,D]=reactExports.useState(null),[H,ne]=reactExports.useState(null),Y=reactExports.useCallback(me=>{me!==ie.current&&(ie.current=me,D(me))},[]),U=reactExports.useCallback(me=>{me!==se.current&&(se.current=me,ne(me))},[]),ee=u||j,J=d||H,ie=reactExports.useRef(null),se=reactExports.useRef(null),K=reactExports.useRef(w),te=y!=null,re=useLatestRef(y),ce=useLatestRef(o),le=useLatestRef(v),ue=reactExports.useCallback(()=>{if(!ie.current||!se.current)return;const me={placement:e,strategy:n,middleware:A};ce.current&&(me.platform=ce.current),computePosition(ie.current,se.current,me).then(xe=>{const pe={...xe,isPositioned:le.current!==!1};_e.current&&!deepEqual(K.current,pe)&&(K.current=pe,reactDomExports.flushSync(()=>{T(pe)}))})},[A,e,n,ce,le]);index$1(()=>{v===!1&&K.current.isPositioned&&(K.current.isPositioned=!1,T(me=>({...me,isPositioned:!1})))},[v]);const _e=reactExports.useRef(!1);index$1(()=>(_e.current=!0,()=>{_e.current=!1}),[]),index$1(()=>{if(ee&&(ie.current=ee),J&&(se.current=J),ee&&J){if(re.current)return re.current(ee,J,ue);ue()}},[ee,J,ue,re,te]);const Ee=reactExports.useMemo(()=>({reference:ie,floating:se,setReference:Y,setFloating:U}),[Y,U]),we=reactExports.useMemo(()=>({reference:ee,floating:J}),[ee,J]),de=reactExports.useMemo(()=>{const me={position:n,left:0,top:0};if(!we.floating)return me;const xe=roundByDPR(we.floating,w.x),pe=roundByDPR(we.floating,w.y);return g?{...me,transform:"translate("+xe+"px, "+pe+"px)",...getDPR(we.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:xe,top:pe}},[n,g,we.floating,w.x,w.y]);return reactExports.useMemo(()=>({...w,update:ue,refs:Ee,elements:we,floatingStyles:de}),[w,ue,Ee,we,de])}const arrow$1=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:o}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?arrow$2({element:s.current,padding:o}).fn(n):{}:s?arrow$2({element:s,padding:o}).fn(n):{}}}},offset=(t,e)=>({...offset$1(t),options:[t,e]}),shift=(t,e)=>({...shift$1(t),options:[t,e]}),limitShift=(t,e)=>({...limitShift$1(t),options:[t,e]}),flip=(t,e)=>({...flip$1(t),options:[t,e]}),size=(t,e)=>({...size$1(t),options:[t,e]}),hide=(t,e)=>({...hide$1(t),options:[t,e]}),arrow=(t,e)=>({...arrow$1(t),options:[t,e]});var NAME$1="Arrow",Arrow$2=reactExports.forwardRef((t,e)=>{const{children:n,width:s=10,height:o=5,...u}=t;return jsxRuntimeExports.jsx(Primitive.svg,{...u,ref:e,width:s,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$2.displayName=NAME$1;var Root$2=Arrow$2;function useSize(t){const[e,n]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const u=o[0];let d,g;if("borderBoxSize"in u){const y=u.borderBoxSize,v=Array.isArray(y)?y[0]:y;d=v.inlineSize,g=v.blockSize}else d=t.offsetWidth,g=t.offsetHeight;n({width:d,height:g})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=t=>{const{__scopePopper:e,children:n}=t,[s,o]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:e,anchor:s,onAnchorChange:o,children:n})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...o}=t,u=usePopperContext(ANCHOR_NAME$1,n),d=reactExports.useRef(null),g=useComposedRefs(e,d);return reactExports.useEffect(()=>{u.onAnchorChange((s==null?void 0:s.current)||d.current)}),s?null:jsxRuntimeExports.jsx(Primitive.div,{...o,ref:g})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$1="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$1),PopperContent=reactExports.forwardRef((t,e)=>{var be,Ve,$e,Fe,je,De;const{__scopePopper:n,side:s="bottom",sideOffset:o=0,align:u="center",alignOffset:d=0,arrowPadding:g=0,avoidCollisions:y=!0,collisionBoundary:v=[],collisionPadding:w=0,sticky:T="partial",hideWhenDetached:A=!1,updatePositionStrategy:C="optimized",onPlaced:j,...D}=t,H=usePopperContext(CONTENT_NAME$1,n),[ne,Y]=reactExports.useState(null),U=useComposedRefs(e,Ie=>Y(Ie)),[ee,J]=reactExports.useState(null),ie=useSize(ee),se=(ie==null?void 0:ie.width)??0,K=(ie==null?void 0:ie.height)??0,te=s+(u!=="center"?"-"+u:""),re=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},ce=Array.isArray(v)?v:[v],le=ce.length>0,ue={padding:re,boundary:ce.filter(isNotNull),altBoundary:le},{refs:_e,floatingStyles:Ee,placement:we,isPositioned:de,middlewareData:me}=useFloating({strategy:"fixed",placement:te,whileElementsMounted:(...Ie)=>autoUpdate(...Ie,{animationFrame:C==="always"}),elements:{reference:H.anchor},middleware:[offset({mainAxis:o+K,alignmentAxis:d}),y&&shift({mainAxis:!0,crossAxis:!1,limiter:T==="partial"?limitShift():void 0,...ue}),y&&flip({...ue}),size({...ue,apply:({elements:Ie,rects:Re,availableWidth:Ne,availableHeight:Ue})=>{const{width:pt,height:Ze}=Re.reference,mn=Ie.floating.style;mn.setProperty("--radix-popper-available-width",`${Ne}px`),mn.setProperty("--radix-popper-available-height",`${Ue}px`),mn.setProperty("--radix-popper-anchor-width",`${pt}px`),mn.setProperty("--radix-popper-anchor-height",`${Ze}px`)}}),ee&&arrow({element:ee,padding:g}),transformOrigin({arrowWidth:se,arrowHeight:K}),A&&hide({strategy:"referenceHidden",...ue})]}),[xe,pe]=getSideAndAlignFromPlacement(we),ve=useCallbackRef$1(j);useLayoutEffect2(()=>{de&&(ve==null||ve())},[de,ve]);const Oe=(be=me.arrow)==null?void 0:be.x,Te=(Ve=me.arrow)==null?void 0:Ve.y,Le=(($e=me.arrow)==null?void 0:$e.centerOffset)!==0,[Me,Ce]=reactExports.useState();return useLayoutEffect2(()=>{ne&&Ce(window.getComputedStyle(ne).zIndex)},[ne]),jsxRuntimeExports.jsx("div",{ref:_e.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ee,transform:de?Ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(Fe=me.transformOrigin)==null?void 0:Fe.x,(je=me.transformOrigin)==null?void 0:je.y].join(" "),...((De=me.hide)==null?void 0:De.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:n,placedSide:xe,onArrowChange:J,arrowX:Oe,arrowY:Te,shouldHideArrow:Le,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":xe,"data-align":pe,...D,ref:U,style:{...D.style,animation:de?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$1;var ARROW_NAME$1="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function t(e,n){const{__scopePopper:s,...o}=e,u=useContentContext(ARROW_NAME$1,s),d=OPPOSITE_SIDE[u.placedSide];return jsxRuntimeExports.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$2,{...o,ref:n,style:{...o.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$1;function isNotNull(t){return t!==null}var transformOrigin=t=>({name:"transformOrigin",options:t,fn(e){var H,ne,Y;const{placement:n,rects:s,middlewareData:o}=e,d=((H=o.arrow)==null?void 0:H.centerOffset)!==0,g=d?0:t.arrowWidth,y=d?0:t.arrowHeight,[v,w]=getSideAndAlignFromPlacement(n),T={start:"0%",center:"50%",end:"100%"}[w],A=(((ne=o.arrow)==null?void 0:ne.x)??0)+g/2,C=(((Y=o.arrow)==null?void 0:Y.y)??0)+y/2;let j="",D="";return v==="bottom"?(j=d?T:`${A}px`,D=`${-y}px`):v==="top"?(j=d?T:`${A}px`,D=`${s.floating.height+y}px`):v==="right"?(j=`${-y}px`,D=d?T:`${C}px`):v==="left"&&(j=`${s.floating.width+y}px`,D=d?T:`${C}px`),{data:{x:j,y:D}}}});function getSideAndAlignFromPlacement(t){const[e,n="center"]=t.split("-");return[e,n]}var Root2$1=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow$1=PopperArrow,PORTAL_NAME$1="Portal",Portal$1=reactExports.forwardRef((t,e)=>{var g;const{container:n,...s}=t,[o,u]=reactExports.useState(!1);useLayoutEffect2(()=>u(!0),[]);const d=n||o&&((g=globalThis==null?void 0:globalThis.document)==null?void 0:g.body);return d?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...s,ref:e}),d):null});Portal$1.displayName=PORTAL_NAME$1;function useStateMachine(t,e){return reactExports.useReducer((n,s)=>e[n][s]??n,t)}var Presence=t=>{const{present:e,children:n}=t,s=usePresence(e),o=typeof n=="function"?n({present:s.isPresent}):reactExports.Children.only(n),u=useComposedRefs(s.ref,getElementRef(o));return typeof n=="function"||s.isPresent?reactExports.cloneElement(o,{ref:u}):null};Presence.displayName="Presence";function usePresence(t){const[e,n]=reactExports.useState(),s=reactExports.useRef(null),o=reactExports.useRef(t),u=reactExports.useRef("none"),d=t?"mounted":"unmounted",[g,y]=useStateMachine(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const v=getAnimationName(s.current);u.current=g==="mounted"?v:"none"},[g]),useLayoutEffect2(()=>{const v=s.current,w=o.current;if(w!==t){const A=u.current,C=getAnimationName(v);t?y("MOUNT"):C==="none"||(v==null?void 0:v.display)==="none"?y("UNMOUNT"):y(w&&A!==C?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,y]),useLayoutEffect2(()=>{if(e){let v;const w=e.ownerDocument.defaultView??window,T=C=>{const D=getAnimationName(s.current).includes(C.animationName);if(C.target===e&&D&&(y("ANIMATION_END"),!o.current)){const H=e.style.animationFillMode;e.style.animationFillMode="forwards",v=w.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=H)})}},A=C=>{C.target===e&&(u.current=getAnimationName(s.current))};return e.addEventListener("animationstart",A),e.addEventListener("animationcancel",T),e.addEventListener("animationend",T),()=>{w.clearTimeout(v),e.removeEventListener("animationstart",A),e.removeEventListener("animationcancel",T),e.removeEventListener("animationend",T)}}else y("ANIMATION_END")},[e,y]),{isPresent:["mounted","unmountSuspended"].includes(g),ref:reactExports.useCallback(v=>{s.current=v?getComputedStyle(v):null,n(v)},[])}}function getAnimationName(t){return(t==null?void 0:t.animationName)||"none"}function getElementRef(t){var s,o;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var useInsertionEffect=React$1[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[o,u,d]=useUncontrolledState({defaultProp:e,onChange:n}),g=t!==void 0,y=g?t:o;{const w=reactExports.useRef(t!==void 0);reactExports.useEffect(()=>{const T=w.current;T!==g&&console.warn(`${s} is changing from ${T?"controlled":"uncontrolled"} to ${g?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),w.current=g},[g,s])}const v=reactExports.useCallback(w=>{var T;if(g){const A=isFunction$1(w)?w(t):w;A!==t&&((T=d.current)==null||T.call(d,A))}else u(w)},[g,t,u,d]);return[y,v]}function useUncontrolledState({defaultProp:t,onChange:e}){const[n,s]=reactExports.useState(t),o=reactExports.useRef(n),u=reactExports.useRef(e);return useInsertionEffect(()=>{u.current=e},[e]),reactExports.useEffect(()=>{var d;o.current!==n&&((d=u.current)==null||d.call(u,n),o.current=n)},[n,o]),[n,s,u]}function isFunction$1(t){return typeof t=="function"}var getDefaultParent=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(t){return t&&(t.host||unwrapHost(t.parentNode))},correctTargets=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=unwrapHost(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},applyAttributeToOthers=function(t,e,n,s){var o=correctTargets(e,Array.isArray(t)?t:[t]);markerMap[n]||(markerMap[n]=new WeakMap);var u=markerMap[n],d=[],g=new Set,y=new Set(o),v=function(T){!T||g.has(T)||(g.add(T),v(T.parentNode))};o.forEach(v);var w=function(T){!T||y.has(T)||Array.prototype.forEach.call(T.children,function(A){if(g.has(A))w(A);else try{var C=A.getAttribute(s),j=C!==null&&C!=="false",D=(counterMap.get(A)||0)+1,H=(u.get(A)||0)+1;counterMap.set(A,D),u.set(A,H),d.push(A),D===1&&j&&uncontrolledNodes.set(A,!0),H===1&&A.setAttribute(n,"true"),j||A.setAttribute(s,"true")}catch(ne){console.error("aria-hidden: cannot operate on ",A,ne)}})};return w(e),g.clear(),lockCount++,function(){d.forEach(function(T){var A=counterMap.get(T)-1,C=u.get(T)-1;counterMap.set(T,A),u.set(T,C),A||(uncontrolledNodes.has(T)||T.removeAttribute(s),uncontrolledNodes.delete(T)),C||T.removeAttribute(n)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),o=getDefaultParent(t);return o?(s.push.apply(s,Array.from(o.querySelectorAll("[aria-live]"))),applyAttributeToOthers(s,o,n,"aria-hidden")):function(){return null}},zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function useCallbackRef(t,e){var n=reactExports.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var o=n.value;o!==s&&(n.value=s,n.callback(s,o))}}}})[0];return n.callback=e,n.facade}var useIsomorphicLayoutEffect$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(t,e){var n=useCallbackRef(null,function(s){return t.forEach(function(o){return assignRef(o,s)})});return useIsomorphicLayoutEffect$1(function(){var s=currentValues.get(n);if(s){var o=new Set(s),u=new Set(t),d=n.current;o.forEach(function(g){u.has(g)||assignRef(g,null)}),u.forEach(function(g){o.has(g)||assignRef(g,d)})}currentValues.set(n,t)},[t]),n}function ItoI(t){return t}function innerCreateMedium(t,e){e===void 0&&(e=ItoI);var n=[],s=!1,o={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(u){var d=e(u,s);return n.push(d),function(){n=n.filter(function(g){return g!==d})}},assignSyncMedium:function(u){for(s=!0;n.length;){var d=n;n=[],d.forEach(u)}n={push:function(g){return u(g)},filter:function(){return n}}},assignMedium:function(u){s=!0;var d=[];if(n.length){var g=n;n=[],g.forEach(u),d=n}var y=function(){var w=d;d=[],w.forEach(u)},v=function(){return Promise.resolve().then(y)};v(),n={push:function(w){d.push(w),v()},filter:function(w){return d=d.filter(w),n}}}};return o}function createSidecarMedium(t){t===void 0&&(t={});var e=innerCreateMedium(null);return e.options=__assign({async:!0,ssr:!1},t),e}var SideCar$1=function(t){var e=t.sideCar,n=__rest(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return reactExports.createElement(s,__assign({},n))};SideCar$1.isSideCarExport=!0;function exportSidecar(t,e){return t.useMedium(e),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(t,e){var n=reactExports.useRef(null),s=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),o=s[0],u=s[1],d=t.forwardProps,g=t.children,y=t.className,v=t.removeScrollBar,w=t.enabled,T=t.shards,A=t.sideCar,C=t.noIsolation,j=t.inert,D=t.allowPinchZoom,H=t.as,ne=H===void 0?"div":H,Y=t.gapMode,U=__rest(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),ee=A,J=useMergeRefs([n,e]),ie=__assign(__assign({},U),o);return reactExports.createElement(reactExports.Fragment,null,w&&reactExports.createElement(ee,{sideCar:effectCar,removeScrollBar:v,shards:T,noIsolation:C,inert:j,setCallbacks:u,allowPinchZoom:!!D,lockRef:n,gapMode:Y}),d?reactExports.cloneElement(reactExports.Children.only(g),__assign(__assign({},ie),{ref:J})):reactExports.createElement(ne,__assign({},ie,{className:y,ref:J}),g))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=getNonce();return e&&t.setAttribute("nonce",e),t}function injectStyles(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function insertStyleTag(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var stylesheetSingleton=function(){var t=0,e=null;return{add:function(n){t==0&&(e=makeStyleTag())&&(injectStyles(e,n),insertStyleTag(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},styleHookSingleton=function(){var t=stylesheetSingleton();return function(e,n){reactExports.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},styleSingleton=function(){var t=styleHookSingleton(),e=function(n){var s=n.styles,o=n.dynamic;return t(s,o),null};return e},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(t){return parseInt(t||"",10)||0},getOffset=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[parse$1(n),parse$1(s),parse$1(o)]},getGapWidth=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return zeroGap;var e=getOffset(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(t,e,n,s){var o=t.left,u=t.top,d=t.right,g=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(g,"px ").concat(s,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(g,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(g,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(g,"px ").concat(s,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(g,"px ").concat(s,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(g,`px;
  }
`)},getCurrentUseCounter=function(){var t=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(t)?t:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var t=getCurrentUseCounter()-1;t<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,t.toString())}},[])},RemoveScrollBar=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,o=s===void 0?"margin":s;useLockAttribute();var u=reactExports.useMemo(function(){return getGapWidth(o)},[o]);return reactExports.createElement(Style,{styles:getStyles(u,!e,o,n?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(t){return t.tagName==="TEXTAREA"},elementCanBeScrolled=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!alwaysContainsScroll(t)&&n[e]==="visible")},elementCouldBeVScrolled=function(t){return elementCanBeScrolled(t,"overflowY")},elementCouldBeHScrolled=function(t){return elementCanBeScrolled(t,"overflowX")},locationCouldBeScrolled=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var o=elementCouldBeScrolled(t,s);if(o){var u=getScrollVariables(t,s),d=u[1],g=u[2];if(d>g)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},getVScrollVariables=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},getHScrollVariables=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},elementCouldBeScrolled=function(t,e){return t==="v"?elementCouldBeVScrolled(e):elementCouldBeHScrolled(e)},getScrollVariables=function(t,e){return t==="v"?getVScrollVariables(e):getHScrollVariables(e)},getDirectionFactor=function(t,e){return t==="h"&&e==="rtl"?-1:1},handleScroll=function(t,e,n,s,o){var u=getDirectionFactor(t,window.getComputedStyle(e).direction),d=u*s,g=n.target,y=e.contains(g),v=!1,w=d>0,T=0,A=0;do{var C=getScrollVariables(t,g),j=C[0],D=C[1],H=C[2],ne=D-H-u*j;(j||ne)&&elementCouldBeScrolled(t,g)&&(T+=ne,A+=j),g instanceof ShadowRoot?g=g.host:g=g.parentNode}while(!y&&g!==document.body||y&&(e.contains(g)||e===g));return(w&&Math.abs(T)<1||!w&&Math.abs(A)<1)&&(v=!0),v},getTouchXY=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(t){return[t.deltaX,t.deltaY]},extractRef=function(t){return t&&"current"in t?t.current:t},deltaCompare=function(t,e){return t[0]===e[0]&&t[1]===e[1]},generateStyle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(t){var e=reactExports.useRef([]),n=reactExports.useRef([0,0]),s=reactExports.useRef(),o=reactExports.useState(idCounter++)[0],u=reactExports.useState(styleSingleton)[0],d=reactExports.useRef(t);reactExports.useEffect(function(){d.current=t},[t]),reactExports.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var D=__spreadArray([t.lockRef.current],(t.shards||[]).map(extractRef),!0).filter(Boolean);return D.forEach(function(H){return H.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),D.forEach(function(H){return H.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var g=reactExports.useCallback(function(D,H){if("touches"in D&&D.touches.length===2||D.type==="wheel"&&D.ctrlKey)return!d.current.allowPinchZoom;var ne=getTouchXY(D),Y=n.current,U="deltaX"in D?D.deltaX:Y[0]-ne[0],ee="deltaY"in D?D.deltaY:Y[1]-ne[1],J,ie=D.target,se=Math.abs(U)>Math.abs(ee)?"h":"v";if("touches"in D&&se==="h"&&ie.type==="range")return!1;var K=locationCouldBeScrolled(se,ie);if(!K)return!0;if(K?J=se:(J=se==="v"?"h":"v",K=locationCouldBeScrolled(se,ie)),!K)return!1;if(!s.current&&"changedTouches"in D&&(U||ee)&&(s.current=J),!J)return!0;var te=s.current||J;return handleScroll(te,H,D,te==="h"?U:ee)},[]),y=reactExports.useCallback(function(D){var H=D;if(!(!lockStack.length||lockStack[lockStack.length-1]!==u)){var ne="deltaY"in H?getDeltaXY(H):getTouchXY(H),Y=e.current.filter(function(J){return J.name===H.type&&(J.target===H.target||H.target===J.shadowParent)&&deltaCompare(J.delta,ne)})[0];if(Y&&Y.should){H.cancelable&&H.preventDefault();return}if(!Y){var U=(d.current.shards||[]).map(extractRef).filter(Boolean).filter(function(J){return J.contains(H.target)}),ee=U.length>0?g(H,U[0]):!d.current.noIsolation;ee&&H.cancelable&&H.preventDefault()}}},[]),v=reactExports.useCallback(function(D,H,ne,Y){var U={name:D,delta:H,target:ne,should:Y,shadowParent:getOutermostShadowParent(ne)};e.current.push(U),setTimeout(function(){e.current=e.current.filter(function(ee){return ee!==U})},1)},[]),w=reactExports.useCallback(function(D){n.current=getTouchXY(D),s.current=void 0},[]),T=reactExports.useCallback(function(D){v(D.type,getDeltaXY(D),D.target,g(D,t.lockRef.current))},[]),A=reactExports.useCallback(function(D){v(D.type,getTouchXY(D),D.target,g(D,t.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(u),t.setCallbacks({onScrollCapture:T,onWheelCapture:T,onTouchMoveCapture:A}),document.addEventListener("wheel",y,nonPassive),document.addEventListener("touchmove",y,nonPassive),document.addEventListener("touchstart",w,nonPassive),function(){lockStack=lockStack.filter(function(D){return D!==u}),document.removeEventListener("wheel",y,nonPassive),document.removeEventListener("touchmove",y,nonPassive),document.removeEventListener("touchstart",w,nonPassive)}},[]);var C=t.removeScrollBar,j=t.inert;return reactExports.createElement(reactExports.Fragment,null,j?reactExports.createElement(u,{styles:generateStyle(o)}):null,C?reactExports.createElement(RemoveScrollBar,{gapMode:t.gapMode}):null)}function getOutermostShadowParent(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(t,e){return reactExports.createElement(RemoveScroll,__assign({},t,{ref:e,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var POPOVER_NAME="Popover",[createPopoverContext,createPopoverScope]=createContextScope(POPOVER_NAME,[createPopperScope]),usePopperScope=createPopperScope(),[PopoverProvider,usePopoverContext]=createPopoverContext(POPOVER_NAME),Popover$1=t=>{const{__scopePopover:e,children:n,open:s,defaultOpen:o,onOpenChange:u,modal:d=!1}=t,g=usePopperScope(e),y=reactExports.useRef(null),[v,w]=reactExports.useState(!1),[T,A]=useControllableState({prop:s,defaultProp:o??!1,onChange:u,caller:POPOVER_NAME});return jsxRuntimeExports.jsx(Root2$1,{...g,children:jsxRuntimeExports.jsx(PopoverProvider,{scope:e,contentId:useId(),triggerRef:y,open:T,onOpenChange:A,onOpenToggle:reactExports.useCallback(()=>A(C=>!C),[A]),hasCustomAnchor:v,onCustomAnchorAdd:reactExports.useCallback(()=>w(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>w(!1),[]),modal:d,children:n})})};Popover$1.displayName=POPOVER_NAME;var ANCHOR_NAME="PopoverAnchor",PopoverAnchor=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,o=usePopoverContext(ANCHOR_NAME,n),u=usePopperScope(n),{onCustomAnchorAdd:d,onCustomAnchorRemove:g}=o;return reactExports.useEffect(()=>(d(),()=>g()),[d,g]),jsxRuntimeExports.jsx(Anchor,{...u,...s,ref:e})});PopoverAnchor.displayName=ANCHOR_NAME;var TRIGGER_NAME="PopoverTrigger",PopoverTrigger$1=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,o=usePopoverContext(TRIGGER_NAME,n),u=usePopperScope(n),d=useComposedRefs(e,o.triggerRef),g=jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":getState$1(o.open),...s,ref:d,onClick:composeEventHandlers(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?g:jsxRuntimeExports.jsx(Anchor,{asChild:!0,...u,children:g})});PopoverTrigger$1.displayName=TRIGGER_NAME;var PORTAL_NAME="PopoverPortal",[PortalProvider,usePortalContext]=createPopoverContext(PORTAL_NAME,{forceMount:void 0}),PopoverPortal=t=>{const{__scopePopover:e,forceMount:n,children:s,container:o}=t,u=usePopoverContext(PORTAL_NAME,e);return jsxRuntimeExports.jsx(PortalProvider,{scope:e,forceMount:n,children:jsxRuntimeExports.jsx(Presence,{present:n||u.open,children:jsxRuntimeExports.jsx(Portal$1,{asChild:!0,container:o,children:s})})})};PopoverPortal.displayName=PORTAL_NAME;var CONTENT_NAME="PopoverContent",PopoverContent$1=reactExports.forwardRef((t,e)=>{const n=usePortalContext(CONTENT_NAME,t.__scopePopover),{forceMount:s=n.forceMount,...o}=t,u=usePopoverContext(CONTENT_NAME,t.__scopePopover);return jsxRuntimeExports.jsx(Presence,{present:s||u.open,children:u.modal?jsxRuntimeExports.jsx(PopoverContentModal,{...o,ref:e}):jsxRuntimeExports.jsx(PopoverContentNonModal,{...o,ref:e})})});PopoverContent$1.displayName=CONTENT_NAME;var Slot=createSlot("PopoverContent.RemoveScroll"),PopoverContentModal=reactExports.forwardRef((t,e)=>{const n=usePopoverContext(CONTENT_NAME,t.__scopePopover),s=reactExports.useRef(null),o=useComposedRefs(e,s),u=reactExports.useRef(!1);return reactExports.useEffect(()=>{const d=s.current;if(d)return hideOthers(d)},[]),jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(PopoverContentImpl,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(t.onCloseAutoFocus,d=>{var g;d.preventDefault(),u.current||(g=n.triggerRef.current)==null||g.focus()}),onPointerDownOutside:composeEventHandlers(t.onPointerDownOutside,d=>{const g=d.detail.originalEvent,y=g.button===0&&g.ctrlKey===!0,v=g.button===2||y;u.current=v},{checkForDefaultPrevented:!1}),onFocusOutside:composeEventHandlers(t.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),PopoverContentNonModal=reactExports.forwardRef((t,e)=>{const n=usePopoverContext(CONTENT_NAME,t.__scopePopover),s=reactExports.useRef(!1),o=reactExports.useRef(!1);return jsxRuntimeExports.jsx(PopoverContentImpl,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var d,g;(d=t.onCloseAutoFocus)==null||d.call(t,u),u.defaultPrevented||(s.current||(g=n.triggerRef.current)==null||g.focus(),u.preventDefault()),s.current=!1,o.current=!1},onInteractOutside:u=>{var y,v;(y=t.onInteractOutside)==null||y.call(t,u),u.defaultPrevented||(s.current=!0,u.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const d=u.target;((v=n.triggerRef.current)==null?void 0:v.contains(d))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&o.current&&u.preventDefault()}})}),PopoverContentImpl=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:u,disableOutsidePointerEvents:d,onEscapeKeyDown:g,onPointerDownOutside:y,onFocusOutside:v,onInteractOutside:w,...T}=t,A=usePopoverContext(CONTENT_NAME,n),C=usePopperScope(n);return useFocusGuards(),jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:u,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:w,onEscapeKeyDown:g,onPointerDownOutside:y,onFocusOutside:v,onDismiss:()=>A.onOpenChange(!1),children:jsxRuntimeExports.jsx(Content,{"data-state":getState$1(A.open),role:"dialog",id:A.contentId,...C,...T,ref:e,style:{...T.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),CLOSE_NAME="PopoverClose",PopoverClose=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,o=usePopoverContext(CLOSE_NAME,n);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...s,ref:e,onClick:composeEventHandlers(t.onClick,()=>o.onOpenChange(!1))})});PopoverClose.displayName=CLOSE_NAME;var ARROW_NAME="PopoverArrow",PopoverArrow=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,o=usePopperScope(n);return jsxRuntimeExports.jsx(Arrow$1,{...o,...s,ref:e})});PopoverArrow.displayName=ARROW_NAME;function getState$1(t){return t?"open":"closed"}var Root2=Popover$1,Trigger=PopoverTrigger$1,Portal=PopoverPortal,Content2=PopoverContent$1;function Popover({...t}){return jsxRuntimeExports.jsx(Root2,{"data-slot":"popover",...t})}function PopoverTrigger({...t}){return jsxRuntimeExports.jsx(Trigger,{"data-slot":"popover-trigger",...t})}function PopoverContent({className:t,align:e="center",sideOffset:n=4,...s}){return jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(Content2,{"data-slot":"popover-content",align:e,sideOffset:n,className:cn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...s})})}const PostTextGenerator=({postType:t,match:e,translations:n,confrontoData:s,escalacaoOficial:o=!1,playerName:u,substitutions:d,homeGoals:g,awayGoals:y})=>{const{getTeamCode:v,loading:w,error:T}=useTeamCodes(),[A,C]=reactExports.useState(""),[j,D]=reactExports.useState(""),[H,ne]=reactExports.useState(""),[Y,U]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{if(e){const re=await v(e.teams.home.id,e.teams.home.name),ce=await v(e.teams.away.id,e.teams.away.name);C(re),D(ce),ne(t==="fimDeJogo"?`Partidaça pela ${formatCompetitionRound(e,n)} da ${e.league.name}! Resultado final no ${e.fixture.venue.name}.`:t==="melhorDaPartida"||t==="gol"?`Atuação de gala na partida entre ${e.teams.home.name} e ${e.teams.away.name}!`:"")}})()},[e,t,v,n]);const J=reactExports.useCallback(()=>{if(!e||w)return"Carregando informações da partida...";if(T)return`Erro ao carregar códigos dos times: ${T}`;const te=formatDateToBrazilian(convertToSaoPauloTime(new Date(e.fixture.date))),re=te.split(" às ")[1],ce=formatCompetitionRound(e,n),le=e.league.name.replace(/\s/g,""),ue=`${A}${j}`;function _e(me){return!me||me.length===0?"":me.map((xe,pe)=>(pe===0?`
`:"")+`🔴 #${xe.playerOut.number} ${xe.playerOut.name}
🟢 #${xe.playerIn.number} ${xe.playerIn.name}`+(pe<me.length-1?`
---
`:"")).join("")}const Ee=()=>{var me,xe;return g!=null&&y!=null?`${e.teams.home.name} ${g}-${y} ${e.teams.away.name}`:((me=e.goals)==null?void 0:me.home)!=null&&((xe=e.goals)==null?void 0:xe.away)!=null?`${e.teams.home.name} ${e.goals.home}-${e.goals.away} ${e.teams.away.name}`:`${e.teams.home.name} x ${e.teams.away.name}`};let we="",de="";switch(t){case"palpites":we=`
⚽️ TÁ NA HORA DO PALPITE PARA ${e.teams.home.name} 🆚 ${e.teams.away.name}!
🏆 ${ce}
🗣️ Arbitragem: ${e.fixture.referee||"A definir"}
🏟️ Local: ${e.fixture.venue.name}
🗓️ Data e Hora: ${te} (Horário de Brasília)
Deixe o seu nos comentários! 🔥
`.trim(),de=`
#${le} #${ue}${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"proximoJogo":we=`
⚽️ PRÓXIMO JOGO: ${e.teams.home.name} 🆚 ${e.teams.away.name}!
🏆 ${ce}
🗣️ Arbitragem: ${e.fixture.referee||"A definir"}
🏟️ Local: ${e.fixture.venue.name}
🗓️ Data e Hora: ${te} (Horário de Brasília)
Prepare-se para torcer! 🔥
`.trim(),de=`
#${le} #${ue}${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"matchday":we=`
🎉 É DIA DE JOGO! ${e.teams.home.name} 🆚 ${e.teams.away.name}!
🏆 ${ce}
🗣️ Arbitragem: ${e.fixture.referee||"A definir"}
🏟️ Local: ${e.fixture.venue.name}
⏰ Horário: ${re} (Horário de Brasília)!
🔥 A torcida já está aquecida!
`.trim(),de=`
#${le} #${ue} #DiaDeJogo #Matchday${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"escalacao":we=`
⚽️ ${o?"TIME PRONTO PARA":"NOSSA ESCALAÇÃO:"} ${e.teams.home.name} 🆚 ${e.teams.away.name}! ⚽️
🏆 ${ce}
🗣️ Arbitragem: ${e.fixture.referee||"A definir"}
🏟️ Local: ${e.fixture.venue.name}
🗓️ Data e Hora: ${te} (Horário de Brasília)
🎬 Pré-jogo já está no nosso canal!
Durante o jogo teremos REACT AO VIVO no Youtube!
${o?"Assim vem o Liverpool hoje, o que você achou? Conta nos comentários! ":"Essa é a escalação que imaginamos para hoje! Qual seria a sua? "}👇
`.trim(),de=`
#${ue} #${le}${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"confronto":we=`
🔥 HISTÓRICO DO CONFRONTO: ${e.teams.home.name} 🆚 ${e.teams.away.name} 🔥

${s?`Até aqui, foram ${s.awayWins+s.draws+s.homeWins} confrontos:
✅ ${e.teams.home.name}: ${s.homeWins} vitórias  
✅ ${e.teams.away.name}: ${s.awayWins} vitórias  
🤝 Empates: ${s.draws}

📊 Veja a distribuição completa na imagem!`:""}
🗓️ Próximo capítulo dessa história: ${te} (Horário de Brasília)

Quem leva a melhor dessa vez? Comenta aí! 👇
`.trim(),de=`
#${ue} #${le}${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"fimDeJogo":we=`
🔚 FIM DE JOGO! ${Ee()}.
${H}
`.trim(),de=`
#${le} #${ue} #ResultadoFinal #FullTime${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"melhorDaPartida":we=`
✨ CRAQUE DO JOGO! ✨
${H}
`.trim(),de=`
#${le} #${ue} #MelhorDaPartida #Destaque #MOTM #MVP #ManOfTheMatch${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"inicioJogo":we=`
🚀 A BOLA VAI ROLAR! ${Ee()}!
🏆 ${ce}
🏟️ ${e.fixture.venue.name}
Que comece o espetáculo! 🔥
`.trim(),de=`
#${le} #${ue} #InicioDeJogo #KickOff${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"intervalo":we=`
⏸️ INTERVALO! ${Ee()}!
🏆 ${ce}
🏟️ ${e.fixture.venue.name}
Primeiro tempo encerrado! Vamos para o segundo! 💪
`.trim(),de=`
#${le} #${ue} #Intervalo #HalfTime${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"inicioSegundoTempo":we=`
🔄 SEGUNDO TEMPO! ${Ee()}!
🏆 ${ce}
🏟️ ${e.fixture.venue.name}
A bola volta a rolar! Vamos em busca do resultado! ⚽
`.trim(),de=`
#${le} #${ue} #SegundoTempo #SecondHalf${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"inicioProrrogacao":we=`
⏱️ PRORROGAÇÃO! ${Ee()}!
🏆 ${ce}
🏟️ ${e.fixture.venue.name}
Mais 30 minutos de emoção! Quem vai decidir? 🔥
`.trim(),de=`
#${le} #${ue} #Prorrogacao #ExtraTime${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"inicioSegundoTempoProrrogacao":we=`
⏱️ SEGUNDO TEMPO DA PRORROGAÇÃO! ${Ee()}!
🏆 ${ce}
🏟️ ${e.fixture.venue.name}
Últimos 15 minutos! Tudo pode acontecer! 💥
`.trim(),de=`
#${le} #${ue} #Prorrogacao #ExtraTime${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"gol":we=`
⚽ GOOOOOOL! ${u?`${u}!`:""} ${Ee()}!
🏆 ${ce}
🏟️ ${e.fixture.venue.name}
${H}
`.trim(),de=`
#${le} #${ue} #Gol #Goal${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"substituicao":we=`
🔄 SUBSTITUIÇÃO! ${Ee()}!
🏆 ${ce}
🏟️ ${e.fixture.venue.name}
${_e(d)}
`.trim(),de=`

#${le} #${ue} #Substituicao #Substitution${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;default:we="Selecione um tipo de postagem válido.";break}return we+de},[t,e,w,T,A,j,H,n,u])(),ie=reactExports.useCallback(async()=>{try{await navigator.clipboard.writeText(J),U(!0),setTimeout(()=>U(!1),2e3)}catch(te){console.error("Falha ao copiar texto: ",te),alert("Erro ao copiar texto. Por favor, copie manualmente.")}},[J]),se=reactExports.useCallback(()=>{var ue,_e,Ee,we;if(!e)return[];const te=formatDateToBrazilian(convertToSaoPauloTime(new Date(e.fixture.date))),re=te.split(" às ")[1],ce=formatCompetitionRound(e,n),le=[{label:`Time da Casa (${e.teams.home.name})`,value:e.teams.home.name},{label:`Time Visitante (${e.teams.away.name})`,value:e.teams.away.name},{label:`Competição/Rodada (${ce})`,value:ce},{label:`Estádio (${e.fixture.venue.name})`,value:e.fixture.venue.name},{label:`Data (${te})`,value:te},{label:`Hora (${re})`,value:re},{label:`Árbitro (${e.fixture.referee||"Não Informado"})`,value:e.fixture.referee||"Não Informado"}];return t==="fimDeJogo"||t==="melhorDaPartida"||t==="gol"?[...le,{label:`Placar (${((ue=e.goals)==null?void 0:ue.home)||0} x ${((_e=e.goals)==null?void 0:_e.away)||0})`,value:`${((Ee=e.goals)==null?void 0:Ee.home)||0} x ${((we=e.goals)==null?void 0:we.away)||0}`}]:le},[e,t,n]),K=["fimDeJogo","melhorDaPartida","gol"].includes(t);return e?jsxRuntimeExports.jsxs("div",{className:"space-y-6 p-6 bg-white rounded-lg shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800 text-center mb-4",children:"Gerador de Texto para Postagem"}),K&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Edite o Conteúdo da Postagem:"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Textarea,{value:H,onChange:te=>ne(te.target.value),rows:6,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display",placeholder:"Escreva sua mensagem aqui..."})}),jsxRuntimeExports.jsx("div",{className:"w-full md:w-64",children:jsxRuntimeExports.jsxs(Popover,{children:[jsxRuntimeExports.jsx(PopoverTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-display-medium border-dashed border-gray-300",children:[jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 mr-2"})," Inserir Variáveis"]})}),jsxRuntimeExports.jsxs(PopoverContent,{className:"w-72 p-2 bg-white rounded-md shadow-lg border border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-display-semibold text-gray-800 mb-2",children:"Variáveis da Partida:"}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:se().map((te,re)=>jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>ne(ce=>ce+te.value+" "),className:"w-full justify-start text-left text-gray-700 hover:bg-red-50 hover:text-red-700 font-display",children:te.label},re))})]})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Preview da Postagem (Clique para Copiar):"}),jsxRuntimeExports.jsxs("div",{onClick:ie,className:`relative p-4 border rounded-lg cursor-pointer transition-all min-h-[100px]
            ${Y?"border-green-500 bg-green-50":"border-gray-200 hover:border-red-300 hover:bg-red-50"}
            font-display whitespace-pre-wrap break-words text-gray-800`,style:{whiteSpace:"pre-wrap"},children:[w?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-4",children:[jsxRuntimeExports.jsx(Info,{className:"w-5 h-5 animate-spin text-red-600 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Preparando texto..."})]}):J,Y&&jsxRuntimeExports.jsxs("div",{className:"absolute top-2 right-2 flex items-center text-green-600 text-sm",children:[jsxRuntimeExports.jsx(ClipboardCheck,{className:"w-4 h-4 mr-1"})," Copiado!"]}),!Y&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 text-gray-400",children:jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 font-display mt-1",children:"O texto acima será copiado para todas as suas redes sociais."})]})]}):jsxRuntimeExports.jsx("div",{className:"p-4 text-gray-600 font-display-medium",children:"Nenhuma partida selecionada para gerar o texto."})};function useCombinedRefs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return reactExports.useMemo(()=>s=>{e.forEach(o=>o(s))},e)}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function isNode(t){return"nodeType"in t}function getWindow(t){var e,n;return t?isWindow(t)?t:isNode(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function isDocument(t){const{Document:e}=getWindow(t);return t instanceof e}function isHTMLElement(t){return isWindow(t)?!1:t instanceof getWindow(t).HTMLElement}function isSVGElement(t){return t instanceof getWindow(t).SVGElement}function getOwnerDocument(t){return t?isWindow(t)?t.document:isNode(t)?isDocument(t)?t:isHTMLElement(t)||isSVGElement(t)?t.ownerDocument:document:document:document}const useIsomorphicLayoutEffect=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(t){const e=reactExports.useRef(t);return useIsomorphicLayoutEffect(()=>{e.current=t}),reactExports.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e.current==null?void 0:e.current(...s)},[])}function useInterval(){const t=reactExports.useRef(null),e=reactExports.useCallback((s,o)=>{t.current=setInterval(s,o)},[]),n=reactExports.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function useLatestValue(t,e){e===void 0&&(e=[t]);const n=reactExports.useRef(t);return useIsomorphicLayoutEffect(()=>{n.current!==t&&(n.current=t)},e),n}function useLazyMemo(t,e){const n=reactExports.useRef();return reactExports.useMemo(()=>{const s=t(n.current);return n.current=s,s},[...e])}function useNodeRef(t){const e=useEvent(t),n=reactExports.useRef(null),s=reactExports.useCallback(o=>{o!==n.current&&(e==null||e(o,n.current)),n.current=o},[]);return[n,s]}function usePrevious$2(t){const e=reactExports.useRef();return reactExports.useEffect(()=>{e.current=t},[t]),e.current}let ids={};function useUniqueId(t,e){return reactExports.useMemo(()=>{if(e)return e;const n=ids[t]==null?0:ids[t]+1;return ids[t]=n,t+"-"+n},[t,e])}function createAdjustmentFn(t){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.reduce((u,d)=>{const g=Object.entries(d);for(const[y,v]of g){const w=u[y];w!=null&&(u[y]=w+t*v)}return u},{...e})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(t){return"clientX"in t&&"clientY"in t}function isKeyboardEvent(t){if(!t)return!1;const{KeyboardEvent:e}=getWindow(t.target);return e&&t instanceof e}function isTouchEvent(t){if(!t)return!1;const{TouchEvent:e}=getWindow(t.target);return e&&t instanceof e}function getEventCoordinates(t){if(isTouchEvent(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return hasViewportRelativeCoordinates(t)?{x:t.clientX,y:t.clientY}:null}const CSS$1=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[CSS$1.Translate.toString(t),CSS$1.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:s}=t;return e+" "+n+"ms "+s}}}),SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(t){return t.matches(SELECTOR)?t:t.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(t){let{id:e,value:n}=t;return React.createElement("div",{id:e,style:hiddenStyles},n)}function LiveRegion(t){let{id:e,announcement:n,ariaLiveType:s="assertive"}=t;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React.createElement("div",{id:e,style:o,role:"status","aria-live":s,"aria-atomic":!0},n)}function useAnnouncement(){const[t,e]=reactExports.useState("");return{announce:reactExports.useCallback(s=>{s!=null&&e(s)},[]),announcement:t}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(t){const e=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function useDndMonitorProvider(){const[t]=reactExports.useState(()=>new Set),e=reactExports.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[reactExports.useCallback(s=>{let{type:o,event:u}=s;t.forEach(d=>{var g;return(g=d[o])==null?void 0:g.call(d,u)})},[t]),e]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Accessibility(t){let{announcements:e=defaultAnnouncements,container:n,hiddenTextDescribedById:s,screenReaderInstructions:o=defaultScreenReaderInstructions}=t;const{announce:u,announcement:d}=useAnnouncement(),g=useUniqueId("DndLiveRegion"),[y,v]=reactExports.useState(!1);if(reactExports.useEffect(()=>{v(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart(T){let{active:A}=T;u(e.onDragStart({active:A}))},onDragMove(T){let{active:A,over:C}=T;e.onDragMove&&u(e.onDragMove({active:A,over:C}))},onDragOver(T){let{active:A,over:C}=T;u(e.onDragOver({active:A,over:C}))},onDragEnd(T){let{active:A,over:C}=T;u(e.onDragEnd({active:A,over:C}))},onDragCancel(T){let{active:A,over:C}=T;u(e.onDragCancel({active:A,over:C}))}}),[u,e])),!y)return null;const w=React.createElement(React.Fragment,null,React.createElement(HiddenText,{id:s,value:o.draggable}),React.createElement(LiveRegion,{id:g,announcement:d}));return n?reactDomExports.createPortal(w,n):w}var Action;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop$1(){}function useSensor(t,e){return reactExports.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function useSensors(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return reactExports.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const defaultCoordinates=Object.freeze({x:0,y:0});function distanceBetween(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function sortCollisionsAsc(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return n-s}function sortCollisionsDesc(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return s-n}function cornersOfRectangle(t){let{left:e,top:n,height:s,width:o}=t;return[{x:e,y:n},{x:e+o,y:n},{x:e,y:n+s},{x:e+o,y:n+s}]}function getFirstCollision(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function centerOfRectangle(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const closestCenter=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const o=centerOfRectangle(e,e.left,e.top),u=[];for(const d of s){const{id:g}=d,y=n.get(g);if(y){const v=distanceBetween(centerOfRectangle(y),o);u.push({id:g,data:{droppableContainer:d,value:v}})}}return u.sort(sortCollisionsAsc)},closestCorners=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const o=cornersOfRectangle(e),u=[];for(const d of s){const{id:g}=d,y=n.get(g);if(y){const v=cornersOfRectangle(y),w=o.reduce((A,C,j)=>A+distanceBetween(v[j],C),0),T=Number((w/4).toFixed(4));u.push({id:g,data:{droppableContainer:d,value:T}})}}return u.sort(sortCollisionsAsc)};function getIntersectionRatio(t,e){const n=Math.max(e.top,t.top),s=Math.max(e.left,t.left),o=Math.min(e.left+e.width,t.left+t.width),u=Math.min(e.top+e.height,t.top+t.height),d=o-s,g=u-n;if(s<o&&n<u){const y=e.width*e.height,v=t.width*t.height,w=d*g,T=w/(y+v-w);return Number(T.toFixed(4))}return 0}const rectIntersection=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const o=[];for(const u of s){const{id:d}=u,g=n.get(d);if(g){const y=getIntersectionRatio(g,e);y>0&&o.push({id:d,data:{droppableContainer:u,value:y}})}}return o.sort(sortCollisionsDesc)};function adjustScale(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function getRectDelta(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:defaultCoordinates}function createRectAdjustmentFn(t){return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((d,g)=>({...d,top:d.top+t*g.y,bottom:d.bottom+t*g.y,left:d.left+t*g.x,right:d.right+t*g.x}),{...n})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function inverseTransform(t,e,n){const s=parseTransform(e);if(!s)return t;const{scaleX:o,scaleY:u,x:d,y:g}=s,y=t.left-d-(1-o)*parseFloat(n),v=t.top-g-(1-u)*parseFloat(n.slice(n.indexOf(" ")+1)),w=o?t.width/o:t.width,T=u?t.height/u:t.height;return{width:w,height:T,top:v,right:y+w,bottom:v+T,left:y}}const defaultOptions={ignoreTransform:!1};function getClientRect(t,e){e===void 0&&(e=defaultOptions);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:v,transformOrigin:w}=getWindow(t).getComputedStyle(t);v&&(n=inverseTransform(n,v,w))}const{top:s,left:o,width:u,height:d,bottom:g,right:y}=n;return{top:s,left:o,width:u,height:d,bottom:g,right:y}}function getTransformAgnosticClientRect(t){return getClientRect(t,{ignoreTransform:!0})}function getWindowClientRect(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function isFixed(t,e){return e===void 0&&(e=getWindow(t).getComputedStyle(t)),e.position==="fixed"}function isScrollable(t,e){e===void 0&&(e=getWindow(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=e[o];return typeof u=="string"?n.test(u):!1})}function getScrollableAncestors(t,e){const n=[];function s(o){if(e!=null&&n.length>=e||!o)return n;if(isDocument(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!isHTMLElement(o)||isSVGElement(o)||n.includes(o))return n;const u=getWindow(t).getComputedStyle(o);return o!==t&&isScrollable(o,u)&&n.push(o),isFixed(o,u)?n:s(o.parentNode)}return t?s(t):n}function getFirstScrollableAncestor(t){const[e]=getScrollableAncestors(t,1);return e??null}function getScrollableElement(t){return!canUseDOM||!t?null:isWindow(t)?t:isNode(t)?isDocument(t)||t===getOwnerDocument(t).scrollingElement?window:isHTMLElement(t)?t:null:null}function getScrollXCoordinate(t){return isWindow(t)?t.scrollX:t.scrollLeft}function getScrollYCoordinate(t){return isWindow(t)?t.scrollY:t.scrollTop}function getScrollCoordinates(t){return{x:getScrollXCoordinate(t),y:getScrollYCoordinate(t)}}var Direction;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(t){return!canUseDOM||!t?!1:t===document.scrollingElement}function getScrollPosition(t){const e={x:0,y:0},n=isDocumentScrollingElement(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},o=t.scrollTop<=e.y,u=t.scrollLeft<=e.x,d=t.scrollTop>=s.y,g=t.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:d,isRight:g,maxScroll:s,minScroll:e}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(t,e,n,s,o){let{top:u,left:d,right:g,bottom:y}=n;s===void 0&&(s=10),o===void 0&&(o=defaultThreshold);const{isTop:v,isBottom:w,isLeft:T,isRight:A}=getScrollPosition(t),C={x:0,y:0},j={x:0,y:0},D={height:e.height*o.y,width:e.width*o.x};return!v&&u<=e.top+D.height?(C.y=Direction.Backward,j.y=s*Math.abs((e.top+D.height-u)/D.height)):!w&&y>=e.bottom-D.height&&(C.y=Direction.Forward,j.y=s*Math.abs((e.bottom-D.height-y)/D.height)),!A&&g>=e.right-D.width?(C.x=Direction.Forward,j.x=s*Math.abs((e.right-D.width-g)/D.width)):!T&&d<=e.left+D.width&&(C.x=Direction.Backward,j.x=s*Math.abs((e.left+D.width-d)/D.width)),{direction:C,speed:j}}function getScrollElementRect(t){if(t===document.scrollingElement){const{innerWidth:u,innerHeight:d}=window;return{top:0,left:0,right:u,bottom:d,width:u,height:d}}const{top:e,left:n,right:s,bottom:o}=t.getBoundingClientRect();return{top:e,left:n,right:s,bottom:o,width:t.clientWidth,height:t.clientHeight}}function getScrollOffsets(t){return t.reduce((e,n)=>add(e,getScrollCoordinates(n)),defaultCoordinates)}function getScrollXOffset(t){return t.reduce((e,n)=>e+getScrollXCoordinate(n),0)}function getScrollYOffset(t){return t.reduce((e,n)=>e+getScrollYCoordinate(n),0)}function scrollIntoViewIfNeeded(t,e){if(e===void 0&&(e=getClientRect),!t)return;const{top:n,left:s,bottom:o,right:u}=e(t);getFirstScrollableAncestor(t)&&(o<=0||u<=0||n>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];let Rect$1=class{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=getScrollableAncestors(n),o=getScrollOffsets(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[u,d,g]of properties)for(const y of d)Object.defineProperty(this,y,{get:()=>{const v=g(s),w=o[u]-v;return this.rect[y]+w},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}};class Listeners{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var o;(o=this.target)==null||o.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function getEventListenerTarget(t){const{EventTarget:e}=getWindow(t);return t instanceof e?t:getOwnerDocument(t)}function hasExceededDistance(t,e){const n=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var EventName;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault(t){t.preventDefault()}function stopPropagation(t){t.stopPropagation()}var KeyboardCode;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter,KeyboardCode.Tab]},defaultKeyboardCoordinateGetter=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case KeyboardCode.Right:return{...n,x:n.x+25};case KeyboardCode.Left:return{...n,x:n.x-25};case KeyboardCode.Down:return{...n,y:n.y+25};case KeyboardCode.Up:return{...n,y:n.y-25}}};class KeyboardSensor{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Listeners(getOwnerDocument(n)),this.windowListeners=new Listeners(getWindow(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&scrollIntoViewIfNeeded(s),n(defaultCoordinates)}handleKeyDown(e){if(isKeyboardEvent(e)){const{active:n,context:s,options:o}=this.props,{keyboardCodes:u=defaultKeyboardCodes,coordinateGetter:d=defaultKeyboardCoordinateGetter,scrollBehavior:g="smooth"}=o,{code:y}=e;if(u.end.includes(y)){this.handleEnd(e);return}if(u.cancel.includes(y)){this.handleCancel(e);return}const{collisionRect:v}=s.current,w=v?{x:v.left,y:v.top}:defaultCoordinates;this.referenceCoordinates||(this.referenceCoordinates=w);const T=d(e,{active:n,context:s.current,currentCoordinates:w});if(T){const A=subtract(T,w),C={x:0,y:0},{scrollableAncestors:j}=s.current;for(const D of j){const H=e.code,{isTop:ne,isRight:Y,isLeft:U,isBottom:ee,maxScroll:J,minScroll:ie}=getScrollPosition(D),se=getScrollElementRect(D),K={x:Math.min(H===KeyboardCode.Right?se.right-se.width/2:se.right,Math.max(H===KeyboardCode.Right?se.left:se.left+se.width/2,T.x)),y:Math.min(H===KeyboardCode.Down?se.bottom-se.height/2:se.bottom,Math.max(H===KeyboardCode.Down?se.top:se.top+se.height/2,T.y))},te=H===KeyboardCode.Right&&!Y||H===KeyboardCode.Left&&!U,re=H===KeyboardCode.Down&&!ee||H===KeyboardCode.Up&&!ne;if(te&&K.x!==T.x){const ce=D.scrollLeft+A.x,le=H===KeyboardCode.Right&&ce<=J.x||H===KeyboardCode.Left&&ce>=ie.x;if(le&&!A.y){D.scrollTo({left:ce,behavior:g});return}le?C.x=D.scrollLeft-ce:C.x=H===KeyboardCode.Right?D.scrollLeft-J.x:D.scrollLeft-ie.x,C.x&&D.scrollBy({left:-C.x,behavior:g});break}else if(re&&K.y!==T.y){const ce=D.scrollTop+A.y,le=H===KeyboardCode.Down&&ce<=J.y||H===KeyboardCode.Up&&ce>=ie.y;if(le&&!A.x){D.scrollTo({top:ce,behavior:g});return}le?C.y=D.scrollTop-ce:C.y=H===KeyboardCode.Down?D.scrollTop-J.y:D.scrollTop-ie.y,C.y&&D.scrollBy({top:-C.y,behavior:g});break}}this.handleMove(e,add(subtract(T,this.referenceCoordinates),C))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:s=defaultKeyboardCodes,onActivation:o}=e,{active:u}=n;const{code:d}=t.nativeEvent;if(s.start.includes(d)){const g=u.activatorNode.current;return g&&t.target!==g?!1:(t.preventDefault(),o==null||o({event:t.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(t){return!!(t&&"distance"in t)}function isDelayConstraint(t){return!!(t&&"delay"in t)}class AbstractPointerSensor{constructor(e,n,s){var o;s===void 0&&(s=getEventListenerTarget(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:u}=e,{target:d}=u;this.props=e,this.events=n,this.document=getOwnerDocument(d),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(s),this.windowListeners=new Listeners(getWindow(d)),this.initialCoordinates=(o=getEventCoordinates(u))!=null?o:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault),this.documentListeners.add(EventName.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(isDistanceConstraint(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:o}=this.props;o(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:d,options:{activationConstraint:g}}=u;if(!o)return;const y=(n=getEventCoordinates(e))!=null?n:defaultCoordinates,v=subtract(o,y);if(!s&&g){if(isDistanceConstraint(g)){if(g.tolerance!=null&&hasExceededDistance(v,g.tolerance))return this.handleCancel();if(hasExceededDistance(v,g.distance))return this.handleStart()}if(isDelayConstraint(g)&&hasExceededDistance(v,g.tolerance))return this.handleCancel();this.handlePending(g,v);return}e.cancelable&&e.preventDefault(),d(y)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const events={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(e){const{event:n}=e,s=getOwnerDocument(n.target);super(e,events,s)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const events$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(t){t[t.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(e){super(e,events$1,getOwnerDocument(e.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return n.button===MouseButton.RightClick?!1:(s==null||s({event:n}),!0)}}];const events$2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(e){super(e,events$2)}static setup(){return window.addEventListener(events$2.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,e)};function e(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;const{touches:o}=n;return o.length>1?!1:(s==null||s({event:n}),!0)}}];var AutoScrollActivator;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(t){let{acceleration:e,activator:n=AutoScrollActivator.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:d=5,order:g=TraversalOrder.TreeOrder,pointerCoordinates:y,scrollableAncestors:v,scrollableAncestorRects:w,delta:T,threshold:A}=t;const C=useScrollIntent({delta:T,disabled:!u}),[j,D]=useInterval(),H=reactExports.useRef({x:0,y:0}),ne=reactExports.useRef({x:0,y:0}),Y=reactExports.useMemo(()=>{switch(n){case AutoScrollActivator.Pointer:return y?{top:y.y,bottom:y.y,left:y.x,right:y.x}:null;case AutoScrollActivator.DraggableRect:return o}},[n,o,y]),U=reactExports.useRef(null),ee=reactExports.useCallback(()=>{const ie=U.current;if(!ie)return;const se=H.current.x*ne.current.x,K=H.current.y*ne.current.y;ie.scrollBy(se,K)},[]),J=reactExports.useMemo(()=>g===TraversalOrder.TreeOrder?[...v].reverse():v,[g,v]);reactExports.useEffect(()=>{if(!u||!v.length||!Y){D();return}for(const ie of J){if((s==null?void 0:s(ie))===!1)continue;const se=v.indexOf(ie),K=w[se];if(!K)continue;const{direction:te,speed:re}=getScrollDirectionAndSpeed(ie,K,Y,e,A);for(const ce of["x","y"])C[ce][te[ce]]||(re[ce]=0,te[ce]=0);if(re.x>0||re.y>0){D(),U.current=ie,j(ee,d),H.current=re,ne.current=te;return}}H.current={x:0,y:0},ne.current={x:0,y:0},D()},[e,ee,s,D,u,d,JSON.stringify(Y),JSON.stringify(C),j,v,J,w,JSON.stringify(A)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(t){let{delta:e,disabled:n}=t;const s=usePrevious$2(e);return useLazyMemo(o=>{if(n||!s||!o)return defaultScrollIntent;const u={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Direction.Backward]:o.x[Direction.Backward]||u.x===-1,[Direction.Forward]:o.x[Direction.Forward]||u.x===1},y:{[Direction.Backward]:o.y[Direction.Backward]||u.y===-1,[Direction.Forward]:o.y[Direction.Forward]||u.y===1}}},[n,e,s])}function useCachedNode(t,e){const n=e!=null?t.get(e):void 0,s=n?n.node.current:null;return useLazyMemo(o=>{var u;return e==null?null:(u=s??o)!=null?u:null},[s,e])}function useCombineActivators(t,e){return reactExports.useMemo(()=>t.reduce((n,s)=>{const{sensor:o}=s,u=o.activators.map(d=>({eventName:d.eventName,handler:e(d.handler,s)}));return[...n,...u]},[]),[t,e])}var MeasuringStrategy;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(t){t.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(t,e){let{dragging:n,dependencies:s,config:o}=e;const[u,d]=reactExports.useState(null),{frequency:g,measure:y,strategy:v}=o,w=reactExports.useRef(t),T=H(),A=useLatestValue(T),C=reactExports.useCallback(function(ne){ne===void 0&&(ne=[]),!A.current&&d(Y=>Y===null?ne:Y.concat(ne.filter(U=>!Y.includes(U))))},[A]),j=reactExports.useRef(null),D=useLazyMemo(ne=>{if(T&&!n)return defaultValue;if(!ne||ne===defaultValue||w.current!==t||u!=null){const Y=new Map;for(let U of t){if(!U)continue;if(u&&u.length>0&&!u.includes(U.id)&&U.rect.current){Y.set(U.id,U.rect.current);continue}const ee=U.node.current,J=ee?new Rect$1(y(ee),ee):null;U.rect.current=J,J&&Y.set(U.id,J)}return Y}return ne},[t,u,n,T,y]);return reactExports.useEffect(()=>{w.current=t},[t]),reactExports.useEffect(()=>{T||C()},[n,T]),reactExports.useEffect(()=>{u&&u.length>0&&d(null)},[JSON.stringify(u)]),reactExports.useEffect(()=>{T||typeof g!="number"||j.current!==null||(j.current=setTimeout(()=>{C(),j.current=null},g))},[g,T,C,...s]),{droppableRects:D,measureDroppableContainers:C,measuringScheduled:u!=null};function H(){switch(v){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return n;default:return!n}}}function useInitialValue(t,e){return useLazyMemo(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function useInitialRect(t,e){return useInitialValue(t,e)}function useMutationObserver(t){let{callback:e,disabled:n}=t;const s=useEvent(e),o=reactExports.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,n]);return reactExports.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function useResizeObserver(t){let{callback:e,disabled:n}=t;const s=useEvent(e),o=reactExports.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[n]);return reactExports.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function defaultMeasure(t){return new Rect$1(getClientRect(t),t)}function useRect(t,e,n){e===void 0&&(e=defaultMeasure);const[s,o]=reactExports.useState(null);function u(){o(y=>{if(!t)return null;if(t.isConnected===!1){var v;return(v=y??n)!=null?v:null}const w=e(t);return JSON.stringify(y)===JSON.stringify(w)?y:w})}const d=useMutationObserver({callback(y){if(t)for(const v of y){const{type:w,target:T}=v;if(w==="childList"&&T instanceof HTMLElement&&T.contains(t)){u();break}}}}),g=useResizeObserver({callback:u});return useIsomorphicLayoutEffect(()=>{u(),t?(g==null||g.observe(t),d==null||d.observe(document.body,{childList:!0,subtree:!0})):(g==null||g.disconnect(),d==null||d.disconnect())},[t]),s}function useRectDelta(t){const e=useInitialValue(t);return getRectDelta(t,e)}const defaultValue$1=[];function useScrollableAncestors(t){const e=reactExports.useRef(t),n=useLazyMemo(s=>t?s&&s!==defaultValue$1&&t&&e.current&&t.parentNode===e.current.parentNode?s:getScrollableAncestors(t):defaultValue$1,[t]);return reactExports.useEffect(()=>{e.current=t},[t]),n}function useScrollOffsets(t){const[e,n]=reactExports.useState(null),s=reactExports.useRef(t),o=reactExports.useCallback(u=>{const d=getScrollableElement(u.target);d&&n(g=>g?(g.set(d,getScrollCoordinates(d)),new Map(g)):null)},[]);return reactExports.useEffect(()=>{const u=s.current;if(t!==u){d(u);const g=t.map(y=>{const v=getScrollableElement(y);return v?(v.addEventListener("scroll",o,{passive:!0}),[v,getScrollCoordinates(v)]):null}).filter(y=>y!=null);n(g.length?new Map(g):null),s.current=t}return()=>{d(t),d(u)};function d(g){g.forEach(y=>{const v=getScrollableElement(y);v==null||v.removeEventListener("scroll",o)})}},[o,t]),reactExports.useMemo(()=>t.length?e?Array.from(e.values()).reduce((u,d)=>add(u,d),defaultCoordinates):getScrollOffsets(t):defaultCoordinates,[t,e])}function useScrollOffsetsDelta(t,e){e===void 0&&(e=[]);const n=reactExports.useRef(null);return reactExports.useEffect(()=>{n.current=null},e),reactExports.useEffect(()=>{const s=t!==defaultCoordinates;s&&!n.current&&(n.current=t),!s&&n.current&&(n.current=null)},[t]),n.current?subtract(t,n.current):defaultCoordinates}function useSensorSetup(t){reactExports.useEffect(()=>{if(!canUseDOM)return;const e=t.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function useSyntheticListeners(t,e){return reactExports.useMemo(()=>t.reduce((n,s)=>{let{eventName:o,handler:u}=s;return n[o]=d=>{u(d,e)},n},{}),[t,e])}function useWindowRect(t){return reactExports.useMemo(()=>t?getWindowClientRect(t):null,[t])}const defaultValue$2=[];function useRects(t,e){e===void 0&&(e=getClientRect);const[n]=t,s=useWindowRect(n?getWindow(n):null),[o,u]=reactExports.useState(defaultValue$2);function d(){u(()=>t.length?t.map(y=>isDocumentScrollingElement(y)?s:new Rect$1(e(y),y)):defaultValue$2)}const g=useResizeObserver({callback:d});return useIsomorphicLayoutEffect(()=>{g==null||g.disconnect(),d(),t.forEach(y=>g==null?void 0:g.observe(y))},[t]),o}function getMeasurableNode(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return isHTMLElement(e)?e:t}function useDragOverlayMeasuring(t){let{measure:e}=t;const[n,s]=reactExports.useState(null),o=reactExports.useCallback(v=>{for(const{target:w}of v)if(isHTMLElement(w)){s(T=>{const A=e(w);return T?{...T,width:A.width,height:A.height}:A});break}},[e]),u=useResizeObserver({callback:o}),d=reactExports.useCallback(v=>{const w=getMeasurableNode(v);u==null||u.disconnect(),w&&(u==null||u.observe(w)),s(w?e(w):null)},[e,u]),[g,y]=useNodeRef(d);return reactExports.useMemo(()=>({nodeRef:g,rect:n,setRef:y}),[n,g,y])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop$1},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop$1,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop$1,draggableNodes:new Map,over:null,measureDroppableContainers:noop$1},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(t,e){switch(e.type){case Action.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Action.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Action.DragEnd:case Action.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:n}=e,{id:s}=n,o=new DroppableContainersMap(t.droppable.containers);return o.set(s,n),{...t,droppable:{...t.droppable,containers:o}}}case Action.SetDroppableDisabled:{const{id:n,key:s,disabled:o}=e,u=t.droppable.containers.get(n);if(!u||s!==u.key)return t;const d=new DroppableContainersMap(t.droppable.containers);return d.set(n,{...u,disabled:o}),{...t,droppable:{...t.droppable,containers:d}}}case Action.UnregisterDroppable:{const{id:n,key:s}=e,o=t.droppable.containers.get(n);if(!o||s!==o.key)return t;const u=new DroppableContainersMap(t.droppable.containers);return u.delete(n),{...t,droppable:{...t.droppable,containers:u}}}default:return t}}function RestoreFocus(t){let{disabled:e}=t;const{active:n,activatorEvent:s,draggableNodes:o}=reactExports.useContext(InternalContext),u=usePrevious$2(s),d=usePrevious$2(n==null?void 0:n.id);return reactExports.useEffect(()=>{if(!e&&!s&&u&&d!=null){if(!isKeyboardEvent(u)||document.activeElement===u.target)return;const g=o.get(d);if(!g)return;const{activatorNode:y,node:v}=g;if(!y.current&&!v.current)return;requestAnimationFrame(()=>{for(const w of[y.current,v.current]){if(!w)continue;const T=findFirstFocusableNode(w);if(T){T.focus();break}}})}},[s,e,o,d,u]),null}function applyModifiers(t,e){let{transform:n,...s}=e;return t!=null&&t.length?t.reduce((o,u)=>u({transform:o,...s}),n):n}function useMeasuringConfiguration(t){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...t==null?void 0:t.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...t==null?void 0:t.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function useLayoutShiftScrollCompensation(t){let{activeNode:e,measure:n,initialRect:s,config:o=!0}=t;const u=reactExports.useRef(!1),{x:d,y:g}=typeof o=="boolean"?{x:o,y:o}:o;useIsomorphicLayoutEffect(()=>{if(!d&&!g||!e){u.current=!1;return}if(u.current||!s)return;const v=e==null?void 0:e.node.current;if(!v||v.isConnected===!1)return;const w=n(v),T=getRectDelta(w,s);if(d||(T.x=0),g||(T.y=0),u.current=!0,Math.abs(T.x)>0||Math.abs(T.y)>0){const A=getFirstScrollableAncestor(v);A&&A.scrollBy({top:T.y,left:T.x})}},[e,d,g,s,n])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates,scaleX:1,scaleY:1});var Status;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function t(e){var n,s,o,u;let{id:d,accessibility:g,autoScroll:y=!0,children:v,sensors:w=defaultSensors,collisionDetection:T=rectIntersection,measuring:A,modifiers:C,...j}=e;const D=reactExports.useReducer(reducer,void 0,getInitialState),[H,ne]=D,[Y,U]=useDndMonitorProvider(),[ee,J]=reactExports.useState(Status.Uninitialized),ie=ee===Status.Initialized,{draggable:{active:se,nodes:K,translate:te},droppable:{containers:re}}=H,ce=se!=null?K.get(se):null,le=reactExports.useRef({initial:null,translated:null}),ue=reactExports.useMemo(()=>{var On;return se!=null?{id:se,data:(On=ce==null?void 0:ce.data)!=null?On:defaultData,rect:le}:null},[se,ce]),_e=reactExports.useRef(null),[Ee,we]=reactExports.useState(null),[de,me]=reactExports.useState(null),xe=useLatestValue(j,Object.values(j)),pe=useUniqueId("DndDescribedBy",d),ve=reactExports.useMemo(()=>re.getEnabled(),[re]),Oe=useMeasuringConfiguration(A),{droppableRects:Te,measureDroppableContainers:Le,measuringScheduled:Me}=useDroppableMeasuring(ve,{dragging:ie,dependencies:[te.x,te.y],config:Oe.droppable}),Ce=useCachedNode(K,se),be=reactExports.useMemo(()=>de?getEventCoordinates(de):null,[de]),Ve=fr(),$e=useInitialRect(Ce,Oe.draggable.measure);useLayoutShiftScrollCompensation({activeNode:se!=null?K.get(se):null,config:Ve.layoutShiftCompensation,initialRect:$e,measure:Oe.draggable.measure});const Fe=useRect(Ce,Oe.draggable.measure,$e),je=useRect(Ce?Ce.parentElement:null),De=reactExports.useRef({activatorEvent:null,active:null,activeNode:Ce,collisionRect:null,collisions:null,droppableRects:Te,draggableNodes:K,draggingNode:null,draggingNodeRect:null,droppableContainers:re,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ie=re.getNodeFor((n=De.current.over)==null?void 0:n.id),Re=useDragOverlayMeasuring({measure:Oe.dragOverlay.measure}),Ne=(s=Re.nodeRef.current)!=null?s:Ce,Ue=ie?(o=Re.rect)!=null?o:Fe:null,pt=!!(Re.nodeRef.current&&Re.rect),Ze=useRectDelta(pt?null:Fe),mn=useWindowRect(Ne?getWindow(Ne):null),Ut=useScrollableAncestors(ie?Ie??Ce:null),Lt=useRects(Ut),Dt=applyModifiers(C,{transform:{x:te.x-Ze.x,y:te.y-Ze.y,scaleX:1,scaleY:1},activatorEvent:de,active:ue,activeNodeRect:Fe,containerNodeRect:je,draggingNodeRect:Ue,over:De.current.over,overlayNodeRect:Re.rect,scrollableAncestors:Ut,scrollableAncestorRects:Lt,windowRect:mn}),Gt=be?add(be,te):null,Ke=useScrollOffsets(Ut),rt=useScrollOffsetsDelta(Ke),Ct=useScrollOffsetsDelta(Ke,[Fe]),tt=add(Dt,rt),Et=Ue?getAdjustedRect(Ue,Dt):null,un=ue&&Et?T({active:ue,collisionRect:Et,droppableRects:Te,droppableContainers:ve,pointerCoordinates:Gt}):null,hn=getFirstCollision(un,"id"),[xn,Dn]=reactExports.useState(null),Sn=pt?Dt:add(Dt,Ct),Hn=adjustScale(Sn,(u=xn==null?void 0:xn.rect)!=null?u:null,Fe),Pn=reactExports.useRef(null),Gn=reactExports.useCallback((On,vn)=>{let{sensor:Ln,options:gs}=vn;if(_e.current==null)return;const cs=K.get(_e.current);if(!cs)return;const js=On.nativeEvent,Ls=new Ln({active:_e.current,activeNode:cs,event:js,options:gs,context:De,onAbort(wn){if(!K.get(wn))return;const{onDragAbort:es}=xe.current,Rs={id:wn};es==null||es(Rs),Y({type:"onDragAbort",event:Rs})},onPending(wn,$n,es,Rs){if(!K.get(wn))return;const{onDragPending:qs}=xe.current,Ts={id:wn,constraint:$n,initialCoordinates:es,offset:Rs};qs==null||qs(Ts),Y({type:"onDragPending",event:Ts})},onStart(wn){const $n=_e.current;if($n==null)return;const es=K.get($n);if(!es)return;const{onDragStart:Rs}=xe.current,Mr={activatorEvent:js,active:{id:$n,data:es.data,rect:le}};reactDomExports.unstable_batchedUpdates(()=>{Rs==null||Rs(Mr),J(Status.Initializing),ne({type:Action.DragStart,initialCoordinates:wn,active:$n}),Y({type:"onDragStart",event:Mr}),we(Pn.current),me(js)})},onMove(wn){ne({type:Action.DragMove,coordinates:wn})},onEnd:Ks(Action.DragEnd),onCancel:Ks(Action.DragCancel)});Pn.current=Ls;function Ks(wn){return async function(){const{active:es,collisions:Rs,over:Mr,scrollAdjustedTranslate:qs}=De.current;let Ts=null;if(es&&qs){const{cancelDrop:Hs}=xe.current;Ts={activatorEvent:js,active:es,collisions:Rs,delta:qs,over:Mr},wn===Action.DragEnd&&typeof Hs=="function"&&await Promise.resolve(Hs(Ts))&&(wn=Action.DragCancel)}_e.current=null,reactDomExports.unstable_batchedUpdates(()=>{ne({type:wn}),J(Status.Uninitialized),Dn(null),we(null),me(null),Pn.current=null;const Hs=wn===Action.DragEnd?"onDragEnd":"onDragCancel";if(Ts){const Vr=xe.current[Hs];Vr==null||Vr(Ts),Y({type:Hs,event:Ts})}})}}},[K]),Xn=reactExports.useCallback((On,vn)=>(Ln,gs)=>{const cs=Ln.nativeEvent,js=K.get(gs);if(_e.current!==null||!js||cs.dndKit||cs.defaultPrevented)return;const Ls={active:js};On(Ln,vn.options,Ls)===!0&&(cs.dndKit={capturedBy:vn.sensor},_e.current=gs,Gn(Ln,vn))},[K,Gn]),kn=useCombineActivators(w,Xn);useSensorSetup(w),useIsomorphicLayoutEffect(()=>{Fe&&ee===Status.Initializing&&J(Status.Initialized)},[Fe,ee]),reactExports.useEffect(()=>{const{onDragMove:On}=xe.current,{active:vn,activatorEvent:Ln,collisions:gs,over:cs}=De.current;if(!vn||!Ln)return;const js={active:vn,activatorEvent:Ln,collisions:gs,delta:{x:tt.x,y:tt.y},over:cs};reactDomExports.unstable_batchedUpdates(()=>{On==null||On(js),Y({type:"onDragMove",event:js})})},[tt.x,tt.y]),reactExports.useEffect(()=>{const{active:On,activatorEvent:vn,collisions:Ln,droppableContainers:gs,scrollAdjustedTranslate:cs}=De.current;if(!On||_e.current==null||!vn||!cs)return;const{onDragOver:js}=xe.current,Ls=gs.get(hn),Ks=Ls&&Ls.rect.current?{id:Ls.id,rect:Ls.rect.current,data:Ls.data,disabled:Ls.disabled}:null,wn={active:On,activatorEvent:vn,collisions:Ln,delta:{x:cs.x,y:cs.y},over:Ks};reactDomExports.unstable_batchedUpdates(()=>{Dn(Ks),js==null||js(wn),Y({type:"onDragOver",event:wn})})},[hn]),useIsomorphicLayoutEffect(()=>{De.current={activatorEvent:de,active:ue,activeNode:Ce,collisionRect:Et,collisions:un,droppableRects:Te,draggableNodes:K,draggingNode:Ne,draggingNodeRect:Ue,droppableContainers:re,over:xn,scrollableAncestors:Ut,scrollAdjustedTranslate:tt},le.current={initial:Ue,translated:Et}},[ue,Ce,un,Et,K,Ne,Ue,Te,re,xn,Ut,tt]),useAutoScroller({...Ve,delta:te,draggingRect:Et,pointerCoordinates:Gt,scrollableAncestors:Ut,scrollableAncestorRects:Lt});const Ms=reactExports.useMemo(()=>({active:ue,activeNode:Ce,activeNodeRect:Fe,activatorEvent:de,collisions:un,containerNodeRect:je,dragOverlay:Re,draggableNodes:K,droppableContainers:re,droppableRects:Te,over:xn,measureDroppableContainers:Le,scrollableAncestors:Ut,scrollableAncestorRects:Lt,measuringConfiguration:Oe,measuringScheduled:Me,windowRect:mn}),[ue,Ce,Fe,de,un,je,Re,K,re,Te,xn,Le,Ut,Lt,Oe,Me,mn]),Zs=reactExports.useMemo(()=>({activatorEvent:de,activators:kn,active:ue,activeNodeRect:Fe,ariaDescribedById:{draggable:pe},dispatch:ne,draggableNodes:K,over:xn,measureDroppableContainers:Le}),[de,kn,ue,Fe,ne,pe,K,xn,Le]);return React.createElement(DndMonitorContext.Provider,{value:U},React.createElement(InternalContext.Provider,{value:Zs},React.createElement(PublicContext.Provider,{value:Ms},React.createElement(ActiveDraggableContext.Provider,{value:Hn},v)),React.createElement(RestoreFocus,{disabled:(g==null?void 0:g.restoreFocus)===!1})),React.createElement(Accessibility,{...g,hiddenTextDescribedById:pe}));function fr(){const On=(Ee==null?void 0:Ee.autoScrollEnabled)===!1,vn=typeof y=="object"?y.enabled===!1:y===!1,Ln=ie&&!On&&!vn;return typeof y=="object"?{...y,enabled:Ln}:{enabled:Ln}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX$1="Draggable";function useDraggable(t){let{id:e,data:n,disabled:s=!1,attributes:o}=t;const u=useUniqueId(ID_PREFIX$1),{activators:d,activatorEvent:g,active:y,activeNodeRect:v,ariaDescribedById:w,draggableNodes:T,over:A}=reactExports.useContext(InternalContext),{role:C=defaultRole,roleDescription:j="draggable",tabIndex:D=0}=o??{},H=(y==null?void 0:y.id)===e,ne=reactExports.useContext(H?ActiveDraggableContext:NullContext),[Y,U]=useNodeRef(),[ee,J]=useNodeRef(),ie=useSyntheticListeners(d,e),se=useLatestValue(n);useIsomorphicLayoutEffect(()=>(T.set(e,{id:e,key:u,node:Y,activatorNode:ee,data:se}),()=>{const te=T.get(e);te&&te.key===u&&T.delete(e)}),[T,e]);const K=reactExports.useMemo(()=>({role:C,tabIndex:D,"aria-disabled":s,"aria-pressed":H&&C===defaultRole?!0:void 0,"aria-roledescription":j,"aria-describedby":w.draggable}),[s,C,D,H,j,w.draggable]);return{active:y,activatorEvent:g,activeNodeRect:v,attributes:K,isDragging:H,listeners:s?void 0:ie,node:Y,over:A,setNodeRef:U,setActivatorNodeRef:J,transform:ne}}function useDndContext(){return reactExports.useContext(PublicContext)}const ID_PREFIX$1$1="Droppable",defaultResizeObserverConfig={timeout:25};function useDroppable(t){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:o}=t;const u=useUniqueId(ID_PREFIX$1$1),{active:d,dispatch:g,over:y,measureDroppableContainers:v}=reactExports.useContext(InternalContext),w=reactExports.useRef({disabled:n}),T=reactExports.useRef(!1),A=reactExports.useRef(null),C=reactExports.useRef(null),{disabled:j,updateMeasurementsFor:D,timeout:H}={...defaultResizeObserverConfig,...o},ne=useLatestValue(D??s),Y=reactExports.useCallback(()=>{if(!T.current){T.current=!0;return}C.current!=null&&clearTimeout(C.current),C.current=setTimeout(()=>{v(Array.isArray(ne.current)?ne.current:[ne.current]),C.current=null},H)},[H]),U=useResizeObserver({callback:Y,disabled:j||!d}),ee=reactExports.useCallback((K,te)=>{U&&(te&&(U.unobserve(te),T.current=!1),K&&U.observe(K))},[U]),[J,ie]=useNodeRef(ee),se=useLatestValue(e);return reactExports.useEffect(()=>{!U||!J.current||(U.disconnect(),T.current=!1,U.observe(J.current))},[J,U]),reactExports.useEffect(()=>(g({type:Action.RegisterDroppable,element:{id:s,key:u,disabled:n,node:J,rect:A,data:se}}),()=>g({type:Action.UnregisterDroppable,key:u,id:s})),[s]),reactExports.useEffect(()=>{n!==w.current.disabled&&(g({type:Action.SetDroppableDisabled,id:s,key:u,disabled:n}),w.current.disabled=n)},[s,u,n,g]),{active:d,rect:A,isOver:(y==null?void 0:y.id)===s,node:J,over:y,setNodeRef:ie}}function arrayMove(t,e,n){const s=t.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function getSortedRects(t,e){return t.reduce((n,s,o)=>{const u=e.get(s);return u&&(n[o]=u),n},Array(t.length))}function isValidIndex(t){return t!==null&&t>=0}function itemsEqual$1(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function normalizeDisabled(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const rectSortingStrategy=t=>{let{rects:e,activeIndex:n,overIndex:s,index:o}=t;const u=arrayMove(e,s,n),d=e[o],g=u[o];return!g||!d?null:{x:g.left-d.left,y:g.top-d.top,scaleX:g.width/d.width,scaleY:g.height/d.height}},defaultScale$1={scaleX:1,scaleY:1},verticalListSortingStrategy=t=>{var e;let{activeIndex:n,activeNodeRect:s,index:o,rects:u,overIndex:d}=t;const g=(e=u[n])!=null?e:s;if(!g)return null;if(o===n){const v=u[d];return v?{x:0,y:n<d?v.top+v.height-(g.top+g.height):v.top-g.top,...defaultScale$1}:null}const y=getItemGap$1(u,o,n);return o>n&&o<=d?{x:0,y:-g.height-y,...defaultScale$1}:o<n&&o>=d?{x:0,y:g.height+y,...defaultScale$1}:{x:0,y:0,...defaultScale$1}};function getItemGap$1(t,e,n){const s=t[e],o=t[e-1],u=t[e+1];return s?n<e?o?s.top-(o.top+o.height):u?u.top-(s.top+s.height):0:u?u.top-(s.top+s.height):o?s.top-(o.top+o.height):0:0}const ID_PREFIX="Sortable",Context$1=React.createContext({activeIndex:-1,containerId:ID_PREFIX,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rectSortingStrategy,disabled:{draggable:!1,droppable:!1}});function SortableContext(t){let{children:e,id:n,items:s,strategy:o=rectSortingStrategy,disabled:u=!1}=t;const{active:d,dragOverlay:g,droppableRects:y,over:v,measureDroppableContainers:w}=useDndContext(),T=useUniqueId(ID_PREFIX,n),A=g.rect!==null,C=reactExports.useMemo(()=>s.map(ie=>typeof ie=="object"&&"id"in ie?ie.id:ie),[s]),j=d!=null,D=d?C.indexOf(d.id):-1,H=v?C.indexOf(v.id):-1,ne=reactExports.useRef(C),Y=!itemsEqual$1(C,ne.current),U=H!==-1&&D===-1||Y,ee=normalizeDisabled(u);useIsomorphicLayoutEffect(()=>{Y&&j&&w(C)},[Y,C,j,w]),reactExports.useEffect(()=>{ne.current=C},[C]);const J=reactExports.useMemo(()=>({activeIndex:D,containerId:T,disabled:ee,disableTransforms:U,items:C,overIndex:H,useDragOverlay:A,sortedRects:getSortedRects(C,y),strategy:o}),[D,T,ee.draggable,ee.droppable,U,C,H,y,A,o]);return React.createElement(Context$1.Provider,{value:J},e)}const defaultNewIndexGetter=t=>{let{id:e,items:n,activeIndex:s,overIndex:o}=t;return arrayMove(n,s,o).indexOf(e)},defaultAnimateLayoutChanges=t=>{let{containerId:e,isSorting:n,wasDragging:s,index:o,items:u,newIndex:d,previousItems:g,previousContainerId:y,transition:v}=t;return!v||!s||g!==u&&o===d?!1:n?!0:d!==o&&e===y},defaultTransition={duration:200,easing:"ease"},transitionProperty="transform",disabledTransition=CSS$1.Transition.toString({property:transitionProperty,duration:0,easing:"linear"}),defaultAttributes={roleDescription:"sortable"};function useDerivedTransform(t){let{disabled:e,index:n,node:s,rect:o}=t;const[u,d]=reactExports.useState(null),g=reactExports.useRef(n);return useIsomorphicLayoutEffect(()=>{if(!e&&n!==g.current&&s.current){const y=o.current;if(y){const v=getClientRect(s.current,{ignoreTransform:!0}),w={x:y.left-v.left,y:y.top-v.top,scaleX:y.width/v.width,scaleY:y.height/v.height};(w.x||w.y)&&d(w)}}n!==g.current&&(g.current=n)},[e,n,s,o]),reactExports.useEffect(()=>{u&&d(null)},[u]),u}function useSortable(t){let{animateLayoutChanges:e=defaultAnimateLayoutChanges,attributes:n,disabled:s,data:o,getNewIndex:u=defaultNewIndexGetter,id:d,strategy:g,resizeObserverConfig:y,transition:v=defaultTransition}=t;const{items:w,containerId:T,activeIndex:A,disabled:C,disableTransforms:j,sortedRects:D,overIndex:H,useDragOverlay:ne,strategy:Y}=reactExports.useContext(Context$1),U=normalizeLocalDisabled(s,C),ee=w.indexOf(d),J=reactExports.useMemo(()=>({sortable:{containerId:T,index:ee,items:w},...o}),[T,o,ee,w]),ie=reactExports.useMemo(()=>w.slice(w.indexOf(d)),[w,d]),{rect:se,node:K,isOver:te,setNodeRef:re}=useDroppable({id:d,data:J,disabled:U.droppable,resizeObserverConfig:{updateMeasurementsFor:ie,...y}}),{active:ce,activatorEvent:le,activeNodeRect:ue,attributes:_e,setNodeRef:Ee,listeners:we,isDragging:de,over:me,setActivatorNodeRef:xe,transform:pe}=useDraggable({id:d,data:J,attributes:{...defaultAttributes,...n},disabled:U.draggable}),ve=useCombinedRefs(re,Ee),Oe=!!ce,Te=Oe&&!j&&isValidIndex(A)&&isValidIndex(H),Le=!ne&&de,Me=Le&&Te?pe:null,be=Te?Me??(g??Y)({rects:D,activeNodeRect:ue,activeIndex:A,overIndex:H,index:ee}):null,Ve=isValidIndex(A)&&isValidIndex(H)?u({id:d,items:w,activeIndex:A,overIndex:H}):ee,$e=ce==null?void 0:ce.id,Fe=reactExports.useRef({activeId:$e,items:w,newIndex:Ve,containerId:T}),je=w!==Fe.current.items,De=e({active:ce,containerId:T,isDragging:de,isSorting:Oe,id:d,index:ee,items:w,newIndex:Fe.current.newIndex,previousItems:Fe.current.items,previousContainerId:Fe.current.containerId,transition:v,wasDragging:Fe.current.activeId!=null}),Ie=useDerivedTransform({disabled:!De,index:ee,node:K,rect:se});return reactExports.useEffect(()=>{Oe&&Fe.current.newIndex!==Ve&&(Fe.current.newIndex=Ve),T!==Fe.current.containerId&&(Fe.current.containerId=T),w!==Fe.current.items&&(Fe.current.items=w)},[Oe,Ve,T,w]),reactExports.useEffect(()=>{if($e===Fe.current.activeId)return;if($e!=null&&Fe.current.activeId==null){Fe.current.activeId=$e;return}const Ne=setTimeout(()=>{Fe.current.activeId=$e},50);return()=>clearTimeout(Ne)},[$e]),{active:ce,activeIndex:A,attributes:_e,data:J,rect:se,index:ee,newIndex:Ve,items:w,isOver:te,isSorting:Oe,isDragging:de,listeners:we,node:K,overIndex:H,over:me,setNodeRef:ve,setActivatorNodeRef:xe,setDroppableNodeRef:re,setDraggableNodeRef:Ee,transform:Ie??be,transition:Re()};function Re(){if(Ie||je&&Fe.current.newIndex===ee)return disabledTransition;if(!(Le&&!isKeyboardEvent(le)||!v)&&(Oe||De))return CSS$1.Transition.toString({...v,property:transitionProperty})}}function normalizeLocalDisabled(t,e){var n,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(s=t==null?void 0:t.droppable)!=null?s:e.droppable}}function hasSortableData(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const directions=[KeyboardCode.Down,KeyboardCode.Right,KeyboardCode.Up,KeyboardCode.Left],sortableKeyboardCoordinates=(t,e)=>{let{context:{active:n,collisionRect:s,droppableRects:o,droppableContainers:u,over:d,scrollableAncestors:g}}=e;if(directions.includes(t.code)){if(t.preventDefault(),!n||!s)return;const y=[];u.getEnabled().forEach(T=>{if(!T||T!=null&&T.disabled)return;const A=o.get(T.id);if(A)switch(t.code){case KeyboardCode.Down:s.top<A.top&&y.push(T);break;case KeyboardCode.Up:s.top>A.top&&y.push(T);break;case KeyboardCode.Left:s.left>A.left&&y.push(T);break;case KeyboardCode.Right:s.left<A.left&&y.push(T);break}});const v=closestCorners({collisionRect:s,droppableRects:o,droppableContainers:y});let w=getFirstCollision(v,"id");if(w===(d==null?void 0:d.id)&&v.length>1&&(w=v[1].id),w!=null){const T=u.get(n.id),A=u.get(w),C=A?o.get(A.id):null,j=A==null?void 0:A.node.current;if(j&&C&&T&&A){const H=getScrollableAncestors(j).some((ie,se)=>g[se]!==ie),ne=isSameContainer(T,A),Y=isAfter(T,A),U=H||!ne?{x:0,y:0}:{x:Y?s.width-C.width:0,y:Y?s.height-C.height:0},ee={x:C.left,y:C.top};return U.x&&U.y?ee:subtract(ee,U)}}}};function isSameContainer(t,e){return!hasSortableData(t)||!hasSortableData(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function isAfter(t,e){return!hasSortableData(t)||!hasSortableData(e)||!isSameContainer(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}function SortableItem({id:t}){const{attributes:e,listeners:n,setNodeRef:s,transform:o,transition:u}=useSortable({id:t}),d={transform:CSS$1.Transform.toString(o),transition:u};return jsxRuntimeExports.jsxs("li",{ref:s,style:d,...e,className:"flex items-center justify-between p-2 bg-gray-100 rounded-md mb-2 touch-none",children:[jsxRuntimeExports.jsx("span",{className:"font-display-medium text-sm capitalize",children:t}),jsxRuntimeExports.jsx("button",{...n,className:"cursor-grab active:cursor-grabbing",children:jsxRuntimeExports.jsx(GripVertical,{className:"w-5 h-5 text-gray-500"})})]})}const LayerManager=({renderOrder:t,setRenderOrder:e})=>{const n=useSensors(useSensor(PointerSensor),useSensor(KeyboardSensor,{coordinateGetter:sortableKeyboardCoordinates}));function s(o){const{active:u,over:d}=o;if(d&&u.id!==d.id){const g=t.indexOf(u.id),y=t.indexOf(d.id);e(arrayMove(t,g,y))}}return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-bold text-gray-700 mb-2",children:"Ordem das Camadas"}),jsxRuntimeExports.jsx(DndContext,{sensors:n,collisionDetection:closestCenter,onDragEnd:s,children:jsxRuntimeExports.jsx(SortableContext,{items:t,strategy:verticalListSortingStrategy,children:jsxRuntimeExports.jsx("ul",{className:"list-none p-0",children:t.map(o=>jsxRuntimeExports.jsx(SortableItem,{id:o},o))})})})]})},PositionController=({onMove:t,onResize:e,elementName:n})=>jsxRuntimeExports.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-display-bold mb-2 text-center",children:["Ajustar Posição: ",jsxRuntimeExports.jsx("span",{className:"text-red-600",children:n})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>t("x",-5),children:jsxRuntimeExports.jsx(ArrowLeft,{})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-1",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>t("y",-5),children:jsxRuntimeExports.jsx(ArrowUp,{})}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>t("y",5),children:jsxRuntimeExports.jsx(ArrowDown,{})})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>t("x",5),children:jsxRuntimeExports.jsx(ArrowRight,{})}),e&&jsxRuntimeExports.jsxs("div",{className:"ml-4 flex items-center space-x-2 border-l pl-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>e(-5),children:jsxRuntimeExports.jsx(Minus,{})}),jsxRuntimeExports.jsx("span",{className:"font-display-medium",children:"Tamanho"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>e(5),children:jsxRuntimeExports.jsx(Plus,{})})]})]})]}),WHITE_LOGO_TEAMS_IDS=[40],SplitRectangleDisplay=({parentFadePercentage:t=30,childFadePercentage:e=20,selectedMatch:n,homeScore:s,homePenScore:o,awayScore:u,awayPenScore:d,logoOffset:g=50,logoFadePercentage:y=70})=>{const[v,w]=reactExports.useState(),T=`${t}%`,A=`${e}%`,C=`${y}%`;function j(te){return te===39?{url:"premierLeagueTrophy.png",size:500}:te===48?{url:"carabaoCupTrophy.png",size:450}:te===45?{url:"faCupTrophy.png",size:350}:te===2?{url:"uclTrophy.png",size:475}:te===3?{url:"uelTrophy.png",size:425}:te===848?{url:"uconflTrophy.png",size:450}:te===531?{url:"superCupTrophy.png",size:425}:te===1?{url:"wcTrophy.png",size:425}:te===15?{url:"FIFA-Club-World-Cup-Trophy.png",size:500}:te===528?{url:"cShieldTrophy.png",size:300}:void 0}const{homeTeam:D,awayTeam:H,loading:ne}=useSportDbTeams(n);reactExports.useEffect(()=>{n&&w(j(n.league.id||0))},[n]);const Y={parentWidth:1280,parentHeight:720,childWidth:900,childHeight:327,childHalfWidth:900/2,logoHeight:400},U=-g,ee=g,J=1,ie=5,se=20,K=20;return ne||!D||!H?null:jsxRuntimeExports.jsxs("div",{className:"relative bg-transparent overflow-hidden",style:{width:`${Y.parentWidth}px`,height:`${Y.parentHeight}px`},children:[jsxRuntimeExports.jsxs("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 bg-black",style:{width:`${Y.childWidth}px`,height:`${Y.childHeight}px`,"--parent-fade-pcnt":T,"--child-fade-pcnt":A,maskImage:`linear-gradient(to right,
            rgba(0,0,0,0) 0%,
            rgba(0,0,0,1) var(--parent-fade-pcnt),
            rgba(0,0,0,1) calc(100% - var(--parent-fade-pcnt)),
            rgba(0,0,0,0) 100%
          )`,WebkitMaskImage:`linear-gradient(to right,
            rgba(0,0,0,0) 0%,
            rgba(0,0,0,1) var(--parent-fade-pcnt),
            rgba(0,0,0,1) calc(100% - var(--parent-fade-pcnt)),
            rgba(0,0,0,0) 100%
          )`,zIndex:J},children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 h-full",style:{width:`${Y.childHalfWidth}px`,backgroundColor:(D==null?void 0:D.strColour1)==="#FFFFFF"?D==null?void 0:D.strColour2:D==null?void 0:D.strColour1,maskImage:`linear-gradient(to right,
                rgba(0,0,0,1) 0%,
                rgba(0,0,0,1) calc(100% - var(--child-fade-pcnt)),
                rgba(0,0,0,0) 100%
              )`,WebkitMaskImage:`linear-gradient(to right,
                rgba(0,0,0,1) 0%,
                rgba(0,0,0,1) calc(100% - var(--child-fade-pcnt)),
                rgba(0,0,0,0) 100%
              )`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 h-full",style:{width:`${Y.childHalfWidth}px`,backgroundColor:(H==null?void 0:H.strColour1)==="#FFFFFF"?H==null?void 0:H.strColour2:H==null?void 0:H.strColour1,maskImage:`linear-gradient(to right,
                rgba(0,0,0,0) 0%,
                rgba(0,0,0,1) var(--child-fade-pcnt),
                rgba(0,0,0,1) 100%
              )`,WebkitMaskImage:`linear-gradient(to right,
                rgba(0,0,0,0) 0%,
                rgba(0,0,0,1) var(--child-fade-pcnt),
                rgba(0,0,0,1) 100%
              )`}})]})," ",jsxRuntimeExports.jsx("p",{className:"absolute text-[400px] font-placar-black text-white/20 uppercase leading-[1.414] text-center",style:{top:"65.7%",left:"50%",transform:"translate(-50%, -50%)",zIndex:ie},children:"VS"}),v&&jsxRuntimeExports.jsx("img",{src:v.url,alt:`${n.league.name} Trophy`,className:"absolute left-1/2 -translate-x-1/2 -translate-y-1/2",style:{top:"65.7%",height:`${v.size}px`,width:"auto",zIndex:se}}),!ne&&D&&D.strBadge&&jsxRuntimeExports.jsx("img",{src:`https://slow-hare-89.deno.dev/proxy?url=${encodeURIComponent(D.strBadge)}`,alt:`${n.teams.home.name} logo`,className:`absolute -translate-y-1/2 ${WHITE_LOGO_TEAMS_IDS.includes(n.teams.home.id)?"invert brightness-0 white-logo":""}`,style:{top:"93.7%",height:`${Y.logoHeight}px`,width:"auto",left:`${Y.parentWidth/2-Y.childWidth/2+Y.childHalfWidth/2+U}px`,transform:"translate(-50%, -50%)",zIndex:se,...(n.fixture.status.long==="Match Finished"||s!==null&&u!==null)&&{maskImage:`linear-gradient(to right,
                  rgba(0,0,0,1) ${100-y}%,
                  rgba(0,0,0,0) 100%
                )`,WebkitMaskImage:`linear-gradient(to right,
                  rgba(0,0,0,1) ${100-y}%,
                  rgba(0,0,0,0) 100%
                )`}}}),!ne&&H&&H.strBadge&&jsxRuntimeExports.jsx("img",{src:`https://slow-hare-89.deno.dev/proxy?url=${encodeURIComponent(H.strBadge)}`,alt:`${n.teams.away.name} logo`,className:`absolute -translate-y-1/2 ${WHITE_LOGO_TEAMS_IDS.includes(n.teams.away.id)?"invert brightness-0 white-logo":""}`,style:{top:"93.7%",height:`${Y.logoHeight}px`,width:"auto",left:`${Y.parentWidth/2-Y.childWidth/2+Y.childHalfWidth+Y.childHalfWidth/2+ee}px`,transform:"translate(-50%, -50%)",zIndex:se,...(n.fixture.status.long==="Match Finished"||s!==null&&u!==null)&&{maskImage:`linear-gradient(to right,
                  rgba(0,0,0,0) 0%,
                  rgba(0,0,0,1) ${C},
                  rgba(0,0,0,1) 100%
                )`,WebkitMaskImage:`linear-gradient(to right,
                  rgba(0,0,0,0) 0%,
                  rgba(0,0,0,1) ${C},
                  rgba(0,0,0,1) 100%
                )`}}}),n.fixture.status.long!=="Match Finished"&&s===null&&u===null?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("p",{className:"absolute text-[150px] font-placar-black text-white uppercase leading-[1.414] text-center left-1/2 -translate-x-1/2 -translate-y-1/2",style:{top:"65.7%",zIndex:K},children:"VS"})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"absolute w-full text-[266px] font-placar-black text-white uppercase leading-[1.414] text-center left-1/2 -translate-x-1/2 -translate-y-1/2",style:{top:"65.7%",zIndex:K,textShadow:"2px 2px 4px #000000"},children:[s,"-",u]}),(n.fixture.status.short==="PEN"&&o!=null&&d!=null||o!=null&&d!=null)&&jsxRuntimeExports.jsxs("p",{className:"absolute w-full text-[40px] font-placar-black text-white leading-[1.414] text-center left-1/2 -translate-x-1/2 -translate-y-1/2 mt-32",style:{top:"65.7%",zIndex:K,textShadow:"2px 2px 4px #000000"},children:["(",o,"-",d," pen.)"]})]})]})},LIVERPOOL_TEAM_ID=40,API_BASE_URL="https://v3.football.api-sports.io",API_KEY="a3a4a4cc8c8f42b486a8e6abf0f3f892",API_HOST="v3.football.api-sports.io",getHeaders=()=>({"x-rapidapi-host":API_HOST,"x-apisports-key":API_KEY,"Content-Type":"application/json"}),fetchData=async t=>{try{const e=await fetch(t,{method:"GET",headers:getHeaders()});return e.ok?{success:!0,data:await e.json()}:e.status===403?{success:!1,error:"Chave da API inválida ou expirada. Verifique sua chave API-Sports."}:e.status===429?{success:!1,error:"Limite de requisições excedido. Tente novamente mais tarde. Verifique seu plano API-Sports."}:{success:!1,error:`Erro na API: ${e.status} - ${e.statusText}`}}catch(e){return console.error("Erro de conexão com a API:",e),{success:!1,error:"Erro de conexão com a API"}}},getLiverpoolUpcomingMatches=async(t=10)=>{try{const e=new Date,n=new Date;n.setMonth(n.getMonth()+3);const s=e.getFullYear(),o=`${API_BASE_URL}/fixtures?team=${LIVERPOOL_TEAM_ID}&season=${s}&status=NS&timezone=Europe/London`,u=await fetchData(o);return u.success&&u.data?{success:!0,matches:u.data.response.filter(g=>{const y=new Date(g.fixture.date);return y>=e&&y<=n}).sort((g,y)=>new Date(g.fixture.date).getTime()-new Date(y.fixture.date).getTime()).slice(0,t)}:{success:!1,error:u.error}}catch(e){return console.error("Erro ao buscar partidas do Liverpool:",e),{success:!1,error:"Erro ao buscar partidas futuras do Liverpool"}}},getLiverpoolRecentMatches=async(t=10)=>{try{const e=new Date,n=new Date;n.setMonth(n.getMonth()-2);const s=e.getFullYear(),o=`${API_BASE_URL}/fixtures?team=${LIVERPOOL_TEAM_ID}&season=${s}&timezone=Europe%2FLondon`,u=await fetchData(o);return u.success&&u.data?{success:!0,matches:u.data.response.filter(y=>{const v=new Date(y.fixture.date);return v<=e&&v>=n&&y.fixture.status.long==="Match Finished"}).sort((y,v)=>new Date(v.fixture.date).getTime()-new Date(y.fixture.date).getTime()).slice(0,t)}:{success:!1,error:u.error}}catch(e){return console.error("Erro ao buscar partidas recentes do Liverpool:",e),{success:!1,error:"Erro ao buscar partidas recentes do Liverpool"}}},getUpcomingMatches=getLiverpoolUpcomingMatches,getPastMatches=getLiverpoolRecentMatches,getDaysInMonth=(t,e)=>new Date(t,e,0).getDate(),months=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],EditMatchModal=({isOpen:t,onClose:e,matchToEdit:n,onSave:s})=>{const[o,u]=reactExports.useState(null),[d,g]=reactExports.useState({}),[y,v]=reactExports.useState({day:"",month:"",year:"",hour:"",minute:""});reactExports.useEffect(()=>{if(n){const J=new Date(n.fixture.date);u(JSON.parse(JSON.stringify(n))),v({day:String(J.getDate()).padStart(2,"0"),month:String(J.getMonth()),year:String(J.getFullYear()),hour:String(J.getHours()).padStart(2,"0"),minute:String(J.getMinutes()).padStart(2,"0")})}},[n]);const w=reactExports.useCallback((J,ie)=>{const{value:se}=J.target;u(K=>{if(!K)return null;const te={...K};switch(ie){case"homeTeamName":te.teams.home.name=se;break;case"awayTeamName":te.teams.away.name=se;break;case"stadium":te.fixture.venue.name=se;break;case"competition":te.league.name=se;break;case"round":te.league.round=se;break;case"referee":te.fixture.referee=se;break}return te})},[]),T=reactExports.useCallback((J,ie)=>{v(se=>{const K={...se,[ie]:J.target.value},{day:te,month:re,year:ce,hour:le,minute:ue}=K;if(te&&re&&ce&&le&&ue){const _e=`${ce}-${String(Number(re)+1).padStart(2,"0")}-${te}T${le}:${ue}:00+00:00`;u(Ee=>Ee?{...Ee,fixture:{...Ee.fixture,date:_e,timestamp:new Date(_e).getTime()/1e3}}:null)}return K})},[]),A=reactExports.useCallback(()=>{var ie,se,K,te,re,ce,le,ue;const J={};return(se=(ie=o==null?void 0:o.fixture)==null?void 0:ie.venue)!=null&&se.name||(J.stadium="Estádio é obrigatório"),(K=o==null?void 0:o.fixture)!=null&&K.date||(J.date="Data é obrigatória"),(te=o==null?void 0:o.league)!=null&&te.name||(J.competition="Competição é obrigatória"),(ce=(re=o==null?void 0:o.teams)==null?void 0:re.home)!=null&&ce.name||(J.homeTeam="Nome do time da casa é obrigatório"),(ue=(le=o==null?void 0:o.teams)==null?void 0:le.away)!=null&&ue.name||(J.awayTeam="Nome do time visitante é obrigatório"),g(J),Object.keys(J).length===0},[o]),C=J=>{J.preventDefault(),A()&&o&&(s(o),e())},j=()=>{o&&u(J=>{if(!J)return null;const ie=JSON.parse(JSON.stringify(J));return[ie.teams.home,ie.teams.away]=[ie.teams.away,ie.teams.home],ie})};if(!t||!o)return null;const D=new Date().getFullYear(),H=Array.from({length:6},(J,ie)=>D-1+ie),ne=y.year&&y.month?getDaysInMonth(Number(y.year),Number(y.month)+1):31,Y=Array.from({length:ne},(J,ie)=>String(ie+1).padStart(2,"0")),U=Array.from({length:24},(J,ie)=>String(ie).padStart(2,"0")),ee=Array.from({length:60},(J,ie)=>String(ie).padStart(2,"0"));return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-display-bold text-gray-800",children:"Editar Dados da Partida"}),jsxRuntimeExports.jsx(Button,{onClick:e,variant:"ghost",size:"sm",className:"cursor-pointer",children:"×"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-medium text-gray-700",children:"Times"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",size:"icon",onClick:j,title:"Inverter Times",children:jsxRuntimeExports.jsx(Repeat,{className:"w-4 h-4 text-gray-600"})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Time da Casa *"}),jsxRuntimeExports.jsx("input",{type:"text",value:o.teams.home.name,onChange:J=>w(J,"homeTeamName"),className:`w-full px-3 py-2 border rounded-lg font-display ${d.homeTeam?"border-red-500":"border-gray-300"}`,placeholder:"Nome do Time da Casa"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Time Visitante *"}),jsxRuntimeExports.jsx("input",{type:"text",value:o.teams.away.name,onChange:J=>w(J,"awayTeamName"),className:`w-full px-3 py-2 border rounded-lg font-display ${d.awayTeam?"border-red-500":"border-gray-300"}`,placeholder:"Nome do Time Visitante"})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-200"}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Estádio *"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(MapPin,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:o.fixture.venue.name,onChange:J=>w(J,"stadium"),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 font-display ${d.stadium?"border-red-500":"border-gray-300"}`,placeholder:"Ex: Anfield"})]}),d.stadium&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:d.stadium})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Data e Horário *"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("select",{value:y.day,onChange:J=>T(J,"day"),className:`w-1/4 px-3 py-2 border rounded-lg font-display ${d.date?"border-red-500":"border-gray-300"}`,children:Y.map(J=>jsxRuntimeExports.jsx("option",{value:J,children:J},J))}),jsxRuntimeExports.jsx("select",{value:y.month,onChange:J=>T(J,"month"),className:`w-2/4 px-3 py-2 border rounded-lg font-display ${d.date?"border-red-500":"border-gray-300"}`,children:months.map((J,ie)=>jsxRuntimeExports.jsx("option",{value:ie,children:J},J))}),jsxRuntimeExports.jsx("select",{value:y.year,onChange:J=>T(J,"year"),className:`w-1/4 px-3 py-2 border rounded-lg font-display ${d.date?"border-red-500":"border-gray-300"}`,children:H.map(J=>jsxRuntimeExports.jsx("option",{value:J,children:J},J))})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2 mt-2",children:[jsxRuntimeExports.jsx("select",{value:y.hour,onChange:J=>T(J,"hour"),className:`w-1/2 px-3 py-2 border rounded-lg font-display ${d.date?"border-red-500":"border-gray-300"}`,children:U.map(J=>jsxRuntimeExports.jsx("option",{value:J,children:J},J))}),jsxRuntimeExports.jsx("select",{value:y.minute,onChange:J=>T(J,"minute"),className:`w-1/2 px-3 py-2 border rounded-lg font-display ${d.date?"border-red-500":"border-gray-300"}`,children:ee.map(J=>jsxRuntimeExports.jsx("option",{value:J,children:J},J))})]}),d.date&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:d.date})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Competição *"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Trophy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:o.league.name,onChange:J=>w(J,"competition"),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 font-display ${d.competition?"border-red-500":"border-gray-300"}`,placeholder:"Ex: Premier League"})]}),d.competition&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:d.competition})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Rodada"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Trophy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:o.league.round,onChange:J=>w(J,"round"),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 font-display border-gray-300",placeholder:"Ex: 38ª Rodada"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Árbitro"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:o.fixture.referee||"",onChange:J=>w(J,"referee"),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 font-display border-gray-300",placeholder:"Ex: Craig Pawson"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",onClick:e,variant:"outline",className:"cursor-pointer font-display-medium",children:"Cancelar"}),jsxRuntimeExports.jsxs(Button,{type:"submit",className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4 mr-2"}),"Salvar"]})]})]})]})})},MatchSelector=reactExports.forwardRef(({onMatchSelected:t,escalacaoData:e,onValidationChange:n,translations:s,pastMatches:o=!1,includeTheOne:u=!1},d)=>{var _e,Ee,we,de;const[g,y]=reactExports.useState([]),[v,w]=reactExports.useState(!1),[T,A]=reactExports.useState(null),[C,j]=reactExports.useState(null),[D,H]=reactExports.useState(!1),[ne,Y]=reactExports.useState(!1),[U,ee]=reactExports.useState(null),[J,ie]=reactExports.useState({stadium:((_e=e.matchData)==null?void 0:_e.stadium)||"",date:((Ee=e.matchData)==null?void 0:Ee.date)||"",competition:((we=e.matchData)==null?void 0:we.competition)||"",referee:((de=e.matchData)==null?void 0:de.referee)||""}),[se,K]=reactExports.useState({}),te=reactExports.useCallback(()=>{const me={};return J.stadium.trim()||(me.stadium="Estádio é obrigatório"),J.date.trim()||(me.date="Data é obrigatória"),J.competition.trim()||(me.competition="Competição é obrigatória"),me},[J]);reactExports.useEffect(()=>{if(D){const me=te();K(me),n(Object.keys(me).length===0)}else K({}),n(!!C)},[C,D,J,n,te]),reactExports.useEffect(()=>{re()},[]);const re=async()=>{w(!0),A(null);try{let me;if(o){if(me=await getPastMatches(),u){const xe=await getUpcomingMatches();if(xe.success&&xe.matches&&xe.matches.length>0){const pe=xe.matches.sort((ve,Oe)=>new Date(ve.fixture.date).getTime()-new Date(Oe.fixture.date).getTime())[0];me.matches=[pe,...me.matches||[]]}}(!me.success||!me.matches||me.matches.length===0)&&(me=await getUpcomingMatches())}else me=await getUpcomingMatches(),(!me.success||!me.matches||me.matches.length===0)&&(me=await getPastMatches());me.success&&me.matches&&me.matches.length>0?y(me.matches):(A("Não foi possível carregar partidas da API. Use o modo manual."),H(!0))}catch(me){console.error("Erro ao carregar partidas:",me),A("Erro ao conectar com a API de partidas. Use o modo manual."),H(!0)}finally{w(!1)}},ce=me=>{j(me),t(me)},le=me=>{ee(me),Y(!0)},ue=reactExports.useCallback(()=>{const me=te();if(K(me),Object.keys(me).length===0){const pe={fixture:{id:Date.now(),referee:J.referee,timezone:"America/Sao_Paulo",date:J.date,timestamp:new Date(J.date).getTime()/1e3,venue:{id:0,name:J.stadium,city:""},status:{long:"Not Started",short:"NS",elapsed:null,extra:null}},teams:{home:{id:0,name:"Time da Casa",logo:"",winner:null},away:{id:1,name:"Time Visitante",logo:"",winner:null}},goals:{home:0,away:0},league:{id:0,name:J.competition,country:"",logo:"",flag:"",season:new Date(J.date).getFullYear(),round:"",standings:!1}};return t(pe),!0}return!1},[J,t,te]);return reactExports.useImperativeHandle(d,()=>({submitManualData:ue,canProceed:!!C||D&&Object.keys(se).length===0&&Object.values(J).every(me=>me!==null&&String(me).trim()!=="")})),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800 mb-2",children:"Dados da Partida"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Selecione uma partida da API ou preencha manualmente"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-100 rounded-lg p-1 flex",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>{H(!1),j(null),K({}),g.length===0&&!v&&re()},variant:D?"ghost":"default",size:"sm",className:`cursor-pointer font-display-medium ${D?"text-gray-600 hover:text-gray-800":"bg-red-600 text-white hover:bg-red-700"}`,children:[jsxRuntimeExports.jsx(Search,{className:"w-4 h-4 mr-2"}),"Buscar da API"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{H(!0),j(null),A(null)},variant:D?"default":"ghost",size:"sm",className:`cursor-pointer font-display-medium ${D?"bg-red-600 text-white hover:bg-red-700":"text-gray-600 hover:text-gray-800"}`,children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-2"}),"Preencher Manual"]})]})}),!D&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[v&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-8",children:[jsxRuntimeExports.jsx(Loader,{className:"w-6 h-6 animate-spin text-red-600 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 font-display",children:"Buscando partidas..."})]}),T&&jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-red-600 mr-2"}),jsxRuntimeExports.jsx("p",{className:"text-red-800 font-display-medium",children:"Erro na API"})]}),jsxRuntimeExports.jsx("p",{className:"text-red-700 text-sm mt-1 font-display",children:T}),jsxRuntimeExports.jsx(Button,{onClick:()=>H(!0),className:"mt-3 bg-red-600 hover:bg-red-700 text-white cursor-pointer font-display-medium",size:"sm",children:"Usar Modo Manual"})]}),!v&&!T&&g.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("h3",{className:"font-display-semibold text-gray-800",children:["Partidas Disponíveis (",g.length,")"]}),jsxRuntimeExports.jsx("div",{className:"grid gap-3",children:g.map(me=>{const xe=new Date(me.fixture.date),pe=convertToSaoPauloTime(xe),ve=(C==null?void 0:C.fixture.id)===me.fixture.id;return jsxRuntimeExports.jsxs("div",{className:`border rounded-lg p-4 transition-all flex relative items-center justify-between ${ve?"border-red-500 bg-red-50":"border-gray-200 hover:border-red-300 hover:bg-red-50"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 relative cursor-pointer",onClick:()=>ce(me),children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center md:justify-start items-center space-x-4 mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("img",{src:me.teams.home.logo,alt:me.teams.home.name,className:"w-6 h-6 object-contain"}),jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-800",children:me.teams.home.name})]}),o&&me.goals.home!=null&&me.goals.away!=null?jsxRuntimeExports.jsx("strong",{className:"text-gray-500 font-bold w-fit whitespace-nowrap",children:`${me.goals.home}-${me.goals.away}`}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 font-display",children:"vs"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-800",children:me.teams.away.name}),jsxRuntimeExports.jsx("img",{src:me.teams.away.logo,alt:me.teams.away.name,className:"w-6 h-6 object-contain"})]}),o&&me.goals.home===null&&me.goals.away===null&&jsxRuntimeExports.jsxs("div",{className:"absolute -top-7 left-1/2 transform -translate-x-1/2 flex items-center space-x-1 text-red-600 text-[10px] bg-white rounded-full shadow-md px-2 py-0.5",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Próxima partida"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row items-center space-x-4 text-sm text-gray-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-1"}),jsxRuntimeExports.jsx("span",{className:"font-display",children:formatDateToBrazilian(pe)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 mr-1"}),jsxRuntimeExports.jsx("span",{className:"font-display",children:me.fixture.venue.name||"Estádio não informado"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Trophy,{className:"w-4 h-4 mr-1"}),jsxRuntimeExports.jsx("span",{className:"font-display",children:formatCompetitionRound(me,s)})]})]})]}),ve&&jsxRuntimeExports.jsxs("div",{className:"flex absolute -right-1 flex-col justify-between h-full items-center space-x-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-red-600 pt-1 mr-1"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:Oe=>{Oe.stopPropagation(),le(me)},className:"text-gray-600 hover:text-red-600 hover:bg-transparent cursor-pointer pt-2",title:"Editar partida",children:jsxRuntimeExports.jsx(Pencil,{className:"w-4 h-4"})})]})]},me.fixture.id)})})]})]}),D&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-display-semibold text-gray-800",children:"Preencher Dados Manualmente"}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Estádio *"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(MapPin,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:J.stadium,onChange:me=>{ie(xe=>({...xe,stadium:me.target.value}))},className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display ${se.stadium?"border-red-500":"border-gray-300"}`,placeholder:"Ex: Anfield, Old Trafford, Estádio do Maracanã"})]}),se.stadium&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:se.stadium})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Data e Horário *"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Calendar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:J.date,onChange:me=>{ie(xe=>({...xe,date:me.target.value}))},className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display ${se.date?"border-red-500":"border-gray-300"}`,placeholder:"Ex: 28 de junho de 2025 às 20:00"})]}),se.date&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:se.date}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-xs mt-1 font-display",children:"Formato: DD de mês de AAAA às HH:MM"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Competição / Rodada *"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Trophy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:J.competition,onChange:me=>{ie(xe=>({...xe,competition:me.target.value}))},className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display ${se.competition?"border-red-500":"border-gray-300"}`,placeholder:"Ex: Premier League - 38ª Rodada, Champions League - Final"})]}),se.competition&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:se.competition}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-xs mt-1 font-display",children:"Formato: Competição - Rodada/Fase"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Árbitro"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:J.referee??"",onChange:me=>{ie(xe=>({...xe,referee:me.target.value}))},className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display ${se.referee?"border-red-500":"border-gray-300"}`,placeholder:"Ex: Darren England, Craig Pawson, Chris Kavanagh"})]}),se.referee&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:se.referee})]})]})]}),C||D?jsxRuntimeExports.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-600 mr-2"}),jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-green-800",children:"Dados da Partida Confirmados"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-sm text-green-700 font-display",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Estádio:"})," ",D?J.stadium:(C==null?void 0:C.fixture.venue.name)||"Não informado"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Data:"})," ",D?J.date:formatDateToBrazilian(convertToSaoPauloTime(new Date((C==null?void 0:C.fixture.date)||"")))]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Competição:"})," ",D?J.competition:C?formatCompetitionRound(C,s):"Não informado"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Árbitro:"})," ",D?J.referee||"Não informado":(C==null?void 0:C.fixture.referee)||"Não informado"]})]})]}):null,jsxRuntimeExports.jsx(EditMatchModal,{isOpen:ne,onClose:()=>{Y(!1),ee(null)},matchToEdit:U,onSave:me=>{j(me),t(me),y(xe=>xe.map(pe=>pe.fixture.id===me.fixture.id?me:pe))}})]})});var lib$1={exports:{}},_FullInternals={},_CoreInternals={},Global={},hasRequiredGlobal;function requireGlobal(){return hasRequiredGlobal||(hasRequiredGlobal=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:n(),isUnminified:/param/.test((function(o){}).toString()),dblClickWindow:400,getAngle(o){return t.Konva.angleDeg?o*e:o},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var o;return(o=t.Konva.Transformer)===null||o===void 0?void 0:o.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(o){t.glob.Konva=o}};const s=o=>{t.Konva[o.prototype.getClassName()]=o};t._registerNode=s,t.Konva._injectGlobal(t.Konva)}(Global)),Global}var Util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=requireGlobal();class n{constructor(ee=[1,0,0,1,0,0]){this.dirty=!1,this.m=ee&&ee.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(ee){ee.m[0]=this.m[0],ee.m[1]=this.m[1],ee.m[2]=this.m[2],ee.m[3]=this.m[3],ee.m[4]=this.m[4],ee.m[5]=this.m[5]}point(ee){const J=this.m;return{x:J[0]*ee.x+J[2]*ee.y+J[4],y:J[1]*ee.x+J[3]*ee.y+J[5]}}translate(ee,J){return this.m[4]+=this.m[0]*ee+this.m[2]*J,this.m[5]+=this.m[1]*ee+this.m[3]*J,this}scale(ee,J){return this.m[0]*=ee,this.m[1]*=ee,this.m[2]*=J,this.m[3]*=J,this}rotate(ee){const J=Math.cos(ee),ie=Math.sin(ee),se=this.m[0]*J+this.m[2]*ie,K=this.m[1]*J+this.m[3]*ie,te=this.m[0]*-ie+this.m[2]*J,re=this.m[1]*-ie+this.m[3]*J;return this.m[0]=se,this.m[1]=K,this.m[2]=te,this.m[3]=re,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(ee,J){const ie=this.m[0]+this.m[2]*J,se=this.m[1]+this.m[3]*J,K=this.m[2]+this.m[0]*ee,te=this.m[3]+this.m[1]*ee;return this.m[0]=ie,this.m[1]=se,this.m[2]=K,this.m[3]=te,this}multiply(ee){const J=this.m[0]*ee.m[0]+this.m[2]*ee.m[1],ie=this.m[1]*ee.m[0]+this.m[3]*ee.m[1],se=this.m[0]*ee.m[2]+this.m[2]*ee.m[3],K=this.m[1]*ee.m[2]+this.m[3]*ee.m[3],te=this.m[0]*ee.m[4]+this.m[2]*ee.m[5]+this.m[4],re=this.m[1]*ee.m[4]+this.m[3]*ee.m[5]+this.m[5];return this.m[0]=J,this.m[1]=ie,this.m[2]=se,this.m[3]=K,this.m[4]=te,this.m[5]=re,this}invert(){const ee=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),J=this.m[3]*ee,ie=-this.m[1]*ee,se=-this.m[2]*ee,K=this.m[0]*ee,te=ee*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),re=ee*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=J,this.m[1]=ie,this.m[2]=se,this.m[3]=K,this.m[4]=te,this.m[5]=re,this}getMatrix(){return this.m}decompose(){const ee=this.m[0],J=this.m[1],ie=this.m[2],se=this.m[3],K=this.m[4],te=this.m[5],re=ee*se-J*ie,ce={x:K,y:te,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(ee!=0||J!=0){const le=Math.sqrt(ee*ee+J*J);ce.rotation=J>0?Math.acos(ee/le):-Math.acos(ee/le),ce.scaleX=le,ce.scaleY=re/le,ce.skewX=(ee*ie+J*se)/re,ce.skewY=0}else if(ie!=0||se!=0){const le=Math.sqrt(ie*ie+se*se);ce.rotation=Math.PI/2-(se>0?Math.acos(-ie/le):-Math.acos(ie/le)),ce.scaleX=re/le,ce.scaleY=le,ce.skewX=0,ce.skewY=(ee*ie+J*se)/re}return ce.rotation=t.Util._getRotation(ce.rotation),ce}}t.Transform=n;const s="[object Array]",o="[object Number]",u="[object String]",d="[object Boolean]",g=Math.PI/180,y=180/Math.PI,v="#",w="",T="0",A="Konva warning: ",C="Konva error: ",j="rgb(",D={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},H=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let ne=[];const Y=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(U){setTimeout(U,60)};t.Util={_isElement(U){return!!(U&&U.nodeType==1)},_isFunction(U){return!!(U&&U.constructor&&U.call&&U.apply)},_isPlainObject(U){return!!U&&U.constructor===Object},_isArray(U){return Object.prototype.toString.call(U)===s},_isNumber(U){return Object.prototype.toString.call(U)===o&&!isNaN(U)&&isFinite(U)},_isString(U){return Object.prototype.toString.call(U)===u},_isBoolean(U){return Object.prototype.toString.call(U)===d},isObject(U){return U instanceof Object},isValidSelector(U){if(typeof U!="string")return!1;const ee=U[0];return ee==="#"||ee==="."||ee===ee.toUpperCase()},_sign(U){return U===0||U>0?1:-1},requestAnimFrame(U){ne.push(U),ne.length===1&&Y(function(){const ee=ne;ne=[],ee.forEach(function(J){J()})})},createCanvasElement(){const U=document.createElement("canvas");try{U.style=U.style||{}}catch{}return U},createImageElement(){return document.createElement("img")},_isInDocument(U){for(;U=U.parentNode;)if(U==document)return!0;return!1},_urlToImage(U,ee){const J=t.Util.createImageElement();J.onload=function(){ee(J)},J.src=U},_rgbToHex(U,ee,J){return((1<<24)+(U<<16)+(ee<<8)+J).toString(16).slice(1)},_hexToRgb(U){U=U.replace(v,w);const ee=parseInt(U,16);return{r:ee>>16&255,g:ee>>8&255,b:ee&255}},getRandomColor(){let U=(Math.random()*16777215<<0).toString(16);for(;U.length<6;)U=T+U;return v+U},getRGB(U){let ee;return U in D?(ee=D[U],{r:ee[0],g:ee[1],b:ee[2]}):U[0]===v?this._hexToRgb(U.substring(1)):U.substr(0,4)===j?(ee=H.exec(U.replace(/ /g,"")),{r:parseInt(ee[1],10),g:parseInt(ee[2],10),b:parseInt(ee[3],10)}):{r:0,g:0,b:0}},colorToRGBA(U){return U=U||"black",t.Util._namedColorToRBA(U)||t.Util._hex3ColorToRGBA(U)||t.Util._hex4ColorToRGBA(U)||t.Util._hex6ColorToRGBA(U)||t.Util._hex8ColorToRGBA(U)||t.Util._rgbColorToRGBA(U)||t.Util._rgbaColorToRGBA(U)||t.Util._hslColorToRGBA(U)},_namedColorToRBA(U){const ee=D[U.toLowerCase()];return ee?{r:ee[0],g:ee[1],b:ee[2],a:1}:null},_rgbColorToRGBA(U){if(U.indexOf("rgb(")===0){U=U.match(/rgb\(([^)]+)\)/)[1];const ee=U.split(/ *, */).map(Number);return{r:ee[0],g:ee[1],b:ee[2],a:1}}},_rgbaColorToRGBA(U){if(U.indexOf("rgba(")===0){U=U.match(/rgba\(([^)]+)\)/)[1];const ee=U.split(/ *, */).map((J,ie)=>J.slice(-1)==="%"?ie===3?parseInt(J)/100:parseInt(J)/100*255:Number(J));return{r:ee[0],g:ee[1],b:ee[2],a:ee[3]}}},_hex8ColorToRGBA(U){if(U[0]==="#"&&U.length===9)return{r:parseInt(U.slice(1,3),16),g:parseInt(U.slice(3,5),16),b:parseInt(U.slice(5,7),16),a:parseInt(U.slice(7,9),16)/255}},_hex6ColorToRGBA(U){if(U[0]==="#"&&U.length===7)return{r:parseInt(U.slice(1,3),16),g:parseInt(U.slice(3,5),16),b:parseInt(U.slice(5,7),16),a:1}},_hex4ColorToRGBA(U){if(U[0]==="#"&&U.length===5)return{r:parseInt(U[1]+U[1],16),g:parseInt(U[2]+U[2],16),b:parseInt(U[3]+U[3],16),a:parseInt(U[4]+U[4],16)/255}},_hex3ColorToRGBA(U){if(U[0]==="#"&&U.length===4)return{r:parseInt(U[1]+U[1],16),g:parseInt(U[2]+U[2],16),b:parseInt(U[3]+U[3],16),a:1}},_hslColorToRGBA(U){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(U)){const[ee,...J]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(U),ie=Number(J[0])/360,se=Number(J[1])/100,K=Number(J[2])/100;let te,re,ce;if(se===0)return ce=K*255,{r:Math.round(ce),g:Math.round(ce),b:Math.round(ce),a:1};K<.5?te=K*(1+se):te=K+se-K*se;const le=2*K-te,ue=[0,0,0];for(let _e=0;_e<3;_e++)re=ie+1/3*-(_e-1),re<0&&re++,re>1&&re--,6*re<1?ce=le+(te-le)*6*re:2*re<1?ce=te:3*re<2?ce=le+(te-le)*(2/3-re)*6:ce=le,ue[_e]=ce*255;return{r:Math.round(ue[0]),g:Math.round(ue[1]),b:Math.round(ue[2]),a:1}}},haveIntersection(U,ee){return!(ee.x>U.x+U.width||ee.x+ee.width<U.x||ee.y>U.y+U.height||ee.y+ee.height<U.y)},cloneObject(U){const ee={};for(const J in U)this._isPlainObject(U[J])?ee[J]=this.cloneObject(U[J]):this._isArray(U[J])?ee[J]=this.cloneArray(U[J]):ee[J]=U[J];return ee},cloneArray(U){return U.slice(0)},degToRad(U){return U*g},radToDeg(U){return U*y},_degToRad(U){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(U)},_radToDeg(U){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(U)},_getRotation(U){return e.Konva.angleDeg?t.Util.radToDeg(U):U},_capitalize(U){return U.charAt(0).toUpperCase()+U.slice(1)},throw(U){throw new Error(C+U)},error(U){console.error(C+U)},warn(U){e.Konva.showWarnings&&console.warn(A+U)},each(U,ee){for(const J in U)ee(J,U[J])},_inRange(U,ee,J){return ee<=U&&U<J},_getProjectionToSegment(U,ee,J,ie,se,K){let te,re,ce;const le=(U-J)*(U-J)+(ee-ie)*(ee-ie);if(le==0)te=U,re=ee,ce=(se-J)*(se-J)+(K-ie)*(K-ie);else{const ue=((se-U)*(J-U)+(K-ee)*(ie-ee))/le;ue<0?(te=U,re=ee,ce=(U-se)*(U-se)+(ee-K)*(ee-K)):ue>1?(te=J,re=ie,ce=(J-se)*(J-se)+(ie-K)*(ie-K)):(te=U+ue*(J-U),re=ee+ue*(ie-ee),ce=(te-se)*(te-se)+(re-K)*(re-K))}return[te,re,ce]},_getProjectionToLine(U,ee,J){const ie=t.Util.cloneObject(U);let se=Number.MAX_VALUE;return ee.forEach(function(K,te){if(!J&&te===ee.length-1)return;const re=ee[(te+1)%ee.length],ce=t.Util._getProjectionToSegment(K.x,K.y,re.x,re.y,U.x,U.y),le=ce[0],ue=ce[1],_e=ce[2];_e<se&&(ie.x=le,ie.y=ue,se=_e)}),ie},_prepareArrayForTween(U,ee,J){const ie=[],se=[];if(U.length>ee.length){const te=ee;ee=U,U=te}for(let te=0;te<U.length;te+=2)ie.push({x:U[te],y:U[te+1]});for(let te=0;te<ee.length;te+=2)se.push({x:ee[te],y:ee[te+1]});const K=[];return se.forEach(function(te){const re=t.Util._getProjectionToLine(te,ie,J);K.push(re.x),K.push(re.y)}),K},_prepareToStringify(U){let ee;U.visitedByCircularReferenceRemoval=!0;for(const J in U)if(U.hasOwnProperty(J)&&U[J]&&typeof U[J]=="object"){if(ee=Object.getOwnPropertyDescriptor(U,J),U[J].visitedByCircularReferenceRemoval||t.Util._isElement(U[J]))if(ee.configurable)delete U[J];else return null;else if(t.Util._prepareToStringify(U[J])===null)if(ee.configurable)delete U[J];else return null}return delete U.visitedByCircularReferenceRemoval,U},_assign(U,ee){for(const J in ee)U[J]=ee[J];return U},_getFirstPointerId(U){return U.touches?U.changedTouches[0].identifier:U.pointerId||999},releaseCanvas(...U){e.Konva.releaseCanvasOnDestroy&&U.forEach(ee=>{ee.width=0,ee.height=0})},drawRoundedRectPath(U,ee,J,ie){let se=0,K=0,te=0,re=0;typeof ie=="number"?se=K=te=re=Math.min(ie,ee/2,J/2):(se=Math.min(ie[0]||0,ee/2,J/2),K=Math.min(ie[1]||0,ee/2,J/2),re=Math.min(ie[2]||0,ee/2,J/2),te=Math.min(ie[3]||0,ee/2,J/2)),U.moveTo(se,0),U.lineTo(ee-K,0),U.arc(ee-K,K,K,Math.PI*3/2,0,!1),U.lineTo(ee,J-re),U.arc(ee-re,J-re,re,0,Math.PI/2,!1),U.lineTo(te,J),U.arc(te,J-te,te,Math.PI/2,Math.PI,!1),U.lineTo(0,se),U.arc(se,se,se,Math.PI,Math.PI*3/2,!1)}}}(Util)),Util}var Node$1={},Canvas={},Context={},hasRequiredContext;function requireContext(){if(hasRequiredContext)return Context;hasRequiredContext=1,Object.defineProperty(Context,"__esModule",{value:!0}),Context.HitContext=Context.SceneContext=Context.Context=void 0;const t=requireUtil(),e=requireGlobal();function n(ne){const Y=[],U=ne.length,ee=t.Util;for(let J=0;J<U;J++){let ie=ne[J];ee._isNumber(ie)?ie=Math.round(ie*1e3)/1e3:ee._isString(ie)||(ie=ie+""),Y.push(ie)}return Y}const s=",",o="(",u=")",d="([",g="])",y=";",v="()",w="=",T=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],A=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],C=100;let j=class{constructor(Y){this.canvas=Y,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(Y){Y.fillEnabled()&&this._fill(Y)}_fill(Y){}strokeShape(Y){Y.hasStroke()&&this._stroke(Y)}_stroke(Y){}fillStrokeShape(Y){Y.attrs.fillAfterStrokeEnabled?(this.strokeShape(Y),this.fillShape(Y)):(this.fillShape(Y),this.strokeShape(Y))}getTrace(Y,U){let ee=this.traceArr,J=ee.length,ie="",se,K,te,re;for(se=0;se<J;se++)K=ee[se],te=K.method,te?(re=K.args,ie+=te,Y?ie+=v:t.Util._isArray(re[0])?ie+=d+re.join(s)+g:(U&&(re=re.map(ce=>typeof ce=="number"?Math.floor(ce):ce)),ie+=o+re.join(s)+u)):(ie+=K.property,Y||(ie+=w+K.val)),ie+=y;return ie}clearTrace(){this.traceArr=[]}_trace(Y){let U=this.traceArr,ee;U.push(Y),ee=U.length,ee>=C&&U.shift()}reset(){const Y=this.getCanvas().getPixelRatio();this.setTransform(1*Y,0,0,1*Y,0,0)}getCanvas(){return this.canvas}clear(Y){const U=this.getCanvas();Y?this.clearRect(Y.x||0,Y.y||0,Y.width||0,Y.height||0):this.clearRect(0,0,U.getWidth()/U.pixelRatio,U.getHeight()/U.pixelRatio)}_applyLineCap(Y){const U=Y.attrs.lineCap;U&&this.setAttr("lineCap",U)}_applyOpacity(Y){const U=Y.getAbsoluteOpacity();U!==1&&this.setAttr("globalAlpha",U)}_applyLineJoin(Y){const U=Y.attrs.lineJoin;U&&this.setAttr("lineJoin",U)}setAttr(Y,U){this._context[Y]=U}arc(Y,U,ee,J,ie,se){this._context.arc(Y,U,ee,J,ie,se)}arcTo(Y,U,ee,J,ie){this._context.arcTo(Y,U,ee,J,ie)}beginPath(){this._context.beginPath()}bezierCurveTo(Y,U,ee,J,ie,se){this._context.bezierCurveTo(Y,U,ee,J,ie,se)}clearRect(Y,U,ee,J){this._context.clearRect(Y,U,ee,J)}clip(...Y){this._context.clip.apply(this._context,Y)}closePath(){this._context.closePath()}createImageData(Y,U){const ee=arguments;if(ee.length===2)return this._context.createImageData(Y,U);if(ee.length===1)return this._context.createImageData(Y)}createLinearGradient(Y,U,ee,J){return this._context.createLinearGradient(Y,U,ee,J)}createPattern(Y,U){return this._context.createPattern(Y,U)}createRadialGradient(Y,U,ee,J,ie,se){return this._context.createRadialGradient(Y,U,ee,J,ie,se)}drawImage(Y,U,ee,J,ie,se,K,te,re){const ce=arguments,le=this._context;ce.length===3?le.drawImage(Y,U,ee):ce.length===5?le.drawImage(Y,U,ee,J,ie):ce.length===9&&le.drawImage(Y,U,ee,J,ie,se,K,te,re)}ellipse(Y,U,ee,J,ie,se,K,te){this._context.ellipse(Y,U,ee,J,ie,se,K,te)}isPointInPath(Y,U,ee,J){return ee?this._context.isPointInPath(ee,Y,U,J):this._context.isPointInPath(Y,U,J)}fill(...Y){this._context.fill.apply(this._context,Y)}fillRect(Y,U,ee,J){this._context.fillRect(Y,U,ee,J)}strokeRect(Y,U,ee,J){this._context.strokeRect(Y,U,ee,J)}fillText(Y,U,ee,J){J?this._context.fillText(Y,U,ee,J):this._context.fillText(Y,U,ee)}measureText(Y){return this._context.measureText(Y)}getImageData(Y,U,ee,J){return this._context.getImageData(Y,U,ee,J)}lineTo(Y,U){this._context.lineTo(Y,U)}moveTo(Y,U){this._context.moveTo(Y,U)}rect(Y,U,ee,J){this._context.rect(Y,U,ee,J)}roundRect(Y,U,ee,J,ie){this._context.roundRect(Y,U,ee,J,ie)}putImageData(Y,U,ee){this._context.putImageData(Y,U,ee)}quadraticCurveTo(Y,U,ee,J){this._context.quadraticCurveTo(Y,U,ee,J)}restore(){this._context.restore()}rotate(Y){this._context.rotate(Y)}save(){this._context.save()}scale(Y,U){this._context.scale(Y,U)}setLineDash(Y){this._context.setLineDash?this._context.setLineDash(Y):"mozDash"in this._context?this._context.mozDash=Y:"webkitLineDash"in this._context&&(this._context.webkitLineDash=Y)}getLineDash(){return this._context.getLineDash()}setTransform(Y,U,ee,J,ie,se){this._context.setTransform(Y,U,ee,J,ie,se)}stroke(Y){Y?this._context.stroke(Y):this._context.stroke()}strokeText(Y,U,ee,J){this._context.strokeText(Y,U,ee,J)}transform(Y,U,ee,J,ie,se){this._context.transform(Y,U,ee,J,ie,se)}translate(Y,U){this._context.translate(Y,U)}_enableTrace(){let Y=this,U=T.length,ee=this.setAttr,J,ie;const se=function(K){let te=Y[K],re;Y[K]=function(){return ie=n(Array.prototype.slice.call(arguments,0)),re=te.apply(Y,arguments),Y._trace({method:K,args:ie}),re}};for(J=0;J<U;J++)se(T[J]);Y.setAttr=function(){ee.apply(Y,arguments);const K=arguments[0];let te=arguments[1];(K==="shadowOffsetX"||K==="shadowOffsetY"||K==="shadowBlur")&&(te=te/this.canvas.getPixelRatio()),Y._trace({property:K,val:te})}}_applyGlobalCompositeOperation(Y){const U=Y.attrs.globalCompositeOperation;!U||U==="source-over"||this.setAttr("globalCompositeOperation",U)}};Context.Context=j,A.forEach(function(ne){Object.defineProperty(j.prototype,ne,{get(){return this._context[ne]},set(Y){this._context[ne]=Y}})});class D extends j{constructor(Y,{willReadFrequently:U=!1}={}){super(Y),this._context=Y._canvas.getContext("2d",{willReadFrequently:U})}_fillColor(Y){const U=Y.fill();this.setAttr("fillStyle",U),Y._fillFunc(this)}_fillPattern(Y){this.setAttr("fillStyle",Y._getFillPattern()),Y._fillFunc(this)}_fillLinearGradient(Y){const U=Y._getLinearGradient();U&&(this.setAttr("fillStyle",U),Y._fillFunc(this))}_fillRadialGradient(Y){const U=Y._getRadialGradient();U&&(this.setAttr("fillStyle",U),Y._fillFunc(this))}_fill(Y){const U=Y.fill(),ee=Y.getFillPriority();if(U&&ee==="color"){this._fillColor(Y);return}const J=Y.getFillPatternImage();if(J&&ee==="pattern"){this._fillPattern(Y);return}const ie=Y.getFillLinearGradientColorStops();if(ie&&ee==="linear-gradient"){this._fillLinearGradient(Y);return}const se=Y.getFillRadialGradientColorStops();if(se&&ee==="radial-gradient"){this._fillRadialGradient(Y);return}U?this._fillColor(Y):J?this._fillPattern(Y):ie?this._fillLinearGradient(Y):se&&this._fillRadialGradient(Y)}_strokeLinearGradient(Y){const U=Y.getStrokeLinearGradientStartPoint(),ee=Y.getStrokeLinearGradientEndPoint(),J=Y.getStrokeLinearGradientColorStops(),ie=this.createLinearGradient(U.x,U.y,ee.x,ee.y);if(J){for(let se=0;se<J.length;se+=2)ie.addColorStop(J[se],J[se+1]);this.setAttr("strokeStyle",ie)}}_stroke(Y){const U=Y.dash(),ee=Y.getStrokeScaleEnabled();if(Y.hasStroke()){if(!ee){this.save();const ie=this.getCanvas().getPixelRatio();this.setTransform(ie,0,0,ie,0,0)}this._applyLineCap(Y),U&&Y.dashEnabled()&&(this.setLineDash(U),this.setAttr("lineDashOffset",Y.dashOffset())),this.setAttr("lineWidth",Y.strokeWidth()),Y.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),Y.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(Y):this.setAttr("strokeStyle",Y.stroke()),Y._strokeFunc(this),ee||this.restore()}}_applyShadow(Y){var U,ee,J;const ie=(U=Y.getShadowRGBA())!==null&&U!==void 0?U:"black",se=(ee=Y.getShadowBlur())!==null&&ee!==void 0?ee:5,K=(J=Y.getShadowOffset())!==null&&J!==void 0?J:{x:0,y:0},te=Y.getAbsoluteScale(),re=this.canvas.getPixelRatio(),ce=te.x*re,le=te.y*re;this.setAttr("shadowColor",ie),this.setAttr("shadowBlur",se*Math.min(Math.abs(ce),Math.abs(le))),this.setAttr("shadowOffsetX",K.x*ce),this.setAttr("shadowOffsetY",K.y*le)}}Context.SceneContext=D;class H extends j{constructor(Y){super(Y),this._context=Y._canvas.getContext("2d",{willReadFrequently:!0})}_fill(Y){this.save(),this.setAttr("fillStyle",Y.colorKey),Y._fillFuncHit(this),this.restore()}strokeShape(Y){Y.hasHitStroke()&&this._stroke(Y)}_stroke(Y){if(Y.hasHitStroke()){const U=Y.getStrokeScaleEnabled();if(!U){this.save();const ie=this.getCanvas().getPixelRatio();this.setTransform(ie,0,0,ie,0,0)}this._applyLineCap(Y);const ee=Y.hitStrokeWidth(),J=ee==="auto"?Y.strokeWidth():ee;this.setAttr("lineWidth",J),this.setAttr("strokeStyle",Y.colorKey),Y._strokeFuncHit(this),U||this.restore()}}}return Context.HitContext=H,Context}var hasRequiredCanvas;function requireCanvas(){if(hasRequiredCanvas)return Canvas;hasRequiredCanvas=1,Object.defineProperty(Canvas,"__esModule",{value:!0}),Canvas.HitCanvas=Canvas.SceneCanvas=Canvas.Canvas=void 0;const t=requireUtil(),e=requireContext(),n=requireGlobal();let s;function o(){if(s)return s;const y=t.Util.createCanvasElement(),v=y.getContext("2d");return s=function(){const w=n.Konva._global.devicePixelRatio||1,T=v.webkitBackingStorePixelRatio||v.mozBackingStorePixelRatio||v.msBackingStorePixelRatio||v.oBackingStorePixelRatio||v.backingStorePixelRatio||1;return w/T}(),t.Util.releaseCanvas(y),s}let u=class{constructor(v){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const T=(v||{}).pixelRatio||n.Konva.pixelRatio||o();this.pixelRatio=T,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(v){const w=this.pixelRatio;this.pixelRatio=v,this.setSize(this.getWidth()/w,this.getHeight()/w)}setWidth(v){this.width=this._canvas.width=v*this.pixelRatio,this._canvas.style.width=v+"px";const w=this.pixelRatio;this.getContext()._context.scale(w,w)}setHeight(v){this.height=this._canvas.height=v*this.pixelRatio,this._canvas.style.height=v+"px";const w=this.pixelRatio;this.getContext()._context.scale(w,w)}getWidth(){return this.width}getHeight(){return this.height}setSize(v,w){this.setWidth(v||0),this.setHeight(w||0)}toDataURL(v,w){try{return this._canvas.toDataURL(v,w)}catch{try{return this._canvas.toDataURL()}catch(A){return t.Util.error("Unable to get data URL. "+A.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Canvas.Canvas=u;class d extends u{constructor(v={width:0,height:0,willReadFrequently:!1}){super(v),this.context=new e.SceneContext(this,{willReadFrequently:v.willReadFrequently}),this.setSize(v.width,v.height)}}Canvas.SceneCanvas=d;class g extends u{constructor(v={width:0,height:0}){super(v),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(v.width,v.height)}}return Canvas.HitCanvas=g,Canvas}var DragAndDrop={},hasRequiredDragAndDrop;function requireDragAndDrop(){return hasRequiredDragAndDrop||(hasRequiredDragAndDrop=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=requireGlobal(),n=requireUtil();t.DD={get isDragging(){let s=!1;return t.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(s=!0)}),s},justDragged:!1,get node(){let s;return t.DD._dragElements.forEach(o=>{s=o.node}),s},_dragElements:new Map,_drag(s){const o=[];t.DD._dragElements.forEach((u,d)=>{const{node:g}=u,y=g.getStage();y.setPointersPositions(s),u.pointerId===void 0&&(u.pointerId=n.Util._getFirstPointerId(s));const v=y._changedPointerPositions.find(w=>w.id===u.pointerId);if(v){if(u.dragStatus!=="dragging"){const w=g.dragDistance();if(Math.max(Math.abs(v.x-u.startPointerPos.x),Math.abs(v.y-u.startPointerPos.y))<w||(g.startDrag({evt:s}),!g.isDragging()))return}g._setDragPosition(s,u),o.push(g)}}),o.forEach(u=>{u.fire("dragmove",{type:"dragmove",target:u,evt:s},!0)})},_endDragBefore(s){const o=[];t.DD._dragElements.forEach(u=>{const{node:d}=u,g=d.getStage();if(s&&g.setPointersPositions(s),!g._changedPointerPositions.find(w=>w.id===u.pointerId))return;(u.dragStatus==="dragging"||u.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,u.dragStatus="stopped");const v=u.node.getLayer()||u.node instanceof e.Konva.Stage&&u.node;v&&o.indexOf(v)===-1&&o.push(v)}),o.forEach(u=>{u.draw()})},_endDragAfter(s){t.DD._dragElements.forEach((o,u)=>{o.dragStatus==="stopped"&&o.node.fire("dragend",{type:"dragend",target:o.node,evt:s},!0),o.dragStatus!=="dragging"&&t.DD._dragElements.delete(u)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))}(DragAndDrop)),DragAndDrop}var Factory={},Validators={},hasRequiredValidators;function requireValidators(){if(hasRequiredValidators)return Validators;hasRequiredValidators=1,Object.defineProperty(Validators,"__esModule",{value:!0}),Validators.RGBComponent=s,Validators.alphaComponent=o,Validators.getNumberValidator=u,Validators.getNumberOrArrayOfNumbersValidator=d,Validators.getNumberOrAutoValidator=g,Validators.getStringValidator=y,Validators.getStringOrGradientValidator=v,Validators.getFunctionValidator=w,Validators.getNumberArrayValidator=T,Validators.getBooleanValidator=A,Validators.getComponentValidator=C;const t=requireGlobal(),e=requireUtil();function n(j){return e.Util._isString(j)?'"'+j+'"':Object.prototype.toString.call(j)==="[object Number]"||e.Util._isBoolean(j)?j:Object.prototype.toString.call(j)}function s(j){return j>255?255:j<0?0:Math.round(j)}function o(j){return j>1?1:j<1e-4?1e-4:j}function u(){if(t.Konva.isUnminified)return function(j,D){return e.Util._isNumber(j)||e.Util.warn(n(j)+' is a not valid value for "'+D+'" attribute. The value should be a number.'),j}}function d(j){if(t.Konva.isUnminified)return function(D,H){let ne=e.Util._isNumber(D),Y=e.Util._isArray(D)&&D.length==j;return!ne&&!Y&&e.Util.warn(n(D)+' is a not valid value for "'+H+'" attribute. The value should be a number or Array<number>('+j+")"),D}}function g(){if(t.Konva.isUnminified)return function(j,D){return e.Util._isNumber(j)||j==="auto"||e.Util.warn(n(j)+' is a not valid value for "'+D+'" attribute. The value should be a number or "auto".'),j}}function y(){if(t.Konva.isUnminified)return function(j,D){return e.Util._isString(j)||e.Util.warn(n(j)+' is a not valid value for "'+D+'" attribute. The value should be a string.'),j}}function v(){if(t.Konva.isUnminified)return function(j,D){const H=e.Util._isString(j),ne=Object.prototype.toString.call(j)==="[object CanvasGradient]"||j&&j.addColorStop;return H||ne||e.Util.warn(n(j)+' is a not valid value for "'+D+'" attribute. The value should be a string or a native gradient.'),j}}function w(){if(t.Konva.isUnminified)return function(j,D){return e.Util._isFunction(j)||e.Util.warn(n(j)+' is a not valid value for "'+D+'" attribute. The value should be a function.'),j}}function T(){if(t.Konva.isUnminified)return function(j,D){const H=Int8Array?Object.getPrototypeOf(Int8Array):null;return H&&j instanceof H||(e.Util._isArray(j)?j.forEach(function(ne){e.Util._isNumber(ne)||e.Util.warn('"'+D+'" attribute has non numeric element '+ne+". Make sure that all elements are numbers.")}):e.Util.warn(n(j)+' is a not valid value for "'+D+'" attribute. The value should be a array of numbers.')),j}}function A(){if(t.Konva.isUnminified)return function(j,D){return j===!0||j===!1||e.Util.warn(n(j)+' is a not valid value for "'+D+'" attribute. The value should be a boolean.'),j}}function C(j){if(t.Konva.isUnminified)return function(D,H){return D==null||e.Util.isObject(D)||e.Util.warn(n(D)+' is a not valid value for "'+H+'" attribute. The value should be an object with properties '+j),D}}return Validators}var hasRequiredFactory;function requireFactory(){return hasRequiredFactory||(hasRequiredFactory=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=requireUtil(),n=requireValidators(),s="get",o="set";t.Factory={addGetterSetter(u,d,g,y,v){t.Factory.addGetter(u,d,g),t.Factory.addSetter(u,d,y,v),t.Factory.addOverloadedGetterSetter(u,d)},addGetter(u,d,g){const y=s+e.Util._capitalize(d);u.prototype[y]=u.prototype[y]||function(){const v=this.attrs[d];return v===void 0?g:v}},addSetter(u,d,g,y){const v=o+e.Util._capitalize(d);u.prototype[v]||t.Factory.overWriteSetter(u,d,g,y)},overWriteSetter(u,d,g,y){const v=o+e.Util._capitalize(d);u.prototype[v]=function(w){return g&&w!==void 0&&w!==null&&(w=g.call(this,w,d)),this._setAttr(d,w),y&&y.call(this),this}},addComponentsGetterSetter(u,d,g,y,v){const w=g.length,T=e.Util._capitalize,A=s+T(d),C=o+T(d);u.prototype[A]=function(){const D={};for(let H=0;H<w;H++){const ne=g[H];D[ne]=this.getAttr(d+T(ne))}return D};const j=(0,n.getComponentValidator)(g);u.prototype[C]=function(D){const H=this.attrs[d];y&&(D=y.call(this,D,d)),j&&j.call(this,D,d);for(const ne in D)D.hasOwnProperty(ne)&&this._setAttr(d+T(ne),D[ne]);return D||g.forEach(ne=>{this._setAttr(d+T(ne),void 0)}),this._fireChangeEvent(d,H,D),v&&v.call(this),this},t.Factory.addOverloadedGetterSetter(u,d)},addOverloadedGetterSetter(u,d){const g=e.Util._capitalize(d),y=o+g,v=s+g;u.prototype[d]=function(){return arguments.length?(this[y](arguments[0]),this):this[v]()}},addDeprecatedGetterSetter(u,d,g,y){e.Util.error("Adding deprecated "+d);const v=s+e.Util._capitalize(d),w=d+" property is deprecated and will be removed soon. Look at Konva change log for more information.";u.prototype[v]=function(){e.Util.error(w);const T=this.attrs[d];return T===void 0?g:T},t.Factory.addSetter(u,d,y,function(){e.Util.error(w)}),t.Factory.addOverloadedGetterSetter(u,d)},backCompat(u,d){e.Util.each(d,function(g,y){const v=u.prototype[y],w=s+e.Util._capitalize(g),T=o+e.Util._capitalize(g);function A(){v.apply(this,arguments),e.Util.error('"'+g+'" method is deprecated and will be removed soon. Use ""'+y+'" instead.')}u.prototype[g]=A,u.prototype[w]=A,u.prototype[T]=A})},afterSetFilter(){this._filterUpToDate=!1}}}(Factory)),Factory}var hasRequiredNode;function requireNode(){if(hasRequiredNode)return Node$1;hasRequiredNode=1,Object.defineProperty(Node$1,"__esModule",{value:!0}),Node$1.Node=void 0;const t=requireCanvas(),e=requireDragAndDrop(),n=requireFactory(),s=requireGlobal(),o=requireUtil(),u=requireValidators(),d="absoluteOpacity",g="allEventListeners",y="absoluteTransform",v="absoluteScale",w="canvas",T="Change",A="children",C="konva",j="listening",D="mouseenter",H="mouseleave",ne="pointerenter",Y="pointerleave",U="touchenter",ee="touchleave",J="set",ie="Shape",se=" ",K="stage",te="transform",re="Stage",ce="visible",le=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(se);let ue=1;class _e{constructor(de){this._id=ue++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(de),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(de){(de===te||de===y)&&this._cache.get(de)?this._cache.get(de).dirty=!0:de?this._cache.delete(de):this._cache.clear()}_getCache(de,me){let xe=this._cache.get(de);return(xe===void 0||(de===te||de===y)&&xe.dirty===!0)&&(xe=me.call(this),this._cache.set(de,xe)),xe}_calculate(de,me,xe){if(!this._attachedDepsListeners.get(de)){const pe=me.map(ve=>ve+"Change.konva").join(se);this.on(pe,()=>{this._clearCache(de)}),this._attachedDepsListeners.set(de,!0)}return this._getCache(de,xe)}_getCanvasCache(){return this._cache.get(w)}_clearSelfAndDescendantCache(de){this._clearCache(de),de===y&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(w)){const{scene:de,filter:me,hit:xe,buffer:pe}=this._cache.get(w);o.Util.releaseCanvas(de,me,xe,pe),this._cache.delete(w)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(de){const me=de||{};let xe={};(me.x===void 0||me.y===void 0||me.width===void 0||me.height===void 0)&&(xe=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let pe=Math.ceil(me.width||xe.width),ve=Math.ceil(me.height||xe.height),Oe=me.pixelRatio,Te=me.x===void 0?Math.floor(xe.x):me.x,Le=me.y===void 0?Math.floor(xe.y):me.y,Me=me.offset||0,Ce=me.drawBorder||!1,be=me.hitCanvasPixelRatio||1;if(!pe||!ve){o.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Ve=Math.abs(Math.round(xe.x)-Te)>.5?1:0,$e=Math.abs(Math.round(xe.y)-Le)>.5?1:0;pe+=Me*2+Ve,ve+=Me*2+$e,Te-=Me,Le-=Me;const Fe=new t.SceneCanvas({pixelRatio:Oe,width:pe,height:ve}),je=new t.SceneCanvas({pixelRatio:Oe,width:0,height:0,willReadFrequently:!0}),De=new t.HitCanvas({pixelRatio:be,width:pe,height:ve}),Ie=Fe.getContext(),Re=De.getContext(),Ne=new t.SceneCanvas({width:Fe.width/Fe.pixelRatio+Math.abs(Te),height:Fe.height/Fe.pixelRatio+Math.abs(Le),pixelRatio:Fe.pixelRatio}),Ue=Ne.getContext();return De.isCache=!0,Fe.isCache=!0,this._cache.delete(w),this._filterUpToDate=!1,me.imageSmoothingEnabled===!1&&(Fe.getContext()._context.imageSmoothingEnabled=!1,je.getContext()._context.imageSmoothingEnabled=!1),Ie.save(),Re.save(),Ue.save(),Ie.translate(-Te,-Le),Re.translate(-Te,-Le),Ue.translate(-Te,-Le),Ne.x=Te,Ne.y=Le,this._isUnderCache=!0,this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(v),this.drawScene(Fe,this,Ne),this.drawHit(De,this),this._isUnderCache=!1,Ie.restore(),Re.restore(),Ce&&(Ie.save(),Ie.beginPath(),Ie.rect(0,0,pe,ve),Ie.closePath(),Ie.setAttr("strokeStyle","red"),Ie.setAttr("lineWidth",5),Ie.stroke(),Ie.restore()),this._cache.set(w,{scene:Fe,filter:je,hit:De,buffer:Ne,x:Te,y:Le}),this._requestDraw(),this}isCached(){return this._cache.has(w)}getClientRect(de){throw new Error('abstract "getClientRect" method call')}_transformedRect(de,me){const xe=[{x:de.x,y:de.y},{x:de.x+de.width,y:de.y},{x:de.x+de.width,y:de.y+de.height},{x:de.x,y:de.y+de.height}];let pe=1/0,ve=1/0,Oe=-1/0,Te=-1/0;const Le=this.getAbsoluteTransform(me);return xe.forEach(function(Me){const Ce=Le.point(Me);pe===void 0&&(pe=Oe=Ce.x,ve=Te=Ce.y),pe=Math.min(pe,Ce.x),ve=Math.min(ve,Ce.y),Oe=Math.max(Oe,Ce.x),Te=Math.max(Te,Ce.y)}),{x:pe,y:ve,width:Oe-pe,height:Te-ve}}_drawCachedSceneCanvas(de){de.save(),de._applyOpacity(this),de._applyGlobalCompositeOperation(this);const me=this._getCanvasCache();de.translate(me.x,me.y);const xe=this._getCachedSceneCanvas(),pe=xe.pixelRatio;de.drawImage(xe._canvas,0,0,xe.width/pe,xe.height/pe),de.restore()}_drawCachedHitCanvas(de){const me=this._getCanvasCache(),xe=me.hit;de.save(),de.translate(me.x,me.y),de.drawImage(xe._canvas,0,0,xe.width/xe.pixelRatio,xe.height/xe.pixelRatio),de.restore()}_getCachedSceneCanvas(){let de=this.filters(),me=this._getCanvasCache(),xe=me.scene,pe=me.filter,ve=pe.getContext(),Oe,Te,Le,Me;if(de){if(!this._filterUpToDate){const Ce=xe.pixelRatio;pe.setSize(xe.width/xe.pixelRatio,xe.height/xe.pixelRatio);try{for(Oe=de.length,ve.clear(),ve.drawImage(xe._canvas,0,0,xe.getWidth()/Ce,xe.getHeight()/Ce),Te=ve.getImageData(0,0,pe.getWidth(),pe.getHeight()),Le=0;Le<Oe;Le++){if(Me=de[Le],typeof Me!="function"){o.Util.error("Filter should be type of function, but got "+typeof Me+" instead. Please check correct filters");continue}Me.call(this,Te),ve.putImageData(Te,0,0)}}catch(be){o.Util.error("Unable to apply filter. "+be.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return pe}return xe}on(de,me){if(this._cache&&this._cache.delete(g),arguments.length===3)return this._delegate.apply(this,arguments);const xe=de.split(se);for(let pe=0;pe<xe.length;pe++){const Oe=xe[pe].split("."),Te=Oe[0],Le=Oe[1]||"";this.eventListeners[Te]||(this.eventListeners[Te]=[]),this.eventListeners[Te].push({name:Le,handler:me})}return this}off(de,me){let xe=(de||"").split(se),pe=xe.length,ve,Oe,Te,Le,Me,Ce;if(this._cache&&this._cache.delete(g),!de)for(Oe in this.eventListeners)this._off(Oe);for(ve=0;ve<pe;ve++)if(Te=xe[ve],Le=Te.split("."),Me=Le[0],Ce=Le[1],Me)this.eventListeners[Me]&&this._off(Me,Ce,me);else for(Oe in this.eventListeners)this._off(Oe,Ce,me);return this}dispatchEvent(de){const me={target:this,type:de.type,evt:de};return this.fire(de.type,me),this}addEventListener(de,me){return this.on(de,function(xe){me.call(this,xe.evt)}),this}removeEventListener(de){return this.off(de),this}_delegate(de,me,xe){const pe=this;this.on(de,function(ve){const Oe=ve.target.findAncestors(me,!0,pe);for(let Te=0;Te<Oe.length;Te++)ve=o.Util.cloneObject(ve),ve.currentTarget=Oe[Te],xe.call(Oe[Te],ve)})}remove(){return this.isDragging()&&this.stopDrag(),e.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(K),this._clearSelfAndDescendantCache(ce),this._clearSelfAndDescendantCache(j)}_remove(){this._clearCaches();const de=this.getParent();de&&de.children&&(de.children.splice(this.index,1),de._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(de){const me="get"+o.Util._capitalize(de);return o.Util._isFunction(this[me])?this[me]():this.attrs[de]}getAncestors(){let de=this.getParent(),me=[];for(;de;)me.push(de),de=de.getParent();return me}getAttrs(){return this.attrs||{}}setAttrs(de){return this._batchTransformChanges(()=>{let me,xe;if(!de)return this;for(me in de)me!==A&&(xe=J+o.Util._capitalize(me),o.Util._isFunction(this[xe])?this[xe](de[me]):this._setAttr(me,de[me]))}),this}isListening(){return this._getCache(j,this._isListening)}_isListening(de){if(!this.listening())return!1;const xe=this.getParent();return xe&&xe!==de&&this!==de?xe._isListening(de):!0}isVisible(){return this._getCache(ce,this._isVisible)}_isVisible(de){if(!this.visible())return!1;const xe=this.getParent();return xe&&xe!==de&&this!==de?xe._isVisible(de):!0}shouldDrawHit(de,me=!1){if(de)return this._isVisible(de)&&this._isListening(de);const xe=this.getLayer();let pe=!1;e.DD._dragElements.forEach(Oe=>{Oe.dragStatus==="dragging"&&(Oe.node.nodeType==="Stage"||Oe.node.getLayer()===xe)&&(pe=!0)});const ve=!me&&!s.Konva.hitOnDragEnabled&&(pe||s.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!ve}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let de=this.getDepth(),me=this,xe=0,pe,ve,Oe,Te;function Le(Ce){for(pe=[],ve=Ce.length,Oe=0;Oe<ve;Oe++)Te=Ce[Oe],xe++,Te.nodeType!==ie&&(pe=pe.concat(Te.getChildren().slice())),Te._id===me._id&&(Oe=ve);pe.length>0&&pe[0].getDepth()<=de&&Le(pe)}const Me=this.getStage();return me.nodeType!==re&&Me&&Le(Me.getChildren()),xe}getDepth(){let de=0,me=this.parent;for(;me;)de++,me=me.parent;return de}_batchTransformChanges(de){this._batchingTransformChange=!0,de(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(te),this._clearSelfAndDescendantCache(y)),this._needClearTransformCache=!1}setPosition(de){return this._batchTransformChanges(()=>{this.x(de.x),this.y(de.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const de=this.getStage();if(!de)return null;const me=de.getPointerPosition();if(!me)return null;const xe=this.getAbsoluteTransform().copy();return xe.invert(),xe.point(me)}getAbsolutePosition(de){let me=!1,xe=this.parent;for(;xe;){if(xe.isCached()){me=!0;break}xe=xe.parent}me&&!de&&(de=!0);const pe=this.getAbsoluteTransform(de).getMatrix(),ve=new o.Transform,Oe=this.offset();return ve.m=pe.slice(),ve.translate(Oe.x,Oe.y),ve.getTranslation()}setAbsolutePosition(de){const{x:me,y:xe,...pe}=this._clearTransform();this.attrs.x=me,this.attrs.y=xe,this._clearCache(te);const ve=this._getAbsoluteTransform().copy();return ve.invert(),ve.translate(de.x,de.y),de={x:this.attrs.x+ve.getTranslation().x,y:this.attrs.y+ve.getTranslation().y},this._setTransform(pe),this.setPosition({x:de.x,y:de.y}),this._clearCache(te),this._clearSelfAndDescendantCache(y),this}_setTransform(de){let me;for(me in de)this.attrs[me]=de[me]}_clearTransform(){const de={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,de}move(de){let me=de.x,xe=de.y,pe=this.x(),ve=this.y();return me!==void 0&&(pe+=me),xe!==void 0&&(ve+=xe),this.setPosition({x:pe,y:ve}),this}_eachAncestorReverse(de,me){let xe=[],pe=this.getParent(),ve,Oe;if(!(me&&me._id===this._id)){for(xe.unshift(this);pe&&(!me||pe._id!==me._id);)xe.unshift(pe),pe=pe.parent;for(ve=xe.length,Oe=0;Oe<ve;Oe++)de(xe[Oe])}}rotate(de){return this.rotation(this.rotation()+de),this}moveToTop(){if(!this.parent)return o.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const de=this.index,me=this.parent.getChildren().length;return de<me-1?(this.parent.children.splice(de,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return o.Util.warn("Node has no parent. moveUp function is ignored."),!1;const de=this.index,me=this.parent.getChildren().length;return de<me-1?(this.parent.children.splice(de,1),this.parent.children.splice(de+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return o.Util.warn("Node has no parent. moveDown function is ignored."),!1;const de=this.index;return de>0?(this.parent.children.splice(de,1),this.parent.children.splice(de-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return o.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const de=this.index;return de>0?(this.parent.children.splice(de,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(de){if(!this.parent)return o.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(de<0||de>=this.parent.children.length)&&o.Util.warn("Unexpected value "+de+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const me=this.index;return this.parent.children.splice(me,1),this.parent.children.splice(de,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(d,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let de=this.opacity();const me=this.getParent();return me&&!me._isUnderCache&&(de*=me.getAbsoluteOpacity()),de}moveTo(de){return this.getParent()!==de&&(this._remove(),de.add(this)),this}toObject(){let de=this.getAttrs(),me,xe,pe,ve,Oe;const Te={attrs:{},className:this.getClassName()};for(me in de)xe=de[me],Oe=o.Util.isObject(xe)&&!o.Util._isPlainObject(xe)&&!o.Util._isArray(xe),!Oe&&(pe=typeof this[me]=="function"&&this[me],delete de[me],ve=pe?pe.call(this):null,de[me]=xe,ve!==xe&&(Te.attrs[me]=xe));return o.Util._prepareToStringify(Te)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(de,me,xe){const pe=[];me&&this._isMatch(de)&&pe.push(this);let ve=this.parent;for(;ve;){if(ve===xe)return pe;ve._isMatch(de)&&pe.push(ve),ve=ve.parent}return pe}isAncestorOf(de){return!1}findAncestor(de,me,xe){return this.findAncestors(de,me,xe)[0]}_isMatch(de){if(!de)return!1;if(typeof de=="function")return de(this);let me=de.replace(/ /g,"").split(","),xe=me.length,pe,ve;for(pe=0;pe<xe;pe++)if(ve=me[pe],o.Util.isValidSelector(ve)||(o.Util.warn('Selector "'+ve+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),o.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),o.Util.warn("Konva is awesome, right?")),ve.charAt(0)==="#"){if(this.id()===ve.slice(1))return!0}else if(ve.charAt(0)==="."){if(this.hasName(ve.slice(1)))return!0}else if(this.className===ve||this.nodeType===ve)return!0;return!1}getLayer(){const de=this.getParent();return de?de.getLayer():null}getStage(){return this._getCache(K,this._getStage)}_getStage(){const de=this.getParent();return de?de.getStage():null}fire(de,me={},xe){return me.target=me.target||this,xe?this._fireAndBubble(de,me):this._fire(de,me),this}getAbsoluteTransform(de){return de?this._getAbsoluteTransform(de):this._getCache(y,this._getAbsoluteTransform)}_getAbsoluteTransform(de){let me;if(de)return me=new o.Transform,this._eachAncestorReverse(function(xe){const pe=xe.transformsEnabled();pe==="all"?me.multiply(xe.getTransform()):pe==="position"&&me.translate(xe.x()-xe.offsetX(),xe.y()-xe.offsetY())},de),me;{me=this._cache.get(y)||new o.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(me):me.reset();const xe=this.transformsEnabled();if(xe==="all")me.multiply(this.getTransform());else if(xe==="position"){const pe=this.attrs.x||0,ve=this.attrs.y||0,Oe=this.attrs.offsetX||0,Te=this.attrs.offsetY||0;me.translate(pe-Oe,ve-Te)}return me.dirty=!1,me}}getAbsoluteScale(de){let me=this;for(;me;)me._isUnderCache&&(de=me),me=me.getParent();const pe=this.getAbsoluteTransform(de).decompose();return{x:pe.scaleX,y:pe.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(te,this._getTransform)}_getTransform(){var de,me;const xe=this._cache.get(te)||new o.Transform;xe.reset();const pe=this.x(),ve=this.y(),Oe=s.Konva.getAngle(this.rotation()),Te=(de=this.attrs.scaleX)!==null&&de!==void 0?de:1,Le=(me=this.attrs.scaleY)!==null&&me!==void 0?me:1,Me=this.attrs.skewX||0,Ce=this.attrs.skewY||0,be=this.attrs.offsetX||0,Ve=this.attrs.offsetY||0;return(pe!==0||ve!==0)&&xe.translate(pe,ve),Oe!==0&&xe.rotate(Oe),(Me!==0||Ce!==0)&&xe.skew(Me,Ce),(Te!==1||Le!==1)&&xe.scale(Te,Le),(be!==0||Ve!==0)&&xe.translate(-1*be,-1*Ve),xe.dirty=!1,xe}clone(de){let me=o.Util.cloneObject(this.attrs),xe,pe,ve,Oe,Te;for(xe in de)me[xe]=de[xe];const Le=new this.constructor(me);for(xe in this.eventListeners)for(pe=this.eventListeners[xe],ve=pe.length,Oe=0;Oe<ve;Oe++)Te=pe[Oe],Te.name.indexOf(C)<0&&(Le.eventListeners[xe]||(Le.eventListeners[xe]=[]),Le.eventListeners[xe].push(Te));return Le}_toKonvaCanvas(de){de=de||{};const me=this.getClientRect(),xe=this.getStage(),pe=de.x!==void 0?de.x:Math.floor(me.x),ve=de.y!==void 0?de.y:Math.floor(me.y),Oe=de.pixelRatio||1,Te=new t.SceneCanvas({width:de.width||Math.ceil(me.width)||(xe?xe.width():0),height:de.height||Math.ceil(me.height)||(xe?xe.height():0),pixelRatio:Oe}),Le=Te.getContext(),Me=new t.SceneCanvas({width:Te.width/Te.pixelRatio+Math.abs(pe),height:Te.height/Te.pixelRatio+Math.abs(ve),pixelRatio:Te.pixelRatio});return de.imageSmoothingEnabled===!1&&(Le._context.imageSmoothingEnabled=!1),Le.save(),(pe||ve)&&Le.translate(-1*pe,-1*ve),this.drawScene(Te,void 0,Me),Le.restore(),Te}toCanvas(de){return this._toKonvaCanvas(de)._canvas}toDataURL(de){de=de||{};const me=de.mimeType||null,xe=de.quality||null,pe=this._toKonvaCanvas(de).toDataURL(me,xe);return de.callback&&de.callback(pe),pe}toImage(de){return new Promise((me,xe)=>{try{const pe=de==null?void 0:de.callback;pe&&delete de.callback,o.Util._urlToImage(this.toDataURL(de),function(ve){me(ve),pe==null||pe(ve)})}catch(pe){xe(pe)}})}toBlob(de){return new Promise((me,xe)=>{try{const pe=de==null?void 0:de.callback;pe&&delete de.callback,this.toCanvas(de).toBlob(ve=>{me(ve),pe==null||pe(ve)},de==null?void 0:de.mimeType,de==null?void 0:de.quality)}catch(pe){xe(pe)}})}setSize(de){return this.width(de.width),this.height(de.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.Konva.dragDistance}_off(de,me,xe){let pe=this.eventListeners[de],ve,Oe,Te;for(ve=0;ve<pe.length;ve++)if(Oe=pe[ve].name,Te=pe[ve].handler,(Oe!=="konva"||me==="konva")&&(!me||Oe===me)&&(!xe||xe===Te)){if(pe.splice(ve,1),pe.length===0){delete this.eventListeners[de];break}ve--}}_fireChangeEvent(de,me,xe){this._fire(de+T,{oldVal:me,newVal:xe})}addName(de){if(!this.hasName(de)){const me=this.name(),xe=me?me+" "+de:de;this.name(xe)}return this}hasName(de){if(!de)return!1;const me=this.name();return me?(me||"").split(/\s/g).indexOf(de)!==-1:!1}removeName(de){const me=(this.name()||"").split(/\s/g),xe=me.indexOf(de);return xe!==-1&&(me.splice(xe,1),this.name(me.join(" "))),this}setAttr(de,me){const xe=this[J+o.Util._capitalize(de)];return o.Util._isFunction(xe)?xe.call(this,me):this._setAttr(de,me),this}_requestDraw(){if(s.Konva.autoDrawEnabled){const de=this.getLayer()||this.getStage();de==null||de.batchDraw()}}_setAttr(de,me){const xe=this.attrs[de];xe===me&&!o.Util.isObject(me)||(me==null?delete this.attrs[de]:this.attrs[de]=me,this._shouldFireChangeEvents&&this._fireChangeEvent(de,xe,me),this._requestDraw())}_setComponentAttr(de,me,xe){let pe;xe!==void 0&&(pe=this.attrs[de],pe||(this.attrs[de]=this.getAttr(de)),this.attrs[de][me]=xe,this._fireChangeEvent(de,pe,xe))}_fireAndBubble(de,me,xe){me&&this.nodeType===ie&&(me.target=this);const pe=[D,H,ne,Y,U,ee];if(!(pe.indexOf(de)!==-1&&(xe&&(this===xe||this.isAncestorOf&&this.isAncestorOf(xe))||this.nodeType==="Stage"&&!xe))){this._fire(de,me);const Oe=pe.indexOf(de)!==-1&&xe&&xe.isAncestorOf&&xe.isAncestorOf(this)&&!xe.isAncestorOf(this.parent);(me&&!me.cancelBubble||!me)&&this.parent&&this.parent.isListening()&&!Oe&&(xe&&xe.parent?this._fireAndBubble.call(this.parent,de,me,xe):this._fireAndBubble.call(this.parent,de,me))}}_getProtoListeners(de){var me,xe,pe;const ve=(me=this._cache.get(g))!==null&&me!==void 0?me:{};let Oe=ve==null?void 0:ve[de];if(Oe===void 0){Oe=[];let Te=Object.getPrototypeOf(this);for(;Te;){const Le=(pe=(xe=Te.eventListeners)===null||xe===void 0?void 0:xe[de])!==null&&pe!==void 0?pe:[];Oe.push(...Le),Te=Object.getPrototypeOf(Te)}ve[de]=Oe,this._cache.set(g,ve)}return Oe}_fire(de,me){me=me||{},me.currentTarget=this,me.type=de;const xe=this._getProtoListeners(de);if(xe)for(let ve=0;ve<xe.length;ve++)xe[ve].handler.call(this,me);const pe=this.eventListeners[de];if(pe)for(let ve=0;ve<pe.length;ve++)pe[ve].handler.call(this,me)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(de){const me=de?de.pointerId:void 0,xe=this.getStage(),pe=this.getAbsolutePosition();if(!xe)return;const ve=xe._getPointerById(me)||xe._changedPointerPositions[0]||pe;e.DD._dragElements.set(this._id,{node:this,startPointerPos:ve,offset:{x:ve.x-pe.x,y:ve.y-pe.y},dragStatus:"ready",pointerId:me})}startDrag(de,me=!0){e.DD._dragElements.has(this._id)||this._createDragElement(de);const xe=e.DD._dragElements.get(this._id);xe.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:de&&de.evt},me)}_setDragPosition(de,me){const xe=this.getStage()._getPointerById(me.pointerId);if(!xe)return;let pe={x:xe.x-me.offset.x,y:xe.y-me.offset.y};const ve=this.dragBoundFunc();if(ve!==void 0){const Oe=ve.call(this,pe,de);Oe?pe=Oe:o.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==pe.x||this._lastPos.y!==pe.y)&&(this.setAbsolutePosition(pe),this._requestDraw()),this._lastPos=pe}stopDrag(de){const me=e.DD._dragElements.get(this._id);me&&(me.dragStatus="stopped"),e.DD._endDragBefore(de),e.DD._endDragAfter(de)}setDraggable(de){this._setAttr("draggable",de),this._dragChange()}isDragging(){const de=e.DD._dragElements.get(this._id);return de?de.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(de){if(!(!(de.evt.button!==void 0)||s.Konva.dragButtons.indexOf(de.evt.button)>=0)||this.isDragging())return;let pe=!1;e.DD._dragElements.forEach(ve=>{this.isAncestorOf(ve.node)&&(pe=!0)}),pe||this._createDragElement(de)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const me=e.DD._dragElements.get(this._id),xe=me&&me.dragStatus==="dragging",pe=me&&me.dragStatus==="ready";xe?this.stopDrag():pe&&e.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(de={x:0,y:0}){const me=this.getStage();if(!me)return!1;const xe={x:-de.x,y:-de.y,width:me.width()+2*de.x,height:me.height()+2*de.y};return o.Util.haveIntersection(xe,this.getClientRect())}static create(de,me){return o.Util._isString(de)&&(de=JSON.parse(de)),this._createNode(de,me)}static _createNode(de,me){let xe=_e.prototype.getClassName.call(de),pe=de.children,ve,Oe,Te;me&&(de.attrs.container=me),s.Konva[xe]||(o.Util.warn('Can not find a node with class name "'+xe+'". Fallback to "Shape".'),xe="Shape");const Le=s.Konva[xe];if(ve=new Le(de.attrs),pe)for(Oe=pe.length,Te=0;Te<Oe;Te++)ve.add(_e._createNode(pe[Te]));return ve}}Node$1.Node=_e,_e.prototype.nodeType="Node",_e.prototype._attrsAffectingSize=[],_e.prototype.eventListeners={},_e.prototype.on.call(_e.prototype,le,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(te),this._clearSelfAndDescendantCache(y)}),_e.prototype.on.call(_e.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(ce)}),_e.prototype.on.call(_e.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(j)}),_e.prototype.on.call(_e.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(d)});const Ee=n.Factory.addGetterSetter;return Ee(_e,"zIndex"),Ee(_e,"absolutePosition"),Ee(_e,"position"),Ee(_e,"x",0,(0,u.getNumberValidator)()),Ee(_e,"y",0,(0,u.getNumberValidator)()),Ee(_e,"globalCompositeOperation","source-over",(0,u.getStringValidator)()),Ee(_e,"opacity",1,(0,u.getNumberValidator)()),Ee(_e,"name","",(0,u.getStringValidator)()),Ee(_e,"id","",(0,u.getStringValidator)()),Ee(_e,"rotation",0,(0,u.getNumberValidator)()),n.Factory.addComponentsGetterSetter(_e,"scale",["x","y"]),Ee(_e,"scaleX",1,(0,u.getNumberValidator)()),Ee(_e,"scaleY",1,(0,u.getNumberValidator)()),n.Factory.addComponentsGetterSetter(_e,"skew",["x","y"]),Ee(_e,"skewX",0,(0,u.getNumberValidator)()),Ee(_e,"skewY",0,(0,u.getNumberValidator)()),n.Factory.addComponentsGetterSetter(_e,"offset",["x","y"]),Ee(_e,"offsetX",0,(0,u.getNumberValidator)()),Ee(_e,"offsetY",0,(0,u.getNumberValidator)()),Ee(_e,"dragDistance",void 0,(0,u.getNumberValidator)()),Ee(_e,"width",0,(0,u.getNumberValidator)()),Ee(_e,"height",0,(0,u.getNumberValidator)()),Ee(_e,"listening",!0,(0,u.getBooleanValidator)()),Ee(_e,"preventDefault",!0,(0,u.getBooleanValidator)()),Ee(_e,"filters",void 0,function(we){return this._filterUpToDate=!1,we}),Ee(_e,"visible",!0,(0,u.getBooleanValidator)()),Ee(_e,"transformsEnabled","all",(0,u.getStringValidator)()),Ee(_e,"size"),Ee(_e,"dragBoundFunc"),Ee(_e,"draggable",!1,(0,u.getBooleanValidator)()),n.Factory.backCompat(_e,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Node$1}var Container={},hasRequiredContainer;function requireContainer(){if(hasRequiredContainer)return Container;hasRequiredContainer=1,Object.defineProperty(Container,"__esModule",{value:!0}),Container.Container=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators();let s=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(u){const d=this.children||[];return u?d.filter(u):d}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(u=>{u.parent=null,u.index=0,u.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(u=>{u.parent=null,u.index=0,u.destroy()}),this.children=[],this._requestDraw(),this}add(...u){if(u.length===0)return this;if(u.length>1){for(let g=0;g<u.length;g++)this.add(u[g]);return this}const d=u[0];return d.getParent()?(d.moveTo(this),this):(this._validateAdd(d),d.index=this.getChildren().length,d.parent=this,d._clearCaches(),this.getChildren().push(d),this._fire("add",{child:d}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(u){return this._generalFind(u,!1)}findOne(u){const d=this._generalFind(u,!0);return d.length>0?d[0]:void 0}_generalFind(u,d){const g=[];return this._descendants(y=>{const v=y._isMatch(u);return v&&g.push(y),!!(v&&d)}),g}_descendants(u){let d=!1;const g=this.getChildren();for(const y of g){if(d=u(y),d)return!0;if(y.hasChildren()&&(d=y._descendants(u),d))return!0}return!1}toObject(){const u=e.Node.prototype.toObject.call(this);return u.children=[],this.getChildren().forEach(d=>{u.children.push(d.toObject())}),u}isAncestorOf(u){let d=u.getParent();for(;d;){if(d._id===this._id)return!0;d=d.getParent()}return!1}clone(u){const d=e.Node.prototype.clone.call(this,u);return this.getChildren().forEach(function(g){d.add(g.clone())}),d}getAllIntersections(u){const d=[];return this.find("Shape").forEach(g=>{g.isVisible()&&g.intersects(u)&&d.push(g)}),d}_clearSelfAndDescendantCache(u){var d;super._clearSelfAndDescendantCache(u),!this.isCached()&&((d=this.children)===null||d===void 0||d.forEach(function(g){g._clearSelfAndDescendantCache(u)}))}_setChildrenIndices(){var u;(u=this.children)===null||u===void 0||u.forEach(function(d,g){d.index=g}),this._requestDraw()}drawScene(u,d,g){const y=this.getLayer(),v=u||y&&y.getCanvas(),w=v&&v.getContext(),T=this._getCanvasCache(),A=T&&T.scene,C=v&&v.isCache;if(!this.isVisible()&&!C)return this;if(A){w.save();const j=this.getAbsoluteTransform(d).getMatrix();w.transform(j[0],j[1],j[2],j[3],j[4],j[5]),this._drawCachedSceneCanvas(w),w.restore()}else this._drawChildren("drawScene",v,d,g);return this}drawHit(u,d){if(!this.shouldDrawHit(d))return this;const g=this.getLayer(),y=u||g&&g.hitCanvas,v=y&&y.getContext(),w=this._getCanvasCache();if(w&&w.hit){v.save();const A=this.getAbsoluteTransform(d).getMatrix();v.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._drawCachedHitCanvas(v),v.restore()}else this._drawChildren("drawHit",y,d);return this}_drawChildren(u,d,g,y){var v;const w=d&&d.getContext(),T=this.clipWidth(),A=this.clipHeight(),C=this.clipFunc(),j=typeof T=="number"&&typeof A=="number"||C,D=g===this;if(j){w.save();const ne=this.getAbsoluteTransform(g);let Y=ne.getMatrix();w.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),w.beginPath();let U;if(C)U=C.call(this,w,this);else{const ee=this.clipX(),J=this.clipY();w.rect(ee||0,J||0,T,A)}w.clip.apply(w,U),Y=ne.copy().invert().getMatrix(),w.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5])}const H=!D&&this.globalCompositeOperation()!=="source-over"&&u==="drawScene";H&&(w.save(),w._applyGlobalCompositeOperation(this)),(v=this.children)===null||v===void 0||v.forEach(function(ne){ne[u](d,g,y)}),H&&w.restore(),j&&w.restore()}getClientRect(u={}){var d;const g=u.skipTransform,y=u.relativeTo;let v,w,T,A,C={x:1/0,y:1/0,width:0,height:0};const j=this;(d=this.children)===null||d===void 0||d.forEach(function(ne){if(!ne.visible())return;const Y=ne.getClientRect({relativeTo:j,skipShadow:u.skipShadow,skipStroke:u.skipStroke});Y.width===0&&Y.height===0||(v===void 0?(v=Y.x,w=Y.y,T=Y.x+Y.width,A=Y.y+Y.height):(v=Math.min(v,Y.x),w=Math.min(w,Y.y),T=Math.max(T,Y.x+Y.width),A=Math.max(A,Y.y+Y.height)))});const D=this.find("Shape");let H=!1;for(let ne=0;ne<D.length;ne++)if(D[ne]._isVisible(this)){H=!0;break}return H&&v!==void 0?C={x:v,y:w,width:T-v,height:A-w}:C={x:0,y:0,width:0,height:0},g?C:this._transformedRect(C,y)}};return Container.Container=s,t.Factory.addComponentsGetterSetter(s,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(s,"clipX",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipY",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipWidth",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipHeight",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipFunc"),Container}var Stage={},PointerEvents={},hasRequiredPointerEvents;function requirePointerEvents(){if(hasRequiredPointerEvents)return PointerEvents;hasRequiredPointerEvents=1,Object.defineProperty(PointerEvents,"__esModule",{value:!0}),PointerEvents.getCapturedShape=s,PointerEvents.createEvent=o,PointerEvents.hasPointerCapture=u,PointerEvents.setPointerCapture=d,PointerEvents.releaseCapture=g;const t=requireGlobal(),e=new Map,n=t.Konva._global.PointerEvent!==void 0;function s(y){return e.get(y)}function o(y){return{evt:y,pointerId:y.pointerId}}function u(y,v){return e.get(y)===v}function d(y,v){g(y),v.getStage()&&(e.set(y,v),n&&v._fire("gotpointercapture",o(new PointerEvent("gotpointercapture"))))}function g(y,v){const w=e.get(y);if(!w)return;const T=w.getStage();T&&T.content,e.delete(y),n&&w._fire("lostpointercapture",o(new PointerEvent("lostpointercapture")))}return PointerEvents}var hasRequiredStage;function requireStage(){return hasRequiredStage||(hasRequiredStage=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=requireUtil(),n=requireFactory(),s=requireContainer(),o=requireGlobal(),u=requireCanvas(),d=requireDragAndDrop(),g=requireGlobal(),y=requirePointerEvents(),v="Stage",w="string",T="px",A="mouseout",C="mouseleave",j="mouseover",D="mouseenter",H="mousemove",ne="mousedown",Y="mouseup",U="pointermove",ee="pointerdown",J="pointerup",ie="pointercancel",se="lostpointercapture",K="pointerout",te="pointerleave",re="pointerover",ce="pointerenter",le="contextmenu",ue="touchstart",_e="touchend",Ee="touchmove",we="touchcancel",de="wheel",me=5,xe=[[D,"_pointerenter"],[ne,"_pointerdown"],[H,"_pointermove"],[Y,"_pointerup"],[C,"_pointerleave"],[ue,"_pointerdown"],[Ee,"_pointermove"],[_e,"_pointerup"],[we,"_pointercancel"],[j,"_pointerover"],[de,"_wheel"],[le,"_contextmenu"],[ee,"_pointerdown"],[U,"_pointermove"],[J,"_pointerup"],[ie,"_pointercancel"],[te,"_pointerleave"],[se,"_lostpointercapture"]],pe={mouse:{[K]:A,[te]:C,[re]:j,[ce]:D,[U]:H,[ee]:ne,[J]:Y,[ie]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[K]:"touchout",[te]:"touchleave",[re]:"touchover",[ce]:"touchenter",[U]:Ee,[ee]:ue,[J]:_e,[ie]:we,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[K]:K,[te]:te,[re]:re,[ce]:ce,[U]:U,[ee]:ee,[J]:J,[ie]:ie,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ve=Ce=>Ce.indexOf("pointer")>=0?"pointer":Ce.indexOf("touch")>=0?"touch":"mouse",Oe=Ce=>{const be=ve(Ce);if(be==="pointer")return o.Konva.pointerEventsEnabled&&pe.pointer;if(be==="touch")return pe.touch;if(be==="mouse")return pe.mouse};function Te(Ce={}){return(Ce.clipFunc||Ce.clipWidth||Ce.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Ce}const Le="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class Me extends s.Container{constructor(be){super(Te(be)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Te(this.attrs)}),this._checkVisibility()}_validateAdd(be){const Ve=be.getType()==="Layer",$e=be.getType()==="FastLayer";Ve||$e||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const be=this.visible()?"":"none";this.content.style.display=be}setContainer(be){if(typeof be===w){let Ve;if(be.charAt(0)==="."){const $e=be.slice(1);be=document.getElementsByClassName($e)[0]}else be.charAt(0)!=="#"?Ve=be:Ve=be.slice(1),be=document.getElementById(Ve);if(!be)throw"Can not find container in document with id "+Ve}return this._setAttr("container",be),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),be.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const be=this.children,Ve=be.length;for(let $e=0;$e<Ve;$e++)be[$e].clear();return this}clone(be){return be||(be={}),be.container=typeof document<"u"&&document.createElement("div"),s.Container.prototype.clone.call(this,be)}destroy(){super.destroy();const be=this.content;be&&e.Util._isInDocument(be)&&this.container().removeChild(be);const Ve=t.stages.indexOf(this);return Ve>-1&&t.stages.splice(Ve,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const be=this._pointerPositions[0]||this._changedPointerPositions[0];return be?{x:be.x,y:be.y}:(e.Util.warn(Le),null)}_getPointerById(be){return this._pointerPositions.find(Ve=>Ve.id===be)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(be){be=be||{},be.x=be.x||0,be.y=be.y||0,be.width=be.width||this.width(),be.height=be.height||this.height();const Ve=new u.SceneCanvas({width:be.width,height:be.height,pixelRatio:be.pixelRatio||1}),$e=Ve.getContext()._context,Fe=this.children;return(be.x||be.y)&&$e.translate(-1*be.x,-1*be.y),Fe.forEach(function(je){if(!je.isVisible())return;const De=je._toKonvaCanvas(be);$e.drawImage(De._canvas,be.x,be.y,De.getWidth()/De.getPixelRatio(),De.getHeight()/De.getPixelRatio())}),Ve}getIntersection(be){if(!be)return null;const Ve=this.children,$e=Ve.length,Fe=$e-1;for(let je=Fe;je>=0;je--){const De=Ve[je].getIntersection(be);if(De)return De}return null}_resizeDOM(){const be=this.width(),Ve=this.height();this.content&&(this.content.style.width=be+T,this.content.style.height=Ve+T),this.bufferCanvas.setSize(be,Ve),this.bufferHitCanvas.setSize(be,Ve),this.children.forEach($e=>{$e.setSize({width:be,height:Ve}),$e.draw()})}add(be,...Ve){if(arguments.length>1){for(let Fe=0;Fe<arguments.length;Fe++)this.add(arguments[Fe]);return this}super.add(be);const $e=this.children.length;return $e>me&&e.Util.warn("The stage has "+$e+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),be.setSize({width:this.width(),height:this.height()}),be.draw(),o.Konva.isBrowser&&this.content.appendChild(be.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(be){return y.hasPointerCapture(be,this)}setPointerCapture(be){y.setPointerCapture(be,this)}releaseCapture(be){y.releaseCapture(be,this)}getLayers(){return this.children}_bindContentEvents(){o.Konva.isBrowser&&xe.forEach(([be,Ve])=>{this.content.addEventListener(be,$e=>{this[Ve]($e)},{passive:!1})})}_pointerenter(be){this.setPointersPositions(be);const Ve=Oe(be.type);Ve&&this._fire(Ve.pointerenter,{evt:be,target:this,currentTarget:this})}_pointerover(be){this.setPointersPositions(be);const Ve=Oe(be.type);Ve&&this._fire(Ve.pointerover,{evt:be,target:this,currentTarget:this})}_getTargetShape(be){let Ve=this[be+"targetShape"];return Ve&&!Ve.getStage()&&(Ve=null),Ve}_pointerleave(be){const Ve=Oe(be.type),$e=ve(be.type);if(!Ve)return;this.setPointersPositions(be);const Fe=this._getTargetShape($e),je=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;Fe&&je?(Fe._fireAndBubble(Ve.pointerout,{evt:be}),Fe._fireAndBubble(Ve.pointerleave,{evt:be}),this._fire(Ve.pointerleave,{evt:be,target:this,currentTarget:this}),this[$e+"targetShape"]=null):je&&(this._fire(Ve.pointerleave,{evt:be,target:this,currentTarget:this}),this._fire(Ve.pointerout,{evt:be,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(be){const Ve=Oe(be.type),$e=ve(be.type);if(!Ve)return;this.setPointersPositions(be);let Fe=!1;this._changedPointerPositions.forEach(je=>{const De=this.getIntersection(je);if(d.DD.justDragged=!1,o.Konva["_"+$e+"ListenClick"]=!0,!De||!De.isListening()){this[$e+"ClickStartShape"]=void 0;return}o.Konva.capturePointerEventsEnabled&&De.setPointerCapture(je.id),this[$e+"ClickStartShape"]=De,De._fireAndBubble(Ve.pointerdown,{evt:be,pointerId:je.id}),Fe=!0;const Ie=be.type.indexOf("touch")>=0;De.preventDefault()&&be.cancelable&&Ie&&be.preventDefault()}),Fe||this._fire(Ve.pointerdown,{evt:be,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(be){const Ve=Oe(be.type),$e=ve(be.type);if(!Ve||(o.Konva.isDragging()&&d.DD.node.preventDefault()&&be.cancelable&&be.preventDefault(),this.setPointersPositions(be),!(!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled)))return;const je={};let De=!1;const Ie=this._getTargetShape($e);this._changedPointerPositions.forEach(Re=>{const Ne=y.getCapturedShape(Re.id)||this.getIntersection(Re),Ue=Re.id,pt={evt:be,pointerId:Ue},Ze=Ie!==Ne;if(Ze&&Ie&&(Ie._fireAndBubble(Ve.pointerout,{...pt},Ne),Ie._fireAndBubble(Ve.pointerleave,{...pt},Ne)),Ne){if(je[Ne._id])return;je[Ne._id]=!0}Ne&&Ne.isListening()?(De=!0,Ze&&(Ne._fireAndBubble(Ve.pointerover,{...pt},Ie),Ne._fireAndBubble(Ve.pointerenter,{...pt},Ie),this[$e+"targetShape"]=Ne),Ne._fireAndBubble(Ve.pointermove,{...pt})):Ie&&(this._fire(Ve.pointerover,{evt:be,target:this,currentTarget:this,pointerId:Ue}),this[$e+"targetShape"]=null)}),De||this._fire(Ve.pointermove,{evt:be,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(be){const Ve=Oe(be.type),$e=ve(be.type);if(!Ve)return;this.setPointersPositions(be);const Fe=this[$e+"ClickStartShape"],je=this[$e+"ClickEndShape"],De={};let Ie=!1;this._changedPointerPositions.forEach(Re=>{const Ne=y.getCapturedShape(Re.id)||this.getIntersection(Re);if(Ne){if(Ne.releaseCapture(Re.id),De[Ne._id])return;De[Ne._id]=!0}const Ue=Re.id,pt={evt:be,pointerId:Ue};let Ze=!1;o.Konva["_"+$e+"InDblClickWindow"]?(Ze=!0,clearTimeout(this[$e+"DblTimeout"])):d.DD.justDragged||(o.Konva["_"+$e+"InDblClickWindow"]=!0,clearTimeout(this[$e+"DblTimeout"])),this[$e+"DblTimeout"]=setTimeout(function(){o.Konva["_"+$e+"InDblClickWindow"]=!1},o.Konva.dblClickWindow),Ne&&Ne.isListening()?(Ie=!0,this[$e+"ClickEndShape"]=Ne,Ne._fireAndBubble(Ve.pointerup,{...pt}),o.Konva["_"+$e+"ListenClick"]&&Fe&&Fe===Ne&&(Ne._fireAndBubble(Ve.pointerclick,{...pt}),Ze&&je&&je===Ne&&Ne._fireAndBubble(Ve.pointerdblclick,{...pt}))):(this[$e+"ClickEndShape"]=null,o.Konva["_"+$e+"ListenClick"]&&this._fire(Ve.pointerclick,{evt:be,target:this,currentTarget:this,pointerId:Ue}),Ze&&this._fire(Ve.pointerdblclick,{evt:be,target:this,currentTarget:this,pointerId:Ue}))}),Ie||this._fire(Ve.pointerup,{evt:be,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),o.Konva["_"+$e+"ListenClick"]=!1,be.cancelable&&$e!=="touch"&&$e!=="pointer"&&be.preventDefault()}_contextmenu(be){this.setPointersPositions(be);const Ve=this.getIntersection(this.getPointerPosition());Ve&&Ve.isListening()?Ve._fireAndBubble(le,{evt:be}):this._fire(le,{evt:be,target:this,currentTarget:this})}_wheel(be){this.setPointersPositions(be);const Ve=this.getIntersection(this.getPointerPosition());Ve&&Ve.isListening()?Ve._fireAndBubble(de,{evt:be}):this._fire(de,{evt:be,target:this,currentTarget:this})}_pointercancel(be){this.setPointersPositions(be);const Ve=y.getCapturedShape(be.pointerId)||this.getIntersection(this.getPointerPosition());Ve&&Ve._fireAndBubble(J,y.createEvent(be)),y.releaseCapture(be.pointerId)}_lostpointercapture(be){y.releaseCapture(be.pointerId)}setPointersPositions(be){const Ve=this._getContentPosition();let $e=null,Fe=null;be=be||window.event,be.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(be.touches,je=>{this._pointerPositions.push({id:je.identifier,x:(je.clientX-Ve.left)/Ve.scaleX,y:(je.clientY-Ve.top)/Ve.scaleY})}),Array.prototype.forEach.call(be.changedTouches||be.touches,je=>{this._changedPointerPositions.push({id:je.identifier,x:(je.clientX-Ve.left)/Ve.scaleX,y:(je.clientY-Ve.top)/Ve.scaleY})})):($e=(be.clientX-Ve.left)/Ve.scaleX,Fe=(be.clientY-Ve.top)/Ve.scaleY,this.pointerPos={x:$e,y:Fe},this._pointerPositions=[{x:$e,y:Fe,id:e.Util._getFirstPointerId(be)}],this._changedPointerPositions=[{x:$e,y:Fe,id:e.Util._getFirstPointerId(be)}])}_setPointerPosition(be){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(be)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const be=this.content.getBoundingClientRect();return{top:be.top,left:be.left,scaleX:be.width/this.content.clientWidth||1,scaleY:be.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new u.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new u.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!o.Konva.isBrowser)return;const be=this.container();if(!be)throw"Stage has no container. A container is required.";be.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),be.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(be){be.batchDraw()}),this}}t.Stage=Me,Me.prototype.nodeType=v,(0,g._registerNode)(Me),n.Factory.addGetterSetter(Me,"container"),o.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(Ce=>{Ce.batchDraw()})})}(Stage)),Stage}var Layer={},Shape={},hasRequiredShape;function requireShape(){return hasRequiredShape||(hasRequiredShape=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=requireGlobal(),n=requireUtil(),s=requireFactory(),o=requireNode(),u=requireValidators(),d=requireGlobal(),g=requirePointerEvents(),y="hasShadow",v="shadowRGBA",w="patternImage",T="linearGradient",A="radialGradient";let C;function j(){return C||(C=n.Util.createCanvasElement().getContext("2d"),C)}t.shapes={};function D(te){const re=this.attrs.fillRule;re?te.fill(re):te.fill()}function H(te){te.stroke()}function ne(te){const re=this.attrs.fillRule;re?te.fill(re):te.fill()}function Y(te){te.stroke()}function U(){this._clearCache(y)}function ee(){this._clearCache(v)}function J(){this._clearCache(w)}function ie(){this._clearCache(T)}function se(){this._clearCache(A)}class K extends o.Node{constructor(re){super(re);let ce;for(;ce=n.Util.getRandomColor(),!(ce&&!(ce in t.shapes)););this.colorKey=ce,t.shapes[ce]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(y,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(w,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const ce=j().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(ce&&ce.setTransform){const le=new n.Transform;le.translate(this.fillPatternX(),this.fillPatternY()),le.rotate(e.Konva.getAngle(this.fillPatternRotation())),le.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),le.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const ue=le.getMatrix(),_e=typeof DOMMatrix>"u"?{a:ue[0],b:ue[1],c:ue[2],d:ue[3],e:ue[4],f:ue[5]}:new DOMMatrix(ue);ce.setTransform(_e)}return ce}}_getLinearGradient(){return this._getCache(T,this.__getLinearGradient)}__getLinearGradient(){const re=this.fillLinearGradientColorStops();if(re){const ce=j(),le=this.fillLinearGradientStartPoint(),ue=this.fillLinearGradientEndPoint(),_e=ce.createLinearGradient(le.x,le.y,ue.x,ue.y);for(let Ee=0;Ee<re.length;Ee+=2)_e.addColorStop(re[Ee],re[Ee+1]);return _e}}_getRadialGradient(){return this._getCache(A,this.__getRadialGradient)}__getRadialGradient(){const re=this.fillRadialGradientColorStops();if(re){const ce=j(),le=this.fillRadialGradientStartPoint(),ue=this.fillRadialGradientEndPoint(),_e=ce.createRadialGradient(le.x,le.y,this.fillRadialGradientStartRadius(),ue.x,ue.y,this.fillRadialGradientEndRadius());for(let Ee=0;Ee<re.length;Ee+=2)_e.addColorStop(re[Ee],re[Ee+1]);return _e}}getShadowRGBA(){return this._getCache(v,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const re=n.Util.colorToRGBA(this.shadowColor());if(re)return"rgba("+re.r+","+re.g+","+re.b+","+re.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const re=this.hitStrokeWidth();return re==="auto"?this.hasStroke():this.strokeEnabled()&&!!re}intersects(re){const ce=this.getStage();if(!ce)return!1;const le=ce.bufferHitCanvas;return le.getContext().clear(),this.drawHit(le,void 0,!0),le.context.getImageData(Math.round(re.x),Math.round(re.y),1,1).data[3]>0}destroy(){return o.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(re){var ce;if(!((ce=this.attrs.perfectDrawEnabled)!==null&&ce!==void 0?ce:!0))return!1;const ue=re||this.hasFill(),_e=this.hasStroke(),Ee=this.getAbsoluteOpacity()!==1;if(ue&&_e&&Ee)return!0;const we=this.hasShadow(),de=this.shadowForStrokeEnabled();return!!(ue&&_e&&we&&de)}setStrokeHitEnabled(re){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),re?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const re=this.size();return{x:this._centroid?-re.width/2:0,y:this._centroid?-re.height/2:0,width:re.width,height:re.height}}getClientRect(re={}){let ce=!1,le=this.getParent();for(;le;){if(le.isCached()){ce=!0;break}le=le.getParent()}const ue=re.skipTransform,_e=re.relativeTo||ce&&this.getStage()||void 0,Ee=this.getSelfRect(),de=!re.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,me=Ee.width+de,xe=Ee.height+de,pe=!re.skipShadow&&this.hasShadow(),ve=pe?this.shadowOffsetX():0,Oe=pe?this.shadowOffsetY():0,Te=me+Math.abs(ve),Le=xe+Math.abs(Oe),Me=pe&&this.shadowBlur()||0,Ce=Te+Me*2,be=Le+Me*2,Ve={width:Ce,height:be,x:-(de/2+Me)+Math.min(ve,0)+Ee.x,y:-(de/2+Me)+Math.min(Oe,0)+Ee.y};return ue?Ve:this._transformedRect(Ve,_e)}drawScene(re,ce,le){const ue=this.getLayer(),_e=re||ue.getCanvas(),Ee=_e.getContext(),we=this._getCanvasCache(),de=this.getSceneFunc(),me=this.hasShadow();let xe;const pe=ce===this;if(!this.isVisible()&&!pe)return this;if(we){Ee.save();const ve=this.getAbsoluteTransform(ce).getMatrix();return Ee.transform(ve[0],ve[1],ve[2],ve[3],ve[4],ve[5]),this._drawCachedSceneCanvas(Ee),Ee.restore(),this}if(!de)return this;if(Ee.save(),this._useBufferCanvas()){xe=this.getStage();const ve=le||xe.bufferCanvas,Oe=ve.getContext();Oe.clear(),Oe.save(),Oe._applyLineJoin(this);const Te=this.getAbsoluteTransform(ce).getMatrix();Oe.transform(Te[0],Te[1],Te[2],Te[3],Te[4],Te[5]),de.call(this,Oe,this),Oe.restore();const Le=ve.pixelRatio;me&&Ee._applyShadow(this),Ee._applyOpacity(this),Ee._applyGlobalCompositeOperation(this),Ee.drawImage(ve._canvas,ve.x||0,ve.y||0,ve.width/Le,ve.height/Le)}else{if(Ee._applyLineJoin(this),!pe){const ve=this.getAbsoluteTransform(ce).getMatrix();Ee.transform(ve[0],ve[1],ve[2],ve[3],ve[4],ve[5]),Ee._applyOpacity(this),Ee._applyGlobalCompositeOperation(this)}me&&Ee._applyShadow(this),de.call(this,Ee,this)}return Ee.restore(),this}drawHit(re,ce,le=!1){if(!this.shouldDrawHit(ce,le))return this;const ue=this.getLayer(),_e=re||ue.hitCanvas,Ee=_e&&_e.getContext(),we=this.hitFunc()||this.sceneFunc(),de=this._getCanvasCache(),me=de&&de.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),me){Ee.save();const pe=this.getAbsoluteTransform(ce).getMatrix();return Ee.transform(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5]),this._drawCachedHitCanvas(Ee),Ee.restore(),this}if(!we)return this;if(Ee.save(),Ee._applyLineJoin(this),!(this===ce)){const pe=this.getAbsoluteTransform(ce).getMatrix();Ee.transform(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5])}return we.call(this,Ee,this),Ee.restore(),this}drawHitFromCache(re=0){const ce=this._getCanvasCache(),le=this._getCachedSceneCanvas(),ue=ce.hit,_e=ue.getContext(),Ee=ue.getWidth(),we=ue.getHeight();_e.clear(),_e.drawImage(le._canvas,0,0,Ee,we);try{const de=_e.getImageData(0,0,Ee,we),me=de.data,xe=me.length,pe=n.Util._hexToRgb(this.colorKey);for(let ve=0;ve<xe;ve+=4)me[ve+3]>re?(me[ve]=pe.r,me[ve+1]=pe.g,me[ve+2]=pe.b,me[ve+3]=255):me[ve+3]=0;_e.putImageData(de,0,0)}catch(de){n.Util.error("Unable to draw hit graph from cached scene canvas. "+de.message)}return this}hasPointerCapture(re){return g.hasPointerCapture(re,this)}setPointerCapture(re){g.setPointerCapture(re,this)}releaseCapture(re){g.releaseCapture(re,this)}}t.Shape=K,K.prototype._fillFunc=D,K.prototype._strokeFunc=H,K.prototype._fillFuncHit=ne,K.prototype._strokeFuncHit=Y,K.prototype._centroid=!1,K.prototype.nodeType="Shape",(0,d._registerNode)(K),K.prototype.eventListeners={},K.prototype.on.call(K.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",U),K.prototype.on.call(K.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",ee),K.prototype.on.call(K.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",J),K.prototype.on.call(K.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",ie),K.prototype.on.call(K.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",se),s.Factory.addGetterSetter(K,"stroke",void 0,(0,u.getStringOrGradientValidator)()),s.Factory.addGetterSetter(K,"strokeWidth",2,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(K,"fillAfterStrokeEnabled",!1),s.Factory.addGetterSetter(K,"hitStrokeWidth","auto",(0,u.getNumberOrAutoValidator)()),s.Factory.addGetterSetter(K,"strokeHitEnabled",!0,(0,u.getBooleanValidator)()),s.Factory.addGetterSetter(K,"perfectDrawEnabled",!0,(0,u.getBooleanValidator)()),s.Factory.addGetterSetter(K,"shadowForStrokeEnabled",!0,(0,u.getBooleanValidator)()),s.Factory.addGetterSetter(K,"lineJoin"),s.Factory.addGetterSetter(K,"lineCap"),s.Factory.addGetterSetter(K,"sceneFunc"),s.Factory.addGetterSetter(K,"hitFunc"),s.Factory.addGetterSetter(K,"dash"),s.Factory.addGetterSetter(K,"dashOffset",0,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(K,"shadowColor",void 0,(0,u.getStringValidator)()),s.Factory.addGetterSetter(K,"shadowBlur",0,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(K,"shadowOpacity",1,(0,u.getNumberValidator)()),s.Factory.addComponentsGetterSetter(K,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(K,"shadowOffsetX",0,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(K,"shadowOffsetY",0,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(K,"fillPatternImage"),s.Factory.addGetterSetter(K,"fill",void 0,(0,u.getStringOrGradientValidator)()),s.Factory.addGetterSetter(K,"fillPatternX",0,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(K,"fillPatternY",0,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(K,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(K,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(K,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(K,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(K,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(K,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(K,"fillEnabled",!0),s.Factory.addGetterSetter(K,"strokeEnabled",!0),s.Factory.addGetterSetter(K,"shadowEnabled",!0),s.Factory.addGetterSetter(K,"dashEnabled",!0),s.Factory.addGetterSetter(K,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(K,"fillPriority","color"),s.Factory.addComponentsGetterSetter(K,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(K,"fillPatternOffsetX",0,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(K,"fillPatternOffsetY",0,(0,u.getNumberValidator)()),s.Factory.addComponentsGetterSetter(K,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(K,"fillPatternScaleX",1,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(K,"fillPatternScaleY",1,(0,u.getNumberValidator)()),s.Factory.addComponentsGetterSetter(K,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(K,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(K,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(K,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(K,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(K,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(K,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(K,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(K,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(K,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(K,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(K,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(K,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(K,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(K,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(K,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(K,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(K,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(K,"fillPatternRotation",0),s.Factory.addGetterSetter(K,"fillRule",void 0,(0,u.getStringValidator)()),s.Factory.backCompat(K,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Shape)),Shape}var hasRequiredLayer;function requireLayer(){if(hasRequiredLayer)return Layer;hasRequiredLayer=1,Object.defineProperty(Layer,"__esModule",{value:!0}),Layer.Layer=void 0;const t=requireUtil(),e=requireContainer(),n=requireNode(),s=requireFactory(),o=requireCanvas(),u=requireValidators(),d=requireShape(),g=requireGlobal(),y="#",v="beforeDraw",w="draw",T=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],A=T.length;let C=class extends e.Container{constructor(D){super(D),this.canvas=new o.SceneCanvas,this.hitCanvas=new o.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(D){return this.getContext().clear(D),this.getHitCanvas().getContext().clear(D),this}setZIndex(D){super.setZIndex(D);const H=this.getStage();return H&&H.content&&(H.content.removeChild(this.getNativeCanvasElement()),D<H.children.length-1?H.content.insertBefore(this.getNativeCanvasElement(),H.children[D+1].getCanvas()._canvas):H.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const D=this.getStage();return D&&D.content&&(D.content.removeChild(this.getNativeCanvasElement()),D.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const H=this.getStage();return!H||!H.content?!1:(H.content.removeChild(this.getNativeCanvasElement()),this.index<H.children.length-1?H.content.insertBefore(this.getNativeCanvasElement(),H.children[this.index+1].getCanvas()._canvas):H.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const D=this.getStage();if(D){const H=D.children;D.content&&(D.content.removeChild(this.getNativeCanvasElement()),D.content.insertBefore(this.getNativeCanvasElement(),H[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const D=this.getStage();if(D){const H=D.children;D.content&&(D.content.removeChild(this.getNativeCanvasElement()),D.content.insertBefore(this.getNativeCanvasElement(),H[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const D=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),D&&D.parentNode&&t.Util._isInDocument(D)&&D.parentNode.removeChild(D),this}getStage(){return this.parent}setSize({width:D,height:H}){return this.canvas.setSize(D,H),this.hitCanvas.setSize(D,H),this._setSmoothEnabled(),this}_validateAdd(D){const H=D.getType();H!=="Group"&&H!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(D){return D=D||{},D.width=D.width||this.getWidth(),D.height=D.height||this.getHeight(),D.x=D.x!==void 0?D.x:this.x(),D.y=D.y!==void 0?D.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,D)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(D){if(!this.isListening()||!this.isVisible())return null;let H=1,ne=!1;for(;;){for(let Y=0;Y<A;Y++){const U=T[Y],ee=this._getIntersection({x:D.x+U.x*H,y:D.y+U.y*H}),J=ee.shape;if(J)return J;if(ne=!!ee.antialiased,!ee.antialiased)break}if(ne)H+=1;else return null}}_getIntersection(D){const H=this.hitCanvas.pixelRatio,ne=this.hitCanvas.context.getImageData(Math.round(D.x*H),Math.round(D.y*H),1,1).data,Y=ne[3];if(Y===255){const U=t.Util._rgbToHex(ne[0],ne[1],ne[2]),ee=d.shapes[y+U];return ee?{shape:ee}:{antialiased:!0}}else if(Y>0)return{antialiased:!0};return{}}drawScene(D,H,ne){const Y=this.getLayer(),U=D||Y&&Y.getCanvas();return this._fire(v,{node:this}),this.clearBeforeDraw()&&U.getContext().clear(),e.Container.prototype.drawScene.call(this,U,H,ne),this._fire(w,{node:this}),this}drawHit(D,H){const ne=this.getLayer(),Y=D||ne&&ne.hitCanvas;return ne&&ne.clearBeforeDraw()&&ne.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,Y,H),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(D){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(D)}getHitGraphEnabled(D){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const D=this.parent;!!this.hitCanvas._canvas.parentNode?D.content.removeChild(this.hitCanvas._canvas):D.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return Layer.Layer=C,C.prototype.nodeType="Layer",(0,g._registerNode)(C),s.Factory.addGetterSetter(C,"imageSmoothingEnabled",!0),s.Factory.addGetterSetter(C,"clearBeforeDraw",!0),s.Factory.addGetterSetter(C,"hitGraphEnabled",!0,(0,u.getBooleanValidator)()),Layer}var FastLayer={},hasRequiredFastLayer;function requireFastLayer(){if(hasRequiredFastLayer)return FastLayer;hasRequiredFastLayer=1,Object.defineProperty(FastLayer,"__esModule",{value:!0}),FastLayer.FastLayer=void 0;const t=requireUtil(),e=requireLayer(),n=requireGlobal();let s=class extends e.Layer{constructor(u){super(u),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return FastLayer.FastLayer=s,s.prototype.nodeType="FastLayer",(0,n._registerNode)(s),FastLayer}var Group={},hasRequiredGroup;function requireGroup(){if(hasRequiredGroup)return Group;hasRequiredGroup=1,Object.defineProperty(Group,"__esModule",{value:!0}),Group.Group=void 0;const t=requireUtil(),e=requireContainer(),n=requireGlobal();let s=class extends e.Container{_validateAdd(u){const d=u.getType();d!=="Group"&&d!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return Group.Group=s,s.prototype.nodeType="Group",(0,n._registerNode)(s),Group}var Animation$1={},hasRequiredAnimation;function requireAnimation(){if(hasRequiredAnimation)return Animation$1;hasRequiredAnimation=1,Object.defineProperty(Animation$1,"__esModule",{value:!0}),Animation$1.Animation=void 0;const t=requireGlobal(),e=requireUtil(),n=function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}}();class s{constructor(u,d){this.id=s.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=u,this.setLayers(d)}setLayers(u){let d=[];return u&&(d=Array.isArray(u)?u:[u]),this.layers=d,this}getLayers(){return this.layers}addLayer(u){const d=this.layers,g=d.length;for(let y=0;y<g;y++)if(d[y]._id===u._id)return!1;return this.layers.push(u),!0}isRunning(){const d=s.animations,g=d.length;for(let y=0;y<g;y++)if(d[y].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),s._addAnimation(this),this}stop(){return s._removeAnimation(this),this}_updateFrameObject(u){this.frame.timeDiff=u-this.frame.lastTime,this.frame.lastTime=u,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(u){this.animations.push(u),this._handleAnimation()}static _removeAnimation(u){const d=u.id,g=this.animations,y=g.length;for(let v=0;v<y;v++)if(g[v].id===d){this.animations.splice(v,1);break}}static _runFrames(){const u={},d=this.animations;for(let g=0;g<d.length;g++){const y=d[g],v=y.layers,w=y.func;y._updateFrameObject(n());const T=v.length;let A;if(w?A=w.call(y,y.frame)!==!1:A=!0,!!A)for(let C=0;C<T;C++){const j=v[C];j._id!==void 0&&(u[j._id]=j)}}for(const g in u)u.hasOwnProperty(g)&&u[g].batchDraw()}static _animationLoop(){const u=s;u.animations.length?(u._runFrames(),e.Util.requestAnimFrame(u._animationLoop)):u.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}}return Animation$1.Animation=s,s.animations=[],s.animIdCounter=0,s.animRunning=!1,Animation$1}var Tween={},hasRequiredTween;function requireTween(){return hasRequiredTween||(hasRequiredTween=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=requireUtil(),n=requireAnimation(),s=requireNode(),o=requireGlobal(),u={node:1,duration:1,easing:1,onFinish:1,yoyo:1},d=1,g=2,y=3,v=["fill","stroke","shadowColor"];let w=0;class T{constructor(j,D,H,ne,Y,U,ee){this.prop=j,this.propFunc=D,this.begin=ne,this._pos=ne,this.duration=U,this._change=0,this.prevPos=0,this.yoyo=ee,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=H,this._change=Y-this.begin,this.pause()}fire(j){const D=this[j];D&&D()}setTime(j){j>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():j<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=j,this.update())}getTime(){return this._time}setPosition(j){this.prevPos=this._pos,this.propFunc(j),this._pos=j}getPosition(j){return j===void 0&&(j=this._time),this.func(j,this.begin,this._change,this.duration)}play(){this.state=g,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=y,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(j){this.pause(),this._time=j,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const j=this.getTimer()-this._startTime;this.state===g?this.setTime(j):this.state===y&&this.setTime(this.duration-j)}pause(){this.state=d,this.fire("onPause")}getTimer(){return new Date().getTime()}}class A{constructor(j){const D=this,H=j.node,ne=H._id,Y=j.easing||t.Easings.Linear,U=!!j.yoyo;let ee,J;typeof j.duration>"u"?ee=.3:j.duration===0?ee=.001:ee=j.duration,this.node=H,this._id=w++;const ie=H.getLayer()||(H instanceof o.Konva.Stage?H.getLayers():null);ie||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){D.tween.onEnterFrame()},ie),this.tween=new T(J,function(se){D._tweenFunc(se)},Y,0,1,ee*1e3,U),this._addListeners(),A.attrs[ne]||(A.attrs[ne]={}),A.attrs[ne][this._id]||(A.attrs[ne][this._id]={}),A.tweens[ne]||(A.tweens[ne]={});for(J in j)u[J]===void 0&&this._addAttr(J,j[J]);this.reset(),this.onFinish=j.onFinish,this.onReset=j.onReset,this.onUpdate=j.onUpdate}_addAttr(j,D){const H=this.node,ne=H._id;let Y,U,ee,J,ie;const se=A.tweens[ne][j];se&&delete A.attrs[ne][se][j];let K=H.getAttr(j);if(e.Util._isArray(D))if(Y=[],U=Math.max(D.length,K.length),j==="points"&&D.length!==K.length&&(D.length>K.length?(J=K,K=e.Util._prepareArrayForTween(K,D,H.closed())):(ee=D,D=e.Util._prepareArrayForTween(D,K,H.closed()))),j.indexOf("fill")===0)for(let te=0;te<U;te++)if(te%2===0)Y.push(D[te]-K[te]);else{const re=e.Util.colorToRGBA(K[te]);ie=e.Util.colorToRGBA(D[te]),K[te]=re,Y.push({r:ie.r-re.r,g:ie.g-re.g,b:ie.b-re.b,a:ie.a-re.a})}else for(let te=0;te<U;te++)Y.push(D[te]-K[te]);else v.indexOf(j)!==-1?(K=e.Util.colorToRGBA(K),ie=e.Util.colorToRGBA(D),Y={r:ie.r-K.r,g:ie.g-K.g,b:ie.b-K.b,a:ie.a-K.a}):Y=D-K;A.attrs[ne][this._id][j]={start:K,diff:Y,end:D,trueEnd:ee,trueStart:J},A.tweens[ne][j]=this._id}_tweenFunc(j){const D=this.node,H=A.attrs[D._id][this._id];let ne,Y,U,ee,J,ie,se,K;for(ne in H){if(Y=H[ne],U=Y.start,ee=Y.diff,K=Y.end,e.Util._isArray(U))if(J=[],se=Math.max(U.length,K.length),ne.indexOf("fill")===0)for(ie=0;ie<se;ie++)ie%2===0?J.push((U[ie]||0)+ee[ie]*j):J.push("rgba("+Math.round(U[ie].r+ee[ie].r*j)+","+Math.round(U[ie].g+ee[ie].g*j)+","+Math.round(U[ie].b+ee[ie].b*j)+","+(U[ie].a+ee[ie].a*j)+")");else for(ie=0;ie<se;ie++)J.push((U[ie]||0)+ee[ie]*j);else v.indexOf(ne)!==-1?J="rgba("+Math.round(U.r+ee.r*j)+","+Math.round(U.g+ee.g*j)+","+Math.round(U.b+ee.b*j)+","+(U.a+ee.a*j)+")":J=U+ee*j;D.setAttr(ne,J)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const j=this.node,D=A.attrs[j._id][this._id];D.points&&D.points.trueEnd&&j.setAttr("points",D.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const j=this.node,D=A.attrs[j._id][this._id];D.points&&D.points.trueStart&&j.points(D.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(j){return this.tween.seek(j*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const j=this.node._id,D=this._id,H=A.tweens[j];this.pause(),this.anim&&this.anim.stop();for(const ne in H)delete A.tweens[j][ne];delete A.attrs[j][D],A.tweens[j]&&(Object.keys(A.tweens[j]).length===0&&delete A.tweens[j],Object.keys(A.attrs[j]).length===0&&delete A.attrs[j])}}t.Tween=A,A.attrs={},A.tweens={},s.Node.prototype.to=function(C){const j=C.onFinish;C.node=this,C.onFinish=function(){this.destroy(),j&&j()},new A(C).play()},t.Easings={BackEaseIn(C,j,D,H){return D*(C/=H)*C*((1.70158+1)*C-1.70158)+j},BackEaseOut(C,j,D,H){return D*((C=C/H-1)*C*((1.70158+1)*C+1.70158)+1)+j},BackEaseInOut(C,j,D,H){let ne=1.70158;return(C/=H/2)<1?D/2*(C*C*(((ne*=1.525)+1)*C-ne))+j:D/2*((C-=2)*C*(((ne*=1.525)+1)*C+ne)+2)+j},ElasticEaseIn(C,j,D,H,ne,Y){let U=0;return C===0?j:(C/=H)===1?j+D:(Y||(Y=H*.3),!ne||ne<Math.abs(D)?(ne=D,U=Y/4):U=Y/(2*Math.PI)*Math.asin(D/ne),-(ne*Math.pow(2,10*(C-=1))*Math.sin((C*H-U)*(2*Math.PI)/Y))+j)},ElasticEaseOut(C,j,D,H,ne,Y){let U=0;return C===0?j:(C/=H)===1?j+D:(Y||(Y=H*.3),!ne||ne<Math.abs(D)?(ne=D,U=Y/4):U=Y/(2*Math.PI)*Math.asin(D/ne),ne*Math.pow(2,-10*C)*Math.sin((C*H-U)*(2*Math.PI)/Y)+D+j)},ElasticEaseInOut(C,j,D,H,ne,Y){let U=0;return C===0?j:(C/=H/2)===2?j+D:(Y||(Y=H*(.3*1.5)),!ne||ne<Math.abs(D)?(ne=D,U=Y/4):U=Y/(2*Math.PI)*Math.asin(D/ne),C<1?-.5*(ne*Math.pow(2,10*(C-=1))*Math.sin((C*H-U)*(2*Math.PI)/Y))+j:ne*Math.pow(2,-10*(C-=1))*Math.sin((C*H-U)*(2*Math.PI)/Y)*.5+D+j)},BounceEaseOut(C,j,D,H){return(C/=H)<1/2.75?D*(7.5625*C*C)+j:C<2/2.75?D*(7.5625*(C-=1.5/2.75)*C+.75)+j:C<2.5/2.75?D*(7.5625*(C-=2.25/2.75)*C+.9375)+j:D*(7.5625*(C-=2.625/2.75)*C+.984375)+j},BounceEaseIn(C,j,D,H){return D-t.Easings.BounceEaseOut(H-C,0,D,H)+j},BounceEaseInOut(C,j,D,H){return C<H/2?t.Easings.BounceEaseIn(C*2,0,D,H)*.5+j:t.Easings.BounceEaseOut(C*2-H,0,D,H)*.5+D*.5+j},EaseIn(C,j,D,H){return D*(C/=H)*C+j},EaseOut(C,j,D,H){return-D*(C/=H)*(C-2)+j},EaseInOut(C,j,D,H){return(C/=H/2)<1?D/2*C*C+j:-D/2*(--C*(C-2)-1)+j},StrongEaseIn(C,j,D,H){return D*(C/=H)*C*C*C*C+j},StrongEaseOut(C,j,D,H){return D*((C=C/H-1)*C*C*C*C+1)+j},StrongEaseInOut(C,j,D,H){return(C/=H/2)<1?D/2*C*C*C*C*C+j:D/2*((C-=2)*C*C*C*C+2)+j},Linear(C,j,D,H){return D*C/H+j}}}(Tween)),Tween}var hasRequired_CoreInternals;function require_CoreInternals(){return hasRequired_CoreInternals||(hasRequired_CoreInternals=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=requireGlobal(),n=requireUtil(),s=requireNode(),o=requireContainer(),u=requireStage(),d=requireLayer(),g=requireFastLayer(),y=requireGroup(),v=requireDragAndDrop(),w=requireShape(),T=requireAnimation(),A=requireTween(),C=requireContext(),j=requireCanvas();t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:s.Node,Container:o.Container,Stage:u.Stage,stages:u.stages,Layer:d.Layer,FastLayer:g.FastLayer,Group:y.Group,DD:v.DD,Shape:w.Shape,shapes:w.shapes,Animation:T.Animation,Tween:A.Tween,Easings:A.Easings,Context:C.Context,Canvas:j.Canvas}),t.default=t.Konva}(_CoreInternals)),_CoreInternals}var Arc={},hasRequiredArc;function requireArc(){if(hasRequiredArc)return Arc;hasRequiredArc=1,Object.defineProperty(Arc,"__esModule",{value:!0}),Arc.Arc=void 0;const t=requireFactory(),e=requireShape(),n=requireGlobal(),s=requireValidators(),o=requireGlobal();let u=class extends e.Shape{_sceneFunc(g){const y=n.Konva.getAngle(this.angle()),v=this.clockwise();g.beginPath(),g.arc(0,0,this.outerRadius(),0,y,v),g.arc(0,0,this.innerRadius(),y,0,!v),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}getSelfRect(){const g=this.innerRadius(),y=this.outerRadius(),v=this.clockwise(),w=n.Konva.getAngle(v?360-this.angle():this.angle()),T=Math.cos(Math.min(w,Math.PI)),A=1,C=Math.sin(Math.min(Math.max(Math.PI,w),3*Math.PI/2)),j=Math.sin(Math.min(w,Math.PI/2)),D=T*(T>0?g:y),H=A*y,ne=C*(C>0?g:y),Y=j*(j>0?y:g);return{x:D,y:v?-1*Y:ne,width:H-D,height:Y-ne}}};return Arc.Arc=u,u.prototype._centroid=!0,u.prototype.className="Arc",u.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,o._registerNode)(u),t.Factory.addGetterSetter(u,"innerRadius",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(u,"outerRadius",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(u,"angle",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(u,"clockwise",!1,(0,s.getBooleanValidator)()),Arc}var Arrow={},Line={},hasRequiredLine;function requireLine(){if(hasRequiredLine)return Line;hasRequiredLine=1,Object.defineProperty(Line,"__esModule",{value:!0}),Line.Line=void 0;const t=requireFactory(),e=requireGlobal(),n=requireShape(),s=requireValidators();function o(g,y,v,w,T,A,C){const j=Math.sqrt(Math.pow(v-g,2)+Math.pow(w-y,2)),D=Math.sqrt(Math.pow(T-v,2)+Math.pow(A-w,2)),H=C*j/(j+D),ne=C*D/(j+D),Y=v-H*(T-g),U=w-H*(A-y),ee=v+ne*(T-g),J=w+ne*(A-y);return[Y,U,ee,J]}function u(g,y){const v=g.length,w=[];for(let T=2;T<v-2;T+=2){const A=o(g[T-2],g[T-1],g[T],g[T+1],g[T+2],g[T+3],y);isNaN(A[0])||(w.push(A[0]),w.push(A[1]),w.push(g[T]),w.push(g[T+1]),w.push(A[2]),w.push(A[3]))}return w}let d=class extends n.Shape{constructor(y){super(y),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(y){const v=this.points(),w=v.length,T=this.tension(),A=this.closed(),C=this.bezier();if(!w)return;let j=0;if(y.beginPath(),y.moveTo(v[0],v[1]),T!==0&&w>4){const D=this.getTensionPoints(),H=D.length;for(j=A?0:4,A||y.quadraticCurveTo(D[0],D[1],D[2],D[3]);j<H-2;)y.bezierCurveTo(D[j++],D[j++],D[j++],D[j++],D[j++],D[j++]);A||y.quadraticCurveTo(D[H-2],D[H-1],v[w-2],v[w-1])}else if(C)for(j=2;j<w;)y.bezierCurveTo(v[j++],v[j++],v[j++],v[j++],v[j++],v[j++]);else for(j=2;j<w;j+=2)y.lineTo(v[j],v[j+1]);A?(y.closePath(),y.fillStrokeShape(this)):y.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():u(this.points(),this.tension())}_getTensionPointsClosed(){const y=this.points(),v=y.length,w=this.tension(),T=o(y[v-2],y[v-1],y[0],y[1],y[2],y[3],w),A=o(y[v-4],y[v-3],y[v-2],y[v-1],y[0],y[1],w),C=u(y,w);return[T[2],T[3]].concat(C).concat([A[0],A[1],y[v-2],y[v-1],A[2],A[3],T[0],T[1],y[0],y[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let y=this.points();if(y.length<4)return{x:y[0]||0,y:y[1]||0,width:0,height:0};this.tension()!==0?y=[y[0],y[1],...this._getTensionPoints(),y[y.length-2],y[y.length-1]]:y=this.points();let v=y[0],w=y[0],T=y[1],A=y[1],C,j;for(let D=0;D<y.length/2;D++)C=y[D*2],j=y[D*2+1],v=Math.min(v,C),w=Math.max(w,C),T=Math.min(T,j),A=Math.max(A,j);return{x:v,y:T,width:w-v,height:A-T}}};return Line.Line=d,d.prototype.className="Line",d.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(d),t.Factory.addGetterSetter(d,"closed",!1),t.Factory.addGetterSetter(d,"bezier",!1),t.Factory.addGetterSetter(d,"tension",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(d,"points",[],(0,s.getNumberArrayValidator)()),Line}var Path={},BezierFunctions={},hasRequiredBezierFunctions;function requireBezierFunctions(){return hasRequiredBezierFunctions||(hasRequiredBezierFunctions=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(d,g,y)=>{let v,w;const A=y/2;v=0;for(let C=0;C<20;C++)w=A*t.tValues[20][C]+A,v+=t.cValues[20][C]*s(d,g,w);return A*v};t.getCubicArcLength=e;const n=(d,g,y)=>{y===void 0&&(y=1);const v=d[0]-2*d[1]+d[2],w=g[0]-2*g[1]+g[2],T=2*d[1]-2*d[0],A=2*g[1]-2*g[0],C=4*(v*v+w*w),j=4*(v*T+w*A),D=T*T+A*A;if(C===0)return y*Math.sqrt(Math.pow(d[2]-d[0],2)+Math.pow(g[2]-g[0],2));const H=j/(2*C),ne=D/C,Y=y+H,U=ne-H*H,ee=Y*Y+U>0?Math.sqrt(Y*Y+U):0,J=H*H+U>0?Math.sqrt(H*H+U):0,ie=H+Math.sqrt(H*H+U)!==0?U*Math.log(Math.abs((Y+ee)/(H+J))):0;return Math.sqrt(C)/2*(Y*ee-H*J+ie)};t.getQuadraticArcLength=n;function s(d,g,y){const v=o(1,y,d),w=o(1,y,g),T=v*v+w*w;return Math.sqrt(T)}const o=(d,g,y)=>{const v=y.length-1;let w,T;if(v===0)return 0;if(d===0){T=0;for(let A=0;A<=v;A++)T+=t.binomialCoefficients[v][A]*Math.pow(1-g,v-A)*Math.pow(g,A)*y[A];return T}else{w=new Array(v);for(let A=0;A<v;A++)w[A]=v*(y[A+1]-y[A]);return o(d-1,g,w)}},u=(d,g,y)=>{let v=1,w=d/g,T=(d-y(w))/g,A=0;for(;v>.001;){const C=y(w+T),j=Math.abs(d-C)/g;if(j<v)v=j,w+=T;else{const D=y(w-T),H=Math.abs(d-D)/g;H<v?(v=H,w-=T):T/=2}if(A++,A>500)break}return w};t.t2length=u}(BezierFunctions)),BezierFunctions}var hasRequiredPath;function requirePath(){if(hasRequiredPath)return Path;hasRequiredPath=1,Object.defineProperty(Path,"__esModule",{value:!0}),Path.Path=void 0;const t=requireFactory(),e=requireGlobal(),n=requireShape(),s=requireBezierFunctions();let o=class Li extends n.Shape{constructor(d){super(d),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Li.parsePathData(this.data()),this.pathLength=Li.getPathLength(this.dataArray)}_sceneFunc(d){const g=this.dataArray;d.beginPath();let y=!1;for(let v=0;v<g.length;v++){const w=g[v].command,T=g[v].points;switch(w){case"L":d.lineTo(T[0],T[1]);break;case"M":d.moveTo(T[0],T[1]);break;case"C":d.bezierCurveTo(T[0],T[1],T[2],T[3],T[4],T[5]);break;case"Q":d.quadraticCurveTo(T[0],T[1],T[2],T[3]);break;case"A":const A=T[0],C=T[1],j=T[2],D=T[3],H=T[4],ne=T[5],Y=T[6],U=T[7],ee=j>D?j:D,J=j>D?1:j/D,ie=j>D?D/j:1;d.translate(A,C),d.rotate(Y),d.scale(J,ie),d.arc(0,0,ee,H,H+ne,1-U),d.scale(1/J,1/ie),d.rotate(-Y),d.translate(-A,-C);break;case"z":y=!0,d.closePath();break}}!y&&!this.hasFill()?d.strokeShape(this):d.fillStrokeShape(this)}getSelfRect(){let d=[];this.dataArray.forEach(function(C){if(C.command==="A"){const j=C.points[4],D=C.points[5],H=C.points[4]+D;let ne=Math.PI/180;if(Math.abs(j-H)<ne&&(ne=Math.abs(j-H)),D<0)for(let Y=j-ne;Y>H;Y-=ne){const U=Li.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],Y,0);d.push(U.x,U.y)}else for(let Y=j+ne;Y<H;Y+=ne){const U=Li.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],Y,0);d.push(U.x,U.y)}}else if(C.command==="C")for(let j=0;j<=1;j+=.01){const D=Li.getPointOnCubicBezier(j,C.start.x,C.start.y,C.points[0],C.points[1],C.points[2],C.points[3],C.points[4],C.points[5]);d.push(D.x,D.y)}else d=d.concat(C.points)});let g=d[0],y=d[0],v=d[1],w=d[1],T,A;for(let C=0;C<d.length/2;C++)T=d[C*2],A=d[C*2+1],isNaN(T)||(g=Math.min(g,T),y=Math.max(y,T)),isNaN(A)||(v=Math.min(v,A),w=Math.max(w,A));return{x:g,y:v,width:y-g,height:w-v}}getLength(){return this.pathLength}getPointAtLength(d){return Li.getPointAtLengthOfDataArray(d,this.dataArray)}static getLineLength(d,g,y,v){return Math.sqrt((y-d)*(y-d)+(v-g)*(v-g))}static getPathLength(d){let g=0;for(let y=0;y<d.length;++y)g+=d[y].pathLength;return g}static getPointAtLengthOfDataArray(d,g){let y,v=0,w=g.length;if(!w)return null;for(;v<w&&d>g[v].pathLength;)d-=g[v].pathLength,++v;if(v===w)return y=g[v-1].points.slice(-2),{x:y[0],y:y[1]};if(d<.01)return g[v].command==="M"?(y=g[v].points.slice(0,2),{x:y[0],y:y[1]}):{x:g[v].start.x,y:g[v].start.y};const T=g[v],A=T.points;switch(T.command){case"L":return Li.getPointOnLine(d,T.start.x,T.start.y,A[0],A[1]);case"C":return Li.getPointOnCubicBezier((0,s.t2length)(d,Li.getPathLength(g),ee=>(0,s.getCubicArcLength)([T.start.x,A[0],A[2],A[4]],[T.start.y,A[1],A[3],A[5]],ee)),T.start.x,T.start.y,A[0],A[1],A[2],A[3],A[4],A[5]);case"Q":return Li.getPointOnQuadraticBezier((0,s.t2length)(d,Li.getPathLength(g),ee=>(0,s.getQuadraticArcLength)([T.start.x,A[0],A[2]],[T.start.y,A[1],A[3]],ee)),T.start.x,T.start.y,A[0],A[1],A[2],A[3]);case"A":const C=A[0],j=A[1],D=A[2],H=A[3],ne=A[5],Y=A[6];let U=A[4];return U+=ne*d/T.pathLength,Li.getPointOnEllipticalArc(C,j,D,H,U,Y)}return null}static getPointOnLine(d,g,y,v,w,T,A){T=T??g,A=A??y;const C=this.getLineLength(g,y,v,w);if(C<1e-10)return{x:g,y};if(v===g)return{x:T,y:A+(w>y?d:-d)};const j=(w-y)/(v-g),D=Math.sqrt(d*d/(1+j*j))*(v<g?-1:1),H=j*D;if(Math.abs(A-y-j*(T-g))<1e-10)return{x:T+D,y:A+H};const ne=((T-g)*(v-g)+(A-y)*(w-y))/(C*C),Y=g+ne*(v-g),U=y+ne*(w-y),ee=this.getLineLength(T,A,Y,U),J=Math.sqrt(d*d-ee*ee),ie=Math.sqrt(J*J/(1+j*j))*(v<g?-1:1),se=j*ie;return{x:Y+ie,y:U+se}}static getPointOnCubicBezier(d,g,y,v,w,T,A,C,j){function D(J){return J*J*J}function H(J){return 3*J*J*(1-J)}function ne(J){return 3*J*(1-J)*(1-J)}function Y(J){return(1-J)*(1-J)*(1-J)}const U=C*D(d)+T*H(d)+v*ne(d)+g*Y(d),ee=j*D(d)+A*H(d)+w*ne(d)+y*Y(d);return{x:U,y:ee}}static getPointOnQuadraticBezier(d,g,y,v,w,T,A){function C(Y){return Y*Y}function j(Y){return 2*Y*(1-Y)}function D(Y){return(1-Y)*(1-Y)}const H=T*C(d)+v*j(d)+g*D(d),ne=A*C(d)+w*j(d)+y*D(d);return{x:H,y:ne}}static getPointOnEllipticalArc(d,g,y,v,w,T){const A=Math.cos(T),C=Math.sin(T),j={x:y*Math.cos(w),y:v*Math.sin(w)};return{x:d+(j.x*A-j.y*C),y:g+(j.x*C+j.y*A)}}static parsePathData(d){if(!d)return[];let g=d;const y=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];g=g.replace(new RegExp(" ","g"),",");for(let H=0;H<y.length;H++)g=g.replace(new RegExp(y[H],"g"),"|"+y[H]);const v=g.split("|"),w=[],T=[];let A=0,C=0;const j=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let D;for(let H=1;H<v.length;H++){let ne=v[H],Y=ne.charAt(0);for(ne=ne.slice(1),T.length=0;D=j.exec(ne);)T.push(D[0]);const U=[];for(let ee=0,J=T.length;ee<J;ee++){if(T[ee]==="00"){U.push(0,0);continue}const ie=parseFloat(T[ee]);isNaN(ie)?U.push(0):U.push(ie)}for(;U.length>0&&!isNaN(U[0]);){let ee="",J=[];const ie=A,se=C;let K,te,re,ce,le,ue,_e,Ee,we,de;switch(Y){case"l":A+=U.shift(),C+=U.shift(),ee="L",J.push(A,C);break;case"L":A=U.shift(),C=U.shift(),J.push(A,C);break;case"m":const me=U.shift(),xe=U.shift();if(A+=me,C+=xe,ee="M",w.length>2&&w[w.length-1].command==="z"){for(let pe=w.length-2;pe>=0;pe--)if(w[pe].command==="M"){A=w[pe].points[0]+me,C=w[pe].points[1]+xe;break}}J.push(A,C),Y="l";break;case"M":A=U.shift(),C=U.shift(),ee="M",J.push(A,C),Y="L";break;case"h":A+=U.shift(),ee="L",J.push(A,C);break;case"H":A=U.shift(),ee="L",J.push(A,C);break;case"v":C+=U.shift(),ee="L",J.push(A,C);break;case"V":C=U.shift(),ee="L",J.push(A,C);break;case"C":J.push(U.shift(),U.shift(),U.shift(),U.shift()),A=U.shift(),C=U.shift(),J.push(A,C);break;case"c":J.push(A+U.shift(),C+U.shift(),A+U.shift(),C+U.shift()),A+=U.shift(),C+=U.shift(),ee="C",J.push(A,C);break;case"S":te=A,re=C,K=w[w.length-1],K.command==="C"&&(te=A+(A-K.points[2]),re=C+(C-K.points[3])),J.push(te,re,U.shift(),U.shift()),A=U.shift(),C=U.shift(),ee="C",J.push(A,C);break;case"s":te=A,re=C,K=w[w.length-1],K.command==="C"&&(te=A+(A-K.points[2]),re=C+(C-K.points[3])),J.push(te,re,A+U.shift(),C+U.shift()),A+=U.shift(),C+=U.shift(),ee="C",J.push(A,C);break;case"Q":J.push(U.shift(),U.shift()),A=U.shift(),C=U.shift(),J.push(A,C);break;case"q":J.push(A+U.shift(),C+U.shift()),A+=U.shift(),C+=U.shift(),ee="Q",J.push(A,C);break;case"T":te=A,re=C,K=w[w.length-1],K.command==="Q"&&(te=A+(A-K.points[0]),re=C+(C-K.points[1])),A=U.shift(),C=U.shift(),ee="Q",J.push(te,re,A,C);break;case"t":te=A,re=C,K=w[w.length-1],K.command==="Q"&&(te=A+(A-K.points[0]),re=C+(C-K.points[1])),A+=U.shift(),C+=U.shift(),ee="Q",J.push(te,re,A,C);break;case"A":ce=U.shift(),le=U.shift(),ue=U.shift(),_e=U.shift(),Ee=U.shift(),we=A,de=C,A=U.shift(),C=U.shift(),ee="A",J=this.convertEndpointToCenterParameterization(we,de,A,C,_e,Ee,ce,le,ue);break;case"a":ce=U.shift(),le=U.shift(),ue=U.shift(),_e=U.shift(),Ee=U.shift(),we=A,de=C,A+=U.shift(),C+=U.shift(),ee="A",J=this.convertEndpointToCenterParameterization(we,de,A,C,_e,Ee,ce,le,ue);break}w.push({command:ee||Y,points:J,start:{x:ie,y:se},pathLength:this.calcLength(ie,se,ee||Y,J)})}(Y==="z"||Y==="Z")&&w.push({command:"z",points:[],start:void 0,pathLength:0})}return w}static calcLength(d,g,y,v){let w,T,A,C;const j=Li;switch(y){case"L":return j.getLineLength(d,g,v[0],v[1]);case"C":return(0,s.getCubicArcLength)([d,v[0],v[2],v[4]],[g,v[1],v[3],v[5]],1);case"Q":return(0,s.getQuadraticArcLength)([d,v[0],v[2]],[g,v[1],v[3]],1);case"A":w=0;const D=v[4],H=v[5],ne=v[4]+H;let Y=Math.PI/180;if(Math.abs(D-ne)<Y&&(Y=Math.abs(D-ne)),T=j.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],D,0),H<0)for(C=D-Y;C>ne;C-=Y)A=j.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],C,0),w+=j.getLineLength(T.x,T.y,A.x,A.y),T=A;else for(C=D+Y;C<ne;C+=Y)A=j.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],C,0),w+=j.getLineLength(T.x,T.y,A.x,A.y),T=A;return A=j.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],ne,0),w+=j.getLineLength(T.x,T.y,A.x,A.y),w}return 0}static convertEndpointToCenterParameterization(d,g,y,v,w,T,A,C,j){const D=j*(Math.PI/180),H=Math.cos(D)*(d-y)/2+Math.sin(D)*(g-v)/2,ne=-1*Math.sin(D)*(d-y)/2+Math.cos(D)*(g-v)/2,Y=H*H/(A*A)+ne*ne/(C*C);Y>1&&(A*=Math.sqrt(Y),C*=Math.sqrt(Y));let U=Math.sqrt((A*A*(C*C)-A*A*(ne*ne)-C*C*(H*H))/(A*A*(ne*ne)+C*C*(H*H)));w===T&&(U*=-1),isNaN(U)&&(U=0);const ee=U*A*ne/C,J=U*-C*H/A,ie=(d+y)/2+Math.cos(D)*ee-Math.sin(D)*J,se=(g+v)/2+Math.sin(D)*ee+Math.cos(D)*J,K=function(Ee){return Math.sqrt(Ee[0]*Ee[0]+Ee[1]*Ee[1])},te=function(Ee,we){return(Ee[0]*we[0]+Ee[1]*we[1])/(K(Ee)*K(we))},re=function(Ee,we){return(Ee[0]*we[1]<Ee[1]*we[0]?-1:1)*Math.acos(te(Ee,we))},ce=re([1,0],[(H-ee)/A,(ne-J)/C]),le=[(H-ee)/A,(ne-J)/C],ue=[(-1*H-ee)/A,(-1*ne-J)/C];let _e=re(le,ue);return te(le,ue)<=-1&&(_e=Math.PI),te(le,ue)>=1&&(_e=0),T===0&&_e>0&&(_e=_e-2*Math.PI),T===1&&_e<0&&(_e=_e+2*Math.PI),[ie,se,A,C,ce,_e,D,T]}};return Path.Path=o,o.prototype.className="Path",o.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(o),t.Factory.addGetterSetter(o,"data"),Path}var hasRequiredArrow;function requireArrow(){if(hasRequiredArrow)return Arrow;hasRequiredArrow=1,Object.defineProperty(Arrow,"__esModule",{value:!0}),Arrow.Arrow=void 0;const t=requireFactory(),e=requireLine(),n=requireValidators(),s=requireGlobal(),o=requirePath();let u=class extends e.Line{_sceneFunc(g){super._sceneFunc(g);const y=Math.PI*2,v=this.points();let w=v;const T=this.tension()!==0&&v.length>4;T&&(w=this.getTensionPoints());const A=this.pointerLength(),C=v.length;let j,D;if(T){const Y=[w[w.length-4],w[w.length-3],w[w.length-2],w[w.length-1],v[C-2],v[C-1]],U=o.Path.calcLength(w[w.length-4],w[w.length-3],"C",Y),ee=o.Path.getPointOnQuadraticBezier(Math.min(1,1-A/U),Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]);j=v[C-2]-ee.x,D=v[C-1]-ee.y}else j=v[C-2]-v[C-4],D=v[C-1]-v[C-3];const H=(Math.atan2(D,j)+y)%y,ne=this.pointerWidth();this.pointerAtEnding()&&(g.save(),g.beginPath(),g.translate(v[C-2],v[C-1]),g.rotate(H),g.moveTo(0,0),g.lineTo(-A,ne/2),g.lineTo(-A,-ne/2),g.closePath(),g.restore(),this.__fillStroke(g)),this.pointerAtBeginning()&&(g.save(),g.beginPath(),g.translate(v[0],v[1]),T?(j=(w[0]+w[2])/2-v[0],D=(w[1]+w[3])/2-v[1]):(j=v[2]-v[0],D=v[3]-v[1]),g.rotate((Math.atan2(-D,-j)+y)%y),g.moveTo(0,0),g.lineTo(-A,ne/2),g.lineTo(-A,-ne/2),g.closePath(),g.restore(),this.__fillStroke(g))}__fillStroke(g){const y=this.dashEnabled();y&&(this.attrs.dashEnabled=!1,g.setLineDash([])),g.fillStrokeShape(this),y&&(this.attrs.dashEnabled=!0)}getSelfRect(){const g=super.getSelfRect(),y=this.pointerWidth()/2;return{x:g.x,y:g.y-y,width:g.width,height:g.height+y*2}}};return Arrow.Arrow=u,u.prototype.className="Arrow",(0,s._registerNode)(u),t.Factory.addGetterSetter(u,"pointerLength",10,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(u,"pointerWidth",10,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(u,"pointerAtBeginning",!1),t.Factory.addGetterSetter(u,"pointerAtEnding",!0),Arrow}var Circle={},hasRequiredCircle;function requireCircle(){if(hasRequiredCircle)return Circle;hasRequiredCircle=1,Object.defineProperty(Circle,"__esModule",{value:!0}),Circle.Circle=void 0;const t=requireFactory(),e=requireShape(),n=requireValidators(),s=requireGlobal();let o=class extends e.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius()!==d/2&&this.radius(d/2)}setHeight(d){this.radius()!==d/2&&this.radius(d/2)}};return Circle.Circle=o,o.prototype._centroid=!0,o.prototype.className="Circle",o.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(o),t.Factory.addGetterSetter(o,"radius",0,(0,n.getNumberValidator)()),Circle}var Ellipse={},hasRequiredEllipse;function requireEllipse(){if(hasRequiredEllipse)return Ellipse;hasRequiredEllipse=1,Object.defineProperty(Ellipse,"__esModule",{value:!0}),Ellipse.Ellipse=void 0;const t=requireFactory(),e=requireShape(),n=requireValidators(),s=requireGlobal();let o=class extends e.Shape{_sceneFunc(d){const g=this.radiusX(),y=this.radiusY();d.beginPath(),d.save(),g!==y&&d.scale(1,y/g),d.arc(0,0,g,0,Math.PI*2,!1),d.restore(),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(d){this.radiusX(d/2)}setHeight(d){this.radiusY(d/2)}};return Ellipse.Ellipse=o,o.prototype.className="Ellipse",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,s._registerNode)(o),t.Factory.addComponentsGetterSetter(o,"radius",["x","y"]),t.Factory.addGetterSetter(o,"radiusX",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(o,"radiusY",0,(0,n.getNumberValidator)()),Ellipse}var Image$1={},hasRequiredImage;function requireImage(){if(hasRequiredImage)return Image$1;hasRequiredImage=1,Object.defineProperty(Image$1,"__esModule",{value:!0}),Image$1.Image=void 0;const t=requireUtil(),e=requireFactory(),n=requireShape(),s=requireGlobal(),o=requireValidators();class u extends n.Shape{constructor(g){super(g),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",y=>{this._removeImageLoad(y.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const g=this.image();g&&g.complete||g&&g.readyState===4||g&&g.addEventListener&&g.addEventListener("load",this._loadListener)}_removeImageLoad(g){g&&g.removeEventListener&&g.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const g=!!this.cornerRadius(),y=this.hasShadow();return g&&y?!0:super._useBufferCanvas(!0)}_sceneFunc(g){const y=this.getWidth(),v=this.getHeight(),w=this.cornerRadius(),T=this.attrs.image;let A;if(T){const C=this.attrs.cropWidth,j=this.attrs.cropHeight;C&&j?A=[T,this.cropX(),this.cropY(),C,j,0,0,y,v]:A=[T,0,0,y,v]}(this.hasFill()||this.hasStroke()||w)&&(g.beginPath(),w?t.Util.drawRoundedRectPath(g,y,v,w):g.rect(0,0,y,v),g.closePath(),g.fillStrokeShape(this)),T&&(w&&g.clip(),g.drawImage.apply(g,A))}_hitFunc(g){const y=this.width(),v=this.height(),w=this.cornerRadius();g.beginPath(),w?t.Util.drawRoundedRectPath(g,y,v,w):g.rect(0,0,y,v),g.closePath(),g.fillStrokeShape(this)}getWidth(){var g,y;return(g=this.attrs.width)!==null&&g!==void 0?g:(y=this.image())===null||y===void 0?void 0:y.width}getHeight(){var g,y;return(g=this.attrs.height)!==null&&g!==void 0?g:(y=this.image())===null||y===void 0?void 0:y.height}static fromURL(g,y,v=null){const w=t.Util.createImageElement();w.onload=function(){const T=new u({image:w});y(T)},w.onerror=v,w.crossOrigin="Anonymous",w.src=g}}return Image$1.Image=u,u.prototype.className="Image",(0,s._registerNode)(u),e.Factory.addGetterSetter(u,"cornerRadius",0,(0,o.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(u,"image"),e.Factory.addComponentsGetterSetter(u,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(u,"cropX",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(u,"cropY",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(u,"cropWidth",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(u,"cropHeight",0,(0,o.getNumberValidator)()),Image$1}var Label$2={},hasRequiredLabel;function requireLabel(){if(hasRequiredLabel)return Label$2;hasRequiredLabel=1,Object.defineProperty(Label$2,"__esModule",{value:!0}),Label$2.Tag=Label$2.Label=void 0;const t=requireFactory(),e=requireShape(),n=requireGroup(),s=requireValidators(),o=requireGlobal(),u=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],d="Change.konva",g="none",y="up",v="right",w="down",T="left",A=u.length;class C extends n.Group{constructor(H){super(H),this.on("add.konva",function(ne){this._addListeners(ne.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(H){let ne=this,Y;const U=function(){ne._sync()};for(Y=0;Y<A;Y++)H.on(u[Y]+d,U)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let H=this.getText(),ne=this.getTag(),Y,U,ee,J,ie,se,K;if(H&&ne){switch(Y=H.width(),U=H.height(),ee=ne.pointerDirection(),J=ne.pointerWidth(),K=ne.pointerHeight(),ie=0,se=0,ee){case y:ie=Y/2,se=-1*K;break;case v:ie=Y+J,se=U/2;break;case w:ie=Y/2,se=U+K;break;case T:ie=-1*J,se=U/2;break}ne.setAttrs({x:-1*ie,y:-1*se,width:Y,height:U}),H.setAttrs({x:-1*ie,y:-1*se})}}}Label$2.Label=C,C.prototype.className="Label",(0,o._registerNode)(C);class j extends e.Shape{_sceneFunc(H){const ne=this.width(),Y=this.height(),U=this.pointerDirection(),ee=this.pointerWidth(),J=this.pointerHeight(),ie=this.cornerRadius();let se=0,K=0,te=0,re=0;typeof ie=="number"?se=K=te=re=Math.min(ie,ne/2,Y/2):(se=Math.min(ie[0]||0,ne/2,Y/2),K=Math.min(ie[1]||0,ne/2,Y/2),re=Math.min(ie[2]||0,ne/2,Y/2),te=Math.min(ie[3]||0,ne/2,Y/2)),H.beginPath(),H.moveTo(se,0),U===y&&(H.lineTo((ne-ee)/2,0),H.lineTo(ne/2,-1*J),H.lineTo((ne+ee)/2,0)),H.lineTo(ne-K,0),H.arc(ne-K,K,K,Math.PI*3/2,0,!1),U===v&&(H.lineTo(ne,(Y-J)/2),H.lineTo(ne+ee,Y/2),H.lineTo(ne,(Y+J)/2)),H.lineTo(ne,Y-re),H.arc(ne-re,Y-re,re,0,Math.PI/2,!1),U===w&&(H.lineTo((ne+ee)/2,Y),H.lineTo(ne/2,Y+J),H.lineTo((ne-ee)/2,Y)),H.lineTo(te,Y),H.arc(te,Y-te,te,Math.PI/2,Math.PI,!1),U===T&&(H.lineTo(0,(Y+J)/2),H.lineTo(-1*ee,Y/2),H.lineTo(0,(Y-J)/2)),H.lineTo(0,se),H.arc(se,se,se,Math.PI,Math.PI*3/2,!1),H.closePath(),H.fillStrokeShape(this)}getSelfRect(){let H=0,ne=0,Y=this.pointerWidth(),U=this.pointerHeight(),ee=this.pointerDirection(),J=this.width(),ie=this.height();return ee===y?(ne-=U,ie+=U):ee===w?ie+=U:ee===T?(H-=Y*1.5,J+=Y):ee===v&&(J+=Y*1.5),{x:H,y:ne,width:J,height:ie}}}return Label$2.Tag=j,j.prototype.className="Tag",(0,o._registerNode)(j),t.Factory.addGetterSetter(j,"pointerDirection",g),t.Factory.addGetterSetter(j,"pointerWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(j,"pointerHeight",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(j,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Label$2}var Rect={},hasRequiredRect;function requireRect(){if(hasRequiredRect)return Rect;hasRequiredRect=1,Object.defineProperty(Rect,"__esModule",{value:!0}),Rect.Rect=void 0;const t=requireFactory(),e=requireShape(),n=requireGlobal(),s=requireUtil(),o=requireValidators();let u=class extends e.Shape{_sceneFunc(g){const y=this.cornerRadius(),v=this.width(),w=this.height();g.beginPath(),y?s.Util.drawRoundedRectPath(g,v,w,y):g.rect(0,0,v,w),g.closePath(),g.fillStrokeShape(this)}};return Rect.Rect=u,u.prototype.className="Rect",(0,n._registerNode)(u),t.Factory.addGetterSetter(u,"cornerRadius",0,(0,o.getNumberOrArrayOfNumbersValidator)(4)),Rect}var RegularPolygon={},hasRequiredRegularPolygon;function requireRegularPolygon(){if(hasRequiredRegularPolygon)return RegularPolygon;hasRequiredRegularPolygon=1,Object.defineProperty(RegularPolygon,"__esModule",{value:!0}),RegularPolygon.RegularPolygon=void 0;const t=requireFactory(),e=requireShape(),n=requireValidators(),s=requireGlobal();let o=class extends e.Shape{_sceneFunc(d){const g=this._getPoints();d.beginPath(),d.moveTo(g[0].x,g[0].y);for(let y=1;y<g.length;y++)d.lineTo(g[y].x,g[y].y);d.closePath(),d.fillStrokeShape(this)}_getPoints(){const d=this.attrs.sides,g=this.attrs.radius||0,y=[];for(let v=0;v<d;v++)y.push({x:g*Math.sin(v*2*Math.PI/d),y:-1*g*Math.cos(v*2*Math.PI/d)});return y}getSelfRect(){const d=this._getPoints();let g=d[0].x,y=d[0].y,v=d[0].x,w=d[0].y;return d.forEach(T=>{g=Math.min(g,T.x),y=Math.max(y,T.x),v=Math.min(v,T.y),w=Math.max(w,T.y)}),{x:g,y:v,width:y-g,height:w-v}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius(d/2)}setHeight(d){this.radius(d/2)}};return RegularPolygon.RegularPolygon=o,o.prototype.className="RegularPolygon",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(o),t.Factory.addGetterSetter(o,"radius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(o,"sides",0,(0,n.getNumberValidator)()),RegularPolygon}var Ring={},hasRequiredRing;function requireRing(){if(hasRequiredRing)return Ring;hasRequiredRing=1,Object.defineProperty(Ring,"__esModule",{value:!0}),Ring.Ring=void 0;const t=requireFactory(),e=requireShape(),n=requireValidators(),s=requireGlobal(),o=Math.PI*2;let u=class extends e.Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.innerRadius(),0,o,!1),g.moveTo(this.outerRadius(),0),g.arc(0,0,this.outerRadius(),o,0,!0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}};return Ring.Ring=u,u.prototype.className="Ring",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(u),t.Factory.addGetterSetter(u,"innerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(u,"outerRadius",0,(0,n.getNumberValidator)()),Ring}var Sprite={},hasRequiredSprite;function requireSprite(){if(hasRequiredSprite)return Sprite;hasRequiredSprite=1,Object.defineProperty(Sprite,"__esModule",{value:!0}),Sprite.Sprite=void 0;const t=requireFactory(),e=requireShape(),n=requireAnimation(),s=requireValidators(),o=requireGlobal();let u=class extends e.Shape{constructor(g){super(g),this._updated=!0,this.anim=new n.Animation(()=>{const y=this._updated;return this._updated=!1,y}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(g){const y=this.animation(),v=this.frameIndex(),w=v*4,T=this.animations()[y],A=this.frameOffsets(),C=T[w+0],j=T[w+1],D=T[w+2],H=T[w+3],ne=this.image();if((this.hasFill()||this.hasStroke())&&(g.beginPath(),g.rect(0,0,D,H),g.closePath(),g.fillStrokeShape(this)),ne)if(A){const Y=A[y],U=v*2;g.drawImage(ne,C,j,D,H,Y[U+0],Y[U+1],D,H)}else g.drawImage(ne,C,j,D,H,0,0,D,H)}_hitFunc(g){const y=this.animation(),v=this.frameIndex(),w=v*4,T=this.animations()[y],A=this.frameOffsets(),C=T[w+2],j=T[w+3];if(g.beginPath(),A){const D=A[y],H=v*2;g.rect(D[H+0],D[H+1],C,j)}else g.rect(0,0,C,j);g.closePath(),g.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const g=this;this.interval=setInterval(function(){g._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const g=this.getLayer();this.anim.setLayers(g),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const g=this.frameIndex(),y=this.animation(),v=this.animations(),w=v[y],T=w.length/4;g<T-1?this.frameIndex(g+1):this.frameIndex(0)}};return Sprite.Sprite=u,u.prototype.className="Sprite",(0,o._registerNode)(u),t.Factory.addGetterSetter(u,"animation"),t.Factory.addGetterSetter(u,"animations"),t.Factory.addGetterSetter(u,"frameOffsets"),t.Factory.addGetterSetter(u,"image"),t.Factory.addGetterSetter(u,"frameIndex",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(u,"frameRate",17,(0,s.getNumberValidator)()),t.Factory.backCompat(u,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Sprite}var Star={},hasRequiredStar;function requireStar(){if(hasRequiredStar)return Star;hasRequiredStar=1,Object.defineProperty(Star,"__esModule",{value:!0}),Star.Star=void 0;const t=requireFactory(),e=requireShape(),n=requireValidators(),s=requireGlobal();let o=class extends e.Shape{_sceneFunc(d){const g=this.innerRadius(),y=this.outerRadius(),v=this.numPoints();d.beginPath(),d.moveTo(0,0-y);for(let w=1;w<v*2;w++){const T=w%2===0?y:g,A=T*Math.sin(w*Math.PI/v),C=-1*T*Math.cos(w*Math.PI/v);d.lineTo(A,C)}d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}};return Star.Star=o,o.prototype.className="Star",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(o),t.Factory.addGetterSetter(o,"numPoints",5,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(o,"innerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(o,"outerRadius",0,(0,n.getNumberValidator)()),Star}var Text={},hasRequiredText;function requireText(){if(hasRequiredText)return Text;hasRequiredText=1,Object.defineProperty(Text,"__esModule",{value:!0}),Text.Text=void 0,Text.stringToArray=d;const t=requireUtil(),e=requireFactory(),n=requireShape(),s=requireGlobal(),o=requireValidators(),u=requireGlobal();function d(Oe){return[...Oe].reduce((Te,Le,Me,Ce)=>{if(new RegExp("\\p{Emoji}","u").test(Le)){const be=Ce[Me+1];be&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(be)?(Te.push(Le+be),Ce[Me+1]=""):Te.push(Le)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(Le+(Ce[Me+1]||""))?Te.push(Le+Ce[Me+1]):Me>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(Le)?Te[Te.length-1]+=Le:Le&&Te.push(Le);return Te},[])}const g="auto",y="center",v="inherit",w="justify",T="Change.konva",A="2d",C="-",j="left",D="text",H="Text",ne="top",Y="bottom",U="middle",ee="normal",J="px ",ie=" ",se="right",K="rtl",te="word",re="char",ce="none",le="…",ue=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],_e=ue.length;function Ee(Oe){return Oe.split(",").map(Te=>{Te=Te.trim();const Le=Te.indexOf(" ")>=0,Me=Te.indexOf('"')>=0||Te.indexOf("'")>=0;return Le&&!Me&&(Te=`"${Te}"`),Te}).join(", ")}let we;function de(){return we||(we=t.Util.createCanvasElement().getContext(A),we)}function me(Oe){Oe.fillText(this._partialText,this._partialTextX,this._partialTextY)}function xe(Oe){Oe.setAttr("miterLimit",2),Oe.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function pe(Oe){return Oe=Oe||{},!Oe.fillLinearGradientColorStops&&!Oe.fillRadialGradientColorStops&&!Oe.fillPatternImage&&(Oe.fill=Oe.fill||"black"),Oe}let ve=class extends n.Shape{constructor(Te){super(pe(Te)),this._partialTextX=0,this._partialTextY=0;for(let Le=0;Le<_e;Le++)this.on(ue[Le]+T,this._setTextData);this._setTextData()}_sceneFunc(Te){const Le=this.textArr,Me=Le.length;if(!this.text())return;let Ce=this.padding(),be=this.fontSize(),Ve=this.lineHeight()*be,$e=this.verticalAlign(),Fe=this.direction(),je=0,De=this.align(),Ie=this.getWidth(),Re=this.letterSpacing(),Ne=this.fill(),Ue=this.textDecoration(),pt=Ue.indexOf("underline")!==-1,Ze=Ue.indexOf("line-through")!==-1,mn;Fe=Fe===v?Te.direction:Fe;let Ut=Ve/2,Lt=U;if(s.Konva._fixTextRendering){const Dt=this.measureSize("M");Lt="alphabetic",Ut=(Dt.fontBoundingBoxAscent-Dt.fontBoundingBoxDescent)/2+Ve/2}for(Fe===K&&Te.setAttr("direction",Fe),Te.setAttr("font",this._getContextFont()),Te.setAttr("textBaseline",Lt),Te.setAttr("textAlign",j),$e===U?je=(this.getHeight()-Me*Ve-Ce*2)/2:$e===Y&&(je=this.getHeight()-Me*Ve-Ce*2),Te.translate(Ce,je+Ce),mn=0;mn<Me;mn++){let Dt=0,Gt=0;const Ke=Le[mn],rt=Ke.text,Ct=Ke.width,tt=Ke.lastInParagraph;if(Te.save(),De===se?Dt+=Ie-Ct-Ce*2:De===y&&(Dt+=(Ie-Ct-Ce*2)/2),pt){Te.save(),Te.beginPath();const Et=s.Konva._fixTextRendering?Math.round(be/4):Math.round(be/2),un=Dt,hn=Ut+Gt+Et;Te.moveTo(un,hn);const xn=De===w&&!tt?Ie-Ce*2:Ct;Te.lineTo(un+Math.round(xn),hn),Te.lineWidth=be/15;const Dn=this._getLinearGradient();Te.strokeStyle=Dn||Ne,Te.stroke(),Te.restore()}if(Ze){Te.save(),Te.beginPath();const Et=s.Konva._fixTextRendering?-Math.round(be/4):0;Te.moveTo(Dt,Ut+Gt+Et);const un=De===w&&!tt?Ie-Ce*2:Ct;Te.lineTo(Dt+Math.round(un),Ut+Gt+Et),Te.lineWidth=be/15;const hn=this._getLinearGradient();Te.strokeStyle=hn||Ne,Te.stroke(),Te.restore()}if(Fe!==K&&(Re!==0||De===w)){const Et=rt.split(" ").length-1,un=d(rt);for(let hn=0;hn<un.length;hn++){const xn=un[hn];xn===" "&&!tt&&De===w&&(Dt+=(Ie-Ce*2-Ct)/Et),this._partialTextX=Dt,this._partialTextY=Ut+Gt,this._partialText=xn,Te.fillStrokeShape(this),Dt+=this.measureSize(xn).width+Re}}else Re!==0&&Te.setAttr("letterSpacing",`${Re}px`),this._partialTextX=Dt,this._partialTextY=Ut+Gt,this._partialText=rt,Te.fillStrokeShape(this);Te.restore(),Me>1&&(Ut+=Ve)}}_hitFunc(Te){const Le=this.getWidth(),Me=this.getHeight();Te.beginPath(),Te.rect(0,0,Le,Me),Te.closePath(),Te.fillStrokeShape(this)}setText(Te){const Le=t.Util._isString(Te)?Te:Te==null?"":Te+"";return this._setAttr(D,Le),this}getWidth(){return this.attrs.width===g||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===g||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(Te){var Le,Me,Ce,be,Ve,$e,Fe,je,De,Ie,Re;let Ne=de(),Ue=this.fontSize(),pt;Ne.save(),Ne.font=this._getContextFont(),pt=Ne.measureText(Te),Ne.restore();const Ze=Ue/100;return{actualBoundingBoxAscent:(Le=pt.actualBoundingBoxAscent)!==null&&Le!==void 0?Le:71.58203125*Ze,actualBoundingBoxDescent:(Me=pt.actualBoundingBoxDescent)!==null&&Me!==void 0?Me:0,actualBoundingBoxLeft:(Ce=pt.actualBoundingBoxLeft)!==null&&Ce!==void 0?Ce:-7.421875*Ze,actualBoundingBoxRight:(be=pt.actualBoundingBoxRight)!==null&&be!==void 0?be:75.732421875*Ze,alphabeticBaseline:(Ve=pt.alphabeticBaseline)!==null&&Ve!==void 0?Ve:0,emHeightAscent:($e=pt.emHeightAscent)!==null&&$e!==void 0?$e:100*Ze,emHeightDescent:(Fe=pt.emHeightDescent)!==null&&Fe!==void 0?Fe:-20*Ze,fontBoundingBoxAscent:(je=pt.fontBoundingBoxAscent)!==null&&je!==void 0?je:91*Ze,fontBoundingBoxDescent:(De=pt.fontBoundingBoxDescent)!==null&&De!==void 0?De:21*Ze,hangingBaseline:(Ie=pt.hangingBaseline)!==null&&Ie!==void 0?Ie:72.80000305175781*Ze,ideographicBaseline:(Re=pt.ideographicBaseline)!==null&&Re!==void 0?Re:-21*Ze,width:pt.width,height:Ue}}_getContextFont(){return this.fontStyle()+ie+this.fontVariant()+ie+(this.fontSize()+J)+Ee(this.fontFamily())}_addTextLine(Te){this.align()===w&&(Te=Te.trim());const Me=this._getTextWidth(Te);return this.textArr.push({text:Te,width:Me,lastInParagraph:!1})}_getTextWidth(Te){const Le=this.letterSpacing(),Me=Te.length;return de().measureText(Te).width+Le*Me}_setTextData(){let Te=this.text().split(`
`),Le=+this.fontSize(),Me=0,Ce=this.lineHeight()*Le,be=this.attrs.width,Ve=this.attrs.height,$e=be!==g&&be!==void 0,Fe=Ve!==g&&Ve!==void 0,je=this.padding(),De=be-je*2,Ie=Ve-je*2,Re=0,Ne=this.wrap(),Ue=Ne!==ce,pt=Ne!==re&&Ue,Ze=this.ellipsis();this.textArr=[],de().font=this._getContextFont();const mn=Ze?this._getTextWidth(le):0;for(let Ut=0,Lt=Te.length;Ut<Lt;++Ut){let Dt=Te[Ut],Gt=this._getTextWidth(Dt);if($e&&Gt>De)for(;Dt.length>0;){let Ke=0,rt=d(Dt).length,Ct="",tt=0;for(;Ke<rt;){const Et=Ke+rt>>>1,un=d(Dt),hn=un.slice(0,Et+1).join(""),xn=this._getTextWidth(hn);(Ze&&Fe&&Re+Ce>Ie?xn+mn:xn)<=De?(Ke=Et+1,Ct=hn,tt=xn):rt=Et}if(Ct){if(pt){const hn=d(Dt),xn=d(Ct),Dn=hn[xn.length],Sn=Dn===ie||Dn===C;let Hn;if(Sn&&tt<=De)Hn=xn.length;else{const Pn=xn.lastIndexOf(ie),Gn=xn.lastIndexOf(C);Hn=Math.max(Pn,Gn)+1}Hn>0&&(Ke=Hn,Ct=hn.slice(0,Ke).join(""),tt=this._getTextWidth(Ct))}if(Ct=Ct.trimRight(),this._addTextLine(Ct),Me=Math.max(Me,tt),Re+=Ce,this._shouldHandleEllipsis(Re)){this._tryToAddEllipsisToLastLine();break}if(Dt=d(Dt).slice(Ke).join("").trimLeft(),Dt.length>0&&(Gt=this._getTextWidth(Dt),Gt<=De)){this._addTextLine(Dt),Re+=Ce,Me=Math.max(Me,Gt);break}}else break}else this._addTextLine(Dt),Re+=Ce,Me=Math.max(Me,Gt),this._shouldHandleEllipsis(Re)&&Ut<Lt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Fe&&Re+Ce>Ie)break}this.textHeight=Le,this.textWidth=Me}_shouldHandleEllipsis(Te){const Le=+this.fontSize(),Me=this.lineHeight()*Le,Ce=this.attrs.height,be=Ce!==g&&Ce!==void 0,Ve=this.padding(),$e=Ce-Ve*2;return!(this.wrap()!==ce)||be&&Te+Me>$e}_tryToAddEllipsisToLastLine(){const Te=this.attrs.width,Le=Te!==g&&Te!==void 0,Me=this.padding(),Ce=Te-Me*2,be=this.ellipsis(),Ve=this.textArr[this.textArr.length-1];!Ve||!be||(Le&&(this._getTextWidth(Ve.text+le)<Ce||(Ve.text=Ve.text.slice(0,Ve.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(Ve.text+le))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const Te=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,Le=this.hasShadow();return Te&&Le?!0:super._useBufferCanvas()}};return Text.Text=ve,ve.prototype._fillFunc=me,ve.prototype._strokeFunc=xe,ve.prototype.className=H,ve.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,u._registerNode)(ve),e.Factory.overWriteSetter(ve,"width",(0,o.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(ve,"height",(0,o.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(ve,"direction",v),e.Factory.addGetterSetter(ve,"fontFamily","Arial"),e.Factory.addGetterSetter(ve,"fontSize",12,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(ve,"fontStyle",ee),e.Factory.addGetterSetter(ve,"fontVariant",ee),e.Factory.addGetterSetter(ve,"padding",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(ve,"align",j),e.Factory.addGetterSetter(ve,"verticalAlign",ne),e.Factory.addGetterSetter(ve,"lineHeight",1,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(ve,"wrap",te),e.Factory.addGetterSetter(ve,"ellipsis",!1,(0,o.getBooleanValidator)()),e.Factory.addGetterSetter(ve,"letterSpacing",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(ve,"text","",(0,o.getStringValidator)()),e.Factory.addGetterSetter(ve,"textDecoration",""),Text}var TextPath={},hasRequiredTextPath;function requireTextPath(){if(hasRequiredTextPath)return TextPath;hasRequiredTextPath=1,Object.defineProperty(TextPath,"__esModule",{value:!0}),TextPath.TextPath=void 0;const t=requireUtil(),e=requireFactory(),n=requireShape(),s=requirePath(),o=requireText(),u=requireValidators(),d=requireGlobal(),g="",y="normal";function v(A){A.fillText(this.partialText,0,0)}function w(A){A.strokeText(this.partialText,0,0)}let T=class extends n.Shape{constructor(C){super(C),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return s.Path.getPathLength(this.dataArray)}_getPointAtLength(C){if(!this.attrs.data)return null;const j=this.pathLength;return C-1>j?null:s.Path.getPointAtLengthOfDataArray(C,this.dataArray)}_readDataAttribute(){this.dataArray=s.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(C){C.setAttr("font",this._getContextFont()),C.setAttr("textBaseline",this.textBaseline()),C.setAttr("textAlign","left"),C.save();const j=this.textDecoration(),D=this.fill(),H=this.fontSize(),ne=this.glyphInfo;j==="underline"&&C.beginPath();for(let Y=0;Y<ne.length;Y++){C.save();const U=ne[Y].p0;C.translate(U.x,U.y),C.rotate(ne[Y].rotation),this.partialText=ne[Y].text,C.fillStrokeShape(this),j==="underline"&&(Y===0&&C.moveTo(0,H/2+1),C.lineTo(H,H/2+1)),C.restore()}j==="underline"&&(C.strokeStyle=D,C.lineWidth=H/20,C.stroke()),C.restore()}_hitFunc(C){C.beginPath();const j=this.glyphInfo;if(j.length>=1){const D=j[0].p0;C.moveTo(D.x,D.y)}for(let D=0;D<j.length;D++){const H=j[D].p1;C.lineTo(H.x,H.y)}C.setAttr("lineWidth",this.fontSize()),C.setAttr("strokeStyle",this.colorKey),C.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(C){return o.Text.prototype.setText.call(this,C)}_getContextFont(){return o.Text.prototype._getContextFont.call(this)}_getTextSize(C){const D=this.dummyCanvas.getContext("2d");D.save(),D.font=this._getContextFont();const H=D.measureText(C);return D.restore(),{width:H.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:C,height:j}=this._getTextSize(this.attrs.text);if(this.textWidth=C,this.textHeight=j,this.glyphInfo=[],!this.attrs.data)return null;const D=this.letterSpacing(),H=this.align(),ne=this.kerningFunc(),Y=Math.max(this.textWidth+((this.attrs.text||"").length-1)*D,0);let U=0;H==="center"&&(U=Math.max(0,this.pathLength/2-Y/2)),H==="right"&&(U=Math.max(0,this.pathLength-Y));const ee=(0,o.stringToArray)(this.text());let J=U;for(let ie=0;ie<ee.length;ie++){const se=this._getPointAtLength(J);if(!se)return;let K=this._getTextSize(ee[ie]).width+D;if(ee[ie]===" "&&H==="justify"){const _e=this.text().split(" ").length-1;K+=(this.pathLength-Y)/_e}const te=this._getPointAtLength(J+K);if(!te)return;const re=s.Path.getLineLength(se.x,se.y,te.x,te.y);let ce=0;if(ne)try{ce=ne(ee[ie-1],ee[ie])*this.fontSize()}catch{ce=0}se.x+=ce,te.x+=ce,this.textWidth+=ce;const le=s.Path.getPointOnLine(ce+re/2,se.x,se.y,te.x,te.y),ue=Math.atan2(te.y-se.y,te.x-se.x);this.glyphInfo.push({transposeX:le.x,transposeY:le.y,text:ee[ie],rotation:ue,p0:se,p1:te}),J+=K}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const C=[];this.glyphInfo.forEach(function(J){C.push(J.p0.x),C.push(J.p0.y),C.push(J.p1.x),C.push(J.p1.y)});let j=C[0]||0,D=C[0]||0,H=C[1]||0,ne=C[1]||0,Y,U;for(let J=0;J<C.length/2;J++)Y=C[J*2],U=C[J*2+1],j=Math.min(j,Y),D=Math.max(D,Y),H=Math.min(H,U),ne=Math.max(ne,U);const ee=this.fontSize();return{x:j-ee/2,y:H-ee/2,width:D-j+ee,height:ne-H+ee}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return TextPath.TextPath=T,T.prototype._fillFunc=v,T.prototype._strokeFunc=w,T.prototype._fillFuncHit=v,T.prototype._strokeFuncHit=w,T.prototype.className="TextPath",T.prototype._attrsAffectingSize=["text","fontSize","data"],(0,d._registerNode)(T),e.Factory.addGetterSetter(T,"data"),e.Factory.addGetterSetter(T,"fontFamily","Arial"),e.Factory.addGetterSetter(T,"fontSize",12,(0,u.getNumberValidator)()),e.Factory.addGetterSetter(T,"fontStyle",y),e.Factory.addGetterSetter(T,"align","left"),e.Factory.addGetterSetter(T,"letterSpacing",0,(0,u.getNumberValidator)()),e.Factory.addGetterSetter(T,"textBaseline","middle"),e.Factory.addGetterSetter(T,"fontVariant",y),e.Factory.addGetterSetter(T,"text",g),e.Factory.addGetterSetter(T,"textDecoration",""),e.Factory.addGetterSetter(T,"kerningFunc",void 0),TextPath}var Transformer={},hasRequiredTransformer;function requireTransformer(){if(hasRequiredTransformer)return Transformer;hasRequiredTransformer=1,Object.defineProperty(Transformer,"__esModule",{value:!0}),Transformer.Transformer=void 0;const t=requireUtil(),e=requireFactory(),n=requireNode(),s=requireShape(),o=requireRect(),u=requireGroup(),d=requireGlobal(),g=requireValidators(),y=requireGlobal(),v="tr-konva",w=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(K=>K+`.${v}`).join(" "),T="nodesRect",A=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],C={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},j="ontouchstart"in d.Konva._global;function D(K,te,re){if(K==="rotater")return re;te+=t.Util.degToRad(C[K]||0);const ce=(t.Util.radToDeg(te)%360+360)%360;return t.Util._inRange(ce,315+22.5,360)||t.Util._inRange(ce,0,22.5)?"ns-resize":t.Util._inRange(ce,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(ce,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(ce,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(ce,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(ce,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(ce,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(ce,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+ce),"pointer")}const H=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function ne(K){return{x:K.x+K.width/2*Math.cos(K.rotation)+K.height/2*Math.sin(-K.rotation),y:K.y+K.height/2*Math.cos(K.rotation)+K.width/2*Math.sin(K.rotation)}}function Y(K,te,re){const ce=re.x+(K.x-re.x)*Math.cos(te)-(K.y-re.y)*Math.sin(te),le=re.y+(K.x-re.x)*Math.sin(te)+(K.y-re.y)*Math.cos(te);return{...K,rotation:K.rotation+te,x:ce,y:le}}function U(K,te){const re=ne(K);return Y(K,te,re)}function ee(K,te,re){let ce=te;for(let le=0;le<K.length;le++){const ue=d.Konva.getAngle(K[le]),_e=Math.abs(ue-te)%(Math.PI*2);Math.min(_e,Math.PI*2-_e)<re&&(ce=ue)}return ce}let J=0,ie=class extends u.Group{constructor(te){super(te),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(w,this.update),this.getNode()&&this.update()}attachTo(te){return this.setNode(te),this}setNode(te){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([te])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return v+this._id}setNodes(te=[]){this._nodes&&this._nodes.length&&this.detach();const re=te.filter(le=>le.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=te=re,te.length===1&&this.useSingleNodeRotation()?this.rotation(te[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(le=>{const ue=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(le._attrsAffectingSize.length){const _e=le._attrsAffectingSize.map(Ee=>Ee+"Change."+this._getEventNamespace()).join(" ");le.on(_e,ue)}le.on(A.map(_e=>_e+`.${this._getEventNamespace()}`).join(" "),ue),le.on(`absoluteTransformChange.${this._getEventNamespace()}`,ue),this._proxyDrag(le)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(te){let re;te.on(`dragstart.${this._getEventNamespace()}`,ce=>{re=te.getAbsolutePosition(),!this.isDragging()&&te!==this.findOne(".back")&&this.startDrag(ce,!1)}),te.on(`dragmove.${this._getEventNamespace()}`,ce=>{if(!re)return;const le=te.getAbsolutePosition(),ue=le.x-re.x,_e=le.y-re.y;this.nodes().forEach(Ee=>{if(Ee===te||Ee.isDragging())return;const we=Ee.getAbsolutePosition();Ee.setAbsolutePosition({x:we.x+ue,y:we.y+_e}),Ee.startDrag(ce)}),re=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(te=>{te.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(T),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(T,this.__getNodeRect)}__getNodeShape(te,re=this.rotation(),ce){const le=te.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ue=te.getAbsoluteScale(ce),_e=te.getAbsolutePosition(ce),Ee=le.x*ue.x-te.offsetX()*ue.x,we=le.y*ue.y-te.offsetY()*ue.y,de=(d.Konva.getAngle(te.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),me={x:_e.x+Ee*Math.cos(de)+we*Math.sin(-de),y:_e.y+we*Math.cos(de)+Ee*Math.sin(de),width:le.width*ue.x,height:le.height*ue.y,rotation:de};return Y(me,-d.Konva.getAngle(re),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const re=[];this.nodes().map(de=>{const me=de.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),xe=[{x:me.x,y:me.y},{x:me.x+me.width,y:me.y},{x:me.x+me.width,y:me.y+me.height},{x:me.x,y:me.y+me.height}],pe=de.getAbsoluteTransform();xe.forEach(function(ve){const Oe=pe.point(ve);re.push(Oe)})});const ce=new t.Transform;ce.rotate(-d.Konva.getAngle(this.rotation()));let le=1/0,ue=1/0,_e=-1/0,Ee=-1/0;re.forEach(function(de){const me=ce.point(de);le===void 0&&(le=_e=me.x,ue=Ee=me.y),le=Math.min(le,me.x),ue=Math.min(ue,me.y),_e=Math.max(_e,me.x),Ee=Math.max(Ee,me.y)}),ce.invert();const we=ce.point({x:le,y:ue});return{x:we.x,y:we.y,width:_e-le,height:Ee-ue,rotation:d.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),H.forEach(te=>{this._createAnchor(te)}),this._createAnchor("rotater")}_createAnchor(te){const re=new o.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:te+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:j?10:"auto"}),ce=this;re.on("mousedown touchstart",function(le){ce._handleMouseDown(le)}),re.on("dragstart",le=>{re.stopDrag(),le.cancelBubble=!0}),re.on("dragend",le=>{le.cancelBubble=!0}),re.on("mouseenter",()=>{const le=d.Konva.getAngle(this.rotation()),ue=this.rotateAnchorCursor(),_e=D(te,le,ue);re.getStage().content&&(re.getStage().content.style.cursor=_e),this._cursorChange=!0}),re.on("mouseout",()=>{re.getStage().content&&(re.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(re)}_createBack(){const te=new s.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(re,ce){const le=ce.getParent(),ue=le.padding();re.beginPath(),re.rect(-ue,-ue,ce.width()+ue*2,ce.height()+ue*2),re.moveTo(ce.width()/2,-ue),le.rotateEnabled()&&le.rotateLineVisible()&&re.lineTo(ce.width()/2,-le.rotateAnchorOffset()*t.Util._sign(ce.height())-ue),re.fillStrokeShape(ce)},hitFunc:(re,ce)=>{if(!this.shouldOverdrawWholeArea())return;const le=this.padding();re.beginPath(),re.rect(-le,-le,ce.width()+le*2,ce.height()+le*2),re.fillStrokeShape(ce)}});this.add(te),this._proxyDrag(te),te.on("dragstart",re=>{re.cancelBubble=!0}),te.on("dragmove",re=>{re.cancelBubble=!0}),te.on("dragend",re=>{re.cancelBubble=!0}),this.on("dragmove",re=>{this.update()})}_handleMouseDown(te){if(this._transforming)return;this._movingAnchorName=te.target.name().split(" ")[0];const re=this._getNodeRect(),ce=re.width,le=re.height,ue=Math.sqrt(Math.pow(ce,2)+Math.pow(le,2));this.sin=Math.abs(le/ue),this.cos=Math.abs(ce/ue),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const _e=te.target.getAbsolutePosition(),Ee=te.target.getStage().getPointerPosition();this._anchorDragOffset={x:Ee.x-_e.x,y:Ee.y-_e.y},J++,this._fire("transformstart",{evt:te.evt,target:this.getNode()}),this._nodes.forEach(we=>{we._fire("transformstart",{evt:te.evt,target:we})})}_handleMouseMove(te){let re,ce,le;const ue=this.findOne("."+this._movingAnchorName),_e=ue.getStage();_e.setPointersPositions(te);const Ee=_e.getPointerPosition();let we={x:Ee.x-this._anchorDragOffset.x,y:Ee.y-this._anchorDragOffset.y};const de=ue.getAbsolutePosition();this.anchorDragBoundFunc()&&(we=this.anchorDragBoundFunc()(de,we,te)),ue.setAbsolutePosition(we);const me=ue.getAbsolutePosition();if(de.x===me.x&&de.y===me.y)return;if(this._movingAnchorName==="rotater"){const Ce=this._getNodeRect();re=ue.x()-Ce.width/2,ce=-ue.y()+Ce.height/2;let be=Math.atan2(-ce,re)+Math.PI/2;Ce.height<0&&(be-=Math.PI);const $e=d.Konva.getAngle(this.rotation())+be,Fe=d.Konva.getAngle(this.rotationSnapTolerance()),De=ee(this.rotationSnaps(),$e,Fe)-Ce.rotation,Ie=U(Ce,De);this._fitNodesInto(Ie,te);return}const xe=this.shiftBehavior();let pe;xe==="inverted"?pe=this.keepRatio()&&!te.shiftKey:xe==="none"?pe=this.keepRatio():pe=this.keepRatio()||te.shiftKey;let ve=this.centeredScaling()||te.altKey;if(this._movingAnchorName==="top-left"){if(pe){const Ce=ve?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};le=Math.sqrt(Math.pow(Ce.x-ue.x(),2)+Math.pow(Ce.y-ue.y(),2));const be=this.findOne(".top-left").x()>Ce.x?-1:1,Ve=this.findOne(".top-left").y()>Ce.y?-1:1;re=le*this.cos*be,ce=le*this.sin*Ve,this.findOne(".top-left").x(Ce.x-re),this.findOne(".top-left").y(Ce.y-ce)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(ue.y());else if(this._movingAnchorName==="top-right"){if(pe){const Ce=ve?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};le=Math.sqrt(Math.pow(ue.x()-Ce.x,2)+Math.pow(Ce.y-ue.y(),2));const be=this.findOne(".top-right").x()<Ce.x?-1:1,Ve=this.findOne(".top-right").y()>Ce.y?-1:1;re=le*this.cos*be,ce=le*this.sin*Ve,this.findOne(".top-right").x(Ce.x+re),this.findOne(".top-right").y(Ce.y-ce)}var Oe=ue.position();this.findOne(".top-left").y(Oe.y),this.findOne(".bottom-right").x(Oe.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(ue.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(ue.x());else if(this._movingAnchorName==="bottom-left"){if(pe){const Ce=ve?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};le=Math.sqrt(Math.pow(Ce.x-ue.x(),2)+Math.pow(ue.y()-Ce.y,2));const be=Ce.x<ue.x()?-1:1,Ve=ue.y()<Ce.y?-1:1;re=le*this.cos*be,ce=le*this.sin*Ve,ue.x(Ce.x-re),ue.y(Ce.y+ce)}Oe=ue.position(),this.findOne(".top-left").x(Oe.x),this.findOne(".bottom-right").y(Oe.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(ue.y());else if(this._movingAnchorName==="bottom-right"){if(pe){const Ce=ve?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};le=Math.sqrt(Math.pow(ue.x()-Ce.x,2)+Math.pow(ue.y()-Ce.y,2));const be=this.findOne(".bottom-right").x()<Ce.x?-1:1,Ve=this.findOne(".bottom-right").y()<Ce.y?-1:1;re=le*this.cos*be,ce=le*this.sin*Ve,this.findOne(".bottom-right").x(Ce.x+re),this.findOne(".bottom-right").y(Ce.y+ce)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(ve=this.centeredScaling()||te.altKey,ve){const Ce=this.findOne(".top-left"),be=this.findOne(".bottom-right"),Ve=Ce.x(),$e=Ce.y(),Fe=this.getWidth()-be.x(),je=this.getHeight()-be.y();be.move({x:-Ve,y:-$e}),Ce.move({x:Fe,y:je})}const Te=this.findOne(".top-left").getAbsolutePosition();re=Te.x,ce=Te.y;const Le=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Me=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:re,y:ce,width:Le,height:Me,rotation:d.Konva.getAngle(this.rotation())},te)}_handleMouseUp(te){this._removeEvents(te)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(te){var re;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const ce=this.getNode();J--,this._fire("transformend",{evt:te,target:ce}),(re=this.getLayer())===null||re===void 0||re.batchDraw(),ce&&this._nodes.forEach(le=>{var ue;le._fire("transformend",{evt:te,target:le}),(ue=le.getLayer())===null||ue===void 0||ue.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(te,re){const ce=this._getNodeRect(),le=1;if(t.Util._inRange(te.width,-this.padding()*2-le,le)){this.update();return}if(t.Util._inRange(te.height,-this.padding()*2-le,le)){this.update();return}const ue=new t.Transform;if(ue.rotate(d.Konva.getAngle(this.rotation())),this._movingAnchorName&&te.width<0&&this._movingAnchorName.indexOf("left")>=0){const pe=ue.point({x:-this.padding()*2,y:0});te.x+=pe.x,te.y+=pe.y,te.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=pe.x,this._anchorDragOffset.y-=pe.y}else if(this._movingAnchorName&&te.width<0&&this._movingAnchorName.indexOf("right")>=0){const pe=ue.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=pe.x,this._anchorDragOffset.y-=pe.y,te.width+=this.padding()*2}if(this._movingAnchorName&&te.height<0&&this._movingAnchorName.indexOf("top")>=0){const pe=ue.point({x:0,y:-this.padding()*2});te.x+=pe.x,te.y+=pe.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=pe.x,this._anchorDragOffset.y-=pe.y,te.height+=this.padding()*2}else if(this._movingAnchorName&&te.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const pe=ue.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=pe.x,this._anchorDragOffset.y-=pe.y,te.height+=this.padding()*2}if(this.boundBoxFunc()){const pe=this.boundBoxFunc()(ce,te);pe?te=pe:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const _e=1e7,Ee=new t.Transform;Ee.translate(ce.x,ce.y),Ee.rotate(ce.rotation),Ee.scale(ce.width/_e,ce.height/_e);const we=new t.Transform,de=te.width/_e,me=te.height/_e;this.flipEnabled()===!1?(we.translate(te.x,te.y),we.rotate(te.rotation),we.translate(te.width<0?te.width:0,te.height<0?te.height:0),we.scale(Math.abs(de),Math.abs(me))):(we.translate(te.x,te.y),we.rotate(te.rotation),we.scale(de,me));const xe=we.multiply(Ee.invert());this._nodes.forEach(pe=>{var ve;const Oe=pe.getParent().getAbsoluteTransform(),Te=pe.getTransform().copy();Te.translate(pe.offsetX(),pe.offsetY());const Le=new t.Transform;Le.multiply(Oe.copy().invert()).multiply(xe).multiply(Oe).multiply(Te);const Me=Le.decompose();pe.setAttrs(Me),(ve=pe.getLayer())===null||ve===void 0||ve.batchDraw()}),this.rotation(t.Util._getRotation(te.rotation)),this._nodes.forEach(pe=>{this._fire("transform",{evt:re,target:pe}),pe._fire("transform",{evt:re,target:pe})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(te,re){this.findOne(te).setAttrs(re)}update(){var te;const re=this._getNodeRect();this.rotation(t.Util._getRotation(re.rotation));const ce=re.width,le=re.height,ue=this.enabledAnchors(),_e=this.resizeEnabled(),Ee=this.padding(),we=this.anchorSize(),de=this.find("._anchor");de.forEach(xe=>{xe.setAttrs({width:we,height:we,offsetX:we/2,offsetY:we/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:we/2+Ee,offsetY:we/2+Ee,visible:_e&&ue.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:ce/2,y:0,offsetY:we/2+Ee,visible:_e&&ue.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:ce,y:0,offsetX:we/2-Ee,offsetY:we/2+Ee,visible:_e&&ue.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:le/2,offsetX:we/2+Ee,visible:_e&&ue.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:ce,y:le/2,offsetX:we/2-Ee,visible:_e&&ue.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:le,offsetX:we/2+Ee,offsetY:we/2-Ee,visible:_e&&ue.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:ce/2,y:le,offsetY:we/2-Ee,visible:_e&&ue.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:ce,y:le,offsetX:we/2-Ee,offsetY:we/2-Ee,visible:_e&&ue.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:ce/2,y:-this.rotateAnchorOffset()*t.Util._sign(le)-Ee,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:ce,height:le,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const me=this.anchorStyleFunc();me&&de.forEach(xe=>{me(xe)}),(te=this.getLayer())===null||te===void 0||te.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const te=this.findOne("."+this._movingAnchorName);te&&te.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),u.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(te){return n.Node.prototype.clone.call(this,te)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Transformer.Transformer=ie,ie.isTransforming=()=>J>0;function se(K){return K instanceof Array||t.Util.warn("enabledAnchors value should be an array"),K instanceof Array&&K.forEach(function(te){H.indexOf(te)===-1&&t.Util.warn("Unknown anchor name: "+te+". Available names are: "+H.join(", "))}),K||[]}return ie.prototype.className="Transformer",(0,y._registerNode)(ie),e.Factory.addGetterSetter(ie,"enabledAnchors",H,se),e.Factory.addGetterSetter(ie,"flipEnabled",!0,(0,g.getBooleanValidator)()),e.Factory.addGetterSetter(ie,"resizeEnabled",!0),e.Factory.addGetterSetter(ie,"anchorSize",10,(0,g.getNumberValidator)()),e.Factory.addGetterSetter(ie,"rotateEnabled",!0),e.Factory.addGetterSetter(ie,"rotateLineVisible",!0),e.Factory.addGetterSetter(ie,"rotationSnaps",[]),e.Factory.addGetterSetter(ie,"rotateAnchorOffset",50,(0,g.getNumberValidator)()),e.Factory.addGetterSetter(ie,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(ie,"rotationSnapTolerance",5,(0,g.getNumberValidator)()),e.Factory.addGetterSetter(ie,"borderEnabled",!0),e.Factory.addGetterSetter(ie,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(ie,"anchorStrokeWidth",1,(0,g.getNumberValidator)()),e.Factory.addGetterSetter(ie,"anchorFill","white"),e.Factory.addGetterSetter(ie,"anchorCornerRadius",0,(0,g.getNumberValidator)()),e.Factory.addGetterSetter(ie,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(ie,"borderStrokeWidth",1,(0,g.getNumberValidator)()),e.Factory.addGetterSetter(ie,"borderDash"),e.Factory.addGetterSetter(ie,"keepRatio",!0),e.Factory.addGetterSetter(ie,"shiftBehavior","default"),e.Factory.addGetterSetter(ie,"centeredScaling",!1),e.Factory.addGetterSetter(ie,"ignoreStroke",!1),e.Factory.addGetterSetter(ie,"padding",0,(0,g.getNumberValidator)()),e.Factory.addGetterSetter(ie,"nodes"),e.Factory.addGetterSetter(ie,"node"),e.Factory.addGetterSetter(ie,"boundBoxFunc"),e.Factory.addGetterSetter(ie,"anchorDragBoundFunc"),e.Factory.addGetterSetter(ie,"anchorStyleFunc"),e.Factory.addGetterSetter(ie,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(ie,"useSingleNodeRotation",!0),e.Factory.backCompat(ie,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Transformer}var Wedge={},hasRequiredWedge;function requireWedge(){if(hasRequiredWedge)return Wedge;hasRequiredWedge=1,Object.defineProperty(Wedge,"__esModule",{value:!0}),Wedge.Wedge=void 0;const t=requireFactory(),e=requireShape(),n=requireGlobal(),s=requireValidators(),o=requireGlobal();let u=class extends e.Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),g.lineTo(0,0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius(g/2)}setHeight(g){this.radius(g/2)}};return Wedge.Wedge=u,u.prototype.className="Wedge",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],(0,o._registerNode)(u),t.Factory.addGetterSetter(u,"radius",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(u,"angle",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(u,"clockwise",!1),t.Factory.backCompat(u,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Wedge}var Blur={},hasRequiredBlur;function requireBlur(){if(hasRequiredBlur)return Blur;hasRequiredBlur=1,Object.defineProperty(Blur,"__esModule",{value:!0}),Blur.Blur=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators();function s(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],u=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function d(y,v){const w=y.data,T=y.width,A=y.height;let C,j,D,H,ne,Y,U,ee,J,ie,se,K,te,re,ce,le,ue,_e,Ee,we;const de=v+v+1,me=T-1,xe=A-1,pe=v+1,ve=pe*(pe+1)/2,Oe=new s,Te=o[v],Le=u[v];let Me=null,Ce=Oe,be=null,Ve=null;for(let $e=1;$e<de;$e++)Ce=Ce.next=new s,$e===pe&&(Me=Ce);Ce.next=Oe,D=j=0;for(let $e=0;$e<A;$e++){K=te=re=ce=H=ne=Y=U=0,ee=pe*(le=w[j]),J=pe*(ue=w[j+1]),ie=pe*(_e=w[j+2]),se=pe*(Ee=w[j+3]),H+=ve*le,ne+=ve*ue,Y+=ve*_e,U+=ve*Ee,Ce=Oe;for(let Fe=0;Fe<pe;Fe++)Ce.r=le,Ce.g=ue,Ce.b=_e,Ce.a=Ee,Ce=Ce.next;for(let Fe=1;Fe<pe;Fe++)C=j+((me<Fe?me:Fe)<<2),H+=(Ce.r=le=w[C])*(we=pe-Fe),ne+=(Ce.g=ue=w[C+1])*we,Y+=(Ce.b=_e=w[C+2])*we,U+=(Ce.a=Ee=w[C+3])*we,K+=le,te+=ue,re+=_e,ce+=Ee,Ce=Ce.next;be=Oe,Ve=Me;for(let Fe=0;Fe<T;Fe++)w[j+3]=Ee=U*Te>>Le,Ee!==0?(Ee=255/Ee,w[j]=(H*Te>>Le)*Ee,w[j+1]=(ne*Te>>Le)*Ee,w[j+2]=(Y*Te>>Le)*Ee):w[j]=w[j+1]=w[j+2]=0,H-=ee,ne-=J,Y-=ie,U-=se,ee-=be.r,J-=be.g,ie-=be.b,se-=be.a,C=D+((C=Fe+v+1)<me?C:me)<<2,K+=be.r=w[C],te+=be.g=w[C+1],re+=be.b=w[C+2],ce+=be.a=w[C+3],H+=K,ne+=te,Y+=re,U+=ce,be=be.next,ee+=le=Ve.r,J+=ue=Ve.g,ie+=_e=Ve.b,se+=Ee=Ve.a,K-=le,te-=ue,re-=_e,ce-=Ee,Ve=Ve.next,j+=4;D+=T}for(let $e=0;$e<T;$e++){te=re=ce=K=ne=Y=U=H=0,j=$e<<2,ee=pe*(le=w[j]),J=pe*(ue=w[j+1]),ie=pe*(_e=w[j+2]),se=pe*(Ee=w[j+3]),H+=ve*le,ne+=ve*ue,Y+=ve*_e,U+=ve*Ee,Ce=Oe;for(let je=0;je<pe;je++)Ce.r=le,Ce.g=ue,Ce.b=_e,Ce.a=Ee,Ce=Ce.next;let Fe=T;for(let je=1;je<=v;je++)j=Fe+$e<<2,H+=(Ce.r=le=w[j])*(we=pe-je),ne+=(Ce.g=ue=w[j+1])*we,Y+=(Ce.b=_e=w[j+2])*we,U+=(Ce.a=Ee=w[j+3])*we,K+=le,te+=ue,re+=_e,ce+=Ee,Ce=Ce.next,je<xe&&(Fe+=T);j=$e,be=Oe,Ve=Me;for(let je=0;je<A;je++)C=j<<2,w[C+3]=Ee=U*Te>>Le,Ee>0?(Ee=255/Ee,w[C]=(H*Te>>Le)*Ee,w[C+1]=(ne*Te>>Le)*Ee,w[C+2]=(Y*Te>>Le)*Ee):w[C]=w[C+1]=w[C+2]=0,H-=ee,ne-=J,Y-=ie,U-=se,ee-=be.r,J-=be.g,ie-=be.b,se-=be.a,C=$e+((C=je+pe)<xe?C:xe)*T<<2,H+=K+=be.r=w[C],ne+=te+=be.g=w[C+1],Y+=re+=be.b=w[C+2],U+=ce+=be.a=w[C+3],be=be.next,ee+=le=Ve.r,J+=ue=Ve.g,ie+=_e=Ve.b,se+=Ee=Ve.a,K-=le,te-=ue,re-=_e,ce-=Ee,Ve=Ve.next,j+=T}}const g=function(v){const w=Math.round(this.blurRadius());w>0&&d(v,w)};return Blur.Blur=g,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Blur}var Brighten={},hasRequiredBrighten;function requireBrighten(){if(hasRequiredBrighten)return Brighten;hasRequiredBrighten=1,Object.defineProperty(Brighten,"__esModule",{value:!0}),Brighten.Brighten=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators(),s=function(o){const u=this.brightness()*255,d=o.data,g=d.length;for(let y=0;y<g;y+=4)d[y]+=u,d[y+1]+=u,d[y+2]+=u};return Brighten.Brighten=s,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Brighten}var Contrast={},hasRequiredContrast;function requireContrast(){if(hasRequiredContrast)return Contrast;hasRequiredContrast=1,Object.defineProperty(Contrast,"__esModule",{value:!0}),Contrast.Contrast=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators(),s=function(o){const u=Math.pow((this.contrast()+100)/100,2),d=o.data,g=d.length;let y=150,v=150,w=150;for(let T=0;T<g;T+=4)y=d[T],v=d[T+1],w=d[T+2],y/=255,y-=.5,y*=u,y+=.5,y*=255,v/=255,v-=.5,v*=u,v+=.5,v*=255,w/=255,w-=.5,w*=u,w+=.5,w*=255,y=y<0?0:y>255?255:y,v=v<0?0:v>255?255:v,w=w<0?0:w>255?255:w,d[T]=y,d[T+1]=v,d[T+2]=w};return Contrast.Contrast=s,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Contrast}var Emboss={},hasRequiredEmboss;function requireEmboss(){if(hasRequiredEmboss)return Emboss;hasRequiredEmboss=1,Object.defineProperty(Emboss,"__esModule",{value:!0}),Emboss.Emboss=void 0;const t=requireFactory(),e=requireNode(),n=requireUtil(),s=requireValidators(),o=function(u){const d=this.embossStrength()*10,g=this.embossWhiteLevel()*255,y=this.embossDirection(),v=this.embossBlend(),w=u.data,T=u.width,A=u.height,C=T*4;let j=0,D=0,H=A;switch(y){case"top-left":j=-1,D=-1;break;case"top":j=-1,D=0;break;case"top-right":j=-1,D=1;break;case"right":j=0,D=1;break;case"bottom-right":j=1,D=1;break;case"bottom":j=1,D=0;break;case"bottom-left":j=1,D=-1;break;case"left":j=0,D=-1;break;default:n.Util.error("Unknown emboss direction: "+y)}do{const ne=(H-1)*C;let Y=j;H+Y<1&&(Y=0),H+Y>A&&(Y=0);const U=(H-1+Y)*T*4;let ee=T;do{const J=ne+(ee-1)*4;let ie=D;ee+ie<1&&(ie=0),ee+ie>T&&(ie=0);const se=U+(ee-1+ie)*4,K=w[J]-w[se],te=w[J+1]-w[se+1],re=w[J+2]-w[se+2];let ce=K;const le=ce>0?ce:-ce,ue=te>0?te:-te,_e=re>0?re:-re;if(ue>le&&(ce=te),_e>le&&(ce=re),ce*=d,v){const Ee=w[J]+ce,we=w[J+1]+ce,de=w[J+2]+ce;w[J]=Ee>255?255:Ee<0?0:Ee,w[J+1]=we>255?255:we<0?0:we,w[J+2]=de>255?255:de<0?0:de}else{let Ee=g-ce;Ee<0?Ee=0:Ee>255&&(Ee=255),w[J]=w[J+1]=w[J+2]=Ee}}while(--ee)}while(--H)};return Emboss.Emboss=o,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),Emboss}var Enhance={},hasRequiredEnhance;function requireEnhance(){if(hasRequiredEnhance)return Enhance;hasRequiredEnhance=1,Object.defineProperty(Enhance,"__esModule",{value:!0}),Enhance.Enhance=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators();function s(u,d,g,y,v){const w=g-d,T=v-y;if(w===0)return y+T/2;if(T===0)return y;let A=(u-d)/w;return A=T*A+y,A}const o=function(u){const d=u.data,g=d.length;let y=d[0],v=y,w,T=d[1],A=T,C,j=d[2],D=j,H;const ne=this.enhance();if(ne===0)return;for(let K=0;K<g;K+=4)w=d[K+0],w<y?y=w:w>v&&(v=w),C=d[K+1],C<T?T=C:C>A&&(A=C),H=d[K+2],H<j?j=H:H>D&&(D=H);v===y&&(v=255,y=0),A===T&&(A=255,T=0),D===j&&(D=255,j=0);let Y,U,ee,J,ie,se;if(ne>0)Y=v+ne*(255-v),U=y-ne*(y-0),ee=A+ne*(255-A),J=T-ne*(T-0),ie=D+ne*(255-D),se=j-ne*(j-0);else{const K=(v+y)*.5;Y=v+ne*(v-K),U=y+ne*(y-K);const te=(A+T)*.5;ee=A+ne*(A-te),J=T+ne*(T-te);const re=(D+j)*.5;ie=D+ne*(D-re),se=j+ne*(j-re)}for(let K=0;K<g;K+=4)d[K+0]=s(d[K+0],y,v,U,Y),d[K+1]=s(d[K+1],T,A,J,ee),d[K+2]=s(d[K+2],j,D,se,ie)};return Enhance.Enhance=o,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Enhance}var Grayscale={},hasRequiredGrayscale;function requireGrayscale(){if(hasRequiredGrayscale)return Grayscale;hasRequiredGrayscale=1,Object.defineProperty(Grayscale,"__esModule",{value:!0}),Grayscale.Grayscale=void 0;const t=function(e){const n=e.data,s=n.length;for(let o=0;o<s;o+=4){const u=.34*n[o]+.5*n[o+1]+.16*n[o+2];n[o]=u,n[o+1]=u,n[o+2]=u}};return Grayscale.Grayscale=t,Grayscale}var HSL={},hasRequiredHSL;function requireHSL(){if(hasRequiredHSL)return HSL;hasRequiredHSL=1,Object.defineProperty(HSL,"__esModule",{value:!0}),HSL.HSL=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators();t.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter);const s=function(o){const u=o.data,d=u.length,g=1,y=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,w=this.luminance()*127,T=g*y*Math.cos(v*Math.PI/180),A=g*y*Math.sin(v*Math.PI/180),C=.299*g+.701*T+.167*A,j=.587*g-.587*T+.33*A,D=.114*g-.114*T-.497*A,H=.299*g-.299*T-.328*A,ne=.587*g+.413*T+.035*A,Y=.114*g-.114*T+.293*A,U=.299*g-.3*T+1.25*A,ee=.587*g-.586*T-1.05*A,J=.114*g+.886*T-.2*A;let ie,se,K,te;for(let re=0;re<d;re+=4)ie=u[re+0],se=u[re+1],K=u[re+2],te=u[re+3],u[re+0]=C*ie+j*se+D*K+w,u[re+1]=H*ie+ne*se+Y*K+w,u[re+2]=U*ie+ee*se+J*K+w,u[re+3]=te};return HSL.HSL=s,HSL}var HSV={},hasRequiredHSV;function requireHSV(){if(hasRequiredHSV)return HSV;hasRequiredHSV=1,Object.defineProperty(HSV,"__esModule",{value:!0}),HSV.HSV=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators(),s=function(o){const u=o.data,d=u.length,g=Math.pow(2,this.value()),y=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,w=g*y*Math.cos(v*Math.PI/180),T=g*y*Math.sin(v*Math.PI/180),A=.299*g+.701*w+.167*T,C=.587*g-.587*w+.33*T,j=.114*g-.114*w-.497*T,D=.299*g-.299*w-.328*T,H=.587*g+.413*w+.035*T,ne=.114*g-.114*w+.293*T,Y=.299*g-.3*w+1.25*T,U=.587*g-.586*w-1.05*T,ee=.114*g+.886*w-.2*T;for(let J=0;J<d;J+=4){const ie=u[J+0],se=u[J+1],K=u[J+2],te=u[J+3];u[J+0]=A*ie+C*se+j*K,u[J+1]=D*ie+H*se+ne*K,u[J+2]=Y*ie+U*se+ee*K,u[J+3]=te}};return HSV.HSV=s,t.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),HSV}var Invert={},hasRequiredInvert;function requireInvert(){if(hasRequiredInvert)return Invert;hasRequiredInvert=1,Object.defineProperty(Invert,"__esModule",{value:!0}),Invert.Invert=void 0;const t=function(e){const n=e.data,s=n.length;for(let o=0;o<s;o+=4)n[o]=255-n[o],n[o+1]=255-n[o+1],n[o+2]=255-n[o+2]};return Invert.Invert=t,Invert}var Kaleidoscope={},hasRequiredKaleidoscope;function requireKaleidoscope(){if(hasRequiredKaleidoscope)return Kaleidoscope;hasRequiredKaleidoscope=1,Object.defineProperty(Kaleidoscope,"__esModule",{value:!0}),Kaleidoscope.Kaleidoscope=void 0;const t=requireFactory(),e=requireNode(),n=requireUtil(),s=requireValidators(),o=function(g,y,v){const w=g.data,T=y.data,A=g.width,C=g.height,j=v.polarCenterX||A/2,D=v.polarCenterY||C/2;let H=Math.sqrt(j*j+D*D),ne=A-j,Y=C-D;const U=Math.sqrt(ne*ne+Y*Y);H=U>H?U:H;const ee=C,J=A,ie=360/J*Math.PI/180;for(let se=0;se<J;se+=1){const K=Math.sin(se*ie),te=Math.cos(se*ie);for(let re=0;re<ee;re+=1){ne=Math.floor(j+H*re/ee*te),Y=Math.floor(D+H*re/ee*K);let ce=(Y*A+ne)*4;const le=w[ce+0],ue=w[ce+1],_e=w[ce+2],Ee=w[ce+3];ce=(se+re*A)*4,T[ce+0]=le,T[ce+1]=ue,T[ce+2]=_e,T[ce+3]=Ee}}},u=function(g,y,v){const w=g.data,T=y.data,A=g.width,C=g.height,j=v.polarCenterX||A/2,D=v.polarCenterY||C/2;let H=Math.sqrt(j*j+D*D),ne=A-j,Y=C-D;const U=Math.sqrt(ne*ne+Y*Y);H=U>H?U:H;const ee=C,J=A,ie=0;let se,K;for(ne=0;ne<A;ne+=1)for(Y=0;Y<C;Y+=1){const te=ne-j,re=Y-D,ce=Math.sqrt(te*te+re*re)*ee/H;let le=(Math.atan2(re,te)*180/Math.PI+360+ie)%360;le=le*J/360,se=Math.floor(le),K=Math.floor(ce);let ue=(K*A+se)*4;const _e=w[ue+0],Ee=w[ue+1],we=w[ue+2],de=w[ue+3];ue=(Y*A+ne)*4,T[ue+0]=_e,T[ue+1]=Ee,T[ue+2]=we,T[ue+3]=de}},d=function(g){const y=g.width,v=g.height;let w,T,A,C,j,D,H,ne,Y,U,ee=Math.round(this.kaleidoscopePower());const J=Math.round(this.kaleidoscopeAngle()),ie=Math.floor(y*(J%360)/360);if(ee<1)return;const se=n.Util.createCanvasElement();se.width=y,se.height=v;const K=se.getContext("2d").getImageData(0,0,y,v);n.Util.releaseCanvas(se),o(g,K,{polarCenterX:y/2,polarCenterY:v/2});let te=y/Math.pow(2,ee);for(;te<=8;)te=te*2,ee-=1;te=Math.ceil(te);let re=te,ce=0,le=re,ue=1;for(ie+te>y&&(ce=re,le=0,ue=-1),T=0;T<v;T+=1)for(w=ce;w!==le;w+=ue)A=Math.round(w+ie)%y,Y=(y*T+A)*4,j=K.data[Y+0],D=K.data[Y+1],H=K.data[Y+2],ne=K.data[Y+3],U=(y*T+w)*4,K.data[U+0]=j,K.data[U+1]=D,K.data[U+2]=H,K.data[U+3]=ne;for(T=0;T<v;T+=1)for(re=Math.floor(te),C=0;C<ee;C+=1){for(w=0;w<re+1;w+=1)Y=(y*T+w)*4,j=K.data[Y+0],D=K.data[Y+1],H=K.data[Y+2],ne=K.data[Y+3],U=(y*T+re*2-w-1)*4,K.data[U+0]=j,K.data[U+1]=D,K.data[U+2]=H,K.data[U+3]=ne;re*=2}u(K,g,{})};return Kaleidoscope.Kaleidoscope=d,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),Kaleidoscope}var Mask={},hasRequiredMask;function requireMask(){if(hasRequiredMask)return Mask;hasRequiredMask=1,Object.defineProperty(Mask,"__esModule",{value:!0}),Mask.Mask=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators();function s(A,C,j){let D=(j*A.width+C)*4;const H=[];return H.push(A.data[D++],A.data[D++],A.data[D++],A.data[D++]),H}function o(A,C){return Math.sqrt(Math.pow(A[0]-C[0],2)+Math.pow(A[1]-C[1],2)+Math.pow(A[2]-C[2],2))}function u(A){const C=[0,0,0];for(let j=0;j<A.length;j++)C[0]+=A[j][0],C[1]+=A[j][1],C[2]+=A[j][2];return C[0]/=A.length,C[1]/=A.length,C[2]/=A.length,C}function d(A,C){const j=s(A,0,0),D=s(A,A.width-1,0),H=s(A,0,A.height-1),ne=s(A,A.width-1,A.height-1),Y=C||10;if(o(j,D)<Y&&o(D,ne)<Y&&o(ne,H)<Y&&o(H,j)<Y){const U=u([D,j,ne,H]),ee=[];for(let J=0;J<A.width*A.height;J++){const ie=o(U,[A.data[J*4],A.data[J*4+1],A.data[J*4+2]]);ee[J]=ie<Y?0:255}return ee}}function g(A,C){for(let j=0;j<A.width*A.height;j++)A.data[4*j+3]=C[j]}function y(A,C,j){const D=[1,1,1,1,0,1,1,1,1],H=Math.round(Math.sqrt(D.length)),ne=Math.floor(H/2),Y=[];for(let U=0;U<j;U++)for(let ee=0;ee<C;ee++){const J=U*C+ee;let ie=0;for(let se=0;se<H;se++)for(let K=0;K<H;K++){const te=U+se-ne,re=ee+K-ne;if(te>=0&&te<j&&re>=0&&re<C){const ce=te*C+re,le=D[se*H+K];ie+=A[ce]*le}}Y[J]=ie===255*8?255:0}return Y}function v(A,C,j){const D=[1,1,1,1,1,1,1,1,1],H=Math.round(Math.sqrt(D.length)),ne=Math.floor(H/2),Y=[];for(let U=0;U<j;U++)for(let ee=0;ee<C;ee++){const J=U*C+ee;let ie=0;for(let se=0;se<H;se++)for(let K=0;K<H;K++){const te=U+se-ne,re=ee+K-ne;if(te>=0&&te<j&&re>=0&&re<C){const ce=te*C+re,le=D[se*H+K];ie+=A[ce]*le}}Y[J]=ie>=255*4?255:0}return Y}function w(A,C,j){const D=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],H=Math.round(Math.sqrt(D.length)),ne=Math.floor(H/2),Y=[];for(let U=0;U<j;U++)for(let ee=0;ee<C;ee++){const J=U*C+ee;let ie=0;for(let se=0;se<H;se++)for(let K=0;K<H;K++){const te=U+se-ne,re=ee+K-ne;if(te>=0&&te<j&&re>=0&&re<C){const ce=te*C+re,le=D[se*H+K];ie+=A[ce]*le}}Y[J]=ie}return Y}const T=function(A){const C=this.threshold();let j=d(A,C);return j&&(j=y(j,A.width,A.height),j=v(j,A.width,A.height),j=w(j,A.width,A.height),g(A,j)),A};return Mask.Mask=T,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Mask}var Noise={},hasRequiredNoise;function requireNoise(){if(hasRequiredNoise)return Noise;hasRequiredNoise=1,Object.defineProperty(Noise,"__esModule",{value:!0}),Noise.Noise=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators(),s=function(o){const u=this.noise()*255,d=o.data,g=d.length,y=u/2;for(let v=0;v<g;v+=4)d[v+0]+=y-2*y*Math.random(),d[v+1]+=y-2*y*Math.random(),d[v+2]+=y-2*y*Math.random()};return Noise.Noise=s,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Noise}var Pixelate={},hasRequiredPixelate;function requirePixelate(){if(hasRequiredPixelate)return Pixelate;hasRequiredPixelate=1,Object.defineProperty(Pixelate,"__esModule",{value:!0}),Pixelate.Pixelate=void 0;const t=requireFactory(),e=requireUtil(),n=requireNode(),s=requireValidators(),o=function(u){let d=Math.ceil(this.pixelSize()),g=u.width,y=u.height,v=Math.ceil(g/d),w=Math.ceil(y/d),T=u.data;if(d<=0){e.Util.error("pixelSize value can not be <= 0");return}for(let A=0;A<v;A+=1)for(let C=0;C<w;C+=1){let j=0,D=0,H=0,ne=0;const Y=A*d,U=Y+d,ee=C*d,J=ee+d;let ie=0;for(let se=Y;se<U;se+=1)if(!(se>=g))for(let K=ee;K<J;K+=1){if(K>=y)continue;const te=(g*K+se)*4;j+=T[te+0],D+=T[te+1],H+=T[te+2],ne+=T[te+3],ie+=1}j=j/ie,D=D/ie,H=H/ie,ne=ne/ie;for(let se=Y;se<U;se+=1)if(!(se>=g))for(let K=ee;K<J;K+=1){if(K>=y)continue;const te=(g*K+se)*4;T[te+0]=j,T[te+1]=D,T[te+2]=H,T[te+3]=ne}}};return Pixelate.Pixelate=o,t.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),Pixelate}var Posterize={},hasRequiredPosterize;function requirePosterize(){if(hasRequiredPosterize)return Posterize;hasRequiredPosterize=1,Object.defineProperty(Posterize,"__esModule",{value:!0}),Posterize.Posterize=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators(),s=function(o){const u=Math.round(this.levels()*254)+1,d=o.data,g=d.length,y=255/u;for(let v=0;v<g;v+=1)d[v]=Math.floor(d[v]/y)*y};return Posterize.Posterize=s,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Posterize}var RGB={},hasRequiredRGB;function requireRGB(){if(hasRequiredRGB)return RGB;hasRequiredRGB=1,Object.defineProperty(RGB,"__esModule",{value:!0}),RGB.RGB=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators(),s=function(o){const u=o.data,d=u.length,g=this.red(),y=this.green(),v=this.blue();for(let w=0;w<d;w+=4){const T=(.34*u[w]+.5*u[w+1]+.16*u[w+2])/255;u[w]=T*g,u[w+1]=T*y,u[w+2]=T*v,u[w+3]=u[w+3]}};return RGB.RGB=s,t.Factory.addGetterSetter(e.Node,"red",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)}),t.Factory.addGetterSetter(e.Node,"green",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)}),t.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,t.Factory.afterSetFilter),RGB}var RGBA={},hasRequiredRGBA;function requireRGBA(){if(hasRequiredRGBA)return RGBA;hasRequiredRGBA=1,Object.defineProperty(RGBA,"__esModule",{value:!0}),RGBA.RGBA=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators(),s=function(o){const u=o.data,d=u.length,g=this.red(),y=this.green(),v=this.blue(),w=this.alpha();for(let T=0;T<d;T+=4){const A=1-w;u[T]=g*w+u[T]*A,u[T+1]=y*w+u[T+1]*A,u[T+2]=v*w+u[T+2]*A}};return RGBA.RGBA=s,t.Factory.addGetterSetter(e.Node,"red",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)}),t.Factory.addGetterSetter(e.Node,"green",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)}),t.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(o){return this._filterUpToDate=!1,o>1?1:o<0?0:o}),RGBA}var Sepia={},hasRequiredSepia;function requireSepia(){if(hasRequiredSepia)return Sepia;hasRequiredSepia=1,Object.defineProperty(Sepia,"__esModule",{value:!0}),Sepia.Sepia=void 0;const t=function(e){const n=e.data,s=n.length;for(let o=0;o<s;o+=4){const u=n[o+0],d=n[o+1],g=n[o+2];n[o+0]=Math.min(255,u*.393+d*.769+g*.189),n[o+1]=Math.min(255,u*.349+d*.686+g*.168),n[o+2]=Math.min(255,u*.272+d*.534+g*.131)}};return Sepia.Sepia=t,Sepia}var Solarize={},hasRequiredSolarize;function requireSolarize(){if(hasRequiredSolarize)return Solarize;hasRequiredSolarize=1,Object.defineProperty(Solarize,"__esModule",{value:!0}),Solarize.Solarize=void 0;const t=function(e){const n=e.data,s=e.width,o=e.height,u=s*4;let d=o;do{const g=(d-1)*u;let y=s;do{const v=g+(y-1)*4;let w=n[v],T=n[v+1],A=n[v+2];w>127&&(w=255-w),T>127&&(T=255-T),A>127&&(A=255-A),n[v]=w,n[v+1]=T,n[v+2]=A}while(--y)}while(--d)};return Solarize.Solarize=t,Solarize}var Threshold={},hasRequiredThreshold;function requireThreshold(){if(hasRequiredThreshold)return Threshold;hasRequiredThreshold=1,Object.defineProperty(Threshold,"__esModule",{value:!0}),Threshold.Threshold=void 0;const t=requireFactory(),e=requireNode(),n=requireValidators(),s=function(o){const u=this.threshold()*255,d=o.data,g=d.length;for(let y=0;y<g;y+=1)d[y]=d[y]<u?0:255};return Threshold.Threshold=s,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Threshold}var hasRequired_FullInternals;function require_FullInternals(){if(hasRequired_FullInternals)return _FullInternals;hasRequired_FullInternals=1,Object.defineProperty(_FullInternals,"__esModule",{value:!0}),_FullInternals.Konva=void 0;const t=require_CoreInternals(),e=requireArc(),n=requireArrow(),s=requireCircle(),o=requireEllipse(),u=requireImage(),d=requireLabel(),g=requireLine(),y=requirePath(),v=requireRect(),w=requireRegularPolygon(),T=requireRing(),A=requireSprite(),C=requireStar(),j=requireText(),D=requireTextPath(),H=requireTransformer(),ne=requireWedge(),Y=requireBlur(),U=requireBrighten(),ee=requireContrast(),J=requireEmboss(),ie=requireEnhance(),se=requireGrayscale(),K=requireHSL(),te=requireHSV(),re=requireInvert(),ce=requireKaleidoscope(),le=requireMask(),ue=requireNoise(),_e=requirePixelate(),Ee=requirePosterize(),we=requireRGB(),de=requireRGBA(),me=requireSepia(),xe=requireSolarize(),pe=requireThreshold();return _FullInternals.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:n.Arrow,Circle:s.Circle,Ellipse:o.Ellipse,Image:u.Image,Label:d.Label,Tag:d.Tag,Line:g.Line,Path:y.Path,Rect:v.Rect,RegularPolygon:w.RegularPolygon,Ring:T.Ring,Sprite:A.Sprite,Star:C.Star,Text:j.Text,TextPath:D.TextPath,Transformer:H.Transformer,Wedge:ne.Wedge,Filters:{Blur:Y.Blur,Brighten:U.Brighten,Contrast:ee.Contrast,Emboss:J.Emboss,Enhance:ie.Enhance,Grayscale:se.Grayscale,HSL:K.HSL,HSV:te.HSV,Invert:re.Invert,Kaleidoscope:ce.Kaleidoscope,Mask:le.Mask,Noise:ue.Noise,Pixelate:_e.Pixelate,Posterize:Ee.Posterize,RGB:we.RGB,RGBA:de.RGBA,Sepia:me.Sepia,Solarize:xe.Solarize,Threshold:pe.Threshold}}),_FullInternals}var lib=lib$1.exports,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib$1.exports;hasRequiredLib=1,Object.defineProperty(lib,"__esModule",{value:!0});const t=require_FullInternals();return lib$1.exports=t.Konva,lib$1.exports}requireLib();var Core={exports:{}},hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=require_CoreInternals();Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const s=require_CoreInternals();t.exports=s.Konva}(Core,Core.exports)),Core.exports}var CoreExports=requireCore();const Konva=getDefaultExportFromCjs(CoreExports);var reactReconciler={exports:{}},reactReconciler_production={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactReconciler_production;function requireReactReconciler_production(){return hasRequiredReactReconciler_production||(hasRequiredReactReconciler_production=1,function(t){t.exports=function(e){function n(E,R,I,Z){return new jf(E,R,I,Z)}function s(){}function o(E){var R="https://react.dev/errors/"+E;if(1<arguments.length){R+="?args[]="+encodeURIComponent(arguments[1]);for(var I=2;I<arguments.length;I++)R+="&args[]="+encodeURIComponent(arguments[I])}return"Minified React error #"+E+"; visit "+R+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(E){var R=E,I=E;if(E.alternate)for(;R.return;)R=R.return;else{E=R;do R=E,(R.flags&4098)!==0&&(I=R.return),E=R.return;while(E)}return R.tag===3?I:null}function d(E){if(u(E)!==E)throw Error(o(188))}function g(E){var R=E.alternate;if(!R){if(R=u(E),R===null)throw Error(o(188));return R!==E?null:E}for(var I=E,Z=R;;){var oe=I.return;if(oe===null)break;var he=oe.alternate;if(he===null){if(Z=oe.return,Z!==null){I=Z;continue}break}if(oe.child===he.child){for(he=oe.child;he;){if(he===I)return d(oe),E;if(he===Z)return d(oe),R;he=he.sibling}throw Error(o(188))}if(I.return!==Z.return)I=oe,Z=he;else{for(var Pe=!1,Be=oe.child;Be;){if(Be===I){Pe=!0,I=oe,Z=he;break}if(Be===Z){Pe=!0,Z=oe,I=he;break}Be=Be.sibling}if(!Pe){for(Be=he.child;Be;){if(Be===I){Pe=!0,I=he,Z=oe;break}if(Be===Z){Pe=!0,Z=he,I=oe;break}Be=Be.sibling}if(!Pe)throw Error(o(189))}}if(I.alternate!==Z)throw Error(o(190))}if(I.tag!==3)throw Error(o(188));return I.stateNode.current===I?E:R}function y(E){var R=E.tag;if(R===5||R===26||R===27||R===6)return E;for(E=E.child;E!==null;){if(R=y(E),R!==null)return R;E=E.sibling}return null}function v(E){var R=E.tag;if(R===5||R===26||R===27||R===6)return E;for(E=E.child;E!==null;){if(E.tag!==4&&(R=v(E),R!==null))return R;E=E.sibling}return null}function w(E){return E===null||typeof E!="object"?null:(E=Fu&&E[Fu]||E["@@iterator"],typeof E=="function"?E:null)}function T(E){if(E==null)return null;if(typeof E=="function")return E.$$typeof===Hc?null:E.displayName||E.name||null;if(typeof E=="string")return E;switch(E){case ml:return"Fragment";case Bu:return"Profiler";case Fc:return"StrictMode";case Uc:return"Suspense";case qc:return"SuspenseList";case pl:return"Activity"}if(typeof E=="object")switch(E.$$typeof){case Ro:return"Portal";case Ha:return(E.displayName||"Context")+".Provider";case Ad:return(E._context.displayName||"Context")+".Consumer";case _a:var R=E.render;return E=E.displayName,E||(E=R.displayName||R.name||"",E=E!==""?"ForwardRef("+E+")":"ForwardRef"),E;case va:return R=E.displayName||null,R!==null?R:T(E.type)||"Memo";case Br:R=E._payload,E=E._init;try{return T(E(R))}catch{}}return null}function A(E){return{current:E}}function C(E){0>Wa||(E.current=Xa[Wa],Xa[Wa]=null,Wa--)}function j(E,R){Wa++,Xa[Wa]=E.current,E.current=R}function D(E){return E>>>=0,E===0?32:31-(sf(E)/Xu|0)|0}function H(E){var R=E&42;if(R!==0)return R;switch(E&-E){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return E&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return E}}function ne(E,R,I){var Z=E.pendingLanes;if(Z===0)return 0;var oe=0,he=E.suspendedLanes,Pe=E.pingedLanes;E=E.warmLanes;var Be=Z&134217727;return Be!==0?(Z=Be&~he,Z!==0?oe=H(Z):(Pe&=Be,Pe!==0?oe=H(Pe):I||(I=Be&~E,I!==0&&(oe=H(I))))):(Be=Z&~he,Be!==0?oe=H(Be):Pe!==0?oe=H(Pe):I||(I=Z&~E,I!==0&&(oe=H(I)))),oe===0?0:R!==0&&R!==oe&&(R&he)===0&&(he=oe&-oe,I=R&-R,he>=I||he===32&&(I&4194048)!==0)?R:oe}function Y(E,R){return(E.pendingLanes&~(E.suspendedLanes&~E.pingedLanes)&R)===0}function U(E,R){switch(E){case 1:case 2:case 4:case 8:case 64:return R+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return R+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ee(){var E=nu;return nu<<=1,(nu&4194048)===0&&(nu=256),E}function J(){var E=Ql;return Ql<<=1,(Ql&62914560)===0&&(Ql=4194304),E}function ie(E){for(var R=[],I=0;31>I;I++)R.push(E);return R}function se(E,R){E.pendingLanes|=R,R!==268435456&&(E.suspendedLanes=0,E.pingedLanes=0,E.warmLanes=0)}function K(E,R,I,Z,oe,he){var Pe=E.pendingLanes;E.pendingLanes=I,E.suspendedLanes=0,E.pingedLanes=0,E.warmLanes=0,E.expiredLanes&=I,E.entangledLanes&=I,E.errorRecoveryDisabledLanes&=I,E.shellSuspendCounter=0;var Be=E.entanglements,Ge=E.expirationTimes,Bt=E.hiddenUpdates;for(I=Pe&~I;0<I;){var Kt=31-ii(I),fn=1<<Kt;Be[Kt]=0,Ge[Kt]=-1;var pn=Bt[Kt];if(pn!==null)for(Bt[Kt]=null,Kt=0;Kt<pn.length;Kt++){var Vn=pn[Kt];Vn!==null&&(Vn.lane&=-536870913)}I&=~fn}Z!==0&&te(E,Z,0),he!==0&&oe===0&&E.tag!==0&&(E.suspendedLanes|=he&~(Pe&~R))}function te(E,R,I){E.pendingLanes|=R,E.suspendedLanes&=~R;var Z=31-ii(R);E.entangledLanes|=R,E.entanglements[Z]=E.entanglements[Z]|1073741824|I&4194090}function re(E,R){var I=E.entangledLanes|=R;for(E=E.entanglements;I;){var Z=31-ii(I),oe=1<<Z;oe&R|E[Z]&R&&(E[Z]|=R),I&=~oe}}function ce(E){switch(E){case 2:E=1;break;case 8:E=4;break;case 32:E=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:E=128;break;case 268435456:E=134217728;break;default:E=0}return E}function le(E){return E&=-E,2<E?8<E?(E&134217727)!==0?32:268435456:8:2}function ue(E){if(typeof lf=="function"&&cf(E),zr&&typeof zr.setStrictMode=="function")try{zr.setStrictMode(Co,E)}catch{}}function _e(E){if(Zu===void 0)try{throw Error()}catch(I){var R=I.stack.trim().match(/\n( *(at )?)/);Zu=R&&R[1]||"",Jd=-1<I.stack.indexOf(`
    at`)?" (<anonymous>)":-1<I.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zu+E+Jd}function Ee(E,R){if(!E||Ju)return"";Ju=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Z={DetermineComponentFrameRoot:function(){try{if(R){var fn=function(){throw Error()};if(Object.defineProperty(fn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fn,[])}catch(Vn){var pn=Vn}Reflect.construct(E,[],fn)}else{try{fn.call()}catch(Vn){pn=Vn}E.call(fn.prototype)}}else{try{throw Error()}catch(Vn){pn=Vn}(fn=E())&&typeof fn.catch=="function"&&fn.catch(function(){})}}catch(Vn){if(Vn&&pn&&typeof Vn.stack=="string")return[Vn.stack,pn.stack]}return[null,null]}};Z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var oe=Object.getOwnPropertyDescriptor(Z.DetermineComponentFrameRoot,"name");oe&&oe.configurable&&Object.defineProperty(Z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var he=Z.DetermineComponentFrameRoot(),Pe=he[0],Be=he[1];if(Pe&&Be){var Ge=Pe.split(`
`),Bt=Be.split(`
`);for(oe=Z=0;Z<Ge.length&&!Ge[Z].includes("DetermineComponentFrameRoot");)Z++;for(;oe<Bt.length&&!Bt[oe].includes("DetermineComponentFrameRoot");)oe++;if(Z===Ge.length||oe===Bt.length)for(Z=Ge.length-1,oe=Bt.length-1;1<=Z&&0<=oe&&Ge[Z]!==Bt[oe];)oe--;for(;1<=Z&&0<=oe;Z--,oe--)if(Ge[Z]!==Bt[oe]){if(Z!==1||oe!==1)do if(Z--,oe--,0>oe||Ge[Z]!==Bt[oe]){var Kt=`
`+Ge[Z].replace(" at new "," at ");return E.displayName&&Kt.includes("<anonymous>")&&(Kt=Kt.replace("<anonymous>",E.displayName)),Kt}while(1<=Z&&0<=oe);break}}}finally{Ju=!1,Error.prepareStackTrace=I}return(I=E?E.displayName||E.name:"")?_e(I):""}function we(E){switch(E.tag){case 26:case 27:case 5:return _e(E.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return Ee(E.type,!1);case 11:return Ee(E.type.render,!1);case 1:return Ee(E.type,!0);case 31:return _e("Activity");default:return""}}function de(E){try{var R="";do R+=we(E),E=E.return;while(E);return R}catch(I){return`
Error generating stack: `+I.message+`
`+I.stack}}function me(E,R){if(typeof E=="object"&&E!==null){var I=ed.get(E);return I!==void 0?I:(R={value:E,source:R,stack:de(R)},ed.set(E,R),R)}return{value:E,source:R,stack:de(R)}}function xe(E,R){Po[Io++]=Zl,Po[Io++]=ru,ru=E,Zl=R}function pe(E,R,I){Ur[ai++]=Yi,Ur[ai++]=wa,Ur[ai++]=No,No=E;var Z=Yi;E=wa;var oe=32-ii(Z)-1;Z&=~(1<<oe),I+=1;var he=32-ii(R)+oe;if(30<he){var Pe=oe-oe%5;he=(Z&(1<<Pe)-1).toString(32),Z>>=Pe,oe-=Pe,Yi=1<<32-ii(R)+oe|I<<oe|Z,wa=he+E}else Yi=1<<he|I<<oe|Z,wa=E}function ve(E){E.return!==null&&(xe(E,1),pe(E,1,0))}function Oe(E){for(;E===ru;)ru=Po[--Io],Po[Io]=null,Zl=Po[--Io],Po[Io]=null;for(;E===No;)No=Ur[--ai],Ur[ai]=null,wa=Ur[--ai],Ur[ai]=null,Yi=Ur[--ai],Ur[ai]=null}function Te(E,R){j(jo,R),j(_l,E),j(Os,null),E=Pd(R),C(Os),j(Os,E)}function Le(){C(Os),C(_l),C(jo)}function Me(E){E.memoizedState!==null&&j(iu,E);var R=Os.current,I=Id(R,E.type);R!==I&&(j(_l,E),j(Os,I))}function Ce(E){_l.current===E&&(C(Os),C(_l)),iu.current===E&&(C(iu),$a?Ea._currentValue=ri:Ea._currentValue2=ri)}function be(E){var R=Error(o(418,""));throw Ie(me(R,E)),eh}function Ve(E,R){if(!ni)throw Error(o(175));Zh(E.stateNode,E.type,E.memoizedProps,R,E)||be(E)}function $e(E){for(zs=E.return;zs;)switch(zs.tag){case 5:case 13:ds=!1;return;case 27:case 3:ds=!0;return;default:zs=zs.return}}function Fe(E){if(!ni||E!==zs)return!1;if(!rs)return $e(E),rs=!0,!1;var R=E.tag;if(Kn?R!==3&&R!==27&&(R!==5||Yd(E.type)&&!Ga(E.type,E.memoizedProps))&&sr&&be(E):R!==3&&(R!==5||Yd(E.type)&&!Ga(E.type,E.memoizedProps))&&sr&&be(E),$e(E),R===13){if(!ni)throw Error(o(316));if(E=E.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));sr=$u(E)}else sr=Kn&&R===27?Hd(E.type,sr):zs?Yh(E.stateNode):null;return!0}function je(){ni&&(sr=zs=null,rs=!1)}function De(){var E=Ki;return E!==null&&(Dr===null?Dr=E:Dr.push.apply(Dr,E),Ki=null),E}function Ie(E){Ki===null?Ki=[E]:Ki.push(E)}function Re(E,R){return E===R&&(E!==0||1/E===1/R)||E!==E&&R!==R}function Ne(E,R,I){$a?(j(au,R._currentValue),R._currentValue=I):(j(au,R._currentValue2),R._currentValue2=I)}function Ue(E){var R=au.current;$a?E._currentValue=R:E._currentValue2=R,C(au)}function pt(E,R,I){for(;E!==null;){var Z=E.alternate;if((E.childLanes&R)!==R?(E.childLanes|=R,Z!==null&&(Z.childLanes|=R)):Z!==null&&(Z.childLanes&R)!==R&&(Z.childLanes|=R),E===I)break;E=E.return}}function Ze(E,R,I,Z){var oe=E.child;for(oe!==null&&(oe.return=E);oe!==null;){var he=oe.dependencies;if(he!==null){var Pe=oe.child;he=he.firstContext;e:for(;he!==null;){var Be=he;he=oe;for(var Ge=0;Ge<R.length;Ge++)if(Be.context===R[Ge]){he.lanes|=I,Be=he.alternate,Be!==null&&(Be.lanes|=I),pt(he.return,I,E),Z||(Pe=null);break e}he=Be.next}}else if(oe.tag===18){if(Pe=oe.return,Pe===null)throw Error(o(341));Pe.lanes|=I,he=Pe.alternate,he!==null&&(he.lanes|=I),pt(Pe,I,E),Pe=null}else Pe=oe.child;if(Pe!==null)Pe.return=oe;else for(Pe=oe;Pe!==null;){if(Pe===E){Pe=null;break}if(oe=Pe.sibling,oe!==null){oe.return=Pe.return,Pe=oe;break}Pe=Pe.return}oe=Pe}}function mn(E,R,I,Z){E=null;for(var oe=R,he=!1;oe!==null;){if(!he){if((oe.flags&524288)!==0)he=!0;else if((oe.flags&262144)!==0)break}if(oe.tag===10){var Pe=oe.alternate;if(Pe===null)throw Error(o(387));if(Pe=Pe.memoizedProps,Pe!==null){var Be=oe.type;yi(oe.pendingProps.value,Pe.value)||(E!==null?E.push(Be):E=[Be])}}else if(oe===iu.current){if(Pe=oe.alternate,Pe===null)throw Error(o(387));Pe.memoizedState.memoizedState!==oe.memoizedState.memoizedState&&(E!==null?E.push(Ea):E=[Ea])}oe=oe.return}E!==null&&Ze(R,E,I,Z),R.flags|=262144}function Ut(E){for(E=E.firstContext;E!==null;){var R=E.context;if(!yi($a?R._currentValue:R._currentValue2,E.memoizedValue))return!0;E=E.next}return!1}function Lt(E){Xi=E,Ir=null,E=E.dependencies,E!==null&&(E.firstContext=null)}function Dt(E){return Ke(Xi,E)}function Gt(E,R){return Xi===null&&Lt(E),Ke(E,R)}function Ke(E,R){var I=$a?R._currentValue:R._currentValue2;if(R={context:R,memoizedValue:I,next:null},Ir===null){if(E===null)throw Error(o(308));Ir=R,E.dependencies={lanes:0,firstContext:R},E.flags|=524288}else Ir=Ir.next=R;return I}function rt(){return{controller:new uf,data:new Map,refCount:0}}function Ct(E){E.refCount--,E.refCount===0&&df(ou,function(){E.controller.abort()})}function tt(E){E!==Do&&E.next===null&&(Do===null?lu=Do=E:Do=Do.next=E),Jl=!0,td||(td=!0,Hn())}function Et(E,R){if(!cu&&Jl){cu=!0;do for(var I=!1,Z=lu;Z!==null;){if(E!==0){var oe=Z.pendingLanes;if(oe===0)var he=0;else{var Pe=Z.suspendedLanes,Be=Z.pingedLanes;he=(1<<31-ii(42|E)+1)-1,he&=oe&~(Pe&~Be),he=he&201326741?he&201326741|1:he?he|2:0}he!==0&&(I=!0,Sn(Z,he))}else he=qn,he=ne(Z,Z===as?he:0,Z.cancelPendingCommit!==null||Z.timeoutHandle!==Di),(he&3)===0||Y(Z,he)||(I=!0,Sn(Z,he));Z=Z.next}while(I);cu=!1}}function un(){hn()}function hn(){Jl=td=!1;var E=0;Qa!==0&&(jd()&&(E=Qa),Qa=0);for(var R=bs(),I=null,Z=lu;Z!==null;){var oe=Z.next,he=xn(Z,R);he===0?(Z.next=null,I===null?lu=oe:I.next=oe,oe===null&&(Do=I)):(I=Z,(E!==0||(he&3)!==0)&&(Jl=!0)),Z=oe}Et(E)}function xn(E,R){for(var I=E.suspendedLanes,Z=E.pingedLanes,oe=E.expirationTimes,he=E.pendingLanes&-62914561;0<he;){var Pe=31-ii(he),Be=1<<Pe,Ge=oe[Pe];Ge===-1?((Be&I)===0||(Be&Z)!==0)&&(oe[Pe]=U(Be,R)):Ge<=R&&(E.expiredLanes|=Be),he&=~Be}if(R=as,I=qn,I=ne(E,E===R?I:0,E.cancelPendingCommit!==null||E.timeoutHandle!==Di),Z=E.callbackNode,I===0||E===R&&(ps===2||ps===9)||E.cancelPendingCommit!==null)return Z!==null&&Z!==null&&Wu(Z),E.callbackNode=null,E.callbackPriority=0;if((I&3)===0||Y(E,I)){if(R=I&-I,R===E.callbackPriority)return R;switch(Z!==null&&Wu(Z),le(I)){case 2:case 8:I=af;break;case 32:I=Qu;break;case 268435456:I=of;break;default:I=Qu}return Z=Dn.bind(null,E),I=su(I,Z),E.callbackPriority=R,E.callbackNode=I,R}return Z!==null&&Z!==null&&Wu(Z),E.callbackPriority=2,E.callbackNode=null,2}function Dn(E,R){if(dr!==0&&dr!==5)return E.callbackNode=null,E.callbackPriority=0,null;var I=E.callbackNode;if(ji()&&E.callbackNode!==I)return null;var Z=qn;return Z=ne(E,E===as?Z:0,E.cancelPendingCommit!==null||E.timeoutHandle!==Di),Z===0?null:(Lc(E,Z,R),xn(E,bs()),E.callbackNode!=null&&E.callbackNode===I?Dn.bind(null,E):null)}function Sn(E,R){if(ji())return null;Lc(E,R,!0)}function Hn(){Md?Ah(function(){(Rn&6)!==0?su(xr,un):hn()}):su(xr,un)}function Pn(){return Qa===0&&(Qa=ee()),Qa}function Gn(E,R){if(ec===null){var I=ec=[];Wi=0,As=Pn(),Oo={status:"pending",value:void 0,then:function(Z){I.push(Z)}}}return Wi++,R.then(Xn,Xn),R}function Xn(){if(--Wi===0&&ec!==null){Oo!==null&&(Oo.status="fulfilled");var E=ec;ec=null,As=0,Oo=null;for(var R=0;R<E.length;R++)(0,E[R])()}}function kn(E,R){var I=[],Z={status:"pending",value:null,reason:null,then:function(oe){I.push(oe)}};return E.then(function(){Z.status="fulfilled",Z.value=R;for(var oe=0;oe<I.length;oe++)(0,I[oe])(R)},function(oe){for(Z.status="rejected",Z.reason=oe,oe=0;oe<I.length;oe++)(0,I[oe])(void 0)}),Z}function Ms(){var E=ks.current;return E!==null?E:as.pooledCache}function Zs(E,R){R===null?j(ks,ks.current):j(ks,R.pool)}function fr(){var E=Ms();return E===null?null:{parent:$a?ms._currentValue:ms._currentValue2,pool:E}}function On(E,R){if(yi(E,R))return!0;if(typeof E!="object"||E===null||typeof R!="object"||R===null)return!1;var I=Object.keys(E),Z=Object.keys(R);if(I.length!==Z.length)return!1;for(Z=0;Z<I.length;Z++){var oe=I[Z];if(!Lf.call(R,oe)||!yi(E[oe],R[oe]))return!1}return!0}function vn(E){return E=E.status,E==="fulfilled"||E==="rejected"}function Ln(){}function gs(E,R,I){switch(I=E[I],I===void 0?E.push(R):I!==R&&(R.then(Ln,Ln),R=I),R.status){case"fulfilled":return R.value;case"rejected":throw E=R.reason,js(E),E;default:if(typeof R.status=="string")R.then(Ln,Ln);else{if(E=as,E!==null&&100<E.shellSuspendCounter)throw Error(o(482));E=R,E.status="pending",E.then(function(Z){if(R.status==="pending"){var oe=R;oe.status="fulfilled",oe.value=Z}},function(Z){if(R.status==="pending"){var oe=R;oe.status="rejected",oe.reason=Z}})}switch(R.status){case"fulfilled":return R.value;case"rejected":throw E=R.reason,js(E),E}throw oi=R,tc}}function cs(){if(oi===null)throw Error(o(459));var E=oi;return oi=null,E}function js(E){if(E===tc||E===ws)throw Error(o(483))}function Ls(){for(var E=vl,R=nh=vl=0;R<E;){var I=xi[R];xi[R++]=null;var Z=xi[R];xi[R++]=null;var oe=xi[R];xi[R++]=null;var he=xi[R];if(xi[R++]=null,Z!==null&&oe!==null){var Pe=Z.pending;Pe===null?oe.next=oe:(oe.next=Pe.next,Pe.next=oe),Z.pending=oe}he!==0&&es(I,oe,he)}}function Ks(E,R,I,Z){xi[vl++]=E,xi[vl++]=R,xi[vl++]=I,xi[vl++]=Z,nh|=Z,E.lanes|=Z,E=E.alternate,E!==null&&(E.lanes|=Z)}function wn(E,R,I,Z){return Ks(E,R,I,Z),Rs(E)}function $n(E,R){return Ks(E,null,null,R),Rs(E)}function es(E,R,I){E.lanes|=I;var Z=E.alternate;Z!==null&&(Z.lanes|=I);for(var oe=!1,he=E.return;he!==null;)he.childLanes|=I,Z=he.alternate,Z!==null&&(Z.childLanes|=I),he.tag===22&&(E=he.stateNode,E===null||E._visibility&1||(oe=!0)),E=he,he=he.return;return E.tag===3?(he=E.stateNode,oe&&R!==null&&(oe=31-ii(I),E=he.hiddenUpdates,Z=E[oe],Z===null?E[oe]=[R]:Z.push(R),R.lane=I|536870912),he):null}function Rs(E){if(50<Ho)throw Ho=0,ld=null,Error(o(185));for(var R=E.return;R!==null;)E=R,R=E.return;return E.tag===3?E.stateNode:null}function Mr(E){E.updateQueue={baseState:E.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qs(E,R){E=E.updateQueue,R.updateQueue===E&&(R.updateQueue={baseState:E.baseState,firstBaseUpdate:E.firstBaseUpdate,lastBaseUpdate:E.lastBaseUpdate,shared:E.shared,callbacks:null})}function Ts(E){return{lane:E,tag:0,payload:null,callback:null,next:null}}function Hs(E,R,I){var Z=E.updateQueue;if(Z===null)return null;if(Z=Z.shared,(Rn&2)!==0){var oe=Z.pending;return oe===null?R.next=R:(R.next=oe.next,oe.next=R),Z.pending=R,R=Rs(E),es(E,null,I),R}return Ks(E,Z,R,I),Rs(E)}function Vr(E,R,I){if(R=R.updateQueue,R!==null&&(R=R.shared,(I&4194048)!==0)){var Z=R.lanes;Z&=E.pendingLanes,I|=Z,R.lanes=I,re(E,I)}}function Ji(E,R){var I=E.updateQueue,Z=E.alternate;if(Z!==null&&(Z=Z.updateQueue,I===Z)){var oe=null,he=null;if(I=I.firstBaseUpdate,I!==null){do{var Pe={lane:I.lane,tag:I.tag,payload:I.payload,callback:null,next:null};he===null?oe=he=Pe:he=he.next=Pe,I=I.next}while(I!==null);he===null?oe=he=R:he=he.next=R}else oe=he=R;I={baseState:Z.baseState,firstBaseUpdate:oe,lastBaseUpdate:he,shared:Z.shared,callbacks:Z.callbacks},E.updateQueue=I;return}E=I.lastBaseUpdate,E===null?I.firstBaseUpdate=R:E.next=R,I.lastBaseUpdate=R}function li(){if(qr){var E=Oo;if(E!==null)throw E}}function Yr(E,R,I,Z){qr=!1;var oe=E.updateQueue;Sa=!1;var he=oe.firstBaseUpdate,Pe=oe.lastBaseUpdate,Be=oe.shared.pending;if(Be!==null){oe.shared.pending=null;var Ge=Be,Bt=Ge.next;Ge.next=null,Pe===null?he=Bt:Pe.next=Bt,Pe=Ge;var Kt=E.alternate;Kt!==null&&(Kt=Kt.updateQueue,Be=Kt.lastBaseUpdate,Be!==Pe&&(Be===null?Kt.firstBaseUpdate=Bt:Be.next=Bt,Kt.lastBaseUpdate=Ge))}if(he!==null){var fn=oe.baseState;Pe=0,Kt=Bt=Ge=null,Be=he;do{var pn=Be.lane&-536870913,Vn=pn!==Be.lane;if(Vn?(qn&pn)===pn:(Z&pn)===pn){pn!==0&&pn===As&&(qr=!0),Kt!==null&&(Kt=Kt.next={lane:0,tag:Be.tag,payload:Be.payload,callback:null,next:null});e:{var Vi=E,Go=Be;pn=R;var ki=I;switch(Go.tag){case 1:if(Vi=Go.payload,typeof Vi=="function"){fn=Vi.call(ki,fn,pn);break e}fn=Vi;break e;case 3:Vi.flags=Vi.flags&-65537|128;case 0:if(Vi=Go.payload,pn=typeof Vi=="function"?Vi.call(ki,fn,pn):Vi,pn==null)break e;fn=hl({},fn,pn);break e;case 2:Sa=!0}}pn=Be.callback,pn!==null&&(E.flags|=64,Vn&&(E.flags|=8192),Vn=oe.callbacks,Vn===null?oe.callbacks=[pn]:Vn.push(pn))}else Vn={lane:pn,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},Kt===null?(Bt=Kt=Vn,Ge=fn):Kt=Kt.next=Vn,Pe|=pn;if(Be=Be.next,Be===null){if(Be=oe.shared.pending,Be===null)break;Vn=Be,Be=Vn.next,Vn.next=null,oe.lastBaseUpdate=Vn,oe.shared.pending=null}}while(!0);Kt===null&&(Ge=fn),oe.baseState=Ge,oe.firstBaseUpdate=Bt,oe.lastBaseUpdate=Kt,he===null&&(oe.shared.lanes=0),ar|=Pe,E.lanes=Pe,E.memoizedState=fn}}function Bi(E,R){if(typeof E!="function")throw Error(o(191,E));E.call(R)}function Rr(E,R){var I=E.callbacks;if(I!==null)for(E.callbacks=null,E=0;E<I.length;E++)Bi(I[E],R)}function Gs(E,R){E=Qs,j(uu,E),j(Nr,R),Qs=E|R.baseLanes}function $o(){j(uu,Qs),j(Nr,Nr.current)}function ro(){Qs=uu.current,C(Nr),C(uu)}function hs(){throw Error(o(321))}function Fi(E,R){if(R===null)return!1;for(var I=0;I<R.length&&I<E.length;I++)if(!yi(E[I],R[I]))return!1;return!0}function Sl(E,R,I,Z,oe,he){return rr=he,Bn=R,R.memoizedState=null,R.updateQueue=null,R.lanes=0,En.H=E===null||E.memoizedState===null?bl:sh,Za=!1,he=I(Z,oe),Za=!1,Mo&&(he=io(R,I,Z,oe)),gc(E),he}function gc(E){En.H=Vo;var R=ts!==null&&ts.next!==null;if(rr=0,Cs=ts=Bn=null,Qi=!1,nc=0,Zi=null,R)throw Error(o(300));E===null||Nn||(E=E.dependencies,E!==null&&Ut(E)&&(Nn=!0))}function io(E,R,I,Z){Bn=E;var oe=0;do{if(Mo&&(Zi=null),nc=0,Mo=!1,25<=oe)throw Error(o(301));if(oe+=1,Cs=ts=null,E.updateQueue!=null){var he=E.updateQueue;he.lastEffect=null,he.events=null,he.stores=null,he.memoCache!=null&&(he.memoCache.index=0)}En.H=hf,he=R(I,Z)}while(Mo);return he}function pu(){var E=En.H,R=E.useState()[0];return R=typeof R.then=="function"?ta(R):R,E=E.useState()[0],(ts!==null?ts.memoizedState:null)!==E&&(Bn.flags|=1024),R}function ea(){var E=_i!==0;return _i=0,E}function Ei(E,R,I){R.updateQueue=E.updateQueue,R.flags&=-2053,E.lanes&=~I}function or(E){if(Qi){for(E=E.memoizedState;E!==null;){var R=E.queue;R!==null&&(R.pending=null),E=E.next}Qi=!1}rr=0,Cs=ts=Bn=null,Mo=!1,nc=_i=0,Zi=null}function Js(){var E={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cs===null?Bn.memoizedState=Cs=E:Cs=Cs.next=E,Cs}function Bs(){if(ts===null){var E=Bn.alternate;E=E!==null?E.memoizedState:null}else E=ts.next;var R=Cs===null?Bn.memoizedState:Cs.next;if(R!==null)Cs=R,ts=E;else{if(E===null)throw Bn.alternate===null?Error(o(467)):Error(o(310));ts=E,E={memoizedState:ts.memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},Cs===null?Bn.memoizedState=Cs=E:Cs=Cs.next=E}return Cs}function zi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ta(E){var R=nc;return nc+=1,Zi===null&&(Zi=[]),E=gs(Zi,E,R),R=Bn,(Cs===null?R.memoizedState:Cs.next)===null&&(R=R.alternate,En.H=R===null||R.memoizedState===null?bl:sh),E}function ja(E){if(E!==null&&typeof E=="object"){if(typeof E.then=="function")return ta(E);if(E.$$typeof===Ha)return Dt(E)}throw Error(o(438,String(E)))}function Yo(E){var R=null,I=Bn.updateQueue;if(I!==null&&(R=I.memoCache),R==null){var Z=Bn.alternate;Z!==null&&(Z=Z.updateQueue,Z!==null&&(Z=Z.memoCache,Z!=null&&(R={data:Z.data.map(function(oe){return oe.slice()}),index:0})))}if(R==null&&(R={data:[],index:0}),I===null&&(I=zi(),Bn.updateQueue=I),I.memoCache=R,I=R.data[R.index],I===void 0)for(I=R.data[R.index]=Array(E),Z=0;Z<E;Z++)I[Z]=Cd;return R.index++,I}function Kr(E,R){return typeof R=="function"?R(E):R}function mr(E){var R=Bs();return Ko(R,ts,E)}function Ko(E,R,I){var Z=E.queue;if(Z===null)throw Error(o(311));Z.lastRenderedReducer=I;var oe=E.baseQueue,he=Z.pending;if(he!==null){if(oe!==null){var Pe=oe.next;oe.next=he.next,he.next=Pe}R.baseQueue=oe=he,Z.pending=null}if(he=E.baseState,oe===null)E.memoizedState=he;else{R=oe.next;var Be=Pe=null,Ge=null,Bt=R,Kt=!1;do{var fn=Bt.lane&-536870913;if(fn!==Bt.lane?(qn&fn)===fn:(rr&fn)===fn){var pn=Bt.revertLane;if(pn===0)Ge!==null&&(Ge=Ge.next={lane:0,revertLane:0,action:Bt.action,hasEagerState:Bt.hasEagerState,eagerState:Bt.eagerState,next:null}),fn===As&&(Kt=!0);else if((rr&pn)===pn){Bt=Bt.next,pn===As&&(Kt=!0);continue}else fn={lane:0,revertLane:Bt.revertLane,action:Bt.action,hasEagerState:Bt.hasEagerState,eagerState:Bt.eagerState,next:null},Ge===null?(Be=Ge=fn,Pe=he):Ge=Ge.next=fn,Bn.lanes|=pn,ar|=pn;fn=Bt.action,Za&&I(he,fn),he=Bt.hasEagerState?Bt.eagerState:I(he,fn)}else pn={lane:fn,revertLane:Bt.revertLane,action:Bt.action,hasEagerState:Bt.hasEagerState,eagerState:Bt.eagerState,next:null},Ge===null?(Be=Ge=pn,Pe=he):Ge=Ge.next=pn,Bn.lanes|=fn,ar|=fn;Bt=Bt.next}while(Bt!==null&&Bt!==R);if(Ge===null?Pe=he:Ge.next=Be,!yi(he,E.memoizedState)&&(Nn=!0,Kt&&(I=Oo,I!==null)))throw I;E.memoizedState=he,E.baseState=Pe,E.baseQueue=Ge,Z.lastRenderedState=he}return oe===null&&(Z.lanes=0),[E.memoizedState,Z.dispatch]}function yc(E){var R=Bs(),I=R.queue;if(I===null)throw Error(o(311));I.lastRenderedReducer=E;var Z=I.dispatch,oe=I.pending,he=R.memoizedState;if(oe!==null){I.pending=null;var Pe=oe=oe.next;do he=E(he,Pe.action),Pe=Pe.next;while(Pe!==oe);yi(he,R.memoizedState)||(Nn=!0),R.memoizedState=he,R.baseQueue===null&&(R.baseState=he),I.lastRenderedState=he}return[he,Z]}function Xo(E,R,I){var Z=Bn,oe=Bs(),he=rs;if(he){if(I===void 0)throw Error(o(407));I=I()}else I=R();var Pe=!yi((ts||oe).memoizedState,I);Pe&&(oe.memoizedState=I,Nn=!0),oe=oe.queue;var Be=gu.bind(null,Z,oe,E);if(Wr(2048,8,Be,[E]),oe.getSnapshot!==R||Pe||Cs!==null&&Cs.memoizedState.tag&1){if(Z.flags|=2048,_r(9,Ri(),ao.bind(null,Z,oe,I,R),null),as===null)throw Error(o(349));he||(rr&124)!==0||Tl(Z,R,I)}return I}function Tl(E,R,I){E.flags|=16384,E={getSnapshot:R,value:I},R=Bn.updateQueue,R===null?(R=zi(),Bn.updateQueue=R,R.stores=[E]):(I=R.stores,I===null?R.stores=[E]:I.push(E))}function ao(E,R,I,Z){R.value=I,R.getSnapshot=Z,Xs(R)&&Xr(E)}function gu(E,R,I){return I(function(){Xs(R)&&Xr(E)})}function Xs(E){var R=E.getSnapshot;E=E.value;try{var I=R();return!yi(E,I)}catch{return!0}}function Xr(E){var R=$n(E,2);R!==null&&Ar(R,E,2)}function Da(E){var R=Js();if(typeof E=="function"){var I=E;if(E=I(),Za){ue(!0);try{I()}finally{ue(!1)}}}return R.memoizedState=R.baseState=E,R.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:E},R}function Oa(E,R,I,Z){return E.baseState=I,Ko(E,ts,typeof Z=="function"?Z:Kr)}function Ma(E,R,I,Z,oe){if(kr(E))throw Error(o(485));if(E=R.action,E!==null){var he={payload:oe,action:E,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Pe){he.listeners.push(Pe)}};En.T!==null?I(!0):he.isTransition=!1,Z(he),I=R.pending,I===null?(he.next=R.pending=he,xs(R,he)):(he.next=I.next,R.pending=I.next=he)}}function xs(E,R){var I=R.action,Z=R.payload,oe=E.state;if(R.isTransition){var he=En.T,Pe={};En.T=Pe;try{var Be=I(oe,Z),Ge=En.S;Ge!==null&&Ge(Pe,Be),oo(E,R,Be)}catch(Bt){Va(E,R,Bt)}finally{En.T=he}}else try{he=I(oe,Z),oo(E,R,he)}catch(Bt){Va(E,R,Bt)}}function oo(E,R,I){I!==null&&typeof I=="object"&&typeof I.then=="function"?I.then(function(Z){ci(E,R,Z)},function(Z){return Va(E,R,Z)}):ci(E,R,I)}function ci(E,R,I){R.status="fulfilled",R.value=I,xc(R),E.state=I,R=E.pending,R!==null&&(I=R.next,I===R?E.pending=null:(I=I.next,R.next=I,xs(E,I)))}function Va(E,R,I){var Z=E.pending;if(E.pending=null,Z!==null){Z=Z.next;do R.status="rejected",R.reason=I,xc(R),R=R.next;while(R!==Z)}E.action=null}function xc(E){E=E.listeners;for(var R=0;R<E.length;R++)(0,E[R])()}function Al(E,R){return R}function Cl(E,R){if(rs){var I=as.formState;if(I!==null){e:{var Z=Bn;if(rs){if(sr){var oe=Gh(sr,ds);if(oe){sr=Yh(oe),Z=$h(oe);break e}}be(Z)}Z=!1}Z&&(R=I[0])}}I=Js(),I.memoizedState=I.baseState=R,Z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:R},I.queue=Z,I=Qo.bind(null,Bn,Z),Z.dispatch=I,Z=Da(!1);var he=ka.bind(null,Bn,!1,Z.queue);return Z=Js(),oe={state:R,dispatch:null,action:E,pending:null},Z.queue=oe,I=Ma.bind(null,Bn,oe,he,I),oe.dispatch=I,Z.memoizedState=E,[R,I,!1]}function yu(E){var R=Bs();return xu(R,ts,E)}function xu(E,R,I){if(R=Ko(E,R,Al)[0],E=mr(Kr)[0],typeof R=="object"&&R!==null&&typeof R.then=="function")try{var Z=ta(R)}catch(Pe){throw Pe===tc?ws:Pe}else Z=R;R=Bs();var oe=R.queue,he=oe.dispatch;return I!==R.memoizedState&&(Bn.flags|=2048,_r(9,Ri(),Pl.bind(null,oe,I),null)),[Z,he,E]}function Pl(E,R){E.action=R}function na(E){var R=Bs(),I=ts;if(I!==null)return xu(R,I,E);Bs(),R=R.memoizedState,I=Bs();var Z=I.queue.dispatch;return I.memoizedState=E,[R,Z,!1]}function _r(E,R,I,Z){return E={tag:E,create:I,deps:Z,inst:R,next:null},R=Bn.updateQueue,R===null&&(R=zi(),Bn.updateQueue=R),I=R.lastEffect,I===null?R.lastEffect=E.next=E:(Z=I.next,I.next=E,E.next=Z,R.lastEffect=E),E}function Ri(){return{destroy:void 0,resource:void 0}}function sa(){return Bs().memoizedState}function lo(E,R,I,Z){var oe=Js();Z=Z===void 0?null:Z,Bn.flags|=E,oe.memoizedState=_r(1|R,Ri(),I,Z)}function Wr(E,R,I,Z){var oe=Bs();Z=Z===void 0?null:Z;var he=oe.memoizedState.inst;ts!==null&&Z!==null&&Fi(Z,ts.memoizedState.deps)?oe.memoizedState=_r(R,he,I,Z):(Bn.flags|=E,oe.memoizedState=_r(1|R,he,I,Z))}function _c(E,R){lo(8390656,8,E,R)}function co(E,R){Wr(2048,8,E,R)}function wi(E,R){return Wr(4,2,E,R)}function ui(E,R){return Wr(4,4,E,R)}function uo(E,R){if(typeof R=="function"){E=E();var I=R(E);return function(){typeof I=="function"?I():R(null)}}if(R!=null)return E=E(),R.current=E,function(){R.current=null}}function Ui(E,R,I){I=I!=null?I.concat([E]):null,Wr(4,4,uo.bind(null,R,E),I)}function ra(){}function ia(E,R){var I=Bs();R=R===void 0?null:R;var Z=I.memoizedState;return R!==null&&Fi(R,Z[1])?Z[0]:(I.memoizedState=[E,R],E)}function Il(E,R){var I=Bs();R=R===void 0?null:R;var Z=I.memoizedState;if(R!==null&&Fi(R,Z[1]))return Z[0];if(Z=E(),Za){ue(!0);try{E()}finally{ue(!1)}}return I.memoizedState=[Z,R],Z}function Si(E,R,I){return I===void 0||(rr&1073741824)!==0?E.memoizedState=R:(E.memoizedState=I,E=al(),Bn.lanes|=E,ar|=E,I)}function qi(E,R,I,Z){return yi(I,R)?I:Nr.current!==null?(E=Si(E,I,Z),yi(E,R)||(Nn=!0),E):(rr&42)===0?(Nn=!0,E.memoizedState=I):(E=al(),Bn.lanes|=E,ar|=E,R)}function Nl(E,R,I,Z,oe){var he=$i();yr(he!==0&&8>he?he:8);var Pe=En.T,Be={};En.T=Be,ka(E,!1,R,I);try{var Ge=oe(),Bt=En.S;if(Bt!==null&&Bt(Be,Ge),Ge!==null&&typeof Ge=="object"&&typeof Ge.then=="function"){var Kt=kn(Ge,Z);Qr(E,R,Kt,gr(E))}else Qr(E,R,Z,gr(E))}catch(fn){Qr(E,R,{then:function(){},status:"rejected",reason:fn},gr())}finally{yr(he),En.T=Pe}}function lr(E){var R=E.memoizedState;if(R!==null)return R;R={memoizedState:ri,baseState:ri,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:ri},next:null};var I={};return R.next={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:I},next:null},E.memoizedState=R,E=E.alternate,E!==null&&(E.memoizedState=R),R}function us(){return Dt(Ea)}function Wo(){return Bs().memoizedState}function ho(){return Bs().memoizedState}function _u(E){for(var R=E.return;R!==null;){switch(R.tag){case 24:case 3:var I=gr();E=Ts(I);var Z=Hs(R,E,I);Z!==null&&(Ar(Z,R,I),Vr(Z,R,I)),R={cache:rt()},E.payload=R;return}R=R.return}}function jl(E,R,I){var Z=gr();I={lane:Z,revertLane:0,action:I,hasEagerState:!1,eagerState:null,next:null},kr(E)?vc(R,I):(I=wn(E,R,I,Z),I!==null&&(Ar(I,E,Z),vu(I,R,Z)))}function Qo(E,R,I){var Z=gr();Qr(E,R,I,Z)}function Qr(E,R,I,Z){var oe={lane:Z,revertLane:0,action:I,hasEagerState:!1,eagerState:null,next:null};if(kr(E))vc(R,oe);else{var he=E.alternate;if(E.lanes===0&&(he===null||he.lanes===0)&&(he=R.lastRenderedReducer,he!==null))try{var Pe=R.lastRenderedState,Be=he(Pe,I);if(oe.hasEagerState=!0,oe.eagerState=Be,yi(Be,Pe))return Ks(E,R,oe,0),as===null&&Ls(),!1}catch{}finally{}if(I=wn(E,R,oe,Z),I!==null)return Ar(I,E,Z),vu(I,R,Z),!0}return!1}function ka(E,R,I,Z){if(Z={lane:2,revertLane:Pn(),action:Z,hasEagerState:!1,eagerState:null,next:null},kr(E)){if(R)throw Error(o(479))}else R=wn(E,I,Z,2),R!==null&&Ar(R,E,2)}function kr(E){var R=E.alternate;return E===Bn||R!==null&&R===Bn}function vc(E,R){Mo=Qi=!0;var I=E.pending;I===null?R.next=R:(R.next=I.next,I.next=R),E.pending=R}function vu(E,R,I){if((I&4194048)!==0){var Z=R.lanes;Z&=E.pendingLanes,I|=Z,R.lanes=I,re(E,I)}}function aa(E){var R=sc;return sc+=1,Ta===null&&(Ta=[]),gs(Ta,E,R)}function oa(E,R){R=R.props.ref,E.ref=R!==void 0?R:null}function fo(E,R){throw R.$$typeof===Rh?Error(o(525)):(E=Object.prototype.toString.call(R),Error(o(31,E==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":E)))}function Zo(E){var R=E._init;return R(E._payload)}function bc(E){function R(Qe,qe){if(E){var nt=Qe.deletions;nt===null?(Qe.deletions=[qe],Qe.flags|=16):nt.push(qe)}}function I(Qe,qe){if(!E)return null;for(;qe!==null;)R(Qe,qe),qe=qe.sibling;return null}function Z(Qe){for(var qe=new Map;Qe!==null;)Qe.key!==null?qe.set(Qe.key,Qe):qe.set(Qe.index,Qe),Qe=Qe.sibling;return qe}function oe(Qe,qe){return Qe=Ua(Qe,qe),Qe.index=0,Qe.sibling=null,Qe}function he(Qe,qe,nt){return Qe.index=nt,E?(nt=Qe.alternate,nt!==null?(nt=nt.index,nt<qe?(Qe.flags|=67108866,qe):nt):(Qe.flags|=67108866,qe)):(Qe.flags|=1048576,qe)}function Pe(Qe){return E&&Qe.alternate===null&&(Qe.flags|=67108866),Qe}function Be(Qe,qe,nt,qt){return qe===null||qe.tag!==6?(qe=ul(nt,Qe.mode,qt),qe.return=Qe,qe):(qe=oe(qe,nt),qe.return=Qe,qe)}function Ge(Qe,qe,nt,qt){var gn=nt.type;return gn===ml?Kt(Qe,qe,nt.props.children,qt,nt.key):qe!==null&&(qe.elementType===gn||typeof gn=="object"&&gn!==null&&gn.$$typeof===Br&&Zo(gn)===qe.type)?(qe=oe(qe,nt.props),oa(qe,nt),qe.return=Qe,qe):(qe=Ul(nt.type,nt.key,nt.props,null,Qe.mode,qt),oa(qe,nt),qe.return=Qe,qe)}function Bt(Qe,qe,nt,qt){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==nt.containerInfo||qe.stateNode.implementation!==nt.implementation?(qe=Bc(nt,Qe.mode,qt),qe.return=Qe,qe):(qe=oe(qe,nt.children||[]),qe.return=Qe,qe)}function Kt(Qe,qe,nt,qt,gn){return qe===null||qe.tag!==7?(qe=Gi(nt,Qe.mode,qt,gn),qe.return=Qe,qe):(qe=oe(qe,nt),qe.return=Qe,qe)}function fn(Qe,qe,nt){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return qe=ul(""+qe,Qe.mode,nt),qe.return=Qe,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case fl:return nt=Ul(qe.type,qe.key,qe.props,null,Qe.mode,nt),oa(nt,qe),nt.return=Qe,nt;case Ro:return qe=Bc(qe,Qe.mode,nt),qe.return=Qe,qe;case Br:var qt=qe._init;return qe=qt(qe._payload),fn(Qe,qe,nt)}if(wo(qe)||w(qe))return qe=Gi(qe,Qe.mode,nt,null),qe.return=Qe,qe;if(typeof qe.then=="function")return fn(Qe,aa(qe),nt);if(qe.$$typeof===Ha)return fn(Qe,Gt(Qe,qe),nt);fo(Qe,qe)}return null}function pn(Qe,qe,nt,qt){var gn=qe!==null?qe.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return gn!==null?null:Be(Qe,qe,""+nt,qt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case fl:return nt.key===gn?Ge(Qe,qe,nt,qt):null;case Ro:return nt.key===gn?Bt(Qe,qe,nt,qt):null;case Br:return gn=nt._init,nt=gn(nt._payload),pn(Qe,qe,nt,qt)}if(wo(nt)||w(nt))return gn!==null?null:Kt(Qe,qe,nt,qt,null);if(typeof nt.then=="function")return pn(Qe,qe,aa(nt),qt);if(nt.$$typeof===Ha)return pn(Qe,qe,Gt(Qe,nt),qt);fo(Qe,nt)}return null}function Vn(Qe,qe,nt,qt,gn){if(typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint")return Qe=Qe.get(nt)||null,Be(qe,Qe,""+qt,gn);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case fl:return Qe=Qe.get(qt.key===null?nt:qt.key)||null,Ge(qe,Qe,qt,gn);case Ro:return Qe=Qe.get(qt.key===null?nt:qt.key)||null,Bt(qe,Qe,qt,gn);case Br:var _s=qt._init;return qt=_s(qt._payload),Vn(Qe,qe,nt,qt,gn)}if(wo(qt)||w(qt))return Qe=Qe.get(nt)||null,Kt(qe,Qe,qt,gn,null);if(typeof qt.then=="function")return Vn(Qe,qe,nt,aa(qt),gn);if(qt.$$typeof===Ha)return Vn(Qe,qe,nt,Gt(qe,qt),gn);fo(qe,qt)}return null}function Vi(Qe,qe,nt,qt){for(var gn=null,_s=null,An=qe,os=qe=0,hr=null;An!==null&&os<nt.length;os++){An.index>os?(hr=An,An=null):hr=An.sibling;var ls=pn(Qe,An,nt[os],qt);if(ls===null){An===null&&(An=hr);break}E&&An&&ls.alternate===null&&R(Qe,An),qe=he(ls,qe,os),_s===null?gn=ls:_s.sibling=ls,_s=ls,An=hr}if(os===nt.length)return I(Qe,An),rs&&xe(Qe,os),gn;if(An===null){for(;os<nt.length;os++)An=fn(Qe,nt[os],qt),An!==null&&(qe=he(An,qe,os),_s===null?gn=An:_s.sibling=An,_s=An);return rs&&xe(Qe,os),gn}for(An=Z(An);os<nt.length;os++)hr=Vn(An,Qe,os,nt[os],qt),hr!==null&&(E&&hr.alternate!==null&&An.delete(hr.key===null?os:hr.key),qe=he(hr,qe,os),_s===null?gn=hr:_s.sibling=hr,_s=hr);return E&&An.forEach(function(no){return R(Qe,no)}),rs&&xe(Qe,os),gn}function Go(Qe,qe,nt,qt){if(nt==null)throw Error(o(151));for(var gn=null,_s=null,An=qe,os=qe=0,hr=null,ls=nt.next();An!==null&&!ls.done;os++,ls=nt.next()){An.index>os?(hr=An,An=null):hr=An.sibling;var no=pn(Qe,An,ls.value,qt);if(no===null){An===null&&(An=hr);break}E&&An&&no.alternate===null&&R(Qe,An),qe=he(no,qe,os),_s===null?gn=no:_s.sibling=no,_s=no,An=hr}if(ls.done)return I(Qe,An),rs&&xe(Qe,os),gn;if(An===null){for(;!ls.done;os++,ls=nt.next())ls=fn(Qe,ls.value,qt),ls!==null&&(qe=he(ls,qe,os),_s===null?gn=ls:_s.sibling=ls,_s=ls);return rs&&xe(Qe,os),gn}for(An=Z(An);!ls.done;os++,ls=nt.next())ls=Vn(An,Qe,os,ls.value,qt),ls!==null&&(E&&ls.alternate!==null&&An.delete(ls.key===null?os:ls.key),qe=he(ls,qe,os),_s===null?gn=ls:_s.sibling=ls,_s=ls);return E&&An.forEach(function(Bf){return R(Qe,Bf)}),rs&&xe(Qe,os),gn}function ki(Qe,qe,nt,qt){if(typeof nt=="object"&&nt!==null&&nt.type===ml&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case fl:e:{for(var gn=nt.key;qe!==null;){if(qe.key===gn){if(gn=nt.type,gn===ml){if(qe.tag===7){I(Qe,qe.sibling),qt=oe(qe,nt.props.children),qt.return=Qe,Qe=qt;break e}}else if(qe.elementType===gn||typeof gn=="object"&&gn!==null&&gn.$$typeof===Br&&Zo(gn)===qe.type){I(Qe,qe.sibling),qt=oe(qe,nt.props),oa(qt,nt),qt.return=Qe,Qe=qt;break e}I(Qe,qe);break}else R(Qe,qe);qe=qe.sibling}nt.type===ml?(qt=Gi(nt.props.children,Qe.mode,qt,nt.key),qt.return=Qe,Qe=qt):(qt=Ul(nt.type,nt.key,nt.props,null,Qe.mode,qt),oa(qt,nt),qt.return=Qe,Qe=qt)}return Pe(Qe);case Ro:e:{for(gn=nt.key;qe!==null;){if(qe.key===gn)if(qe.tag===4&&qe.stateNode.containerInfo===nt.containerInfo&&qe.stateNode.implementation===nt.implementation){I(Qe,qe.sibling),qt=oe(qe,nt.children||[]),qt.return=Qe,Qe=qt;break e}else{I(Qe,qe);break}else R(Qe,qe);qe=qe.sibling}qt=Bc(nt,Qe.mode,qt),qt.return=Qe,Qe=qt}return Pe(Qe);case Br:return gn=nt._init,nt=gn(nt._payload),ki(Qe,qe,nt,qt)}if(wo(nt))return Vi(Qe,qe,nt,qt);if(w(nt)){if(gn=w(nt),typeof gn!="function")throw Error(o(150));return nt=gn.call(nt),Go(Qe,qe,nt,qt)}if(typeof nt.then=="function")return ki(Qe,qe,aa(nt),qt);if(nt.$$typeof===Ha)return ki(Qe,qe,Gt(Qe,nt),qt);fo(Qe,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,qe!==null&&qe.tag===6?(I(Qe,qe.sibling),qt=oe(qe,nt),qt.return=Qe,Qe=qt):(I(Qe,qe),qt=ul(nt,Qe.mode,qt),qt.return=Qe,Qe=qt),Pe(Qe)):I(Qe,qe)}return function(Qe,qe,nt,qt){try{sc=0;var gn=ki(Qe,qe,nt,qt);return Ta=null,gn}catch(An){if(An===tc||An===ws)throw An;var _s=n(29,An,null,Qe.mode);return _s.lanes=qt,_s.return=Qe,_s}finally{}}}function di(E){var R=E.alternate;j(In,In.current&1),j(Oi,E),Aa===null&&(R===null||Nr.current!==null||R.memoizedState!==null)&&(Aa=E)}function bu(E){if(E.tag===22){if(j(In,In.current),j(Oi,E),Aa===null){var R=E.alternate;R!==null&&R.memoizedState!==null&&(Aa=E)}}else Ti()}function Ti(){j(In,In.current),j(Oi,Oi.current)}function Lr(E){C(Oi),Aa===E&&(Aa=null),C(In)}function Jo(E){for(var R=E;R!==null;){if(R.tag===13){var I=R.memoizedState;if(I!==null&&(I=I.dehydrated,I===null||Qc(I)||Gu(I)))return R}else if(R.tag===19&&R.memoizedProps.revealOrder!==void 0){if((R.flags&128)!==0)return R}else if(R.child!==null){R.child.return=R,R=R.child;continue}if(R===E)break;for(;R.sibling===null;){if(R.return===null||R.return===E)return null;R=R.return}R.sibling.return=R.return,R=R.sibling}return null}function Dl(E,R,I,Z){R=E.memoizedState,I=I(Z,R),I=I==null?R:hl({},R,I),E.memoizedState=I,E.lanes===0&&(E.updateQueue.baseState=I)}function Ol(E,R,I,Z,oe,he,Pe){return E=E.stateNode,typeof E.shouldComponentUpdate=="function"?E.shouldComponentUpdate(Z,he,Pe):R.prototype&&R.prototype.isPureReactComponent?!On(I,Z)||!On(oe,he):!0}function mo(E,R,I,Z){E=R.state,typeof R.componentWillReceiveProps=="function"&&R.componentWillReceiveProps(I,Z),typeof R.UNSAFE_componentWillReceiveProps=="function"&&R.UNSAFE_componentWillReceiveProps(I,Z),R.state!==E&&Es.enqueueReplaceState(R,R.state,null)}function la(E,R){var I=R;if("ref"in R){I={};for(var Z in R)Z!=="ref"&&(I[Z]=R[Z])}if(E=E.defaultProps){I===R&&(I=hl({},I));for(var oe in E)I[oe]===void 0&&(I[oe]=E[oe])}return I}function La(E,R){try{var I=E.onUncaughtError;I(R.value,{componentStack:R.stack})}catch(Z){setTimeout(function(){throw Z})}}function Ec(E,R,I){try{var Z=E.onCaughtError;Z(I.value,{componentStack:I.stack,errorBoundary:R.tag===1?R.stateNode:null})}catch(oe){setTimeout(function(){throw oe})}}function el(E,R,I){return I=Ts(I),I.tag=3,I.payload={element:null},I.callback=function(){La(E,R)},I}function ca(E){return E=Ts(E),E.tag=3,E}function Rc(E,R,I,Z){var oe=I.type.getDerivedStateFromError;if(typeof oe=="function"){var he=Z.value;E.payload=function(){return oe(he)},E.callback=function(){Ec(R,I,Z)}}var Pe=I.stateNode;Pe!==null&&typeof Pe.componentDidCatch=="function"&&(E.callback=function(){Ec(R,I,Z),typeof oe!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var Be=Z.stack;this.componentDidCatch(Z.value,{componentStack:Be!==null?Be:""})})}function Eu(E,R,I,Z,oe){if(I.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){if(R=I.alternate,R!==null&&mn(R,I,oe,!0),I=Oi.current,I!==null){switch(I.tag){case 13:return Aa===null?Vs():I.alternate===null&&Us===0&&(Us=3),I.flags&=-257,I.flags|=65536,I.lanes=oe,Z===vr?I.flags|=16384:(R=I.updateQueue,R===null?I.updateQueue=new Set([Z]):R.add(Z),cl(E,Z,oe)),!1;case 22:return I.flags|=65536,Z===vr?I.flags|=16384:(R=I.updateQueue,R===null?(R={transitions:null,markerInstances:null,retryQueue:new Set([Z])},I.updateQueue=R):(I=R.retryQueue,I===null?R.retryQueue=new Set([Z]):I.add(Z)),cl(E,Z,oe)),!1}throw Error(o(435,I.tag))}return cl(E,Z,oe),Vs(),!1}if(rs)return R=Oi.current,R!==null?((R.flags&65536)===0&&(R.flags|=256),R.flags|=65536,R.lanes=oe,Z!==eh&&(E=Error(o(422),{cause:Z}),Ie(me(E,I)))):(Z!==eh&&(R=Error(o(423),{cause:Z}),Ie(me(R,I))),E=E.current.alternate,E.flags|=65536,oe&=-oe,E.lanes|=oe,Z=me(Z,I),oe=el(E.stateNode,Z,oe),Ji(E,oe),Us!==4&&(Us=2)),!1;var he=Error(o(520),{cause:Z});if(he=me(he,I),zo===null?zo=[he]:zo.push(he),Us!==4&&(Us=2),R===null)return!0;Z=me(Z,I),I=R;do{switch(I.tag){case 3:return I.flags|=65536,E=oe&-oe,I.lanes|=E,E=el(I.stateNode,Z,E),Ji(I,E),!1;case 1:if(R=I.type,he=I.stateNode,(I.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(Ia===null||!Ia.has(he))))return I.flags|=65536,oe&=-oe,I.lanes|=oe,oe=ca(oe),Rc(oe,E,I,Z),Ji(I,oe),!1}I=I.return}while(I!==null);return!1}function er(E,R,I,Z){R.child=E===null?rh(R,null,I,Z):Ja(R,E.child,I,Z)}function wc(E,R,I,Z,oe){I=I.render;var he=R.ref;if("ref"in Z){var Pe={};for(var Be in Z)Be!=="ref"&&(Pe[Be]=Z[Be])}else Pe=Z;return Lt(R),Z=Sl(E,R,I,Pe,he,oe),Be=ea(),E!==null&&!Nn?(Ei(E,R,oe),Ds(E,R,oe)):(rs&&Be&&ve(R),R.flags|=1,er(E,R,Z,oe),R.child)}function tl(E,R,I,Z,oe){if(E===null){var he=I.type;return typeof he=="function"&&!wd(he)&&he.defaultProps===void 0&&I.compare===null?(R.tag=15,R.type=he,wr(E,R,he,Z,oe)):(E=Ul(I.type,null,Z,R,R.mode,oe),E.ref=R.ref,E.return=R,R.child=E)}if(he=E.child,!Ai(E,oe)){var Pe=he.memoizedProps;if(I=I.compare,I=I!==null?I:On,I(Pe,Z)&&E.ref===R.ref)return Ds(E,R,oe)}return R.flags|=1,E=Ua(he,Z),E.ref=R.ref,E.return=R,R.child=E}function wr(E,R,I,Z,oe){if(E!==null){var he=E.memoizedProps;if(On(he,Z)&&E.ref===R.ref)if(Nn=!1,R.pendingProps=Z=he,Ai(E,oe))(E.flags&131072)!==0&&(Nn=!0);else return R.lanes=E.lanes,Ds(E,R,oe)}return V(E,R,I,Z,oe)}function Sc(E,R,I){var Z=R.pendingProps,oe=Z.children,he=E!==null?E.memoizedState:null;if(Z.mode==="hidden"){if((R.flags&128)!==0){if(Z=he!==null?he.baseLanes|I:I,E!==null){for(oe=R.child=E.child,he=0;oe!==null;)he=he|oe.lanes|oe.childLanes,oe=oe.sibling;R.childLanes=he&~Z}else R.childLanes=0,R.child=null;return Tc(E,R,Z,I)}if((I&536870912)!==0)R.memoizedState={baseLanes:0,cachePool:null},E!==null&&Zs(R,he!==null?he.cachePool:null),he!==null?Gs(R,he):$o(),bu(R);else return R.lanes=R.childLanes=536870912,Tc(E,R,he!==null?he.baseLanes|I:I,I)}else he!==null?(Zs(R,he.cachePool),Gs(R,he),Ti(),R.memoizedState=null):(E!==null&&Zs(R,null),$o(),Ti());return er(E,R,oe,I),R.child}function Tc(E,R,I,Z){var oe=Ms();return oe=oe===null?null:{parent:$a?ms._currentValue:ms._currentValue2,pool:oe},R.memoizedState={baseLanes:I,cachePool:oe},E!==null&&Zs(R,null),$o(),bu(R),E!==null&&mn(E,R,Z,!0),null}function hi(E,R){var I=R.ref;if(I===null)E!==null&&E.ref!==null&&(R.flags|=4194816);else{if(typeof I!="function"&&typeof I!="object")throw Error(o(284));(E===null||E.ref!==I)&&(R.flags|=4194816)}}function V(E,R,I,Z,oe){return Lt(R),I=Sl(E,R,I,Z,void 0,oe),Z=ea(),E!==null&&!Nn?(Ei(E,R,oe),Ds(E,R,oe)):(rs&&Z&&ve(R),R.flags|=1,er(E,R,I,oe),R.child)}function fe(E,R,I,Z,oe,he){return Lt(R),R.updateQueue=null,I=io(R,Z,I,oe),gc(E),Z=ea(),E!==null&&!Nn?(Ei(E,R,he),Ds(E,R,he)):(rs&&Z&&ve(R),R.flags|=1,er(E,R,I,he),R.child)}function ge(E,R,I,Z,oe){if(Lt(R),R.stateNode===null){var he=xl,Pe=I.contextType;typeof Pe=="object"&&Pe!==null&&(he=Dt(Pe)),he=new I(Z,he),R.memoizedState=he.state!==null&&he.state!==void 0?he.state:null,he.updater=Es,R.stateNode=he,he._reactInternals=R,he=R.stateNode,he.props=Z,he.state=R.memoizedState,he.refs={},Mr(R),Pe=I.contextType,he.context=typeof Pe=="object"&&Pe!==null?Dt(Pe):xl,he.state=R.memoizedState,Pe=I.getDerivedStateFromProps,typeof Pe=="function"&&(Dl(R,I,Pe,Z),he.state=R.memoizedState),typeof I.getDerivedStateFromProps=="function"||typeof he.getSnapshotBeforeUpdate=="function"||typeof he.UNSAFE_componentWillMount!="function"&&typeof he.componentWillMount!="function"||(Pe=he.state,typeof he.componentWillMount=="function"&&he.componentWillMount(),typeof he.UNSAFE_componentWillMount=="function"&&he.UNSAFE_componentWillMount(),Pe!==he.state&&Es.enqueueReplaceState(he,he.state,null),Yr(R,Z,he,oe),li(),he.state=R.memoizedState),typeof he.componentDidMount=="function"&&(R.flags|=4194308),Z=!0}else if(E===null){he=R.stateNode;var Be=R.memoizedProps,Ge=la(I,Be);he.props=Ge;var Bt=he.context,Kt=I.contextType;Pe=xl,typeof Kt=="object"&&Kt!==null&&(Pe=Dt(Kt));var fn=I.getDerivedStateFromProps;Kt=typeof fn=="function"||typeof he.getSnapshotBeforeUpdate=="function",Be=R.pendingProps!==Be,Kt||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(Be||Bt!==Pe)&&mo(R,he,Z,Pe),Sa=!1;var pn=R.memoizedState;he.state=pn,Yr(R,Z,he,oe),li(),Bt=R.memoizedState,Be||pn!==Bt||Sa?(typeof fn=="function"&&(Dl(R,I,fn,Z),Bt=R.memoizedState),(Ge=Sa||Ol(R,I,Ge,Z,pn,Bt,Pe))?(Kt||typeof he.UNSAFE_componentWillMount!="function"&&typeof he.componentWillMount!="function"||(typeof he.componentWillMount=="function"&&he.componentWillMount(),typeof he.UNSAFE_componentWillMount=="function"&&he.UNSAFE_componentWillMount()),typeof he.componentDidMount=="function"&&(R.flags|=4194308)):(typeof he.componentDidMount=="function"&&(R.flags|=4194308),R.memoizedProps=Z,R.memoizedState=Bt),he.props=Z,he.state=Bt,he.context=Pe,Z=Ge):(typeof he.componentDidMount=="function"&&(R.flags|=4194308),Z=!1)}else{he=R.stateNode,qs(E,R),Pe=R.memoizedProps,Kt=la(I,Pe),he.props=Kt,fn=R.pendingProps,pn=he.context,Bt=I.contextType,Ge=xl,typeof Bt=="object"&&Bt!==null&&(Ge=Dt(Bt)),Be=I.getDerivedStateFromProps,(Bt=typeof Be=="function"||typeof he.getSnapshotBeforeUpdate=="function")||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(Pe!==fn||pn!==Ge)&&mo(R,he,Z,Ge),Sa=!1,pn=R.memoizedState,he.state=pn,Yr(R,Z,he,oe),li();var Vn=R.memoizedState;Pe!==fn||pn!==Vn||Sa||E!==null&&E.dependencies!==null&&Ut(E.dependencies)?(typeof Be=="function"&&(Dl(R,I,Be,Z),Vn=R.memoizedState),(Kt=Sa||Ol(R,I,Kt,Z,pn,Vn,Ge)||E!==null&&E.dependencies!==null&&Ut(E.dependencies))?(Bt||typeof he.UNSAFE_componentWillUpdate!="function"&&typeof he.componentWillUpdate!="function"||(typeof he.componentWillUpdate=="function"&&he.componentWillUpdate(Z,Vn,Ge),typeof he.UNSAFE_componentWillUpdate=="function"&&he.UNSAFE_componentWillUpdate(Z,Vn,Ge)),typeof he.componentDidUpdate=="function"&&(R.flags|=4),typeof he.getSnapshotBeforeUpdate=="function"&&(R.flags|=1024)):(typeof he.componentDidUpdate!="function"||Pe===E.memoizedProps&&pn===E.memoizedState||(R.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||Pe===E.memoizedProps&&pn===E.memoizedState||(R.flags|=1024),R.memoizedProps=Z,R.memoizedState=Vn),he.props=Z,he.state=Vn,he.context=Ge,Z=Kt):(typeof he.componentDidUpdate!="function"||Pe===E.memoizedProps&&pn===E.memoizedState||(R.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||Pe===E.memoizedProps&&pn===E.memoizedState||(R.flags|=1024),Z=!1)}return he=Z,hi(E,R),Z=(R.flags&128)!==0,he||Z?(he=R.stateNode,I=Z&&typeof I.getDerivedStateFromError!="function"?null:he.render(),R.flags|=1,E!==null&&Z?(R.child=Ja(R,E.child,null,oe),R.child=Ja(R,null,I,oe)):er(E,R,I,oe),R.memoizedState=he.state,E=R.child):E=Ds(E,R,oe),E}function Ae(E,R,I,Z){return je(),R.flags|=256,er(E,R,I,Z),R.child}function Ye(E){return{baseLanes:E,cachePool:fr()}}function vt(E,R,I){return E=E!==null?E.childLanes&~I:0,R&&(E|=Mi),E}function Wt(E,R,I){var Z=R.pendingProps,oe=!1,he=(R.flags&128)!==0,Pe;if((Pe=he)||(Pe=E!==null&&E.memoizedState===null?!1:(In.current&2)!==0),Pe&&(oe=!0,R.flags&=-129),Pe=(R.flags&32)!==0,R.flags&=-33,E===null){if(rs){if(oe?di(R):Ti(),rs){var Be=sr,Ge;(Ge=Be)&&(Be=Mf(Be,ds),Be!==null?(R.memoizedState={dehydrated:Be,treeContext:No!==null?{id:Yi,overflow:wa}:null,retryLane:536870912,hydrationErrors:null},Ge=n(18,null,null,0),Ge.stateNode=Be,Ge.return=R,R.child=Ge,zs=R,sr=null,Ge=!0):Ge=!1),Ge||be(R)}if(Be=R.memoizedState,Be!==null&&(Be=Be.dehydrated,Be!==null))return Gu(Be)?R.lanes=32:R.lanes=536870912,null;Lr(R)}return Be=Z.children,Z=Z.fallback,oe?(Ti(),oe=R.mode,Be=$s({mode:"hidden",children:Be},oe),Z=Gi(Z,oe,I,null),Be.return=R,Z.return=R,Be.sibling=Z,R.child=Be,oe=R.child,oe.memoizedState=Ye(I),oe.childLanes=vt(E,Pe,I),R.memoizedState=Hr,Z):(di(R),Wn(R,Be))}if(Ge=E.memoizedState,Ge!==null&&(Be=Ge.dehydrated,Be!==null)){if(he)R.flags&256?(di(R),R.flags&=-257,R=Qn(E,R,I)):R.memoizedState!==null?(Ti(),R.child=E.child,R.flags|=128,R=null):(Ti(),oe=Z.fallback,Be=R.mode,Z=$s({mode:"visible",children:Z.children},Be),oe=Gi(oe,Be,I,null),oe.flags|=2,Z.return=R,oe.return=R,Z.sibling=oe,R.child=Z,Ja(R,E.child,null,I),Z=R.child,Z.memoizedState=Ye(I),Z.childLanes=vt(E,Pe,I),R.memoizedState=Hr,R=oe);else if(di(R),Gu(Be))Pe=Hh(Be).digest,Z=Error(o(419)),Z.stack="",Z.digest=Pe,Ie({value:Z,source:null,stack:null}),R=Qn(E,R,I);else if(Nn||mn(E,R,I,!1),Pe=(I&E.childLanes)!==0,Nn||Pe){if(Pe=as,Pe!==null&&(Z=I&-I,Z=(Z&42)!==0?1:ce(Z),Z=(Z&(Pe.suspendedLanes|I))!==0?0:Z,Z!==0&&Z!==Ge.retryLane))throw Ge.retryLane=Z,$n(E,Z),Ar(Pe,E,Z),ns;Qc(Be)||Vs(),R=Qn(E,R,I)}else Qc(Be)?(R.flags|=192,R.child=E.child,R=null):(E=Ge.treeContext,ni&&(sr=Gd(Be),zs=R,rs=!0,Ki=null,ds=!1,E!==null&&(Ur[ai++]=Yi,Ur[ai++]=wa,Ur[ai++]=No,Yi=E.id,wa=E.overflow,No=R)),R=Wn(R,Z.children),R.flags|=4096);return R}return oe?(Ti(),oe=Z.fallback,Be=R.mode,Ge=E.child,he=Ge.sibling,Z=Ua(Ge,{mode:"hidden",children:Z.children}),Z.subtreeFlags=Ge.subtreeFlags&65011712,he!==null?oe=Ua(he,oe):(oe=Gi(oe,Be,I,null),oe.flags|=2),oe.return=R,Z.return=R,Z.sibling=oe,R.child=Z,Z=oe,oe=R.child,Be=E.child.memoizedState,Be===null?Be=Ye(I):(Ge=Be.cachePool,Ge!==null?(he=$a?ms._currentValue:ms._currentValue2,Ge=Ge.parent!==he?{parent:he,pool:he}:Ge):Ge=fr(),Be={baseLanes:Be.baseLanes|I,cachePool:Ge}),oe.memoizedState=Be,oe.childLanes=vt(E,Pe,I),R.memoizedState=Hr,Z):(di(R),I=E.child,E=I.sibling,I=Ua(I,{mode:"visible",children:Z.children}),I.return=R,I.sibling=null,E!==null&&(Pe=R.deletions,Pe===null?(R.deletions=[E],R.flags|=16):Pe.push(E)),R.child=I,R.memoizedState=null,I)}function Wn(E,R){return R=$s({mode:"visible",children:R},E.mode),R.return=E,E.child=R}function $s(E,R){return E=n(22,E,null,R),E.lanes=0,E.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},E}function Qn(E,R,I){return Ja(R,E.child,null,I),E=Wn(R,R.pendingProps.children),E.flags|=2,R.memoizedState=null,E}function cr(E,R,I){E.lanes|=R;var Z=E.alternate;Z!==null&&(Z.lanes|=R),pt(E.return,R,I)}function Ws(E,R,I,Z,oe){var he=E.memoizedState;he===null?E.memoizedState={isBackwards:R,rendering:null,renderingStartTime:0,last:Z,tail:I,tailMode:oe}:(he.isBackwards=R,he.rendering=null,he.renderingStartTime=0,he.last=Z,he.tail=I,he.tailMode=oe)}function ua(E,R,I){var Z=R.pendingProps,oe=Z.revealOrder,he=Z.tail;if(er(E,R,Z.children,I),Z=In.current,(Z&2)!==0)Z=Z&1|2,R.flags|=128;else{if(E!==null&&(E.flags&128)!==0)e:for(E=R.child;E!==null;){if(E.tag===13)E.memoizedState!==null&&cr(E,I,R);else if(E.tag===19)cr(E,I,R);else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===R)break e;for(;E.sibling===null;){if(E.return===null||E.return===R)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}Z&=1}switch(j(In,Z),oe){case"forwards":for(I=R.child,oe=null;I!==null;)E=I.alternate,E!==null&&Jo(E)===null&&(oe=I),I=I.sibling;I=oe,I===null?(oe=R.child,R.child=null):(oe=I.sibling,I.sibling=null),Ws(R,!1,oe,I,he);break;case"backwards":for(I=null,oe=R.child,R.child=null;oe!==null;){if(E=oe.alternate,E!==null&&Jo(E)===null){R.child=oe;break}E=oe.sibling,oe.sibling=I,I=oe,oe=E}Ws(R,!0,I,null,he);break;case"together":Ws(R,!1,null,null,void 0);break;default:R.memoizedState=null}return R.child}function Ds(E,R,I){if(E!==null&&(R.dependencies=E.dependencies),ar|=R.lanes,(I&R.childLanes)===0)if(E!==null){if(mn(E,R,I,!1),(I&R.childLanes)===0)return null}else return null;if(E!==null&&R.child!==E.child)throw Error(o(153));if(R.child!==null){for(E=R.child,I=Ua(E,E.pendingProps),R.child=I,I.return=R;E.sibling!==null;)E=E.sibling,I=I.sibling=Ua(E,E.pendingProps),I.return=R;I.sibling=null}return R.child}function Ai(E,R){return(E.lanes&R)!==0?!0:(E=E.dependencies,!!(E!==null&&Ut(E)))}function Ac(E,R,I){switch(R.tag){case 3:Te(R,R.stateNode.containerInfo),Ne(R,ms,E.memoizedState.cache),je();break;case 27:case 5:Me(R);break;case 4:Te(R,R.stateNode.containerInfo);break;case 10:Ne(R,R.type,R.memoizedProps.value);break;case 13:var Z=R.memoizedState;if(Z!==null)return Z.dehydrated!==null?(di(R),R.flags|=128,null):(I&R.child.childLanes)!==0?Wt(E,R,I):(di(R),E=Ds(E,R,I),E!==null?E.sibling:null);di(R);break;case 19:var oe=(E.flags&128)!==0;if(Z=(I&R.childLanes)!==0,Z||(mn(E,R,I,!1),Z=(I&R.childLanes)!==0),oe){if(Z)return ua(E,R,I);R.flags|=128}if(oe=R.memoizedState,oe!==null&&(oe.rendering=null,oe.tail=null,oe.lastEffect=null),j(In,In.current),Z)break;return null;case 22:case 23:return R.lanes=0,Sc(E,R,I);case 24:Ne(R,ms,E.memoizedState.cache)}return Ds(E,R,I)}function Cc(E,R,I){if(E!==null)if(E.memoizedProps!==R.pendingProps)Nn=!0;else{if(!Ai(E,I)&&(R.flags&128)===0)return Nn=!1,Ac(E,R,I);Nn=(E.flags&131072)!==0}else Nn=!1,rs&&(R.flags&1048576)!==0&&pe(R,Zl,R.index);switch(R.lanes=0,R.tag){case 16:e:{E=R.pendingProps;var Z=R.elementType,oe=Z._init;if(Z=oe(Z._payload),R.type=Z,typeof Z=="function")wd(Z)?(E=la(Z,E),R.tag=1,R=ge(null,R,Z,E,I)):(R.tag=0,R=V(null,R,Z,E,I));else{if(Z!=null){if(oe=Z.$$typeof,oe===_a){R.tag=11,R=wc(null,R,Z,E,I);break e}else if(oe===va){R.tag=14,R=tl(null,R,Z,E,I);break e}}throw R=T(Z)||Z,Error(o(306,R,""))}}return R;case 0:return V(E,R,R.type,R.pendingProps,I);case 1:return Z=R.type,oe=la(Z,R.pendingProps),ge(E,R,Z,oe,I);case 3:e:{if(Te(R,R.stateNode.containerInfo),E===null)throw Error(o(387));var he=R.pendingProps;oe=R.memoizedState,Z=oe.element,qs(E,R),Yr(R,he,null,I);var Pe=R.memoizedState;if(he=Pe.cache,Ne(R,ms,he),he!==oe.cache&&Ze(R,[ms],I,!0),li(),he=Pe.element,ni&&oe.isDehydrated)if(oe={element:he,isDehydrated:!1,cache:Pe.cache},R.updateQueue.baseState=oe,R.memoizedState=oe,R.flags&256){R=Ae(E,R,he,I);break e}else if(he!==Z){Z=me(Error(o(424)),R),Ie(Z),R=Ae(E,R,he,I);break e}else for(ni&&(sr=Xh(R.stateNode.containerInfo),zs=R,rs=!0,Ki=null,ds=!0),I=rh(R,null,he,I),R.child=I;I;)I.flags=I.flags&-3|4096,I=I.sibling;else{if(je(),he===Z){R=Ds(E,R,I);break e}er(E,R,he,I)}R=R.child}return R;case 26:if(Fr)return hi(E,R),E===null?(I=eu(R.type,null,R.pendingProps,null))?R.memoizedState=I:rs||(R.stateNode=Ra(R.type,R.pendingProps,jo.current,R)):R.memoizedState=eu(R.type,E.memoizedProps,R.pendingProps,E.memoizedState),null;case 27:if(Kn)return Me(R),E===null&&Kn&&rs&&(Z=R.stateNode=tu(R.type,R.pendingProps,jo.current,Os.current,!1),zs=R,ds=!0,sr=Wh(R.type,Z,sr)),er(E,R,R.pendingProps.children,I),hi(E,R),E===null&&(R.flags|=4194304),R.child;case 5:return E===null&&rs&&(Vf(R.type,R.pendingProps,Os.current),(oe=Z=sr)&&(Z=Qh(Z,R.type,R.pendingProps,ds),Z!==null?(R.stateNode=Z,zs=R,sr=Kh(Z),ds=!1,oe=!0):oe=!1),oe||be(R)),Me(R),oe=R.type,he=R.pendingProps,Pe=E!==null?E.memoizedProps:null,Z=he.children,Ga(oe,he)?Z=null:Pe!==null&&Ga(oe,Pe)&&(R.flags|=32),R.memoizedState!==null&&(oe=Sl(E,R,pu,null,null,I),$a?Ea._currentValue=oe:Ea._currentValue2=oe),hi(E,R),er(E,R,Z,I),R.child;case 6:return E===null&&rs&&(Xl(R.pendingProps,Os.current),(E=I=sr)&&(I=Of(I,R.pendingProps,ds),I!==null?(R.stateNode=I,zs=R,sr=null,E=!0):E=!1),E||be(R)),null;case 13:return Wt(E,R,I);case 4:return Te(R,R.stateNode.containerInfo),Z=R.pendingProps,E===null?R.child=Ja(R,null,Z,I):er(E,R,Z,I),R.child;case 11:return wc(E,R,R.type,R.pendingProps,I);case 7:return er(E,R,R.pendingProps,I),R.child;case 8:return er(E,R,R.pendingProps.children,I),R.child;case 12:return er(E,R,R.pendingProps.children,I),R.child;case 10:return Z=R.pendingProps,Ne(R,R.type,Z.value),er(E,R,Z.children,I),R.child;case 9:return oe=R.type._context,Z=R.pendingProps.children,Lt(R),oe=Dt(oe),Z=Z(oe),R.flags|=1,er(E,R,Z,I),R.child;case 14:return tl(E,R,R.type,R.pendingProps,I);case 15:return wr(E,R,R.type,R.pendingProps,I);case 19:return ua(E,R,I);case 31:return Z=R.pendingProps,I=R.mode,Z={mode:Z.mode,children:Z.children},E===null?(I=$s(Z,I),I.ref=R.ref,R.child=I,I.return=R,R=I):(I=Ua(E.child,Z),I.ref=R.ref,R.child=I,I.return=R,R=I),R;case 22:return Sc(E,R,I);case 24:return Lt(R),Z=Dt(ms),E===null?(oe=Ms(),oe===null&&(oe=as,he=rt(),oe.pooledCache=he,he.refCount++,he!==null&&(oe.pooledCacheLanes|=I),oe=he),R.memoizedState={parent:Z,cache:oe},Mr(R),Ne(R,ms,oe)):((E.lanes&I)!==0&&(qs(E,R),Yr(R,null,null,I),li()),oe=E.memoizedState,he=R.memoizedState,oe.parent!==Z?(oe={parent:Z,cache:Z},R.memoizedState=oe,R.lanes===0&&(R.memoizedState=R.updateQueue.baseState=oe),Ne(R,ms,Z)):(Z=he.cache,Ne(R,ms,Z),Z!==oe.cache&&Ze(R,[ms],I,!0))),er(E,R,R.pendingProps.children,I),R.child;case 29:throw R.pendingProps}throw Error(o(156,R.tag))}function Zr(E){E.flags|=4}function fd(E,R){if(E!==null&&E.child===R.child)return!1;if((R.flags&16)!==0)return!0;for(E=R.child;E!==null;){if((E.flags&13878)!==0||(E.subtreeFlags&13878)!==0)return!0;E=E.sibling}return!1}function Pc(E,R,I,Z){if(Zn)for(I=R.child;I!==null;){if(I.tag===5||I.tag===6)Ys(E,I.stateNode);else if(!(I.tag===4||Kn&&I.tag===27)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===R)break;for(;I.sibling===null;){if(I.return===null||I.return===R)return;I=I.return}I.sibling.return=I.return,I=I.sibling}else if(ba)for(var oe=R.child;oe!==null;){if(oe.tag===5){var he=oe.stateNode;I&&Z&&(he=zd(he,oe.type,oe.memoizedProps)),Ys(E,he)}else if(oe.tag===6)he=oe.stateNode,I&&Z&&(he=Ud(he,oe.memoizedProps)),Ys(E,he);else if(oe.tag!==4){if(oe.tag===22&&oe.memoizedState!==null)he=oe.child,he!==null&&(he.return=oe),Pc(E,oe,!0,!0);else if(oe.child!==null){oe.child.return=oe,oe=oe.child;continue}}if(oe===R)break;for(;oe.sibling===null;){if(oe.return===null||oe.return===R)return;oe=oe.return}oe.sibling.return=oe.return,oe=oe.sibling}}function Ru(E,R,I,Z){var oe=!1;if(ba)for(var he=R.child;he!==null;){if(he.tag===5){var Pe=he.stateNode;I&&Z&&(Pe=zd(Pe,he.type,he.memoizedProps)),Bd(E,Pe)}else if(he.tag===6)Pe=he.stateNode,I&&Z&&(Pe=Ud(Pe,he.memoizedProps)),Bd(E,Pe);else if(he.tag!==4){if(he.tag===22&&he.memoizedState!==null)oe=he.child,oe!==null&&(oe.return=he),Ru(E,he,!0,!0),oe=!0;else if(he.child!==null){he.child.return=he,he=he.child;continue}}if(he===R)break;for(;he.sibling===null;){if(he.return===null||he.return===R)return oe;he=he.return}he.sibling.return=he.return,he=he.sibling}return oe}function md(E,R){if(ba&&fd(E,R)){E=R.stateNode;var I=E.containerInfo,Z=Ld();Ru(Z,R,!1,!1),E.pendingChildren=Z,Zr(R),qh(I,Z)}}function wu(E,R,I,Z){if(Zn)E.memoizedProps!==Z&&Zr(R);else if(ba){var oe=E.stateNode,he=E.memoizedProps;if((E=fd(E,R))||he!==Z){var Pe=Os.current;he=Wc(oe,I,he,Z,!E,null),he===oe?R.stateNode=oe:($c(he,I,Z,Pe)&&Zr(R),R.stateNode=he,E?Pc(he,R,!1,!1):Zr(R))}else R.stateNode=oe}}function Su(E,R,I){if(nr(R,I)){if(E.flags|=16777216,!Uu(R,I))if(ju())E.flags|=8192;else throw oi=vr,nd}else E.flags&=-16777217}function gh(E,R){if(nf(R)){if(E.flags|=16777216,!Ya(R))if(ju())E.flags|=8192;else throw oi=vr,nd}else E.flags&=-16777217}function Tu(E,R){R!==null&&(E.flags|=4),E.flags&16384&&(R=E.tag!==22?J():536870912,E.lanes|=R,bi|=R)}function Ic(E,R){if(!rs)switch(E.tailMode){case"hidden":R=E.tail;for(var I=null;R!==null;)R.alternate!==null&&(I=R),R=R.sibling;I===null?E.tail=null:I.sibling=null;break;case"collapsed":I=E.tail;for(var Z=null;I!==null;)I.alternate!==null&&(Z=I),I=I.sibling;Z===null?R||E.tail===null?E.tail=null:E.tail.sibling=null:Z.sibling=null}}function Fs(E){var R=E.alternate!==null&&E.alternate.child===E.child,I=0,Z=0;if(R)for(var oe=E.child;oe!==null;)I|=oe.lanes|oe.childLanes,Z|=oe.subtreeFlags&65011712,Z|=oe.flags&65011712,oe.return=E,oe=oe.sibling;else for(oe=E.child;oe!==null;)I|=oe.lanes|oe.childLanes,Z|=oe.subtreeFlags,Z|=oe.flags,oe.return=E,oe=oe.sibling;return E.subtreeFlags|=Z,E.childLanes=I,R}function If(E,R,I){var Z=R.pendingProps;switch(Oe(R),R.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fs(R),null;case 1:return Fs(R),null;case 3:return I=R.stateNode,Z=null,E!==null&&(Z=E.memoizedState.cache),R.memoizedState.cache!==Z&&(R.flags|=2048),Ue(ms),Le(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(E===null||E.child===null)&&(Fe(R)?Zr(R):E===null||E.memoizedState.isDehydrated&&(R.flags&256)===0||(R.flags|=1024,De())),md(E,R),Fs(R),null;case 26:if(Fr){I=R.type;var oe=R.memoizedState;return E===null?(Zr(R),oe!==null?(Fs(R),gh(R,oe)):(Fs(R),Su(R,I,Z))):oe?oe!==E.memoizedState?(Zr(R),Fs(R),gh(R,oe)):(Fs(R),R.flags&=-16777217):(Zn?E.memoizedProps!==Z&&Zr(R):wu(E,R,I,Z),Fs(R),Su(R,I,Z)),null}case 27:if(Kn){if(Ce(R),I=jo.current,oe=R.type,E!==null&&R.stateNode!=null)Zn?E.memoizedProps!==Z&&Zr(R):wu(E,R,oe,Z);else{if(!Z){if(R.stateNode===null)throw Error(o(166));return Fs(R),null}E=Os.current,Fe(R)?Ve(R,E):(E=tu(oe,Z,I,E,!0),R.stateNode=E,Zr(R))}return Fs(R),null}case 5:if(Ce(R),I=R.type,E!==null&&R.stateNode!=null)wu(E,R,I,Z);else{if(!Z){if(R.stateNode===null)throw Error(o(166));return Fs(R),null}E=Os.current,Fe(R)?Ve(R,E):(oe=vs(I,Z,jo.current,E,R),Pc(oe,R,!1,!1),R.stateNode=oe,$c(oe,I,Z,E)&&Zr(R))}return Fs(R),Su(R,R.type,R.pendingProps),null;case 6:if(E&&R.stateNode!=null)I=E.memoizedProps,Zn?I!==Z&&Zr(R):ba&&(I!==Z?(R.stateNode=To(Z,jo.current,Os.current,R),Zr(R)):R.stateNode=E.stateNode);else{if(typeof Z!="string"&&R.stateNode===null)throw Error(o(166));if(E=jo.current,I=Os.current,Fe(R)){if(!ni)throw Error(o(176));if(E=R.stateNode,I=R.memoizedProps,Z=null,oe=zs,oe!==null)switch(oe.tag){case 27:case 5:Z=oe.memoizedProps}Zc(E,I,R,Z)||be(R)}else R.stateNode=To(Z,E,I,R)}return Fs(R),null;case 13:if(Z=R.memoizedState,E===null||E.memoizedState!==null&&E.memoizedState.dehydrated!==null){if(oe=Fe(R),Z!==null&&Z.dehydrated!==null){if(E===null){if(!oe)throw Error(o(318));if(!ni)throw Error(o(344));if(oe=R.memoizedState,oe=oe!==null?oe.dehydrated:null,!oe)throw Error(o(317));$d(oe,R)}else je(),(R.flags&128)===0&&(R.memoizedState=null),R.flags|=4;Fs(R),oe=!1}else oe=De(),E!==null&&E.memoizedState!==null&&(E.memoizedState.hydrationErrors=oe),oe=!0;if(!oe)return R.flags&256?(Lr(R),R):(Lr(R),null)}if(Lr(R),(R.flags&128)!==0)return R.lanes=I,R;if(I=Z!==null,E=E!==null&&E.memoizedState!==null,I){Z=R.child,oe=null,Z.alternate!==null&&Z.alternate.memoizedState!==null&&Z.alternate.memoizedState.cachePool!==null&&(oe=Z.alternate.memoizedState.cachePool.pool);var he=null;Z.memoizedState!==null&&Z.memoizedState.cachePool!==null&&(he=Z.memoizedState.cachePool.pool),he!==oe&&(Z.flags|=2048)}return I!==E&&I&&(R.child.flags|=8192),Tu(R,R.updateQueue),Fs(R),null;case 4:return Le(),md(E,R),E===null&&Th(R.stateNode.containerInfo),Fs(R),null;case 10:return Ue(R.type),Fs(R),null;case 19:if(C(In),oe=R.memoizedState,oe===null)return Fs(R),null;if(Z=(R.flags&128)!==0,he=oe.rendering,he===null)if(Z)Ic(oe,!1);else{if(Us!==0||E!==null&&(E.flags&128)!==0)for(E=R.child;E!==null;){if(he=Jo(E),he!==null){for(R.flags|=128,Ic(oe,!1),E=he.updateQueue,R.updateQueue=E,Tu(R,E),R.subtreeFlags=0,E=I,I=R.child;I!==null;)tr(I,E),I=I.sibling;return j(In,In.current&1|2),R.child}E=E.sibling}oe.tail!==null&&bs()>oc&&(R.flags|=128,Z=!0,Ic(oe,!1),R.lanes=4194304)}else{if(!Z)if(E=Jo(he),E!==null){if(R.flags|=128,Z=!0,E=E.updateQueue,R.updateQueue=E,Tu(R,E),Ic(oe,!0),oe.tail===null&&oe.tailMode==="hidden"&&!he.alternate&&!rs)return Fs(R),null}else 2*bs()-oe.renderingStartTime>oc&&I!==536870912&&(R.flags|=128,Z=!0,Ic(oe,!1),R.lanes=4194304);oe.isBackwards?(he.sibling=R.child,R.child=he):(E=oe.last,E!==null?E.sibling=he:R.child=he,oe.last=he)}return oe.tail!==null?(R=oe.tail,oe.rendering=R,oe.tail=R.sibling,oe.renderingStartTime=bs(),R.sibling=null,E=In.current,j(In,Z?E&1|2:E&1),R):(Fs(R),null);case 22:case 23:return Lr(R),ro(),Z=R.memoizedState!==null,E!==null?E.memoizedState!==null!==Z&&(R.flags|=8192):Z&&(R.flags|=8192),Z?(I&536870912)!==0&&(R.flags&128)===0&&(Fs(R),R.subtreeFlags&6&&(R.flags|=8192)):Fs(R),I=R.updateQueue,I!==null&&Tu(R,I.retryQueue),I=null,E!==null&&E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(I=E.memoizedState.cachePool.pool),Z=null,R.memoizedState!==null&&R.memoizedState.cachePool!==null&&(Z=R.memoizedState.cachePool.pool),Z!==I&&(R.flags|=2048),E!==null&&C(ks),null;case 24:return I=null,E!==null&&(I=E.memoizedState.cache),R.memoizedState.cache!==I&&(R.flags|=2048),Ue(ms),Fs(R),null;case 25:return null;case 30:return null}throw Error(o(156,R.tag))}function fi(E,R){switch(Oe(R),R.tag){case 1:return E=R.flags,E&65536?(R.flags=E&-65537|128,R):null;case 3:return Ue(ms),Le(),E=R.flags,(E&65536)!==0&&(E&128)===0?(R.flags=E&-65537|128,R):null;case 26:case 27:case 5:return Ce(R),null;case 13:if(Lr(R),E=R.memoizedState,E!==null&&E.dehydrated!==null){if(R.alternate===null)throw Error(o(340));je()}return E=R.flags,E&65536?(R.flags=E&-65537|128,R):null;case 19:return C(In),null;case 4:return Le(),null;case 10:return Ue(R.type),null;case 22:case 23:return Lr(R),ro(),E!==null&&C(ks),E=R.flags,E&65536?(R.flags=E&-65537|128,R):null;case 24:return Ue(ms),null;case 25:return null;default:return null}}function Ml(E,R){switch(Oe(R),R.tag){case 3:Ue(ms),Le();break;case 26:case 27:case 5:Ce(R);break;case 4:Le();break;case 13:Lr(R);break;case 19:C(In);break;case 10:Ue(R.type);break;case 22:case 23:Lr(R),ro(),E!==null&&C(ks);break;case 24:Ue(ms)}}function Vl(E,R){try{var I=R.updateQueue,Z=I!==null?I.lastEffect:null;if(Z!==null){var oe=Z.next;I=oe;do{if((I.tag&E)===E){Z=void 0;var he=I.create,Pe=I.inst;Z=he(),Pe.destroy=Z}I=I.next}while(I!==oe)}}catch(Be){fs(R,R.return,Be)}}function Ba(E,R,I){try{var Z=R.updateQueue,oe=Z!==null?Z.lastEffect:null;if(oe!==null){var he=oe.next;Z=he;do{if((Z.tag&E)===E){var Pe=Z.inst,Be=Pe.destroy;if(Be!==void 0){Pe.destroy=void 0,oe=R;var Ge=I,Bt=Be;try{Bt()}catch(Kt){fs(oe,Ge,Kt)}}}Z=Z.next}while(Z!==he)}}catch(Kt){fs(R,R.return,Kt)}}function pd(E){var R=E.updateQueue;if(R!==null){var I=E.stateNode;try{Rr(R,I)}catch(Z){fs(E,E.return,Z)}}}function gd(E,R,I){I.props=la(E.type,E.memoizedProps),I.state=E.memoizedState;try{I.componentWillUnmount()}catch(Z){fs(E,R,Z)}}function nl(E,R){try{var I=E.ref;if(I!==null){switch(E.tag){case 26:case 27:case 5:var Z=Gl(E.stateNode);break;case 30:Z=E.stateNode;break;default:Z=E.stateNode}typeof I=="function"?E.refCleanup=I(Z):I.current=Z}}catch(oe){fs(E,R,oe)}}function da(E,R){var I=E.ref,Z=E.refCleanup;if(I!==null)if(typeof Z=="function")try{Z()}catch(oe){fs(E,R,oe)}finally{E.refCleanup=null,E=E.alternate,E!=null&&(E.refCleanup=null)}else if(typeof I=="function")try{I(null)}catch(oe){fs(E,R,oe)}else I.current=null}function sl(E){var R=E.type,I=E.memoizedProps,Z=E.stateNode;try{kd(Z,R,I,E)}catch(oe){fs(E,E.return,oe)}}function Nc(E,R,I){try{Mh(E.stateNode,E.type,I,R,E)}catch(Z){fs(E,E.return,Z)}}function kl(E){return E.tag===5||E.tag===3||(Fr?E.tag===26:!1)||(Kn?E.tag===27&&yl(E.type):!1)||E.tag===4}function jc(E){e:for(;;){for(;E.sibling===null;){if(E.return===null||kl(E.return))return null;E=E.return}for(E.sibling.return=E.return,E=E.sibling;E.tag!==5&&E.tag!==6&&E.tag!==18;){if(Kn&&E.tag===27&&yl(E.type)||E.flags&2||E.child===null||E.tag===4)continue e;E.child.return=E,E=E.child}if(!(E.flags&2))return E.stateNode}}function Au(E,R,I){var Z=E.tag;if(Z===5||Z===6)E=E.stateNode,R?kh(I,E,R):Dh(I,E);else if(Z!==4&&(Kn&&Z===27&&yl(E.type)&&(I=E.stateNode,R=null),E=E.child,E!==null))for(Au(E,R,I),E=E.sibling;E!==null;)Au(E,R,I),E=E.sibling}function ha(E,R,I){var Z=E.tag;if(Z===5||Z===6)E=E.stateNode,R?Vh(I,E,R):jh(I,E);else if(Z!==4&&(Kn&&Z===27&&yl(E.type)&&(I=E.stateNode),E=E.child,E!==null))for(ha(E,R,I),E=E.sibling;E!==null;)ha(E,R,I),E=E.sibling}function rl(E,R,I){E=E.containerInfo;try{Fd(E,I)}catch(Z){fs(R,R.return,Z)}}function Cu(E){var R=E.stateNode,I=E.memoizedProps;try{Qd(E.type,I,R,E)}catch(Z){fs(E,E.return,Z)}}function yh(E,R){for(So(E.containerInfo),Un=R;Un!==null;)if(E=Un,R=E.child,(E.subtreeFlags&1024)!==0&&R!==null)R.return=E,Un=R;else for(;Un!==null;){E=Un;var I=E.alternate;switch(R=E.flags,E.tag){case 0:break;case 11:case 15:break;case 1:if((R&1024)!==0&&I!==null){R=void 0;var Z=E,oe=I.memoizedProps;I=I.memoizedState;var he=Z.stateNode;try{var Pe=la(Z.type,oe,Z.elementType===Z.type);R=he.getSnapshotBeforeUpdate(Pe,I),he.__reactInternalSnapshotBeforeUpdate=R}catch(Be){fs(Z,Z.return,Be)}}break;case 3:(R&1024)!==0&&Zn&&Hu(E.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((R&1024)!==0)throw Error(o(163))}if(R=E.sibling,R!==null){R.return=E.return,Un=R;break}Un=E.return}}function po(E,R,I){var Z=I.flags;switch(I.tag){case 0:case 11:case 15:Fa(E,I),Z&4&&Vl(5,I);break;case 1:if(Fa(E,I),Z&4)if(E=I.stateNode,R===null)try{E.componentDidMount()}catch(Pe){fs(I,I.return,Pe)}else{var oe=la(I.type,R.memoizedProps);R=R.memoizedState;try{E.componentDidUpdate(oe,R,E.__reactInternalSnapshotBeforeUpdate)}catch(Pe){fs(I,I.return,Pe)}}Z&64&&pd(I),Z&512&&nl(I,I.return);break;case 3:if(Fa(E,I),Z&64&&(E=I.updateQueue,E!==null)){if(R=null,I.child!==null)switch(I.child.tag){case 27:case 5:R=Gl(I.child.stateNode);break;case 1:R=I.child.stateNode}try{Rr(E,R)}catch(Pe){fs(I,I.return,Pe)}}break;case 27:Kn&&R===null&&Z&4&&Cu(I);case 26:case 5:Fa(E,I),R===null&&Z&4&&sl(I),Z&512&&nl(I,I.return);break;case 12:Fa(E,I);break;case 13:Fa(E,I),Z&4&&xh(E,I),Z&64&&(E=I.memoizedState,E!==null&&(E=E.dehydrated,E!==null&&(I=Pr.bind(null,I),qd(E,I))));break;case 22:if(Z=I.memoizedState!==null||jr,!Z){R=R!==null&&R.memoizedState!==null||Ps,oe=jr;var he=Ps;jr=Z,(Ps=R)&&!he?ur(E,I,(I.subtreeFlags&8772)!==0):Fa(E,I),jr=oe,Ps=he}break;case 30:break;default:Fa(E,I)}}function yd(E){var R=E.alternate;R!==null&&(E.alternate=null,yd(R)),E.child=null,E.deletions=null,E.sibling=null,E.tag===5&&(R=E.stateNode,R!==null&&si(R)),E.stateNode=null,E.return=null,E.dependencies=null,E.memoizedProps=null,E.memoizedState=null,E.pendingProps=null,E.stateNode=null,E.updateQueue=null}function Ci(E,R,I){for(I=I.child;I!==null;)Pu(E,R,I),I=I.sibling}function Pu(E,R,I){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(Co,I)}catch{}switch(I.tag){case 26:if(Fr){Ps||da(I,R),Ci(E,R,I),I.memoizedState?Xd(I.memoizedState):I.stateNode&&gi(I.stateNode);break}case 27:if(Kn){Ps||da(I,R);var Z=Ss,oe=ir;yl(I.type)&&(Ss=I.stateNode,ir=!1),Ci(E,R,I),Ku(I.stateNode),Ss=Z,ir=oe;break}case 5:Ps||da(I,R);case 6:if(Zn){if(Z=Ss,oe=ir,Ss=null,Ci(E,R,I),Ss=Z,ir=oe,Ss!==null)if(ir)try{Bh(Ss,I.stateNode)}catch(he){fs(I,R,he)}else try{Lh(Ss,I.stateNode)}catch(he){fs(I,R,he)}}else Ci(E,R,I);break;case 18:Zn&&Ss!==null&&(ir?tf(Ss,I.stateNode):Yu(Ss,I.stateNode));break;case 4:Zn?(Z=Ss,oe=ir,Ss=I.stateNode.containerInfo,ir=!0,Ci(E,R,I),Ss=Z,ir=oe):(ba&&rl(I.stateNode,I,Ld()),Ci(E,R,I));break;case 0:case 11:case 14:case 15:Ps||Ba(2,I,R),Ps||Ba(4,I,R),Ci(E,R,I);break;case 1:Ps||(da(I,R),Z=I.stateNode,typeof Z.componentWillUnmount=="function"&&gd(I,R,Z)),Ci(E,R,I);break;case 21:Ci(E,R,I);break;case 22:Ps=(Z=Ps)||I.memoizedState!==null,Ci(E,R,I),Ps=Z;break;default:Ci(E,R,I)}}function xh(E,R){if(ni&&R.memoizedState===null&&(E=R.alternate,E!==null&&(E=E.memoizedState,E!==null&&(E=E.dehydrated,E!==null))))try{ef(E)}catch(I){fs(R,R.return,I)}}function Nf(E){switch(E.tag){case 13:case 19:var R=E.stateNode;return R===null&&(R=E.stateNode=new Ca),R;case 22:return E=E.stateNode,R=E._retryCache,R===null&&(R=E._retryCache=new Ca),R;default:throw Error(o(435,E.tag))}}function xd(E,R){var I=Nf(E);R.forEach(function(Z){var oe=ku.bind(null,E,Z);I.has(Z)||(I.add(Z),Z.then(oe,oe))})}function Sr(E,R){var I=R.deletions;if(I!==null)for(var Z=0;Z<I.length;Z++){var oe=I[Z],he=E,Pe=R;if(Zn){var Be=Pe;e:for(;Be!==null;){switch(Be.tag){case 27:if(Kn){if(yl(Be.type)){Ss=Be.stateNode,ir=!1;break e}break}case 5:Ss=Be.stateNode,ir=!1;break e;case 3:case 4:Ss=Be.stateNode.containerInfo,ir=!0;break e}Be=Be.return}if(Ss===null)throw Error(o(160));Pu(he,Pe,oe),Ss=null,ir=!1}else Pu(he,Pe,oe);he=oe.alternate,he!==null&&(he.return=null),oe.return=null}if(R.subtreeFlags&13878)for(R=R.child;R!==null;)_d(R,E),R=R.sibling}function _d(E,R){var I=E.alternate,Z=E.flags;switch(E.tag){case 0:case 11:case 14:case 15:Sr(R,E),Tr(E),Z&4&&(Ba(3,E,E.return),Vl(3,E),Ba(5,E,E.return));break;case 1:Sr(R,E),Tr(E),Z&512&&(Ps||I===null||da(I,I.return)),Z&64&&jr&&(E=E.updateQueue,E!==null&&(Z=E.callbacks,Z!==null&&(I=E.shared.hiddenCallbacks,E.shared.hiddenCallbacks=I===null?Z:I.concat(Z))));break;case 26:if(Fr){var oe=vi;if(Sr(R,E),Tr(E),Z&512&&(Ps||I===null||da(I,I.return)),Z&4){Z=I!==null?I.memoizedState:null;var he=E.memoizedState;I===null?he===null?E.stateNode===null?E.stateNode=Wl(oe,E.type,E.memoizedProps,E):Wd(oe,E.type,E.stateNode):E.stateNode=Kd(oe,he,E.memoizedProps):Z!==he?(Z===null?I.stateNode!==null&&gi(I.stateNode):Xd(Z),he===null?Wd(oe,E.type,E.stateNode):Kd(oe,he,E.memoizedProps)):he===null&&E.stateNode!==null&&Nc(E,E.memoizedProps,I.memoizedProps)}break}case 27:if(Kn){Sr(R,E),Tr(E),Z&512&&(Ps||I===null||da(I,I.return)),I!==null&&Z&4&&Nc(E,E.memoizedProps,I.memoizedProps);break}case 5:if(Sr(R,E),Tr(E),Z&512&&(Ps||I===null||da(I,I.return)),Zn){if(E.flags&32){oe=E.stateNode;try{Fh(oe)}catch(Kt){fs(E,E.return,Kt)}}Z&4&&E.stateNode!=null&&(oe=E.memoizedProps,Nc(E,oe,I!==null?I.memoizedProps:oe)),Z&1024&&(hu=!0)}break;case 6:if(Sr(R,E),Tr(E),Z&4&&Zn){if(E.stateNode===null)throw Error(o(162));Z=E.memoizedProps,I=I!==null?I.memoizedProps:Z,oe=E.stateNode;try{Oh(oe,I,Z)}catch(Kt){fs(E,E.return,Kt)}}break;case 3:if(Fr?(Ao(),oe=vi,vi=gl(R.containerInfo),Sr(R,E),vi=oe):Sr(R,E),Tr(E),Z&4){if(Zn&&ni&&I!==null&&I.memoizedState.isDehydrated)try{Jh(R.containerInfo)}catch(Kt){fs(E,E.return,Kt)}if(ba){Z=R.containerInfo,I=R.pendingChildren;try{Fd(Z,I)}catch(Kt){fs(E,E.return,Kt)}}}hu&&(hu=!1,Pi(E));break;case 4:Fr?(I=vi,vi=gl(E.stateNode.containerInfo),Sr(R,E),Tr(E),vi=I):(Sr(R,E),Tr(E)),Z&4&&ba&&rl(E.stateNode,E,E.stateNode.pendingChildren);break;case 12:Sr(R,E),Tr(E);break;case 13:Sr(R,E),Tr(E),E.child.flags&8192&&E.memoizedState!==null!=(I!==null&&I.memoizedState!==null)&&(rd=bs()),Z&4&&(Z=E.updateQueue,Z!==null&&(E.updateQueue=null,xd(E,Z)));break;case 22:oe=E.memoizedState!==null;var Pe=I!==null&&I.memoizedState!==null,Be=jr,Ge=Ps;if(jr=Be||oe,Ps=Ge||Pe,Sr(R,E),Ps=Ge,jr=Be,Tr(E),Z&8192&&(R=E.stateNode,R._visibility=oe?R._visibility&-2:R._visibility|1,oe&&(I===null||Pe||jr||Ps||pr(E)),Zn)){e:if(I=null,Zn)for(R=E;;){if(R.tag===5||Fr&&R.tag===26){if(I===null){Pe=I=R;try{he=Pe.stateNode,oe?zh(he):qu(Pe.stateNode,Pe.memoizedProps)}catch(Kt){fs(Pe,Pe.return,Kt)}}}else if(R.tag===6){if(I===null){Pe=R;try{var Bt=Pe.stateNode;oe?Kl(Bt):Uh(Bt,Pe.memoizedProps)}catch(Kt){fs(Pe,Pe.return,Kt)}}}else if((R.tag!==22&&R.tag!==23||R.memoizedState===null||R===E)&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===E)break e;for(;R.sibling===null;){if(R.return===null||R.return===E)break e;I===R&&(I=null),R=R.return}I===R&&(I=null),R.sibling.return=R.return,R=R.sibling}}Z&4&&(Z=E.updateQueue,Z!==null&&(I=Z.retryQueue,I!==null&&(Z.retryQueue=null,xd(E,I))));break;case 19:Sr(R,E),Tr(E),Z&4&&(Z=E.updateQueue,Z!==null&&(E.updateQueue=null,xd(E,Z)));break;case 30:break;case 21:break;default:Sr(R,E),Tr(E)}}function Tr(E){var R=E.flags;if(R&2){try{if(Zn){for(var I,Z=E.return;Z!==null;){if(kl(Z)){I=Z;break}Z=Z.return}if(I==null)throw Error(o(160));switch(I.tag){case 27:if(Kn){var oe=I.stateNode,he=jc(E);ha(E,he,oe);break}case 5:var Pe=I.stateNode;I.flags&32&&(Fh(Pe),I.flags&=-33);var Be=jc(E);ha(E,Be,Pe);break;case 3:case 4:var Ge=I.stateNode.containerInfo,Bt=jc(E);Au(E,Bt,Ge);break;default:throw Error(o(161))}}}catch(Kt){fs(E,E.return,Kt)}E.flags&=-3}R&4096&&(E.flags&=-4097)}function Pi(E){if(E.subtreeFlags&1024)for(E=E.child;E!==null;){var R=E;Pi(R),R.tag===5&&R.flags&1024&&Od(R.stateNode),E=E.sibling}}function Fa(E,R){if(R.subtreeFlags&8772)for(R=R.child;R!==null;)po(E,R.alternate,R),R=R.sibling}function pr(E){for(E=E.child;E!==null;){var R=E;switch(R.tag){case 0:case 11:case 14:case 15:Ba(4,R,R.return),pr(R);break;case 1:da(R,R.return);var I=R.stateNode;typeof I.componentWillUnmount=="function"&&gd(R,R.return,I),pr(R);break;case 27:Kn&&Ku(R.stateNode);case 26:case 5:da(R,R.return),pr(R);break;case 22:R.memoizedState===null&&pr(R);break;case 30:pr(R);break;default:pr(R)}E=E.sibling}}function ur(E,R,I){for(I=I&&(R.subtreeFlags&8772)!==0,R=R.child;R!==null;){var Z=R.alternate,oe=E,he=R,Pe=he.flags;switch(he.tag){case 0:case 11:case 15:ur(oe,he,I),Vl(4,he);break;case 1:if(ur(oe,he,I),Z=he,oe=Z.stateNode,typeof oe.componentDidMount=="function")try{oe.componentDidMount()}catch(Bt){fs(Z,Z.return,Bt)}if(Z=he,oe=Z.updateQueue,oe!==null){var Be=Z.stateNode;try{var Ge=oe.shared.hiddenCallbacks;if(Ge!==null)for(oe.shared.hiddenCallbacks=null,oe=0;oe<Ge.length;oe++)Bi(Ge[oe],Be)}catch(Bt){fs(Z,Z.return,Bt)}}I&&Pe&64&&pd(he),nl(he,he.return);break;case 27:Kn&&Cu(he);case 26:case 5:ur(oe,he,I),I&&Z===null&&Pe&4&&sl(he),nl(he,he.return);break;case 12:ur(oe,he,I);break;case 13:ur(oe,he,I),I&&Pe&4&&xh(oe,he);break;case 22:he.memoizedState===null&&ur(oe,he,I),nl(he,he.return);break;case 30:break;default:ur(oe,he,I)}R=R.sibling}}function go(E,R){var I=null;E!==null&&E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(I=E.memoizedState.cachePool.pool),E=null,R.memoizedState!==null&&R.memoizedState.cachePool!==null&&(E=R.memoizedState.cachePool.pool),E!==I&&(E!=null&&E.refCount++,I!=null&&Ct(I))}function Dc(E,R){E=null,R.alternate!==null&&(E=R.alternate.memoizedState.cache),R=R.memoizedState.cache,R!==E&&(R.refCount++,E!=null&&Ct(E))}function mi(E,R,I,Z){if(R.subtreeFlags&10256)for(R=R.child;R!==null;)Oc(E,R,I,Z),R=R.sibling}function Oc(E,R,I,Z){var oe=R.flags;switch(R.tag){case 0:case 11:case 15:mi(E,R,I,Z),oe&2048&&Vl(9,R);break;case 1:mi(E,R,I,Z);break;case 3:mi(E,R,I,Z),oe&2048&&(E=null,R.alternate!==null&&(E=R.alternate.memoizedState.cache),R=R.memoizedState.cache,R!==E&&(R.refCount++,E!=null&&Ct(E)));break;case 12:if(oe&2048){mi(E,R,I,Z),E=R.stateNode;try{var he=R.memoizedProps,Pe=he.id,Be=he.onPostCommit;typeof Be=="function"&&Be(Pe,R.alternate===null?"mount":"update",E.passiveEffectDuration,-0)}catch(Ge){fs(R,R.return,Ge)}}else mi(E,R,I,Z);break;case 13:mi(E,R,I,Z);break;case 23:break;case 22:he=R.stateNode,Pe=R.alternate,R.memoizedState!==null?he._visibility&2?mi(E,R,I,Z):fa(E,R):he._visibility&2?mi(E,R,I,Z):(he._visibility|=2,yo(E,R,I,Z,(R.subtreeFlags&10256)!==0)),oe&2048&&go(Pe,R);break;case 24:mi(E,R,I,Z),oe&2048&&Dc(R.alternate,R);break;default:mi(E,R,I,Z)}}function yo(E,R,I,Z,oe){for(oe=oe&&(R.subtreeFlags&10256)!==0,R=R.child;R!==null;){var he=E,Pe=R,Be=I,Ge=Z,Bt=Pe.flags;switch(Pe.tag){case 0:case 11:case 15:yo(he,Pe,Be,Ge,oe),Vl(8,Pe);break;case 23:break;case 22:var Kt=Pe.stateNode;Pe.memoizedState!==null?Kt._visibility&2?yo(he,Pe,Be,Ge,oe):fa(he,Pe):(Kt._visibility|=2,yo(he,Pe,Be,Ge,oe)),oe&&Bt&2048&&go(Pe.alternate,Pe);break;case 24:yo(he,Pe,Be,Ge,oe),oe&&Bt&2048&&Dc(Pe.alternate,Pe);break;default:yo(he,Pe,Be,Ge,oe)}R=R.sibling}}function fa(E,R){if(R.subtreeFlags&10256)for(R=R.child;R!==null;){var I=E,Z=R,oe=Z.flags;switch(Z.tag){case 22:fa(I,Z),oe&2048&&go(Z.alternate,Z);break;case 24:fa(I,Z),oe&2048&&Dc(Z.alternate,Z);break;default:fa(I,Z)}R=R.sibling}}function xo(E){if(E.subtreeFlags&br)for(E=E.child;E!==null;)Mc(E),E=E.sibling}function Mc(E){switch(E.tag){case 26:xo(E),E.flags&br&&(E.memoizedState!==null?Ka(vi,E.memoizedState,E.memoizedProps):Xc(E.type,E.memoizedProps));break;case 5:xo(E),E.flags&br&&Xc(E.type,E.memoizedProps);break;case 3:case 4:if(Fr){var R=vi;vi=gl(E.stateNode.containerInfo),xo(E),vi=R}else xo(E);break;case 22:E.memoizedState===null&&(R=E.alternate,R!==null&&R.memoizedState!==null?(R=br,br=16777216,xo(E),br=R):xo(E));break;default:xo(E)}}function il(E){var R=E.alternate;if(R!==null&&(E=R.child,E!==null)){R.child=null;do R=E.sibling,E.sibling=null,E=R;while(E!==null)}}function Vc(E){var R=E.deletions;if((E.flags&16)!==0){if(R!==null)for(var I=0;I<R.length;I++){var Z=R[I];Un=Z,ma(Z,E)}il(E)}if(E.subtreeFlags&10256)for(E=E.child;E!==null;)Jr(E),E=E.sibling}function Jr(E){switch(E.tag){case 0:case 11:case 15:Vc(E),E.flags&2048&&Ba(9,E,E.return);break;case 3:Vc(E);break;case 12:Vc(E);break;case 22:var R=E.stateNode;E.memoizedState!==null&&R._visibility&2&&(E.return===null||E.return.tag!==13)?(R._visibility&=-3,Ll(E)):Vc(E);break;default:Vc(E)}}function Ll(E){var R=E.deletions;if((E.flags&16)!==0){if(R!==null)for(var I=0;I<R.length;I++){var Z=R[I];Un=Z,ma(Z,E)}il(E)}for(E=E.child;E!==null;){switch(R=E,R.tag){case 0:case 11:case 15:Ba(8,R,R.return),Ll(R);break;case 22:I=R.stateNode,I._visibility&2&&(I._visibility&=-3,Ll(R));break;default:Ll(R)}E=E.sibling}}function ma(E,R){for(;Un!==null;){var I=Un;switch(I.tag){case 0:case 11:case 15:Ba(8,I,R);break;case 23:case 22:if(I.memoizedState!==null&&I.memoizedState.cachePool!==null){var Z=I.memoizedState.cachePool.pool;Z!=null&&Z.refCount++}break;case 24:Ct(I.memoizedState.cache)}if(Z=I.child,Z!==null)Z.return=I,Un=Z;else e:for(I=E;Un!==null;){Z=Un;var oe=Z.sibling,he=Z.return;if(yd(Z),Z===I){Un=null;break e}if(oe!==null){oe.return=he,Un=oe;break e}Un=he}}}function Iu(E){var R=Sh(E);if(R!=null){if(typeof R.memoizedProps["data-testname"]!="string")throw Error(o(364));return R}if(E=Ch(E),E===null)throw Error(o(362));return E.stateNode.current}function Bl(E,R){var I=E.tag;switch(R.$$typeof){case ko:if(E.type===R.value)return!0;break;case Er:e:{for(R=R.value,E=[E,0],I=0;I<E.length;){var Z=E[I++],oe=Z.tag,he=E[I++],Pe=R[he];if(oe!==5&&oe!==26&&oe!==27||!Yl(Z)){for(;Pe!=null&&Bl(Z,Pe);)he++,Pe=R[he];if(he===R.length){R=!0;break e}else for(Z=Z.child;Z!==null;)E.push(Z,he),Z=Z.sibling}}R=!1}return R;case ic:if((I===5||I===26||I===27)&&Vd(E.stateNode,R.value))return!0;break;case El:if((I===5||I===6||I===26||I===27)&&(E=Ih(E),E!==null&&0<=E.indexOf(R.value)))return!0;break;case ac:if((I===5||I===26||I===27)&&(E=E.memoizedProps["data-testname"],typeof E=="string"&&E.toLowerCase()===R.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function za(E){switch(E.$$typeof){case ko:return"<"+(T(E.value)||"Unknown")+">";case Er:return":has("+(za(E)||"")+")";case ic:return'[role="'+E.value+'"]';case El:return'"'+E.value+'"';case ac:return'[data-testname="'+E.value+'"]';default:throw Error(o(365))}}function Nu(E,R){var I=[];E=[E,0];for(var Z=0;Z<E.length;){var oe=E[Z++],he=oe.tag,Pe=E[Z++],Be=R[Pe];if(he!==5&&he!==26&&he!==27||!Yl(oe)){for(;Be!=null&&Bl(oe,Be);)Pe++,Be=R[Pe];if(Pe===R.length)I.push(oe);else for(oe=oe.child;oe!==null;)E.push(oe,Pe),oe=oe.sibling}}return I}function kc(E,R){if(!$l)throw Error(o(363));E=Iu(E),E=Nu(E,R),R=[],E=Array.from(E);for(var I=0;I<E.length;){var Z=E[I++],oe=Z.tag;if(oe===5||oe===26||oe===27)Yl(Z)||R.push(Z.stateNode);else for(Z=Z.child;Z!==null;)E.push(Z),Z=Z.sibling}return R}function gr(){if((Rn&2)!==0&&qn!==0)return qn&-qn;if(En.T!==null){var E=As;return E!==0?E:Pn()}return Nd()}function al(){Mi===0&&(Mi=(qn&536870912)===0||rs?ee():536870912);var E=Oi.current;return E!==null&&(E.flags|=32),Mi}function Ar(E,R,I){(E===as&&(ps===2||ps===9)||E.cancelPendingCommit!==null)&&(Ni(E,0),ei(E,qn,Mi,!1)),se(E,I),((Rn&2)===0||E!==as)&&(E===as&&((Rn&2)===0&&(Fo|=I),Us===4&&ei(E,qn,Mi,!1)),tt(E))}function Lc(E,R,I){if((Rn&6)!==0)throw Error(o(327));var Z=!I&&(R&124)===0&&(R&E.expiredLanes)===0||Y(E,R),oe=Z?ga(E,R):is(E,R,!0),he=Z;do{if(oe===0){Pa&&!Z&&ei(E,R,0,!1);break}else{if(I=E.current.alternate,he&&!Ii(I)){oe=is(E,R,!1),he=!1;continue}if(oe===2){if(he=R,E.errorRecoveryDisabledLanes&he)var Pe=0;else Pe=E.pendingLanes&-536870913,Pe=Pe!==0?Pe:Pe&536870912?536870912:0;if(Pe!==0){R=Pe;e:{var Be=E;oe=zo;var Ge=ni&&Be.current.memoizedState.isDehydrated;if(Ge&&(Ni(Be,Pe).flags|=256),Pe=is(Be,Pe,!1),Pe!==2){if(fu&&!Ge){Be.errorRecoveryDisabledLanes|=he,Fo|=he,oe=4;break e}he=Dr,Dr=oe,he!==null&&(Dr===null?Dr=he:Dr.push.apply(Dr,he))}oe=Pe}if(he=!1,oe!==2)continue}}if(oe===1){Ni(E,0),ei(E,R,0,!0);break}e:{switch(Z=E,he=oe,he){case 0:case 1:throw Error(o(345));case 4:if((R&4194048)!==R)break;case 6:ei(Z,R,Mi,!eo);break e;case 2:Dr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((R&62914560)===R&&(oe=rd+300-bs(),10<oe)){if(ei(Z,R,Mi,!eo),ne(Z,0,!0)!==0)break e;Z.timeoutHandle=zu(pi.bind(null,Z,I,Dr,mu,Uo,R,Mi,Fo,bi,eo,he,2,-0,0),oe);break e}pi(Z,I,Dr,mu,Uo,R,Mi,Fo,bi,eo,he,0,-0,0)}}break}while(!0);tt(E)}function pi(E,R,I,Z,oe,he,Pe,Be,Ge,Bt,Kt,fn,pn,Vn){if(E.timeoutHandle=Di,fn=R.subtreeFlags,(fn&8192||(fn&16785408)===16785408)&&(Kc(),Mc(R),fn=Dd(),fn!==null)){E.cancelPendingCommit=fn(Rd.bind(null,E,R,he,I,Z,oe,Pe,Be,Ge,Kt,1,pn,Vn)),ei(E,he,Pe,!Bt);return}Rd(E,R,he,I,Z,oe,Pe,Be,Ge)}function Ii(E){for(var R=E;;){var I=R.tag;if((I===0||I===11||I===15)&&R.flags&16384&&(I=R.updateQueue,I!==null&&(I=I.stores,I!==null)))for(var Z=0;Z<I.length;Z++){var oe=I[Z],he=oe.getSnapshot;oe=oe.value;try{if(!yi(he(),oe))return!1}catch{return!1}}if(I=R.child,R.subtreeFlags&16384&&I!==null)I.return=R,R=I;else{if(R===E)break;for(;R.sibling===null;){if(R.return===null||R.return===E)return!0;R=R.return}R.sibling.return=R.return,R=R.sibling}}return!0}function ei(E,R,I,Z){R&=~sd,R&=~Fo,E.suspendedLanes|=R,E.pingedLanes&=~R,Z&&(E.warmLanes|=R),Z=E.expirationTimes;for(var oe=R;0<oe;){var he=31-ii(oe),Pe=1<<he;Z[he]=-1,oe&=~Pe}I!==0&&te(E,I,R)}function pa(){return(Rn&6)===0?(Et(0),!1):!0}function Hi(){if(Mn!==null){if(ps===0)var E=Mn.return;else E=Mn,Ir=Xi=null,or(E),Ta=null,sc=0,E=Mn;for(;E!==null;)Ml(E.alternate,E),E=E.return;Mn=null}}function Ni(E,R){var I=E.timeoutHandle;I!==Di&&(E.timeoutHandle=Di,Yc(I)),I=E.cancelPendingCommit,I!==null&&(E.cancelPendingCommit=null,I()),Hi(),as=E,Mn=I=Ua(E.current,null),qn=R,ps=0,Gr=null,eo=!1,Pa=Y(E,R),fu=!1,bi=Mi=sd=Fo=ar=Us=0,Dr=zo=null,Uo=!1,(R&8)!==0&&(R|=R&32);var Z=E.entangledLanes;if(Z!==0)for(E=E.entanglements,Z&=R;0<Z;){var oe=31-ii(Z),he=1<<oe;R|=E[oe],Z&=~he}return Qs=R,Ls(),I}function vd(E,R){Bn=null,En.H=Vo,R===tc||R===ws?(R=cs(),ps=3):R===nd?(R=cs(),ps=4):ps=R===ns?8:R!==null&&typeof R=="object"&&typeof R.then=="function"?6:1,Gr=R,Mn===null&&(Us=1,La(E,me(R,E.current)))}function ju(){var E=Oi.current;return E===null?!0:(qn&4194048)===qn?Aa===null:(qn&62914560)===qn||(qn&536870912)!==0?E===Aa:!1}function Du(){var E=En.H;return En.H=Vo,E===null?Vo:E}function Cr(){var E=En.A;return En.A=rc,E}function Vs(){Us=4,eo||(qn&4194048)!==qn&&Oi.current!==null||(Pa=!0),(ar&134217727)===0&&(Fo&134217727)===0||as===null||ei(as,qn,Mi,!1)}function is(E,R,I){var Z=Rn;Rn|=2;var oe=Du(),he=Cr();(as!==E||qn!==R)&&(mu=null,Ni(E,R)),R=!1;var Pe=Us;e:do try{if(ps!==0&&Mn!==null){var Be=Mn,Ge=Gr;switch(ps){case 8:Hi(),Pe=6;break e;case 3:case 2:case 9:case 6:Oi.current===null&&(R=!0);var Bt=ps;if(ps=0,Gr=null,ll(E,Be,Ge,Bt),I&&Pa){Pe=0;break e}break;default:Bt=ps,ps=0,Gr=null,ll(E,Be,Ge,Bt)}}ol(),Pe=Us;break}catch(Kt){vd(E,Kt)}while(!0);return R&&E.shellSuspendCounter++,Ir=Xi=null,Rn=Z,En.H=oe,En.A=he,Mn===null&&(as=null,qn=0,Ls()),Pe}function ol(){for(;Mn!==null;)_o(Mn)}function ga(E,R){var I=Rn;Rn|=2;var Z=Du(),oe=Cr();as!==E||qn!==R?(mu=null,oc=bs()+500,Ni(E,R)):Pa=Y(E,R);e:do try{if(ps!==0&&Mn!==null){R=Mn;var he=Gr;t:switch(ps){case 1:ps=0,Gr=null,ll(E,R,he,1);break;case 2:case 9:if(vn(he)){ps=0,Gr=null,Ed(R);break}R=function(){ps!==2&&ps!==9||as!==E||(ps=7),tt(E)},he.then(R,R);break e;case 3:ps=7;break e;case 4:ps=5;break e;case 7:vn(he)?(ps=0,Gr=null,Ed(R)):(ps=0,Gr=null,ll(E,R,he,7));break;case 5:var Pe=null;switch(Mn.tag){case 26:Pe=Mn.memoizedState;case 5:case 27:var Be=Mn,Ge=Be.type,Bt=Be.pendingProps;if(Pe?Ya(Pe):Uu(Ge,Bt)){ps=0,Gr=null;var Kt=Be.sibling;if(Kt!==null)Mn=Kt;else{var fn=Be.return;fn!==null?(Mn=fn,vo(fn)):Mn=null}break t}}ps=0,Gr=null,ll(E,R,he,5);break;case 6:ps=0,Gr=null,ll(E,R,he,6);break;case 8:Hi(),Us=6;break e;default:throw Error(o(462))}}bd();break}catch(pn){vd(E,pn)}while(!0);return Ir=Xi=null,En.H=Z,En.A=oe,Rn=I,Mn!==null?0:(as=null,qn=0,Ls(),Us)}function bd(){for(;Mn!==null&&!kf();)_o(Mn)}function _o(E){var R=Cc(E.alternate,E,Qs);E.memoizedProps=E.pendingProps,R===null?vo(E):Mn=R}function Ed(E){var R=E,I=R.alternate;switch(R.tag){case 15:case 0:R=fe(I,R,R.pendingProps,R.type,void 0,qn);break;case 11:R=fe(I,R,R.pendingProps,R.type.render,R.ref,qn);break;case 5:or(R);default:Ml(I,R),R=Mn=tr(R,Qs),R=Cc(I,R,Qs)}E.memoizedProps=E.pendingProps,R===null?vo(E):Mn=R}function ll(E,R,I,Z){Ir=Xi=null,or(R),Ta=null,sc=0;var oe=R.return;try{if(Eu(E,oe,R,I,qn)){Us=1,La(E,me(I,E.current)),Mn=null;return}}catch(he){if(oe!==null)throw Mn=oe,he;Us=1,La(E,me(I,E.current)),Mn=null;return}R.flags&32768?(rs||Z===1?E=!0:Pa||(qn&536870912)!==0?E=!1:(eo=E=!0,(Z===2||Z===9||Z===3||Z===6)&&(Z=Oi.current,Z!==null&&Z.tag===13&&(Z.flags|=16384))),Fl(R,E)):vo(R)}function vo(E){var R=E;do{if((R.flags&32768)!==0){Fl(R,eo);return}E=R.return;var I=If(R.alternate,R,Qs);if(I!==null){Mn=I;return}if(R=R.sibling,R!==null){Mn=R;return}Mn=R=E}while(R!==null);Us===0&&(Us=5)}function Fl(E,R){do{var I=fi(E.alternate,E);if(I!==null){I.flags&=32767,Mn=I;return}if(I=E.return,I!==null&&(I.flags|=32768,I.subtreeFlags=0,I.deletions=null),!R&&(E=E.sibling,E!==null)){Mn=E;return}Mn=E=I}while(E!==null);Us=6,Mn=null}function Rd(E,R,I,Z,oe,he,Pe,Be,Ge){E.cancelPendingCommit=null;do ji();while(dr!==0);if((Rn&6)!==0)throw Error(o(327));if(R!==null){if(R===E.current)throw Error(o(177));if(he=R.lanes|R.childLanes,he|=nh,K(E,I,he,Pe,Be,Ge),E===as&&(Mn=as=null,qn=0),lc=R,qo=E,cc=I,ad=he,od=oe,Rl=Z,(R.subtreeFlags&10256)!==0||(R.flags&10256)!==0?(E.callbackNode=null,E.callbackPriority=0,_h(Qu,function(){return xa(),null})):(E.callbackNode=null,E.callbackPriority=0),Z=(R.flags&13878)!==0,(R.subtreeFlags&13878)!==0||Z){Z=En.T,En.T=null,oe=$i(),yr(2),Pe=Rn,Rn|=4;try{yh(E,R,I)}finally{Rn=Pe,yr(oe),En.T=Z}}dr=1,zl(),Ou(),bo()}}function zl(){if(dr===1){dr=0;var E=qo,R=lc,I=(R.flags&13878)!==0;if((R.subtreeFlags&13878)!==0||I){I=En.T,En.T=null;var Z=$i();yr(2);var oe=Rn;Rn|=4;try{_d(R,E),zn(E.containerInfo)}finally{Rn=oe,yr(Z),En.T=I}}E.current=R,dr=2}}function Ou(){if(dr===2){dr=0;var E=qo,R=lc,I=(R.flags&8772)!==0;if((R.subtreeFlags&8772)!==0||I){I=En.T,En.T=null;var Z=$i();yr(2);var oe=Rn;Rn|=4;try{po(E,R.alternate,R)}finally{Rn=oe,yr(Z),En.T=I}}dr=3}}function bo(){if(dr===4||dr===3){dr=0,rf();var E=qo,R=lc,I=cc,Z=Rl;(R.subtreeFlags&10256)!==0||(R.flags&10256)!==0?dr=5:(dr=0,lc=qo=null,ya(E,E.pendingLanes));var oe=E.pendingLanes;if(oe===0&&(Ia=null),le(I),R=R.stateNode,zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(Co,R,void 0,(R.current.flags&128)===128)}catch{}if(Z!==null){R=En.T,oe=$i(),yr(2),En.T=null;try{for(var he=E.onRecoverableError,Pe=0;Pe<Z.length;Pe++){var Be=Z[Pe];he(Be.value,{componentStack:Be.stack})}}finally{En.T=R,yr(oe)}}(cc&3)!==0&&ji(),tt(E),oe=E.pendingLanes,(I&4194090)!==0&&(oe&42)!==0?E===ld?Ho++:(Ho=0,ld=E):Ho=0,Et(0)}}function ya(E,R){(E.pooledCacheLanes&=R)===0&&(R=E.pooledCache,R!=null&&(E.pooledCache=null,Ct(R)))}function ji(E){return zl(),Ou(),bo(),xa()}function xa(){if(dr!==5)return!1;var E=qo,R=ad;ad=0;var I=le(cc),Z=32>I?32:I;I=En.T;var oe=$i();try{yr(Z),En.T=null,Z=od,od=null;var he=qo,Pe=cc;if(dr=0,lc=qo=null,cc=0,(Rn&6)!==0)throw Error(o(331));var Be=Rn;if(Rn|=4,Jr(he.current),Oc(he,he.current,Pe,Z),Rn=Be,Et(0,!1),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(Co,he)}catch{}return!0}finally{yr(oe),En.T=I,ya(E,R)}}function Mu(E,R,I){R=me(I,R),R=el(E.stateNode,R,2),E=Hs(E,R,2),E!==null&&(se(E,2),tt(E))}function fs(E,R,I){if(E.tag===3)Mu(E,E,I);else for(;R!==null;){if(R.tag===3){Mu(R,E,I);break}else if(R.tag===1){var Z=R.stateNode;if(typeof R.type.getDerivedStateFromError=="function"||typeof Z.componentDidCatch=="function"&&(Ia===null||!Ia.has(Z))){E=me(I,E),I=ca(2),Z=Hs(R,I,2),Z!==null&&(Rc(I,Z,R,E),se(Z,2),tt(Z));break}}R=R.return}}function cl(E,R,I){var Z=E.pingCache;if(Z===null){Z=E.pingCache=new Bo;var oe=new Set;Z.set(R,oe)}else oe=Z.get(R),oe===void 0&&(oe=new Set,Z.set(R,oe));oe.has(I)||(fu=!0,oe.add(I),E=Vu.bind(null,E,R,I),R.then(E,E))}function Vu(E,R,I){var Z=E.pingCache;Z!==null&&Z.delete(R),E.pingedLanes|=E.suspendedLanes&I,E.warmLanes&=~I,as===E&&(qn&I)===I&&(Us===4||Us===3&&(qn&62914560)===qn&&300>bs()-rd?(Rn&2)===0&&Ni(E,0):sd|=I,bi===qn&&(bi=0)),tt(E)}function Eo(E,R){R===0&&(R=J()),E=$n(E,R),E!==null&&(se(E,R),tt(E))}function Pr(E){var R=E.memoizedState,I=0;R!==null&&(I=R.retryLane),Eo(E,I)}function ku(E,R){var I=0;switch(E.tag){case 13:var Z=E.stateNode,oe=E.memoizedState;oe!==null&&(I=oe.retryLane);break;case 19:Z=E.stateNode;break;case 22:Z=E.stateNode._retryCache;break;default:throw Error(o(314))}Z!==null&&Z.delete(R),Eo(E,I)}function _h(E,R){return su(E,R)}function jf(E,R,I,Z){this.tag=E,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=R,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wd(E){return E=E.prototype,!(!E||!E.isReactComponent)}function Ua(E,R){var I=E.alternate;return I===null?(I=n(E.tag,R,E.key,E.mode),I.elementType=E.elementType,I.type=E.type,I.stateNode=E.stateNode,I.alternate=E,E.alternate=I):(I.pendingProps=R,I.type=E.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=E.flags&65011712,I.childLanes=E.childLanes,I.lanes=E.lanes,I.child=E.child,I.memoizedProps=E.memoizedProps,I.memoizedState=E.memoizedState,I.updateQueue=E.updateQueue,R=E.dependencies,I.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext},I.sibling=E.sibling,I.index=E.index,I.ref=E.ref,I.refCleanup=E.refCleanup,I}function tr(E,R){E.flags&=65011714;var I=E.alternate;return I===null?(E.childLanes=0,E.lanes=R,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=I.childLanes,E.lanes=I.lanes,E.child=I.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=I.memoizedProps,E.memoizedState=I.memoizedState,E.updateQueue=I.updateQueue,E.type=I.type,R=I.dependencies,E.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),E}function Ul(E,R,I,Z,oe,he){var Pe=0;if(Z=E,typeof E=="function")wd(E)&&(Pe=1);else if(typeof E=="string")Pe=Fr&&Kn?Jc(E,I,Os.current)?26:Zd(E)?27:5:Fr?Jc(E,I,Os.current)?26:5:Kn&&Zd(E)?27:5;else e:switch(E){case pl:return E=n(31,I,R,oe),E.elementType=pl,E.lanes=he,E;case ml:return Gi(I.children,oe,he,R);case Fc:Pe=8,oe|=24;break;case Bu:return E=n(12,I,R,oe|2),E.elementType=Bu,E.lanes=he,E;case Uc:return E=n(13,I,R,oe),E.elementType=Uc,E.lanes=he,E;case qc:return E=n(19,I,R,oe),E.elementType=qc,E.lanes=he,E;default:if(typeof E=="object"&&E!==null)switch(E.$$typeof){case zc:case Ha:Pe=10;break e;case Ad:Pe=9;break e;case _a:Pe=11;break e;case va:Pe=14;break e;case Br:Pe=16,Z=null;break e}Pe=29,I=Error(o(130,E===null?"null":typeof E,"")),Z=null}return R=n(Pe,I,R,oe),R.elementType=E,R.type=Z,R.lanes=he,R}function Gi(E,R,I,Z){return E=n(7,E,Z,R),E.lanes=I,E}function ul(E,R,I){return E=n(6,E,null,R),E.lanes=I,E}function Bc(E,R,I){return R=n(4,E.children!==null?E.children:[],E.key,R),R.lanes=I,R.stateNode={containerInfo:E.containerInfo,pendingChildren:null,implementation:E.implementation},R}function ql(E,R,I,Z,oe,he,Pe,Be){this.tag=1,this.containerInfo=E,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Di,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ie(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ie(0),this.hiddenUpdates=ie(null),this.identifierPrefix=Z,this.onUncaughtError=oe,this.onCaughtError=he,this.onRecoverableError=Pe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Be,this.incompleteTransitions=new Map}function dl(E,R,I,Z,oe,he,Pe,Be,Ge,Bt,Kt,fn){return E=new ql(E,R,I,Pe,Be,Ge,Bt,fn),R=1,he===!0&&(R|=24),he=n(3,null,null,R),E.current=he,he.stateNode=E,R=rt(),R.refCount++,E.pooledCache=R,R.refCount++,he.memoizedState={element:Z,isDehydrated:I,cache:R},Mr(he),E}function bh(E){return E?(E=xl,E):xl}function Sd(E){var R=E._reactInternals;if(R===void 0)throw typeof E.render=="function"?Error(o(188)):(E=Object.keys(E).join(","),Error(o(268,E)));return E=g(R),E=E!==null?y(E):null,E===null?null:Gl(E.stateNode)}function Eh(E,R,I,Z,oe,he){oe=bh(oe),Z.context===null?Z.context=oe:Z.pendingContext=oe,Z=Ts(R),Z.payload={element:I},he=he===void 0?null:he,he!==null&&(Z.callback=he),I=Hs(E,Z,R),I!==null&&(Ar(I,E,R),Vr(I,E,R))}function Td(E,R){if(E=E.memoizedState,E!==null&&E.dehydrated!==null){var I=E.retryLane;E.retryLane=I!==0&&I<R?I:R}}function qa(E,R){Td(E,R),(E=E.alternate)&&Td(E,R)}var Fn={},Lu=requireReact(),ti=requireScheduler(),hl=Object.assign,Rh=Symbol.for("react.element"),fl=Symbol.for("react.transitional.element"),Ro=Symbol.for("react.portal"),ml=Symbol.for("react.fragment"),Fc=Symbol.for("react.strict_mode"),Bu=Symbol.for("react.profiler"),zc=Symbol.for("react.provider"),Ad=Symbol.for("react.consumer"),Ha=Symbol.for("react.context"),_a=Symbol.for("react.forward_ref"),Uc=Symbol.for("react.suspense"),qc=Symbol.for("react.suspense_list"),va=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),pl=Symbol.for("react.activity"),Cd=Symbol.for("react.memo_cache_sentinel"),Fu=Symbol.iterator,Hc=Symbol.for("react.client.reference"),wo=Array.isArray,En=Lu.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wh=e.rendererVersion,Hl=e.rendererPackageName,Gc=e.extraDevToolsConfig,Gl=e.getPublicInstance,Pd=e.getRootHostContext,Id=e.getChildHostContext,So=e.prepareForCommit,zn=e.resetAfterCommit,vs=e.createInstance;e.cloneMutableInstance;var Ys=e.appendInitialChild,$c=e.finalizeInitialChildren,Ga=e.shouldSetTextContent,To=e.createTextInstance;e.cloneMutableTextInstance;var zu=e.scheduleTimeout,Yc=e.cancelTimeout,Di=e.noTimeout,$a=e.isPrimaryRenderer;e.warnsIfNotActing;var Zn=e.supportsMutation,ba=e.supportsPersistence,ni=e.supportsHydration,Sh=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var Th=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var yr=e.setCurrentUpdatePriority,$i=e.getCurrentUpdatePriority,Nd=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var jd=e.shouldAttemptEagerTransition,si=e.detachDeletedInstance;e.requestPostPaintCallback;var nr=e.maySuspendCommit,Uu=e.preloadInstance,Kc=e.startSuspendingCommit,Xc=e.suspendInstance;e.suspendOnActiveViewTransition;var Dd=e.waitForCommitToBeReady,ri=e.NotPendingTransition,Ea=e.HostTransitionContext,Od=e.resetFormInstance;e.bindToConsole;var Md=e.supportsMicrotasks,Ah=e.scheduleMicrotask,$l=e.supportsTestSelectors,Ch=e.findFiberRoot,Ph=e.getBoundingRect,Ih=e.getTextContent,Yl=e.isHiddenSubtree,Vd=e.matchAccessibilityRole,Nh=e.setFocusIfFocusable,Df=e.setupIntersectionObserver,jh=e.appendChild,Dh=e.appendChildToContainer,Oh=e.commitTextUpdate,kd=e.commitMount,Mh=e.commitUpdate,Vh=e.insertBefore,kh=e.insertInContainerBefore,Lh=e.removeChild,Bh=e.removeChildFromContainer,Fh=e.resetTextContent,zh=e.hideInstance,Kl=e.hideTextInstance,qu=e.unhideInstance,Uh=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopGestureTransition,e.getCurrentGestureOffset,e.subscribeToGestureDirection,e.createViewTransitionInstance;var Hu=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var Wc=e.cloneInstance,Ld=e.createContainerChildSet,Bd=e.appendChildToContainerChildSet,qh=e.finalizeContainerChildren,Fd=e.replaceContainerChildren,zd=e.cloneHiddenInstance,Ud=e.cloneHiddenTextInstance,Qc=e.isSuspenseInstancePending,Gu=e.isSuspenseInstanceFallback,Hh=e.getSuspenseInstanceFallbackErrorDetails,qd=e.registerSuspenseInstanceRetry,Gh=e.canHydrateFormStateMarker,$h=e.isFormStateMarkerMatching,Yh=e.getNextHydratableSibling,Hd=e.getNextHydratableSiblingAfterSingleton,Kh=e.getFirstHydratableChild,Xh=e.getFirstHydratableChildWithinContainer,Gd=e.getFirstHydratableChildWithinSuspenseInstance,Wh=e.getFirstHydratableChildWithinSingleton,Qh=e.canHydrateInstance,Of=e.canHydrateTextInstance,Mf=e.canHydrateSuspenseInstance,Zh=e.hydrateInstance,Zc=e.hydrateTextInstance,$d=e.hydrateSuspenseInstance,$u=e.getNextHydratableInstanceAfterSuspenseInstance,Jh=e.commitHydratedContainer,ef=e.commitHydratedSuspenseInstance,Yu=e.clearSuspenseBoundary,tf=e.clearSuspenseBoundaryFromContainer,Yd=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Vf=e.validateHydratableInstance,Xl=e.validateHydratableTextInstance,Fr=e.supportsResources,Jc=e.isHostHoistableType,gl=e.getHoistableRoot,eu=e.getResource,Kd=e.acquireResource,Xd=e.releaseResource,Wl=e.hydrateHoistable,Wd=e.mountHoistable,gi=e.unmountHoistable,Ra=e.createHoistableInstance,Ao=e.prepareToCommitHoistables,nf=e.mayResourceSuspendCommit,Ya=e.preloadResource,Ka=e.suspendResource,Kn=e.supportsSingletons,tu=e.resolveSingletonInstance,Qd=e.acquireSingletonInstance,Ku=e.releaseSingletonInstance,Zd=e.isHostSingletonType,yl=e.isSingletonScope,Xa=[],Wa=-1,xl={},ii=Math.clz32?Math.clz32:D,sf=Math.log,Xu=Math.LN2,nu=256,Ql=4194304,su=ti.unstable_scheduleCallback,Wu=ti.unstable_cancelCallback,kf=ti.unstable_shouldYield,rf=ti.unstable_requestPaint,bs=ti.unstable_now,xr=ti.unstable_ImmediatePriority,af=ti.unstable_UserBlockingPriority,Qu=ti.unstable_NormalPriority,of=ti.unstable_IdlePriority,lf=ti.log,cf=ti.unstable_setDisableYieldValue,Co=null,zr=null,Zu,Jd,Ju=!1,ed=new WeakMap,Po=[],Io=0,ru=null,Zl=0,Ur=[],ai=0,No=null,Yi=1,wa="",Os=A(null),_l=A(null),jo=A(null),iu=A(null),zs=null,sr=null,rs=!1,Ki=null,ds=!1,eh=Error(o(519)),yi=typeof Object.is=="function"?Object.is:Re,au=A(null),Xi=null,Ir=null,uf=typeof AbortController<"u"?AbortController:function(){var E=[],R=this.signal={aborted:!1,addEventListener:function(I,Z){E.push(Z)}};this.abort=function(){R.aborted=!0,E.forEach(function(I){return I()})}},df=ti.unstable_scheduleCallback,ou=ti.unstable_NormalPriority,ms={$$typeof:Ha,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},lu=null,Do=null,td=!1,Jl=!1,cu=!1,Qa=0,ec=null,Wi=0,As=0,Oo=null,th=En.S;En.S=function(E,R){typeof R=="object"&&R!==null&&typeof R.then=="function"&&Gn(E,R),th!==null&&th(E,R)};var ks=A(null),Lf=Object.prototype.hasOwnProperty,tc=Error(o(460)),nd=Error(o(474)),ws=Error(o(542)),vr={then:function(){}},oi=null,xi=[],vl=0,nh=0,Sa=!1,qr=!1,Nr=A(null),uu=A(0),rr=0,Bn=null,ts=null,Cs=null,Qi=!1,Mo=!1,Za=!1,_i=0,nc=0,Zi=null,du=0,Vo={readContext:Dt,use:ja,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useLayoutEffect:hs,useInsertionEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useSyncExternalStore:hs,useId:hs,useHostTransitionStatus:hs,useFormState:hs,useActionState:hs,useOptimistic:hs,useMemoCache:hs,useCacheRefresh:hs},bl={readContext:Dt,use:ja,useCallback:function(E,R){return Js().memoizedState=[E,R===void 0?null:R],E},useContext:Dt,useEffect:_c,useImperativeHandle:function(E,R,I){I=I!=null?I.concat([E]):null,lo(4194308,4,uo.bind(null,R,E),I)},useLayoutEffect:function(E,R){return lo(4194308,4,E,R)},useInsertionEffect:function(E,R){lo(4,2,E,R)},useMemo:function(E,R){var I=Js();R=R===void 0?null:R;var Z=E();if(Za){ue(!0);try{E()}finally{ue(!1)}}return I.memoizedState=[Z,R],Z},useReducer:function(E,R,I){var Z=Js();if(I!==void 0){var oe=I(R);if(Za){ue(!0);try{I(R)}finally{ue(!1)}}}else oe=R;return Z.memoizedState=Z.baseState=oe,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:E,lastRenderedState:oe},Z.queue=E,E=E.dispatch=jl.bind(null,Bn,E),[Z.memoizedState,E]},useRef:function(E){var R=Js();return E={current:E},R.memoizedState=E},useState:function(E){E=Da(E);var R=E.queue,I=Qo.bind(null,Bn,R);return R.dispatch=I,[E.memoizedState,I]},useDebugValue:ra,useDeferredValue:function(E,R){var I=Js();return Si(I,E,R)},useTransition:function(){var E=Da(!1);return E=Nl.bind(null,Bn,E.queue,!0,!1),Js().memoizedState=E,[!1,E]},useSyncExternalStore:function(E,R,I){var Z=Bn,oe=Js();if(rs){if(I===void 0)throw Error(o(407));I=I()}else{if(I=R(),as===null)throw Error(o(349));(qn&124)!==0||Tl(Z,R,I)}oe.memoizedState=I;var he={value:I,getSnapshot:R};return oe.queue=he,_c(gu.bind(null,Z,he,E),[E]),Z.flags|=2048,_r(9,Ri(),ao.bind(null,Z,he,I,R),null),I},useId:function(){var E=Js(),R=as.identifierPrefix;if(rs){var I=wa,Z=Yi;I=(Z&~(1<<32-ii(Z)-1)).toString(32)+I,R="«"+R+"R"+I,I=_i++,0<I&&(R+="H"+I.toString(32)),R+="»"}else I=du++,R="«"+R+"r"+I.toString(32)+"»";return E.memoizedState=R},useHostTransitionStatus:us,useFormState:Cl,useActionState:Cl,useOptimistic:function(E){var R=Js();R.memoizedState=R.baseState=E;var I={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return R.queue=I,R=ka.bind(null,Bn,!0,I),I.dispatch=R,[E,R]},useMemoCache:Yo,useCacheRefresh:function(){return Js().memoizedState=_u.bind(null,Bn)}},sh={readContext:Dt,use:ja,useCallback:ia,useContext:Dt,useEffect:co,useImperativeHandle:Ui,useInsertionEffect:wi,useLayoutEffect:ui,useMemo:Il,useReducer:mr,useRef:sa,useState:function(){return mr(Kr)},useDebugValue:ra,useDeferredValue:function(E,R){var I=Bs();return qi(I,ts.memoizedState,E,R)},useTransition:function(){var E=mr(Kr)[0],R=Bs().memoizedState;return[typeof E=="boolean"?E:ta(E),R]},useSyncExternalStore:Xo,useId:Wo,useHostTransitionStatus:us,useFormState:yu,useActionState:yu,useOptimistic:function(E,R){var I=Bs();return Oa(I,ts,E,R)},useMemoCache:Yo,useCacheRefresh:ho},hf={readContext:Dt,use:ja,useCallback:ia,useContext:Dt,useEffect:co,useImperativeHandle:Ui,useInsertionEffect:wi,useLayoutEffect:ui,useMemo:Il,useReducer:yc,useRef:sa,useState:function(){return yc(Kr)},useDebugValue:ra,useDeferredValue:function(E,R){var I=Bs();return ts===null?Si(I,E,R):qi(I,ts.memoizedState,E,R)},useTransition:function(){var E=yc(Kr)[0],R=Bs().memoizedState;return[typeof E=="boolean"?E:ta(E),R]},useSyncExternalStore:Xo,useId:Wo,useHostTransitionStatus:us,useFormState:na,useActionState:na,useOptimistic:function(E,R){var I=Bs();return ts!==null?Oa(I,ts,E,R):(I.baseState=E,[E,I.queue.dispatch])},useMemoCache:Yo,useCacheRefresh:ho},Ta=null,sc=0,Ja=bc(!0),rh=bc(!1),Oi=A(null),Aa=null,In=A(0),Es={enqueueSetState:function(E,R,I){E=E._reactInternals;var Z=gr(),oe=Ts(Z);oe.payload=R,I!=null&&(oe.callback=I),R=Hs(E,oe,Z),R!==null&&(Ar(R,E,Z),Vr(R,E,Z))},enqueueReplaceState:function(E,R,I){E=E._reactInternals;var Z=gr(),oe=Ts(Z);oe.tag=1,oe.payload=R,I!=null&&(oe.callback=I),R=Hs(E,oe,Z),R!==null&&(Ar(R,E,Z),Vr(R,E,Z))},enqueueForceUpdate:function(E,R){E=E._reactInternals;var I=gr(),Z=Ts(I);Z.tag=2,R!=null&&(Z.callback=R),R=Hs(E,Z,I),R!==null&&(Ar(R,E,I),Vr(R,E,I))}},Yn=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},ns=Error(o(461)),Nn=!1,Hr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},jr=!1,Ps=!1,hu=!1,Ca=typeof WeakSet=="function"?WeakSet:Set,Un=null,Ss=null,ir=!1,vi=null,br=8192,rc={getCacheForType:function(E){var R=Dt(ms),I=R.data.get(E);return I===void 0&&(I=E(),R.data.set(E,I)),I}},ko=0,Er=1,ic=2,ac=3,El=4;if(typeof Symbol=="function"&&Symbol.for){var Lo=Symbol.for;ko=Lo("selector.component"),Er=Lo("selector.has_pseudo_class"),ic=Lo("selector.role"),ac=Lo("selector.test_id"),El=Lo("selector.text")}var Bo=typeof WeakMap=="function"?WeakMap:Map,Rn=0,as=null,Mn=null,qn=0,ps=0,Gr=null,eo=!1,Pa=!1,fu=!1,Qs=0,Us=0,ar=0,Fo=0,sd=0,Mi=0,bi=0,zo=null,Dr=null,Uo=!1,rd=0,oc=1/0,mu=null,Ia=null,dr=0,qo=null,lc=null,cc=0,ad=0,od=null,Rl=null,Ho=0,ld=null;return Fn.attemptContinuousHydration=function(E){if(E.tag===13){var R=$n(E,67108864);R!==null&&Ar(R,E,67108864),qa(E,67108864)}},Fn.attemptHydrationAtCurrentPriority=function(E){if(E.tag===13){var R=gr();R=ce(R);var I=$n(E,R);I!==null&&Ar(I,E,R),qa(E,R)}},Fn.attemptSynchronousHydration=function(E){switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var R=H(E.pendingLanes);if(R!==0){for(E.pendingLanes|=2,E.entangledLanes|=2;R;){var I=1<<31-ii(R);E.entanglements[1]|=I,R&=~I}tt(E),(Rn&6)===0&&(oc=bs()+500,Et(0))}}break;case 13:R=$n(E,2),R!==null&&Ar(R,E,2),pa(),qa(E,2)}},Fn.batchedUpdates=function(E,R){return E(R)},Fn.createComponentSelector=function(E){return{$$typeof:ko,value:E}},Fn.createContainer=function(E,R,I,Z,oe,he,Pe,Be,Ge,Bt){return dl(E,R,!1,null,I,Z,he,Pe,Be,Ge,Bt,null)},Fn.createHasPseudoClassSelector=function(E){return{$$typeof:Er,value:E}},Fn.createHydrationContainer=function(E,R,I,Z,oe,he,Pe,Be,Ge,Bt,Kt,fn,pn){return E=dl(I,Z,!0,E,oe,he,Be,Ge,Bt,Kt,fn,pn),E.context=bh(null),I=E.current,Z=gr(),Z=ce(Z),oe=Ts(Z),oe.callback=R??null,Hs(I,oe,Z),R=Z,E.current.lanes=R,se(E,R),tt(E),E},Fn.createPortal=function(E,R,I){var Z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:Z==null?null:""+Z,children:E,containerInfo:R,implementation:I}},Fn.createRoleSelector=function(E){return{$$typeof:ic,value:E}},Fn.createTestNameSelector=function(E){return{$$typeof:ac,value:E}},Fn.createTextSelector=function(E){return{$$typeof:El,value:E}},Fn.defaultOnCaughtError=function(E){console.error(E)},Fn.defaultOnRecoverableError=function(E){Yn(E)},Fn.defaultOnUncaughtError=function(E){Yn(E)},Fn.deferredUpdates=function(E){var R=En.T,I=$i();try{return yr(32),En.T=null,E()}finally{yr(I),En.T=R}},Fn.discreteUpdates=function(E,R,I,Z,oe){var he=En.T,Pe=$i();try{return yr(2),En.T=null,E(R,I,Z,oe)}finally{yr(Pe),En.T=he,Rn===0&&(oc=bs()+500)}},Fn.findAllNodes=kc,Fn.findBoundingRects=function(E,R){if(!$l)throw Error(o(363));R=kc(E,R),E=[];for(var I=0;I<R.length;I++)E.push(Ph(R[I]));for(R=E.length-1;0<R;R--){I=E[R];for(var Z=I.x,oe=Z+I.width,he=I.y,Pe=he+I.height,Be=R-1;0<=Be;Be--)if(R!==Be){var Ge=E[Be],Bt=Ge.x,Kt=Bt+Ge.width,fn=Ge.y,pn=fn+Ge.height;if(Z>=Bt&&he>=fn&&oe<=Kt&&Pe<=pn){E.splice(R,1);break}else if(Z!==Bt||I.width!==Ge.width||pn<he||fn>Pe){if(!(he!==fn||I.height!==Ge.height||Kt<Z||Bt>oe)){Bt>Z&&(Ge.width+=Bt-Z,Ge.x=Z),Kt<oe&&(Ge.width=oe-Bt),E.splice(R,1);break}}else{fn>he&&(Ge.height+=fn-he,Ge.y=he),pn<Pe&&(Ge.height=Pe-fn),E.splice(R,1);break}}}return E},Fn.findHostInstance=Sd,Fn.findHostInstanceWithNoPortals=function(E){return E=g(E),E=E!==null?v(E):null,E===null?null:Gl(E.stateNode)},Fn.findHostInstanceWithWarning=function(E){return Sd(E)},Fn.flushPassiveEffects=ji,Fn.flushSyncFromReconciler=function(E){var R=Rn;Rn|=1;var I=En.T,Z=$i();try{if(yr(2),En.T=null,E)return E()}finally{yr(Z),En.T=I,Rn=R,(Rn&6)===0&&Et(0)}},Fn.flushSyncWork=pa,Fn.focusWithin=function(E,R){if(!$l)throw Error(o(363));for(E=Iu(E),R=Nu(E,R),R=Array.from(R),E=0;E<R.length;){var I=R[E++],Z=I.tag;if(!Yl(I)){if((Z===5||Z===26||Z===27)&&Nh(I.stateNode))return!0;for(I=I.child;I!==null;)R.push(I),I=I.sibling}}return!1},Fn.getFindAllNodesFailureDescription=function(E,R){if(!$l)throw Error(o(363));var I=0,Z=[];E=[Iu(E),0];for(var oe=0;oe<E.length;){var he=E[oe++],Pe=he.tag,Be=E[oe++],Ge=R[Be];if((Pe!==5&&Pe!==26&&Pe!==27||!Yl(he))&&(Bl(he,Ge)&&(Z.push(za(Ge)),Be++,Be>I&&(I=Be)),Be<R.length))for(he=he.child;he!==null;)E.push(he,Be),he=he.sibling}if(I<R.length){for(E=[];I<R.length;I++)E.push(za(R[I]));return`findAllNodes was able to match part of the selector:
  `+(Z.join(" > ")+`

No matching component was found for:
  `)+E.join(" > ")}return null},Fn.getPublicRootInstance=function(E){if(E=E.current,!E.child)return null;switch(E.child.tag){case 27:case 5:return Gl(E.child.stateNode);default:return E.child.stateNode}},Fn.injectIntoDevTools=function(){var E={bundleType:0,version:wh,rendererPackageName:Hl,currentDispatcherRef:En,reconcilerVersion:"19.1.0"};if(Gc!==null&&(E.rendererConfig=Gc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")E=!1;else{var R=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(R.isDisabled||!R.supportsFiber)E=!0;else{try{Co=R.inject(E),zr=R}catch{}E=!!R.checkDCE}}return E},Fn.isAlreadyRendering=function(){return(Rn&6)!==0},Fn.observeVisibleRects=function(E,R,I,Z){if(!$l)throw Error(o(363));E=kc(E,R);var oe=Df(E,I,Z).disconnect;return{disconnect:function(){oe()}}},Fn.shouldError=function(){return null},Fn.shouldSuspend=function(){return!1},Fn.startHostTransition=function(E,R,I,Z){if(E.tag!==5)throw Error(o(476));var oe=lr(E).queue;Nl(E,oe,R,ri,I===null?s:function(){var he=lr(E).next.queue;return Qr(E,he,{},gr()),I(Z)})},Fn.updateContainer=function(E,R,I,Z){var oe=R.current,he=gr();return Eh(oe,he,E,R,I,Z),he},Fn.updateContainerSync=function(E,R,I,Z){return Eh(R.current,2,E,R,I,Z),2},Fn},t.exports.default=t.exports,Object.defineProperty(t.exports,"__esModule",{value:!0})}(reactReconciler_production)),reactReconciler_production.exports}var hasRequiredReactReconciler;function requireReactReconciler(){return hasRequiredReactReconciler||(hasRequiredReactReconciler=1,reactReconciler.exports=requireReactReconciler_production()),reactReconciler.exports}var reactReconcilerExports=requireReactReconciler();const ReactFiberReconciler=getDefaultExportFromCjs(reactReconcilerExports);var constants={exports:{}},reactReconcilerConstants_production={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactReconcilerConstants_production;function requireReactReconcilerConstants_production(){return hasRequiredReactReconcilerConstants_production||(hasRequiredReactReconcilerConstants_production=1,reactReconcilerConstants_production.ConcurrentRoot=1,reactReconcilerConstants_production.ContinuousEventPriority=8,reactReconcilerConstants_production.DefaultEventPriority=32,reactReconcilerConstants_production.DiscreteEventPriority=2,reactReconcilerConstants_production.IdleEventPriority=268435456,reactReconcilerConstants_production.LegacyRoot=0,reactReconcilerConstants_production.NoEventPriority=0),reactReconcilerConstants_production}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants.exports=requireReactReconcilerConstants_production()),constants.exports}var constantsExports=requireConstants(),GlobalExports=requireGlobal();const propsToSkip={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let zIndexWarningShowed=!1,dragWarningShowed=!1;const EVENTS_NAMESPACE=".react-konva-event",DRAGGABLE_WARNING=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Z_INDEX_WARNING=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,EMPTY_PROPS={};function applyNodeProps(t,e,n=EMPTY_PROPS){if(!zIndexWarningShowed&&"zIndex"in e&&(console.warn(Z_INDEX_WARNING),zIndexWarningShowed=!0),!dragWarningShowed&&e.draggable){var s=e.x!==void 0||e.y!==void 0,o=e.onDragEnd||e.onDragMove;s&&!o&&(console.warn(DRAGGABLE_WARNING),dragWarningShowed=!0)}for(var u in n)if(!propsToSkip[u]){var d=u.slice(0,2)==="on",g=n[u]!==e[u];if(d&&g){var y=u.substr(2).toLowerCase();y.substr(0,7)==="content"&&(y="content"+y.substr(7,1).toUpperCase()+y.substr(8)),t.off(y,n[u])}var v=!e.hasOwnProperty(u);v&&t.setAttr(u,void 0)}var w=e._useStrictMode,T={},A=!1;const C={};for(var u in e)if(!propsToSkip[u]){var d=u.slice(0,2)==="on",j=n[u]!==e[u];if(d&&j){var y=u.substr(2).toLowerCase();y.substr(0,7)==="content"&&(y="content"+y.substr(7,1).toUpperCase()+y.substr(8)),e[u]&&(C[y]=e[u])}!d&&(e[u]!==n[u]||w&&e[u]!==t.getAttr(u))&&(A=!0,T[u]=e[u])}A&&(t.setAttrs(T),updatePicture(t));for(var y in C)t.off(y+EVENTS_NAMESPACE),t.on(y+EVENTS_NAMESPACE,C[y])}function updatePicture(t){if(!GlobalExports.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}var schedulerExports=requireScheduler();const NO_CONTEXT={},UPDATE_SIGNAL={};Konva.Node.prototype._applyProps=applyNodeProps;let currentUpdatePriority=constantsExports.DefaultEventPriority;function appendInitialChild(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),updatePicture(t)}function createInstance(t,e,n){let s=Konva[t];s||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),s=Konva.Group);const o={},u={};for(var d in e)if(d!=="ref"){var g=d.slice(0,2)==="on";g?u[d]=e[d]:o[d]=e[d]}const y=new s(o);return applyNodeProps(y,u),y}function createTextInstance(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function finalizeInitialChildren(t,e,n){return!1}function getPublicInstance(t){return t}function prepareForCommit(){return null}function preparePortalMount(){return null}function prepareUpdate(t,e,n,s){return UPDATE_SIGNAL}function resetAfterCommit(){}function resetTextContent(t){}function shouldDeprioritizeSubtree(t,e){return!1}function getRootHostContext(){return NO_CONTEXT}function getChildHostContext(){return NO_CONTEXT}const scheduleTimeout=setTimeout,cancelTimeout=clearTimeout,supportsMicrotasks=!0,scheduleMicrotask=t=>{t()},noTimeout=-1;function shouldSetTextContent(t,e){return!1}const isPrimaryRenderer=!1,warnsIfNotActing=!1,supportsMutation=!0,supportsPersistence=!1,supportsHydration=!1;function appendChild(t,e){e.parent===t?e.moveToTop():t.add(e),updatePicture(t)}function appendChildToContainer(t,e){e.parent===t?e.moveToTop():t.add(e),updatePicture(t)}function insertBefore(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),updatePicture(t)}function insertInContainerBefore(t,e,n){insertBefore(t,e,n)}function removeChild(t,e){e.destroy(),e.off(EVENTS_NAMESPACE),updatePicture(t)}function removeChildFromContainer(t,e){e.destroy(),e.off(EVENTS_NAMESPACE),updatePicture(t)}function commitTextUpdate(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function commitMount(t,e,n){}function commitUpdate(t,e,n,s){applyNodeProps(t,s,n)}function hideInstance(t){t.hide(),updatePicture(t)}function hideTextInstance(t){}function unhideInstance(t,e){(e.visible==null||e.visible)&&t.show()}function unhideTextInstance(t,e){}function clearContainer(t){}function detachDeletedInstance(){}function getCurrentEventPriority(){return constantsExports.DefaultEventPriority}function prepareScopeUpdate(){}function getInstanceFromScope(){return null}function setCurrentUpdatePriority(t){currentUpdatePriority=t}function getCurrentUpdatePriority(){return currentUpdatePriority}function resolveUpdatePriority(){return constantsExports.DiscreteEventPriority}function shouldAttemptEagerTransition(){return!1}function requestPostPaintCallback(){}function maySuspendCommit(){return!1}function preloadInstance(){return!0}function startSuspendingCommit(){}function suspendInstance(){}function waitForCommitToBeReady(){return null}const NotPendingTransition=null;function resetFormInstance(){}const HostConfig=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition,appendChild,appendChildToContainer,appendInitialChild,cancelTimeout,clearContainer,commitMount,commitTextUpdate,commitUpdate,createInstance,createTextInstance,detachDeletedInstance,finalizeInitialChildren,getChildHostContext,getCurrentEventPriority,getCurrentUpdatePriority,getInstanceFromScope,getPublicInstance,getRootHostContext,hideInstance,hideTextInstance,idlePriority:schedulerExports.unstable_IdlePriority,insertBefore,insertInContainerBefore,isPrimaryRenderer,maySuspendCommit,noTimeout,now:schedulerExports.unstable_now,preloadInstance,prepareForCommit,preparePortalMount,prepareScopeUpdate,prepareUpdate,removeChild,removeChildFromContainer,requestPostPaintCallback,resetAfterCommit,resetFormInstance,resetTextContent,resolveUpdatePriority,run:schedulerExports.unstable_runWithPriority,scheduleMicrotask,scheduleTimeout,setCurrentUpdatePriority,shouldAttemptEagerTransition,shouldDeprioritizeSubtree,shouldSetTextContent,startSuspendingCommit,supportsHydration,supportsMicrotasks,supportsMutation,supportsPersistence,suspendInstance,unhideInstance,unhideTextInstance,waitForCommitToBeReady,warnsIfNotActing},Symbol.toStringTag,{value:"Module"}));function i(t,e,n){if(!t)return;if(n(t)===!0)return t;let s=t.child;for(;s;){const o=i(s,e,n);if(o)return o;s=s.sibling}}function l(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const a=l(reactExports.createContext(null));class m extends reactExports.Component{render(){return reactExports.createElement(a.Provider,{value:this._reactInternals},this.props.children)}}function c(){const t=reactExports.useContext(a);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=reactExports.useId();return reactExports.useMemo(()=>{for(const n of[t,t==null?void 0:t.alternate]){if(!n)continue;const s=i(n,!1,o=>{let u=o.memoizedState;for(;u;){if(u.memoizedState===e)return!0;u=u.next}});if(s)return s}},[t,e])}const p=Symbol.for("react.context"),b=t=>t!==null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===p;function h(){const t=c(),[e]=reactExports.useState(()=>new Map);e.clear();let n=t;for(;n;){const s=n.type;b(s)&&s!==a&&!e.has(s)&&e.set(s,reactExports.use(l(s))),n=n.return}return e}function x(){const t=h();return reactExports.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>s=>reactExports.createElement(e,null,reactExports.createElement(n.Provider,{...s,value:t.get(n)})),e=>reactExports.createElement(m,{...e})),[t])}if(React.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function usePrevious$1(t){const e=React.useRef({});return React.useLayoutEffect(()=>{e.current=t}),React.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const useIsReactStrictMode=()=>{const t=React.useRef(0);return React.useMemo(()=>{t.current++},[]),t.current>1},StageWrap=t=>{const e=React.useRef(null),n=React.useRef(null),s=React.useRef(null),o=usePrevious$1(t),u=x(),d=React.useRef(!1),g=v=>{const{forwardedRef:w}=t;w&&(typeof w=="function"?w(v):w.current=v)},y=useIsReactStrictMode();return React.useLayoutEffect(()=>d.current&&y?()=>{d.current=!1,g(null),KonvaRenderer.updateContainer(null,s.current,null),n.current.destroy()}:(d.current=!0,n.current=new Konva.Stage({width:t.width,height:t.height,container:e.current}),g(n.current),s.current=KonvaRenderer.createContainer(n.current,constantsExports.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),KonvaRenderer.updateContainer(React.createElement(u,{},t.children),s.current,null,()=>{}),()=>{y||(g(null),KonvaRenderer.updateContainer(null,s.current,null),n.current.destroy())}),[]),React.useLayoutEffect(()=>{g(n.current),applyNodeProps(n.current,t,o),KonvaRenderer.updateContainer(React.createElement(u,{},t.children),s.current,null)}),React.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},KonvaRenderer=ReactFiberReconciler(HostConfig);KonvaRenderer.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:React.version,rendererPackageName:"react-konva"});React.forwardRef((t,e)=>React.createElement(m,{},React.createElement(StageWrap,{...t,forwardedRef:e})));IMAGE_SECTIONS.ESCALACAO;IMAGE_SECTIONS.MATCHDAY;IMAGE_SECTIONS.MAN_OF_THE_MATCH;IMAGE_SECTIONS.PROXIMO_JOGO,IMAGE_SECTIONS.FIM_DE_JOGO,IMAGE_SECTIONS.CONFRONTO,IMAGE_SECTIONS.INICIO_JOGO;var dist={},bind={},hasRequiredBind;function requireBind(){if(hasRequiredBind)return bind;hasRequiredBind=1,Object.defineProperty(bind,"__esModule",{value:!0}),bind.bind=void 0;function t(e,n){var s=n.type,o=n.listener,u=n.options;return e.addEventListener(s,o,u),function(){e.removeEventListener(s,o,u)}}return bind.bind=t,bind}var bindAll={},hasRequiredBindAll;function requireBindAll(){if(hasRequiredBindAll)return bindAll;hasRequiredBindAll=1;var t=bindAll&&bindAll.__assign||function(){return t=Object.assign||function(u){for(var d,g=1,y=arguments.length;g<y;g++){d=arguments[g];for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(u[v]=d[v])}return u},t.apply(this,arguments)};Object.defineProperty(bindAll,"__esModule",{value:!0}),bindAll.bindAll=void 0;var e=requireBind();function n(u){if(!(typeof u>"u"))return typeof u=="boolean"?{capture:u}:u}function s(u,d){if(d==null)return u;var g=t(t({},u),{options:t(t({},n(d)),n(u.options))});return g}function o(u,d,g){var y=d.map(function(v){var w=s(v,g);return(0,e.bind)(u,w)});return function(){y.forEach(function(w){return w()})}}return bindAll.bindAll=o,bindAll}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.bindAll=t.bind=void 0;var e=requireBind();Object.defineProperty(t,"bind",{enumerable:!0,get:function(){return e.bind}});var n=requireBindAll();Object.defineProperty(t,"bindAll",{enumerable:!0,get:function(){return n.bindAll}})}(dist)),dist}var distExports=requireDist();function once(t){var e=null;return function(){if(!e){for(var s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];var d=t.apply(this,o);e={result:d}}return e.result}}var isSafari=once(function t(){var e=navigator,n=e.userAgent;return n.includes("AppleWebKit")&&!n.includes("Chrome")}),symbols={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};(function t(){if(typeof window>"u"||!isSafari())return;function e(){return{enterCount:0,isOverWindow:!1}}var n=e();function s(){n=e()}distExports.bindAll(window,[{type:"dragstart",listener:function(){n.enterCount=0,n.isOverWindow=!0}},{type:"drop",listener:s},{type:"dragend",listener:s},{type:"dragenter",listener:function(u){!n.isOverWindow&&n.enterCount===0&&(u[symbols.isEnteringWindow]=!0),n.isOverWindow=!0,n.enterCount++}},{type:"dragleave",listener:function(u){n.enterCount--,n.isOverWindow&&n.enterCount===0&&(u[symbols.isLeavingWindow]=!0,n.isOverWindow=!1)}}],{capture:!0})})();const proportionPlayerNameNumber=47/28,proportionReserveNamesTitle=24/18,proportionCoachNameTitle=31/18,escalacaoConfigs={quadrada:{canvasWidth:1080,canvasHeight:1080,logoX:921,logoY:31,logoSize:123,placarX:82,placarY:-75,placarSize:450,jogadorX:484,jogadorY:100,jogadorSize:950,startYJogadores:229,lineHeightJogadores:54.5,playerNumberX:183,playerNameX:198,reserveBlockOffsetY:-30,reserveBancoX:184,reserveNamesX:198,coachOffsetY:0,coachBancoX:184,coachNameX:198,footerY:1005,stadiumX:198,stadiumY:970,dateX:198,dateY:995,competitionX:198,competitionY:1020},vertical:{canvasWidth:1080,canvasHeight:1920,logoX:865,logoY:203,logoSize:175,placarX:52,placarY:33,placarSize:690,jogadorX:400,jogadorY:407,jogadorSize:950,startYJogadores:507,lineHeightJogadores:71,playerNumberX:212,playerNameX:230,reserveBlockOffsetY:-30,reserveBancoX:212,reserveNamesX:230,coachOffsetY:0,coachBancoX:212,coachNameX:230,footerY:1545,stadiumX:230,stadiumY:1545,dateX:230,dateY:1570,competitionX:230,competitionY:1595,playerNumberFontSize:36,playerNameFontSize:36*proportionPlayerNameNumber,reserveBancoFontSize:20,reserveNamesFontSize:20*proportionReserveNamesTitle,coachBancoFontSize:20,coachNameFontSize:20*proportionCoachNameTitle},horizontal:{canvasWidth:1920,canvasHeight:1080,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,jogadorX:175,jogadorY:100,jogadorSize:950,startYJogadores:260,lineHeightJogadores:54.5,playerNumberX:970,playerNameX:990,reserveBlockOffsetY:-30,reserveBancoX:970,reserveNamesX:990,coachOffsetY:0,coachBancoX:970,coachNameX:990,footerY:1005,stadiumX:30,stadiumY:1005,dateX:30,dateY:1030,competitionX:30,competitionY:1055}},EscalacaoGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{const{baseImages:o}=useImages(),[u,d]=reactExports.useState(escalacaoConfigs),[g,y]=reactExports.useState(null),[v,w]=reactExports.useState("quadrada"),[T,A]=reactExports.useState(["fundo","placar","logo","jogador","titulares","reservas","tecnico","info"]),[C,j]=reactExports.useState(null),D=reactExports.useRef(null),H=reactExports.useRef(null),ne=reactExports.useRef(null),Y=reactExports.useRef(null),U=reactExports.useRef(null),ee={primary:"#ffffff",secondary:"#1ae9de"},[J,ie]=reactExports.useState(1),[se,K]=reactExports.useState(!1),[te,re]=reactExports.useState(!1),[ce,le]=reactExports.useState(!1),[ue,_e]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null,formation:null,selectedPlayers:{},reservePlayers:[],coach:"Arne Slot"}),Ee=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione ou preencha os dados da partida"},{id:2,title:"Arte do Jogo",icon:Palette,description:"Selecione a arte do jogo e jogador destaque"},{id:3,title:"Formação Tática",icon:Target,description:"Escolha a formação que será utilizada"},{id:4,title:"Seleção de Jogadores",icon:Users,description:"Selecione os jogadores para cada posição"},{id:5,title:"Gerar Escalação",icon:Image$2,description:"Gere a imagem final da escalação"}],[we,de]=reactExports.useState(!1),me=Fe=>{switch(Fe){case 2:return we;case 3:return!!ue.gameArt&&!!ue.featuredPlayer;case 4:return!!ue.formation;case 5:return ue.formation?!!ue.formation.positions.every(De=>ue.selectedPlayers[De.id]):!1;default:return!0}},xe=()=>{var Fe;J===1&&(Fe=U.current)!=null&&Fe.submitManualData&&!U.current.canProceed&&!U.current.submitManualData()||ie(je=>je+1)},pe=Fe=>{const je=new Date(Fe.fixture.date),De=convertToSaoPauloTime(je),Ie={homeTeam:Fe.teams.home.name,awayTeam:Fe.teams.away.name,competition:formatCompetitionRound(Fe,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:Fe.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:Fe.fixture.referee||"",stadium:Fe.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(De),competitionRound:formatCompetitionRound(Fe,e)};j(Fe),_e(Re=>({...Re,matchData:Ie}))},ve=(Fe,je,De)=>{_e(Ie=>({...Ie,gameArt:Fe,featuredPlayer:je,featuredPlayerImageUrl:De}))},Oe=Fe=>{_e(je=>({...je,formation:Fe,selectedPlayers:{}})),ie(4)},Te=Fe=>{_e(je=>({...je,selectedPlayers:Fe}))},Le=Fe=>{_e(je=>({...je,reservePlayers:Fe}))},Me=reactExports.useCallback(Fe=>new Promise((je,De)=>{const Ie=new Image;Ie.crossOrigin="anonymous",Ie.onload=()=>je(Ie),Ie.onerror=De,Ie.src=Fe}),[]),Ce=reactExports.useCallback(async(Fe,je,De)=>{var pt,Ze,mn;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const Ie=Fe.current;if(!Ie)return;const Re=Ie.getContext("2d");if(!Re||(Ie.width=je.canvasWidth,Ie.height=je.canvasHeight,Re.clearRect(0,0,Ie.width,Ie.height),De.length===0))return;const Ne=Ut=>{Ut.shadowColor="rgba(0, 0, 0, 0.8)",Ut.shadowOffsetX=2,Ut.shadowOffsetY=2,Ut.shadowBlur=5},Ue=Ut=>{Ut.shadowColor="transparent",Ut.shadowOffsetX=0,Ut.shadowOffsetY=0,Ut.shadowBlur=0};for(const Ut of De)if(Ue(Re),Ut==="fundo")try{const Lt=(pt=o.find(Gt=>Gt.section==="escalacao"&&Gt.type===je.imageType))==null?void 0:pt.url;if(!Lt)throw new Error("Imagem de fundo para escalação não encontrada");const Dt=await Me(Lt);Re.drawImage(Dt,0,0,Ie.width,Ie.height)}catch{const Dt=Re.createLinearGradient(0,0,0,Ie.height);Dt.addColorStop(0,"#dc2626"),Dt.addColorStop(1,"#991b1b"),Re.fillStyle=Dt,Re.fillRect(0,0,Ie.width,Ie.height)}else if(Ut==="logo")try{const Lt=await Me("/caminhantes-clock.png");Re.drawImage(Lt,je.logoX,je.logoY,je.logoSize,je.logoSize)}catch{console.warn("Erro ao carregar logo")}else if(Ut==="placar"&&ue.gameArt){if(Y.current){K(!0);try{const Lt=await domtoimage.toPng(Y.current,{quality:1,bgcolor:void 0}),Dt=new Image;Dt.src=Lt,await new Promise((Gt,Ke)=>{Dt.onload=()=>Gt(),Dt.onerror=rt=>Ke(rt)}),Re.drawImage(Dt,je.placarX,je.placarY,je.placarSize,je.placarSize*(720/1280)),re(!0)}catch(Lt){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",Lt)}finally{K(!1)}}}else if(Ut==="jogador"&&ue.featuredPlayerImageUrl)try{const Lt=await Me(ue.featuredPlayerImageUrl),Dt=je.jogadorSize*1062/666;Re.drawImage(Lt,je.jogadorX,je.jogadorY,je.jogadorSize,Dt)}catch{console.warn("Erro ao carregar jogador destaque")}else if(Ut==="titulares"&&ue.formation){let Lt=je.startYJogadores;Ne(Re),ue.formation.positions.forEach(Dt=>{const Gt=ue.selectedPlayers[Dt.id];if(Gt){Re.fillStyle=ee.secondary;const Ke=je.playerNumberFontSize||28;Re.font=`800 ${Ke}px "Funnel Display", sans-serif`,Re.textAlign="right",Re.fillText(String(Gt.number),je.playerNumberX,Lt),Re.fillStyle=ee.primary;const rt=je.playerNameFontSize||47;Re.font=`800 ${rt}px "Funnel Display", sans-serif`,Re.textAlign="left",Re.fillText(Gt.name.toUpperCase(),je.playerNameX,Lt),Lt+=je.lineHeightJogadores}}),Ue(Re)}else if(Ut==="reservas"&&ue.reservePlayers.length>0){let Lt=je.startYJogadores+(((Ze=ue.formation)==null?void 0:Ze.positions.length)||11)*je.lineHeightJogadores+je.reserveBlockOffsetY;const Dt=ue.reservePlayers.map(Sn=>Sn.name).join(", "),Gt=je.imageType==="quadrada"?300:je.imageType==="vertical"?400:300,Ke=je.reserveNamesFontSize||18;Re.font=`${Ke}px "Funnel Display", sans-serif`;const rt=Dt.split(" ");let Ct=[],tt="";for(let Sn=0;Sn<rt.length;Sn++){const Hn=tt+rt[Sn]+" ";Re.measureText(Hn).width>Gt&&Sn>0?(Ct.push(tt.trim()),tt=rt[Sn]+" "):tt=Hn}Ct.push(tt.trim());const Et=25,un=Ct.length*Et;Ne(Re),Re.fillStyle=ee.secondary;const hn=je.reserveBancoFontSize||18;Re.font=`800 ${hn}px "Funnel Display", sans-serif`,Re.textAlign="right",Re.fillText("BANCO",je.reserveBancoX,Lt+un/2+9+15),Re.fillStyle=ee.primary;const xn=je.reserveNamesFontSize||24;Re.font=`800 ${xn}px "Funnel Display", sans-serif`,Re.textAlign="left";let Dn=Lt+15;for(const Sn of Ct)Re.fillText(Sn.toUpperCase(),je.reserveNamesX,Dn+Et),Dn+=Et;Ue(Re)}else if(Ut==="tecnico"&&ue.coach){let Lt=je.startYJogadores+(((mn=ue.formation)==null?void 0:mn.positions.length)||11)*je.lineHeightJogadores+je.reserveBlockOffsetY+175;Ne(Re),Re.fillStyle=ee.secondary;const Dt=je.coachBancoFontSize||18;Re.font=`800 ${Dt}px "Funnel Display", sans-serif`,Re.textAlign="right",Re.fillText("TÉCNICO",je.coachBancoX,Lt),Re.fillStyle=ee.primary;const Gt=je.coachNameFontSize||31;Re.font=`800 ${Gt}px "Funnel Display", sans-serif`,Re.textAlign="left",Re.fillText(ue.coach.toUpperCase(),je.coachNameX,Lt),Ue(Re)}else if(Ut==="info"&&ue.matchData){Ne(Re),Re.fillStyle=ee.primary;const Lt=20;Re.font=`800 ${Lt}px "Funnel Display", sans-serif`,Re.textAlign=je.imageType==="horizontal"?"left":"center";const{stadium:Dt,date:Gt,referee:Ke,competitionRound:rt}=ue.matchData,Ct=[rt.toUpperCase()];Ke&&Ct.push(`ÁRBITRO: ${Ke.toUpperCase()}`);const tt=Ct.join(" - "),Et=`${Dt.toUpperCase()} - ${Gt.toUpperCase()}`,un=je.imageType==="horizontal"?30:Ie.width/2,hn=je.footerY,xn=Lt*1.4,Dn=hn+xn,Sn=25;Re.fillText(tt,un,hn+Sn),Re.fillText(Et,un,Dn+Sn),Ue(Re)}},[o,ue,Me]),be=reactExports.useCallback(()=>{if(J!==5)return;K(!0);const Fe={imageType:v,...u[v]},je=g?T.indexOf(g):-1,De=je>-1?T.slice(0,je):T,Ie=je>-1?[T[je]]:[],Re=je>-1?T.slice(je+1):[];Promise.all([Ce(D,Fe,De),Ce(H,Fe,Ie),Ce(ne,Fe,Re)]).then(()=>{K(!1),re(!0)})},[J,u,v,g,T]);reactExports.useEffect(()=>{be()},[g,v,ue,T,be]),reactExports.useEffect(()=>{if(J!==5||!g)return;const Fe=u[v];Ce(H,Fe,[g])},[u,g,v,J]);const Ve=()=>{var Re;const Fe=document.createElement("canvas"),je=u[v];Fe.width=je.canvasWidth,Fe.height=je.canvasHeight;const De=Fe.getContext("2d");if(!De||!D.current||!H.current||!ne.current){console.error("Download abortado: um ou mais refs de canvas não estão prontos.");return}De.drawImage(D.current,0,0),De.drawImage(H.current,0,0),De.drawImage(ne.current,0,0);const Ie=document.createElement("a");Ie.download=`escalacao-liverpool-${((Re=ue.matchData)==null?void 0:Re.matchDate)||"custom"}-${v}.png`,Ie.href=Fe.toDataURL("image/png"),Ie.click()},$e=Fe=>{me(Fe)&&ie(Fe)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Gerador de Escalações"}),C&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:Y,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:C,awayPenScore:null,awayScore:null,homePenScore:null,homeScore:null})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:Ee,currentStep:J,onStepClick:$e,canAdvanceToStep:me}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[J===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:U,onMatchSelected:pe,escalacaoData:ue,onValidationChange:de,translations:e}),J===2&&jsxRuntimeExports.jsx(GameArtSelector,{onArtSelect:ve,escalacaoData:ue,setEscalacaoData:_e}),J===3&&jsxRuntimeExports.jsx(FormationSelector,{selectedFormation:ue.formation,onFormationSelect:Oe}),J===4&&ue.formation&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(PlayerSelector,{isOfficialLineUp:ce,formation:ue.formation,selectedPlayers:ue.selectedPlayers,onPlayersChange:Te,reservePlayers:ue.reservePlayers,onReservePlayersChange:Le,maxReserves:11,onOfficialStatusChange:le}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Técnico"}),jsxRuntimeExports.jsx("input",{type:"text",value:ue.coach,onChange:Fe=>_e(je=>({...je,coach:Fe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display",placeholder:"Nome do técnico"})]})]}),J===5&&C&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-bold text-gray-800 mb-2",children:"Gerar Escalação Final"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Ajuste os elementos e a ordem das camadas antes de gerar."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:v,onChange:Fe=>w(Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"}),jsxRuntimeExports.jsx("option",{value:"horizontal",children:"Horizontal"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:g??"",onChange:Fe=>y(Fe.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),T.map(Fe=>jsxRuntimeExports.jsx("option",{value:Fe,className:"capitalize",children:Fe},Fe))]})]}),g&&jsxRuntimeExports.jsx(PositionController,{elementName:g,onMove:(Fe,je)=>d(De=>{const Ie=JSON.parse(JSON.stringify(De)),Re=`${g}${Fe.toUpperCase()}`;return typeof Ie[v][Re]=="number"&&(Ie[v][Re]+=je),Ie}),onResize:Fe=>d(je=>{const De=JSON.parse(JSON.stringify(je)),Ie=`${g}Size`;return typeof De[v][Ie]=="number"&&(De[v][Ie]+=Fe),De})}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:T,setRenderOrder:A})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${u[v].canvasHeight/u[v].canvasWidth*100}%`},children:[D,H,ne].map((Fe,je)=>jsxRuntimeExports.jsx("canvas",{ref:Fe,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:je+1}},je))})})]}),C&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"escalacao",match:C,translations:e,escalacaoOficial:ce}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-4",children:[jsxRuntimeExports.jsx(Button,{onClick:be,disabled:se,className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer font-display-medium",children:se?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),te&&jsxRuntimeExports.jsxs(Button,{onClick:Ve,disabled:se,variant:"outline",className:"cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download PNG"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${J===1?"justify-end":"justify-between"} mt-6`,children:[J!==1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>ie(Math.max(1,J-1)),disabled:J===1,variant:"outline",className:"cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),J!==5&&jsxRuntimeExports.jsxs(Button,{onClick:xe,disabled:J===5||!me(J+1),className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer font-display-medium",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},initialImageGeneratorConfigs$6={quadrada:{canvasWidth:1080,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:921,logoY:31,logoSize:123,placarX:80,placarY:565,placarSize:930,jogadorX:121,jogadorY:85,jogadorSize:900,motmTextX:540,motmTextY:195,motmTextSize:1,playerNumberX:900,playerNumberY:300,playerNumberSize:1},vertical:{canvasWidth:1080,canvasHeight:1920,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:30,logoY:1393,logoSize:95,placarX:115,placarY:923,placarSize:875,jogadorX:105,jogadorY:300,jogadorSize:1025,motmTextX:540,motmTextY:365,motmTextSize:1,playerNumberX:900,playerNumberY:470,playerNumberSize:1},horizontal:{canvasWidth:1920,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1920,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,jogadorX:647,jogadorY:100,jogadorSize:900,motmTextX:960,motmTextY:880,motmTextSize:1,playerNumberX:30,playerNumberY:1005,playerNumberSize:1}},MotmGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{var be,Ve,$e,Fe;const{baseImages:o}=useImages(),[u,d]=reactExports.useState(initialImageGeneratorConfigs$6),g=reactExports.useRef(null),y=reactExports.useRef(null),v=reactExports.useRef(null),w=reactExports.useRef(null),[T,A]=reactExports.useState(["background","logo","nome","numero","jogador","placar"]),[C,j]=reactExports.useState(null),[D,H]=reactExports.useState("quadrada"),[ne,Y]=reactExports.useState(null),U=reactExports.useRef(null),ee={primary:"#ffffff",secondary:"#1ae9de"},[J,ie]=reactExports.useState(1),[se,K]=reactExports.useState(!1),[te,re]=reactExports.useState(!1),[ce,le]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null}),ue=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Arte e Jogador",icon:Palette,description:"Selecione a arte e o jogador"},{id:3,title:"Gerar Imagem",icon:Image$2,description:"Ajuste e gere a imagem"}],[_e,Ee]=reactExports.useState(!1),we=je=>{switch(je){case 2:return _e;case 3:return!!ce.gameArt&&!!ce.featuredPlayer;default:return!0}},de=()=>{J===1&&U.current&&!U.current.canProceed&&!U.current.submitManualData()||ie(je=>je+1)},me=je=>{const De=new Date(je.fixture.date),Ie=convertToSaoPauloTime(De),Re={homeTeam:"Liverpool",awayTeam:"Adversário",competition:formatCompetitionRound(je,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:je.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:je.fixture.referee||"",stadium:je.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(Ie),competitionRound:formatCompetitionRound(je,e)};Y(je),le(Ne=>({...Ne,matchData:Re}))},xe=(je,De,Ie)=>{le(Re=>({...Re,gameArt:je,featuredPlayer:De,featuredPlayerImageUrl:Ie}))},pe=reactExports.useCallback(je=>new Promise((De,Ie)=>{const Re=new Image;Re.crossOrigin="anonymous",Re.onload=()=>De(Re),Re.onerror=()=>Ie(new Error(`Falha ao carregar imagem: ${je}`)),Re.src=je}),[]),ve=reactExports.useCallback(async(je,De,Ie)=>{var Ue;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const Re=je.current;if(!Re)return;const Ne=Re.getContext("2d");if(Ne){Re.width=De.canvasWidth,Re.height=De.canvasHeight,Ne.clearRect(0,0,Re.width,Re.height);for(const pt of Ie)if(pt==="background")try{const Ze=(Ue=o.find(mn=>mn.type===D&&mn.section==="man_of_the_match"))==null?void 0:Ue.url;if(Ze){const mn=await pe(Ze),Ut=mn.height/mn.width,Lt=De.backgroundSize,Dt=Lt*Ut;Ne.drawImage(mn,De.backgroundX,De.backgroundY,Lt,Dt)}}catch(Ze){console.warn(Ze)}else if(pt==="logo")try{const Ze=await pe("/caminhantes-clock.png");Ne.drawImage(Ze,De.logoX,De.logoY,De.logoSize,De.logoSize)}catch(Ze){console.error(Ze)}else if(pt==="placar"&&ce.gameArt){if(w.current){K(!0);try{const Ze=await domtoimage.toPng(w.current,{quality:1,bgcolor:void 0}),mn=new Image;mn.src=Ze,await new Promise((Ut,Lt)=>{mn.onload=()=>Ut(),mn.onerror=Dt=>Lt(Dt)}),Ne.drawImage(mn,De.placarX,De.placarY,De.placarSize,De.placarSize*(720/1280)),re(!0)}catch(Ze){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",Ze)}finally{K(!1)}}}else if(pt==="jogador"&&ce.featuredPlayerImageUrl)try{const Ze=await pe(ce.featuredPlayerImageUrl),mn=1062/666,Ut=De.jogadorSize,Lt=Ut*mn;Ne.drawImage(Ze,De.jogadorX,De.jogadorY,Ut,Lt)}catch(Ze){console.error(Ze)}else if(pt==="nome"&&ce.featuredPlayer){Ne.textAlign="center";const Ze=De.motmTextSize;Ne.fillStyle=ee.primary,Ne.shadowColor="rgba(0, 0, 0, 0.5)",Ne.shadowOffsetX=5*Ze,Ne.shadowOffsetY=5*Ze,Ne.shadowBlur=5*Ze,Ne.font=`500 ${300*Ze}px "Lovers Quarrel", sans-serif`,Ne.fillText(ce.featuredPlayer.name,De.motmTextX,De.motmTextY),Ne.shadowColor="transparent",Ne.shadowOffsetX=0,Ne.shadowOffsetY=0,Ne.shadowBlur=0}else if(pt==="numero"&&ce.featuredPlayer){Ne.textAlign="center";const Ze=De.playerNumberSize;Ne.fillStyle=ee.primary,Ne.shadowColor="rgba(0, 0, 0, 0.75)",Ne.shadowOffsetX=5*Ze,Ne.shadowOffsetY=5*Ze,Ne.shadowBlur=10*Ze,Ne.font=`400 ${80*Ze}px "Lovers Quarrel", sans-serif`,Ne.fillText(`#${ce.featuredPlayer.number.toUpperCase()}`,De.playerNumberX,De.playerNumberY),Ne.fillStyle=ee.primary}}},[ce,o,ee,D,pe]),Oe=reactExports.useCallback(()=>{if(J!==3||!g.current||!y.current||!v.current)return;K(!0);const je=u[D],De=C?T.indexOf(C):-1,Ie=De>-1?T.slice(0,De):T,Re=De>-1?[T[De]]:[],Ne=De>-1?T.slice(De+1):[];Promise.all([ve(g,je,Ie),ve(y,je,Re),ve(v,je,Ne)]).then(()=>{K(!1),re(!0)}).catch(Ue=>{console.error("Erro ao desenhar camadas:",Ue),K(!1)})},[J,u,D,C,T]);reactExports.useEffect(()=>{Oe()},[Oe]),reactExports.useEffect(()=>{if(J!==3||!C||!y.current)return;const je=u[D];ve(y,je,[C])},[u,C,D,J]);const Te=()=>{var Ne;const je=document.createElement("canvas"),De=u[D];je.width=De.canvasWidth,je.height=De.canvasHeight;const Ie=je.getContext("2d");if(!Ie||!g.current||!y.current||!v.current)return;Ie.drawImage(g.current,0,0),Ie.drawImage(y.current,0,0),Ie.drawImage(v.current,0,0);const Re=document.createElement("a");Re.href=je.toDataURL("image/png"),Re.download=`motm-${((Ne=ce.featuredPlayer)==null?void 0:Ne.name)||"jogador"}-${D}.png`,Re.click()},Le=(je,De)=>{C&&d(Ie=>{const Re=`${C}X`,Ne=`${C}Y`,Ue={...Ie[D]};return je==="x"&&Re in Ue?Ue[Re]+=De:je==="y"&&Ne in Ue&&(Ue[Ne]+=De),{...Ie,[D]:Ue}})},Me=je=>{C&&d(De=>{const Ie=`${C}Size`,Re={...De[D]};return Ie in Re&&(Ie==="playerNumberSize"||Ie==="motmTextSize"?Re[Ie]+=je/100:Re[Ie]+=je),{...De,[D]:Re}})},Ce=je=>{we(je)&&ie(je)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Man of The Match"}),ne&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:w,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:ne,awayPenScore:((Ve=(be=ne.score)==null?void 0:be.penalty)==null?void 0:Ve.away)??null,awayScore:ne.goals.away,homePenScore:((Fe=($e=ne.score)==null?void 0:$e.penalty)==null?void 0:Fe.home)??null,homeScore:ne.goals.home})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:ue,currentStep:J,onStepClick:Ce,canAdvanceToStep:we}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[J===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:U,onMatchSelected:me,escalacaoData:{...ce,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:Ee,translations:e,pastMatches:!0}),J===2&&jsxRuntimeExports.jsx(GameArtSelector,{onArtSelect:xe,escalacaoData:{...ce,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},setEscalacaoData:je=>le(De=>{let Ie;if(typeof je=="function"){const Re={...De,formation:null,selectedPlayers:{},reservePlayers:[],coach:""};Ie=je(Re)}else Ie=je;return{...De,gameArt:Ie.gameArt,featuredPlayer:Ie.featuredPlayer,featuredPlayerImageUrl:Ie.featuredPlayerImageUrl}})}),J===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:D,onChange:je=>H(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:C??"",onChange:je=>j(je.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),T.map(je=>jsxRuntimeExports.jsx("option",{value:je,className:"capitalize",children:je},je))]})]}),C&&jsxRuntimeExports.jsx(PositionController,{elementName:C,onMove:Le,onResize:Me}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:T,setRenderOrder:A})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${u[D].canvasHeight/u[D].canvasWidth*100}%`},children:[g,y,v].map((je,De)=>jsxRuntimeExports.jsx("canvas",{ref:je,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:De+1}},De))})})]}),ne&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"melhorDaPartida",match:ne,translations:e}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-4",children:[jsxRuntimeExports.jsx(Button,{onClick:Oe,disabled:se,className:"bg-red-600 hover:bg-red-700 text-white",children:se?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),te&&jsxRuntimeExports.jsxs(Button,{onClick:Te,disabled:se,variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${J===1?"justify-end":"justify-between"} mt-6`,children:[J>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>ie(je=>je-1),variant:"outline",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),J<3&&jsxRuntimeExports.jsxs(Button,{onClick:de,disabled:!we(J+1),className:"bg-red-600 hover:bg-red-700 text-white",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},initialImageGeneratorConfigs$5={quadrada:{canvasWidth:1080,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:901,logoY:61,logoSize:123,placarX:312,placarY:135,placarSize:820,jogadorX:-231,jogadorY:90,jogadorSize:950,footerX:1018,footerY:700,footerSize:1.7500000000000007,tvX:3,tvY:885,tvSize:2.3},vertical:{canvasWidth:1080,canvasHeight:1920,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:865,logoY:203,logoSize:175,placarX:17,placarY:443,placarSize:875,jogadorX:520,jogadorY:407,jogadorSize:950,footerX:160,footerY:1090,footerSize:2.1500000000000004,tvX:5,tvY:1310,tvSize:2.1000000000000005},horizontal:{canvasWidth:1920,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1920,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,jogadorX:175,jogadorY:100,jogadorSize:950,footerX:30,footerY:1005,footerSize:1,tvX:30,tvY:950,tvSize:.7}},MatchDayGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{const{baseImages:o,channelLogos:u}=useImages(),[d,g]=reactExports.useState(initialImageGeneratorConfigs$5),y=reactExports.useRef(null),v=reactExports.useRef(null),w=reactExports.useRef(null),T=reactExports.useRef(null),[A,C]=reactExports.useState(["background","jogador","placar","logo","info","tv"]),[j,D]=reactExports.useState(null),[H,ne]=reactExports.useState("quadrada"),[Y,U]=reactExports.useState(null),ee=reactExports.useRef(null),[J,ie]=reactExports.useState(1),[se,K]=reactExports.useState(!1),[te,re]=reactExports.useState(!1),[ce,le]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null}),[ue,_e]=reactExports.useState([]),[Ee,we]=reactExports.useState(!1),de=De=>{_e(Ie=>Ie.some(Re=>Re.id===De.id)?Ie.filter(Re=>Re.id!==De.id):[...Ie,De])},me=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Arte e Jogador",icon:Palette,description:"Selecione a arte e o jogador"},{id:3,title:"Gerar Imagem",icon:Image$2,description:"Ajuste e gere a imagem"}],[xe,pe]=reactExports.useState(!1),ve=De=>{switch(De){case 2:return xe;case 3:return!!ce.gameArt&&!!ce.featuredPlayer;default:return!0}},Oe=()=>{J===1&&ee.current&&!ee.current.canProceed&&!ee.current.submitManualData()||ie(De=>De+1)},Te=De=>{const Ie=new Date(De.fixture.date),Re=convertToSaoPauloTime(Ie),Ne={homeTeam:De.teams.home.name,awayTeam:De.teams.away.name,competition:formatCompetitionRound(De,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:De.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:De.fixture.referee||"",stadium:De.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(Re),competitionRound:formatCompetitionRound(De,e)};U(De),le(Ue=>({...Ue,matchData:Ne}))},Le=(De,Ie,Re)=>{le(Ne=>({...Ne,gameArt:De,featuredPlayer:Ie,featuredPlayerImageUrl:Re}))},Me=reactExports.useCallback(De=>new Promise((Ie,Re)=>{const Ne=new Image;Ne.crossOrigin="anonymous",Ne.onload=()=>Ie(Ne),Ne.onerror=()=>Re(new Error(`Falha ao carregar imagem: ${De}`)),Ne.src=De}),[]),Ce=reactExports.useCallback(async(De,Ie,Re)=>{var pt,Ze,mn;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const Ne=De.current;if(!Ne)return;const Ue=Ne.getContext("2d");if(Ue){Ne.width=Ie.canvasWidth,Ne.height=Ie.canvasHeight,Ue.clearRect(0,0,Ne.width,Ne.height);for(const Ut of Re)if(Ut==="background")try{const Lt=(pt=o.find(Dt=>Dt.type===H&&Dt.section==="matchday"))==null?void 0:pt.url;if(Lt){const Dt=await Me(Lt),Gt=Dt.height/Dt.width,Ke=Ie.backgroundSize,rt=Ke*Gt;Ue.drawImage(Dt,Ie.backgroundX,Ie.backgroundY,Ke,rt)}}catch(Lt){console.warn(Lt)}else if(Ut==="logo")try{const Lt=await Me("/caminhantes-clock.png");Ue.drawImage(Lt,Ie.logoX,Ie.logoY,Ie.logoSize,Ie.logoSize)}catch(Lt){console.error(Lt)}else if(Ut==="placar"&&ce.gameArt){if(T.current){K(!0);try{const Lt=await domtoimage.toPng(T.current,{quality:1,bgcolor:void 0}),Dt=new Image;Dt.src=Lt,await new Promise((Gt,Ke)=>{Dt.onload=()=>Gt(),Dt.onerror=rt=>Ke(rt)}),Ue.drawImage(Dt,Ie.placarX,Ie.placarY,Ie.placarSize,Ie.placarSize*(720/1280)),re(!0)}catch(Lt){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",Lt)}finally{K(!1)}}}else if(Ut==="jogador"&&ce.featuredPlayerImageUrl)try{const Lt=await Me(ce.featuredPlayerImageUrl),Dt=1062/666,Gt=Ie.jogadorSize,Ke=Gt*Dt;Ue.drawImage(Lt,Ie.jogadorX,Ie.jogadorY,Gt,Ke)}catch(Lt){console.error(Lt)}else if(Ut==="tv"){if(ue.length>0){const Lt=Ie.tvSize;let Dt=Ie.tvY-45;const Gt=350,Ke=224,rt=30*Lt,Ct=rt/Ke*Gt,tt=15*Lt,Et=2*Lt,un=H==="horizontal"?8:5,hn=ue.reduce((Pn,Gn)=>(Pn[Gn.type]||(Pn[Gn.type]=[]),Pn[Gn.type].push(Gn),Pn),{}),xn=Object.keys(hn).sort(),Dn=[];for(const Pn of xn)Dn.push(...hn[Pn].sort((Gn,Xn)=>Gn.name.localeCompare(Xn.name)));let Sn=0,Hn=0;for(let Pn=0;Pn<Dn.length;Pn++){const Gn=Dn[Pn];try{const Xn=await Me(Gn.logoUrl);if(Sn===0)if(H==="quadrada"){const kn=Math.min(un,Dn.length-Pn),Ms=kn*Ct+(kn-1)*tt,Zs=30*Lt;Hn=Ie.canvasWidth-Zs-Ms,Hn+=Ie.tvX}else{const kn=75*Lt;Hn=Ie.tvX+kn}else if(Sn>=un)if(Dt+=rt+Et,Sn=0,H==="quadrada"){const kn=Math.min(un,Dn.length-Pn),Ms=kn*Ct+(kn-1)*tt,Zs=30*Lt;Hn=Ie.canvasWidth-Zs-Ms,Hn+=Ie.tvX}else{const kn=75*Lt;Hn=Ie.tvX+kn}Ue.drawImage(Xn,Hn,Dt,Ct,rt),Hn+=Ct+tt,Sn++}catch(Xn){console.error(`Falha ao carregar logo do canal ${Gn.name}:`,Xn)}}Ue.shadowColor="transparent",Ue.shadowOffsetX=0,Ue.shadowOffsetY=0,Ue.shadowBlur=0}}else if(Ut==="info"&&ce.matchData){const Lt=Ie.footerX,Dt=Ie.footerY,Gt=Ie.footerSize;Ue.fillStyle="#FFFFFF",Ue.shadowColor="rgba(0, 0, 0, 0.75)",Ue.shadowOffsetX=2*Gt,Ue.shadowOffsetY=2*Gt,Ue.shadowBlur=2*Gt,Ue.font=`800 ${20*Gt}px "Funnel Display", sans-serif`,Ue.textAlign=H==="quadrada"?"right":"left";const Ke=Lt;Ue.fillText(`${(Ze=ce.matchData.homeTeam)==null?void 0:Ze.toUpperCase()} 🆚 ${(mn=ce.matchData.awayTeam)==null?void 0:mn.toUpperCase()}`,Ke,Dt),Ue.fillText(ce.matchData.stadium.toUpperCase(),Ke,Dt+25*Gt),Ue.fillText(ce.matchData.date.toUpperCase(),Ke,Dt+50*Gt),Ue.fillText(ce.matchData.competitionRound.toUpperCase(),Ke,Dt+75*Gt),Ue.fillText(ce.matchData.referee!==""?`ÁRBITRO: ${ce.matchData.referee.toUpperCase()}`:"",Ke,Dt+100*Gt),Ue.shadowColor="transparent",Ue.shadowOffsetX=0,Ue.shadowOffsetY=0,Ue.shadowBlur=0}}},[ce,o,H,Me]),be=reactExports.useCallback(()=>{if(J!==3||!y.current||!v.current||!w.current)return;K(!0);const De=d[H],Ie=j?A.indexOf(j):-1,Re=Ie>-1?A.slice(0,Ie):A,Ne=Ie>-1?[A[Ie]]:[],Ue=Ie>-1?A.slice(Ie+1):[];Promise.all([Ce(y,De,Re),Ce(v,De,Ne),Ce(w,De,Ue)]).then(()=>{K(!1),re(!0)}).catch(pt=>{console.error("Erro ao desenhar camadas:",pt),K(!1)})},[J,d,H,j,A,Ce]);reactExports.useEffect(()=>{be()},[be]),reactExports.useEffect(()=>{if(J!==3||!j||!v.current)return;const De=d[H];Ce(v,De,[j])},[d,j,H,J,Ce]);const Ve=()=>{const De=document.createElement("canvas"),Ie=d[H];De.width=Ie.canvasWidth,De.height=Ie.canvasHeight;const Re=De.getContext("2d");if(!Re||!y.current||!v.current||!w.current)return;Re.drawImage(y.current,0,0),Re.drawImage(v.current,0,0),Re.drawImage(w.current,0,0);const Ne=document.createElement("a");Ne.href=De.toDataURL("image/png"),Ne.download=`matchday-${H}.png`,Ne.click()},$e=(De,Ie)=>{j&&g(Re=>{let Ne=j;j==="info"&&(Ne="footer");const Ue=`${Ne}X`,pt=`${Ne}Y`,Ze={...Re[H]};return De==="x"&&Ue in Ze?Ze[Ue]+=Ie:De==="y"&&pt in Ze&&(Ze[pt]+=Ie),{...Re,[H]:Ze}})},Fe=De=>{j&&g(Ie=>{let Re=j;j==="info"&&(Re="footer");const Ne=`${Re}Size`,Ue={...Ie[H]};return Ne in Ue&&(Ne==="footerSize"?Ue[Ne]+=De/100:Ue[Ne]+=De),{...Ie,[H]:Ue}})},je=De=>{ve(De)&&ie(De)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Gerador de Matchday"}),Y&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:T,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:Y,awayPenScore:null,awayScore:null,homePenScore:null,homeScore:null})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:me,currentStep:J,onStepClick:je,canAdvanceToStep:ve}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[J===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:ee,onMatchSelected:Te,escalacaoData:{...ce,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:pe,translations:e}),J===2&&jsxRuntimeExports.jsx(GameArtSelector,{onArtSelect:Le,escalacaoData:{...ce,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},setEscalacaoData:De=>le(Ie=>{let Re;if(typeof De=="function"){const Ne={...Ie,formation:null,selectedPlayers:{},reservePlayers:[],coach:""};Re=De(Ne)}else Re=De;return{...Ie,gameArt:Re.gameArt,featuredPlayer:Re.featuredPlayer,featuredPlayerImageUrl:Re.featuredPlayerImageUrl}}),showChannelLogoSelection:Ee,selectedChannelLogos:ue,setShowChannelLogoSelection:we,onToggleChannelLogo:de,allChannelLogos:u}),J===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:H,onChange:De=>ne(De.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:j??"",onChange:De=>D(De.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),A.map(De=>jsxRuntimeExports.jsx("option",{value:De,className:"capitalize",children:De},De))]})]}),j&&jsxRuntimeExports.jsx(PositionController,{elementName:j,onMove:$e,onResize:Fe}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:A,setRenderOrder:C})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${d[H].canvasHeight/d[H].canvasWidth*100}%`},children:[y,v,w].map((De,Ie)=>jsxRuntimeExports.jsx("canvas",{ref:De,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:Ie+1}},Ie))})})]}),Y&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"matchday",match:Y,translations:e}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-4",children:[jsxRuntimeExports.jsx(Button,{onClick:be,disabled:se,className:"bg-red-600 hover:bg-red-700 text-white",children:se?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),te&&jsxRuntimeExports.jsxs(Button,{onClick:Ve,disabled:se,variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${J===1?"justify-end":"justify-between"} mt-6`,children:[J>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>ie(De=>De-1),variant:"outline",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),J<3&&jsxRuntimeExports.jsxs(Button,{onClick:Oe,disabled:!ve(J+1),className:"bg-red-600 hover:bg-red-700 text-white",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},initialImageGeneratorConfigs$4={quadrada:{canvasWidth:1080,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:901,logoY:61,logoSize:123,placarX:-43,placarY:135,placarSize:820,jogadorX:444,jogadorY:90,jogadorSize:950,footerX:63,footerY:745,footerSize:1.7500000000000007,tvX:63,tvY:890,tvSize:2.3},vertical:{canvasWidth:1080,canvasHeight:1920,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:865,logoY:203,logoSize:175,placarX:-3,placarY:443,placarSize:875,jogadorX:520,jogadorY:407,jogadorSize:950,footerX:160,footerY:1090,footerSize:2.1500000000000004,tvX:160,tvY:1260,tvSize:2.1000000000000005},horizontal:{canvasWidth:1920,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1920,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,jogadorX:175,jogadorY:100,jogadorSize:950,footerX:30,footerY:1005,footerSize:1,tvX:30,tvY:950,tvSize:.7}},NextGameGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{const{currentUserData:o}=useUser(),{baseImages:u,channelLogos:d}=useImages(),[g,y]=reactExports.useState(initialImageGeneratorConfigs$4),v=reactExports.useRef(null),w=reactExports.useRef(null),T=reactExports.useRef(null),A=reactExports.useRef(null),[C,j]=reactExports.useState(["background","jogador","placar","logo","info","tv"]),[D,H]=reactExports.useState(null),[ne,Y]=reactExports.useState("quadrada"),[U,ee]=reactExports.useState(null),J=reactExports.useRef(null),[ie,se]=reactExports.useState(1),[K,te]=reactExports.useState(!1),[re,ce]=reactExports.useState(!1),[le,ue]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null}),[_e,Ee]=reactExports.useState([]),[we,de]=reactExports.useState(!1),me=Re=>{Ee(Ne=>Ne.some(Ue=>Ue.id===Re.id)?Ne.filter(Ue=>Ue.id!==Re.id):[...Ne,Re])},xe=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Arte e Jogador",icon:Palette,description:"Selecione a arte e o jogador"},{id:3,title:"Gerar Imagem",icon:Image$2,description:"Ajuste e gere a imagem"}],[pe,ve]=reactExports.useState(!1),Oe=Re=>{switch(Re){case 2:return pe;case 3:return!!le.gameArt&&!!le.featuredPlayer;default:return!0}},Te=()=>{ie===1&&J.current&&!J.current.canProceed&&!J.current.submitManualData()||se(Re=>Re+1)},Le=Re=>{const Ne=new Date(Re.fixture.date),Ue=convertToSaoPauloTime(Ne),pt={homeTeam:Re.teams.home.name,awayTeam:Re.teams.away.name,competition:formatCompetitionRound(Re,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:Re.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:Re.fixture.referee||"",stadium:Re.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(Ue),competitionRound:formatCompetitionRound(Re,e)};ee(Re),ue(Ze=>({...Ze,matchData:pt}))},Me=(Re,Ne,Ue)=>{ue(pt=>({...pt,gameArt:Re,featuredPlayer:Ne,featuredPlayerImageUrl:Ue}))},Ce=reactExports.useCallback(Re=>new Promise((Ne,Ue)=>{const pt=new Image;pt.crossOrigin="anonymous",pt.onload=()=>Ne(pt),pt.onerror=()=>Ue(new Error(`Falha ao carregar imagem: ${Re}`)),pt.src=Re}),[]),be=reactExports.useCallback(async(Re,Ne,Ue)=>{var mn,Ut,Lt;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const pt=Re.current;if(!pt)return;const Ze=pt.getContext("2d");if(Ze){pt.width=Ne.canvasWidth,pt.height=Ne.canvasHeight,Ze.clearRect(0,0,pt.width,pt.height);for(const Dt of Ue)if(Dt==="background")try{const Gt=(mn=u.find(Ke=>Ke.type===ne&&Ke.section==="proximo_jogo"))==null?void 0:mn.url;if(Gt){const Ke=await Ce(Gt),rt=Ke.height/Ke.width,Ct=Ne.backgroundSize,tt=Ct*rt;Ze.drawImage(Ke,Ne.backgroundX,Ne.backgroundY,Ct,tt)}}catch(Gt){console.warn(Gt)}else if(Dt==="logo")try{const Gt=await Ce("/caminhantes-clock.png");Ze.drawImage(Gt,Ne.logoX,Ne.logoY,Ne.logoSize,Ne.logoSize)}catch(Gt){console.error(Gt)}else if(Dt==="placar"&&le.gameArt){if(A.current){te(!0);try{const Gt=await domtoimage.toPng(A.current,{quality:1,bgcolor:void 0}),Ke=new Image;Ke.src=Gt,await new Promise((rt,Ct)=>{Ke.onload=()=>rt(),Ke.onerror=tt=>Ct(tt)}),Ze.drawImage(Ke,Ne.placarX,Ne.placarY,Ne.placarSize,Ne.placarSize*(720/1280)),ce(!0)}catch(Gt){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",Gt)}finally{te(!1)}}}else if(Dt==="jogador"&&le.featuredPlayerImageUrl)try{const Gt=await Ce(le.featuredPlayerImageUrl),Ke=1062/666,rt=Ne.jogadorSize,Ct=rt*Ke;Ze.drawImage(Gt,Ne.jogadorX,Ne.jogadorY,rt,Ct)}catch(Gt){console.error(Gt)}else if(Dt==="tv"){if(_e.length>0){const Gt=Ne.tvSize;let Ke=Ne.tvX,rt=Ne.tvY;const Ct=350,tt=224,Et=30*Gt,un=Et/tt*Ct,hn=15*Gt,xn=2*Gt,Dn=ne==="horizontal"?8:5;Ze.fillStyle="#FFFFFF",Ze.shadowColor="rgba(0, 0, 0, 0.75)",Ze.shadowOffsetX=2*Gt,Ze.shadowOffsetY=2*Gt,Ze.shadowBlur=2*Gt,rt+=xn;const Sn=_e.reduce((Xn,kn)=>(Xn[kn.type]||(Xn[kn.type]=[]),Xn[kn.type].push(kn),Xn),{}),Hn=Object.keys(Sn).sort(),Pn=[];for(const Xn of Hn)Pn.push(...Sn[Xn].sort((kn,Ms)=>kn.name.localeCompare(Ms.name)));let Gn=0;for(const Xn of Pn)try{const kn=await Ce(Xn.logoUrl);Gn>=Dn&&(Ke=Ne.tvX,rt+=Et+xn,Gn=0),Ze.drawImage(kn,Ke,rt,un,Et),Ke+=un+hn,Gn++}catch(kn){console.error(`Falha ao carregar logo do canal ${Xn.name}:`,kn)}Ze.shadowColor="transparent",Ze.shadowOffsetX=0,Ze.shadowOffsetY=0,Ze.shadowBlur=0}}else if(Dt==="info"&&le.matchData){const Gt=Ne.footerSize;Ze.fillStyle="#FFFFFF",Ze.shadowColor="rgba(0, 0, 0, 0.75)",Ze.shadowOffsetX=2*Gt,Ze.shadowOffsetY=2*Gt,Ze.shadowBlur=2*Gt,Ze.font=`800 ${20*Ne.footerSize}px "Funnel Display", sans-serif`,Ze.textAlign="left",Ze.fillText(`${(Ut=le.matchData.homeTeam)==null?void 0:Ut.toUpperCase()} 🆚 ${(Lt=le.matchData.awayTeam)==null?void 0:Lt.toUpperCase()}`,Ne.footerX,Ne.footerY),Ze.fillText(le.matchData.stadium.toUpperCase(),Ne.footerX,Ne.footerY+25*Ne.footerSize),Ze.fillText(le.matchData.date.toUpperCase(),Ne.footerX,Ne.footerY+50*Ne.footerSize),Ze.fillText(le.matchData.competitionRound.toUpperCase(),Ne.footerX,Ne.footerY+75*Ne.footerSize),Ze.fillText(le.matchData.referee!==""?`ÁRBITRO: ${le.matchData.referee.toUpperCase()}`:"",Ne.footerX,Ne.footerY+100*Ne.footerSize)}}},[le,u,ne,Ce,we,_e]),Ve=reactExports.useCallback(()=>{if(ie!==3||!v.current||!w.current||!T.current)return;te(!0);const Re=g[ne],Ne=D?C.indexOf(D):-1,Ue=Ne>-1?C.slice(0,Ne):C,pt=Ne>-1?[C[Ne]]:[],Ze=Ne>-1?C.slice(Ne+1):[];Promise.all([be(v,Re,Ue),be(w,Re,pt),be(T,Re,Ze)]).then(()=>{te(!1),ce(!0)}).catch(mn=>{console.error("Erro ao desenhar camadas:",mn),te(!1)})},[ie,g,ne,D,C,be]);reactExports.useEffect(()=>{Ve()},[Ve]),reactExports.useEffect(()=>{if(ie!==3||!D||!w.current)return;const Re=g[ne];be(w,Re,[D])},[g,D,ne,ie,be]);const $e=()=>{const Re=document.createElement("canvas"),Ne=g[ne];Re.width=Ne.canvasWidth,Re.height=Ne.canvasHeight;const Ue=Re.getContext("2d");if(!Ue||!v.current||!w.current||!T.current)return;Ue.drawImage(v.current,0,0),Ue.drawImage(w.current,0,0),Ue.drawImage(T.current,0,0);const pt=document.createElement("a");pt.href=Re.toDataURL("image/png"),pt.download=`proximo-jogo-${ne}.png`,pt.click()},Fe=(Re,Ne)=>{D&&y(Ue=>{let pt=D;D==="info"&&(pt="footer");const Ze=`${pt}X`,mn=`${pt}Y`,Ut={...Ue[ne]};return Re==="x"&&Ze in Ut?Ut[Ze]+=Ne:Re==="y"&&mn in Ut&&(Ut[mn]+=Ne),{...Ue,[ne]:Ut}})},je=Re=>{D&&y(Ne=>{let Ue=D;D==="info"&&(Ue="footer");const pt=`${Ue}Size`,Ze={...Ne[ne]};return pt in Ze&&(pt==="footerSize"?Ze[pt]+=Re/100:Ze[pt]+=Re),{...Ne,[ne]:Ze}})},De=Re=>{Oe(Re)&&se(Re)},Ie=async()=>{if(A.current)try{const Re=await domtoimage.toPng(A.current,{quality:1,bgcolor:void 0}),Ne=document.createElement("a");Ne.download="placar.png",Ne.href=Re,Ne.click()}catch(Re){console.error("Erro ao gerar PNG do SplitRectangleDisplay:",Re)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Gerador de Próximo Jogo"}),U&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:A,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:U,awayPenScore:null,awayScore:null,homePenScore:null,homeScore:null})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:xe,currentStep:ie,onStepClick:De,canAdvanceToStep:Oe}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[ie===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:J,onMatchSelected:Le,escalacaoData:{...le,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:ve,translations:e}),ie===2&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(GameArtSelector,{onArtSelect:Me,escalacaoData:{...le,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},setEscalacaoData:Re=>ue(Ne=>{let Ue;if(typeof Re=="function"){const pt={...Ne,formation:null,selectedPlayers:{},reservePlayers:[],coach:""};Ue=Re(pt)}else Ue=Re;return{...Ne,gameArt:Ue.gameArt,featuredPlayer:Ue.featuredPlayer,featuredPlayerImageUrl:Ue.featuredPlayerImageUrl}}),showChannelLogoSelection:we,selectedChannelLogos:_e,setShowChannelLogoSelection:de,onToggleChannelLogo:me,allChannelLogos:d})}),ie===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:ne,onChange:Re=>Y(Re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:D??"",onChange:Re=>H(Re.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),C.map(Re=>jsxRuntimeExports.jsx("option",{value:Re,className:"capitalize",children:Re},Re))]})]}),D&&jsxRuntimeExports.jsx(PositionController,{elementName:D,onMove:Fe,onResize:je}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:C,setRenderOrder:j})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${g[ne].canvasHeight/g[ne].canvasWidth*100}%`},children:[v,w,T].map((Re,Ne)=>jsxRuntimeExports.jsx("canvas",{ref:Re,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:Ne+1}},Ne))})})]}),U&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"proximoJogo",match:U,translations:e}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center space-x-4 gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:Ve,disabled:K,className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer",children:K?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),re&&jsxRuntimeExports.jsxs(Button,{onClick:$e,disabled:K,variant:"outline",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]}),o&&o.role==="root"&&jsxRuntimeExports.jsxs(Button,{onClick:Ie,variant:"default",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),"Baixar Arte 'Placar' (PNG)"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${ie===1?"justify-end":"justify-between"} mt-6`,children:[ie>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>se(Re=>Re-1),variant:"outline",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),ie<3&&jsxRuntimeExports.jsxs(Button,{onClick:Te,disabled:!Oe(ie+1),className:"bg-red-600 hover:bg-red-700 text-white",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},initialImageGeneratorConfigs$3={quadrada:{canvasWidth:1080,canvasHeight:1080,logoX:931,logoY:61,logoSize:123,placarX:80,placarY:565,placarSize:930,stadiumTextX:1080/2,stadiumTextY:40,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1080,userBackgroundImgHeight:1080},vertical:{canvasWidth:1080,canvasHeight:1920,logoX:865,logoY:203,logoSize:175,placarX:115,placarY:923,placarSize:875,stadiumTextX:1080/2,stadiumTextY:185,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1080,userBackgroundImgHeight:1920},horizontal:{canvasWidth:1920,canvasHeight:1080,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,stadiumTextX:1920/2,stadiumTextY:40,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1920,userBackgroundImgHeight:1080}},FullTimeGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{var $e,Fe,je,De;const{currentUserData:o}=useUser(),{baseImages:u}=useImages(),[d,g]=reactExports.useState(initialImageGeneratorConfigs$3),y=reactExports.useRef(null),v=reactExports.useRef(null),w=reactExports.useRef(null),T=reactExports.useRef(null),[A,C]=reactExports.useState(["background","acabamento","placar","logo","info"]),[j,D]=reactExports.useState(null),[H,ne]=reactExports.useState("quadrada"),[Y,U]=reactExports.useState(null),ee=reactExports.useRef(null),J={primary:"#ffffff"},[ie,se]=reactExports.useState(1),[K,te]=reactExports.useState(!1),[re,ce]=reactExports.useState(!1),[le,ue]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null,userBackgroundImg:null,userBackgroundImgAspectRatio:null}),_e=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Fundo",icon:Upload,description:"Upload da imagem de fundo"},{id:3,title:"Gerar Imagem",icon:Image$2,description:"Ajuste e gere a imagem"}],[Ee,we]=reactExports.useState(!1),de=Ie=>{switch(Ie){case 2:return Ee;case 3:return!!le.userBackgroundImg;default:return!0}},me=()=>{ie===1&&ee.current&&!ee.current.canProceed&&!ee.current.submitManualData()||se(Ie=>Ie+1)},xe=Ie=>{const Re=new Date(Ie.fixture.date),Ne=convertToSaoPauloTime(Re),Ue={homeTeam:"Liverpool",awayTeam:"Adversário",competition:formatCompetitionRound(Ie,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:Ie.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:Ie.fixture.referee||"",stadium:Ie.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(Ne),competitionRound:formatCompetitionRound(Ie,e)};U(Ie),ue(pt=>({...pt,matchData:Ue}))},pe=Ie=>{var Ue;const Re=(Ue=Ie.target.files)==null?void 0:Ue[0];if(!Re)return;const Ne=new FileReader;Ne.onloadend=()=>{const pt=new Image;pt.onload=()=>{ue(Ze=>({...Ze,userBackgroundImg:Ne.result,userBackgroundImgAspectRatio:pt.width/pt.height}))},pt.src=Ne.result},Ne.readAsDataURL(Re)};reactExports.useEffect(()=>{if(!le.userBackgroundImg||!le.userBackgroundImgAspectRatio)return;const Ie=le.userBackgroundImgAspectRatio,Re=d[H];let Ne;H==="vertical"?Ne=1550:Ne=Re.canvasHeight;const Ue=Ne*Ie,pt=(Re.canvasWidth-Ue)/2,Ze=(Re.canvasHeight-Ne)/2;g(mn=>({...mn,[H]:{...mn[H],userBackgroundImgWidth:Ue,userBackgroundImgHeight:Ne,userBackgroundImgX:pt,userBackgroundImgY:Ze}}))},[le.userBackgroundImg,le.userBackgroundImgAspectRatio,H]);const ve=reactExports.useCallback(Ie=>new Promise((Re,Ne)=>{const Ue=new Image;Ue.crossOrigin="anonymous",Ue.onload=()=>Re(Ue),Ue.onerror=()=>Ne(new Error(`Falha ao carregar imagem: ${Ie}`)),Ue.src=Ie}),[]),Oe=reactExports.useCallback(async(Ie,Re,Ne)=>{var Ze;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const Ue=Ie.current;if(!Ue)return;const pt=Ue.getContext("2d");if(pt){Ue.width=Re.canvasWidth,Ue.height=Re.canvasHeight,pt.clearRect(0,0,Ue.width,Ue.height);for(const mn of Ne)if(mn==="background"&&le.userBackgroundImg)try{const Ut=await ve(le.userBackgroundImg);pt.drawImage(Ut,Re.userBackgroundImgX,Re.userBackgroundImgY,Re.userBackgroundImgWidth,Re.userBackgroundImgHeight)}catch(Ut){console.error(Ut)}else if(mn==="acabamento")try{const Ut=(Ze=u.find(Lt=>Lt.type===H&&Lt.section==="fim_de_jogo"))==null?void 0:Ze.url;if(Ut){const Lt=await ve(Ut);pt.drawImage(Lt,0,0,Ue.width,Ue.height)}}catch(Ut){console.warn(Ut)}else if(mn==="placar"){if(T.current){te(!0);try{const Ut=await domtoimage.toPng(T.current,{quality:1,bgcolor:void 0}),Lt=new Image;Lt.src=Ut,await new Promise((Dt,Gt)=>{Lt.onload=()=>Dt(),Lt.onerror=Ke=>Gt(Ke)}),pt.drawImage(Lt,Re.placarX,Re.placarY,Re.placarSize,Re.placarSize*(720/1280)),ce(!0)}catch(Ut){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",Ut)}finally{te(!1)}}}else if(mn==="logo")try{const Ut=await ve("/caminhantes-clock.png");pt.drawImage(Ut,Re.logoX,Re.logoY,Re.logoSize,Re.logoSize)}catch(Ut){console.error(Ut)}else if(mn==="info"&&le.matchData){pt.fillStyle=J.primary,pt.font='800 24px "Funnel Display", Arial, sans-serif',pt.textAlign="center";const Ut=`${le.matchData.stadium.toUpperCase()} - ${le.matchData.competitionRound.toUpperCase()}`;pt.fillText(Ut,Re.stadiumTextX,Re.stadiumTextY)}}},[le,u,J.primary,H,ve]),Te=reactExports.useCallback(()=>{if(ie!==3||!y.current||!v.current||!w.current)return;te(!0);const Ie=d[H],Re=j?A.indexOf(j):-1,Ne=Re>-1?A.slice(0,Re):A,Ue=Re>-1?[A[Re]]:[],pt=Re>-1?A.slice(Re+1):[];Promise.all([Oe(y,Ie,Ne),Oe(v,Ie,Ue),Oe(w,Ie,pt)]).then(()=>{te(!1),ce(!0)}).catch(Ze=>{console.error("Erro ao desenhar camadas:",Ze),te(!1)})},[ie,d,H,j,A,Oe]);reactExports.useEffect(()=>{Te()},[Te]),reactExports.useEffect(()=>{if(ie!==3||!j||!(v!=null&&v.current))return;const Ie=d[H];Oe(v,Ie,[j])},[d,j,H,ie,Oe]);const Le=()=>{const Ie=document.createElement("canvas"),Re=d[H];Ie.width=Re.canvasWidth,Ie.height=Re.canvasHeight;const Ne=Ie.getContext("2d");if(!Ne||!y.current||!v.current||!w.current)return;Ne.drawImage(y.current,0,0),Ne.drawImage(v.current,0,0),Ne.drawImage(w.current,0,0);const Ue=document.createElement("a");Ue.href=Ie.toDataURL("image/png"),Ue.download=`${H}_placar_final.png`,Ue.click()},Me=(Ie,Re)=>{j&&g(Ne=>{const Ue=j==="background"?"userBackgroundImgX":`${j}X`,pt=j==="background"?"userBackgroundImgY":`${j}Y`,Ze={...Ne[H]};return Ie==="x"&&Ue in Ze?Ze[Ue]+=Re:Ie==="y"&&pt in Ze&&(Ze[pt]+=Re),{...Ne,[H]:Ze}})},Ce=Ie=>{j&&g(Re=>{const Ne=`${j}Size`,Ue=j==="background"?"userBackgroundImgWidth":`${j}Width`,pt=j==="background"?"userBackgroundImgHeight":`${j}Height`,Ze={...Re[H]};if(Ne in Ze&&typeof Ze[Ne]=="number")Ze[Ne]+=Ie;else if(Ue in Ze&&typeof Ze[Ue]=="number"){const mn=Ze[pt]/Ze[Ue]||1;Ze[Ue]+=Ie,Ze[pt]=Ze[Ue]*mn}return{...Re,[H]:Ze}})},be=Ie=>{de(Ie)&&se(Ie)},Ve=async()=>{if(T.current)try{const Ie=await domtoimage.toPng(T.current,{quality:1,bgcolor:void 0}),Re=document.createElement("a");Re.download="placar.png",Re.href=Ie,Re.click()}catch(Ie){console.error("Erro ao gerar PNG do SplitRectangleDisplay:",Ie)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Gerador de Fim de Jogo"}),Y&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:T,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:Y,awayPenScore:((Fe=($e=Y.score)==null?void 0:$e.penalty)==null?void 0:Fe.away)??null,awayScore:Y.goals.away,homePenScore:((De=(je=Y.score)==null?void 0:je.penalty)==null?void 0:De.home)??null,homeScore:Y.goals.home})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:_e,currentStep:ie,onStepClick:be,canAdvanceToStep:de}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[ie===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:ee,onMatchSelected:xe,escalacaoData:{...le,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:we,translations:e,pastMatches:!0}),ie===2&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg p-6",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"background-image-upload",className:"cursor-pointer text-center",children:[jsxRuntimeExports.jsx(Upload,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Clique para selecionar a imagem de fundo"}),jsxRuntimeExports.jsx("input",{id:"background-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:pe})]}),le.userBackgroundImg&&jsxRuntimeExports.jsx("img",{src:le.userBackgroundImg,alt:"Preview",className:"mt-4 max-h-48 w-auto rounded-lg"})]}),ie===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:H,onChange:Ie=>ne(Ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:j??"",onChange:Ie=>D(Ie.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),A.map(Ie=>jsxRuntimeExports.jsx("option",{value:Ie,className:"capitalize",children:Ie},Ie))]})]}),j&&jsxRuntimeExports.jsx(PositionController,{elementName:j,onMove:Me,onResize:Ce}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:A,setRenderOrder:C})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${d[H].canvasHeight/d[H].canvasWidth*100}%`},children:[y,v,w].map((Ie,Re)=>jsxRuntimeExports.jsx("canvas",{ref:Ie,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:Re+1}},Re))})})]}),Y&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"fimDeJogo",match:Y,translations:e}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center space-x-4 gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:Te,disabled:K,className:"bg-red-600 hover:bg-red-700 text-white",children:K?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),re&&jsxRuntimeExports.jsxs(Button,{onClick:Le,disabled:K,variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]}),o&&o.role==="root"&&jsxRuntimeExports.jsxs(Button,{onClick:Ve,variant:"default",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),"Baixar Arte 'Placar' (PNG)"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${ie===1?"justify-end":"justify-between"} mt-6`,children:[ie>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>se(Ie=>Ie-1),variant:"outline",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),ie<3&&jsxRuntimeExports.jsxs(Button,{onClick:me,disabled:!de(ie+1),className:"bg-red-600 hover:bg-red-700 text-white",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function round(t){return t+.5|0}const lim=(t,e,n)=>Math.max(Math.min(t,n),e);function p2b(t){return lim(round(t*2.55),0,255)}function n2b(t){return lim(round(t*255),0,255)}function b2n(t){return lim(round(t/2.55)/100,0,1)}function n2p(t){return lim(round(t*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=[..."0123456789ABCDEF"],h1=t=>hex[t&15],h2=t=>hex[(t&240)>>4]+hex[t&15],eq=t=>(t&240)>>4===(t&15),isShort=t=>eq(t.r)&&eq(t.g)&&eq(t.b)&&eq(t.a);function hexParse(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&map$1[t[1]]*17,g:255&map$1[t[2]]*17,b:255&map$1[t[3]]*17,a:e===5?map$1[t[4]]*17:255}:(e===7||e===9)&&(n={r:map$1[t[1]]<<4|map$1[t[2]],g:map$1[t[3]]<<4|map$1[t[4]],b:map$1[t[5]]<<4|map$1[t[6]],a:e===9?map$1[t[7]]<<4|map$1[t[8]]:255})),n}const alpha=(t,e)=>t<255?e(t):"";function hexString(t){var e=isShort(t)?h1:h2;return t?"#"+e(t.r)+e(t.g)+e(t.b)+alpha(t.a,e):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(t,e,n){const s=e*Math.min(n,1-n),o=(u,d=(u+t/30)%12)=>n-s*Math.max(Math.min(d-3,9-d,1),-1);return[o(0),o(8),o(4)]}function hsv2rgbn(t,e,n){const s=(o,u=(o+t/60)%6)=>n-n*e*Math.max(Math.min(u,4-u,1),0);return[s(5),s(3),s(1)]}function hwb2rgbn(t,e,n){const s=hsl2rgbn(t,1,.5);let o;for(e+n>1&&(o=1/(e+n),e*=o,n*=o),o=0;o<3;o++)s[o]*=1-e-n,s[o]+=e;return s}function hueValue(t,e,n,s,o){return t===o?(e-n)/s+(e<n?6:0):e===o?(n-t)/s+2:(t-e)/s+4}function rgb2hsl(t){const n=t.r/255,s=t.g/255,o=t.b/255,u=Math.max(n,s,o),d=Math.min(n,s,o),g=(u+d)/2;let y,v,w;return u!==d&&(w=u-d,v=g>.5?w/(2-u-d):w/(u+d),y=hueValue(n,s,o,w,u),y=y*60+.5),[y|0,v||0,g]}function calln(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(n2b)}function hsl2rgb(t,e,n){return calln(hsl2rgbn,t,e,n)}function hwb2rgb(t,e,n){return calln(hwb2rgbn,t,e,n)}function hsv2rgb(t,e,n){return calln(hsv2rgbn,t,e,n)}function hue(t){return(t%360+360)%360}function hueParse(t){const e=HUE_RE.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?p2b(+e[5]):n2b(+e[5]));const o=hue(+e[2]),u=+e[3]/100,d=+e[4]/100;return e[1]==="hwb"?s=hwb2rgb(o,u,d):e[1]==="hsv"?s=hsv2rgb(o,u,d):s=hsl2rgb(o,u,d),{r:s[0],g:s[1],b:s[2],a:n}}function rotate(t,e){var n=rgb2hsl(t);n[0]=hue(n[0]+e),n=hsl2rgb(n),t.r=n[0],t.g=n[1],t.b=n[2]}function hslString(t){if(!t)return;const e=rgb2hsl(t),n=e[0],s=n2p(e[1]),o=n2p(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${o}%, ${b2n(t.a)})`:`hsl(${n}, ${s}%, ${o}%)`}const map$2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const t={},e=Object.keys(names$1),n=Object.keys(map$2);let s,o,u,d,g;for(s=0;s<e.length;s++){for(d=g=e[s],o=0;o<n.length;o++)u=n[o],g=g.replace(u,map$2[u]);u=parseInt(names$1[d],16),t[g]=[u>>16&255,u>>8&255,u&255]}return t}let names;function nameParse(t){names||(names=unpack(),names.transparent=[0,0,0,0]);const e=names[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(t){const e=RGB_RE.exec(t);let n=255,s,o,u;if(e){if(e[7]!==s){const d=+e[7];n=e[8]?p2b(d):lim(d*255,0,255)}return s=+e[1],o=+e[3],u=+e[5],s=255&(e[2]?p2b(s):lim(s,0,255)),o=255&(e[4]?p2b(o):lim(o,0,255)),u=255&(e[6]?p2b(u):lim(u,0,255)),{r:s,g:o,b:u,a:n}}}function rgbString(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${b2n(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const to=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,from=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function interpolate$1(t,e,n){const s=from(b2n(t.r)),o=from(b2n(t.g)),u=from(b2n(t.b));return{r:n2b(to(s+n*(from(b2n(e.r))-s))),g:n2b(to(o+n*(from(b2n(e.g))-o))),b:n2b(to(u+n*(from(b2n(e.b))-u))),a:t.a+n*(e.a-t.a)}}function modHSL(t,e,n){if(t){let s=rgb2hsl(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=hsl2rgb(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function clone$1(t,e){return t&&Object.assign(e||{},t)}function fromObject(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=n2b(t[3]))):(e=clone$1(t,{r:0,g:0,b:0,a:1}),e.a=n2b(e.a)),e}function functionParse(t){return t.charAt(0)==="r"?rgbParse(t):hueParse(t)}class Color{constructor(e){if(e instanceof Color)return e;const n=typeof e;let s;n==="object"?s=fromObject(e):n==="string"&&(s=hexParse(e)||nameParse(e)||functionParse(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=clone$1(this._rgb);return e&&(e.a=b2n(e.a)),e}set rgb(e){this._rgb=fromObject(e)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,o=e.rgb;let u;const d=n===u?.5:n,g=2*d-1,y=s.a-o.a,v=((g*y===-1?g:(g+y)/(1+g*y))+1)/2;u=1-v,s.r=255&v*s.r+u*o.r+.5,s.g=255&v*s.g+u*o.g+.5,s.b=255&v*s.b+u*o.b+.5,s.a=d*s.a+(1-d)*o.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=interpolate$1(this._rgb,e._rgb,n)),this}clone(){return new Color(this.rgb)}alpha(e){return this._rgb.a=n2b(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=round(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return modHSL(this._rgb,2,e),this}darken(e){return modHSL(this._rgb,2,-e),this}saturate(e){return modHSL(this._rgb,1,e),this}desaturate(e){return modHSL(this._rgb,1,-e),this}rotate(e){return rotate(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function noop(){}const uid=(()=>{let t=0;return()=>t++})();function isNullOrUndef(t){return t==null}function isArray(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function isObject(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function isNumberFinite(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function finiteOrDefault(t,e){return isNumberFinite(t)?t:e}function valueOrDefault(t,e){return typeof t>"u"?e:t}const toPercentage=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,toDimension=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function callback(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function each(t,e,n,s){let o,u,d;if(isArray(t))for(u=t.length,o=0;o<u;o++)e.call(n,t[o],o);else if(isObject(t))for(d=Object.keys(t),u=d.length,o=0;o<u;o++)e.call(n,t[d[o]],d[o])}function _elementsEqual(t,e){let n,s,o,u;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(o=t[n],u=e[n],o.datasetIndex!==u.datasetIndex||o.index!==u.index)return!1;return!0}function clone(t){if(isArray(t))return t.map(clone);if(isObject(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let o=0;for(;o<s;++o)e[n[o]]=clone(t[n[o]]);return e}return t}function isValidKey(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function _merger(t,e,n,s){if(!isValidKey(t))return;const o=e[t],u=n[t];isObject(o)&&isObject(u)?merge(o,u,s):e[t]=clone(u)}function merge(t,e,n){const s=isArray(e)?e:[e],o=s.length;if(!isObject(t))return t;n=n||{};const u=n.merger||_merger;let d;for(let g=0;g<o;++g){if(d=s[g],!isObject(d))continue;const y=Object.keys(d);for(let v=0,w=y.length;v<w;++v)u(y[v],t,d,n)}return t}function mergeIf(t,e){return merge(t,e,{merger:_mergerIf})}function _mergerIf(t,e,n){if(!isValidKey(t))return;const s=e[t],o=n[t];isObject(s)&&isObject(o)?mergeIf(s,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=clone(o))}const keyResolvers={"":t=>t,x:t=>t.x,y:t=>t.y};function _splitKey(t){const e=t.split("."),n=[];let s="";for(const o of e)s+=o,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function _getKeyResolver(t){const e=_splitKey(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function resolveObjectKey(t,e){return(keyResolvers[e]||(keyResolvers[e]=_getKeyResolver(e)))(t)}function _capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}const defined=t=>typeof t<"u",isFunction=t=>typeof t=="function",setsEqual=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function _isClickEvent(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign=Math.sign;function almostEquals(t,e,n){return Math.abs(t-e)<n}function niceNum(t){const e=Math.round(t);t=almostEquals(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(log10(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function _factorize(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((o,u)=>o-u).pop(),e}function isNonPrimitive(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function isNumber(t){return!isNonPrimitive(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function almostWhole(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function _setMinAndMaxByKey(t,e,n){let s,o,u;for(s=0,o=t.length;s<o;s++)u=t[s][n],isNaN(u)||(e.min=Math.min(e.min,u),e.max=Math.max(e.max,u))}function toRadians(t){return t*(PI/180)}function toDegrees(t){return t*(180/PI)}function _decimalPlaces(t){if(!isNumberFinite(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function getAngleFromPoint(t,e){const n=e.x-t.x,s=e.y-t.y,o=Math.sqrt(n*n+s*s);let u=Math.atan2(s,n);return u<-.5*PI&&(u+=TAU),{angle:u,distance:o}}function distanceBetweenPoints(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _angleDiff(t,e){return(t-e+PITAU)%TAU-PI}function _normalizeAngle(t){return(t%TAU+TAU)%TAU}function _angleBetween(t,e,n,s){const o=_normalizeAngle(t),u=_normalizeAngle(e),d=_normalizeAngle(n),g=_normalizeAngle(u-o),y=_normalizeAngle(d-o),v=_normalizeAngle(o-u),w=_normalizeAngle(o-d);return o===u||o===d||s&&u===d||g>y&&v<w}function _limitValue(t,e,n){return Math.max(e,Math.min(n,t))}function _int16Range(t){return _limitValue(t,-32768,32767)}function _isBetween(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function _lookup(t,e,n){n=n||(d=>t[d]<e);let s=t.length-1,o=0,u;for(;s-o>1;)u=o+s>>1,n(u)?o=u:s=u;return{lo:o,hi:s}}const _lookupByKey=(t,e,n,s)=>_lookup(t,n,s?o=>{const u=t[o][e];return u<n||u===n&&t[o+1][e]===n}:o=>t[o][e]<n),_rlookupByKey=(t,e,n)=>_lookup(t,n,s=>t[s][e]>=n);function _filterBetween(t,e,n){let s=0,o=t.length;for(;s<o&&t[s]<e;)s++;for(;o>s&&t[o-1]>n;)o--;return s>0||o<t.length?t.slice(s,o):t}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),arrayEvents.forEach(n=>{const s="_onData"+_capitalize(n),o=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...u){const d=o.apply(this,u);return t._chartjs.listeners.forEach(g=>{typeof g[s]=="function"&&g[s](...u)}),d}})})}function unlistenArrayEvents(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,o=s.indexOf(e);o!==-1&&s.splice(o,1),!(s.length>0)&&(arrayEvents.forEach(u=>{delete t[u]}),delete t._chartjs)}function _arrayUnique(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const requestAnimFrame=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function throttled(t,e){let n=[],s=!1;return function(...o){n=o,s||(s=!0,requestAnimFrame.call(window,()=>{s=!1,t.apply(e,n)}))}}function debounce(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const _toLeftRightCenter=t=>t==="start"?"left":t==="end"?"right":"center",_alignStartEnd=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,_textX=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function _getStartAndCountOfVisiblePoints(t,e,n){const s=e.length;let o=0,u=s;if(t._sorted){const{iScale:d,vScale:g,_parsed:y}=t,v=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,w=d.axis,{min:T,max:A,minDefined:C,maxDefined:j}=d.getUserBounds();if(C){if(o=Math.min(_lookupByKey(y,w,T).lo,n?s:_lookupByKey(e,w,d.getPixelForValue(T)).lo),v){const D=y.slice(0,o+1).reverse().findIndex(H=>!isNullOrUndef(H[g.axis]));o-=Math.max(0,D)}o=_limitValue(o,0,s-1)}if(j){let D=Math.max(_lookupByKey(y,d.axis,A,!0).hi+1,n?0:_lookupByKey(e,w,d.getPixelForValue(A),!0).hi+1);if(v){const H=y.slice(D-1).findIndex(ne=>!isNullOrUndef(ne[g.axis]));D+=Math.max(0,H)}u=_limitValue(D,o,s)-o}else u=s-o}return{start:o,count:u}}function _scaleRangesChanged(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,o={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=o,!0;const u=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,o),u}const atEdge=t=>t===0||t===1,elasticIn=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*TAU/n)),elasticOut=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*TAU/n)+1,effects={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*HALF_PI)+1,easeOutSine:t=>Math.sin(t*HALF_PI),easeInOutSine:t=>-.5*(Math.cos(PI*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>atEdge(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>atEdge(t)?t:elasticIn(t,.075,.3),easeOutElastic:t=>atEdge(t)?t:elasticOut(t,.075,.3),easeInOutElastic(t){return atEdge(t)?t:t<.5?.5*elasticIn(t*2,.1125,.45):.5+.5*elasticOut(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-effects.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?effects.easeInBounce(t*2)*.5:effects.easeOutBounce(t*2-1)*.5+.5};function isPatternOrGradient(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function color(t){return isPatternOrGradient(t)?t:new Color(t)}function getHoverColor(t){return isPatternOrGradient(t)?t:new Color(t).saturate(.5).darken(.1).hexString()}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];function applyAnimationsDefaults(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function applyLayoutsDefaults(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const intlCache=new Map;function getNumberFormat(t,e){e=e||{};const n=t+JSON.stringify(e);let s=intlCache.get(n);return s||(s=new Intl.NumberFormat(t,e),intlCache.set(n,s)),s}function formatNumber(t,e,n){return getNumberFormat(e,n).format(t)}const formatters={values(t){return isArray(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let o,u=t;if(n.length>1){const v=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(v<1e-4||v>1e15)&&(o="scientific"),u=calculateDelta(t,n)}const d=log10(Math.abs(u)),g=isNaN(d)?1:Math.max(Math.min(-1*Math.floor(d),20),0),y={notation:o,minimumFractionDigits:g,maximumFractionDigits:g};return Object.assign(y,this.options.ticks.format),formatNumber(t,s,y)},logarithmic(t,e,n){if(t===0)return"0";const s=n[e].significand||t/Math.pow(10,Math.floor(log10(t)));return[1,2,3,5,10,15].includes(s)||e>.8*n.length?formatters.numeric.call(this,t,e,n):""}};function calculateDelta(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Ticks={formatters};function applyScaleDefaults(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(t,e){if(!e)return t;const n=e.split(".");for(let s=0,o=n.length;s<o;++s){const u=n[s];t=t[u]||(t[u]=Object.create(null))}return t}function set(t,e,n){return typeof e=="string"?merge(getScope$1(t,e),n):merge(getScope$1(t,""),e)}class Defaults{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,o)=>getHoverColor(o.backgroundColor),this.hoverBorderColor=(s,o)=>getHoverColor(o.borderColor),this.hoverColor=(s,o)=>getHoverColor(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return set(this,e,n)}get(e){return getScope$1(this,e)}describe(e,n){return set(descriptors,e,n)}override(e,n){return set(overrides,e,n)}route(e,n,s,o){const u=getScope$1(this,e),d=getScope$1(this,s),g="_"+n;Object.defineProperties(u,{[g]:{value:u[n],writable:!0},[n]:{enumerable:!0,get(){const y=this[g],v=d[o];return isObject(y)?Object.assign({},v,y):valueOrDefault(y,v)},set(y){this[g]=y}}})}apply(e){e.forEach(n=>n(this))}}var defaults=new Defaults({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[applyAnimationsDefaults,applyLayoutsDefaults,applyScaleDefaults]);function toFontString(t){return!t||isNullOrUndef(t.size)||isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function _measureText(t,e,n,s,o){let u=e[o];return u||(u=e[o]=t.measureText(o).width,n.push(o)),u>s&&(s=u),s}function _longestText(t,e,n,s){s=s||{};let o=s.data=s.data||{},u=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(o=s.data={},u=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let d=0;const g=n.length;let y,v,w,T,A;for(y=0;y<g;y++)if(T=n[y],T!=null&&!isArray(T))d=_measureText(t,o,u,d,T);else if(isArray(T))for(v=0,w=T.length;v<w;v++)A=T[v],A!=null&&!isArray(A)&&(d=_measureText(t,o,u,d,A));t.restore();const C=u.length/2;if(C>n.length){for(y=0;y<C;y++)delete o[u[y]];u.splice(0,C)}return d}function _alignPixel(t,e,n){const s=t.currentDevicePixelRatio,o=n!==0?Math.max(n/2,.5):0;return Math.round((e-o)*s)/s+o}function clearCanvas(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function drawPoint(t,e,n,s){drawPointLegend(t,e,n,s,null)}function drawPointLegend(t,e,n,s,o){let u,d,g,y,v,w,T,A;const C=e.pointStyle,j=e.rotation,D=e.radius;let H=(j||0)*RAD_PER_DEG;if(C&&typeof C=="object"&&(u=C.toString(),u==="[object HTMLImageElement]"||u==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(H),t.drawImage(C,-C.width/2,-C.height/2,C.width,C.height),t.restore();return}if(!(isNaN(D)||D<=0)){switch(t.beginPath(),C){default:o?t.ellipse(n,s,o/2,D,0,0,TAU):t.arc(n,s,D,0,TAU),t.closePath();break;case"triangle":w=o?o/2:D,t.moveTo(n+Math.sin(H)*w,s-Math.cos(H)*D),H+=TWO_THIRDS_PI,t.lineTo(n+Math.sin(H)*w,s-Math.cos(H)*D),H+=TWO_THIRDS_PI,t.lineTo(n+Math.sin(H)*w,s-Math.cos(H)*D),t.closePath();break;case"rectRounded":v=D*.516,y=D-v,d=Math.cos(H+QUARTER_PI)*y,T=Math.cos(H+QUARTER_PI)*(o?o/2-v:y),g=Math.sin(H+QUARTER_PI)*y,A=Math.sin(H+QUARTER_PI)*(o?o/2-v:y),t.arc(n-T,s-g,v,H-PI,H-HALF_PI),t.arc(n+A,s-d,v,H-HALF_PI,H),t.arc(n+T,s+g,v,H,H+HALF_PI),t.arc(n-A,s+d,v,H+HALF_PI,H+PI),t.closePath();break;case"rect":if(!j){y=Math.SQRT1_2*D,w=o?o/2:y,t.rect(n-w,s-y,2*w,2*y);break}H+=QUARTER_PI;case"rectRot":T=Math.cos(H)*(o?o/2:D),d=Math.cos(H)*D,g=Math.sin(H)*D,A=Math.sin(H)*(o?o/2:D),t.moveTo(n-T,s-g),t.lineTo(n+A,s-d),t.lineTo(n+T,s+g),t.lineTo(n-A,s+d),t.closePath();break;case"crossRot":H+=QUARTER_PI;case"cross":T=Math.cos(H)*(o?o/2:D),d=Math.cos(H)*D,g=Math.sin(H)*D,A=Math.sin(H)*(o?o/2:D),t.moveTo(n-T,s-g),t.lineTo(n+T,s+g),t.moveTo(n+A,s-d),t.lineTo(n-A,s+d);break;case"star":T=Math.cos(H)*(o?o/2:D),d=Math.cos(H)*D,g=Math.sin(H)*D,A=Math.sin(H)*(o?o/2:D),t.moveTo(n-T,s-g),t.lineTo(n+T,s+g),t.moveTo(n+A,s-d),t.lineTo(n-A,s+d),H+=QUARTER_PI,T=Math.cos(H)*(o?o/2:D),d=Math.cos(H)*D,g=Math.sin(H)*D,A=Math.sin(H)*(o?o/2:D),t.moveTo(n-T,s-g),t.lineTo(n+T,s+g),t.moveTo(n+A,s-d),t.lineTo(n-A,s+d);break;case"line":d=o?o/2:Math.cos(H)*D,g=Math.sin(H)*D,t.moveTo(n-d,s-g),t.lineTo(n+d,s+g);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(H)*(o?o/2:D),s+Math.sin(H)*D);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function _isPointInArea(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function clipArea(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function unclipArea(t){t.restore()}function _steppedLineTo(t,e,n,s,o){if(!e)return t.lineTo(n.x,n.y);if(o==="middle"){const u=(e.x+n.x)/2;t.lineTo(u,e.y),t.lineTo(u,n.y)}else o==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function _bezierCurveTo(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function setRenderOpts(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),isNullOrUndef(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function decorateText(t,e,n,s,o){if(o.strikethrough||o.underline){const u=t.measureText(s),d=e-u.actualBoundingBoxLeft,g=e+u.actualBoundingBoxRight,y=n-u.actualBoundingBoxAscent,v=n+u.actualBoundingBoxDescent,w=o.strikethrough?(y+v)/2:v;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(d,w),t.lineTo(g,w),t.stroke()}}function drawBackdrop(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function renderText(t,e,n,s,o,u={}){const d=isArray(e)?e:[e],g=u.strokeWidth>0&&u.strokeColor!=="";let y,v;for(t.save(),t.font=o.string,setRenderOpts(t,u),y=0;y<d.length;++y)v=d[y],u.backdrop&&drawBackdrop(t,u.backdrop),g&&(u.strokeColor&&(t.strokeStyle=u.strokeColor),isNullOrUndef(u.strokeWidth)||(t.lineWidth=u.strokeWidth),t.strokeText(v,n,s,u.maxWidth)),t.fillText(v,n,s,u.maxWidth),decorateText(t,n,s,v,u),s+=Number(o.lineHeight);t.restore()}function addRoundedRectPath(t,e){const{x:n,y:s,w:o,h:u,radius:d}=e;t.arc(n+d.topLeft,s+d.topLeft,d.topLeft,1.5*PI,PI,!0),t.lineTo(n,s+u-d.bottomLeft),t.arc(n+d.bottomLeft,s+u-d.bottomLeft,d.bottomLeft,PI,HALF_PI,!0),t.lineTo(n+o-d.bottomRight,s+u),t.arc(n+o-d.bottomRight,s+u-d.bottomRight,d.bottomRight,HALF_PI,0,!0),t.lineTo(n+o,s+d.topRight),t.arc(n+o-d.topRight,s+d.topRight,d.topRight,0,-HALF_PI,!0),t.lineTo(n+d.topLeft,s)}const LINE_HEIGHT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FONT_STYLE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function toLineHeight(t,e){const n=(""+t).match(LINE_HEIGHT);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const numberOrZero=t=>+t||0;function _readValueToProps(t,e){const n={},s=isObject(e),o=s?Object.keys(e):e,u=isObject(t)?s?d=>valueOrDefault(t[d],t[e[d]]):d=>t[d]:()=>t;for(const d of o)n[d]=numberOrZero(u(d));return n}function toTRBL(t){return _readValueToProps(t,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(t){return _readValueToProps(t,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(t){const e=toTRBL(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function toFont(t,e){t=t||{},e=e||defaults.font;let n=valueOrDefault(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=valueOrDefault(t.style,e.style);s&&!(""+s).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const o={family:valueOrDefault(t.family,e.family),lineHeight:toLineHeight(valueOrDefault(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:valueOrDefault(t.weight,e.weight),string:""};return o.string=toFontString(o),o}function resolve(t,e,n,s){let o,u,d;for(o=0,u=t.length;o<u;++o)if(d=t[o],d!==void 0&&d!==void 0)return d}function _addGrace(t,e,n){const{min:s,max:o}=t,u=toDimension(e,(o-s)/2),d=(g,y)=>n&&g===0?0:g+y;return{min:d(s,-Math.abs(u)),max:d(o,u)}}function createContext(t,e){return Object.assign(Object.create(t),e)}function _createResolver(t,e=[""],n,s,o=()=>t[0]){const u=n||t;typeof s>"u"&&(s=_resolve("_fallback",t));const d={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:u,_fallback:s,_getTarget:o,override:g=>_createResolver([g,...t],e,u,s)};return new Proxy(d,{deleteProperty(g,y){return delete g[y],delete g._keys,delete t[0][y],!0},get(g,y){return _cached(g,y,()=>_resolveWithPrefixes(y,e,t,g))},getOwnPropertyDescriptor(g,y){return Reflect.getOwnPropertyDescriptor(g._scopes[0],y)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(g,y){return getKeysFromAllScopes(g).includes(y)},ownKeys(g){return getKeysFromAllScopes(g)},set(g,y,v){const w=g._storage||(g._storage=o());return g[y]=w[y]=v,delete g._keys,!0}})}function _attachContext(t,e,n,s){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:_descriptors(t,s),setContext:u=>_attachContext(t,u,n,s),override:u=>_attachContext(t.override(u),e,n,s)};return new Proxy(o,{deleteProperty(u,d){return delete u[d],delete t[d],!0},get(u,d,g){return _cached(u,d,()=>_resolveWithContext(u,d,g))},getOwnPropertyDescriptor(u,d){return u._descriptors.allKeys?Reflect.has(t,d)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,d)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(u,d){return Reflect.has(t,d)},ownKeys(){return Reflect.ownKeys(t)},set(u,d,g){return t[d]=g,delete u[d],!0}})}function _descriptors(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:n,indexable:s,isScriptable:isFunction(n)?n:()=>n,isIndexable:isFunction(s)?s:()=>s}}const readKey=(t,e)=>t?t+_capitalize(e):e,needsSubResolver=(t,e)=>isObject(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function _cached(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function _resolveWithContext(t,e,n){const{_proxy:s,_context:o,_subProxy:u,_descriptors:d}=t;let g=s[e];return isFunction(g)&&d.isScriptable(e)&&(g=_resolveScriptable(e,g,t,n)),isArray(g)&&g.length&&(g=_resolveArray(e,g,t,d.isIndexable)),needsSubResolver(e,g)&&(g=_attachContext(g,o,u&&u[e],d)),g}function _resolveScriptable(t,e,n,s){const{_proxy:o,_context:u,_subProxy:d,_stack:g}=n;if(g.has(t))throw new Error("Recursion detected: "+Array.from(g).join("->")+"->"+t);g.add(t);let y=e(u,d||s);return g.delete(t),needsSubResolver(t,y)&&(y=createSubResolver(o._scopes,o,t,y)),y}function _resolveArray(t,e,n,s){const{_proxy:o,_context:u,_subProxy:d,_descriptors:g}=n;if(typeof u.index<"u"&&s(t))return e[u.index%e.length];if(isObject(e[0])){const y=e,v=o._scopes.filter(w=>w!==y);e=[];for(const w of y){const T=createSubResolver(v,o,t,w);e.push(_attachContext(T,u,d&&d[t],g))}}return e}function resolveFallback(t,e,n){return isFunction(t)?t(e,n):t}const getScope=(t,e)=>t===!0?e:typeof t=="string"?resolveObjectKey(e,t):void 0;function addScopes(t,e,n,s,o){for(const u of e){const d=getScope(n,u);if(d){t.add(d);const g=resolveFallback(d._fallback,n,o);if(typeof g<"u"&&g!==n&&g!==s)return g}else if(d===!1&&typeof s<"u"&&n!==s)return null}return!1}function createSubResolver(t,e,n,s){const o=e._rootScopes,u=resolveFallback(e._fallback,n,s),d=[...t,...o],g=new Set;g.add(s);let y=addScopesFromKey(g,d,n,u||n,s);return y===null||typeof u<"u"&&u!==n&&(y=addScopesFromKey(g,d,u,y,s),y===null)?!1:_createResolver(Array.from(g),[""],o,u,()=>subGetTarget(e,n,s))}function addScopesFromKey(t,e,n,s,o){for(;n;)n=addScopes(t,e,n,s,o);return n}function subGetTarget(t,e,n){const s=t._getTarget();e in s||(s[e]={});const o=s[e];return isArray(o)&&isObject(n)?n:o||{}}function _resolveWithPrefixes(t,e,n,s){let o;for(const u of e)if(o=_resolve(readKey(u,t),n),typeof o<"u")return needsSubResolver(t,o)?createSubResolver(n,s,t,o):o}function _resolve(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function getKeysFromAllScopes(t){let e=t._keys;return e||(e=t._keys=resolveKeysFromAllScopes(t._scopes)),e}function resolveKeysFromAllScopes(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(o=>!o.startsWith("_")))e.add(s);return Array.from(e)}function _parseObjectDataRadialScale(t,e,n,s){const{iScale:o}=t,{key:u="r"}=this._parsing,d=new Array(s);let g,y,v,w;for(g=0,y=s;g<y;++g)v=g+n,w=e[v],d[g]={r:o.parse(resolveObjectKey(w,u),v)};return d}const EPSILON=Number.EPSILON||1e-14,getPoint=(t,e)=>e<t.length&&!t[e].skip&&t[e],getValueAxis=t=>t==="x"?"y":"x";function splineCurve(t,e,n,s){const o=t.skip?e:t,u=e,d=n.skip?e:n,g=distanceBetweenPoints(u,o),y=distanceBetweenPoints(d,u);let v=g/(g+y),w=y/(g+y);v=isNaN(v)?0:v,w=isNaN(w)?0:w;const T=s*v,A=s*w;return{previous:{x:u.x-T*(d.x-o.x),y:u.y-T*(d.y-o.y)},next:{x:u.x+A*(d.x-o.x),y:u.y+A*(d.y-o.y)}}}function monotoneAdjust(t,e,n){const s=t.length;let o,u,d,g,y,v=getPoint(t,0);for(let w=0;w<s-1;++w)if(y=v,v=getPoint(t,w+1),!(!y||!v)){if(almostEquals(e[w],0,EPSILON)){n[w]=n[w+1]=0;continue}o=n[w]/e[w],u=n[w+1]/e[w],g=Math.pow(o,2)+Math.pow(u,2),!(g<=9)&&(d=3/Math.sqrt(g),n[w]=o*d*e[w],n[w+1]=u*d*e[w])}}function monotoneCompute(t,e,n="x"){const s=getValueAxis(n),o=t.length;let u,d,g,y=getPoint(t,0);for(let v=0;v<o;++v){if(d=g,g=y,y=getPoint(t,v+1),!g)continue;const w=g[n],T=g[s];d&&(u=(w-d[n])/3,g[`cp1${n}`]=w-u,g[`cp1${s}`]=T-u*e[v]),y&&(u=(y[n]-w)/3,g[`cp2${n}`]=w+u,g[`cp2${s}`]=T+u*e[v])}}function splineCurveMonotone(t,e="x"){const n=getValueAxis(e),s=t.length,o=Array(s).fill(0),u=Array(s);let d,g,y,v=getPoint(t,0);for(d=0;d<s;++d)if(g=y,y=v,v=getPoint(t,d+1),!!y){if(v){const w=v[e]-y[e];o[d]=w!==0?(v[n]-y[n])/w:0}u[d]=g?v?sign(o[d-1])!==sign(o[d])?0:(o[d-1]+o[d])/2:o[d-1]:o[d]}monotoneAdjust(t,o,u),monotoneCompute(t,u,e)}function capControlPoint(t,e,n){return Math.max(Math.min(t,n),e)}function capBezierPoints(t,e){let n,s,o,u,d,g=_isPointInArea(t[0],e);for(n=0,s=t.length;n<s;++n)d=u,u=g,g=n<s-1&&_isPointInArea(t[n+1],e),u&&(o=t[n],d&&(o.cp1x=capControlPoint(o.cp1x,e.left,e.right),o.cp1y=capControlPoint(o.cp1y,e.top,e.bottom)),g&&(o.cp2x=capControlPoint(o.cp2x,e.left,e.right),o.cp2y=capControlPoint(o.cp2y,e.top,e.bottom)))}function _updateBezierControlPoints(t,e,n,s,o){let u,d,g,y;if(e.spanGaps&&(t=t.filter(v=>!v.skip)),e.cubicInterpolationMode==="monotone")splineCurveMonotone(t,o);else{let v=s?t[t.length-1]:t[0];for(u=0,d=t.length;u<d;++u)g=t[u],y=splineCurve(v,g,t[Math.min(u+1,d-(s?0:1))%d],e.tension),g.cp1x=y.previous.x,g.cp1y=y.previous.y,g.cp2x=y.next.x,g.cp2y=y.next.y,v=g}e.capBezierPoints&&capBezierPoints(t,n)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function parseMaxStyle(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const getComputedStyle$1=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function getStyle(t,e){return getComputedStyle$1(t).getPropertyValue(e)}const positions=["top","right","bottom","left"];function getPositionedStyle(t,e,n){const s={};n=n?"-"+n:"";for(let o=0;o<4;o++){const u=positions[o];s[u]=parseFloat(t[e+"-"+u+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const useOffsetPos=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function getCanvasPosition(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:o,offsetY:u}=s;let d=!1,g,y;if(useOffsetPos(o,u,t.target))g=o,y=u;else{const v=e.getBoundingClientRect();g=s.clientX-v.left,y=s.clientY-v.top,d=!0}return{x:g,y,box:d}}function getRelativePosition(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,o=getComputedStyle$1(n),u=o.boxSizing==="border-box",d=getPositionedStyle(o,"padding"),g=getPositionedStyle(o,"border","width"),{x:y,y:v,box:w}=getCanvasPosition(t,n),T=d.left+(w&&g.left),A=d.top+(w&&g.top);let{width:C,height:j}=e;return u&&(C-=d.width+g.width,j-=d.height+g.height),{x:Math.round((y-T)/C*n.width/s),y:Math.round((v-A)/j*n.height/s)}}function getContainerSize(t,e,n){let s,o;if(e===void 0||n===void 0){const u=t&&_getParentNode(t);if(!u)e=t.clientWidth,n=t.clientHeight;else{const d=u.getBoundingClientRect(),g=getComputedStyle$1(u),y=getPositionedStyle(g,"border","width"),v=getPositionedStyle(g,"padding");e=d.width-v.width-y.width,n=d.height-v.height-y.height,s=parseMaxStyle(g.maxWidth,u,"clientWidth"),o=parseMaxStyle(g.maxHeight,u,"clientHeight")}}return{width:e,height:n,maxWidth:s||INFINITY,maxHeight:o||INFINITY}}const round1=t=>Math.round(t*10)/10;function getMaximumSize(t,e,n,s){const o=getComputedStyle$1(t),u=getPositionedStyle(o,"margin"),d=parseMaxStyle(o.maxWidth,t,"clientWidth")||INFINITY,g=parseMaxStyle(o.maxHeight,t,"clientHeight")||INFINITY,y=getContainerSize(t,e,n);let{width:v,height:w}=y;if(o.boxSizing==="content-box"){const A=getPositionedStyle(o,"border","width"),C=getPositionedStyle(o,"padding");v-=C.width+A.width,w-=C.height+A.height}return v=Math.max(0,v-u.width),w=Math.max(0,s?v/s:w-u.height),v=round1(Math.min(v,d,y.maxWidth)),w=round1(Math.min(w,g,y.maxHeight)),v&&!w&&(w=round1(v/2)),(e!==void 0||n!==void 0)&&s&&y.height&&w>y.height&&(w=y.height,v=round1(Math.floor(w*s))),{width:v,height:w}}function retinaScale(t,e,n){const s=e||1,o=Math.floor(t.height*s),u=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const d=t.canvas;return d.style&&(n||!d.style.height&&!d.style.width)&&(d.style.height=`${t.height}px`,d.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||d.height!==o||d.width!==u?(t.currentDevicePixelRatio=s,d.height=o,d.width=u,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const supportsEventListenerOptions=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};_isDomSupported()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function readUsedSize(t,e){const n=getStyle(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function _pointInLine(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function _steppedInterpolation(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function _bezierInterpolation(t,e,n,s){const o={x:t.cp2x,y:t.cp2y},u={x:e.cp1x,y:e.cp1y},d=_pointInLine(t,o,n),g=_pointInLine(o,u,n),y=_pointInLine(u,e,n),v=_pointInLine(d,g,n),w=_pointInLine(g,y,n);return _pointInLine(v,w,n)}const getRightToLeftAdapter=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},getLeftToRightAdapter=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function getRtlAdapter(t,e,n){return t?getRightToLeftAdapter(e,n):getLeftToRightAdapter()}function overrideTextDirection(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function restoreTextDirection(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function propertyFn(t){return t==="angle"?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(e,n)=>e-n,normalize:e=>e}}function normalizeSegment({start:t,end:e,count:n,loop:s,style:o}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:o}}function getSegment(t,e,n){const{property:s,start:o,end:u}=n,{between:d,normalize:g}=propertyFn(s),y=e.length;let{start:v,end:w,loop:T}=t,A,C;if(T){for(v+=y,w+=y,A=0,C=y;A<C&&d(g(e[v%y][s]),o,u);++A)v--,w--;v%=y,w%=y}return w<v&&(w+=y),{start:v,end:w,loop:T,style:t.style}}function _boundSegment(t,e,n){if(!n)return[t];const{property:s,start:o,end:u}=n,d=e.length,{compare:g,between:y,normalize:v}=propertyFn(s),{start:w,end:T,loop:A,style:C}=getSegment(t,e,n),j=[];let D=!1,H=null,ne,Y,U;const ee=()=>y(o,U,ne)&&g(o,U)!==0,J=()=>g(u,ne)===0||y(u,U,ne),ie=()=>D||ee(),se=()=>!D||J();for(let K=w,te=w;K<=T;++K)Y=e[K%d],!Y.skip&&(ne=v(Y[s]),ne!==U&&(D=y(ne,o,u),H===null&&ie()&&(H=g(ne,o)===0?K:te),H!==null&&se()&&(j.push(normalizeSegment({start:H,end:K,loop:A,count:d,style:C})),H=null),te=K,U=ne));return H!==null&&j.push(normalizeSegment({start:H,end:T,loop:A,count:d,style:C})),j}function _boundSegments(t,e){const n=[],s=t.segments;for(let o=0;o<s.length;o++){const u=_boundSegment(s[o],t.points,e);u.length&&n.push(...u)}return n}function findStartAndEnd(t,e,n,s){let o=0,u=e-1;if(n&&!s)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,n&&(u+=o);u>o&&t[u%e].skip;)u--;return u%=e,{start:o,end:u}}function solidSegments(t,e,n,s){const o=t.length,u=[];let d=e,g=t[e],y;for(y=e+1;y<=n;++y){const v=t[y%o];v.skip||v.stop?g.skip||(s=!1,u.push({start:e%o,end:(y-1)%o,loop:s}),e=d=v.stop?y:null):(d=y,g.skip&&(e=y)),g=v}return d!==null&&u.push({start:e%o,end:d%o,loop:s}),u}function _computeSegments(t,e){const n=t.points,s=t.options.spanGaps,o=n.length;if(!o)return[];const u=!!t._loop,{start:d,end:g}=findStartAndEnd(n,o,u,s);if(s===!0)return splitByStyles(t,[{start:d,end:g,loop:u}],n,e);const y=g<d?g+o:g,v=!!t._fullLoop&&d===0&&g===o-1;return splitByStyles(t,solidSegments(n,d,y,v),n,e)}function splitByStyles(t,e,n,s){return!s||!s.setContext||!n?e:doSplitByStyles(t,e,n,s)}function doSplitByStyles(t,e,n,s){const o=t._chart.getContext(),u=readStyle(t.options),{_datasetIndex:d,options:{spanGaps:g}}=t,y=n.length,v=[];let w=u,T=e[0].start,A=T;function C(j,D,H,ne){const Y=g?-1:1;if(j!==D){for(j+=y;n[j%y].skip;)j-=Y;for(;n[D%y].skip;)D+=Y;j%y!==D%y&&(v.push({start:j%y,end:D%y,loop:H,style:ne}),w=ne,T=D%y)}}for(const j of e){T=g?T:j.start;let D=n[T%y],H;for(A=T+1;A<=j.end;A++){const ne=n[A%y];H=readStyle(s.setContext(createContext(o,{type:"segment",p0:D,p1:ne,p0DataIndex:(A-1)%y,p1DataIndex:A%y,datasetIndex:d}))),styleChanged(H,w)&&C(T,A-1,j.loop,w),D=ne,w=H}T<A-1&&C(T,A-1,j.loop,w)}return v}function readStyle(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function styleChanged(t,e){if(!e)return!1;const n=[],s=function(o,u){return isPatternOrGradient(u)?(n.includes(u)||n.push(u),n.indexOf(u)):u};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function getSizeForArea(t,e,n){return t.options.clip?t[n]:e[n]}function getDatasetArea(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:getSizeForArea(n,e,"left"),right:getSizeForArea(n,e,"right"),top:getSizeForArea(s,e,"top"),bottom:getSizeForArea(s,e,"bottom")}:e}function getDatasetClipArea(t,e){const n=e._clip;if(n.disabled)return!1;const s=getDatasetArea(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,o){const u=n.listeners[o],d=n.duration;u.forEach(g=>g({chart:e,initial:n.initial,numSteps:d,currentStep:Math.min(s-n.start,d)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,o)=>{if(!s.running||!s.items.length)return;const u=s.items;let d=u.length-1,g=!1,y;for(;d>=0;--d)y=u[d],y._active?(y._total>s.duration&&(s.duration=y._total),y.tick(e),g=!0):(u[d]=u[u.length-1],u.pop());g&&(o.draw(),this._notify(o,s,e,"progress")),u.length||(s.running=!1,this._notify(o,s,e,"complete"),s.initial=!1),n+=u.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,o)=>Math.max(s,o._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let o=s.length-1;for(;o>=0;--o)s[o].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=color(t||transparent),o=s.valid&&color(e||transparent);return o&&o.valid?o.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Animation{constructor(e,n,s,o){const u=n[s];o=resolve([e.to,o,u,e.from]);const d=resolve([e.from,u,o]);this._active=!0,this._fn=e.fn||interpolators[e.type||typeof d],this._easing=effects[e.easing]||effects.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=d,this._to=o,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const o=this._target[this._prop],u=s-this._start,d=this._duration-u;this._start=s,this._duration=Math.floor(Math.max(d,e.duration)),this._total+=u,this._loop=!!e.loop,this._to=resolve([e.to,n,o,e.from]),this._from=resolve([e.from,o,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,o=this._prop,u=this._from,d=this._loop,g=this._to;let y;if(this._active=u!==g&&(d||n<s),!this._active){this._target[o]=g,this._notify(!0);return}if(n<0){this._target[o]=u;return}y=n/s%2,y=d&&y>1?2-y:y,y=this._easing(Math.min(1,Math.max(0,y))),this._target[o]=this._fn(u,g,y)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let o=0;o<s.length;o++)s[o][n]()}}class Animations{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!isObject(e))return;const n=Object.keys(defaults.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(o=>{const u=e[o];if(!isObject(u))return;const d={};for(const g of n)d[g]=u[g];(isArray(u.properties)&&u.properties||[o]).forEach(g=>{(g===o||!s.has(g))&&s.set(g,d)})})}_animateOptions(e,n){const s=n.options,o=resolveTargetOptions(e,s);if(!o)return[];const u=this._createAnimations(o,s);return s.$shared&&awaitAll(e.options.$animations,s).then(()=>{e.options=s},()=>{}),u}_createAnimations(e,n){const s=this._properties,o=[],u=e.$animations||(e.$animations={}),d=Object.keys(n),g=Date.now();let y;for(y=d.length-1;y>=0;--y){const v=d[y];if(v.charAt(0)==="$")continue;if(v==="options"){o.push(...this._animateOptions(e,n));continue}const w=n[v];let T=u[v];const A=s.get(v);if(T)if(A&&T.active()){T.update(A,w,g);continue}else T.cancel();if(!A||!A.duration){e[v]=w;continue}u[v]=T=new Animation(A,e,v,w),o.push(T)}return o}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return animator.add(this._chart,s),!0}}function awaitAll(t,e){const n=[],s=Object.keys(e);for(let o=0;o<s.length;o++){const u=t[s[o]];u&&u.active()&&n.push(u.wait())}return Promise.all(n)}function resolveTargetOptions(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function scaleClip(t,e){const n=t&&t.options||{},s=n.reverse,o=n.min===void 0?e:0,u=n.max===void 0?e:0;return{start:s?u:o,end:s?o:u}}function defaultClip(t,e,n){if(n===!1)return!1;const s=scaleClip(t,n),o=scaleClip(e,n);return{top:o.end,right:s.end,bottom:o.start,left:s.start}}function toClip(t){let e,n,s,o;return isObject(t)?(e=t.top,n=t.right,s=t.bottom,o=t.left):e=n=s=o=t,{top:e,right:n,bottom:s,left:o,disabled:t===!1}}function getSortedDatasetIndices(t,e){const n=[],s=t._getSortedDatasetMetas(e);let o,u;for(o=0,u=s.length;o<u;++o)n.push(s[o].index);return n}function applyStack(t,e,n,s={}){const o=t.keys,u=s.mode==="single";let d,g,y,v;if(e===null)return;let w=!1;for(d=0,g=o.length;d<g;++d){if(y=+o[d],y===n){if(w=!0,s.all)continue;break}v=t.values[y],isNumberFinite(v)&&(u||e===0||sign(e)===sign(v))&&(e+=v)}return!w&&!s.all?0:e}function convertObjectDataToArray(t,e){const{iScale:n,vScale:s}=e,o=n.axis==="x"?"x":"y",u=s.axis==="x"?"x":"y",d=Object.keys(t),g=new Array(d.length);let y,v,w;for(y=0,v=d.length;y<v;++y)w=d[y],g[y]={[o]:w,[u]:t[w]};return g}function isStacked(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function getStackKey(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function getUserBounds(t){const{min:e,max:n,minDefined:s,maxDefined:o}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}function getOrCreateStack(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function getLastIndexInStack(t,e,n,s){for(const o of e.getMatchingVisibleMetas(s).reverse()){const u=t[o.index];if(n&&u>0||!n&&u<0)return o.index}return null}function updateStacks(t,e){const{chart:n,_cachedMeta:s}=t,o=n._stacks||(n._stacks={}),{iScale:u,vScale:d,index:g}=s,y=u.axis,v=d.axis,w=getStackKey(u,d,s),T=e.length;let A;for(let C=0;C<T;++C){const j=e[C],{[y]:D,[v]:H}=j,ne=j._stacks||(j._stacks={});A=ne[v]=getOrCreateStack(o,w,D),A[g]=H,A._top=getLastIndexInStack(A,d,!0,s.type),A._bottom=getLastIndexInStack(A,d,!1,s.type);const Y=A._visualValues||(A._visualValues={});Y[g]=H}}function getFirstScaleId(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function createDatasetContext(t,e){return createContext(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function createDataContext(t,e,n){return createContext(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function clearStacks(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const o of e){const u=o._stacks;if(!u||u[s]===void 0||u[s][n]===void 0)return;delete u[s][n],u[s]._visualValues!==void 0&&u[s]._visualValues[n]!==void 0&&delete u[s]._visualValues[n]}}}const isDirectUpdateMode=t=>t==="reset"||t==="none",cloneIfNotShared=(t,e)=>e?t:Object.assign({},t),createStack=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:getSortedDatasetIndices(n,!0),values:null};class DatasetController{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=isStacked(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&clearStacks(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),o=(T,A,C,j)=>T==="x"?A:T==="r"?j:C,u=n.xAxisID=valueOrDefault(s.xAxisID,getFirstScaleId(e,"x")),d=n.yAxisID=valueOrDefault(s.yAxisID,getFirstScaleId(e,"y")),g=n.rAxisID=valueOrDefault(s.rAxisID,getFirstScaleId(e,"r")),y=n.indexAxis,v=n.iAxisID=o(y,u,d,g),w=n.vAxisID=o(y,d,u,g);n.xScale=this.getScaleForId(u),n.yScale=this.getScaleForId(d),n.rScale=this.getScaleForId(g),n.iScale=this.getScaleForId(v),n.vScale=this.getScaleForId(w)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),e._stacked&&clearStacks(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(isObject(n)){const o=this._cachedMeta;this._data=convertObjectDataToArray(n,o)}else if(s!==n){if(s){unlistenArrayEvents(s,this);const o=this._cachedMeta;clearStacks(o),o._parsed=[]}n&&Object.isExtensible(n)&&listenArrayEvents(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let o=!1;this._dataCheck();const u=n._stacked;n._stacked=isStacked(n.vScale,n),n.stack!==s.stack&&(o=!0,clearStacks(n),n.stack=s.stack),this._resyncElements(e),(o||u!==n._stacked)&&(updateStacks(this,n._parsed),n._stacked=isStacked(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:o}=this,{iScale:u,_stacked:d}=s,g=u.axis;let y=e===0&&n===o.length?!0:s._sorted,v=e>0&&s._parsed[e-1],w,T,A;if(this._parsing===!1)s._parsed=o,s._sorted=!0,A=o;else{isArray(o[e])?A=this.parseArrayData(s,o,e,n):isObject(o[e])?A=this.parseObjectData(s,o,e,n):A=this.parsePrimitiveData(s,o,e,n);const C=()=>T[g]===null||v&&T[g]<v[g];for(w=0;w<n;++w)s._parsed[w+e]=T=A[w],y&&(C()&&(y=!1),v=T);s._sorted=y}d&&updateStacks(this,A)}parsePrimitiveData(e,n,s,o){const{iScale:u,vScale:d}=e,g=u.axis,y=d.axis,v=u.getLabels(),w=u===d,T=new Array(o);let A,C,j;for(A=0,C=o;A<C;++A)j=A+s,T[A]={[g]:w||u.parse(v[j],j),[y]:d.parse(n[j],j)};return T}parseArrayData(e,n,s,o){const{xScale:u,yScale:d}=e,g=new Array(o);let y,v,w,T;for(y=0,v=o;y<v;++y)w=y+s,T=n[w],g[y]={x:u.parse(T[0],w),y:d.parse(T[1],w)};return g}parseObjectData(e,n,s,o){const{xScale:u,yScale:d}=e,{xAxisKey:g="x",yAxisKey:y="y"}=this._parsing,v=new Array(o);let w,T,A,C;for(w=0,T=o;w<T;++w)A=w+s,C=n[A],v[w]={x:u.parse(resolveObjectKey(C,g),A),y:d.parse(resolveObjectKey(C,y),A)};return v}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const o=this.chart,u=this._cachedMeta,d=n[e.axis],g={keys:getSortedDatasetIndices(o,!0),values:n._stacks[e.axis]._visualValues};return applyStack(g,d,u.index,{mode:s})}updateRangeFromParsed(e,n,s,o){const u=s[n.axis];let d=u===null?NaN:u;const g=o&&s._stacks[n.axis];o&&g&&(o.values=g,d=applyStack(o,u,this._cachedMeta.index)),e.min=Math.min(e.min,d),e.max=Math.max(e.max,d)}getMinMax(e,n){const s=this._cachedMeta,o=s._parsed,u=s._sorted&&e===s.iScale,d=o.length,g=this._getOtherScale(e),y=createStack(n,s,this.chart),v={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:w,max:T}=getUserBounds(g);let A,C;function j(){C=o[A];const D=C[g.axis];return!isNumberFinite(C[e.axis])||w>D||T<D}for(A=0;A<d&&!(!j()&&(this.updateRangeFromParsed(v,e,C,y),u));++A);if(u){for(A=d-1;A>=0;--A)if(!j()){this.updateRangeFromParsed(v,e,C,y);break}}return v}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let o,u,d;for(o=0,u=n.length;o<u;++o)d=n[o][e.axis],isNumberFinite(d)&&s.push(d);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,o=n.vScale,u=this.getParsed(e);return{label:s?""+s.getLabelForValue(u[s.axis]):"",value:o?""+o.getLabelForValue(u[o.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=toClip(valueOrDefault(this.options.clip,defaultClip(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,o=s.data||[],u=n.chartArea,d=[],g=this._drawStart||0,y=this._drawCount||o.length-g,v=this.options.drawActiveElementsOnTop;let w;for(s.dataset&&s.dataset.draw(e,u,g,y),w=g;w<g+y;++w){const T=o[w];T.hidden||(T.active&&v?d.push(T):T.draw(e,u))}for(w=0;w<d.length;++w)d[w].draw(e,u)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const o=this.getDataset();let u;if(e>=0&&e<this._cachedMeta.data.length){const d=this._cachedMeta.data[e];u=d.$context||(d.$context=createDataContext(this.getContext(),e,d)),u.parsed=this.getParsed(e),u.raw=o.data[e],u.index=u.dataIndex=e}else u=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),u.dataset=o,u.index=u.datasetIndex=this.index;return u.active=!!n,u.mode=s,u}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const o=n==="active",u=this._cachedDataOpts,d=e+"-"+n,g=u[d],y=this.enableOptionSharing&&defined(s);if(g)return cloneIfNotShared(g,y);const v=this.chart.config,w=v.datasetElementScopeKeys(this._type,e),T=o?[`${e}Hover`,"hover",e,""]:[e,""],A=v.getOptionScopes(this.getDataset(),w),C=Object.keys(defaults.elements[e]),j=()=>this.getContext(s,o,n),D=v.resolveNamedOptions(A,C,j,T);return D.$shared&&(D.$shared=y,u[d]=Object.freeze(cloneIfNotShared(D,y))),D}_resolveAnimations(e,n,s){const o=this.chart,u=this._cachedDataOpts,d=`animation-${n}`,g=u[d];if(g)return g;let y;if(o.options.animation!==!1){const w=this.chart.config,T=w.datasetAnimationScopeKeys(this._type,n),A=w.getOptionScopes(this.getDataset(),T);y=w.createResolver(A,this.getContext(e,s,n))}const v=new Animations(o,y&&y.animations);return y&&y._cacheable&&(u[d]=Object.freeze(v)),v}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||isDirectUpdateMode(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),o=this._sharedOptions,u=this.getSharedOptions(s),d=this.includeOptions(n,u)||u!==o;return this.updateSharedOptions(u,n,s),{sharedOptions:u,includeOptions:d}}updateElement(e,n,s,o){isDirectUpdateMode(o)?Object.assign(e,s):this._resolveAnimations(n,o).update(e,s)}updateSharedOptions(e,n,s){e&&!isDirectUpdateMode(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,o){e.active=o;const u=this.getStyle(n,o);this._resolveAnimations(n,s,o).update(e,{options:!o&&this.getSharedOptions(u)||u})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[g,y,v]of this._syncList)this[g](y,v);this._syncList=[];const o=s.length,u=n.length,d=Math.min(u,o);d&&this.parse(0,d),u>o?this._insertElements(o,u-o,e):u<o&&this._removeElements(u,o-u)}_insertElements(e,n,s=!0){const o=this._cachedMeta,u=o.data,d=e+n;let g;const y=v=>{for(v.length+=n,g=v.length-1;g>=d;g--)v[g]=v[g-n]};for(y(u),g=e;g<d;++g)u[g]=new this.dataElementType;this._parsing&&y(o._parsed),this.parse(e,n),s&&this.updateElements(u,e,n,"reset")}updateElements(e,n,s,o){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const o=s._parsed.splice(e,n);s._stacked&&clearStacks(s,o)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,o]=e;this[n](s,o)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}dn(DatasetController,"defaults",{}),dn(DatasetController,"datasetElementType",null),dn(DatasetController,"dataElementType",null);function getAllScaleValues(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let o=0,u=n.length;o<u;o++)s=s.concat(n[o].controller.getAllParsedValues(t));t._cache.$bar=_arrayUnique(s.sort((o,u)=>o-u))}return t._cache.$bar}function computeMinSampleSize(t){const e=t.iScale,n=getAllScaleValues(e,t.type);let s=e._length,o,u,d,g;const y=()=>{d===32767||d===-32768||(defined(g)&&(s=Math.min(s,Math.abs(d-g)||s)),g=d)};for(o=0,u=n.length;o<u;++o)d=e.getPixelForValue(n[o]),y();for(g=void 0,o=0,u=e.ticks.length;o<u;++o)d=e.getPixelForTick(o),y();return s}function computeFitCategoryTraits(t,e,n,s){const o=n.barThickness;let u,d;return isNullOrUndef(o)?(u=e.min*n.categoryPercentage,d=n.barPercentage):(u=o*s,d=1),{chunk:u/s,ratio:d,start:e.pixels[t]-u/2}}function computeFlexCategoryTraits(t,e,n,s){const o=e.pixels,u=o[t];let d=t>0?o[t-1]:null,g=t<o.length-1?o[t+1]:null;const y=n.categoryPercentage;d===null&&(d=u-(g===null?e.end-e.start:g-u)),g===null&&(g=u+u-d);const v=u-(u-Math.min(d,g))/2*y;return{chunk:Math.abs(g-d)/2*y/s,ratio:n.barPercentage,start:v}}function parseFloatBar(t,e,n,s){const o=n.parse(t[0],s),u=n.parse(t[1],s),d=Math.min(o,u),g=Math.max(o,u);let y=d,v=g;Math.abs(d)>Math.abs(g)&&(y=g,v=d),e[n.axis]=v,e._custom={barStart:y,barEnd:v,start:o,end:u,min:d,max:g}}function parseValue(t,e,n,s){return isArray(t)?parseFloatBar(t,e,n,s):e[n.axis]=n.parse(t,s),e}function parseArrayOrPrimitive(t,e,n,s){const o=t.iScale,u=t.vScale,d=o.getLabels(),g=o===u,y=[];let v,w,T,A;for(v=n,w=n+s;v<w;++v)A=e[v],T={},T[o.axis]=g||o.parse(d[v],v),y.push(parseValue(A,T,u,v));return y}function isFloatBar(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function barSign(t,e,n){return t!==0?sign(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function borderProps(t){let e,n,s,o,u;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(o="end",u="start"):(o="start",u="end"),{start:n,end:s,reverse:e,top:o,bottom:u}}function setBorderSkipped(t,e,n,s){let o=e.borderSkipped;const u={};if(!o){t.borderSkipped=u;return}if(o===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:d,end:g,reverse:y,top:v,bottom:w}=borderProps(t);o==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?o=v:(n._bottom||0)===s?o=w:(u[parseEdge(w,d,g,y)]=!0,o=v)),u[parseEdge(o,d,g,y)]=!0,t.borderSkipped=u}function parseEdge(t,e,n,s){return s?(t=swap(t,e,n),t=startEnd(t,n,e)):t=startEnd(t,e,n),t}function swap(t,e,n){return t===e?n:t===n?e:t}function startEnd(t,e,n){return t==="start"?e:t==="end"?n:t}function setInflateAmount(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class BarController extends DatasetController{parsePrimitiveData(e,n,s,o){return parseArrayOrPrimitive(e,n,s,o)}parseArrayData(e,n,s,o){return parseArrayOrPrimitive(e,n,s,o)}parseObjectData(e,n,s,o){const{iScale:u,vScale:d}=e,{xAxisKey:g="x",yAxisKey:y="y"}=this._parsing,v=u.axis==="x"?g:y,w=d.axis==="x"?g:y,T=[];let A,C,j,D;for(A=s,C=s+o;A<C;++A)D=n[A],j={},j[u.axis]=u.parse(resolveObjectKey(D,v),A),T.push(parseValue(resolveObjectKey(D,w),j,d,A));return T}updateRangeFromParsed(e,n,s,o){super.updateRangeFromParsed(e,n,s,o);const u=s._custom;u&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,u.min),e.max=Math.max(e.max,u.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:o}=n,u=this.getParsed(e),d=u._custom,g=isFloatBar(d)?"["+d.start+", "+d.end+"]":""+o.getLabelForValue(u[o.axis]);return{label:""+s.getLabelForValue(u[s.axis]),value:g}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,o){const u=o==="reset",{index:d,_cachedMeta:{vScale:g}}=this,y=g.getBasePixel(),v=g.isHorizontal(),w=this._getRuler(),{sharedOptions:T,includeOptions:A}=this._getSharedOptions(n,o);for(let C=n;C<n+s;C++){const j=this.getParsed(C),D=u||isNullOrUndef(j[g.axis])?{base:y,head:y}:this._calculateBarValuePixels(C),H=this._calculateBarIndexPixels(C,w),ne=(j._stacks||{})[g.axis],Y={horizontal:v,base:D.base,enableBorderRadius:!ne||isFloatBar(j._custom)||d===ne._top||d===ne._bottom,x:v?D.head:H.center,y:v?H.center:D.head,height:v?H.size:Math.abs(D.size),width:v?Math.abs(D.size):H.size};A&&(Y.options=T||this.resolveDataElementOptions(C,e[C].active?"active":o));const U=Y.options||e[C].options;setBorderSkipped(Y,U,ne,d),setInflateAmount(Y,U,w.ratio),this.updateElement(e[C],C,Y,o)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,o=s.getMatchingVisibleMetas(this._type).filter(w=>w.controller.options.grouped),u=s.options.stacked,d=[],g=this._cachedMeta.controller.getParsed(n),y=g&&g[s.axis],v=w=>{const T=w._parsed.find(C=>C[s.axis]===y),A=T&&T[w.vScale.axis];if(isNullOrUndef(A)||isNaN(A))return!0};for(const w of o)if(!(n!==void 0&&v(w))&&((u===!1||d.indexOf(w.stack)===-1||u===void 0&&w.stack===void 0)&&d.push(w.stack),w.index===e))break;return d.length||d.push(void 0),d}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[valueOrDefault(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const o=this._getStacks(e,s),u=n!==void 0?o.indexOf(n):-1;return u===-1?o.length-1:u}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,o=[];let u,d;for(u=0,d=n.data.length;u<d;++u)o.push(s.getPixelForValue(this.getParsed(u)[s.axis],u));const g=e.barThickness;return{min:g||computeMinSampleSize(n),pixels:o,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:g?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:o},options:{base:u,minBarLength:d}}=this,g=u||0,y=this.getParsed(e),v=y._custom,w=isFloatBar(v);let T=y[n.axis],A=0,C=s?this.applyStack(n,y,s):T,j,D;C!==T&&(A=C-T,C=T),w&&(T=v.barStart,C=v.barEnd-v.barStart,T!==0&&sign(T)!==sign(v.barEnd)&&(A=0),A+=T);const H=!isNullOrUndef(u)&&!w?u:A;let ne=n.getPixelForValue(H);if(this.chart.getDataVisibility(e)?j=n.getPixelForValue(A+C):j=ne,D=j-ne,Math.abs(D)<d){D=barSign(D,n,g)*d,T===g&&(ne-=D/2);const Y=n.getPixelForDecimal(0),U=n.getPixelForDecimal(1),ee=Math.min(Y,U),J=Math.max(Y,U);ne=Math.max(Math.min(ne,J),ee),j=ne+D,s&&!w&&(y._stacks[n.axis]._visualValues[o]=n.getValueForPixel(j)-n.getValueForPixel(ne))}if(ne===n.getPixelForValue(g)){const Y=sign(D)*n.getLineWidthForValue(g)/2;ne+=Y,D-=Y}return{size:D,base:ne,head:j,center:j+D/2}}_calculateBarIndexPixels(e,n){const s=n.scale,o=this.options,u=o.skipNull,d=valueOrDefault(o.maxBarThickness,1/0);let g,y;const v=this._getAxisCount();if(n.grouped){const w=u?this._getStackCount(e):n.stackCount,T=o.barThickness==="flex"?computeFlexCategoryTraits(e,n,o,w*v):computeFitCategoryTraits(e,n,o,w*v),A=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,C=this._getAxis().indexOf(valueOrDefault(A,this.getFirstScaleIdForIndexAxis())),j=this._getStackIndex(this.index,this._cachedMeta.stack,u?e:void 0)+C;g=T.start+T.chunk*j+T.chunk/2,y=Math.min(d,T.chunk*T.ratio)}else g=s.getPixelForValue(this.getParsed(e)[s.axis],e),y=Math.min(d,n.min*n.ratio);return{base:g-y/2,head:g+y/2,center:g,size:y}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,o=s.length;let u=0;for(;u<o;++u)this.getParsed(u)[n.axis]!==null&&!s[u].hidden&&s[u].draw(this._ctx)}}dn(BarController,"id","bar"),dn(BarController,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),dn(BarController,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class BubbleController extends DatasetController{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,s,o){const u=super.parsePrimitiveData(e,n,s,o);for(let d=0;d<u.length;d++)u[d]._custom=this.resolveDataElementOptions(d+s).radius;return u}parseArrayData(e,n,s,o){const u=super.parseArrayData(e,n,s,o);for(let d=0;d<u.length;d++){const g=n[s+d];u[d]._custom=valueOrDefault(g[2],this.resolveDataElementOptions(d+s).radius)}return u}parseObjectData(e,n,s,o){const u=super.parseObjectData(e,n,s,o);for(let d=0;d<u.length;d++){const g=n[s+d];u[d]._custom=valueOrDefault(g&&g.r&&+g.r,this.resolveDataElementOptions(d+s).radius)}return u}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let s=e.length-1;s>=0;--s)n=Math.max(n,e[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:o,yScale:u}=n,d=this.getParsed(e),g=o.getLabelForValue(d.x),y=u.getLabelForValue(d.y),v=d._custom;return{label:s[e]||"",value:"("+g+", "+y+(v?", "+v:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,s,o){const u=o==="reset",{iScale:d,vScale:g}=this._cachedMeta,{sharedOptions:y,includeOptions:v}=this._getSharedOptions(n,o),w=d.axis,T=g.axis;for(let A=n;A<n+s;A++){const C=e[A],j=!u&&this.getParsed(A),D={},H=D[w]=u?d.getPixelForDecimal(.5):d.getPixelForValue(j[w]),ne=D[T]=u?g.getBasePixel():g.getPixelForValue(j[T]);D.skip=isNaN(H)||isNaN(ne),v&&(D.options=y||this.resolveDataElementOptions(A,C.active?"active":o),u&&(D.options.radius=0)),this.updateElement(C,A,D,o)}}resolveDataElementOptions(e,n){const s=this.getParsed(e);let o=super.resolveDataElementOptions(e,n);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const u=o.radius;return n!=="active"&&(o.radius=0),o.radius+=valueOrDefault(s&&s._custom,u),o}}dn(BubbleController,"id","bubble"),dn(BubbleController,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),dn(BubbleController,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function getRatioAndOffset(t,e,n){let s=1,o=1,u=0,d=0;if(e<TAU){const g=t,y=g+e,v=Math.cos(g),w=Math.sin(g),T=Math.cos(y),A=Math.sin(y),C=(U,ee,J)=>_angleBetween(U,g,y,!0)?1:Math.max(ee,ee*n,J,J*n),j=(U,ee,J)=>_angleBetween(U,g,y,!0)?-1:Math.min(ee,ee*n,J,J*n),D=C(0,v,T),H=C(HALF_PI,w,A),ne=j(PI,v,T),Y=j(PI+HALF_PI,w,A);s=(D-ne)/2,o=(H-Y)/2,u=-(D+ne)/2,d=-(H+Y)/2}return{ratioX:s,ratioY:o,offsetX:u,offsetY:d}}class DoughnutController extends DatasetController{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=s;else{let u=y=>+s[y];if(isObject(s[e])){const{key:y="value"}=this._parsing;u=v=>+resolveObjectKey(s[v],y)}let d,g;for(d=e,g=e+n;d<g;++d)o._parsed[d]=u(d)}}_getRotation(){return toRadians(this.options.rotation-90)}_getCircumference(){return toRadians(this.options.circumference)}_getRotationExtents(){let e=TAU,n=-TAU;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const o=this.chart.getDatasetMeta(s).controller,u=o._getRotation(),d=o._getCircumference();e=Math.min(e,u),n=Math.max(n,u+d)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,o=this._cachedMeta,u=o.data,d=this.getMaxBorderWidth()+this.getMaxOffset(u)+this.options.spacing,g=Math.max((Math.min(s.width,s.height)-d)/2,0),y=Math.min(toPercentage(this.options.cutout,g),1),v=this._getRingWeight(this.index),{circumference:w,rotation:T}=this._getRotationExtents(),{ratioX:A,ratioY:C,offsetX:j,offsetY:D}=getRatioAndOffset(T,w,y),H=(s.width-d)/A,ne=(s.height-d)/C,Y=Math.max(Math.min(H,ne)/2,0),U=toDimension(this.options.radius,Y),ee=Math.max(U*y,0),J=(U-ee)/this._getVisibleDatasetWeightTotal();this.offsetX=j*U,this.offsetY=D*U,o.total=this.calculateTotal(),this.outerRadius=U-J*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-J*v,0),this.updateElements(u,0,u.length,e)}_circumference(e,n){const s=this.options,o=this._cachedMeta,u=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||o._parsed[e]===null||o.data[e].hidden?0:this.calculateCircumference(o._parsed[e]*u/TAU)}updateElements(e,n,s,o){const u=o==="reset",d=this.chart,g=d.chartArea,v=d.options.animation,w=(g.left+g.right)/2,T=(g.top+g.bottom)/2,A=u&&v.animateScale,C=A?0:this.innerRadius,j=A?0:this.outerRadius,{sharedOptions:D,includeOptions:H}=this._getSharedOptions(n,o);let ne=this._getRotation(),Y;for(Y=0;Y<n;++Y)ne+=this._circumference(Y,u);for(Y=n;Y<n+s;++Y){const U=this._circumference(Y,u),ee=e[Y],J={x:w+this.offsetX,y:T+this.offsetY,startAngle:ne,endAngle:ne+U,circumference:U,outerRadius:j,innerRadius:C};H&&(J.options=D||this.resolveDataElementOptions(Y,ee.active?"active":o)),ne+=U,this.updateElement(ee,Y,J,o)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,o;for(o=0;o<n.length;o++){const u=e._parsed[o];u!==null&&!isNaN(u)&&this.chart.getDataVisibility(o)&&!n[o].hidden&&(s+=Math.abs(u))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?TAU*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,o=s.data.labels||[],u=formatNumber(n._parsed[e],s.options.locale);return{label:o[e]||"",value:u}}getMaxBorderWidth(e){let n=0;const s=this.chart;let o,u,d,g,y;if(!e){for(o=0,u=s.data.datasets.length;o<u;++o)if(s.isDatasetVisible(o)){d=s.getDatasetMeta(o),e=d.data,g=d.controller;break}}if(!e)return 0;for(o=0,u=e.length;o<u;++o)y=g.resolveDataElementOptions(o),y.borderAlign!=="inner"&&(n=Math.max(n,y.borderWidth||0,y.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,o=e.length;s<o;++s){const u=this.resolveDataElementOptions(s);n=Math.max(n,u.offset||0,u.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(valueOrDefault(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}dn(DoughnutController,"id","doughnut"),dn(DoughnutController,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),dn(DoughnutController,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),dn(DoughnutController,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:o}}=e.legend.options;return n.labels.map((u,d)=>{const y=e.getDatasetMeta(0).controller.getStyle(d);return{text:u,fillStyle:y.backgroundColor,strokeStyle:y.borderColor,fontColor:o,lineWidth:y.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(d),index:d}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class LineController extends DatasetController{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:o=[],_dataset:u}=n,d=this.chart._animationsDisabled;let{start:g,count:y}=_getStartAndCountOfVisiblePoints(n,o,d);this._drawStart=g,this._drawCount=y,_scaleRangesChanged(n)&&(g=0,y=o.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!u._decimated,s.points=o;const v=this.resolveDatasetElementOptions(e);this.options.showLine||(v.borderWidth=0),v.segment=this.options.segment,this.updateElement(s,void 0,{animated:!d,options:v},e),this.updateElements(o,g,y,e)}updateElements(e,n,s,o){const u=o==="reset",{iScale:d,vScale:g,_stacked:y,_dataset:v}=this._cachedMeta,{sharedOptions:w,includeOptions:T}=this._getSharedOptions(n,o),A=d.axis,C=g.axis,{spanGaps:j,segment:D}=this.options,H=isNumber(j)?j:Number.POSITIVE_INFINITY,ne=this.chart._animationsDisabled||u||o==="none",Y=n+s,U=e.length;let ee=n>0&&this.getParsed(n-1);for(let J=0;J<U;++J){const ie=e[J],se=ne?ie:{};if(J<n||J>=Y){se.skip=!0;continue}const K=this.getParsed(J),te=isNullOrUndef(K[C]),re=se[A]=d.getPixelForValue(K[A],J),ce=se[C]=u||te?g.getBasePixel():g.getPixelForValue(y?this.applyStack(g,K,y):K[C],J);se.skip=isNaN(re)||isNaN(ce)||te,se.stop=J>0&&Math.abs(K[A]-ee[A])>H,D&&(se.parsed=K,se.raw=v.data[J]),T&&(se.options=w||this.resolveDataElementOptions(J,ie.active?"active":o)),ne||this.updateElement(ie,J,se,o),ee=K}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,o=e.data||[];if(!o.length)return s;const u=o[0].size(this.resolveDataElementOptions(0)),d=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(s,u,d)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}dn(LineController,"id","line"),dn(LineController,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),dn(LineController,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class PolarAreaController extends DatasetController{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,o=s.data.labels||[],u=formatNumber(n._parsed[e].r,s.options.locale);return{label:o[e]||"",value:u}}parseObjectData(e,n,s,o){return _parseObjectDataRadialScale.bind(this)(e,n,s,o)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,o)=>{const u=this.getParsed(o).r;!isNaN(u)&&this.chart.getDataVisibility(o)&&(u<n.min&&(n.min=u),u>n.max&&(n.max=u))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,s=e.options,o=Math.min(n.right-n.left,n.bottom-n.top),u=Math.max(o/2,0),d=Math.max(s.cutoutPercentage?u/100*s.cutoutPercentage:1,0),g=(u-d)/e.getVisibleDatasetCount();this.outerRadius=u-g*this.index,this.innerRadius=this.outerRadius-g}updateElements(e,n,s,o){const u=o==="reset",d=this.chart,y=d.options.animation,v=this._cachedMeta.rScale,w=v.xCenter,T=v.yCenter,A=v.getIndexAngle(0)-.5*PI;let C=A,j;const D=360/this.countVisibleElements();for(j=0;j<n;++j)C+=this._computeAngle(j,o,D);for(j=n;j<n+s;j++){const H=e[j];let ne=C,Y=C+this._computeAngle(j,o,D),U=d.getDataVisibility(j)?v.getDistanceFromCenterForValue(this.getParsed(j).r):0;C=Y,u&&(y.animateScale&&(U=0),y.animateRotate&&(ne=Y=A));const ee={x:w,y:T,innerRadius:0,outerRadius:U,startAngle:ne,endAngle:Y,options:this.resolveDataElementOptions(j,H.active?"active":o)};this.updateElement(H,j,ee,o)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((s,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&n++}),n}_computeAngle(e,n,s){return this.chart.getDataVisibility(e)?toRadians(this.resolveDataElementOptions(e,n).angle||s):0}}dn(PolarAreaController,"id","polarArea"),dn(PolarAreaController,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),dn(PolarAreaController,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:o}}=e.legend.options;return n.labels.map((u,d)=>{const y=e.getDatasetMeta(0).controller.getStyle(d);return{text:u,fillStyle:y.backgroundColor,strokeStyle:y.borderColor,fontColor:o,lineWidth:y.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(d),index:d}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class PieController extends DoughnutController{}dn(PieController,"id","pie"),dn(PieController,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class RadarController extends DatasetController{getLabelAndValue(e){const n=this._cachedMeta.vScale,s=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(e,n,s,o){return _parseObjectDataRadialScale.bind(this)(e,n,s,o)}update(e){const n=this._cachedMeta,s=n.dataset,o=n.data||[],u=n.iScale.getLabels();if(s.points=o,e!=="resize"){const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0);const g={_loop:!0,_fullLoop:u.length===o.length,options:d};this.updateElement(s,void 0,g,e)}this.updateElements(o,0,o.length,e)}updateElements(e,n,s,o){const u=this._cachedMeta.rScale,d=o==="reset";for(let g=n;g<n+s;g++){const y=e[g],v=this.resolveDataElementOptions(g,y.active?"active":o),w=u.getPointPositionForValue(g,this.getParsed(g).r),T=d?u.xCenter:w.x,A=d?u.yCenter:w.y,C={x:T,y:A,angle:w.angle,skip:isNaN(T)||isNaN(A),options:v};this.updateElement(y,g,C,o)}}}dn(RadarController,"id","radar"),dn(RadarController,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),dn(RadarController,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class ScatterController extends DatasetController{getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:o,yScale:u}=n,d=this.getParsed(e),g=o.getLabelForValue(d.x),y=u.getLabelForValue(d.y);return{label:s[e]||"",value:"("+g+", "+y+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,o=this.chart._animationsDisabled;let{start:u,count:d}=_getStartAndCountOfVisiblePoints(n,s,o);if(this._drawStart=u,this._drawCount=d,_scaleRangesChanged(n)&&(u=0,d=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:g,_dataset:y}=n;g._chart=this.chart,g._datasetIndex=this.index,g._decimated=!!y._decimated,g.points=s;const v=this.resolveDatasetElementOptions(e);v.segment=this.options.segment,this.updateElement(g,void 0,{animated:!o,options:v},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,u,d,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,o){const u=o==="reset",{iScale:d,vScale:g,_stacked:y,_dataset:v}=this._cachedMeta,w=this.resolveDataElementOptions(n,o),T=this.getSharedOptions(w),A=this.includeOptions(o,T),C=d.axis,j=g.axis,{spanGaps:D,segment:H}=this.options,ne=isNumber(D)?D:Number.POSITIVE_INFINITY,Y=this.chart._animationsDisabled||u||o==="none";let U=n>0&&this.getParsed(n-1);for(let ee=n;ee<n+s;++ee){const J=e[ee],ie=this.getParsed(ee),se=Y?J:{},K=isNullOrUndef(ie[j]),te=se[C]=d.getPixelForValue(ie[C],ee),re=se[j]=u||K?g.getBasePixel():g.getPixelForValue(y?this.applyStack(g,ie,y):ie[j],ee);se.skip=isNaN(te)||isNaN(re)||K,se.stop=ee>0&&Math.abs(ie[C]-U[C])>ne,H&&(se.parsed=ie,se.raw=v.data[ee]),A&&(se.options=T||this.resolveDataElementOptions(ee,J.active?"active":o)),Y||this.updateElement(J,ee,se,o),U=ie}this.updateSharedOptions(T,o,w)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let g=0;for(let y=n.length-1;y>=0;--y)g=Math.max(g,n[y].size(this.resolveDataElementOptions(y))/2);return g>0&&g}const s=e.dataset,o=s.options&&s.options.borderWidth||0;if(!n.length)return o;const u=n[0].size(this.resolveDataElementOptions(0)),d=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(o,u,d)/2}}dn(ScatterController,"id","scatter"),dn(ScatterController,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),dn(ScatterController,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var controllers=Object.freeze({__proto__:null,BarController,BubbleController,DoughnutController,LineController,PieController,PolarAreaController,RadarController,ScatterController});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapterBase{constructor(e){dn(this,"options");this.options=e||{}}static override(e){Object.assign(DateAdapterBase.prototype,e)}init(){}formats(){return abstract()}parse(){return abstract()}format(){return abstract()}add(){return abstract()}diff(){return abstract()}startOf(){return abstract()}endOf(){return abstract()}}var adapters={_date:DateAdapterBase};function binarySearch(t,e,n,s){const{controller:o,data:u,_sorted:d}=t,g=o._cachedMeta.iScale,y=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(g&&e===g.axis&&e!=="r"&&d&&u.length){const v=g._reversePixels?_rlookupByKey:_lookupByKey;if(s){if(o._sharedOptions){const w=u[0],T=typeof w.getRange=="function"&&w.getRange(e);if(T){const A=v(u,e,n-T),C=v(u,e,n+T);return{lo:A.lo,hi:C.hi}}}}else{const w=v(u,e,n);if(y){const{vScale:T}=o._cachedMeta,{_parsed:A}=t,C=A.slice(0,w.lo+1).reverse().findIndex(D=>!isNullOrUndef(D[T.axis]));w.lo-=Math.max(0,C);const j=A.slice(w.hi).findIndex(D=>!isNullOrUndef(D[T.axis]));w.hi+=Math.max(0,j)}return w}}return{lo:0,hi:u.length-1}}function evaluateInteractionItems(t,e,n,s,o){const u=t.getSortedVisibleDatasetMetas(),d=n[e];for(let g=0,y=u.length;g<y;++g){const{index:v,data:w}=u[g],{lo:T,hi:A}=binarySearch(u[g],e,d,o);for(let C=T;C<=A;++C){const j=w[C];j.skip||s(j,v,C)}}}function getDistanceMetricForAxis(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,o){const u=e?Math.abs(s.x-o.x):0,d=n?Math.abs(s.y-o.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(d,2))}}function getIntersectItems(t,e,n,s,o){const u=[];return!o&&!t.isPointInArea(e)||evaluateInteractionItems(t,n,e,function(g,y,v){!o&&!_isPointInArea(g,t.chartArea,0)||g.inRange(e.x,e.y,s)&&u.push({element:g,datasetIndex:y,index:v})},!0),u}function getNearestRadialItems(t,e,n,s){let o=[];function u(d,g,y){const{startAngle:v,endAngle:w}=d.getProps(["startAngle","endAngle"],s),{angle:T}=getAngleFromPoint(d,{x:e.x,y:e.y});_angleBetween(T,v,w)&&o.push({element:d,datasetIndex:g,index:y})}return evaluateInteractionItems(t,n,e,u),o}function getNearestCartesianItems(t,e,n,s,o,u){let d=[];const g=getDistanceMetricForAxis(n);let y=Number.POSITIVE_INFINITY;function v(w,T,A){const C=w.inRange(e.x,e.y,o);if(s&&!C)return;const j=w.getCenterPoint(o);if(!(!!u||t.isPointInArea(j))&&!C)return;const H=g(e,j);H<y?(d=[{element:w,datasetIndex:T,index:A}],y=H):H===y&&d.push({element:w,datasetIndex:T,index:A})}return evaluateInteractionItems(t,n,e,v),d}function getNearestItems(t,e,n,s,o,u){return!u&&!t.isPointInArea(e)?[]:n==="r"&&!s?getNearestRadialItems(t,e,n,o):getNearestCartesianItems(t,e,n,s,o,u)}function getAxisItems(t,e,n,s,o){const u=[],d=n==="x"?"inXRange":"inYRange";let g=!1;return evaluateInteractionItems(t,n,e,(y,v,w)=>{y[d]&&y[d](e[n],o)&&(u.push({element:y,datasetIndex:v,index:w}),g=g||y.inRange(e.x,e.y,o))}),s&&!g?[]:u}var Interaction={modes:{index(t,e,n,s){const o=getRelativePosition(e,t),u=n.axis||"x",d=n.includeInvisible||!1,g=n.intersect?getIntersectItems(t,o,u,s,d):getNearestItems(t,o,u,!1,s,d),y=[];return g.length?(t.getSortedVisibleDatasetMetas().forEach(v=>{const w=g[0].index,T=v.data[w];T&&!T.skip&&y.push({element:T,datasetIndex:v.index,index:w})}),y):[]},dataset(t,e,n,s){const o=getRelativePosition(e,t),u=n.axis||"xy",d=n.includeInvisible||!1;let g=n.intersect?getIntersectItems(t,o,u,s,d):getNearestItems(t,o,u,!1,s,d);if(g.length>0){const y=g[0].datasetIndex,v=t.getDatasetMeta(y).data;g=[];for(let w=0;w<v.length;++w)g.push({element:v[w],datasetIndex:y,index:w})}return g},point(t,e,n,s){const o=getRelativePosition(e,t),u=n.axis||"xy",d=n.includeInvisible||!1;return getIntersectItems(t,o,u,s,d)},nearest(t,e,n,s){const o=getRelativePosition(e,t),u=n.axis||"xy",d=n.includeInvisible||!1;return getNearestItems(t,o,u,n.intersect,s,d)},x(t,e,n,s){const o=getRelativePosition(e,t);return getAxisItems(t,o,"x",n.intersect,s)},y(t,e,n,s){const o=getRelativePosition(e,t);return getAxisItems(t,o,"y",n.intersect,s)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(t,e){return t.filter(n=>n.pos===e)}function filterDynamicPositionByAxis(t,e){return t.filter(n=>STATIC_POSITIONS.indexOf(n.pos)===-1&&n.box.axis===e)}function sortByWeight(t,e){return t.sort((n,s)=>{const o=e?s:n,u=e?n:s;return o.weight===u.weight?o.index-u.index:o.weight-u.weight})}function wrapBoxes(t){const e=[];let n,s,o,u,d,g;for(n=0,s=(t||[]).length;n<s;++n)o=t[n],{position:u,options:{stack:d,stackWeight:g=1}}=o,e.push({index:n,box:o,pos:u,horizontal:o.isHorizontal(),weight:o.weight,stack:d&&u+d,stackWeight:g});return e}function buildStacks(t){const e={};for(const n of t){const{stack:s,pos:o,stackWeight:u}=n;if(!s||!STATIC_POSITIONS.includes(o))continue;const d=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});d.count++,d.weight+=u}return e}function setLayoutDims(t,e){const n=buildStacks(t),{vBoxMaxWidth:s,hBoxMaxHeight:o}=e;let u,d,g;for(u=0,d=t.length;u<d;++u){g=t[u];const{fullSize:y}=g.box,v=n[g.stack],w=v&&g.stackWeight/v.weight;g.horizontal?(g.width=w?w*s:y&&e.availableWidth,g.height=o):(g.width=s,g.height=w?w*o:y&&e.availableHeight)}return n}function buildLayoutBoxes(t){const e=wrapBoxes(t),n=sortByWeight(e.filter(v=>v.box.fullSize),!0),s=sortByWeight(filterByPosition(e,"left"),!0),o=sortByWeight(filterByPosition(e,"right")),u=sortByWeight(filterByPosition(e,"top"),!0),d=sortByWeight(filterByPosition(e,"bottom")),g=filterDynamicPositionByAxis(e,"x"),y=filterDynamicPositionByAxis(e,"y");return{fullSize:n,leftAndTop:s.concat(u),rightAndBottom:o.concat(y).concat(d).concat(g),chartArea:filterByPosition(e,"chartArea"),vertical:s.concat(o).concat(y),horizontal:u.concat(d).concat(g)}}function getCombinedMax(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function updateMaxPadding(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function updateDims(t,e,n,s){const{pos:o,box:u}=n,d=t.maxPadding;if(!isObject(o)){n.size&&(t[o]-=n.size);const T=s[n.stack]||{size:0,count:1};T.size=Math.max(T.size,n.horizontal?u.height:u.width),n.size=T.size/T.count,t[o]+=n.size}u.getPadding&&updateMaxPadding(d,u.getPadding());const g=Math.max(0,e.outerWidth-getCombinedMax(d,t,"left","right")),y=Math.max(0,e.outerHeight-getCombinedMax(d,t,"top","bottom")),v=g!==t.w,w=y!==t.h;return t.w=g,t.h=y,n.horizontal?{same:v,other:w}:{same:w,other:v}}function handleMaxPadding(t){const e=t.maxPadding;function n(s){const o=Math.max(e[s]-t[s],0);return t[s]+=o,o}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function getMargins(t,e){const n=e.maxPadding;function s(o){const u={left:0,top:0,right:0,bottom:0};return o.forEach(d=>{u[d]=Math.max(e[d],n[d])}),u}return s(t?["left","right"]:["top","bottom"])}function fitBoxes(t,e,n,s){const o=[];let u,d,g,y,v,w;for(u=0,d=t.length,v=0;u<d;++u){g=t[u],y=g.box,y.update(g.width||e.w,g.height||e.h,getMargins(g.horizontal,e));const{same:T,other:A}=updateDims(e,n,g,s);v|=T&&o.length,w=w||A,y.fullSize||o.push(g)}return v&&fitBoxes(o,e,n,s)||w}function setBoxDims(t,e,n,s,o){t.top=n,t.left=e,t.right=e+s,t.bottom=n+o,t.width=s,t.height=o}function placeBoxes(t,e,n,s){const o=n.padding;let{x:u,y:d}=e;for(const g of t){const y=g.box,v=s[g.stack]||{placed:0,weight:1},w=g.stackWeight/v.weight||1;if(g.horizontal){const T=e.w*w,A=v.size||y.height;defined(v.start)&&(d=v.start),y.fullSize?setBoxDims(y,o.left,d,n.outerWidth-o.right-o.left,A):setBoxDims(y,e.left+v.placed,d,T,A),v.start=d,v.placed+=T,d=y.bottom}else{const T=e.h*w,A=v.size||y.width;defined(v.start)&&(u=v.start),y.fullSize?setBoxDims(y,u,o.top,A,n.outerHeight-o.bottom-o.top):setBoxDims(y,u,e.top+v.placed,A,T),v.start=u,v.placed+=T,u=y.right}}e.x=u,e.y=d}var layouts={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const o=toPadding(t.options.layout.padding),u=Math.max(e-o.width,0),d=Math.max(n-o.height,0),g=buildLayoutBoxes(t.boxes),y=g.vertical,v=g.horizontal;each(t.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});const w=y.reduce((D,H)=>H.box.options&&H.box.options.display===!1?D:D+1,0)||1,T=Object.freeze({outerWidth:e,outerHeight:n,padding:o,availableWidth:u,availableHeight:d,vBoxMaxWidth:u/2/w,hBoxMaxHeight:d/2}),A=Object.assign({},o);updateMaxPadding(A,toPadding(s));const C=Object.assign({maxPadding:A,w:u,h:d,x:o.left,y:o.top},o),j=setLayoutDims(y.concat(v),T);fitBoxes(g.fullSize,C,T,j),fitBoxes(y,C,T,j),fitBoxes(v,C,T,j)&&fitBoxes(y,C,T,j),handleMaxPadding(C),placeBoxes(g.leftAndTop,C,T,j),C.x+=C.w,C.y+=C.h,placeBoxes(g.rightAndBottom,C,T,j),t.chartArea={left:C.left,top:C.top,right:C.left+C.w,bottom:C.top+C.h,height:C.h,width:C.w},each(g.chartArea,D=>{const H=D.box;Object.assign(H,t.chartArea),H.update(C.w,C.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,o){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,o?Math.floor(n/o):s)}}isAttached(e){return!0}updateConfig(e){}}class BasicPlatform extends BasePlatform{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=t=>t===null||t==="";function initCanvas(t,e){const n=t.style,s=t.getAttribute("height"),o=t.getAttribute("width");if(t[EXPANDO_KEY]={initial:{height:s,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",isNullOrEmpty(o)){const u=readUsedSize(t,"width");u!==void 0&&(t.width=u)}if(isNullOrEmpty(s))if(t.style.height==="")t.height=t.width/(e||2);else{const u=readUsedSize(t,"height");u!==void 0&&(t.height=u)}return t}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(t,e,n){t&&t.addEventListener(e,n,eventListenerOptions)}function removeListener(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,eventListenerOptions)}function fromNativeEvent(t,e){const n=EVENT_TYPES[t.type]||t.type,{x:s,y:o}=getRelativePosition(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:o!==void 0?o:null}}function nodeListContains(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function createAttachObserver(t,e,n){const s=t.canvas,o=new MutationObserver(u=>{let d=!1;for(const g of u)d=d||nodeListContains(g.addedNodes,s),d=d&&!nodeListContains(g.removedNodes,s);d&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function createDetachObserver(t,e,n){const s=t.canvas,o=new MutationObserver(u=>{let d=!1;for(const g of u)d=d||nodeListContains(g.removedNodes,s),d=d&&!nodeListContains(g.addedNodes,s);d&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const t=window.devicePixelRatio;t!==oldDevicePixelRatio&&(oldDevicePixelRatio=t,drpListeningCharts.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function listenDevicePixelRatioChanges(t,e){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(t,e)}function unlistenDevicePixelRatioChanges(t){drpListeningCharts.delete(t),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(t,e,n){const s=t.canvas,o=s&&_getParentNode(s);if(!o)return;const u=throttled((g,y)=>{const v=o.clientWidth;n(g,y),v<o.clientWidth&&n()},window),d=new ResizeObserver(g=>{const y=g[0],v=y.contentRect.width,w=y.contentRect.height;v===0&&w===0||u(v,w)});return d.observe(o),listenDevicePixelRatioChanges(t,u),d}function releaseObserver(t,e,n){n&&n.disconnect(),e==="resize"&&unlistenDevicePixelRatioChanges(t)}function createProxyAndListen(t,e,n){const s=t.canvas,o=throttled(u=>{t.ctx!==null&&n(fromNativeEvent(u,t))},t);return addListener(s,e,o),o}class DomPlatform extends BasePlatform{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(initCanvas(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[EXPANDO_KEY])return!1;const s=n[EXPANDO_KEY].initial;["height","width"].forEach(u=>{const d=s[u];isNullOrUndef(d)?n.removeAttribute(u):n.setAttribute(u,d)});const o=s.style||{};return Object.keys(o).forEach(u=>{n.style[u]=o[u]}),n.width=n.width,delete n[EXPANDO_KEY],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const o=e.$proxies||(e.$proxies={}),d={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[n]||createProxyAndListen;o[n]=d(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),o=s[n];if(!o)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[n]||removeListener)(e,n,o),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,o){return getMaximumSize(e,n,s,o)}isAttached(e){const n=e&&_getParentNode(e);return!!(n&&n.isConnected)}}function _detectPlatform(t){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?BasicPlatform:DomPlatform}var Pf;let Element$1=(Pf=class{constructor(){dn(this,"x");dn(this,"y");dn(this,"active",!1);dn(this,"options");dn(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const o={};return e.forEach(u=>{o[u]=s[u]&&s[u].active()?s[u]._to:this[u]}),o}},dn(Pf,"defaults",{}),dn(Pf,"defaultRoutes"),Pf);function autoSkip(t,e){const n=t.options.ticks,s=determineMaxTicks(t),o=Math.min(n.maxTicksLimit||s,s),u=n.major.enabled?getMajorIndices(e):[],d=u.length,g=u[0],y=u[d-1],v=[];if(d>o)return skipMajors(e,v,u,d/o),v;const w=calculateSpacing(u,e,o);if(d>0){let T,A;const C=d>1?Math.round((y-g)/(d-1)):null;for(skip(e,v,w,isNullOrUndef(C)?0:g-C,g),T=0,A=d-1;T<A;T++)skip(e,v,w,u[T],u[T+1]);return skip(e,v,w,y,isNullOrUndef(C)?e.length:y+C),v}return skip(e,v,w),v}function determineMaxTicks(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),o=t._maxLength/n;return Math.floor(Math.min(s,o))}function calculateSpacing(t,e,n){const s=getEvenSpacing(t),o=e.length/n;if(!s)return Math.max(o,1);const u=_factorize(s);for(let d=0,g=u.length-1;d<g;d++){const y=u[d];if(y>o)return y}return Math.max(o,1)}function getMajorIndices(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function skipMajors(t,e,n,s){let o=0,u=n[0],d;for(s=Math.ceil(s),d=0;d<t.length;d++)d===u&&(e.push(t[d]),o++,u=n[o*s])}function skip(t,e,n,s,o){const u=valueOrDefault(s,0),d=Math.min(valueOrDefault(o,t.length),t.length);let g=0,y,v,w;for(n=Math.ceil(n),o&&(y=o-s,n=y/Math.floor(y/n)),w=u;w<0;)g++,w=Math.round(u+g*n);for(v=Math.max(u,0);v<d;v++)v===w&&(e.push(t[v]),g++,w=Math.round(u+g*n))}function getEvenSpacing(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const reverseAlign=t=>t==="left"?"right":t==="right"?"left":t,offsetFromEdge=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,getTicksLimit=(t,e)=>Math.min(e||t,t);function sample(t,e){const n=[],s=t.length/e,o=t.length;let u=0;for(;u<o;u+=s)n.push(t[Math.floor(u)]);return n}function getPixelForGridLine(t,e,n){const s=t.ticks.length,o=Math.min(e,s-1),u=t._startPixel,d=t._endPixel,g=1e-6;let y=t.getPixelForTick(o),v;if(!(n&&(s===1?v=Math.max(y-u,d-y):e===0?v=(t.getPixelForTick(1)-y)/2:v=(y-t.getPixelForTick(o-1))/2,y+=o<e?v:-v,y<u-g||y>d+g)))return y}function garbageCollect(t,e){each(t,n=>{const s=n.gc,o=s.length/2;let u;if(o>e){for(u=0;u<o;++u)delete n.data[s[u]];s.splice(0,o)}})}function getTickMarkLength(t){return t.drawTicks?t.tickLength:0}function getTitleHeight(t,e){if(!t.display)return 0;const n=toFont(t.font,e),s=toPadding(t.padding);return(isArray(t.text)?t.text.length:1)*n.lineHeight+s.height}function createScaleContext(t,e){return createContext(t,{scale:e,type:"scale"})}function createTickContext(t,e,n){return createContext(t,{tick:n,index:e,type:"tick"})}function titleAlign(t,e,n){let s=_toLeftRightCenter(t);return(n&&e!=="right"||!n&&e==="right")&&(s=reverseAlign(s)),s}function titleArgs(t,e,n,s){const{top:o,left:u,bottom:d,right:g,chart:y}=t,{chartArea:v,scales:w}=y;let T=0,A,C,j;const D=d-o,H=g-u;if(t.isHorizontal()){if(C=_alignStartEnd(s,u,g),isObject(n)){const ne=Object.keys(n)[0],Y=n[ne];j=w[ne].getPixelForValue(Y)+D-e}else n==="center"?j=(v.bottom+v.top)/2+D-e:j=offsetFromEdge(t,n,e);A=g-u}else{if(isObject(n)){const ne=Object.keys(n)[0],Y=n[ne];C=w[ne].getPixelForValue(Y)-H+e}else n==="center"?C=(v.left+v.right)/2-H+e:C=offsetFromEdge(t,n,e);j=_alignStartEnd(s,d,o),T=n==="left"?-HALF_PI:HALF_PI}return{titleX:C,titleY:j,maxWidth:A,rotation:T}}class Scale extends Element$1{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:o}=this;return e=finiteOrDefault(e,Number.POSITIVE_INFINITY),n=finiteOrDefault(n,Number.NEGATIVE_INFINITY),s=finiteOrDefault(s,Number.POSITIVE_INFINITY),o=finiteOrDefault(o,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(e,s),max:finiteOrDefault(n,o),minDefined:isNumberFinite(e),maxDefined:isNumberFinite(n)}}getMinMax(e){let{min:n,max:s,minDefined:o,maxDefined:u}=this.getUserBounds(),d;if(o&&u)return{min:n,max:s};const g=this.getMatchingVisibleMetas();for(let y=0,v=g.length;y<v;++y)d=g[y].controller.getMinMax(this,e),o||(n=Math.min(n,d.min)),u||(s=Math.max(s,d.max));return n=u&&n>s?s:n,s=o&&n>s?n:s,{min:finiteOrDefault(n,finiteOrDefault(s,n)),max:finiteOrDefault(s,finiteOrDefault(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:o,grace:u,ticks:d}=this.options,g=d.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,u,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const y=g<this.ticks.length;this._convertTicksToLabels(y?sample(this.ticks,g):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),d.display&&(d.autoSkip||d.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),y&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),callback(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,o,u;for(s=0,o=e.length;s<o;s++)u=e[s],u.label=callback(n.callback,[u.value,s,e],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=getTicksLimit(this.ticks.length,e.ticks.maxTicksLimit),o=n.minRotation||0,u=n.maxRotation;let d=o,g,y,v;if(!this._isVisible()||!n.display||o>=u||s<=1||!this.isHorizontal()){this.labelRotation=o;return}const w=this._getLabelSizes(),T=w.widest.width,A=w.highest.height,C=_limitValue(this.chart.width-T,0,this.maxWidth);g=e.offset?this.maxWidth/s:C/(s-1),T+6>g&&(g=C/(s-(e.offset?.5:1)),y=this.maxHeight-getTickMarkLength(e.grid)-n.padding-getTitleHeight(e.title,this.chart.options.font),v=Math.sqrt(T*T+A*A),d=toDegrees(Math.min(Math.asin(_limitValue((w.highest.height+6)/g,-1,1)),Math.asin(_limitValue(y/v,-1,1))-Math.asin(_limitValue(A/v,-1,1)))),d=Math.max(o,Math.min(u,d))),this.labelRotation=d}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:o,grid:u}}=this,d=this._isVisible(),g=this.isHorizontal();if(d){const y=getTitleHeight(o,n.options.font);if(g?(e.width=this.maxWidth,e.height=getTickMarkLength(u)+y):(e.height=this.maxHeight,e.width=getTickMarkLength(u)+y),s.display&&this.ticks.length){const{first:v,last:w,widest:T,highest:A}=this._getLabelSizes(),C=s.padding*2,j=toRadians(this.labelRotation),D=Math.cos(j),H=Math.sin(j);if(g){const ne=s.mirror?0:H*T.width+D*A.height;e.height=Math.min(this.maxHeight,e.height+ne+C)}else{const ne=s.mirror?0:D*T.width+H*A.height;e.width=Math.min(this.maxWidth,e.width+ne+C)}this._calculatePadding(v,w,H,D)}}this._handleMargins(),g?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,o){const{ticks:{align:u,padding:d},position:g}=this.options,y=this.labelRotation!==0,v=g!=="top"&&this.axis==="x";if(this.isHorizontal()){const w=this.getPixelForTick(0)-this.left,T=this.right-this.getPixelForTick(this.ticks.length-1);let A=0,C=0;y?v?(A=o*e.width,C=s*n.height):(A=s*e.height,C=o*n.width):u==="start"?C=n.width:u==="end"?A=e.width:u!=="inner"&&(A=e.width/2,C=n.width/2),this.paddingLeft=Math.max((A-w+d)*this.width/(this.width-w),0),this.paddingRight=Math.max((C-T+d)*this.width/(this.width-T),0)}else{let w=n.height/2,T=e.height/2;u==="start"?(w=0,T=e.height):u==="end"&&(w=n.height,T=0),this.paddingTop=w+d,this.paddingBottom=T+d}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)isNullOrUndef(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=sample(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:o,_longestTextCache:u}=this,d=[],g=[],y=Math.floor(n/getTicksLimit(n,s));let v=0,w=0,T,A,C,j,D,H,ne,Y,U,ee,J;for(T=0;T<n;T+=y){if(j=e[T].label,D=this._resolveTickFontOptions(T),o.font=H=D.string,ne=u[H]=u[H]||{data:{},gc:[]},Y=D.lineHeight,U=ee=0,!isNullOrUndef(j)&&!isArray(j))U=_measureText(o,ne.data,ne.gc,U,j),ee=Y;else if(isArray(j))for(A=0,C=j.length;A<C;++A)J=j[A],!isNullOrUndef(J)&&!isArray(J)&&(U=_measureText(o,ne.data,ne.gc,U,J),ee+=Y);d.push(U),g.push(ee),v=Math.max(U,v),w=Math.max(ee,w)}garbageCollect(u,n);const ie=d.indexOf(v),se=g.indexOf(w),K=te=>({width:d[te]||0,height:g[te]||0});return{first:K(0),last:K(n-1),widest:K(ie),highest:K(se),widths:d,heights:g}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=createTickContext(this.getContext(),e,s))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=toRadians(this.labelRotation),s=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),u=this._getLabelSizes(),d=e.autoSkipPadding||0,g=u?u.widest.width+d:0,y=u?u.highest.height+d:0;return this.isHorizontal()?y*s>g*o?g/s:y/o:y*o<g*s?y/s:g/o}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,o=this.options,{grid:u,position:d,border:g}=o,y=u.offset,v=this.isHorizontal(),T=this.ticks.length+(y?1:0),A=getTickMarkLength(u),C=[],j=g.setContext(this.getContext()),D=j.display?j.width:0,H=D/2,ne=function(we){return _alignPixel(s,we,D)};let Y,U,ee,J,ie,se,K,te,re,ce,le,ue;if(d==="top")Y=ne(this.bottom),se=this.bottom-A,te=Y-H,ce=ne(e.top)+H,ue=e.bottom;else if(d==="bottom")Y=ne(this.top),ce=e.top,ue=ne(e.bottom)-H,se=Y+H,te=this.top+A;else if(d==="left")Y=ne(this.right),ie=this.right-A,K=Y-H,re=ne(e.left)+H,le=e.right;else if(d==="right")Y=ne(this.left),re=e.left,le=ne(e.right)-H,ie=Y+H,K=this.left+A;else if(n==="x"){if(d==="center")Y=ne((e.top+e.bottom)/2+.5);else if(isObject(d)){const we=Object.keys(d)[0],de=d[we];Y=ne(this.chart.scales[we].getPixelForValue(de))}ce=e.top,ue=e.bottom,se=Y+H,te=se+A}else if(n==="y"){if(d==="center")Y=ne((e.left+e.right)/2);else if(isObject(d)){const we=Object.keys(d)[0],de=d[we];Y=ne(this.chart.scales[we].getPixelForValue(de))}ie=Y-H,K=ie-A,re=e.left,le=e.right}const _e=valueOrDefault(o.ticks.maxTicksLimit,T),Ee=Math.max(1,Math.ceil(T/_e));for(U=0;U<T;U+=Ee){const we=this.getContext(U),de=u.setContext(we),me=g.setContext(we),xe=de.lineWidth,pe=de.color,ve=me.dash||[],Oe=me.dashOffset,Te=de.tickWidth,Le=de.tickColor,Me=de.tickBorderDash||[],Ce=de.tickBorderDashOffset;ee=getPixelForGridLine(this,U,y),ee!==void 0&&(J=_alignPixel(s,ee,xe),v?ie=K=re=le=J:se=te=ce=ue=J,C.push({tx1:ie,ty1:se,tx2:K,ty2:te,x1:re,y1:ce,x2:le,y2:ue,width:xe,color:pe,borderDash:ve,borderDashOffset:Oe,tickWidth:Te,tickColor:Le,tickBorderDash:Me,tickBorderDashOffset:Ce}))}return this._ticksLength=T,this._borderValue=Y,C}_computeLabelItems(e){const n=this.axis,s=this.options,{position:o,ticks:u}=s,d=this.isHorizontal(),g=this.ticks,{align:y,crossAlign:v,padding:w,mirror:T}=u,A=getTickMarkLength(s.grid),C=A+w,j=T?-w:C,D=-toRadians(this.labelRotation),H=[];let ne,Y,U,ee,J,ie,se,K,te,re,ce,le,ue="middle";if(o==="top")ie=this.bottom-j,se=this._getXAxisLabelAlignment();else if(o==="bottom")ie=this.top+j,se=this._getXAxisLabelAlignment();else if(o==="left"){const Ee=this._getYAxisLabelAlignment(A);se=Ee.textAlign,J=Ee.x}else if(o==="right"){const Ee=this._getYAxisLabelAlignment(A);se=Ee.textAlign,J=Ee.x}else if(n==="x"){if(o==="center")ie=(e.top+e.bottom)/2+C;else if(isObject(o)){const Ee=Object.keys(o)[0],we=o[Ee];ie=this.chart.scales[Ee].getPixelForValue(we)+C}se=this._getXAxisLabelAlignment()}else if(n==="y"){if(o==="center")J=(e.left+e.right)/2-C;else if(isObject(o)){const Ee=Object.keys(o)[0],we=o[Ee];J=this.chart.scales[Ee].getPixelForValue(we)}se=this._getYAxisLabelAlignment(A).textAlign}n==="y"&&(y==="start"?ue="top":y==="end"&&(ue="bottom"));const _e=this._getLabelSizes();for(ne=0,Y=g.length;ne<Y;++ne){U=g[ne],ee=U.label;const Ee=u.setContext(this.getContext(ne));K=this.getPixelForTick(ne)+u.labelOffset,te=this._resolveTickFontOptions(ne),re=te.lineHeight,ce=isArray(ee)?ee.length:1;const we=ce/2,de=Ee.color,me=Ee.textStrokeColor,xe=Ee.textStrokeWidth;let pe=se;d?(J=K,se==="inner"&&(ne===Y-1?pe=this.options.reverse?"left":"right":ne===0?pe=this.options.reverse?"right":"left":pe="center"),o==="top"?v==="near"||D!==0?le=-ce*re+re/2:v==="center"?le=-_e.highest.height/2-we*re+re:le=-_e.highest.height+re/2:v==="near"||D!==0?le=re/2:v==="center"?le=_e.highest.height/2-we*re:le=_e.highest.height-ce*re,T&&(le*=-1),D!==0&&!Ee.showLabelBackdrop&&(J+=re/2*Math.sin(D))):(ie=K,le=(1-ce)*re/2);let ve;if(Ee.showLabelBackdrop){const Oe=toPadding(Ee.backdropPadding),Te=_e.heights[ne],Le=_e.widths[ne];let Me=le-Oe.top,Ce=0-Oe.left;switch(ue){case"middle":Me-=Te/2;break;case"bottom":Me-=Te;break}switch(se){case"center":Ce-=Le/2;break;case"right":Ce-=Le;break;case"inner":ne===Y-1?Ce-=Le:ne>0&&(Ce-=Le/2);break}ve={left:Ce,top:Me,width:Le+Oe.width,height:Te+Oe.height,color:Ee.backdropColor}}H.push({label:ee,font:te,textOffset:le,options:{rotation:D,color:de,strokeColor:me,strokeWidth:xe,textAlign:pe,textBaseline:ue,translation:[J,ie],backdrop:ve}})}return H}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-toRadians(this.labelRotation))return e==="top"?"left":"right";let o="center";return n.align==="start"?o="left":n.align==="end"?o="right":n.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:o,padding:u}}=this.options,d=this._getLabelSizes(),g=e+u,y=d.widest.width;let v,w;return n==="left"?o?(w=this.right+u,s==="near"?v="left":s==="center"?(v="center",w+=y/2):(v="right",w+=y)):(w=this.right-g,s==="near"?v="right":s==="center"?(v="center",w-=y/2):(v="left",w=this.left)):n==="right"?o?(w=this.left+u,s==="near"?v="right":s==="center"?(v="center",w-=y/2):(v="left",w-=y)):(w=this.left+g,s==="near"?v="left":s==="center"?(v="center",w+=y/2):(v="right",w=this.right)):v="right",{textAlign:v,x:w}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:o,width:u,height:d}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,o,u,d),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const o=this.ticks.findIndex(u=>u.value===e);return o>=0?n.setContext(this.getContext(o)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let u,d;const g=(y,v,w)=>{!w.width||!w.color||(s.save(),s.lineWidth=w.width,s.strokeStyle=w.color,s.setLineDash(w.borderDash||[]),s.lineDashOffset=w.borderDashOffset,s.beginPath(),s.moveTo(y.x,y.y),s.lineTo(v.x,v.y),s.stroke(),s.restore())};if(n.display)for(u=0,d=o.length;u<d;++u){const y=o[u];n.drawOnChartArea&&g({x:y.x1,y:y.y1},{x:y.x2,y:y.y2},y),n.drawTicks&&g({x:y.tx1,y:y.ty1},{x:y.tx2,y:y.ty2},{color:y.tickColor,width:y.tickWidth,borderDash:y.tickBorderDash,borderDashOffset:y.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:o}}=this,u=s.setContext(this.getContext()),d=s.display?u.width:0;if(!d)return;const g=o.setContext(this.getContext(0)).lineWidth,y=this._borderValue;let v,w,T,A;this.isHorizontal()?(v=_alignPixel(e,this.left,d)-d/2,w=_alignPixel(e,this.right,g)+g/2,T=A=y):(T=_alignPixel(e,this.top,d)-d/2,A=_alignPixel(e,this.bottom,g)+g/2,v=w=y),n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.beginPath(),n.moveTo(v,T),n.lineTo(w,A),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,o=this._computeLabelArea();o&&clipArea(s,o);const u=this.getLabelItems(e);for(const d of u){const g=d.options,y=d.font,v=d.label,w=d.textOffset;renderText(s,v,0,w,y,g)}o&&unclipArea(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:o}}=this;if(!s.display)return;const u=toFont(s.font),d=toPadding(s.padding),g=s.align;let y=u.lineHeight/2;n==="bottom"||n==="center"||isObject(n)?(y+=d.bottom,isArray(s.text)&&(y+=u.lineHeight*(s.text.length-1))):y+=d.top;const{titleX:v,titleY:w,maxWidth:T,rotation:A}=titleArgs(this,y,n,g);renderText(e,s.text,0,0,u,{color:s.color,maxWidth:T,rotation:A,textAlign:titleAlign(g,n,o),textBaseline:"middle",translation:[v,w]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=valueOrDefault(e.grid&&e.grid.z,-1),o=valueOrDefault(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:n,draw:u=>{this.draw(u)}}]:[{z:s,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:n,draw:u=>{this.drawLabels(u)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",o=[];let u,d;for(u=0,d=n.length;u<d;++u){const g=n[u];g[s]===this.id&&(!e||g.type===e)&&o.push(g)}return o}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return toFont(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class TypedRegistry{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;isIChartComponent(n)&&(s=this.register(n));const o=this.items,u=e.id,d=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+e);return u in o||(o[u]=e,registerDefaults(e,d,s),this.override&&defaults.override(e.id,e.overrides)),d}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,o=this.scope;s in n&&delete n[s],o&&s in defaults[o]&&(delete defaults[o][s],this.override&&delete overrides[s])}}function registerDefaults(t,e,n){const s=merge(Object.create(null),[n?defaults.get(n):{},defaults.get(e),t.defaults]);defaults.set(e,s),t.defaultRoutes&&routeDefaults(e,t.defaultRoutes),t.descriptors&&defaults.describe(e,t.descriptors)}function routeDefaults(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),o=s.pop(),u=[t].concat(s).join("."),d=e[n].split("."),g=d.pop(),y=d.join(".");defaults.route(u,o,y,g)})}function isIChartComponent(t){return"id"in t&&"defaults"in t}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element$1,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(o=>{const u=s||this._getRegistryForType(o);s||u.isForType(o)||u===this.plugins&&o.id?this._exec(e,u,o):each(o,d=>{const g=s||this._getRegistryForType(d);this._exec(e,g,d)})})}_exec(e,n,s){const o=_capitalize(e);callback(s["before"+o],[],s),n[e](s),callback(s["after"+o],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const o=n.get(e);if(o===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return o}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(e,n,s,o){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const u=o?this._descriptors(e).filter(o):this._descriptors(e),d=this._notify(u,e,n,s);return n==="afterDestroy"&&(this._notify(u,e,"stop"),this._notify(this._init,e,"uninstall")),d}_notify(e,n,s,o){o=o||{};for(const u of e){const d=u.plugin,g=d[s],y=[n,o,u.options];if(callback(g,y,d)===!1&&o.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,o=valueOrDefault(s.options&&s.options.plugins,{}),u=allPlugins(s);return o===!1&&!n?[]:createDescriptors(e,u,o,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,o=(u,d)=>u.filter(g=>!d.some(y=>g.plugin.id===y.plugin.id));this._notify(o(n,s),e,"stop"),this._notify(o(s,n),e,"start")}}function allPlugins(t){const e={},n=[],s=Object.keys(registry.plugins.items);for(let u=0;u<s.length;u++)n.push(registry.getPlugin(s[u]));const o=t.plugins||[];for(let u=0;u<o.length;u++){const d=o[u];n.indexOf(d)===-1&&(n.push(d),e[d.id]=!0)}return{plugins:n,localIds:e}}function getOpts(t,e){return!e&&t===!1?null:t===!0?{}:t}function createDescriptors(t,{plugins:e,localIds:n},s,o){const u=[],d=t.getContext();for(const g of e){const y=g.id,v=getOpts(s[y],o);v!==null&&u.push({plugin:g,options:pluginOpts(t.config,{plugin:g,local:n[y]},v,d)})}return u}function pluginOpts(t,{plugin:e,local:n},s,o){const u=t.pluginScopeKeys(e),d=t.getOptionScopes(s,u);return n&&e.defaults&&d.push(e.defaults),t.createResolver(d,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(t,e){const n=defaults.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function getAxisFromDefaultScaleID(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function getDefaultScaleIDFromAxis(t,e){return t===e?"_index_":"_value_"}function idMatchesAxis(t){if(t==="x"||t==="y"||t==="r")return t}function axisFromPosition(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function determineAxis(t,...e){if(idMatchesAxis(t))return t;for(const n of e){const s=n.axis||axisFromPosition(n.position)||t.length>1&&idMatchesAxis(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function getAxisFromDataset(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function retrieveAxisFromDatasets(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return getAxisFromDataset(t,"x",n[0])||getAxisFromDataset(t,"y",n[0])}return{}}function mergeScaleConfig(t,e){const n=overrides[t.type]||{scales:{}},s=e.scales||{},o=getIndexAxis(t.type,e),u=Object.create(null);return Object.keys(s).forEach(d=>{const g=s[d];if(!isObject(g))return console.error(`Invalid scale configuration for scale: ${d}`);if(g._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${d}`);const y=determineAxis(d,g,retrieveAxisFromDatasets(d,t),defaults.scales[g.type]),v=getDefaultScaleIDFromAxis(y,o),w=n.scales||{};u[d]=mergeIf(Object.create(null),[{axis:y},g,w[y],w[v]])}),t.data.datasets.forEach(d=>{const g=d.type||t.type,y=d.indexAxis||getIndexAxis(g,e),w=(overrides[g]||{}).scales||{};Object.keys(w).forEach(T=>{const A=getAxisFromDefaultScaleID(T,y),C=d[A+"AxisID"]||A;u[C]=u[C]||Object.create(null),mergeIf(u[C],[{axis:A},s[C],w[T]])})}),Object.keys(u).forEach(d=>{const g=u[d];mergeIf(g,[defaults.scales[g.type],defaults.scale])}),u}function initOptions(t){const e=t.options||(t.options={});e.plugins=valueOrDefault(e.plugins,{}),e.scales=mergeScaleConfig(t,e)}function initData(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function initConfig(t){return t=t||{},t.data=initData(t.data),initOptions(t),t}const keyCache=new Map,keysCached=new Set;function cachedKeys(t,e){let n=keyCache.get(t);return n||(n=e(),keyCache.set(t,n),keysCached.add(n)),n}const addIfFound=(t,e,n)=>{const s=resolveObjectKey(e,n);s!==void 0&&t.add(s)};class Config{constructor(e){this._config=initConfig(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=initData(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),initOptions(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return cachedKeys(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return cachedKeys(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return cachedKeys(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return cachedKeys(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let o=s.get(e);return(!o||n)&&(o=new Map,s.set(e,o)),o}getOptionScopes(e,n,s){const{options:o,type:u}=this,d=this._cachedScopes(e,s),g=d.get(n);if(g)return g;const y=new Set;n.forEach(w=>{e&&(y.add(e),w.forEach(T=>addIfFound(y,e,T))),w.forEach(T=>addIfFound(y,o,T)),w.forEach(T=>addIfFound(y,overrides[u]||{},T)),w.forEach(T=>addIfFound(y,defaults,T)),w.forEach(T=>addIfFound(y,descriptors,T))});const v=Array.from(y);return v.length===0&&v.push(Object.create(null)),keysCached.has(n)&&d.set(n,v),v}chartOptionScopes(){const{options:e,type:n}=this;return[e,overrides[n]||{},defaults.datasets[n]||{},{type:n},defaults,descriptors]}resolveNamedOptions(e,n,s,o=[""]){const u={$shared:!0},{resolver:d,subPrefixes:g}=getResolver(this._resolverCache,e,o);let y=d;if(needContext(d,n)){u.$shared=!1,s=isFunction(s)?s():s;const v=this.createResolver(e,s,g);y=_attachContext(d,s,v)}for(const v of n)u[v]=y[v];return u}createResolver(e,n,s=[""],o){const{resolver:u}=getResolver(this._resolverCache,e,s);return isObject(n)?_attachContext(u,n,void 0,o):u}}function getResolver(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const o=n.join();let u=s.get(o);return u||(u={resolver:_createResolver(e,n),subPrefixes:n.filter(g=>!g.toLowerCase().includes("hover"))},s.set(o,u)),u}const hasFunction=t=>isObject(t)&&Object.getOwnPropertyNames(t).some(e=>isFunction(t[e]));function needContext(t,e){const{isScriptable:n,isIndexable:s}=_descriptors(t);for(const o of e){const u=n(o),d=s(o),g=(d||u)&&t[o];if(u&&(isFunction(g)||hasFunction(g))||d&&isArray(g))return!0}return!1}var version="4.5.0";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(t,e){return t==="top"||t==="bottom"||KNOWN_POSITIONS.indexOf(t)===-1&&e==="x"}function compare2Level(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function onAnimationsComplete(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),callback(n&&n.onComplete,[t],e)}function onAnimationProgress(t){const e=t.chart,n=e.options.animation;callback(n&&n.onProgress,[t],e)}function getCanvas(t){return _isDomSupported()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const instances={},getChart=t=>{const e=getCanvas(t);return Object.values(instances).filter(n=>n.canvas===e).pop()};function moveNumericKeys(t,e,n){const s=Object.keys(t);for(const o of s){const u=+o;if(u>=e){const d=t[o];delete t[o],(n>0||u>e)&&(t[u+n]=d)}}}function determineLastEvent(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}class Chart{static register(...e){registry.add(...e),invalidatePlugins()}static unregister(...e){registry.remove(...e),invalidatePlugins()}constructor(e,n){const s=this.config=new Config(n),o=getCanvas(e),u=getChart(o);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");const d=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||_detectPlatform(o)),this.platform.updateConfig(s);const g=this.platform.acquireContext(o,d.aspectRatio),y=g&&g.canvas,v=y&&y.height,w=y&&y.width;if(this.id=uid(),this.ctx=g,this.canvas=y,this.width=w,this.height=v,this._options=d,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce(T=>this.update(T),d.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!g||!y){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:o,_aspectRatio:u}=this;return isNullOrUndef(e)?n&&u?u:o?s/o:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return registry}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(e,n){animator.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,o=this.canvas,u=s.maintainAspectRatio&&this.aspectRatio,d=this.platform.getMaximumSize(o,e,n,u),g=s.devicePixelRatio||this.platform.getDevicePixelRatio(),y=this.width?"resize":"attach";this.width=d.width,this.height=d.height,this._aspectRatio=this.aspectRatio,retinaScale(this,g,!0)&&(this.notifyPlugins("resize",{size:d}),callback(s.onResize,[this,d],this),this.attached&&this._doResize(y)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};each(n,(s,o)=>{s.id=o})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,o=Object.keys(s).reduce((d,g)=>(d[g]=!1,d),{});let u=[];n&&(u=u.concat(Object.keys(n).map(d=>{const g=n[d],y=determineAxis(d,g),v=y==="r",w=y==="x";return{options:g,dposition:v?"chartArea":w?"bottom":"left",dtype:v?"radialLinear":w?"category":"linear"}}))),each(u,d=>{const g=d.options,y=g.id,v=determineAxis(y,g),w=valueOrDefault(g.type,d.dtype);(g.position===void 0||positionIsHorizontal(g.position,v)!==positionIsHorizontal(d.dposition))&&(g.position=d.dposition),o[y]=!0;let T=null;if(y in s&&s[y].type===w)T=s[y];else{const A=registry.getScale(w);T=new A({id:y,type:w,ctx:this.ctx,chart:this}),s[T.id]=T}T.init(g,e)}),each(o,(d,g)=>{d||delete s[g]}),each(s,d=>{layouts.configure(this,d,d.options),layouts.addBox(this,d)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((o,u)=>o.index-u.index),s>n){for(let o=n;o<s;++o)this._destroyDatasetMeta(o);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,o)=>{n.filter(u=>u===s._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,o;for(this._removeUnreferencedMetasets(),s=0,o=n.length;s<o;s++){const u=n[s];let d=this.getDatasetMeta(s);const g=u.type||this.config.type;if(d.type&&d.type!==g&&(this._destroyDatasetMeta(s),d=this.getDatasetMeta(s)),d.type=g,d.indexAxis=u.indexAxis||getIndexAxis(g,this.options),d.order=u.order||0,d.index=s,d.label=""+u.label,d.visible=this.isDatasetVisible(s),d.controller)d.controller.updateIndex(s),d.controller.linkScales();else{const y=registry.getController(g),{datasetElementType:v,dataElementType:w}=defaults.datasets[g];Object.assign(y,{dataElementType:registry.getElement(w),datasetElementType:v&&registry.getElement(v)}),d.controller=new y(this,s),e.push(d.controller)}}return this._updateMetasets(),e}_resetElements(){each(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let d=0;for(let v=0,w=this.data.datasets.length;v<w;v++){const{controller:T}=this.getDatasetMeta(v),A=!o&&u.indexOf(T)===-1;T.buildOrUpdateElements(A),d=Math.max(+T.getMaxOverflow(),d)}d=this._minPadding=s.layout.autoPadding?d:0,this._updateLayout(d),o||each(u,v=>{v.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(compare2Level("z","_idx"));const{_active:g,_lastEvent:y}=this;y?this._eventHandler(y,!0):g.length&&this._updateHoverStyles(g,g,!0),this.render()}_updateScales(){each(this.scales,e=>{layouts.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!setsEqual(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:o,count:u}of n){const d=s==="_removeElements"?-u:u;moveNumericKeys(e,o,d)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=u=>new Set(e.filter(d=>d[0]===u).map((d,g)=>g+","+d.splice(1).join(","))),o=s(0);for(let u=1;u<n;u++)if(!setsEqual(o,s(u)))return;return Array.from(o).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],each(this.boxes,o=>{s&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,u)=>{o._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,isFunction(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),o={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(s.controller._update(n),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let o,u;for(o=0,u=n.length;o<u;++o){const d=n[o];(!e||d.visible)&&s.push(d)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},o=getDatasetClipArea(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(o&&clipArea(n,o),e.controller.draw(),o&&unclipArea(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return _isPointInArea(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,o){const u=Interaction.modes[n];return typeof u=="function"?u(this,e,s,o):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let o=s.filter(u=>u&&u._dataset===n).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(o)),o}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const o=s?"show":"hide",u=this.getDatasetMeta(e),d=u.controller._resolveAnimations(void 0,o);defined(n)?(u.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),d.update(u,{visible:s}),this.update(g=>g.datasetIndex===e?o:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),animator.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),clearCanvas(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(u,d)=>{n.addEventListener(this,u,d),e[u]=d},o=(u,d,g)=>{u.offsetX=d,u.offsetY=g,this._eventHandler(u)};each(this.options.events,u=>s(u,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(y,v)=>{n.addEventListener(this,y,v),e[y]=v},o=(y,v)=>{e[y]&&(n.removeEventListener(this,y,v),delete e[y])},u=(y,v)=>{this.canvas&&this.resize(y,v)};let d;const g=()=>{o("attach",g),this.attached=!0,this.resize(),s("resize",u),s("detach",d)};d=()=>{this.attached=!1,o("resize",u),this._stop(),this._resize(0,0),s("attach",g)},n.isAttached(this.canvas)?g():d()}unbindEvents(){each(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},each(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const o=s?"set":"remove";let u,d,g,y;for(n==="dataset"&&(u=this.getDatasetMeta(e[0].datasetIndex),u.controller["_"+o+"DatasetHoverStyle"]()),g=0,y=e.length;g<y;++g){d=e[g];const v=d&&this.getDatasetMeta(d.datasetIndex).controller;v&&v[o+"HoverStyle"](d.element,d.datasetIndex,d.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:u,index:d})=>{const g=this.getDatasetMeta(u);if(!g)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:g.data[d],index:d}});!_elementsEqual(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const o=this.options.hover,u=(y,v)=>y.filter(w=>!v.some(T=>w.datasetIndex===T.datasetIndex&&w.index===T.index)),d=u(n,e),g=s?e:u(e,n);d.length&&this.updateHoverStyle(d,o.mode,!1),g.length&&o.mode&&this.updateHoverStyle(g,o.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},o=d=>(d.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,o)===!1)return;const u=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,o),(u||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:o=[],options:u}=this,d=n,g=this._getActiveElements(e,o,s,d),y=_isClickEvent(e),v=determineLastEvent(e,this._lastEvent,s,y);s&&(this._lastEvent=null,callback(u.onHover,[e,g,this],this),y&&callback(u.onClick,[e,g,this],this));const w=!_elementsEqual(g,o);return(w||n)&&(this._active=g,this._updateHoverStyles(g,o,n)),this._lastEvent=v,w}_getActiveElements(e,n,s,o){if(e.type==="mouseout")return[];if(!s)return n;const u=this.options.hover;return this.getElementsAtEventForMode(e,u.mode,u,o)}}dn(Chart,"defaults",defaults),dn(Chart,"instances",instances),dn(Chart,"overrides",overrides),dn(Chart,"registry",registry),dn(Chart,"version",version),dn(Chart,"getChart",getChart);function invalidatePlugins(){return each(Chart.instances,t=>t._plugins.invalidate())}function clipSelf(t,e,n){const{startAngle:s,x:o,y:u,outerRadius:d,innerRadius:g,options:y}=e,{borderWidth:v,borderJoinStyle:w}=y,T=Math.min(v/d,_normalizeAngle(s-n));if(t.beginPath(),t.arc(o,u,d-v/2,s+T/2,n-T/2),g>0){const A=Math.min(v/g,_normalizeAngle(s-n));t.arc(o,u,g+v/2,n-A/2,s+A/2,!0)}else{const A=Math.min(v/2,d*_normalizeAngle(s-n));if(w==="round")t.arc(o,u,A,n-PI/2,s+PI/2,!0);else if(w==="bevel"){const C=2*A*A,j=-C*Math.cos(n+PI/2)+o,D=-C*Math.sin(n+PI/2)+u,H=C*Math.cos(s+PI/2)+o,ne=C*Math.sin(s+PI/2)+u;t.lineTo(j,D),t.lineTo(H,ne)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function clipArc(t,e,n){const{startAngle:s,pixelMargin:o,x:u,y:d,outerRadius:g,innerRadius:y}=e;let v=o/g;t.beginPath(),t.arc(u,d,g,s-v,n+v),y>o?(v=o/y,t.arc(u,d,y,n+v,s-v,!0)):t.arc(u,d,o,n+HALF_PI,s-HALF_PI),t.closePath(),t.clip()}function toRadiusCorners(t){return _readValueToProps(t,["outerStart","outerEnd","innerStart","innerEnd"])}function parseBorderRadius$1(t,e,n,s){const o=toRadiusCorners(t.options.borderRadius),u=(n-e)/2,d=Math.min(u,s*e/2),g=y=>{const v=(n-Math.min(u,y))*s/2;return _limitValue(y,0,Math.min(u,v))};return{outerStart:g(o.outerStart),outerEnd:g(o.outerEnd),innerStart:_limitValue(o.innerStart,0,d),innerEnd:_limitValue(o.innerEnd,0,d)}}function rThetaToXY(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function pathArc(t,e,n,s,o,u){const{x:d,y:g,startAngle:y,pixelMargin:v,innerRadius:w}=e,T=Math.max(e.outerRadius+s+n-v,0),A=w>0?w+s+n+v:0;let C=0;const j=o-y;if(s){const Ee=w>0?w-s:0,we=T>0?T-s:0,de=(Ee+we)/2,me=de!==0?j*de/(de+s):j;C=(j-me)/2}const D=Math.max(.001,j*T-n/PI)/T,H=(j-D)/2,ne=y+H+C,Y=o-H-C,{outerStart:U,outerEnd:ee,innerStart:J,innerEnd:ie}=parseBorderRadius$1(e,A,T,Y-ne),se=T-U,K=T-ee,te=ne+U/se,re=Y-ee/K,ce=A+J,le=A+ie,ue=ne+J/ce,_e=Y-ie/le;if(t.beginPath(),u){const Ee=(te+re)/2;if(t.arc(d,g,T,te,Ee),t.arc(d,g,T,Ee,re),ee>0){const xe=rThetaToXY(K,re,d,g);t.arc(xe.x,xe.y,ee,re,Y+HALF_PI)}const we=rThetaToXY(le,Y,d,g);if(t.lineTo(we.x,we.y),ie>0){const xe=rThetaToXY(le,_e,d,g);t.arc(xe.x,xe.y,ie,Y+HALF_PI,_e+Math.PI)}const de=(Y-ie/A+(ne+J/A))/2;if(t.arc(d,g,A,Y-ie/A,de,!0),t.arc(d,g,A,de,ne+J/A,!0),J>0){const xe=rThetaToXY(ce,ue,d,g);t.arc(xe.x,xe.y,J,ue+Math.PI,ne-HALF_PI)}const me=rThetaToXY(se,ne,d,g);if(t.lineTo(me.x,me.y),U>0){const xe=rThetaToXY(se,te,d,g);t.arc(xe.x,xe.y,U,ne-HALF_PI,te)}}else{t.moveTo(d,g);const Ee=Math.cos(te)*T+d,we=Math.sin(te)*T+g;t.lineTo(Ee,we);const de=Math.cos(re)*T+d,me=Math.sin(re)*T+g;t.lineTo(de,me)}t.closePath()}function drawArc(t,e,n,s,o){const{fullCircles:u,startAngle:d,circumference:g}=e;let y=e.endAngle;if(u){pathArc(t,e,n,s,y,o);for(let v=0;v<u;++v)t.fill();isNaN(g)||(y=d+(g%TAU||TAU))}return pathArc(t,e,n,s,y,o),t.fill(),y}function drawBorder(t,e,n,s,o){const{fullCircles:u,startAngle:d,circumference:g,options:y}=e,{borderWidth:v,borderJoinStyle:w,borderDash:T,borderDashOffset:A,borderRadius:C}=y,j=y.borderAlign==="inner";if(!v)return;t.setLineDash(T||[]),t.lineDashOffset=A,j?(t.lineWidth=v*2,t.lineJoin=w||"round"):(t.lineWidth=v,t.lineJoin=w||"bevel");let D=e.endAngle;if(u){pathArc(t,e,n,s,D,o);for(let H=0;H<u;++H)t.stroke();isNaN(g)||(D=d+(g%TAU||TAU))}j&&clipArc(t,e,D),y.selfJoin&&D-d>=PI&&C===0&&w!=="miter"&&clipSelf(t,e,D),u||(pathArc(t,e,n,s,D,o),t.stroke())}class ArcElement extends Element$1{constructor(n){super();dn(this,"circumference");dn(this,"endAngle");dn(this,"fullCircles");dn(this,"innerRadius");dn(this,"outerRadius");dn(this,"pixelMargin");dn(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,o){const u=this.getProps(["x","y"],o),{angle:d,distance:g}=getAngleFromPoint(u,{x:n,y:s}),{startAngle:y,endAngle:v,innerRadius:w,outerRadius:T,circumference:A}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),C=(this.options.spacing+this.options.borderWidth)/2,j=valueOrDefault(A,v-y),D=_angleBetween(d,y,v)&&y!==v,H=j>=TAU||D,ne=_isBetween(g,w+C,T+C);return H&&ne}getCenterPoint(n){const{x:s,y:o,startAngle:u,endAngle:d,innerRadius:g,outerRadius:y}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:v,spacing:w}=this.options,T=(u+d)/2,A=(g+y+w+v)/2;return{x:s+Math.cos(T)*A,y:o+Math.sin(T)*A}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:o}=this,u=(s.offset||0)/4,d=(s.spacing||0)/2,g=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=o>TAU?Math.floor(o/TAU):0,o===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const y=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(y)*u,Math.sin(y)*u);const v=1-Math.sin(Math.min(PI,o||0)),w=u*v;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,drawArc(n,this,w,d,g),drawBorder(n,this,w,d,g),n.restore()}}dn(ArcElement,"id","arc"),dn(ArcElement,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),dn(ArcElement,"defaultRoutes",{backgroundColor:"backgroundColor"}),dn(ArcElement,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function setStyle(t,e,n=e){t.lineCap=valueOrDefault(n.borderCapStyle,e.borderCapStyle),t.setLineDash(valueOrDefault(n.borderDash,e.borderDash)),t.lineDashOffset=valueOrDefault(n.borderDashOffset,e.borderDashOffset),t.lineJoin=valueOrDefault(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=valueOrDefault(n.borderWidth,e.borderWidth),t.strokeStyle=valueOrDefault(n.borderColor,e.borderColor)}function lineTo(t,e,n){t.lineTo(n.x,n.y)}function getLineMethod(t){return t.stepped?_steppedLineTo:t.tension||t.cubicInterpolationMode==="monotone"?_bezierCurveTo:lineTo}function pathVars(t,e,n={}){const s=t.length,{start:o=0,end:u=s-1}=n,{start:d,end:g}=e,y=Math.max(o,d),v=Math.min(u,g),w=o<d&&u<d||o>g&&u>g;return{count:s,start:y,loop:e.loop,ilen:v<y&&!w?s+v-y:v-y}}function pathSegment(t,e,n,s){const{points:o,options:u}=e,{count:d,start:g,loop:y,ilen:v}=pathVars(o,n,s),w=getLineMethod(u);let{move:T=!0,reverse:A}=s||{},C,j,D;for(C=0;C<=v;++C)j=o[(g+(A?v-C:C))%d],!j.skip&&(T?(t.moveTo(j.x,j.y),T=!1):w(t,D,j,A,u.stepped),D=j);return y&&(j=o[(g+(A?v:0))%d],w(t,D,j,A,u.stepped)),!!y}function fastPathSegment(t,e,n,s){const o=e.points,{count:u,start:d,ilen:g}=pathVars(o,n,s),{move:y=!0,reverse:v}=s||{};let w=0,T=0,A,C,j,D,H,ne;const Y=ee=>(d+(v?g-ee:ee))%u,U=()=>{D!==H&&(t.lineTo(w,H),t.lineTo(w,D),t.lineTo(w,ne))};for(y&&(C=o[Y(0)],t.moveTo(C.x,C.y)),A=0;A<=g;++A){if(C=o[Y(A)],C.skip)continue;const ee=C.x,J=C.y,ie=ee|0;ie===j?(J<D?D=J:J>H&&(H=J),w=(T*w+ee)/++T):(U(),t.lineTo(ee,J),j=ie,T=0,D=H=J),ne=J}U()}function _getSegmentMethod(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?fastPathSegment:pathSegment}function _getInterpolationMethod(t){return t.stepped?_steppedInterpolation:t.tension||t.cubicInterpolationMode==="monotone"?_bezierInterpolation:_pointInLine}function strokePathWithCache(t,e,n,s){let o=e._path;o||(o=e._path=new Path2D,e.path(o,n,s)&&o.closePath()),setStyle(t,e.options),t.stroke(o)}function strokePathDirect(t,e,n,s){const{segments:o,options:u}=e,d=_getSegmentMethod(e);for(const g of o)setStyle(t,u,g.style),t.beginPath(),d(t,e,g,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const usePath2D=typeof Path2D=="function";function draw(t,e,n,s){usePath2D&&!e.options.segment?strokePathWithCache(t,e,n,s):strokePathDirect(t,e,n,s)}class LineElement extends Element$1{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const o=s.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,s,e,o,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,o=e[n],u=this.points,d=_boundSegments(this,{property:n,start:o,end:o});if(!d.length)return;const g=[],y=_getInterpolationMethod(s);let v,w;for(v=0,w=d.length;v<w;++v){const{start:T,end:A}=d[v],C=u[T],j=u[A];if(C===j){g.push(C);continue}const D=Math.abs((o-C[n])/(j[n]-C[n])),H=y(C,j,D,s.stepped);H[n]=e[n],g.push(H)}return g.length===1?g[0]:g}pathSegment(e,n,s){return _getSegmentMethod(this)(e,this,n,s)}path(e,n,s){const o=this.segments,u=_getSegmentMethod(this);let d=this._loop;n=n||0,s=s||this.points.length-n;for(const g of o)d&=u(e,this,g,{start:n,end:n+s-1});return!!d}draw(e,n,s,o){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(e.save(),draw(e,this,s,o),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}dn(LineElement,"id","line"),dn(LineElement,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),dn(LineElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),dn(LineElement,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function inRange$1(t,e,n,s){const o=t.options,{[n]:u}=t.getProps([n],s);return Math.abs(e-u)<o.radius+o.hitRadius}class PointElement extends Element$1{constructor(n){super();dn(this,"parsed");dn(this,"skip");dn(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,o){const u=this.options,{x:d,y:g}=this.getProps(["x","y"],o);return Math.pow(n-d,2)+Math.pow(s-g,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(n,s){return inRange$1(this,n,"x",s)}inYRange(n,s){return inRange$1(this,n,"y",s)}getCenterPoint(n){const{x:s,y:o}=this.getProps(["x","y"],n);return{x:s,y:o}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const o=s&&n.borderWidth||0;return(s+o)*2}draw(n,s){const o=this.options;this.skip||o.radius<.1||!_isPointInArea(this,s,this.size(o)/2)||(n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.fillStyle=o.backgroundColor,drawPoint(n,o,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}dn(PointElement,"id","point"),dn(PointElement,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),dn(PointElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function getBarBounds(t,e){const{x:n,y:s,base:o,width:u,height:d}=t.getProps(["x","y","base","width","height"],e);let g,y,v,w,T;return t.horizontal?(T=d/2,g=Math.min(n,o),y=Math.max(n,o),v=s-T,w=s+T):(T=u/2,g=n-T,y=n+T,v=Math.min(s,o),w=Math.max(s,o)),{left:g,top:v,right:y,bottom:w}}function skipOrLimit(t,e,n,s){return t?0:_limitValue(e,n,s)}function parseBorderWidth(t,e,n){const s=t.options.borderWidth,o=t.borderSkipped,u=toTRBL(s);return{t:skipOrLimit(o.top,u.top,0,n),r:skipOrLimit(o.right,u.right,0,e),b:skipOrLimit(o.bottom,u.bottom,0,n),l:skipOrLimit(o.left,u.left,0,e)}}function parseBorderRadius(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,u=toTRBLCorners(o),d=Math.min(e,n),g=t.borderSkipped,y=s||isObject(o);return{topLeft:skipOrLimit(!y||g.top||g.left,u.topLeft,0,d),topRight:skipOrLimit(!y||g.top||g.right,u.topRight,0,d),bottomLeft:skipOrLimit(!y||g.bottom||g.left,u.bottomLeft,0,d),bottomRight:skipOrLimit(!y||g.bottom||g.right,u.bottomRight,0,d)}}function boundingRects(t){const e=getBarBounds(t),n=e.right-e.left,s=e.bottom-e.top,o=parseBorderWidth(t,n/2,s/2),u=parseBorderRadius(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:u},inner:{x:e.left+o.l,y:e.top+o.t,w:n-o.l-o.r,h:s-o.t-o.b,radius:{topLeft:Math.max(0,u.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,u.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,u.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,u.bottomRight-Math.max(o.b,o.r))}}}}function inRange(t,e,n,s){const o=e===null,u=n===null,g=t&&!(o&&u)&&getBarBounds(t,s);return g&&(o||_isBetween(e,g.left,g.right))&&(u||_isBetween(n,g.top,g.bottom))}function hasRadius(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function addNormalRectPath(t,e){t.rect(e.x,e.y,e.w,e.h)}function inflateRect(t,e,n={}){const s=t.x!==n.x?-e:0,o=t.y!==n.y?-e:0,u=(t.x+t.w!==n.x+n.w?e:0)-s,d=(t.y+t.h!==n.y+n.h?e:0)-o;return{x:t.x+s,y:t.y+o,w:t.w+u,h:t.h+d,radius:t.radius}}class BarElement extends Element$1{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:o}}=this,{inner:u,outer:d}=boundingRects(this),g=hasRadius(d.radius)?addRoundedRectPath:addNormalRectPath;e.save(),(d.w!==u.w||d.h!==u.h)&&(e.beginPath(),g(e,inflateRect(d,n,u)),e.clip(),g(e,inflateRect(u,-n,d)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),g(e,inflateRect(u,n)),e.fillStyle=o,e.fill(),e.restore()}inRange(e,n,s){return inRange(this,e,n,s)}inXRange(e,n){return inRange(this,e,null,n)}inYRange(e,n){return inRange(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:o,horizontal:u}=this.getProps(["x","y","base","horizontal"],e);return{x:u?(n+o)/2:n,y:u?s:(s+o)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}dn(BarElement,"id","bar"),dn(BarElement,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),dn(BarElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var elements=Object.freeze({__proto__:null,ArcElement,BarElement,LineElement,PointElement});const BORDER_COLORS=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],BACKGROUND_COLORS=BORDER_COLORS.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function getBorderColor(t){return BORDER_COLORS[t%BORDER_COLORS.length]}function getBackgroundColor(t){return BACKGROUND_COLORS[t%BACKGROUND_COLORS.length]}function colorizeDefaultDataset(t,e){return t.borderColor=getBorderColor(e),t.backgroundColor=getBackgroundColor(e),++e}function colorizeDoughnutDataset(t,e){return t.backgroundColor=t.data.map(()=>getBorderColor(e++)),e}function colorizePolarAreaDataset(t,e){return t.backgroundColor=t.data.map(()=>getBackgroundColor(e++)),e}function getColorizer(t){let e=0;return(n,s)=>{const o=t.getDatasetMeta(s).controller;o instanceof DoughnutController?e=colorizeDoughnutDataset(n,e):o instanceof PolarAreaController?e=colorizePolarAreaDataset(n,e):o&&(e=colorizeDefaultDataset(n,e))}}function containsColorsDefinitions(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function containsColorsDefinition(t){return t&&(t.borderColor||t.backgroundColor)}function containsDefaultColorsDefenitions(){return defaults.borderColor!=="rgba(0,0,0,0.1)"||defaults.backgroundColor!=="rgba(0,0,0,0.1)"}var plugin_colors={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:s},options:o}=t.config,{elements:u}=o,d=containsColorsDefinitions(s)||containsColorsDefinition(o)||u&&containsColorsDefinitions(u)||containsDefaultColorsDefenitions();if(!n.forceOverride&&d)return;const g=getColorizer(t);s.forEach(g)}};function lttbDecimation(t,e,n,s,o){const u=o.samples||s;if(u>=n)return t.slice(e,e+n);const d=[],g=(n-2)/(u-2);let y=0;const v=e+n-1;let w=e,T,A,C,j,D;for(d[y++]=t[w],T=0;T<u-2;T++){let H=0,ne=0,Y;const U=Math.floor((T+1)*g)+1+e,ee=Math.min(Math.floor((T+2)*g)+1,n)+e,J=ee-U;for(Y=U;Y<ee;Y++)H+=t[Y].x,ne+=t[Y].y;H/=J,ne/=J;const ie=Math.floor(T*g)+1+e,se=Math.min(Math.floor((T+1)*g)+1,n)+e,{x:K,y:te}=t[w];for(C=j=-1,Y=ie;Y<se;Y++)j=.5*Math.abs((K-H)*(t[Y].y-te)-(K-t[Y].x)*(ne-te)),j>C&&(C=j,A=t[Y],D=Y);d[y++]=A,w=D}return d[y++]=t[v],d}function minMaxDecimation(t,e,n,s){let o=0,u=0,d,g,y,v,w,T,A,C,j,D;const H=[],ne=e+n-1,Y=t[e].x,ee=t[ne].x-Y;for(d=e;d<e+n;++d){g=t[d],y=(g.x-Y)/ee*s,v=g.y;const J=y|0;if(J===w)v<j?(j=v,T=d):v>D&&(D=v,A=d),o=(u*o+g.x)/++u;else{const ie=d-1;if(!isNullOrUndef(T)&&!isNullOrUndef(A)){const se=Math.min(T,A),K=Math.max(T,A);se!==C&&se!==ie&&H.push({...t[se],x:o}),K!==C&&K!==ie&&H.push({...t[K],x:o})}d>0&&ie!==C&&H.push(t[ie]),H.push(g),w=J,u=0,j=D=v,T=A=C=d}}return H}function cleanDecimatedDataset(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function cleanDecimatedData(t){t.data.datasets.forEach(e=>{cleanDecimatedDataset(e)})}function getStartAndCountOfVisiblePointsSimplified(t,e){const n=e.length;let s=0,o;const{iScale:u}=t,{min:d,max:g,minDefined:y,maxDefined:v}=u.getUserBounds();return y&&(s=_limitValue(_lookupByKey(e,u.axis,d).lo,0,n-1)),v?o=_limitValue(_lookupByKey(e,u.axis,g).hi+1,s,n)-s:o=n-s,{start:s,count:o}}var plugin_decimation={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){cleanDecimatedData(t);return}const s=t.width;t.data.datasets.forEach((o,u)=>{const{_data:d,indexAxis:g}=o,y=t.getDatasetMeta(u),v=d||o.data;if(resolve([g,t.options.indexAxis])==="y"||!y.controller.supportsDecimation)return;const w=t.scales[y.xAxisID];if(w.type!=="linear"&&w.type!=="time"||t.options.parsing)return;let{start:T,count:A}=getStartAndCountOfVisiblePointsSimplified(y,v);const C=n.threshold||4*s;if(A<=C){cleanDecimatedDataset(o);return}isNullOrUndef(d)&&(o._data=v,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(D){this._data=D}}));let j;switch(n.algorithm){case"lttb":j=lttbDecimation(v,T,A,s,n);break;case"min-max":j=minMaxDecimation(v,T,A,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}o._decimated=j})},destroy(t){cleanDecimatedData(t)}};function _segments(t,e,n){const s=t.segments,o=t.points,u=e.points,d=[];for(const g of s){let{start:y,end:v}=g;v=_findSegmentEnd(y,v,o);const w=_getBounds(n,o[y],o[v],g.loop);if(!e.segments){d.push({source:g,target:w,start:o[y],end:o[v]});continue}const T=_boundSegments(e,w);for(const A of T){const C=_getBounds(n,u[A.start],u[A.end],A.loop),j=_boundSegment(g,o,C);for(const D of j)d.push({source:D,target:A,start:{[n]:_getEdge(w,C,"start",Math.max)},end:{[n]:_getEdge(w,C,"end",Math.min)}})}}return d}function _getBounds(t,e,n,s){if(s)return;let o=e[t],u=n[t];return t==="angle"&&(o=_normalizeAngle(o),u=_normalizeAngle(u)),{property:t,start:o,end:u}}function _pointsFromSegments(t,e){const{x:n=null,y:s=null}=t||{},o=e.points,u=[];return e.segments.forEach(({start:d,end:g})=>{g=_findSegmentEnd(d,g,o);const y=o[d],v=o[g];s!==null?(u.push({x:y.x,y:s}),u.push({x:v.x,y:s})):n!==null&&(u.push({x:n,y:y.y}),u.push({x:n,y:v.y}))}),u}function _findSegmentEnd(t,e,n){for(;e>t;e--){const s=n[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function _getEdge(t,e,n,s){return t&&e?s(t[n],e[n]):t?t[n]:e?e[n]:0}function _createBoundaryLine(t,e){let n=[],s=!1;return isArray(t)?(s=!0,n=t):n=_pointsFromSegments(t,e),n.length?new LineElement({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function _shouldApplyFill(t){return t&&t.fill!==!1}function _resolveTarget(t,e,n){let o=t[e].fill;const u=[e];let d;if(!n)return o;for(;o!==!1&&u.indexOf(o)===-1;){if(!isNumberFinite(o))return o;if(d=t[o],!d)return!1;if(d.visible)return o;u.push(o),o=d.fill}return!1}function _decodeFill(t,e,n){const s=parseFillOption(t);if(isObject(s))return isNaN(s.value)?!1:s;let o=parseFloat(s);return isNumberFinite(o)&&Math.floor(o)===o?decodeTargetIndex(s[0],e,o,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function decodeTargetIndex(t,e,n,s){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=s?!1:n}function _getTargetPixel(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:isObject(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function _getTargetValue(t,e,n){let s;return t==="start"?s=n:t==="end"?s=e.options.reverse?e.min:e.max:isObject(t)?s=t.value:s=e.getBaseValue(),s}function parseFillOption(t){const e=t.options,n=e.fill;let s=valueOrDefault(n&&n.target,n);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function _buildStackLine(t){const{scale:e,index:n,line:s}=t,o=[],u=s.segments,d=s.points,g=getLinesBelow(e,n);g.push(_createBoundaryLine({x:null,y:e.bottom},s));for(let y=0;y<u.length;y++){const v=u[y];for(let w=v.start;w<=v.end;w++)addPointsBelow(o,d[w],g)}return new LineElement({points:o,options:{}})}function getLinesBelow(t,e){const n=[],s=t.getMatchingVisibleMetas("line");for(let o=0;o<s.length;o++){const u=s[o];if(u.index===e)break;u.hidden||n.unshift(u.dataset)}return n}function addPointsBelow(t,e,n){const s=[];for(let o=0;o<n.length;o++){const u=n[o],{first:d,last:g,point:y}=findPoint(u,e,"x");if(!(!y||d&&g)){if(d)s.unshift(y);else if(t.push(y),!g)break}}t.push(...s)}function findPoint(t,e,n){const s=t.interpolate(e,n);if(!s)return{};const o=s[n],u=t.segments,d=t.points;let g=!1,y=!1;for(let v=0;v<u.length;v++){const w=u[v],T=d[w.start][n],A=d[w.end][n];if(_isBetween(o,T,A)){g=o===T,y=o===A;break}}return{first:g,last:y,point:s}}class simpleArc{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,s){const{x:o,y:u,radius:d}=this;return n=n||{start:0,end:TAU},e.arc(o,u,d,n.end,n.start,!0),!s.bounds}interpolate(e){const{x:n,y:s,radius:o}=this,u=e.angle;return{x:n+Math.cos(u)*o,y:s+Math.sin(u)*o,angle:u}}}function _getTarget(t){const{chart:e,fill:n,line:s}=t;if(isNumberFinite(n))return getLineByIndex(e,n);if(n==="stack")return _buildStackLine(t);if(n==="shape")return!0;const o=computeBoundary(t);return o instanceof simpleArc?o:_createBoundaryLine(o,s)}function getLineByIndex(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function computeBoundary(t){return(t.scale||{}).getPointPositionForValue?computeCircularBoundary(t):computeLinearBoundary(t)}function computeLinearBoundary(t){const{scale:e={},fill:n}=t,s=_getTargetPixel(n,e);if(isNumberFinite(s)){const o=e.isHorizontal();return{x:o?s:null,y:o?null:s}}return null}function computeCircularBoundary(t){const{scale:e,fill:n}=t,s=e.options,o=e.getLabels().length,u=s.reverse?e.max:e.min,d=_getTargetValue(n,e,u),g=[];if(s.grid.circular){const y=e.getPointPositionForValue(0,u);return new simpleArc({x:y.x,y:y.y,radius:e.getDistanceFromCenterForValue(d)})}for(let y=0;y<o;++y)g.push(e.getPointPositionForValue(y,d));return g}function _drawfill(t,e,n){const s=_getTarget(e),{chart:o,index:u,line:d,scale:g,axis:y}=e,v=d.options,w=v.fill,T=v.backgroundColor,{above:A=T,below:C=T}=w||{},j=o.getDatasetMeta(u),D=getDatasetClipArea(o,j);s&&d.points.length&&(clipArea(t,n),doFill(t,{line:d,target:s,above:A,below:C,area:n,scale:g,axis:y,clip:D}),unclipArea(t))}function doFill(t,e){const{line:n,target:s,above:o,below:u,area:d,scale:g,clip:y}=e,v=n._loop?"angle":e.axis;t.save();let w=u;u!==o&&(v==="x"?(clipVertical(t,s,d.top),fill(t,{line:n,target:s,color:o,scale:g,property:v,clip:y}),t.restore(),t.save(),clipVertical(t,s,d.bottom)):v==="y"&&(clipHorizontal(t,s,d.left),fill(t,{line:n,target:s,color:u,scale:g,property:v,clip:y}),t.restore(),t.save(),clipHorizontal(t,s,d.right),w=o)),fill(t,{line:n,target:s,color:w,scale:g,property:v,clip:y}),t.restore()}function clipVertical(t,e,n){const{segments:s,points:o}=e;let u=!0,d=!1;t.beginPath();for(const g of s){const{start:y,end:v}=g,w=o[y],T=o[_findSegmentEnd(y,v,o)];u?(t.moveTo(w.x,w.y),u=!1):(t.lineTo(w.x,n),t.lineTo(w.x,w.y)),d=!!e.pathSegment(t,g,{move:d}),d?t.closePath():t.lineTo(T.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function clipHorizontal(t,e,n){const{segments:s,points:o}=e;let u=!0,d=!1;t.beginPath();for(const g of s){const{start:y,end:v}=g,w=o[y],T=o[_findSegmentEnd(y,v,o)];u?(t.moveTo(w.x,w.y),u=!1):(t.lineTo(n,w.y),t.lineTo(w.x,w.y)),d=!!e.pathSegment(t,g,{move:d}),d?t.closePath():t.lineTo(n,T.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function fill(t,e){const{line:n,target:s,property:o,color:u,scale:d,clip:g}=e,y=_segments(n,s,o);for(const{source:v,target:w,start:T,end:A}of y){const{style:{backgroundColor:C=u}={}}=v,j=s!==!0;t.save(),t.fillStyle=C,clipBounds(t,d,g,j&&_getBounds(o,T,A)),t.beginPath();const D=!!n.pathSegment(t,v);let H;if(j){D?t.closePath():interpolatedLineTo(t,s,A,o);const ne=!!s.pathSegment(t,w,{move:D,reverse:!0});H=D&&ne,H||interpolatedLineTo(t,s,T,o)}t.closePath(),t.fill(H?"evenodd":"nonzero"),t.restore()}}function clipBounds(t,e,n,s){const o=e.chart.chartArea,{property:u,start:d,end:g}=s||{};if(u==="x"||u==="y"){let y,v,w,T;u==="x"?(y=d,v=o.top,w=g,T=o.bottom):(y=o.left,v=d,w=o.right,T=g),t.beginPath(),n&&(y=Math.max(y,n.left),w=Math.min(w,n.right),v=Math.max(v,n.top),T=Math.min(T,n.bottom)),t.rect(y,v,w-y,T-v),t.clip()}}function interpolatedLineTo(t,e,n,s){const o=e.interpolate(n,s);o&&t.lineTo(o.x,o.y)}var index={id:"filler",afterDatasetsUpdate(t,e,n){const s=(t.data.datasets||[]).length,o=[];let u,d,g,y;for(d=0;d<s;++d)u=t.getDatasetMeta(d),g=u.dataset,y=null,g&&g.options&&g instanceof LineElement&&(y={visible:t.isDatasetVisible(d),index:d,fill:_decodeFill(g,d,s),chart:t,axis:u.controller.options.indexAxis,scale:u.vScale,line:g}),u.$filler=y,o.push(y);for(d=0;d<s;++d)y=o[d],!(!y||y.fill===!1)&&(y.fill=_resolveTarget(o,d,n.propagate))},beforeDraw(t,e,n){const s=n.drawTime==="beforeDraw",o=t.getSortedVisibleDatasetMetas(),u=t.chartArea;for(let d=o.length-1;d>=0;--d){const g=o[d].$filler;g&&(g.line.updateControlPoints(u,g.axis),s&&g.fill&&_drawfill(t.ctx,g,u))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let o=s.length-1;o>=0;--o){const u=s[o].$filler;_shouldApplyFill(u)&&_drawfill(t.ctx,u,t.chartArea)}},beforeDatasetDraw(t,e,n){const s=e.meta.$filler;!_shouldApplyFill(s)||n.drawTime!=="beforeDatasetDraw"||_drawfill(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const getBoxSize=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},itemsEqual=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Legend extends Element$1{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=callback(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,o)=>e.sort(s,o,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,o=toFont(s.font),u=o.size,d=this._computeTitleHeight(),{boxWidth:g,itemHeight:y}=getBoxSize(s,u);let v,w;n.font=o.string,this.isHorizontal()?(v=this.maxWidth,w=this._fitRows(d,u,g,y)+10):(w=this.maxHeight,v=this._fitCols(d,o,g,y)+10),this.width=Math.min(v,e.maxWidth||this.maxWidth),this.height=Math.min(w,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,o){const{ctx:u,maxWidth:d,options:{labels:{padding:g}}}=this,y=this.legendHitBoxes=[],v=this.lineWidths=[0],w=o+g;let T=e;u.textAlign="left",u.textBaseline="middle";let A=-1,C=-w;return this.legendItems.forEach((j,D)=>{const H=s+n/2+u.measureText(j.text).width;(D===0||v[v.length-1]+H+2*g>d)&&(T+=w,v[v.length-(D>0?0:1)]=0,C+=w,A++),y[D]={left:0,top:C,row:A,width:H,height:o},v[v.length-1]+=H+g}),T}_fitCols(e,n,s,o){const{ctx:u,maxHeight:d,options:{labels:{padding:g}}}=this,y=this.legendHitBoxes=[],v=this.columnSizes=[],w=d-e;let T=g,A=0,C=0,j=0,D=0;return this.legendItems.forEach((H,ne)=>{const{itemWidth:Y,itemHeight:U}=calculateItemSize(s,n,u,H,o);ne>0&&C+U+2*g>w&&(T+=A+g,v.push({width:A,height:C}),j+=A+g,D++,A=C=0),y[ne]={left:j,top:C,col:D,width:Y,height:U},A=Math.max(A,Y),C+=U+g}),T+=A,v.push({width:A,height:C}),T}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:o},rtl:u}}=this,d=getRtlAdapter(u,this.left,this.width);if(this.isHorizontal()){let g=0,y=_alignStartEnd(s,this.left+o,this.right-this.lineWidths[g]);for(const v of n)g!==v.row&&(g=v.row,y=_alignStartEnd(s,this.left+o,this.right-this.lineWidths[g])),v.top+=this.top+e+o,v.left=d.leftForLtr(d.x(y),v.width),y+=v.width+o}else{let g=0,y=_alignStartEnd(s,this.top+e+o,this.bottom-this.columnSizes[g].height);for(const v of n)v.col!==g&&(g=v.col,y=_alignStartEnd(s,this.top+e+o,this.bottom-this.columnSizes[g].height)),v.top=y,v.left+=this.left+o,v.left=d.leftForLtr(d.x(v.left),v.width),y+=v.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;clipArea(e,this),this._draw(),unclipArea(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:o}=this,{align:u,labels:d}=e,g=defaults.color,y=getRtlAdapter(e.rtl,this.left,this.width),v=toFont(d.font),{padding:w}=d,T=v.size,A=T/2;let C;this.drawTitle(),o.textAlign=y.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=v.string;const{boxWidth:j,boxHeight:D,itemHeight:H}=getBoxSize(d,T),ne=function(ie,se,K){if(isNaN(j)||j<=0||isNaN(D)||D<0)return;o.save();const te=valueOrDefault(K.lineWidth,1);if(o.fillStyle=valueOrDefault(K.fillStyle,g),o.lineCap=valueOrDefault(K.lineCap,"butt"),o.lineDashOffset=valueOrDefault(K.lineDashOffset,0),o.lineJoin=valueOrDefault(K.lineJoin,"miter"),o.lineWidth=te,o.strokeStyle=valueOrDefault(K.strokeStyle,g),o.setLineDash(valueOrDefault(K.lineDash,[])),d.usePointStyle){const re={radius:D*Math.SQRT2/2,pointStyle:K.pointStyle,rotation:K.rotation,borderWidth:te},ce=y.xPlus(ie,j/2),le=se+A;drawPointLegend(o,re,ce,le,d.pointStyleWidth&&j)}else{const re=se+Math.max((T-D)/2,0),ce=y.leftForLtr(ie,j),le=toTRBLCorners(K.borderRadius);o.beginPath(),Object.values(le).some(ue=>ue!==0)?addRoundedRectPath(o,{x:ce,y:re,w:j,h:D,radius:le}):o.rect(ce,re,j,D),o.fill(),te!==0&&o.stroke()}o.restore()},Y=function(ie,se,K){renderText(o,K.text,ie,se+H/2,v,{strikethrough:K.hidden,textAlign:y.textAlign(K.textAlign)})},U=this.isHorizontal(),ee=this._computeTitleHeight();U?C={x:_alignStartEnd(u,this.left+w,this.right-s[0]),y:this.top+w+ee,line:0}:C={x:this.left+w,y:_alignStartEnd(u,this.top+ee+w,this.bottom-n[0].height),line:0},overrideTextDirection(this.ctx,e.textDirection);const J=H+w;this.legendItems.forEach((ie,se)=>{o.strokeStyle=ie.fontColor,o.fillStyle=ie.fontColor;const K=o.measureText(ie.text).width,te=y.textAlign(ie.textAlign||(ie.textAlign=d.textAlign)),re=j+A+K;let ce=C.x,le=C.y;y.setWidth(this.width),U?se>0&&ce+re+w>this.right&&(le=C.y+=J,C.line++,ce=C.x=_alignStartEnd(u,this.left+w,this.right-s[C.line])):se>0&&le+J>this.bottom&&(ce=C.x=ce+n[C.line].width+w,C.line++,le=C.y=_alignStartEnd(u,this.top+ee+w,this.bottom-n[C.line].height));const ue=y.x(ce);if(ne(ue,le,ie),ce=_textX(te,ce+j+A,U?ce+re:this.right,e.rtl),Y(y.x(ce),le,ie),U)C.x+=re+w;else if(typeof ie.text!="string"){const _e=v.lineHeight;C.y+=calculateLegendItemHeight(ie,_e)+w}else C.y+=J}),restoreTextDirection(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=toFont(n.font),o=toPadding(n.padding);if(!n.display)return;const u=getRtlAdapter(e.rtl,this.left,this.width),d=this.ctx,g=n.position,y=s.size/2,v=o.top+y;let w,T=this.left,A=this.width;if(this.isHorizontal())A=Math.max(...this.lineWidths),w=this.top+v,T=_alignStartEnd(e.align,T,this.right-A);else{const j=this.columnSizes.reduce((D,H)=>Math.max(D,H.height),0);w=v+_alignStartEnd(e.align,this.top,this.bottom-j-e.labels.padding-this._computeTitleHeight())}const C=_alignStartEnd(g,T,T+A);d.textAlign=u.textAlign(_toLeftRightCenter(g)),d.textBaseline="middle",d.strokeStyle=n.color,d.fillStyle=n.color,d.font=s.string,renderText(d,n.text,C,w,s)}_computeTitleHeight(){const e=this.options.title,n=toFont(e.font),s=toPadding(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,o,u;if(_isBetween(e,this.left,this.right)&&_isBetween(n,this.top,this.bottom)){for(u=this.legendHitBoxes,s=0;s<u.length;++s)if(o=u[s],_isBetween(e,o.left,o.left+o.width)&&_isBetween(n,o.top,o.top+o.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!isListened(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const o=this._hoveredItem,u=itemsEqual(o,s);o&&!u&&callback(n.onLeave,[e,o,this],this),this._hoveredItem=s,s&&!u&&callback(n.onHover,[e,s,this],this)}else s&&callback(n.onClick,[e,s,this],this)}}function calculateItemSize(t,e,n,s,o){const u=calculateItemWidth(s,t,e,n),d=calculateItemHeight(o,s,e.lineHeight);return{itemWidth:u,itemHeight:d}}function calculateItemWidth(t,e,n,s){let o=t.text;return o&&typeof o!="string"&&(o=o.reduce((u,d)=>u.length>d.length?u:d)),e+n.size/2+s.measureText(o).width}function calculateItemHeight(t,e,n){let s=t;return typeof e.text!="string"&&(s=calculateLegendItemHeight(e,n)),s}function calculateLegendItemHeight(t,e){const n=t.text?t.text.length:0;return e*n}function isListened(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(t,e,n){const s=t.legend=new Legend({ctx:t.ctx,options:n,chart:t});layouts.configure(t,s,n),layouts.addBox(t,s)},stop(t){layouts.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;layouts.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,o=n.chart;o.isDatasetVisible(s)?(o.hide(s),e.hidden=!0):(o.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:o,color:u,useBorderRadius:d,borderRadius:g}}=t.legend.options;return t._getSortedDatasetMetas().map(y=>{const v=y.controller.getStyle(n?0:void 0),w=toPadding(v.borderWidth);return{text:e[y.index].label,fillStyle:v.backgroundColor,fontColor:u,hidden:!y.visible,lineCap:v.borderCapStyle,lineDash:v.borderDash,lineDashOffset:v.borderDashOffset,lineJoin:v.borderJoinStyle,lineWidth:(w.width+w.height)/4,strokeStyle:v.borderColor,pointStyle:s||v.pointStyle,rotation:v.rotation,textAlign:o||v.textAlign,borderRadius:d&&(g||v.borderRadius),datasetIndex:y.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Title extends Element$1{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const o=isArray(s.text)?s.text.length:1;this._padding=toPadding(s.padding);const u=o*toFont(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=u:this.width=u}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:o,right:u,options:d}=this,g=d.align;let y=0,v,w,T;return this.isHorizontal()?(w=_alignStartEnd(g,s,u),T=n+e,v=u-s):(d.position==="left"?(w=s+e,T=_alignStartEnd(g,o,n),y=PI*-.5):(w=u-e,T=_alignStartEnd(g,n,o),y=PI*.5),v=o-n),{titleX:w,titleY:T,maxWidth:v,rotation:y}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=toFont(n.font),u=s.lineHeight/2+this._padding.top,{titleX:d,titleY:g,maxWidth:y,rotation:v}=this._drawArgs(u);renderText(e,n.text,0,0,s,{color:n.color,maxWidth:y,rotation:v,textAlign:_toLeftRightCenter(n.align),textBaseline:"middle",translation:[d,g]})}}function createTitle(t,e){const n=new Title({ctx:t.ctx,options:e,chart:t});layouts.configure(t,n,e),layouts.addBox(t,n),t.titleBlock=n}var plugin_title={id:"title",_element:Title,start(t,e,n){createTitle(t,n)},stop(t){const e=t.titleBlock;layouts.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;layouts.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const map=new WeakMap;var plugin_subtitle={id:"subtitle",start(t,e,n){const s=new Title({ctx:t.ctx,options:n,chart:t});layouts.configure(t,s,n),layouts.addBox(t,s),map.set(t,s)},stop(t){layouts.removeBox(t,map.get(t)),map.delete(t)},beforeUpdate(t,e,n){const s=map.get(t);layouts.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(t){if(!t.length)return!1;let e,n,s=new Set,o=0,u=0;for(e=0,n=t.length;e<n;++e){const g=t[e].element;if(g&&g.hasValue()){const y=g.tooltipPosition();s.add(y.x),o+=y.y,++u}}return u===0||s.size===0?!1:{x:[...s].reduce((g,y)=>g+y)/s.size,y:o/u}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,o=Number.POSITIVE_INFINITY,u,d,g;for(u=0,d=t.length;u<d;++u){const y=t[u].element;if(y&&y.hasValue()){const v=y.getCenterPoint(),w=distanceBetweenPoints(e,v);w<o&&(o=w,g=y)}}if(g){const y=g.tooltipPosition();n=y.x,s=y.y}return{x:n,y:s}}};function pushOrConcat(t,e){return e&&(isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function splitNewlines(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function createTooltipItem(t,e){const{element:n,datasetIndex:s,index:o}=e,u=t.getDatasetMeta(s).controller,{label:d,value:g}=u.getLabelAndValue(o);return{chart:t,label:d,parsed:u.getParsed(o),raw:t.data.datasets[s].data[o],formattedValue:g,dataset:u.getDataset(),dataIndex:o,datasetIndex:s,element:n}}function getTooltipSize(t,e){const n=t.chart.ctx,{body:s,footer:o,title:u}=t,{boxWidth:d,boxHeight:g}=e,y=toFont(e.bodyFont),v=toFont(e.titleFont),w=toFont(e.footerFont),T=u.length,A=o.length,C=s.length,j=toPadding(e.padding);let D=j.height,H=0,ne=s.reduce((ee,J)=>ee+J.before.length+J.lines.length+J.after.length,0);if(ne+=t.beforeBody.length+t.afterBody.length,T&&(D+=T*v.lineHeight+(T-1)*e.titleSpacing+e.titleMarginBottom),ne){const ee=e.displayColors?Math.max(g,y.lineHeight):y.lineHeight;D+=C*ee+(ne-C)*y.lineHeight+(ne-1)*e.bodySpacing}A&&(D+=e.footerMarginTop+A*w.lineHeight+(A-1)*e.footerSpacing);let Y=0;const U=function(ee){H=Math.max(H,n.measureText(ee).width+Y)};return n.save(),n.font=v.string,each(t.title,U),n.font=y.string,each(t.beforeBody.concat(t.afterBody),U),Y=e.displayColors?d+2+e.boxPadding:0,each(s,ee=>{each(ee.before,U),each(ee.lines,U),each(ee.after,U)}),Y=0,n.font=w.string,each(t.footer,U),n.restore(),H+=j.width,{width:H,height:D}}function determineYAlign(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function doesNotFitWithAlign(t,e,n,s){const{x:o,width:u}=s,d=n.caretSize+n.caretPadding;if(t==="left"&&o+u+d>e.width||t==="right"&&o-u-d<0)return!0}function determineXAlign(t,e,n,s){const{x:o,width:u}=n,{width:d,chartArea:{left:g,right:y}}=t;let v="center";return s==="center"?v=o<=(g+y)/2?"left":"right":o<=u/2?v="left":o>=d-u/2&&(v="right"),doesNotFitWithAlign(v,t,e,n)&&(v="center"),v}function determineAlignment(t,e,n){const s=n.yAlign||e.yAlign||determineYAlign(t,n);return{xAlign:n.xAlign||e.xAlign||determineXAlign(t,e,n,s),yAlign:s}}function alignX(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function alignY(t,e,n){let{y:s,height:o}=t;return e==="top"?s+=n:e==="bottom"?s-=o+n:s-=o/2,s}function getBackgroundPoint(t,e,n,s){const{caretSize:o,caretPadding:u,cornerRadius:d}=t,{xAlign:g,yAlign:y}=n,v=o+u,{topLeft:w,topRight:T,bottomLeft:A,bottomRight:C}=toTRBLCorners(d);let j=alignX(e,g);const D=alignY(e,y,v);return y==="center"?g==="left"?j+=v:g==="right"&&(j-=v):g==="left"?j-=Math.max(w,A)+o:g==="right"&&(j+=Math.max(T,C)+o),{x:_limitValue(j,0,s.width-e.width),y:_limitValue(D,0,s.height-e.height)}}function getAlignedX(t,e,n){const s=toPadding(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function getBeforeAfterBodyLines(t){return pushOrConcat([],splitNewlines(t))}function createTooltipContext(t,e,n){return createContext(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function overrideCallbacks(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const defaultCallbacks={beforeTitle:noop,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:noop,beforeBody:noop,beforeLabel:noop,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return isNullOrUndef(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:noop,afterBody:noop,beforeFooter:noop,footer:noop,afterFooter:noop};function invokeCallbackWithFallback(t,e,n,s){const o=t[e].call(n,s);return typeof o>"u"?defaultCallbacks[e].call(n,s):o}class Tooltip extends Element$1{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),o=s.enabled&&n.options.animation&&s.animations,u=new Animations(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,o=invokeCallbackWithFallback(s,"beforeTitle",this,e),u=invokeCallbackWithFallback(s,"title",this,e),d=invokeCallbackWithFallback(s,"afterTitle",this,e);let g=[];return g=pushOrConcat(g,splitNewlines(o)),g=pushOrConcat(g,splitNewlines(u)),g=pushOrConcat(g,splitNewlines(d)),g}getBeforeBody(e,n){return getBeforeAfterBodyLines(invokeCallbackWithFallback(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,o=[];return each(e,u=>{const d={before:[],lines:[],after:[]},g=overrideCallbacks(s,u);pushOrConcat(d.before,splitNewlines(invokeCallbackWithFallback(g,"beforeLabel",this,u))),pushOrConcat(d.lines,invokeCallbackWithFallback(g,"label",this,u)),pushOrConcat(d.after,splitNewlines(invokeCallbackWithFallback(g,"afterLabel",this,u))),o.push(d)}),o}getAfterBody(e,n){return getBeforeAfterBodyLines(invokeCallbackWithFallback(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,o=invokeCallbackWithFallback(s,"beforeFooter",this,e),u=invokeCallbackWithFallback(s,"footer",this,e),d=invokeCallbackWithFallback(s,"afterFooter",this,e);let g=[];return g=pushOrConcat(g,splitNewlines(o)),g=pushOrConcat(g,splitNewlines(u)),g=pushOrConcat(g,splitNewlines(d)),g}_createItems(e){const n=this._active,s=this.chart.data,o=[],u=[],d=[];let g=[],y,v;for(y=0,v=n.length;y<v;++y)g.push(createTooltipItem(this.chart,n[y]));return e.filter&&(g=g.filter((w,T,A)=>e.filter(w,T,A,s))),e.itemSort&&(g=g.sort((w,T)=>e.itemSort(w,T,s))),each(g,w=>{const T=overrideCallbacks(e.callbacks,w);o.push(invokeCallbackWithFallback(T,"labelColor",this,w)),u.push(invokeCallbackWithFallback(T,"labelPointStyle",this,w)),d.push(invokeCallbackWithFallback(T,"labelTextColor",this,w))}),this.labelColors=o,this.labelPointStyles=u,this.labelTextColors=d,this.dataPoints=g,g}update(e,n){const s=this.options.setContext(this.getContext()),o=this._active;let u,d=[];if(!o.length)this.opacity!==0&&(u={opacity:0});else{const g=positioners[s.position].call(this,o,this._eventPosition);d=this._createItems(s),this.title=this.getTitle(d,s),this.beforeBody=this.getBeforeBody(d,s),this.body=this.getBody(d,s),this.afterBody=this.getAfterBody(d,s),this.footer=this.getFooter(d,s);const y=this._size=getTooltipSize(this,s),v=Object.assign({},g,y),w=determineAlignment(this.chart,s,v),T=getBackgroundPoint(s,v,w,this.chart);this.xAlign=w.xAlign,this.yAlign=w.yAlign,u={opacity:1,x:T.x,y:T.y,width:y.width,height:y.height,caretX:g.x,caretY:g.y}}this._tooltipItems=d,this.$context=void 0,u&&this._resolveAnimations().update(this,u),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,o){const u=this.getCaretPosition(e,s,o);n.lineTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.lineTo(u.x3,u.y3)}getCaretPosition(e,n,s){const{xAlign:o,yAlign:u}=this,{caretSize:d,cornerRadius:g}=s,{topLeft:y,topRight:v,bottomLeft:w,bottomRight:T}=toTRBLCorners(g),{x:A,y:C}=e,{width:j,height:D}=n;let H,ne,Y,U,ee,J;return u==="center"?(ee=C+D/2,o==="left"?(H=A,ne=H-d,U=ee+d,J=ee-d):(H=A+j,ne=H+d,U=ee-d,J=ee+d),Y=H):(o==="left"?ne=A+Math.max(y,w)+d:o==="right"?ne=A+j-Math.max(v,T)-d:ne=this.caretX,u==="top"?(U=C,ee=U-d,H=ne-d,Y=ne+d):(U=C+D,ee=U+d,H=ne+d,Y=ne-d),J=U),{x1:H,x2:ne,x3:Y,y1:U,y2:ee,y3:J}}drawTitle(e,n,s){const o=this.title,u=o.length;let d,g,y;if(u){const v=getRtlAdapter(s.rtl,this.x,this.width);for(e.x=getAlignedX(this,s.titleAlign,s),n.textAlign=v.textAlign(s.titleAlign),n.textBaseline="middle",d=toFont(s.titleFont),g=s.titleSpacing,n.fillStyle=s.titleColor,n.font=d.string,y=0;y<u;++y)n.fillText(o[y],v.x(e.x),e.y+d.lineHeight/2),e.y+=d.lineHeight+g,y+1===u&&(e.y+=s.titleMarginBottom-g)}}_drawColorBox(e,n,s,o,u){const d=this.labelColors[s],g=this.labelPointStyles[s],{boxHeight:y,boxWidth:v}=u,w=toFont(u.bodyFont),T=getAlignedX(this,"left",u),A=o.x(T),C=y<w.lineHeight?(w.lineHeight-y)/2:0,j=n.y+C;if(u.usePointStyle){const D={radius:Math.min(v,y)/2,pointStyle:g.pointStyle,rotation:g.rotation,borderWidth:1},H=o.leftForLtr(A,v)+v/2,ne=j+y/2;e.strokeStyle=u.multiKeyBackground,e.fillStyle=u.multiKeyBackground,drawPoint(e,D,H,ne),e.strokeStyle=d.borderColor,e.fillStyle=d.backgroundColor,drawPoint(e,D,H,ne)}else{e.lineWidth=isObject(d.borderWidth)?Math.max(...Object.values(d.borderWidth)):d.borderWidth||1,e.strokeStyle=d.borderColor,e.setLineDash(d.borderDash||[]),e.lineDashOffset=d.borderDashOffset||0;const D=o.leftForLtr(A,v),H=o.leftForLtr(o.xPlus(A,1),v-2),ne=toTRBLCorners(d.borderRadius);Object.values(ne).some(Y=>Y!==0)?(e.beginPath(),e.fillStyle=u.multiKeyBackground,addRoundedRectPath(e,{x:D,y:j,w:v,h:y,radius:ne}),e.fill(),e.stroke(),e.fillStyle=d.backgroundColor,e.beginPath(),addRoundedRectPath(e,{x:H,y:j+1,w:v-2,h:y-2,radius:ne}),e.fill()):(e.fillStyle=u.multiKeyBackground,e.fillRect(D,j,v,y),e.strokeRect(D,j,v,y),e.fillStyle=d.backgroundColor,e.fillRect(H,j+1,v-2,y-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:o}=this,{bodySpacing:u,bodyAlign:d,displayColors:g,boxHeight:y,boxWidth:v,boxPadding:w}=s,T=toFont(s.bodyFont);let A=T.lineHeight,C=0;const j=getRtlAdapter(s.rtl,this.x,this.width),D=function(K){n.fillText(K,j.x(e.x+C),e.y+A/2),e.y+=A+u},H=j.textAlign(d);let ne,Y,U,ee,J,ie,se;for(n.textAlign=d,n.textBaseline="middle",n.font=T.string,e.x=getAlignedX(this,H,s),n.fillStyle=s.bodyColor,each(this.beforeBody,D),C=g&&H!=="right"?d==="center"?v/2+w:v+2+w:0,ee=0,ie=o.length;ee<ie;++ee){for(ne=o[ee],Y=this.labelTextColors[ee],n.fillStyle=Y,each(ne.before,D),U=ne.lines,g&&U.length&&(this._drawColorBox(n,e,ee,j,s),A=Math.max(T.lineHeight,y)),J=0,se=U.length;J<se;++J)D(U[J]),A=T.lineHeight;each(ne.after,D)}C=0,A=T.lineHeight,each(this.afterBody,D),e.y-=u}drawFooter(e,n,s){const o=this.footer,u=o.length;let d,g;if(u){const y=getRtlAdapter(s.rtl,this.x,this.width);for(e.x=getAlignedX(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=y.textAlign(s.footerAlign),n.textBaseline="middle",d=toFont(s.footerFont),n.fillStyle=s.footerColor,n.font=d.string,g=0;g<u;++g)n.fillText(o[g],y.x(e.x),e.y+d.lineHeight/2),e.y+=d.lineHeight+s.footerSpacing}}drawBackground(e,n,s,o){const{xAlign:u,yAlign:d}=this,{x:g,y}=e,{width:v,height:w}=s,{topLeft:T,topRight:A,bottomLeft:C,bottomRight:j}=toTRBLCorners(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(g+T,y),d==="top"&&this.drawCaret(e,n,s,o),n.lineTo(g+v-A,y),n.quadraticCurveTo(g+v,y,g+v,y+A),d==="center"&&u==="right"&&this.drawCaret(e,n,s,o),n.lineTo(g+v,y+w-j),n.quadraticCurveTo(g+v,y+w,g+v-j,y+w),d==="bottom"&&this.drawCaret(e,n,s,o),n.lineTo(g+C,y+w),n.quadraticCurveTo(g,y+w,g,y+w-C),d==="center"&&u==="left"&&this.drawCaret(e,n,s,o),n.lineTo(g,y+T),n.quadraticCurveTo(g,y,g+T,y),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,o=s&&s.x,u=s&&s.y;if(o||u){const d=positioners[e.position].call(this,this._active,this._eventPosition);if(!d)return;const g=this._size=getTooltipSize(this,e),y=Object.assign({},d,this._size),v=determineAlignment(n,e,y),w=getBackgroundPoint(e,y,v,n);(o._to!==w.x||u._to!==w.y)&&(this.xAlign=v.xAlign,this.yAlign=v.yAlign,this.width=g.width,this.height=g.height,this.caretX=d.x,this.caretY=d.y,this._resolveAnimations().update(this,w))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const o={width:this.width,height:this.height},u={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const d=toPadding(n.padding),g=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&g&&(e.save(),e.globalAlpha=s,this.drawBackground(u,e,o,n),overrideTextDirection(e,n.textDirection),u.y+=d.top,this.drawTitle(u,e,n),this.drawBody(u,e,n),this.drawFooter(u,e,n),restoreTextDirection(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,o=e.map(({datasetIndex:g,index:y})=>{const v=this.chart.getDatasetMeta(g);if(!v)throw new Error("Cannot find a dataset at index "+g);return{datasetIndex:g,element:v.data[y],index:y}}),u=!_elementsEqual(s,o),d=this._positionChanged(o,n);(u||d)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,u=this._active||[],d=this._getActiveElements(e,u,n,s),g=this._positionChanged(d,e),y=n||!_elementsEqual(d,u)||g;return y&&(this._active=d,(o.enabled||o.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),y}_getActiveElements(e,n,s,o){const u=this.options;if(e.type==="mouseout")return[];if(!o)return n.filter(g=>this.chart.data.datasets[g.datasetIndex]&&this.chart.getDatasetMeta(g.datasetIndex).controller.getParsed(g.index)!==void 0);const d=this.chart.getElementsAtEventForMode(e,u.mode,u,s);return u.reverse&&d.reverse(),d}_positionChanged(e,n){const{caretX:s,caretY:o,options:u}=this,d=positioners[u.position].call(this,e,n);return d!==!1&&(s!==d.x||o!==d.y)}}dn(Tooltip,"positioners",positioners);var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(t,e,n){n&&(t.tooltip=new Tooltip({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:defaultCallbacks},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},plugins=Object.freeze({__proto__:null,Colors:plugin_colors,Decimation:plugin_decimation,Filler:index,Legend:plugin_legend,SubTitle:plugin_subtitle,Title:plugin_title,Tooltip:plugin_tooltip});const addIfString=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function findOrAddLabel(t,e,n,s){const o=t.indexOf(e);if(o===-1)return addIfString(t,e,n,s);const u=t.lastIndexOf(e);return o!==u?n:o}const validIndex=(t,e)=>t===null?null:_limitValue(Math.round(t),0,e);function _getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class CategoryScale extends Scale{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:o,label:u}of n)s[o]===u&&s.splice(o,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(isNullOrUndef(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:findOrAddLabel(s,e,valueOrDefault(n,e),this._addedLabels),validIndex(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(o=this.getLabels().length-1)),this.min=s,this.max=o}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,o=[];let u=this.getLabels();u=e===0&&n===u.length-1?u:u.slice(e,n+1),this._valueRange=Math.max(u.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let d=e;d<=n;d++)o.push({value:d});return o}getLabelForValue(e){return _getLabelForValue.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}dn(CategoryScale,"id","category"),dn(CategoryScale,"defaults",{ticks:{callback:_getLabelForValue}});function generateTicks$1(t,e){const n=[],{bounds:o,step:u,min:d,max:g,precision:y,count:v,maxTicks:w,maxDigits:T,includeBounds:A}=t,C=u||1,j=w-1,{min:D,max:H}=e,ne=!isNullOrUndef(d),Y=!isNullOrUndef(g),U=!isNullOrUndef(v),ee=(H-D)/(T+1);let J=niceNum((H-D)/j/C)*C,ie,se,K,te;if(J<1e-14&&!ne&&!Y)return[{value:D},{value:H}];te=Math.ceil(H/J)-Math.floor(D/J),te>j&&(J=niceNum(te*J/j/C)*C),isNullOrUndef(y)||(ie=Math.pow(10,y),J=Math.ceil(J*ie)/ie),o==="ticks"?(se=Math.floor(D/J)*J,K=Math.ceil(H/J)*J):(se=D,K=H),ne&&Y&&u&&almostWhole((g-d)/u,J/1e3)?(te=Math.round(Math.min((g-d)/J,w)),J=(g-d)/te,se=d,K=g):U?(se=ne?d:se,K=Y?g:K,te=v-1,J=(K-se)/te):(te=(K-se)/J,almostEquals(te,Math.round(te),J/1e3)?te=Math.round(te):te=Math.ceil(te));const re=Math.max(_decimalPlaces(J),_decimalPlaces(se));ie=Math.pow(10,isNullOrUndef(y)?re:y),se=Math.round(se*ie)/ie,K=Math.round(K*ie)/ie;let ce=0;for(ne&&(A&&se!==d?(n.push({value:d}),se<d&&ce++,almostEquals(Math.round((se+ce*J)*ie)/ie,d,relativeLabelSize(d,ee,t))&&ce++):se<d&&ce++);ce<te;++ce){const le=Math.round((se+ce*J)*ie)/ie;if(Y&&le>g)break;n.push({value:le})}return Y&&A&&K!==g?n.length&&almostEquals(n[n.length-1].value,g,relativeLabelSize(g,ee,t))?n[n.length-1].value=g:n.push({value:g}):(!Y||K===g)&&n.push({value:K}),n}function relativeLabelSize(t,e,{horizontal:n,minRotation:s}){const o=toRadians(s),u=(n?Math.sin(o):Math.cos(o))||.001,d=.75*e*(""+t).length;return Math.min(e/u,d)}class LinearScaleBase extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return isNullOrUndef(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:o,max:u}=this;const d=y=>o=n?o:y,g=y=>u=s?u:y;if(e){const y=sign(o),v=sign(u);y<0&&v<0?g(0):y>0&&v>0&&d(0)}if(o===u){let y=u===0?1:Math.abs(u*.05);g(u+y),e||d(o-y)}this.min=o,this.max=u}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,o;return s?(o=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),n=n||11),n&&(o=Math.min(n,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const o={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},u=this._range||this,d=generateTicks$1(o,u);return e.bounds==="ticks"&&_setMinAndMaxByKey(d,this,"value"),e.reverse?(d.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),d}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const o=(s-n)/Math.max(e.length-1,1)/2;n-=o,s+=o}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return formatNumber(e,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=isNumberFinite(e)?e:0,this.max=isNumberFinite(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=toRadians(this.options.ticks.minRotation),o=(e?Math.sin(s):Math.cos(s))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,u.lineHeight/o))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}dn(LinearScale,"id","linear"),dn(LinearScale,"defaults",{ticks:{callback:Ticks.formatters.numeric}});const log10Floor=t=>Math.floor(log10(t)),changeExponent=(t,e)=>Math.pow(10,log10Floor(t)+e);function isMajor(t){return t/Math.pow(10,log10Floor(t))===1}function steps(t,e,n){const s=Math.pow(10,n),o=Math.floor(t/s);return Math.ceil(e/s)-o}function startExp(t,e){const n=e-t;let s=log10Floor(n);for(;steps(t,e,s)>10;)s++;for(;steps(t,e,s)<10;)s--;return Math.min(s,log10Floor(t))}function generateTicks(t,{min:e,max:n}){e=finiteOrDefault(t.min,e);const s=[],o=log10Floor(e);let u=startExp(e,n),d=u<0?Math.pow(10,Math.abs(u)):1;const g=Math.pow(10,u),y=o>u?Math.pow(10,o):0,v=Math.round((e-y)*d)/d,w=Math.floor((e-y)/g/10)*g*10;let T=Math.floor((v-w)/Math.pow(10,u)),A=finiteOrDefault(t.min,Math.round((y+w+T*Math.pow(10,u))*d)/d);for(;A<n;)s.push({value:A,major:isMajor(A),significand:T}),T>=10?T=T<15?15:20:T++,T>=20&&(u++,T=2,d=u>=0?1:d),A=Math.round((y+w+T*Math.pow(10,u))*d)/d;const C=finiteOrDefault(t.max,A);return s.push({value:C,major:isMajor(C),significand:T}),s}class LogarithmicScale extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const s=LinearScaleBase.prototype.parse.apply(this,[e,n]);if(s===0){this._zero=!0;return}return isNumberFinite(s)&&s>0?s:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=isNumberFinite(e)?Math.max(0,e):null,this.max=isNumberFinite(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!isNumberFinite(this._userMin)&&(this.min=e===changeExponent(this.min,0)?changeExponent(this.min,-1):changeExponent(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let s=this.min,o=this.max;const u=g=>s=e?s:g,d=g=>o=n?o:g;s===o&&(s<=0?(u(1),d(10)):(u(changeExponent(s,-1)),d(changeExponent(o,1)))),s<=0&&u(changeExponent(o,-1)),o<=0&&d(changeExponent(s,1)),this.min=s,this.max=o}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},s=generateTicks(n,this);return e.bounds==="ticks"&&_setMinAndMaxByKey(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(e){return e===void 0?"0":formatNumber(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=log10(e),this._valueRange=log10(this.max)-log10(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(log10(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}dn(LogarithmicScale,"id","logarithmic"),dn(LogarithmicScale,"defaults",{ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}});function getTickBackdropHeight(t){const e=t.ticks;if(e.display&&t.display){const n=toPadding(e.backdropPadding);return valueOrDefault(e.font&&e.font.size,defaults.font.size)+n.height}return 0}function measureLabelSize(t,e,n){return n=isArray(n)?n:[n],{w:_longestText(t,e.string,n),h:n.length*e.lineHeight}}function determineLimits(t,e,n,s,o){return t===s||t===o?{start:e-n/2,end:e+n/2}:t<s||t>o?{start:e-n,end:e}:{start:e,end:e+n}}function fitWithPointLabels(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),s=[],o=[],u=t._pointLabels.length,d=t.options.pointLabels,g=d.centerPointLabels?PI/u:0;for(let y=0;y<u;y++){const v=d.setContext(t.getPointLabelContext(y));o[y]=v.padding;const w=t.getPointPosition(y,t.drawingArea+o[y],g),T=toFont(v.font),A=measureLabelSize(t.ctx,T,t._pointLabels[y]);s[y]=A;const C=_normalizeAngle(t.getIndexAngle(y)+g),j=Math.round(toDegrees(C)),D=determineLimits(j,w.x,A.w,0,180),H=determineLimits(j,w.y,A.h,90,270);updateLimits(n,e,C,D,H)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=buildPointLabelItems(t,s,o)}function updateLimits(t,e,n,s,o){const u=Math.abs(Math.sin(n)),d=Math.abs(Math.cos(n));let g=0,y=0;s.start<e.l?(g=(e.l-s.start)/u,t.l=Math.min(t.l,e.l-g)):s.end>e.r&&(g=(s.end-e.r)/u,t.r=Math.max(t.r,e.r+g)),o.start<e.t?(y=(e.t-o.start)/d,t.t=Math.min(t.t,e.t-y)):o.end>e.b&&(y=(o.end-e.b)/d,t.b=Math.max(t.b,e.b+y))}function createPointLabelItem(t,e,n){const s=t.drawingArea,{extra:o,additionalAngle:u,padding:d,size:g}=n,y=t.getPointPosition(e,s+o+d,u),v=Math.round(toDegrees(_normalizeAngle(y.angle+HALF_PI))),w=yForAngle(y.y,g.h,v),T=getTextAlignForAngle(v),A=leftForTextAlign(y.x,g.w,T);return{visible:!0,x:y.x,y:w,textAlign:T,left:A,top:w,right:A+g.w,bottom:w+g.h}}function isNotOverlapped(t,e){if(!e)return!0;const{left:n,top:s,right:o,bottom:u}=t;return!(_isPointInArea({x:n,y:s},e)||_isPointInArea({x:n,y:u},e)||_isPointInArea({x:o,y:s},e)||_isPointInArea({x:o,y:u},e))}function buildPointLabelItems(t,e,n){const s=[],o=t._pointLabels.length,u=t.options,{centerPointLabels:d,display:g}=u.pointLabels,y={extra:getTickBackdropHeight(u)/2,additionalAngle:d?PI/o:0};let v;for(let w=0;w<o;w++){y.padding=n[w],y.size=e[w];const T=createPointLabelItem(t,w,y);s.push(T),g==="auto"&&(T.visible=isNotOverlapped(T,v),T.visible&&(v=T))}return s}function getTextAlignForAngle(t){return t===0||t===180?"center":t<180?"left":"right"}function leftForTextAlign(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function yForAngle(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function drawPointLabelBox(t,e,n){const{left:s,top:o,right:u,bottom:d}=n,{backdropColor:g}=e;if(!isNullOrUndef(g)){const y=toTRBLCorners(e.borderRadius),v=toPadding(e.backdropPadding);t.fillStyle=g;const w=s-v.left,T=o-v.top,A=u-s+v.width,C=d-o+v.height;Object.values(y).some(j=>j!==0)?(t.beginPath(),addRoundedRectPath(t,{x:w,y:T,w:A,h:C,radius:y}),t.fill()):t.fillRect(w,T,A,C)}}function drawPointLabels(t,e){const{ctx:n,options:{pointLabels:s}}=t;for(let o=e-1;o>=0;o--){const u=t._pointLabelItems[o];if(!u.visible)continue;const d=s.setContext(t.getPointLabelContext(o));drawPointLabelBox(n,d,u);const g=toFont(d.font),{x:y,y:v,textAlign:w}=u;renderText(n,t._pointLabels[o],y,v+g.lineHeight/2,g,{color:d.color,textAlign:w,textBaseline:"middle"})}}function pathRadiusLine(t,e,n,s){const{ctx:o}=t;if(n)o.arc(t.xCenter,t.yCenter,e,0,TAU);else{let u=t.getPointPosition(0,e);o.moveTo(u.x,u.y);for(let d=1;d<s;d++)u=t.getPointPosition(d,e),o.lineTo(u.x,u.y)}}function drawRadiusLine(t,e,n,s,o){const u=t.ctx,d=e.circular,{color:g,lineWidth:y}=e;!d&&!s||!g||!y||n<0||(u.save(),u.strokeStyle=g,u.lineWidth=y,u.setLineDash(o.dash||[]),u.lineDashOffset=o.dashOffset,u.beginPath(),pathRadiusLine(t,n,d,s),u.closePath(),u.stroke(),u.restore())}function createPointLabelContext(t,e,n){return createContext(t,{label:n,index:e,type:"pointLabel"})}class RadialLinearScale extends LinearScaleBase{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=toPadding(getTickBackdropHeight(this.options)/2),n=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=isNumberFinite(e)&&!isNaN(e)?e:0,this.max=isNumberFinite(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(e){LinearScaleBase.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,s)=>{const o=callback(this.options.pointLabels.callback,[n,s],this);return o||o===0?o:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,s,o){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((s-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,s,o))}getIndexAngle(e){const n=TAU/(this._pointLabels.length||1),s=this.options.startAngle||0;return _normalizeAngle(e*n+toRadians(s))}getDistanceFromCenterForValue(e){if(isNullOrUndef(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(isNullOrUndef(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const s=n[e];return createPointLabelContext(this.getContext(),e,s)}}getPointPosition(e,n,s=0){const o=this.getIndexAngle(e)-HALF_PI+s;return{x:Math.cos(o)*n+this.xCenter,y:Math.sin(o)*n+this.yCenter,angle:o}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:s,right:o,bottom:u}=this._pointLabelItems[e];return{left:n,top:s,right:o,bottom:u}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:s,grid:o,border:u}=n,d=this._pointLabels.length;let g,y,v;if(n.pointLabels.display&&drawPointLabels(this,d),o.display&&this.ticks.forEach((w,T)=>{if(T!==0||T===0&&this.min<0){y=this.getDistanceFromCenterForValue(w.value);const A=this.getContext(T),C=o.setContext(A),j=u.setContext(A);drawRadiusLine(this,C,y,d,j)}}),s.display){for(e.save(),g=d-1;g>=0;g--){const w=s.setContext(this.getPointLabelContext(g)),{color:T,lineWidth:A}=w;!A||!T||(e.lineWidth=A,e.strokeStyle=T,e.setLineDash(w.borderDash),e.lineDashOffset=w.borderDashOffset,y=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),v=this.getPointPosition(g,y),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(v.x,v.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const o=this.getIndexAngle(0);let u,d;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(o),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((g,y)=>{if(y===0&&this.min>=0&&!n.reverse)return;const v=s.setContext(this.getContext(y)),w=toFont(v.font);if(u=this.getDistanceFromCenterForValue(this.ticks[y].value),v.showLabelBackdrop){e.font=w.string,d=e.measureText(g.label).width,e.fillStyle=v.backdropColor;const T=toPadding(v.backdropPadding);e.fillRect(-d/2-T.left,-u-w.size/2-T.top,d+T.width,w.size+T.height)}renderText(e,g.label,0,-u,w,{color:v.color,strokeColor:v.textStrokeColor,strokeWidth:v.textStrokeWidth})}),e.restore()}drawTitle(){}}dn(RadialLinearScale,"id","radialLinear"),dn(RadialLinearScale,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),dn(RadialLinearScale,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),dn(RadialLinearScale,"descriptors",{angleLines:{_fallback:"grid"}});const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(t,e){return t-e}function parse(t,e){if(isNullOrUndef(e))return null;const n=t._adapter,{parser:s,round:o,isoWeekday:u}=t._parseOpts;let d=e;return typeof s=="function"&&(d=s(d)),isNumberFinite(d)||(d=typeof s=="string"?n.parse(d,s):n.parse(d)),d===null?null:(o&&(d=o==="week"&&(isNumber(u)||u===!0)?n.startOf(d,"isoWeek",u):n.startOf(d,o)),+d)}function determineUnitForAutoTicks(t,e,n,s){const o=UNITS.length;for(let u=UNITS.indexOf(t);u<o-1;++u){const d=INTERVALS[UNITS[u]],g=d.steps?d.steps:Number.MAX_SAFE_INTEGER;if(d.common&&Math.ceil((n-e)/(g*d.size))<=s)return UNITS[u]}return UNITS[o-1]}function determineUnitForFormatting(t,e,n,s,o){for(let u=UNITS.length-1;u>=UNITS.indexOf(n);u--){const d=UNITS[u];if(INTERVALS[d].common&&t._adapter.diff(o,s,d)>=e-1)return d}return UNITS[n?UNITS.indexOf(n):0]}function determineMajorUnit(t){for(let e=UNITS.indexOf(t)+1,n=UNITS.length;e<n;++e)if(INTERVALS[UNITS[e]].common)return UNITS[e]}function addTick(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:o}=_lookup(n,e),u=n[s]>=e?n[s]:n[o];t[u]=!0}}function setMajorTicks(t,e,n,s){const o=t._adapter,u=+o.startOf(e[0].value,s),d=e[e.length-1].value;let g,y;for(g=u;g<=d;g=+o.add(g,1,s))y=n[g],y>=0&&(e[y].major=!0);return e}function ticksFromTimestamps(t,e,n){const s=[],o={},u=e.length;let d,g;for(d=0;d<u;++d)g=e[d],o[g]=d,s.push({value:g,major:!1});return u===0||!n?s:setMajorTicks(t,s,o,n)}class TimeScale extends Scale{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),o=this._adapter=new adapters._date(e.adapters.date);o.init(n),mergeIf(s.displayFormats,o.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:parse(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:o,max:u,minDefined:d,maxDefined:g}=this.getUserBounds();function y(v){!d&&!isNaN(v.min)&&(o=Math.min(o,v.min)),!g&&!isNaN(v.max)&&(u=Math.max(u,v.max))}(!d||!g)&&(y(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&y(this.getMinMax(!1))),o=isNumberFinite(o)&&!isNaN(o)?o:+n.startOf(Date.now(),s),u=isNumberFinite(u)&&!isNaN(u)?u:+n.endOf(Date.now(),s)+1,this.min=Math.min(o,u-1),this.max=Math.max(o+1,u)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,o=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const u=this.min,d=this.max,g=_filterBetween(o,u,d);return this._unit=n.unit||(s.autoSkip?determineUnitForAutoTicks(n.minUnit,this.min,this.max,this._getLabelCapacity(u)):determineUnitForFormatting(this,g.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets(o),e.reverse&&g.reverse(),ticksFromTimestamps(this,g,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,o,u;this.options.offset&&e.length&&(o=this.getDecimalForValue(e[0]),e.length===1?n=1-o:n=(this.getDecimalForValue(e[1])-o)/2,u=this.getDecimalForValue(e[e.length-1]),e.length===1?s=u:s=(u-this.getDecimalForValue(e[e.length-2]))/2);const d=e.length<3?.5:.25;n=_limitValue(n,0,d),s=_limitValue(s,0,d),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,o=this.options,u=o.time,d=u.unit||determineUnitForAutoTicks(u.minUnit,n,s,this._getLabelCapacity(n)),g=valueOrDefault(o.ticks.stepSize,1),y=d==="week"?u.isoWeekday:!1,v=isNumber(y)||y===!0,w={};let T=n,A,C;if(v&&(T=+e.startOf(T,"isoWeek",y)),T=+e.startOf(T,v?"day":d),e.diff(s,n,d)>1e5*g)throw new Error(n+" and "+s+" are too far apart with stepSize of "+g+" "+d);const j=o.ticks.source==="data"&&this.getDataTimestamps();for(A=T,C=0;A<s;A=+e.add(A,g,d),C++)addTick(w,A,j);return(A===s||o.bounds==="ticks"||C===1)&&addTick(w,A,j),Object.keys(w).sort(sorter).map(D=>+D)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const o=this.options.time.displayFormats,u=this._unit,d=n||o[u];return this._adapter.format(e,d)}_tickFormatFunction(e,n,s,o){const u=this.options,d=u.ticks.callback;if(d)return callback(d,[e,n,s],this);const g=u.time.displayFormats,y=this._unit,v=this._majorUnit,w=y&&g[y],T=v&&g[v],A=s[n],C=v&&T&&A&&A.major;return this._adapter.format(e,o||(C?T:w))}generateTickLabels(e){let n,s,o;for(n=0,s=e.length;n<s;++n)o=e[n],o.label=this._tickFormatFunction(o.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,o=toRadians(this.isHorizontal()?n.maxRotation:n.minRotation),u=Math.cos(o),d=Math.sin(o),g=this._resolveTickFontOptions(0).size;return{w:s*u+g*d,h:s*d+g*u}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,o=s[n.unit]||s.millisecond,u=this._tickFormatFunction(e,0,ticksFromTimestamps(this,[e],this._majorUnit),o),d=this._getLabelSize(u),g=Math.floor(this.isHorizontal()?this.width/d.w:this.height/d.h)-1;return g>0?g:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,s=o.length;n<s;++n)e=e.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const o=this.getLabels();for(n=0,s=o.length;n<s;++n)e.push(parse(this,o[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _arrayUnique(e.sort(sorter))}}dn(TimeScale,"id","time"),dn(TimeScale,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function interpolate(t,e,n){let s=0,o=t.length-1,u,d,g,y;n?(e>=t[s].pos&&e<=t[o].pos&&({lo:s,hi:o}=_lookupByKey(t,"pos",e)),{pos:u,time:g}=t[s],{pos:d,time:y}=t[o]):(e>=t[s].time&&e<=t[o].time&&({lo:s,hi:o}=_lookupByKey(t,"time",e)),{time:u,pos:g}=t[s],{time:d,pos:y}=t[o]);const v=d-u;return v?g+(y-g)*(e-u)/v:g}class TimeSeriesScale extends TimeScale{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=interpolate(n,this.min),this._tableRange=interpolate(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,o=[],u=[];let d,g,y,v,w;for(d=0,g=e.length;d<g;++d)v=e[d],v>=n&&v<=s&&o.push(v);if(o.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(d=0,g=o.length;d<g;++d)w=o[d+1],y=o[d-1],v=o[d],Math.round((w+y)/2)!==v&&u.push({time:v,pos:d/(g-1)});return u}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((o,u)=>o-u)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(interpolate(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return interpolate(this._table,s*this._tableRange+this._minPos,!0)}}dn(TimeSeriesScale,"id","timeseries"),dn(TimeSeriesScale,"defaults",TimeScale.defaults);var scales=Object.freeze({__proto__:null,CategoryScale,LinearScale,LogarithmicScale,RadialLinearScale,TimeScale,TimeSeriesScale});const registerables=[controllers,elements,plugins,scales];Chart.register(...registerables);const initialImageGeneratorConfigs$2={quadrada:{canvasWidth:1080,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:921,logoY:31,logoSize:123,placarX:92,placarY:-75,placarSize:600,jogadorX:484,jogadorY:100,jogadorSize:950,footerX:198,footerY:980,footerSize:1,pieChartX:215,pieChartY:325,pieChartSize:355,pieChartLegendX:195,pieChartLegendY:760,pieChartLegendSize:1.7500000000000007},vertical:{canvasWidth:1080,canvasHeight:1920,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:865,logoY:203,logoSize:175,placarX:40,placarY:117,placarSize:785,jogadorX:505,jogadorY:407,jogadorSize:950,footerX:190,footerY:1445,footerSize:1.4500000000000004,pieChartX:230,pieChartY:615,pieChartSize:415,pieChartLegendX:195,pieChartLegendY:1165,pieChartLegendSize:2.000000000000001},horizontal:{canvasWidth:1920,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1920,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,jogadorX:175,jogadorY:100,jogadorSize:950,footerX:30,footerY:1005,footerSize:1,pieChartX:960,pieChartY:600,pieChartSize:280,pieChartLegendX:960,pieChartLegendY:900,pieChartLegendSize:1}},ConfrontoGenerator$1=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{const{baseImages:o}=useImages(),[u,d]=reactExports.useState(initialImageGeneratorConfigs$2),g=reactExports.useRef(null),y=reactExports.useRef(null),v=reactExports.useRef(null),w=reactExports.useRef(null),[T,A]=reactExports.useState(["background","jogador","placar","grafico","legenda","logo","info"]),[C,j]=reactExports.useState(null),[D,H]=reactExports.useState("quadrada"),[ne,Y]=reactExports.useState(null),U=reactExports.useRef(null),[ee,J]=reactExports.useState(1),[ie,se]=reactExports.useState(!1),[K,te]=reactExports.useState(!1),[re,ce]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null}),[le,ue]=reactExports.useState({homeWins:0,draws:0,awayWins:0}),_e=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Arte e Jogador",icon:Palette,description:"Selecione a arte e o jogador"},{id:3,title:"Dados do Confronto",icon:ChartPie,description:"Insira o histórico"},{id:4,title:"Gerar Imagem",icon:Image$2,description:"Ajuste e gere a imagem"}],[Ee,we]=reactExports.useState(!1),[de,me]=reactExports.useState(!1),xe=je=>{switch(je){case 2:return Ee;case 3:return de;case 4:return le.homeWins+le.draws+le.awayWins>0;default:return!0}},pe=()=>{ee===1&&U.current&&!U.current.canProceed&&!U.current.submitManualData()||J(je=>je+1)},ve=je=>{const De=new Date(je.fixture.date),Ie=convertToSaoPauloTime(De),Re={homeTeam:je.teams.home.name,awayTeam:je.teams.away.name,competition:formatCompetitionRound(je,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:je.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:je.fixture.referee||"",stadium:je.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(Ie),competitionRound:formatCompetitionRound(je,e)};Y(je),ce(Ne=>({...Ne,matchData:Re}))},Oe=(je,De,Ie)=>{ce(Re=>({...Re,gameArt:je,featuredPlayer:De,featuredPlayerImageUrl:Ie})),me(!!je&&!!De)},Te=(je,De)=>{const Ie=je.target.value.replace(/[^0-9]/g,"");ue(Re=>({...Re,[De]:Number(Ie)}))},Le=reactExports.useCallback(je=>new Promise((De,Ie)=>{const Re=new Image;Re.crossOrigin="anonymous",Re.onload=()=>De(Re),Re.onerror=()=>Ie(new Error(`Falha ao carregar imagem: ${je}`)),Re.src=je}),[]),Me=reactExports.useCallback(async(je,De,Ie)=>{var Lt,Dt,Gt,Ke,rt;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const Re=je.current;if(!Re)return;const Ne=Re.getContext("2d");if(!Ne)return;Re.width=De.canvasWidth,Re.height=De.canvasHeight,Ne.clearRect(0,0,Re.width,Re.height);const Ue=((Lt=re.matchData)==null?void 0:Lt.homeTeam)==="Liverpool"?"#d32f2f":"#757575",pt="#1ae9de",Ze=((Dt=re.matchData)==null?void 0:Dt.awayTeam)==="Liverpool"?"#d32f2f":"#757575",mn=Ct=>{Ct.shadowColor="rgba(0, 0, 0, 0.8)",Ct.shadowOffsetX=2,Ct.shadowOffsetY=2,Ct.shadowBlur=5},Ut=Ct=>{Ct.shadowColor="transparent",Ct.shadowOffsetX=0,Ct.shadowOffsetY=0,Ct.shadowBlur=0};for(const Ct of Ie)if(Ct==="background")try{const tt=(Gt=o.find(Et=>Et.type===D&&Et.section==="confronto"))==null?void 0:Gt.url;if(tt){const Et=await Le(tt),un=Et.height/Et.width,hn=De.backgroundSize,xn=hn*un;Ne.drawImage(Et,De.backgroundX,De.backgroundY,hn,xn)}}catch(tt){console.warn(tt)}else if(Ct==="logo")try{const tt=await Le("/caminhantes-clock.png");Ne.drawImage(tt,De.logoX,De.logoY,De.logoSize,De.logoSize)}catch(tt){console.error(tt)}else if(Ct==="placar"&&re.gameArt){if(w.current){se(!0);try{const tt=await domtoimage.toPng(w.current,{quality:1,bgcolor:void 0}),Et=new Image;Et.src=tt,await new Promise((un,hn)=>{Et.onload=()=>un(),Et.onerror=xn=>hn(xn)}),Ne.drawImage(Et,De.placarX,De.placarY,De.placarSize,De.placarSize*(720/1280)),te(!0)}catch(tt){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",tt)}finally{se(!1)}}}else if(Ct==="jogador"&&re.featuredPlayerImageUrl)try{const tt=await Le(re.featuredPlayerImageUrl),Et=1062/666,un=De.jogadorSize,hn=un*Et;Ne.drawImage(tt,De.jogadorX,De.jogadorY,un,hn)}catch(tt){console.error(tt)}else if(Ct==="grafico"){mn(Ne);const{homeWins:tt,draws:Et,awayWins:un}=le;if(tt+Et+un>0){const xn=document.createElement("canvas"),Dn=500;xn.width=Dn,xn.height=Dn,new Chart(xn,{type:"pie",data:{labels:[`Vitórias ${((Ke=re.matchData)==null?void 0:Ke.homeTeam)||"Casa"}`,"Empates",`Vitórias ${((rt=re.matchData)==null?void 0:rt.awayTeam)||"Visitante"}`],datasets:[{data:[tt,Et,un],backgroundColor:[Ue,pt,Ze],borderColor:"#ffffff",borderWidth:4}]},options:{animation:{duration:0},responsive:!1,plugins:{legend:{display:!1}}}}),await new Promise(Sn=>setTimeout(Sn,50)),Ne.drawImage(xn,De.pieChartX,De.pieChartY,De.pieChartSize,De.pieChartSize)}Ut(Ne)}else if(Ct==="legenda"){mn(Ne);const{homeWins:tt,draws:Et,awayWins:un}=le;if(tt+Et+un>0){const xn=De.pieChartLegendSize,Dn=20*xn,Sn=18*xn,Hn=30*xn,Pn=De.pieChartLegendX;let Gn=De.pieChartLegendY;Ne.font=`600 ${Dn}px "Funnel Display", sans-serif`,Ne.textAlign="left",Ne.textBaseline="middle";const Xn=[{label:`Vitórias ${ne==null?void 0:ne.teams.home.name}: ${tt}`,color:Ue},{label:`Empates: ${Et}`,color:pt},{label:`Vitórias ${ne==null?void 0:ne.teams.away.name}: ${un}`,color:Ze}];for(const kn of Xn)Ne.fillStyle=kn.color,Ne.fillRect(Pn,Gn-Sn/2,Sn,Sn),Ne.fillStyle="#FFFFFF",Ne.fillText(kn.label,Pn+Sn+10*xn,Gn),Gn+=Hn}Ut(Ne)}else if(Ct==="info"&&re.matchData){mn(Ne),Ne.fillStyle="#FFFFFF";const tt=20;Ne.font=`800 ${tt}px "Funnel Display", sans-serif`,Ne.textAlign="center";const{stadium:Et,date:un,referee:hn,competitionRound:xn}=re.matchData,Dn=[xn.toUpperCase()];hn&&Dn.push(`ÁRBITRO: ${hn.toUpperCase()}`);const Sn=Dn.join(" - "),Hn=`${Et.toUpperCase()} - ${un.toUpperCase()}`,Pn=Re.width/2,Gn=De.footerY,Xn=tt*1.4,kn=Gn+Xn,Ms=25;Ne.fillText(Sn,Pn,Gn+Ms),Ne.fillText(Hn,Pn,kn+Ms),Ut(Ne)}},[re,le,o,D,Le]),Ce=reactExports.useCallback(()=>{if(ee!==4||!g.current||!y.current||!v.current)return;se(!0);const je=u[D],De=C?T.indexOf(C):-1,Ie=De>-1?T.slice(0,De):T,Re=De>-1?[T[De]]:[],Ne=De>-1?T.slice(De+1):[];Promise.all([Me(g,je,Ie),Me(y,je,Re),Me(v,je,Ne)]).finally(()=>{se(!1),te(!0)})},[ee,u,D,C,T,Me]);reactExports.useEffect(()=>{Ce()},[Ce]),reactExports.useEffect(()=>{if(ee!==4||!C||!y.current)return;const je=u[D];Me(y,je,[C])},[u,C,D,ee,Me]);const be=()=>{const je=document.createElement("canvas"),De=u[D];je.width=De.canvasWidth,je.height=De.canvasHeight;const Ie=je.getContext("2d");if(!Ie||!g.current||!y.current||!v.current)return;Ie.drawImage(g.current,0,0),Ie.drawImage(y.current,0,0),Ie.drawImage(v.current,0,0);const Re=document.createElement("a");Re.href=je.toDataURL("image/png"),Re.download=`confronto-${D}.png`,Re.click()},Ve=(je,De)=>{C&&d(Ie=>{const Re=`${C}X`,Ne=`${C}Y`,Ue={...Ie[D]};return je==="x"&&Re in Ue?Ue[Re]+=De:je==="y"&&Ne in Ue&&(Ue[Ne]+=De),{...Ie,[D]:Ue}})},$e=je=>{C&&d(De=>{const Ie=`${C}Size`,Re={...De[D]};return Ie in Re&&(Ie==="footerSize"||Ie==="pieChartLegendSize"?Re[Ie]+=je/100:Re[Ie]+=je),{...De,[D]:Re}})},Fe=je=>{xe(je)&&J(je)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Confronto Direto"}),ne&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:w,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:ne,homeScore:null,homePenScore:null,awayScore:null,awayPenScore:null})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:_e,currentStep:ee,onStepClick:Fe,canAdvanceToStep:xe}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[ee===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:U,onMatchSelected:ve,escalacaoData:{...re,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:we,translations:e}),ee===2&&jsxRuntimeExports.jsx(GameArtSelector,{onArtSelect:Oe,escalacaoData:{...re,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},setEscalacaoData:je=>{let De;if(typeof je=="function"){const Ie={...re,formation:null,selectedPlayers:{},reservePlayers:[],coach:""};De=je(Ie)}else De=je;ce(Ie=>({...Ie,gameArt:De.gameArt,featuredPlayer:De.featuredPlayer,featuredPlayerImageUrl:De.featuredPlayerImageUrl})),me(!!De.gameArt&&!!De.featuredPlayer)}}),ee===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-medium text-center",children:"Histórico do Confronto"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Vitórias ",ne==null?void 0:ne.teams.home.name]}),jsxRuntimeExports.jsx("input",{type:"text",value:le.homeWins||"",onChange:je=>Te(je,"homeWins"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Empates"}),jsxRuntimeExports.jsx("input",{type:"text",value:le.draws||"",onChange:je=>Te(je,"draws"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Vitórias ",ne==null?void 0:ne.teams.away.name]}),jsxRuntimeExports.jsx("input",{type:"text",value:le.awayWins||"",onChange:je=>Te(je,"awayWins"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"})]})]})]}),ee===4&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:D,onChange:je=>H(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:C??"",onChange:je=>j(je.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),T.map(je=>jsxRuntimeExports.jsx("option",{value:je,className:"capitalize",children:je.replace(/([A-Z])/g," $1")},je))]})]}),C&&jsxRuntimeExports.jsx(PositionController,{elementName:C,onMove:Ve,onResize:$e}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:T,setRenderOrder:A})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${u[D].canvasHeight/u[D].canvasWidth*100}%`},children:[g,y,v].map((je,De)=>jsxRuntimeExports.jsx("canvas",{ref:je,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:De+1}},De))})})]}),ne&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"confronto",match:ne,translations:e,confrontoData:le}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-4",children:[jsxRuntimeExports.jsx(Button,{onClick:Ce,disabled:ie,className:"bg-red-600 hover:bg-red-700 text-white",children:ie?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),K&&jsxRuntimeExports.jsxs(Button,{onClick:be,disabled:ie,variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${ee===1?"justify-end":"justify-between"} mt-6`,children:[ee>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>J(je=>je-1),variant:"outline",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),ee<4&&jsxRuntimeExports.jsxs(Button,{onClick:pe,disabled:!xe(ee+1),className:"bg-red-600 hover:bg-red-700 text-white",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},GAME_ART_LABELS={INICIO_JOGO:"Início de Jogo",INTERVALO:"Intervalo",INICIO_SEGUNDO_TEMPO:"Início do Segundo Tempo",FIM_DE_JOGO:"Fim de Jogo",INICIO_PRORROGACAO:"Início da Prorrogação",INICIO_SEGUNDO_TEMPO_PRORROGACAO:"Início do Segundo Tempo da Prorrogação",GOL:"Gol",SUBSTITUICAO:"Substituição"},GAME_ART_TO_IMAGE_SECTION={INICIO_JOGO:"inicio_jogo",INTERVALO:"intervalo",INICIO_SEGUNDO_TEMPO:"inicio_segundo_tempo",FIM_DE_JOGO:"fim_de_jogo",INICIO_PRORROGACAO:"inicio_prorrogacao",INICIO_SEGUNDO_TEMPO_PRORROGACAO:"inicio_segundo_tempo_prorrogacao",GOL:"gol",SUBSTITUICAO:"substituicao"},GameArtTypeSelector=({selectedArtType:t,onArtTypeSelect:e})=>{var s;const n=[{type:"INICIO_JOGO",icon:jsxRuntimeExports.jsx(Play,{className:"w-6 h-6"}),description:"Arte para o início da partida",color:"bg-green-500 hover:bg-green-600 border-green-200"},{type:"INTERVALO",icon:jsxRuntimeExports.jsx(Coffee,{className:"w-6 h-6"}),description:"Arte para o intervalo do jogo",color:"bg-orange-500 hover:bg-orange-600 border-orange-200"},{type:"INICIO_SEGUNDO_TEMPO",icon:jsxRuntimeExports.jsx(RotateCcw,{className:"w-6 h-6"}),description:"Arte para o início do segundo tempo",color:"bg-blue-500 hover:bg-blue-600 border-blue-200"},{type:"FIM_DE_JOGO",icon:jsxRuntimeExports.jsx(Trophy,{className:"w-6 h-6"}),description:"Arte para o final da partida",color:"bg-red-500 hover:bg-red-600 border-red-200"},{type:"INICIO_PRORROGACAO",icon:jsxRuntimeExports.jsx(Clock,{className:"w-6 h-6"}),description:"Arte para o início da prorrogação",color:"bg-purple-500 hover:bg-purple-600 border-purple-200"},{type:"INICIO_SEGUNDO_TEMPO_PRORROGACAO",icon:jsxRuntimeExports.jsx(Clock,{className:"w-6 h-6"}),description:"Arte para o segundo tempo da prorrogação",color:"bg-indigo-500 hover:bg-indigo-600 border-indigo-200"},{type:"GOL",icon:jsxRuntimeExports.jsx(Target,{className:"w-6 h-6"}),description:"Arte para comemorar um gol",color:"bg-yellow-500 hover:bg-yellow-600 border-yellow-200"},{type:"SUBSTITUICAO",icon:jsxRuntimeExports.jsx(ArrowLeftRight,{className:"w-6 h-6"}),description:"Arte para mostrar substituições",color:"bg-cyan-500 hover:bg-cyan-600 border-cyan-200"}];return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-2",children:"Tipo de Arte"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Escolha o momento da partida que deseja destacar"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(o=>jsxRuntimeExports.jsxs("button",{onClick:()=>e(o.type),disabled:o.disabled,className:`
              relative p-4 rounded-lg border-2 transition-all duration-200 text-left
              ${t===o.type?`${o.color} text-white shadow-lg transform scale-105`:"bg-white hover:bg-gray-50 border-gray-200 hover:border-gray-300"}
              ${o.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer hover:shadow-md"}
            `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:`
                p-2 rounded-lg
                ${t===o.type?"bg-white/20":"bg-gray-100"}
              `,children:jsxRuntimeExports.jsx("div",{className:t===o.type?"text-white":"text-gray-600",children:o.icon})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:`
                  font-display-semibold mb-1
                  ${t===o.type?"text-white":"text-gray-800"}
                `,children:GAME_ART_LABELS[o.type]}),jsxRuntimeExports.jsx("p",{className:`
                  text-sm font-display
                  ${t===o.type?"text-white/90":"text-gray-600"}
                `,children:o.description})]})]}),t===o.type&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})})}),o.disabled&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gray-100/50 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-gray-500 bg-white px-2 py-1 rounded",children:"Em breve"})})]},o.type))}),t&&jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800 mb-2",children:"Tipo Selecionado"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 font-display",children:[GAME_ART_LABELS[t]," -"," ",(s=n.find(o=>o.type===t))==null?void 0:s.description]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 font-display text-center",children:"Cada tipo de arte tem seu próprio acabamento e estilo visual"})]})};function Input({className:t,type:e,...n}){return jsxRuntimeExports.jsx("input",{type:e,"data-slot":"input",className:cn("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var NAME="Label",Label$1=reactExports.forwardRef((t,e)=>jsxRuntimeExports.jsx(Primitive.label,{...t,ref:e,onMouseDown:n=>{var o;n.target.closest("button, input, select, textarea")||((o=t.onMouseDown)==null||o.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Label$1.displayName=NAME;var Root$1=Label$1;function Label({className:t,...e}){return jsxRuntimeExports.jsx(Root$1,{"data-slot":"label",className:cn("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function usePrevious(t){const e=reactExports.useRef({value:t,previous:t});return reactExports.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var SWITCH_NAME="Switch",[createSwitchContext,createSwitchScope]=createContextScope(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch$1=reactExports.forwardRef((t,e)=>{const{__scopeSwitch:n,name:s,checked:o,defaultChecked:u,required:d,disabled:g,value:y="on",onCheckedChange:v,form:w,...T}=t,[A,C]=reactExports.useState(null),j=useComposedRefs(e,U=>C(U)),D=reactExports.useRef(!1),H=A?w||!!A.closest("form"):!0,[ne,Y]=useControllableState({prop:o,defaultProp:u??!1,onChange:v,caller:SWITCH_NAME});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:n,checked:ne,disabled:g,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":ne,"aria-required":d,"data-state":getState(ne),"data-disabled":g?"":void 0,disabled:g,value:y,...T,ref:j,onClick:composeEventHandlers(t.onClick,U=>{Y(ee=>!ee),H&&(D.current=U.isPropagationStopped(),D.current||U.stopPropagation())})}),H&&jsxRuntimeExports.jsx(SwitchBubbleInput,{control:A,bubbles:!D.current,name:s,value:y,checked:ne,required:d,disabled:g,form:w,style:{transform:"translateX(-100%)"}})]})});Switch$1.displayName=SWITCH_NAME;var THUMB_NAME="SwitchThumb",SwitchThumb=reactExports.forwardRef((t,e)=>{const{__scopeSwitch:n,...s}=t,o=useSwitchContext(THUMB_NAME,n);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:e})});SwitchThumb.displayName=THUMB_NAME;var BUBBLE_INPUT_NAME="SwitchBubbleInput",SwitchBubbleInput=reactExports.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:s=!0,...o},u)=>{const d=reactExports.useRef(null),g=useComposedRefs(d,u),y=usePrevious(n),v=useSize(e);return reactExports.useEffect(()=>{const w=d.current;if(!w)return;const T=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(T,"checked").set;if(y!==n&&C){const j=new Event("click",{bubbles:s});C.call(w,n),w.dispatchEvent(j)}},[y,n,s]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:g,style:{...o.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});SwitchBubbleInput.displayName=BUBBLE_INPUT_NAME;function getState(t){return t?"checked":"unchecked"}var Root=Switch$1,Thumb=SwitchThumb;function Switch({className:t,...e}){return jsxRuntimeExports.jsx(Root,{"data-slot":"switch",className:cn("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:jsxRuntimeExports.jsx(Thumb,{"data-slot":"switch-thumb",className:cn("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const ScoreEditor=({selectedMatch:t,homeScore:e,awayScore:n,showPenalties:s,homePenaltyScore:o,awayPenaltyScore:u,onHomeScoreChange:d,onAwayScoreChange:g,onShowPenaltiesChange:y,onHomePenaltyScoreChange:v,onAwayPenaltyScoreChange:w})=>t?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-4",children:"Editar Placar"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 font-display mb-6",children:[t.teams.home.name," vs ",t.teams.away.name]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"homeScore",className:"font-display-medium",children:t.teams.home.name}),jsxRuntimeExports.jsx(Input,{id:"homeScore",type:"number",min:"0",value:e,onChange:T=>d(T.target.value),placeholder:"0",className:"text-center text-lg font-display-semibold"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"awayScore",className:"font-display-medium",children:t.teams.away.name}),jsxRuntimeExports.jsx(Input,{id:"awayScore",type:"number",min:"0",value:n,onChange:T=>g(T.target.value),placeholder:"0",className:"text-center text-lg font-display-semibold"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label,{className:"font-display-medium",children:"Disputa de Pênaltis"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Ativar para incluir o placar dos pênaltis"})]}),jsxRuntimeExports.jsx(Switch,{checked:s,onCheckedChange:y})]}),s&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"homePenaltyScore",className:"font-display-medium text-yellow-800",children:["Pênaltis - ",t.teams.home.name]}),jsxRuntimeExports.jsx(Input,{id:"homePenaltyScore",type:"number",min:"0",value:o,onChange:T=>v(T.target.value),placeholder:"0",className:"text-center text-lg font-display-semibold border-yellow-300 focus:border-yellow-500"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"awayPenaltyScore",className:"font-display-medium text-yellow-800",children:["Pênaltis - ",t.teams.away.name]}),jsxRuntimeExports.jsx(Input,{id:"awayPenaltyScore",type:"number",min:"0",value:u,onChange:T=>w(T.target.value),placeholder:"0",className:"text-center text-lg font-display-semibold border-yellow-300 focus:border-yellow-500"})]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 font-display text-center",children:"Os valores inseridos aqui serão usados na geração da imagem final"})]}):null,SimplePlayerSelector=({selectedPlayer:t,selectedPlayerImageUrl:e,selectedPlayerImgIndex:n,onPlayerSelect:s,placeholder:o="Selecione um jogador",showImageSelector:u=!0,filterFunction:d})=>{var ne;const{players:g}=useSquad(),[y,v]=reactExports.useState(""),[w,T]=reactExports.useState(!1),[A,C]=reactExports.useState([]);reactExports.useEffect(()=>{let Y=g.filter(U=>U.name.toLowerCase().includes(y.toLowerCase())||U.number.toString().includes(y));d&&(Y=Y.filter(d)),C(Y)},[g,y,d]);const j=Y=>{s(Y,null,null),T(!1),v("")},D=()=>{s(null,null,null),v("")},H=(Y,U)=>{t&&s(t,Y,U)};return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"relative",children:t?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-cyan-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(User,{className:"w-5 h-5 text-cyan-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-semibold text-gray-800",children:t.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 font-display",children:["#",t.number," • ",t.position]})]})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:D,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]}):jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx(Input,{type:"text",placeholder:o,value:y,onChange:Y=>{v(Y.target.value),T(!0)},onFocus:()=>T(!0),className:"pl-10 font-display"})]}),w&&jsxRuntimeExports.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:A.length>0?A.map(Y=>jsxRuntimeExports.jsx("button",{onClick:()=>j(Y),className:"w-full text-left p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-cyan-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-xs font-display-semibold text-cyan-600",children:Y.number})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-semibold text-gray-800",children:Y.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:Y.position})]})]})},Y.id)):jsxRuntimeExports.jsx("div",{className:"p-3 text-center text-gray-500 font-display",children:y?"Nenhum jogador encontrado":"Digite para buscar jogadores"})})]})}),u&&t&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800",children:"Selecionar Imagem do Jogador"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:((ne=t.imgUrl)==null?void 0:ne.map((Y,U)=>jsxRuntimeExports.jsxs("button",{onClick:()=>H(Y,U),className:`
                  relative aspect-square rounded-lg overflow-hidden border-2 transition-all
                  ${n===U?"border-cyan-500 ring-2 ring-cyan-200":"border-gray-200 hover:border-gray-300"}
                `,children:[jsxRuntimeExports.jsx("img",{src:Y,alt:`${t.name} - Imagem ${U+1}`,className:"w-full h-full object-cover"}),n===U&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-cyan-500 bg-opacity-20 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-cyan-500 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})]},U)))||jsxRuntimeExports.jsx("div",{className:"col-span-full text-center py-8 text-gray-500 font-display",children:"Nenhuma imagem disponível para este jogador"})})]}),w&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-5",onClick:()=>T(!1)})]})},GoalPlayerSelector=({selectedPlayer:t,selectedPlayerImageUrl:e,selectedPlayerImgIndex:n,onPlayerSelect:s})=>jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-2",children:"Selecionar Jogador"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Escolha o jogador que marcou o gol"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-green-800",children:"Autor do Gol"})]}),jsxRuntimeExports.jsx(SimplePlayerSelector,{selectedPlayer:t,selectedPlayerImageUrl:e,selectedPlayerImgIndex:n,onPlayerSelect:s,placeholder:"Selecione o jogador que marcou o gol",showImageSelector:!0})]}),t&&jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800 mb-2",children:"Resumo da Seleção"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[e&&jsxRuntimeExports.jsx("img",{src:e,alt:t.name,className:"w-12 h-12 rounded-full object-cover border-2 border-green-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-semibold text-gray-800",children:t.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 font-display",children:["#",t.number," • ",t.position]})]})]}),e&&jsxRuntimeExports.jsx("p",{className:"text-xs text-green-600 font-display mt-2",children:"✓ Imagem selecionada para a arte"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 font-display text-center",children:"O jogador selecionado aparecerá destacado na imagem final"})]}),SubstitutionsManager=({substitutions:t,onSubstitutionsChange:e})=>{const[n,s]=reactExports.useState(t);reactExports.useEffect(()=>{s(t)},[t]);const o=A=>{const C=[];return n.forEach((j,D)=>{A!==void 0&&D===A||(j.playerOut&&C.push(j.playerOut),j.playerIn&&C.push(j.playerIn))}),C},u=(A,C)=>o(C).some(D=>D.id===A.id),d=()=>{if(n.length>=5)return;const A={},C=[...n,A];s(C)},g=A=>{const C=n.filter((j,D)=>D!==A);s(C),e(C)},y=(A,C)=>{const j=[...n];if(C)j[A]={...j[A],playerOut:C};else{const{playerOut:D,...H}=j[A];j[A]=H}s(j),e(j)},v=(A,C)=>{const j=[...n];if(C)j[A]={...j[A],playerIn:C};else{const{playerIn:D,...H}=j[A];j[A]=H}s(j),e(j)},w=(A,C,j)=>{var D,H,ne,Y;return!(u(A,C)||j&&((H=(D=n[C])==null?void 0:D.playerIn)==null?void 0:H.id)===A.id||!j&&((Y=(ne=n[C])==null?void 0:ne.playerOut)==null?void 0:Y.id)===A.id)},T=()=>n.filter(A=>A.playerOut&&A.playerIn);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-2",children:"Gerenciar Substituições"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Adicione até 5 substituições para a imagem"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:n.map((A,C)=>jsxRuntimeExports.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("h4",{className:"font-display-semibold text-gray-800",children:["Substituição ",C+1]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>g(C),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-red-700",children:"Sai de campo"})]}),jsxRuntimeExports.jsx(SimplePlayerSelector,{selectedPlayer:A.playerOut||null,selectedPlayerImageUrl:null,selectedPlayerImgIndex:null,onPlayerSelect:j=>y(C,j),placeholder:"Selecione quem sai",showImageSelector:!1,filterFunction:j=>w(j,C,!0)})]}),jsxRuntimeExports.jsx("div",{className:"hidden md:flex items-center justify-center",children:jsxRuntimeExports.jsx(ArrowLeftRight,{className:"w-6 h-6 text-gray-400"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-green-700",children:"Entra em campo"})]}),jsxRuntimeExports.jsx(SimplePlayerSelector,{selectedPlayer:A.playerIn||null,selectedPlayerImageUrl:null,selectedPlayerImgIndex:null,onPlayerSelect:j=>v(C,j),placeholder:"Selecione quem entra",showImageSelector:!1,filterFunction:j=>w(j,C,!1)})]})]}),A.playerOut&&A.playerIn&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700 font-display",children:["✓ Substituição válida: ",A.playerOut.name," →"," ",A.playerIn.name]})]},C))}),n.length<5&&jsxRuntimeExports.jsxs(Button,{onClick:d,variant:"outline",className:"w-full border-dashed border-2 border-gray-300 hover:border-gray-400 text-gray-600 hover:text-gray-700",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Adicionar Substituição (",n.length,"/5)"]}),T().length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800 mb-2",children:"Resumo das Substituições"}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:T().map((A,C)=>jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 font-display",children:[C+1,". ",A.playerOut.name," → ",A.playerIn.name]},C))}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-gray-500 font-display",children:[T().length," de ",n.length," ","substituições completas"]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 font-display text-center",children:"Cada jogador só pode participar de uma substituição por imagem"})]})},getInfoElementData=(t,e,n,s)=>{if(!e||!e.matchData)return null;const o={primary:"#ffffff"},{stadium:u,date:d,referee:g,competitionRound:y,homeTeam:v,awayTeam:w}=e.matchData,T={fontWeight:"800",fontFamily:'"Funnel Display", sans-serif',textShadow:"2px 2px 4px rgba(0,0,0,0.8)"};switch(t){case"GAMEART":return{content:[`${u.toUpperCase()} - ${y.toUpperCase()}`],style:{...T,fontSize:"8px",textAlign:"center",color:o.primary}};case"CONFRONTO":const C=[y.toUpperCase()];g&&C.push(`ÁRBITRO: ${g.toUpperCase()}`);const j=C.join(" - "),D=`${u.toUpperCase()} - ${d.toUpperCase()}`;return{content:[j,D],style:{...T,fontSize:`${n.footerSize||20}px`,textAlign:"center",lineHeight:1.4,color:"#FFFFFF"}};case"MATCHDAY":case"PROXIMO_JOGO":const H=n.footerSize||1,ne=[];return ne.push(`${v==null?void 0:v.toUpperCase()} 🆚 ${w==null?void 0:w.toUpperCase()}`),ne.push(u.toUpperCase()),ne.push(d.toUpperCase()),ne.push(y.toUpperCase()),g&&ne.push(`ÁRBITRO: ${g.toUpperCase()}`),{content:ne,style:{...T,fontSize:`${20*H}px`,textAlign:s==="quadrada"?"right":"left",lineHeight:1.25,color:"#FFFFFF"}};case"ESCALACAO":case"ANIVERSARIO":case"MOTM":case"PALPITES":default:return null}},convertCanvasConfigToElements=(t,e,n,s,o,u)=>{var A,C,j,D,H,ne,Y,U,ee,J,ie,se,K,te,re;const d=[],g=t.canvasWidth,y=t.canvasHeight,v=e.artType,w=getInfoElementData(u,e,t,n),T=(ce,le)=>ce/(le==="width"?g:y)*100;if(t.userBackgroundImgX!==void 0&&e.userBackgroundImg&&d.push({id:"background",type:"image",content:e.userBackgroundImg,position:{x:T(t.userBackgroundImgX+t.userBackgroundImgWidth/2,"width"),y:T(t.userBackgroundImgY+t.userBackgroundImgHeight/2,"height")},size:{width:T(t.userBackgroundImgWidth,"width"),height:T(t.userBackgroundImgHeight,"height")},zIndex:0,visible:!0}),t.canvasWidth!==void 0&&e.artType){const ce=GAME_ART_TO_IMAGE_SECTION[v],le=(A=s.find(ue=>ue.type===n&&ue.section===ce))==null?void 0:A.url;le&&d.push({id:"acabamento",type:"image",content:le,position:{x:T(0+t.canvasWidth/2,"width"),y:T(0+t.canvasHeight/2,"height")},size:{width:T(t.canvasWidth,"width"),height:T(t.canvasHeight,"height")},zIndex:0,visible:!0})}if(t.logoX!==void 0&&d.push({id:"logo",type:"image",content:"/caminhantes-clock.png",position:{x:T(t.logoX+t.logoSize/2,"width"),y:T(t.logoY+t.logoSize/2,"height")},size:{width:T(t.logoSize,"width"),height:T(t.logoSize,"height")},zIndex:10,visible:!0}),t.placarX!==void 0&&o&&d.push({id:"placar",type:"image",content:o,position:{x:T(t.placarX+t.placarSize/2,"width"),y:T(t.placarY+t.placarSize*(720/1280)/2,"height")},size:{width:T(t.placarSize,"width"),height:T(t.placarSize*(720/1280),"height")},zIndex:5,visible:!0}),t.jogadorX!==void 0&&((C=e==null?void 0:e.goal)!=null&&C.scorerImageUrl)){const le=t.jogadorSize*1.5945945945945945;d.push({id:"jogador",type:"image",content:(j=e==null?void 0:e.goal)==null?void 0:j.scorerImageUrl,position:{x:T(t.jogadorX+t.jogadorSize/2,"width"),y:T(t.jogadorY+le/2,"height")},size:{width:T(t.jogadorSize,"width"),height:T(le,"height")},zIndex:3,visible:!0})}if(console.log("ATENCAO ATENCAO> ",t.substitutionsX!==void 0,e.substitutions&&e.substitutions.length>0),t.substitutionsX!==void 0&&e.substitutions&&e.substitutions.length>0&&d.push({id:"substituicoes",type:"text",content:(H=(D=e==null?void 0:e.goal)==null?void 0:D.scorer)==null?void 0:H.name,position:{x:T(t.motmTextX,"width"),y:T(t.motmTextY,"height")},size:{width:T(t.canvasWidth,"width"),height:T(t.canvasHeight,"height")},zIndex:8,visible:!0}),t.motmTextX!==void 0&&((Y=(ne=e==null?void 0:e.goal)==null?void 0:ne.scorer)!=null&&Y.name)&&d.push({id:"nome",type:"text",content:(ee=(U=e==null?void 0:e.goal)==null?void 0:U.scorer)==null?void 0:ee.name,position:{x:T(t.motmTextX,"width"),y:T(t.motmTextY,"height")},size:{width:T(t.canvasWidth,"width"),height:T(t.canvasHeight,"height")},zIndex:8,visible:!0}),w&&d.push({id:"info",type:"text",content:w.content,position:{x:T(t.infoX,"width"),y:T(t.infoY,"height")},size:{width:T(t.canvasWidth,"width"),height:T(t.canvasHeight,"height")},zIndex:8,visible:!0,style:w.style}),t.tvX!==void 0&&d.push({id:"tv",type:"component",content:null,position:{x:T(t.tvX,"width"),y:T(t.tvY,"height")},size:{width:40,height:15},zIndex:9,visible:!0}),t.motmTextX,t.playerNumberX!==void 0&&((J=e==null?void 0:e.featuredPlayer)!=null&&J.number||(se=(ie=e==null?void 0:e.goal)==null?void 0:ie.scorer)!=null&&se.number)){const ce=((K=e==null?void 0:e.featuredPlayer)==null?void 0:K.number)||((re=(te=e==null?void 0:e.goal)==null?void 0:te.scorer)==null?void 0:re.number);d.push({id:"numero",type:"text",content:ce.toString(),position:{x:T(t.playerNumberX,"width"),y:T(t.playerNumberY,"height")},size:{width:20,height:15},zIndex:6,visible:!0,style:{fontSize:`${(t.playerNumberSize||1)*8}rem`,color:"white",textShadow:"4px 4px 8px rgba(0,0,0,0.8)",fontFamily:"Montserrat, sans-serif",fontWeight:"900",textAlign:"center"}})}return d},createDefaultRenderOrder=t=>["background","acabamento","info","nome","numero","jogador","substituicoes","placar","tv","motmText","logo"].filter(n=>t.some(s=>s.id===n)),initialImageGeneratorConfigs$1={quadrada:{canvasWidth:1080,canvasHeight:1080,logoX:931,logoY:61,logoSize:123,placarX:80,placarY:565,placarSize:930,infoX:1080/2,infoY:40,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1080,userBackgroundImgHeight:1080,jogadorX:121,jogadorY:85,jogadorSize:900,motmTextX:540,motmTextY:195,motmTextSize:1,playerNumberX:900,playerNumberY:300,playerNumberSize:1,substitutionsX:175,substitutionsY:200,substitutionsWidth:880,substitutionsHeight:400},vertical:{canvasWidth:1080,canvasHeight:1920,logoX:865,logoY:203,logoSize:175,placarX:115,placarY:923,placarSize:875,infoX:1080/2,infoY:185,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1080,userBackgroundImgHeight:1920,jogadorX:105,jogadorY:300,jogadorSize:1025,motmTextX:540,motmTextY:365,motmTextSize:1,playerNumberX:900,playerNumberY:470,playerNumberSize:1,substitutionsX:190,substitutionsY:430,substitutionsWidth:880,substitutionsHeight:500},horizontal:{canvasWidth:1920,canvasHeight:1080,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,infoX:1920/2,infoY:40,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1920,userBackgroundImgHeight:1080,jogadorX:647,jogadorY:100,jogadorSize:900,motmTextX:960,motmTextY:880,motmTextSize:1,playerNumberX:30,playerNumberY:1005,playerNumberSize:1,substitutionsX:200,substitutionsY:200,substitutionsWidth:1520,substitutionsHeight:400}},GameArtGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{var mn,Ut,Lt,Dt,Gt;const{currentUserData:o}=useUser(),{baseImages:u}=useImages(),[d,g]=reactExports.useState(initialImageGeneratorConfigs$1),y=reactExports.useRef(null),v=reactExports.useRef(null),w=reactExports.useRef(null),T=reactExports.useRef(null),[A,C]=reactExports.useState(["background","acabamento","logo","info","nome","numero","jogador","substituicoes","placar"]),[j,D]=reactExports.useState(null),[H,ne]=reactExports.useState("quadrada"),[Y,U]=reactExports.useState(null),ee=reactExports.useRef(null),J={primary:"#ffffff"},[ie,se]=reactExports.useState(1),[K,te]=reactExports.useState(!1),[re,ce]=reactExports.useState(!1),[le,ue]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null,artType:null,homeScore:"",awayScore:"",showPenalties:!1,homePenaltyScore:"",awayPenaltyScore:"",userBackgroundImg:null,userBackgroundImgAspectRatio:null}),[_e,Ee]=reactExports.useState([]),[we,de]=reactExports.useState(null);reactExports.useEffect(()=>{T.current&&domtoimage.toPng(T.current).then(Ke=>{de(Ke)}).catch(Ke=>{console.error("Erro ao converter o placar em imagem:",Ke),de(null)})},[Y,le]),reactExports.useEffect(()=>{const Ke=initialImageGeneratorConfigs$1[H],rt=convertCanvasConfigToElements(Ke,le,H,u,we,"GAMEART");console.log("🖼️ GameArtGenerator: Elementos atualizados",rt),Ee(rt),C(createDefaultRenderOrder(rt))},[le,H,u]);const xe=(()=>{const Ke=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Tipo de Arte",icon:Palette,description:"Escolha o momento do jogo"}];return le.artType==="GOL"?[...Ke,{id:3,title:"Jogador",icon:Palette,description:"Selecione o autor do gol"},{id:4,title:"Placar",icon:Palette,description:"Configure o placar"},{id:5,title:"Gerar Imagem",icon:Image$2,description:"Ajuste e gere a imagem"}]:le.artType==="SUBSTITUICAO"?[...Ke,{id:3,title:"Substituições",icon:Palette,description:"Configure as substituições"},{id:4,title:"Placar",icon:Palette,description:"Configure o placar"},{id:5,title:"Gerar Imagem",icon:Image$2,description:"Ajuste e gere a imagem"}]:[...Ke,{id:3,title:"Placar",icon:Palette,description:"Configure o placar"},{id:4,title:"Fundo",icon:Upload,description:"Upload da imagem de fundo"},{id:5,title:"Gerar Imagem",icon:Image$2,description:"Ajuste e gere a imagem"}]})(),[pe,ve]=reactExports.useState(!1),Oe=Ke=>{var rt;switch(Ke){case 2:return pe;case 3:return!!le.artType;case 4:return le.artType==="GOL"?!!((rt=le.goal)!=null&&rt.scorer):le.artType==="SUBSTITUICAO"?!!le.substitutions&&le.substitutions.length>0:!0;case 5:return le.artType==="GOL"||le.artType==="SUBSTITUICAO",!0;case 6:return le.artType==="GOL"||le.artType==="SUBSTITUICAO"?!0:!!le.userBackgroundImg;default:return!0}},Te=()=>{ie===1&&ee.current&&!ee.current.canProceed&&!ee.current.submitManualData()||se(Ke=>Ke+1)},Le=Ke=>{const rt=new Date(Ke.fixture.date),Ct=convertToSaoPauloTime(rt),tt={homeTeam:"Liverpool",awayTeam:"Adversário",competition:formatCompetitionRound(Ke,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:Ke.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:Ke.fixture.referee||"",stadium:Ke.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(Ct),competitionRound:formatCompetitionRound(Ke,e)};U(Ke),ue(Et=>{var un,hn,xn,Dn,Sn,Hn,Pn,Gn,Xn,kn,Ms,Zs,fr,On;return{...Et,matchData:tt,homeScore:((hn=(un=Ke.goals)==null?void 0:un.home)==null?void 0:hn.toString())||"",awayScore:((Dn=(xn=Ke.goals)==null?void 0:xn.away)==null?void 0:Dn.toString())||"",showPenalties:((Hn=(Sn=Ke.score)==null?void 0:Sn.penalty)==null?void 0:Hn.home)!=null&&((Gn=(Pn=Ke.score)==null?void 0:Pn.penalty)==null?void 0:Gn.away)!=null,homePenaltyScore:((Ms=(kn=(Xn=Ke.score)==null?void 0:Xn.penalty)==null?void 0:kn.home)==null?void 0:Ms.toString())||"",awayPenaltyScore:((On=(fr=(Zs=Ke.score)==null?void 0:Zs.penalty)==null?void 0:fr.away)==null?void 0:On.toString())||""}})},Me=Ke=>{console.log("🎨 handleArtTypeSelect: Tipo de arte selecionado",Ke),ue(rt=>({...rt,artType:Ke})),Ke!=="GOL"&&ue(rt=>({...rt,goal:void 0})),Ke!=="SUBSTITUICAO"&&ue(rt=>({...rt,substitutions:void 0}))},Ce=(Ke,rt,Ct)=>{console.log("👤 handleGoalPlayerSelect: Jogador selecionado",Ke==null?void 0:Ke.name),ue(tt=>({...tt,goal:{scorer:Ke,scorerImageUrl:rt,scorerImgIndex:Ct}}))},be=Ke=>{console.log("🔄 handleSubstitutionsChange: Substituições alteradas",Ke.length),ue(rt=>({...rt,substitutions:Ke}))},Ve=Ke=>{var tt;const rt=(tt=Ke.target.files)==null?void 0:tt[0];if(!rt)return;const Ct=new FileReader;Ct.onloadend=()=>{const Et=new Image;Et.onload=async()=>{const un=await $e(Ct.result);ue(hn=>({...hn,userBackgroundImg:un.src,userBackgroundImgAspectRatio:Et.width/Et.height}))},Et.src=Ct.result},Ct.readAsDataURL(rt)};reactExports.useEffect(()=>{if(!le.userBackgroundImg||!le.userBackgroundImgAspectRatio)return;const Ke=le.userBackgroundImgAspectRatio,rt=d[H];let Ct;H==="vertical"?Ct=1550:Ct=rt.canvasHeight;const tt=Ct*Ke,Et=(rt.canvasWidth-tt)/2,un=(rt.canvasHeight-Ct)/2;g(hn=>({...hn,[H]:{...hn[H],userBackgroundImgWidth:tt,userBackgroundImgHeight:Ct,userBackgroundImgX:Et,userBackgroundImgY:un}}))},[le.userBackgroundImg,le.userBackgroundImgAspectRatio,H]);const $e=reactExports.useCallback(Ke=>new Promise((rt,Ct)=>{const tt=new Image;tt.crossOrigin="anonymous",tt.onload=()=>rt(tt),tt.onerror=()=>Ct(new Error(`Falha ao carregar imagem: ${Ke}`)),tt.src=Ke}),[]),Fe=reactExports.useCallback(async(Ke,rt,Ct)=>{var un,hn,xn,Dn,Sn,Hn,Pn,Gn,Xn,kn,Ms,Zs,fr;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const tt=Ke.current;if(!tt)return;const Et=tt.getContext("2d");if(Et){tt.width=rt.canvasWidth,tt.height=rt.canvasHeight,Et.clearRect(0,0,tt.width,tt.height);for(const On of Ct)if(console.log(`🎨 drawLayer: Renderizando camada ${On}`),On==="background"&&le.userBackgroundImg)try{const vn=await $e(le.userBackgroundImg);Et.drawImage(vn,rt.userBackgroundImgX,rt.userBackgroundImgY,rt.userBackgroundImgWidth,rt.userBackgroundImgHeight)}catch(vn){console.error(vn)}else if(On==="acabamento"&&le.artType)try{const vn=GAME_ART_TO_IMAGE_SECTION[le.artType],Ln=(un=u.find(gs=>gs.type===H&&gs.section===vn))==null?void 0:un.url;if(Ln){const gs=await $e(Ln);Et.drawImage(gs,0,0,tt.width,tt.height)}}catch(vn){console.warn(`❌ drawLayer [${le.artType}]: Erro ao renderizar acabamento`,vn)}else if(On==="placar"){if(T.current){te(!0);try{const vn=await domtoimage.toPng(T.current,{quality:1,bgcolor:void 0}),Ln=new Image;Ln.src=vn,await new Promise((gs,cs)=>{Ln.onload=()=>gs(),Ln.onerror=js=>cs(js)}),Et.drawImage(Ln,rt.placarX,rt.placarY,rt.placarSize,rt.placarSize*(720/1280)),ce(!0)}catch(vn){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",vn)}finally{te(!1)}}}else if(On==="logo")try{const vn=await $e("/caminhantes-clock.png");Et.drawImage(vn,rt.logoX,rt.logoY,rt.logoSize,rt.logoSize)}catch(vn){console.error(vn)}else if(On==="info"&&le.matchData){Et.fillStyle=J.primary,Et.font='800 24px "Funnel Display", Arial, sans-serif',Et.textAlign="center";const vn=`${le.matchData.stadium.toUpperCase()} - ${le.matchData.competitionRound.toUpperCase()}`;Et.fillText(vn,rt.infoX,rt.infoY)}else if(On==="jogador"&&le.artType==="GOL")if(console.log(`👤 drawLayer [${(hn=le.goal)==null?void 0:hn.scorerImageUrl}]: Renderizando imagem do jogador`),(xn=le.goal)!=null&&xn.scorerImageUrl)try{const vn=await $e(le.goal.scorerImageUrl),Ln=1062/666,gs=rt.jogadorSize||900,cs=gs*Ln;Et.drawImage(vn,rt.jogadorX||0,rt.jogadorY||0,gs,cs),console.log(`✅ drawLayer [${(Dn=le.goal)==null?void 0:Dn.scorerImageUrl}]: Imagem do jogador renderizada`)}catch(vn){console.error(`❌ drawLayer [${(Sn=le.goal)==null?void 0:Sn.scorerImageUrl}]: Erro ao renderizar imagem do jogador`,vn)}else try{const vn=await $e("https://i.ibb.co/zHQTjFZ2/Mighty-Red-png.png"),Ln=1062/666,gs=rt.jogadorSize||900,cs=gs*Ln;Et.drawImage(vn,rt.jogadorX||0,rt.jogadorY||0,gs,cs),console.log(`✅ drawLayer [${(Hn=le.goal)==null?void 0:Hn.scorerImageUrl}]: Imagem do Mighty Red renderizada`)}catch(vn){console.error(`❌ drawLayer [${(Pn=le.goal)==null?void 0:Pn.scorerImageUrl}]: Erro ao renderizar imagem do Mighty Red`,vn)}else if(On==="nome"&&((Gn=le.goal)!=null&&Gn.scorer)){console.log(`📝 drawLayer [${(Xn=le.goal)==null?void 0:Xn.scorer.name}]: Renderizando nome do jogador: ${le.goal.scorer.name}`),Et.textAlign="center";const vn=rt.motmTextSize||1;Et.fillStyle=J.primary,Et.shadowColor="rgba(0, 0, 0, 0.5)",Et.shadowOffsetX=5*vn,Et.shadowOffsetY=5*vn,Et.shadowBlur=5*vn,Et.font=`500 ${300*vn}px "Lovers Quarrel", sans-serif`,Et.fillText(le.goal.scorer.name,rt.motmTextX||0,rt.motmTextY||0),Et.shadowColor="transparent",Et.shadowOffsetX=0,Et.shadowOffsetY=0,Et.shadowBlur=0,console.log(`✅ drawLayer [${(kn=le.goal)==null?void 0:kn.scorer.name}]: Nome do jogador renderizado`)}else if(On==="numero"&&((Ms=le.goal)!=null&&Ms.scorer)){console.log(`🔢 drawLayer [${(Zs=le.goal)==null?void 0:Zs.scorer.number}]: Renderizando número do jogador: #${le.goal.scorer.number}`),Et.textAlign="center";const vn=rt.playerNumberSize||1;Et.fillStyle=J.primary,Et.shadowColor="rgba(0, 0, 0, 0.75)",Et.shadowOffsetX=5*vn,Et.shadowOffsetY=5*vn,Et.shadowBlur=10*vn,Et.font=`400 ${80*vn}px "Lovers Quarrel", sans-serif`,Et.fillText(`#${le.goal.scorer.number.toUpperCase()}`,rt.playerNumberX||0,rt.playerNumberY||0),console.log(`✅ drawLayer [${(fr=le.goal)==null?void 0:fr.scorer.number}]: Número do jogador renderizado`)}else if(On==="substituicoes"&&le.substitutions&&le.substitutions.length>0){console.log(`🔄 drawLayer [substituições]: Renderizando ${le.substitutions.length} substituições`);const vn=rt.substitutionsX||175,gs=rt.substitutionsY||200,cs=600,js=1.3;let Ks=44,wn=Ks*4.5,$n=Ks*js;const es=le.substitutions.length*wn;if(es>cs){const qs=cs/es;Ks*=qs,wn*=qs,$n*=qs}const Rs=le.substitutions.length*wn-(wn-$n),Mr=gs+(cs-Rs)/2;Et.font=`600 ${Ks}px "Funnel Display", Arial, sans-serif`,Et.textAlign="left",le.substitutions.forEach((qs,Ts)=>{if(qs.playerOut&&qs.playerIn){const Hs=Mr+Ts*wn;Et.fillStyle="#ef4444",Et.fillText("←",vn,Hs),Et.fillStyle=J.primary,Et.fillText(`${qs.playerOut.name} (#${qs.playerOut.number})`,vn+Ks*2.3,Hs),Et.fillStyle="#22c55e",Et.fillText("→",vn,Hs+$n),Et.fillStyle=J.primary,Et.fillText(`${qs.playerIn.name} (#${qs.playerIn.number})`,vn+Ks*2.3,Hs+$n)}})}}},[le,u,J.primary,H,$e]),je=reactExports.useCallback(()=>{if(ie!==Ze||!y.current||!v.current||!w.current)return;te(!0);const Ke=d[H],rt=j?A.indexOf(j):-1,Ct=rt>-1?A.slice(0,rt):A,tt=rt>-1?[A[rt]]:[],Et=rt>-1?A.slice(rt+1):[];Promise.all([Fe(y,Ke,Ct),Fe(v,Ke,tt),Fe(w,Ke,Et)]).then(()=>{te(!1),ce(!0)}).catch(un=>{console.error("Erro ao desenhar camadas:",un),te(!1)})},[ie,d,H,j,A,Fe]);reactExports.useEffect(()=>{je()},[je]),reactExports.useEffect(()=>{if(ie!==3||!j||!(v!=null&&v.current))return;const Ke=d[H];Fe(v,Ke,[j])},[d,j,H,ie,Fe]);const De=()=>{const Ke=document.createElement("canvas"),rt=d[H];Ke.width=rt.canvasWidth,Ke.height=rt.canvasHeight;const Ct=Ke.getContext("2d");if(!Ct||!y.current||!v.current||!w.current)return;Ct.drawImage(y.current,0,0),Ct.drawImage(v.current,0,0),Ct.drawImage(w.current,0,0);const tt=document.createElement("a");tt.href=Ke.toDataURL("image/png"),tt.download=`${H}_placar_final.png`,tt.click()},Ie=(Ke,rt)=>{j&&g(Ct=>{let tt;j==="nome"?tt="motmText":j==="numero"?tt="playerNumber":j==="substituicoes"?tt="substitutions":tt=j;const Et=tt==="background"?"userBackgroundImgX":`${tt}X`,un=tt==="background"?"userBackgroundImgY":`${tt}Y`,hn={...Ct[H]};return Ke==="x"&&Et in hn?hn[Et]+=rt:Ke==="y"&&un in hn&&(hn[un]+=rt),{...Ct,[H]:hn}})},Re=Ke=>{j&&g(rt=>{let Ct;j==="nome"?Ct="motmText":j==="numero"?Ct="playerNumber":j==="substituicoes"?Ct="substitutions":Ct=j;const tt=`${Ct}Size`,Et=Ct==="background"?"userBackgroundImgWidth":`${Ct}Width`,un=Ct==="background"?"userBackgroundImgHeight":`${Ct}Height`,hn={...rt[H]};if(tt in hn&&typeof hn[tt]=="number")tt==="playerNumberSize"||tt==="motmTextSize"?hn[tt]+=Ke/100:hn[tt]+=Ke;else if(Et in hn&&typeof hn[Et]=="number"){const xn=hn[un]/hn[Et]||1;hn[Et]+=Ke,hn[un]=hn[Et]*xn}return{...rt,[H]:hn}})},Ne=Ke=>{Oe(Ke)&&se(Ke)},Ue=async()=>{if(T.current)try{const Ke=await domtoimage.toPng(T.current,{quality:1,bgcolor:void 0}),rt=document.createElement("a");rt.download="placar.png",rt.href=Ke,rt.click()}catch(Ke){console.error("Erro ao gerar PNG do SplitRectangleDisplay:",Ke)}},pt=()=>{if(!le.artType)return"fimDeJogo";switch(le.artType){case"INICIO_JOGO":return"inicioJogo";case"INTERVALO":return"intervalo";case"INICIO_SEGUNDO_TEMPO":return"inicioSegundoTempo";case"INICIO_PRORROGACAO":return"inicioProrrogacao";case"INICIO_SEGUNDO_TEMPO_PRORROGACAO":return"inicioSegundoTempoProrrogacao";case"FIM_DE_JOGO":return"fimDeJogo";case"GOL":return"gol";case"SUBSTITUICAO":return"substituicao";default:return"fimDeJogo"}},Ze=xe[xe.length-1].id;return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Artes do Jogo"}),Y&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:T,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:Y,awayPenScore:le.awayPenaltyScore===""?null:+le.awayPenaltyScore,awayScore:le.awayScore===""?null:+le.awayScore,homePenScore:le.homePenaltyScore===""?null:+le.homePenaltyScore,homeScore:le.homeScore===""?null:+le.homeScore})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:xe,currentStep:ie,onStepClick:Ne,canAdvanceToStep:Oe}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[ie===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:ee,onMatchSelected:Le,escalacaoData:{...le,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:ve,translations:e,pastMatches:!0,includeTheOne:!0}),ie===2&&jsxRuntimeExports.jsx(GameArtTypeSelector,{selectedArtType:le.artType,onArtTypeSelect:Me}),ie===3&&le.artType==="GOL"&&jsxRuntimeExports.jsx(GoalPlayerSelector,{selectedPlayer:((mn=le.goal)==null?void 0:mn.scorer)||null,selectedPlayerImageUrl:((Ut=le.goal)==null?void 0:Ut.scorerImageUrl)||null,selectedPlayerImgIndex:((Lt=le.goal)==null?void 0:Lt.scorerImgIndex)||null,onPlayerSelect:Ce}),ie===3&&le.artType==="SUBSTITUICAO"&&jsxRuntimeExports.jsx(SubstitutionsManager,{substitutions:le.substitutions||[],onSubstitutionsChange:be}),(ie===3&&le.artType&&le.artType!=="GOL"&&le.artType!=="SUBSTITUICAO"||ie===4&&(le.artType==="GOL"||le.artType==="SUBSTITUICAO"))&&jsxRuntimeExports.jsx(ScoreEditor,{selectedMatch:Y,homeScore:le.homeScore,awayScore:le.awayScore,showPenalties:le.showPenalties,homePenaltyScore:le.homePenaltyScore,awayPenaltyScore:le.awayPenaltyScore,onHomeScoreChange:Ke=>ue(rt=>({...rt,homeScore:Ke})),onAwayScoreChange:Ke=>ue(rt=>({...rt,awayScore:Ke})),onShowPenaltiesChange:Ke=>ue(rt=>({...rt,showPenalties:Ke})),onHomePenaltyScoreChange:Ke=>ue(rt=>({...rt,homePenaltyScore:Ke})),onAwayPenaltyScoreChange:Ke=>ue(rt=>({...rt,awayPenaltyScore:Ke}))}),ie===4&&le.artType&&le.artType!=="GOL"&&le.artType!=="SUBSTITUICAO"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-2",children:"Imagem de Fundo"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Faça upload da imagem que será usada como fundo"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("label",{className:"cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Ve,className:"hidden"}),jsxRuntimeExports.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 hover:border-gray-400 transition-colors",children:[jsxRuntimeExports.jsx(Upload,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Clique para selecionar uma imagem"})]})]})}),le.userBackgroundImg&&jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("img",{src:le.userBackgroundImg,alt:"Preview",className:"max-w-xs mx-auto rounded-lg shadow-md"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-green-600 font-display mt-2",children:"✓ Imagem carregada com sucesso"})]})]}),ie===Ze&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:H,onChange:Ke=>ne(Ke.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:j??"",onChange:Ke=>D(Ke.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),A.map(Ke=>jsxRuntimeExports.jsx("option",{value:Ke,className:"capitalize",children:Ke},Ke))]})]}),j&&jsxRuntimeExports.jsx(PositionController,{elementName:j,onMove:Ie,onResize:Re}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:A,setRenderOrder:C})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${d[H].canvasHeight/d[H].canvasWidth*100}%`},children:[y,v,w].map((Ke,rt)=>jsxRuntimeExports.jsx("canvas",{ref:Ke,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:rt+1}},rt))})})]}),Y&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:pt(),match:Y,translations:e,playerName:(Gt=(Dt=le.goal)==null?void 0:Dt.scorer)==null?void 0:Gt.name,substitutions:le.substitutions,homeGoals:le.homeScore,awayGoals:le.awayScore}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center space-x-4 gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:je,disabled:K,className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer",children:K?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),re&&jsxRuntimeExports.jsxs(Button,{onClick:De,disabled:K,variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]}),o&&o.role==="root"&&jsxRuntimeExports.jsxs(Button,{onClick:Ue,variant:"default",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),"Baixar Arte 'Placar' (PNG)"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${ie===1?"justify-end":"justify-between"} mt-6`,children:[ie>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>se(Ke=>Ke-1),variant:"outline",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),ie<Ze&&jsxRuntimeExports.jsxs(Button,{onClick:Te,disabled:!Oe(ie+1),className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},initialImageGeneratorConfigs={quadrada:{canvasWidth:1080,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:921,logoY:31,logoSize:123,placarX:167,placarY:530,placarSize:785,jogadorX:484,jogadorY:100,jogadorSize:950,footerX:198,footerY:980,footerSize:1,pieChartX:215,pieChartY:325,pieChartSize:355,pieChartLegendX:195,pieChartLegendY:760,pieChartLegendSize:1.7500000000000007},vertical:{canvasWidth:1080,canvasHeight:1920,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:865,logoY:203,logoSize:175,placarX:50,placarY:82,placarSize:985,jogadorX:505,jogadorY:407,jogadorSize:950,footerX:190,footerY:615,footerSize:1.4500000000000004,pieChartX:230,pieChartY:615,pieChartSize:415,pieChartLegendX:195,pieChartLegendY:1165,pieChartLegendSize:2.000000000000001},horizontal:{canvasWidth:1920,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1920,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,jogadorX:175,jogadorY:100,jogadorSize:950,footerX:30,footerY:1005,footerSize:1,pieChartX:960,pieChartY:600,pieChartSize:280,pieChartLegendX:960,pieChartLegendY:900,pieChartLegendSize:1}},ConfrontoGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{const{baseImages:o}=useImages(),[u,d]=reactExports.useState(initialImageGeneratorConfigs),g=reactExports.useRef(null),y=reactExports.useRef(null),v=reactExports.useRef(null),w=reactExports.useRef(null),[T,A]=reactExports.useState(["background","placar","logo","info"]),[C,j]=reactExports.useState(null),[D,H]=reactExports.useState("quadrada"),[ne,Y]=reactExports.useState(null),U=reactExports.useRef(null),[ee,J]=reactExports.useState(1),[ie,se]=reactExports.useState(!1),[K,te]=reactExports.useState(!1),[re,ce]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null}),le=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Gerar Imagem",icon:Image$2,description:"Ajuste e gere a imagem"}],[ue,_e]=reactExports.useState(!1),Ee=Me=>{switch(Me){case 2:return ue;default:return!0}},we=()=>{ee===1&&U.current&&!U.current.canProceed&&!U.current.submitManualData()||J(Me=>Me+1)},de=Me=>{const Ce=new Date(Me.fixture.date),be=convertToSaoPauloTime(Ce),Ve={homeTeam:Me.teams.home.name,awayTeam:Me.teams.away.name,competition:formatCompetitionRound(Me,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:Me.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:Me.fixture.referee||"",stadium:Me.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(be),competitionRound:formatCompetitionRound(Me,e)};Y(Me),ce($e=>({...$e,matchData:Ve}))},me=reactExports.useCallback(Me=>new Promise((Ce,be)=>{const Ve=new Image;Ve.crossOrigin="anonymous",Ve.onload=()=>Ce(Ve),Ve.onerror=()=>be(new Error(`Falha ao carregar imagem: ${Me}`)),Ve.src=Me}),[]),xe=reactExports.useCallback(async(Me,Ce,be)=>{var De;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const Ve=Me.current;if(!Ve)return;const $e=Ve.getContext("2d");if(!$e)return;Ve.width=Ce.canvasWidth,Ve.height=Ce.canvasHeight,$e.clearRect(0,0,Ve.width,Ve.height);const Fe=Ie=>{Ie.shadowColor="rgba(0, 0, 0, 0.8)",Ie.shadowOffsetX=2,Ie.shadowOffsetY=2,Ie.shadowBlur=5},je=Ie=>{Ie.shadowColor="transparent",Ie.shadowOffsetX=0,Ie.shadowOffsetY=0,Ie.shadowBlur=0};for(const Ie of be)if(Ie==="background")try{const Re=(De=o.find(Ne=>Ne.type===D&&Ne.section==="palpites"))==null?void 0:De.url;if(Re){console.log("Carregando imagem de fundo:",Re);const Ne=await me(Re),Ue=Ne.height/Ne.width,pt=Ce.backgroundSize,Ze=pt*Ue;$e.drawImage(Ne,Ce.backgroundX,Ce.backgroundY,pt,Ze)}}catch(Re){console.warn(Re)}else if(Ie==="logo")try{const Re=await me("/caminhantes-clock.png");$e.drawImage(Re,Ce.logoX,Ce.logoY,Ce.logoSize,Ce.logoSize)}catch(Re){console.error(Re)}else if(Ie==="placar"){if(w.current){console.log(Ce.placarX),console.log(Ce.placarY),console.log(Ce.placarSize),se(!0);try{const Re=await domtoimage.toPng(w.current,{quality:1,bgcolor:void 0}),Ne=new Image;Ne.src=Re,await new Promise((Ue,pt)=>{Ne.onload=()=>Ue(),Ne.onerror=Ze=>pt(Ze)}),$e.drawImage(Ne,Ce.placarX,Ce.placarY,Ce.placarSize,Ce.placarSize*(720/1280)),te(!0)}catch(Re){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",Re)}finally{se(!1)}}}else if(Ie==="info"&&re.matchData){Fe($e),$e.fillStyle="#FFFFFF";const Re=20;$e.font=`800 ${Re}px "Funnel Display", sans-serif`,$e.textAlign="center";const{stadium:Ne,date:Ue,referee:pt,competitionRound:Ze}=re.matchData,mn=[Ze.toUpperCase()];pt&&mn.push(`ÁRBITRO: ${pt.toUpperCase()}`);const Ut=mn.join(" - "),Lt=`${Ne.toUpperCase()} - ${Ue.toUpperCase()}`,Dt=Ve.width/2,Gt=Ce.footerY,Ke=Re*1.4,rt=Gt+Ke,Ct=25;$e.fillText(Ut,Dt,Gt+Ct),$e.fillText(Lt,Dt,rt+Ct),je($e)}},[re,o,D,me]),pe=reactExports.useCallback(()=>{if(ee!==2||!g.current||!y.current||!v.current)return;se(!0);const Me=u[D],Ce=C?T.indexOf(C):-1,be=Ce>-1?T.slice(0,Ce):T,Ve=Ce>-1?[T[Ce]]:[],$e=Ce>-1?T.slice(Ce+1):[];Promise.all([xe(g,Me,be),xe(y,Me,Ve),xe(v,Me,$e)]).finally(()=>{se(!1),te(!0)})},[ee,u,D,C,T,xe]);reactExports.useEffect(()=>{pe()},[pe]),reactExports.useEffect(()=>{if(ee!==4||!C||!y.current)return;const Me=u[D];xe(y,Me,[C])},[u,C,D,ee,xe]);const ve=()=>{const Me=document.createElement("canvas"),Ce=u[D];Me.width=Ce.canvasWidth,Me.height=Ce.canvasHeight;const be=Me.getContext("2d");if(!be||!g.current||!y.current||!v.current)return;be.drawImage(g.current,0,0),be.drawImage(y.current,0,0),be.drawImage(v.current,0,0);const Ve=document.createElement("a");Ve.href=Me.toDataURL("image/png"),Ve.download=`palpite-${D}.png`,Ve.click()},Oe=(Me,Ce)=>{C&&d(be=>{const Ve=`${C}X`,$e=`${C}Y`,Fe={...be[D]};return Me==="x"&&Ve in Fe?Fe[Ve]+=Ce:Me==="y"&&$e in Fe&&(Fe[$e]+=Ce),{...be,[D]:Fe}})},Te=Me=>{C&&d(Ce=>{const be=`${C}Size`,Ve={...Ce[D]};return be in Ve&&(be==="footerSize"||be==="pieChartLegendSize"?Ve[be]+=Me/100:Ve[be]+=Me),{...Ce,[D]:Ve}})},Le=Me=>{Ee(Me)&&J(Me)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Confronto Direto"}),ne&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:w,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:ne,homeScore:null,homePenScore:null,awayScore:null,awayPenScore:null})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:le,currentStep:ee,onStepClick:Le,canAdvanceToStep:Ee}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[ee===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:U,onMatchSelected:de,escalacaoData:{...re,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:_e,translations:e}),ee===2&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:D,onChange:Me=>H(Me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:C??"",onChange:Me=>j(Me.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),T.map(Me=>jsxRuntimeExports.jsx("option",{value:Me,className:"capitalize",children:Me.replace(/([A-Z])/g," $1")},Me))]})]}),C&&jsxRuntimeExports.jsx(PositionController,{elementName:C,onMove:Oe,onResize:Te}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:T,setRenderOrder:A})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${u[D].canvasHeight/u[D].canvasWidth*100}%`},children:[g,y,v].map((Me,Ce)=>jsxRuntimeExports.jsx("canvas",{ref:Me,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:Ce+1}},Ce))})})]}),ne&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"palpites",match:ne,translations:e}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-4",children:[jsxRuntimeExports.jsx(Button,{onClick:pe,disabled:ie,className:"bg-red-600 hover:bg-red-700 text-white",children:ie?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),K&&jsxRuntimeExports.jsxs(Button,{onClick:ve,disabled:ie,variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${ee===1?"justify-end":"justify-between"} mt-6`,children:[ee>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>J(Me=>Me-1),variant:"outline",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),ee<4&&jsxRuntimeExports.jsxs(Button,{onClick:we,disabled:!Ee(ee+1),className:"bg-red-600 hover:bg-red-700 text-white",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},HomePage=()=>{const{currentUser:t,logout:e}=useAuth(),{currentUserData:n}=useUser(),{setIsMenuOpen:s}=useGlobal(),{showConfirmDialog:o}=useConfirmDialog(),[u,d]=reactExports.useState("home"),{translations:g}=useRoundTranslations(),y=async()=>{await o({title:"Confirmar logout",text:"Tem certeza que deseja sair?",icon:"question",confirmButtonText:"Sair",cancelButtonText:"Cancelar"})&&await e()},v=()=>{var D,H;const C=new Date().getHours(),j=((D=n==null?void 0:n.name)==null?void 0:D.split(" ")[0])||((H=t==null?void 0:t.displayName)==null?void 0:H.split(" ")[0])||"Usuário";return C<12?`Bom dia, ${j}! 🌅`:C<18?`Boa tarde, ${j}! ☀️`:`Boa noite, ${j}! 🌙`},w=C=>{d(C)},A=getVisibleNavItems(n).filter(C=>C.isCard&&C.colorClasses&&C.lucideIcon);return u==="admin"?jsxRuntimeExports.jsx(AdminDashboard,{onBack:()=>d("home"),onNavigate:w,onLogout:y}):u==="escalacoes"?jsxRuntimeExports.jsx(EscalacaoGenerator,{translations:g,onBack:()=>d("home"),setCurrentView:d,setIsMenuOpen:s}):u==="matchday"?jsxRuntimeExports.jsx(MatchDayGenerator,{translations:g,onBack:()=>d("home"),setCurrentView:d,setIsMenuOpen:s}):u==="nextGame"?jsxRuntimeExports.jsx(NextGameGenerator,{translations:g,onBack:()=>d("home"),setCurrentView:d,setIsMenuOpen:s}):u==="motm"?jsxRuntimeExports.jsx(MotmGenerator,{translations:g,onBack:()=>d("home"),setCurrentView:d,setIsMenuOpen:s}):u==="fullTime"?jsxRuntimeExports.jsx(FullTimeGenerator,{translations:g,onBack:()=>d("home"),setCurrentView:d,setIsMenuOpen:s}):u==="confronto"?jsxRuntimeExports.jsx(ConfrontoGenerator$1,{translations:g,onBack:()=>d("home"),setCurrentView:d,setIsMenuOpen:s}):u==="gameArt"?jsxRuntimeExports.jsx(GameArtGenerator,{translations:g,onBack:()=>d("home"),setCurrentView:d,setIsMenuOpen:s}):u==="palpites"?jsxRuntimeExports.jsx(ConfrontoGenerator,{translations:g,onBack:()=>d("home"),setCurrentView:d,setIsMenuOpen:s}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex flex-col",children:[jsxRuntimeExports.jsx(SectionHeader,{setCurrentView:d,setIsMenuOpen:s,title:"Caminhantes Office"}),jsxRuntimeExports.jsxs("main",{className:"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("img",{src:caminhantesClock,alt:"Caminhantes",className:"w-20 h-20 mx-auto mb-6 drop-shadow-lg"}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-display-extrabold text-gray-800 mb-2",children:v()}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 font-display",children:"Bem-vindo ao Caminhantes Office"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto",children:[A.map(C=>jsxRuntimeExports.jsx(Card,{item:C,onClick:d,currentUserData:n},C.id)),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200 opacity-50",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx(Clock,{className:"w-8 h-8 text-gray-400"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-semibold text-gray-800 mb-2",children:"Em Breve"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4 font-display",children:"Novas aplicações serão adicionadas em breve."}),jsxRuntimeExports.jsx(Button,{disabled:!0,className:"w-full bg-gray-300 text-gray-500 cursor-not-allowed font-display-medium",children:"Em Desenvolvimento"})]})})]})]}),jsxRuntimeExports.jsx("footer",{className:"bg-white border-t border-red-100 mt-auto",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-display-semibold text-red-600 mb-2",children:'"Aqui você não caminha sozinho"'}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 font-display",children:["© ",new Date().getFullYear()," Caminhantes Office. Todos os direitos reservados."]})]})})})]})},Card=({item:t,onClick:e,currentUserData:n})=>{const{id:s,title:o,description:u,colorClasses:d,lucideIcon:g,isCard:y}=t;if(!y||!d||!g)return console.warn(`Card with ID ${s} is missing required properties for rendering as a card.`),null;const v=g,w=typeof u=="function"?u(n):u;return jsxRuntimeExports.jsx("div",{className:`bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all cursor-pointer ${d.border}`,onClick:()=>e(s),children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:`w-16 h-16 ${d.iconBg} rounded-full flex items-center justify-center mx-auto mb-4`,children:jsxRuntimeExports.jsx(v,{className:`w-8 h-8 ${d.iconColor}`})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-semibold text-gray-800 mb-2",children:o}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4 font-display",children:w}),jsxRuntimeExports.jsxs(Button,{className:`w-full ${d.button} text-white cursor-pointer font-display-medium`,children:[jsxRuntimeExports.jsx(v,{className:"w-4 h-4 mr-2"}),"Acessar"]})]})})};function App(){const{currentUser:t,loading:e}=useAuth();return e?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Carregando..."})]})}):t?jsxRuntimeExports.jsx(HomePage,{}):jsxRuntimeExports.jsx(LoginForm,{})}const createRootUser=async()=>{try{console.log("Criando usuário root...");const{user:t}=await createUserWithEmailAndPassword(auth,"nylodocs@gmail.com","CaminhantesSafe2024!");console.log("Usuário criado no Auth:",t.uid),await updateProfile(t,{displayName:"Nylo Santos"}),console.log("Perfil atualizado");const e={name:"Nylo Santos",email:"nylodocs@gmail.com",role:"root",active:!0,createdAt:serverTimestamp(),updatedAt:serverTimestamp(),lastLogin:serverTimestamp()};return await setDoc(doc(db,"users",t.uid),e),console.log("Documento criado no Firestore"),console.log("✅ Usuário root criado com sucesso!"),e}catch(t){throw t.code==="auth/email-already-in-use"?console.log("⚠️ Email já está em uso. Usuário pode já existir."):console.error("❌ Erro ao criar usuário root:",t),t}};window.createRootUser=createRootUser;clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(AppProviders,{children:jsxRuntimeExports.jsx(App,{})})}));
