var xp=Object.defineProperty;var yp=(t,e,n)=>e in t?xp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ye=(t,e,n)=>yp(t,typeof e!="symbol"?e+"":e,n);function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(s,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:t,type:s,key:l,ref:i!==void 0?i:null,props:o}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(re){return re===null||typeof re!="object"?null:(re=g&&re[g]||re["@@iterator"],typeof re=="function"?re:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function A(re,_e,Se){this.props=re,this.context=_e,this.refs=w,this.updater=Se||v}A.prototype.isReactComponent={},A.prototype.setState=function(re,_e){if(typeof re!="object"&&typeof re!="function"&&re!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,re,_e,"setState")},A.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")};function I(){}I.prototype=A.prototype;function D(re,_e,Se){this.props=re,this.context=_e,this.refs=w,this.updater=Se||v}var V=D.prototype=new I;V.constructor=D,E(V,A.prototype),V.isPureReactComponent=!0;var Y=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function S(re,_e,Se,Re,Be,Ie){return Se=Ie.ref,{$$typeof:t,type:re,key:_e,ref:Se!==void 0?Se:null,props:Ie}}function T(re,_e){return S(re.type,_e,void 0,void 0,void 0,re.props)}function P(re){return typeof re=="object"&&re!==null&&re.$$typeof===t}function U(re){var _e={"=":"=0",":":"=2"};return"$"+re.replace(/[=:]/g,function(Se){return _e[Se]})}var J=/\/+/g;function W(re,_e){return typeof re=="object"&&re!==null&&re.key!=null?U(""+re.key):_e.toString(36)}function K(){}function le(re){switch(re.status){case"fulfilled":return re.value;case"rejected":throw re.reason;default:switch(typeof re.status=="string"?re.then(K,K):(re.status="pending",re.then(function(_e){re.status==="pending"&&(re.status="fulfilled",re.value=_e)},function(_e){re.status==="pending"&&(re.status="rejected",re.reason=_e)})),re.status){case"fulfilled":return re.value;case"rejected":throw re.reason}}throw re}function ge(re,_e,Se,Re,Be){var Ie=typeof re;(Ie==="undefined"||Ie==="boolean")&&(re=null);var je=!1;if(re===null)je=!0;else switch(Ie){case"bigint":case"string":case"number":je=!0;break;case"object":switch(re.$$typeof){case t:case e:je=!0;break;case m:return je=re._init,ge(je(re._payload),_e,Se,Re,Be)}}if(je)return Be=Be(re),je=Re===""?"."+W(re,0):Re,Y(Be)?(Se="",je!=null&&(Se=je.replace(J,"$&/")+"/"),ge(Be,_e,Se,"",function(Ge){return Ge})):Be!=null&&(P(Be)&&(Be=T(Be,Se+(Be.key==null||re&&re.key===Be.key?"":(""+Be.key).replace(J,"$&/")+"/")+je)),_e.push(Be)),1;je=0;var Te=Re===""?".":Re+":";if(Y(re))for(var ke=0;ke<re.length;ke++)Re=re[ke],Ie=Te+W(Re,ke),je+=ge(Re,_e,Se,Ie,Be);else if(ke=y(re),typeof ke=="function")for(re=ke.call(re),ke=0;!(Re=re.next()).done;)Re=Re.value,Ie=Te+W(Re,ke++),je+=ge(Re,_e,Se,Ie,Be);else if(Ie==="object"){if(typeof re.then=="function")return ge(le(re),_e,Se,Re,Be);throw _e=String(re),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(re).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.")}return je}function oe(re,_e,Se){if(re==null)return re;var Re=[],Be=0;return ge(re,Re,"","",function(Ie){return _e.call(Se,Ie,Be++)}),Re}function ce(re){if(re._status===-1){var _e=re._result;_e=_e(),_e.then(function(Se){(re._status===0||re._status===-1)&&(re._status=1,re._result=Se)},function(Se){(re._status===0||re._status===-1)&&(re._status=2,re._result=Se)}),re._status===-1&&(re._status=0,re._result=_e)}if(re._status===1)return re._result.default;throw re._result}var ie=typeof reportError=="function"?reportError:function(re){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof re=="object"&&re!==null&&typeof re.message=="string"?String(re.message):String(re),error:re});if(!window.dispatchEvent(_e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",re);return}console.error(re)};function Ne(){}return react_production.Children={map:oe,forEach:function(re,_e,Se){oe(re,function(){_e.apply(this,arguments)},Se)},count:function(re){var _e=0;return oe(re,function(){_e++}),_e},toArray:function(re){return oe(re,function(_e){return _e})||[]},only:function(re){if(!P(re))throw Error("React.Children.only expected to receive a single React element child.");return re}},react_production.Component=A,react_production.Fragment=n,react_production.Profiler=i,react_production.PureComponent=D,react_production.StrictMode=s,react_production.Suspense=d,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(re){return j.H.useMemoCache(re)}},react_production.cache=function(re){return function(){return re.apply(null,arguments)}},react_production.cloneElement=function(re,_e,Se){if(re==null)throw Error("The argument must be a React element, but you passed "+re+".");var Re=E({},re.props),Be=re.key,Ie=void 0;if(_e!=null)for(je in _e.ref!==void 0&&(Ie=void 0),_e.key!==void 0&&(Be=""+_e.key),_e)!H.call(_e,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&_e.ref===void 0||(Re[je]=_e[je]);var je=arguments.length-2;if(je===1)Re.children=Se;else if(1<je){for(var Te=Array(je),ke=0;ke<je;ke++)Te[ke]=arguments[ke+2];Re.children=Te}return S(re.type,Be,void 0,void 0,Ie,Re)},react_production.createContext=function(re){return re={$$typeof:l,_currentValue:re,_currentValue2:re,_threadCount:0,Provider:null,Consumer:null},re.Provider=re,re.Consumer={$$typeof:o,_context:re},re},react_production.createElement=function(re,_e,Se){var Re,Be={},Ie=null;if(_e!=null)for(Re in _e.key!==void 0&&(Ie=""+_e.key),_e)H.call(_e,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(Be[Re]=_e[Re]);var je=arguments.length-2;if(je===1)Be.children=Se;else if(1<je){for(var Te=Array(je),ke=0;ke<je;ke++)Te[ke]=arguments[ke+2];Be.children=Te}if(re&&re.defaultProps)for(Re in je=re.defaultProps,je)Be[Re]===void 0&&(Be[Re]=je[Re]);return S(re,Ie,void 0,void 0,null,Be)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(re){return{$$typeof:u,render:re}},react_production.isValidElement=P,react_production.lazy=function(re){return{$$typeof:m,_payload:{_status:-1,_result:re},_init:ce}},react_production.memo=function(re,_e){return{$$typeof:f,type:re,compare:_e===void 0?null:_e}},react_production.startTransition=function(re){var _e=j.T,Se={};j.T=Se;try{var Re=re(),Be=j.S;Be!==null&&Be(Se,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(Ne,ie)}catch(Ie){ie(Ie)}finally{j.T=_e}},react_production.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},react_production.use=function(re){return j.H.use(re)},react_production.useActionState=function(re,_e,Se){return j.H.useActionState(re,_e,Se)},react_production.useCallback=function(re,_e){return j.H.useCallback(re,_e)},react_production.useContext=function(re){return j.H.useContext(re)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(re,_e){return j.H.useDeferredValue(re,_e)},react_production.useEffect=function(re,_e,Se){var Re=j.H;if(typeof Se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Re.useEffect(re,_e)},react_production.useId=function(){return j.H.useId()},react_production.useImperativeHandle=function(re,_e,Se){return j.H.useImperativeHandle(re,_e,Se)},react_production.useInsertionEffect=function(re,_e){return j.H.useInsertionEffect(re,_e)},react_production.useLayoutEffect=function(re,_e){return j.H.useLayoutEffect(re,_e)},react_production.useMemo=function(re,_e){return j.H.useMemo(re,_e)},react_production.useOptimistic=function(re,_e){return j.H.useOptimistic(re,_e)},react_production.useReducer=function(re,_e,Se){return j.H.useReducer(re,_e,Se)},react_production.useRef=function(re){return j.H.useRef(re)},react_production.useState=function(re){return j.H.useState(re)},react_production.useSyncExternalStore=function(re,_e,Se){return j.H.useSyncExternalStore(re,_e,Se)},react_production.useTransition=function(){return j.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(t){function e(oe,ce){var ie=oe.length;oe.push(ce);e:for(;0<ie;){var Ne=ie-1>>>1,re=oe[Ne];if(0<i(re,ce))oe[Ne]=ce,oe[ie]=re,ie=Ne;else break e}}function n(oe){return oe.length===0?null:oe[0]}function s(oe){if(oe.length===0)return null;var ce=oe[0],ie=oe.pop();if(ie!==ce){oe[0]=ie;e:for(var Ne=0,re=oe.length,_e=re>>>1;Ne<_e;){var Se=2*(Ne+1)-1,Re=oe[Se],Be=Se+1,Ie=oe[Be];if(0>i(Re,ie))Be<re&&0>i(Ie,Re)?(oe[Ne]=Ie,oe[Be]=ie,Ne=Be):(oe[Ne]=Re,oe[Se]=ie,Ne=Se);else if(Be<re&&0>i(Ie,ie))oe[Ne]=Ie,oe[Be]=ie,Ne=Be;else break e}}return ce}function i(oe,ce){var ie=oe.sortIndex-ce.sortIndex;return ie!==0?ie:oe.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],f=[],m=1,g=null,y=3,v=!1,E=!1,w=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function Y(oe){for(var ce=n(f);ce!==null;){if(ce.callback===null)s(f);else if(ce.startTime<=oe)s(f),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(f)}}function j(oe){if(w=!1,Y(oe),!E)if(n(d)!==null)E=!0,H||(H=!0,W());else{var ce=n(f);ce!==null&&ge(j,ce.startTime-oe)}}var H=!1,S=-1,T=5,P=-1;function U(){return A?!0:!(t.unstable_now()-P<T)}function J(){if(A=!1,H){var oe=t.unstable_now();P=oe;var ce=!0;try{e:{E=!1,w&&(w=!1,D(S),S=-1),v=!0;var ie=y;try{t:{for(Y(oe),g=n(d);g!==null&&!(g.expirationTime>oe&&U());){var Ne=g.callback;if(typeof Ne=="function"){g.callback=null,y=g.priorityLevel;var re=Ne(g.expirationTime<=oe);if(oe=t.unstable_now(),typeof re=="function"){g.callback=re,Y(oe),ce=!0;break t}g===n(d)&&s(d),Y(oe)}else s(d);g=n(d)}if(g!==null)ce=!0;else{var _e=n(f);_e!==null&&ge(j,_e.startTime-oe),ce=!1}}break e}finally{g=null,y=ie,v=!1}ce=void 0}}finally{ce?W():H=!1}}}var W;if(typeof V=="function")W=function(){V(J)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,le=K.port2;K.port1.onmessage=J,W=function(){le.postMessage(null)}}else W=function(){I(J,0)};function ge(oe,ce){S=I(function(){oe(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(oe){oe.callback=null},t.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<oe?Math.floor(1e3/oe):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(oe){switch(y){case 1:case 2:case 3:var ce=3;break;default:ce=y}var ie=y;y=ce;try{return oe()}finally{y=ie}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(oe,ce){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ie=y;y=oe;try{return ce()}finally{y=ie}},t.unstable_scheduleCallback=function(oe,ce,ie){var Ne=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Ne+ie:Ne):ie=Ne,oe){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ie+re,oe={id:m++,callback:ce,priorityLevel:oe,startTime:ie,expirationTime:re,sortIndex:-1},ie>Ne?(oe.sortIndex=ie,e(f,oe),n(d)===null&&oe===n(f)&&(w?(D(S),S=-1):w=!0,ge(j,ie-Ne))):(oe.sortIndex=re,e(d,oe),E||v||(E=!0,H||(H=!0,W()))),oe},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(oe){var ce=y;return function(){var ie=y;y=ce;try{return oe.apply(this,arguments)}finally{y=ie}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(d,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:d,containerInfo:f,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,reactDom_production.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,m)},reactDom_production.flushSync=function(d){var f=l.T,m=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=f,s.p=m,s.d.f()}},reactDom_production.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},reactDom_production.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},reactDom_production.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,g=u(m,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:v}):m==="script"&&s.d.X(d,{crossOrigin:g,integrity:y,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},reactDom_production.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},reactDom_production.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=u(m,f.crossOrigin);s.d.L(d,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},reactDom_production.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=u(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},reactDom_production.requestFormReset=function(d){s.d.r(d)},reactDom_production.unstable_batchedUpdates=function(d,f){return d(f)},reactDom_production.useFormState=function(d,f,m){return l.H.useFormState(d,f,m)},reactDom_production.useFormStatus=function(){return l.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),n=requireReactDom();function s(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function l(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function u(a){if(o(a)!==a)throw Error(s(188))}function d(a){var c=a.alternate;if(!c){if(c=o(a),c===null)throw Error(s(188));return c!==a?null:a}for(var h=a,p=c;;){var b=h.return;if(b===null)break;var R=b.alternate;if(R===null){if(p=b.return,p!==null){h=p;continue}break}if(b.child===R.child){for(R=b.child;R;){if(R===h)return u(b),a;if(R===p)return u(b),c;R=R.sibling}throw Error(s(188))}if(h.return!==p.return)h=b,p=R;else{for(var ee=!1,te=b.child;te;){if(te===h){ee=!0,h=b,p=R;break}if(te===p){ee=!0,p=b,h=R;break}te=te.sibling}if(!ee){for(te=R.child;te;){if(te===h){ee=!0,h=R,p=b;break}if(te===p){ee=!0,p=R,h=b;break}te=te.sibling}if(!ee)throw Error(s(189))}}if(h.alternate!==p)throw Error(s(190))}if(h.tag!==3)throw Error(s(188));return h.stateNode.current===h?a:c}function f(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=f(a),c!==null)return c;a=a.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),V=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function W(a){return a===null||typeof a!="object"?null:(a=J&&a[J]||a["@@iterator"],typeof a=="function"?a:null)}var K=Symbol.for("react.client.reference");function le(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===K?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case E:return"Fragment";case A:return"Profiler";case w:return"StrictMode";case j:return"Suspense";case H:return"SuspenseList";case P:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case v:return"Portal";case V:return(a.displayName||"Context")+".Provider";case D:return(a._context.displayName||"Context")+".Consumer";case Y:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case S:return c=a.displayName||null,c!==null?c:le(a.type)||"Memo";case T:c=a._payload,a=a._init;try{return le(a(c))}catch{}}return null}var ge=Array.isArray,oe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Ne=[],re=-1;function _e(a){return{current:a}}function Se(a){0>re||(a.current=Ne[re],Ne[re]=null,re--)}function Re(a,c){re++,Ne[re]=a.current,a.current=c}var Be=_e(null),Ie=_e(null),je=_e(null),Te=_e(null);function ke(a,c){switch(Re(je,c),Re(Ie,a),Re(Be,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?vf(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=vf(c),a=bf(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Se(Be),Re(Be,a)}function Ge(){Se(Be),Se(Ie),Se(je)}function we(a){a.memoizedState!==null&&Re(Te,a);var c=Be.current,h=bf(c,a.type);c!==h&&(Re(Ie,a),Re(Be,h))}function de(a){Ie.current===a&&(Se(Be),Se(Ie)),Te.current===a&&(Se(Te),ha._currentValue=ie)}var me=Object.prototype.hasOwnProperty,ue=t.unstable_scheduleCallback,se=t.unstable_cancelCallback,he=t.unstable_shouldYield,Pe=t.unstable_requestPaint,ze=t.unstable_now,$e=t.unstable_getCurrentPriorityLevel,vt=t.unstable_ImmediatePriority,ve=t.unstable_UserBlockingPriority,xe=t.unstable_NormalPriority,Ue=t.unstable_LowPriority,Oe=t.unstable_IdlePriority,Me=t.log,Ze=t.unstable_setDisableYieldValue,He=null,qe=null;function Xe(a){if(typeof Me=="function"&&Ze(a),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(He,a)}catch{}}var et=Math.clz32?Math.clz32:Bt,Kt=Math.log,It=Math.LN2;function Bt(a){return a>>>=0,a===0?32:31-(Kt(a)/It|0)|0}var Et=256,mn=4194304;function Nt(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Gt(a,c,h){var p=a.pendingLanes;if(p===0)return 0;var b=0,R=a.suspendedLanes,ee=a.pingedLanes;a=a.warmLanes;var te=p&134217727;return te!==0?(p=te&~R,p!==0?b=Nt(p):(ee&=te,ee!==0?b=Nt(ee):h||(h=te&~a,h!==0&&(b=Nt(h))))):(te=p&~R,te!==0?b=Nt(te):ee!==0?b=Nt(ee):h||(h=p&~a,h!==0&&(b=Nt(h)))),b===0?0:c!==0&&c!==b&&(c&R)===0&&(R=b&-b,h=c&-c,R>=h||R===32&&(h&4194048)!==0)?c:b}function un(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function pt(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qe(){var a=Et;return Et<<=1,(Et&4194048)===0&&(Et=256),a}function Dn(){var a=mn;return mn<<=1,(mn&62914560)===0&&(mn=4194304),a}function Pn(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function Wt(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function On(a,c,h,p,b,R){var ee=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var te=a.entanglements,ae=a.expirationTimes,Ee=a.hiddenUpdates;for(h=ee&~h;0<h;){var Ve=31-et(h),Fe=1<<Ve;te[Ve]=0,ae[Ve]=-1;var Ae=Ee[Ve];if(Ae!==null)for(Ee[Ve]=null,Ve=0;Ve<Ae.length;Ve++){var Ce=Ae[Ve];Ce!==null&&(Ce.lane&=-536870913)}h&=~Fe}p!==0&&jn(a,p,0),R!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=R&~(ee&~c))}function jn(a,c,h){a.pendingLanes|=c,a.suspendedLanes&=~c;var p=31-et(c);a.entangledLanes|=c,a.entanglements[p]=a.entanglements[p]|1073741824|h&4194090}function Fn(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var p=31-et(h),b=1<<p;b&c|a[p]&c&&(a[p]|=c),h&=~b}}function Tn(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Nn(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Mn(){var a=ce.p;return a!==0?a:(a=window.event,a===void 0?32:Ff(a.type))}function gs(a,c){var h=ce.p;try{return ce.p=a,c()}finally{ce.p=h}}var Ct=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Ct,pn="__reactProps$"+Ct,Sn="__reactContainer$"+Ct,Vs="__reactEvents$"+Ct,ir="__reactListeners$"+Ct,ns="__reactHandles$"+Ct,$s="__reactResources$"+Ct,Ms="__reactMarker$"+Ct;function Pr(a){delete a[Dt],delete a[pn],delete a[Vs],delete a[ir],delete a[ns]}function or(a){var c=a[Dt];if(c)return c;for(var h=a.parentNode;h;){if(c=h[Sn]||h[Dt]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(a=Af(a);a!==null;){if(h=a[Dt])return h;a=Af(a)}return c}a=h,h=a.parentNode}return null}function Hs(a){if(a=a[Dt]||a[Sn]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function qs(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(s(33))}function cs(a){var c=a[$s];return c||(c=a[$s]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function zn(a){a[Ms]=!0}var yo=new Set,Ci={};function Ls(a,c){ar(a,c),ar(a+"Capture",c)}function ar(a,c){for(Ci[a]=c,a=0;a<c.length;a++)yo.add(c[a])}var xa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ya={},ei={};function _a(a){return me.call(ei,a)?!0:me.call(ya,a)?!1:xa.test(a)?ei[a]=!0:(ya[a]=!0,!1)}function Ir(a,c,h){if(_a(c))if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var p=c.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+h)}}function Gs(a,c,h){if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+h)}}function ss(a,c,h,p){if(p===null)a.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(c,h,""+p)}}var ti,va;function lr(a){if(ti===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);ti=c&&c[1]||"",va=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ti+a+va}var Pi=!1;function Ii(a,c){if(!a||Pi)return"";Pi=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(c){var Fe=function(){throw Error()};if(Object.defineProperty(Fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Fe,[])}catch(Ce){var Ae=Ce}Reflect.construct(a,[],Fe)}else{try{Fe.call()}catch(Ce){Ae=Ce}a.call(Fe.prototype)}}else{try{throw Error()}catch(Ce){Ae=Ce}(Fe=a())&&typeof Fe.catch=="function"&&Fe.catch(function(){})}}catch(Ce){if(Ce&&Ae&&typeof Ce.stack=="string")return[Ce.stack,Ae.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=p.DetermineComponentFrameRoot(),ee=R[0],te=R[1];if(ee&&te){var ae=ee.split(`
`),Ee=te.split(`
`);for(b=p=0;p<ae.length&&!ae[p].includes("DetermineComponentFrameRoot");)p++;for(;b<Ee.length&&!Ee[b].includes("DetermineComponentFrameRoot");)b++;if(p===ae.length||b===Ee.length)for(p=ae.length-1,b=Ee.length-1;1<=p&&0<=b&&ae[p]!==Ee[b];)b--;for(;1<=p&&0<=b;p--,b--)if(ae[p]!==Ee[b]){if(p!==1||b!==1)do if(p--,b--,0>b||ae[p]!==Ee[b]){var Ve=`
`+ae[p].replace(" at new "," at ");return a.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",a.displayName)),Ve}while(1<=p&&0<=b);break}}}finally{Pi=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?lr(h):""}function _o(a){switch(a.tag){case 26:case 27:case 5:return lr(a.type);case 16:return lr("Lazy");case 13:return lr("Suspense");case 19:return lr("SuspenseList");case 0:case 15:return Ii(a.type,!1);case 11:return Ii(a.type.render,!1);case 1:return Ii(a.type,!0);case 31:return lr("Activity");default:return""}}function ji(a){try{var c="";do c+=_o(a),a=a.return;while(a);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function us(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function vo(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ml(a){var c=vo(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),p=""+a[c];if(!a.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,R=h.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return b.call(this)},set:function(ee){p=""+ee,R.call(this,ee)}}),Object.defineProperty(a,c,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(ee){p=""+ee},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Ni(a){a._valueTracker||(a._valueTracker=Ml(a))}function bo(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var h=c.getValue(),p="";return a&&(p=vo(a)?a.checked?"true":"false":a.value),a=p,a!==h?(c.setValue(a),!0):!1}function ni(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Ll=/[\n"\\]/g;function Hn(a){return a.replace(Ll,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function xs(a,c,h,p,b,R,ee,te){a.name="",ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?a.type=ee:a.removeAttribute("type"),c!=null?ee==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+us(c)):a.value!==""+us(c)&&(a.value=""+us(c)):ee!=="submit"&&ee!=="reset"||a.removeAttribute("value"),c!=null?jr(a,ee,us(c)):h!=null?jr(a,ee,us(h)):p!=null&&a.removeAttribute("value"),b==null&&R!=null&&(a.defaultChecked=!!R),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?a.name=""+us(te):a.removeAttribute("name")}function si(a,c,h,p,b,R,ee,te){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(a.type=R),c!=null||h!=null){if(!(R!=="submit"&&R!=="reset"||c!=null))return;h=h!=null?""+us(h):"",c=c!=null?""+us(c):h,te||c===a.value||(a.value=c),a.defaultValue=c}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=te?a.checked:!!p,a.defaultChecked=!!p,ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(a.name=ee)}function jr(a,c,h){c==="number"&&ni(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function cr(a,c,h,p){if(a=a.options,c){c={};for(var b=0;b<h.length;b++)c["$"+h[b]]=!0;for(h=0;h<a.length;h++)b=c.hasOwnProperty("$"+a[h].value),a[h].selected!==b&&(a[h].selected=b),b&&p&&(a[h].defaultSelected=!0)}else{for(h=""+us(h),c=null,b=0;b<a.length;b++){if(a[b].value===h){a[b].selected=!0,p&&(a[b].defaultSelected=!0);return}c!==null||a[b].disabled||(c=a[b])}c!==null&&(c.selected=!0)}}function En(a,c,h){if(c!=null&&(c=""+us(c),c!==a.value&&(a.value=c),h==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=h!=null?""+us(h):""}function ri(a,c,h,p){if(c==null){if(p!=null){if(h!=null)throw Error(s(92));if(ge(p)){if(1<p.length)throw Error(s(93));p=p[0]}h=p}h==null&&(h=""),c=h}h=us(c),a.defaultValue=h,p=a.textContent,p===h&&p!==""&&p!==null&&(a.value=p)}function As(a,c){if(c){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=c;return}}a.textContent=c}var ii=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ba(a,c,h){var p=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?p?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":p?a.setProperty(c,h):typeof h!="number"||h===0||ii.has(c)?c==="float"?a.cssFloat=h:a[c]=(""+h).trim():a[c]=h+"px"}function Eo(a,c,h){if(c!=null&&typeof c!="object")throw Error(s(62));if(a=a.style,h!=null){for(var p in h)!h.hasOwnProperty(p)||c!=null&&c.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var b in c)p=c[b],c.hasOwnProperty(b)&&h[b]!==p&&ba(a,b,p)}else for(var R in c)c.hasOwnProperty(R)&&ba(a,R,c[R])}function wo(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Di(a){return Fl.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var ur=null;function Ts(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var dr=null,hr=null;function Ro(a){var c=Hs(a);if(c&&(a=c.stateNode)){var h=a[pn]||null;e:switch(a=c.stateNode,c.type){case"input":if(xs(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Hn(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var p=h[c];if(p!==a&&p.form===a.form){var b=p[pn]||null;if(!b)throw Error(s(90));xs(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(c=0;c<h.length;c++)p=h[c],p.form===a.form&&bo(p)}break e;case"textarea":En(a,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&cr(a,!!h.multiple,c,!1)}}}var Ws=!1;function Ea(a,c,h){if(Ws)return a(c,h);Ws=!0;try{var p=a(c);return p}finally{if(Ws=!1,(dr!==null||hr!==null)&&(pl(),dr&&(c=dr,a=hr,hr=dr=null,Ro(c),a)))for(c=0;c<a.length;c++)Ro(a[c])}}function oi(a,c){var h=a.stateNode;if(h===null)return null;var p=h[pn]||null;if(p===null)return null;h=p[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(s(231,c,typeof h));return h}var Bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ss=!1;if(Bs)try{var ai={};Object.defineProperty(ai,"passive",{get:function(){Ss=!0}}),window.addEventListener("test",ai,ai),window.removeEventListener("test",ai,ai)}catch{Ss=!1}var Ys=null,Nr=null,fr=null;function Ao(){if(fr)return fr;var a,c=Nr,h=c.length,p,b="value"in Ys?Ys.value:Ys.textContent,R=b.length;for(a=0;a<h&&c[a]===b[a];a++);var ee=h-a;for(p=1;p<=ee&&c[h-p]===b[R-p];p++);return fr=b.slice(a,1<p?1-p:void 0)}function Ks(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Xs(){return!0}function To(){return!1}function Qn(a){function c(h,p,b,R,ee){this._reactName=h,this._targetInst=b,this.type=p,this.nativeEvent=R,this.target=ee,this.currentTarget=null;for(var te in a)a.hasOwnProperty(te)&&(h=a[te],this[te]=h?h(R):R[te]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Xs:To,this.isPropagationStopped=To,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),c}var yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=Qn(yn),li=m({},yn,{view:0,detail:0}),wa=Qn(li),Oi,Vi,Qs,ci=m({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hi,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Qs&&(Qs&&a.type==="mousemove"?(Oi=a.screenX-Qs.screenX,Vi=a.screenY-Qs.screenY):Vi=Oi=0,Qs=a),Oi)},movementY:function(a){return"movementY"in a?a.movementY:Vi}}),Cs=Qn(ci),Ra=m({},ci,{dataTransfer:0}),zl=Qn(Ra),ui=m({},li,{relatedTarget:0}),Mi=Qn(ui),So=m({},yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Li=Qn(So),Aa=m({},yn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Bi=Qn(Aa),Ul=m({},yn,{data:0}),Co=Qn(Ul),di={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ta={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Po(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Sa[a])?!!c[a]:!1}function hi(){return Po}var Ca=m({},li,{key:function(a){if(a.key){var c=di[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Ks(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ta[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hi,charCode:function(a){return a.type==="keypress"?Ks(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ks(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Fi=Qn(Ca),Pa=m({},ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Io=Qn(Pa),mr=m({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hi}),Ia=Qn(mr),ja=m({},yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Na=Qn(ja),Da=m({},ci,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),zi=Qn(Da),ds=m({},yn,{newState:0,oldState:0}),ka=Qn(ds),Oa=[9,13,27,32],Js=Bs&&"CompositionEvent"in window,_=null;Bs&&"documentMode"in document&&(_=document.documentMode);var C=Bs&&"TextEvent"in window&&!_,Z=Bs&&(!Js||_&&8<_&&11>=_),ne=" ",ye=!1;function De(a,c){switch(a){case"keyup":return Oa.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function We(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var dn=!1;function Wn(a,c){switch(a){case"compositionend":return We(c);case"keypress":return c.which!==32?null:(ye=!0,ne);case"textInput":return a=c.data,a===ne&&ye?null:a;default:return null}}function hn(a,c){if(dn)return a==="compositionend"||!Js&&De(a,c)?(a=Ao(),fr=Nr=Ys=null,dn=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Z&&c.locale!=="ko"?null:c.data;default:return null}}var Jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yn(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!Jn[a.type]:c==="textarea"}function pr(a,c,h,p){dr?hr?hr.push(p):hr=[p]:dr=p,c=bl(c,"onChange"),0<c.length&&(h=new ki("onChange","change",null,h,p),a.push({event:h,listeners:c}))}var rs=null,Zs=null;function jo(a){pf(a,0)}function Va(a){var c=qs(a);if(bo(c))return a}function Du(a,c){if(a==="change")return c}var ku=!1;if(Bs){var $l;if(Bs){var Hl="oninput"in document;if(!Hl){var Ou=document.createElement("div");Ou.setAttribute("oninput","return;"),Hl=typeof Ou.oninput=="function"}$l=Hl}else $l=!1;ku=$l&&(!document.documentMode||9<document.documentMode)}function Vu(){rs&&(rs.detachEvent("onpropertychange",Mu),Zs=rs=null)}function Mu(a){if(a.propertyName==="value"&&Va(Zs)){var c=[];pr(c,Zs,a,Ts(a)),Ea(jo,c)}}function Gf(a,c,h){a==="focusin"?(Vu(),rs=c,Zs=h,rs.attachEvent("onpropertychange",Mu)):a==="focusout"&&Vu()}function Wf(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Va(Zs)}function Yf(a,c){if(a==="click")return Va(c)}function Kf(a,c){if(a==="input"||a==="change")return Va(c)}function Xf(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var ys=typeof Object.is=="function"?Object.is:Xf;function No(a,c){if(ys(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),p=Object.keys(c);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var b=h[p];if(!me.call(c,b)||!ys(a[b],c[b]))return!1}return!0}function Lu(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Bu(a,c){var h=Lu(a);a=0;for(var p;h;){if(h.nodeType===3){if(p=a+h.textContent.length,a<=c&&p>=c)return{node:h,offset:c-a};a=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Lu(h)}}function Fu(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?Fu(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function zu(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=ni(a.document);c instanceof a.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)a=c.contentWindow;else break;c=ni(a.document)}return c}function ql(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var Qf=Bs&&"documentMode"in document&&11>=document.documentMode,Ui=null,Gl=null,Do=null,Wl=!1;function Uu(a,c,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Wl||Ui==null||Ui!==ni(p)||(p=Ui,"selectionStart"in p&&ql(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Do&&No(Do,p)||(Do=p,p=bl(Gl,"onSelect"),0<p.length&&(c=new ki("onSelect","select",null,c,h),a.push({event:c,listeners:p}),c.target=Ui)))}function fi(a,c){var h={};return h[a.toLowerCase()]=c.toLowerCase(),h["Webkit"+a]="webkit"+c,h["Moz"+a]="moz"+c,h}var $i={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionrun:fi("Transition","TransitionRun"),transitionstart:fi("Transition","TransitionStart"),transitioncancel:fi("Transition","TransitionCancel"),transitionend:fi("Transition","TransitionEnd")},Yl={},$u={};Bs&&($u=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function mi(a){if(Yl[a])return Yl[a];if(!$i[a])return a;var c=$i[a],h;for(h in c)if(c.hasOwnProperty(h)&&h in $u)return Yl[a]=c[h];return a}var Hu=mi("animationend"),qu=mi("animationiteration"),Gu=mi("animationstart"),Jf=mi("transitionrun"),Zf=mi("transitionstart"),em=mi("transitioncancel"),Wu=mi("transitionend"),Yu=new Map,Kl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kl.push("scrollEnd");function Fs(a,c){Yu.set(a,c),Ls(c,[a])}var Ku=new WeakMap;function Ps(a,c){if(typeof a=="object"&&a!==null){var h=Ku.get(a);return h!==void 0?h:(c={value:a,source:c,stack:ji(c)},Ku.set(a,c),c)}return{value:a,source:c,stack:ji(c)}}var Is=[],Hi=0,Xl=0;function Ma(){for(var a=Hi,c=Xl=Hi=0;c<a;){var h=Is[c];Is[c++]=null;var p=Is[c];Is[c++]=null;var b=Is[c];Is[c++]=null;var R=Is[c];if(Is[c++]=null,p!==null&&b!==null){var ee=p.pending;ee===null?b.next=b:(b.next=ee.next,ee.next=b),p.pending=b}R!==0&&Xu(h,b,R)}}function La(a,c,h,p){Is[Hi++]=a,Is[Hi++]=c,Is[Hi++]=h,Is[Hi++]=p,Xl|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function Ql(a,c,h,p){return La(a,c,h,p),Ba(a)}function qi(a,c){return La(a,null,null,c),Ba(a)}function Xu(a,c,h){a.lanes|=h;var p=a.alternate;p!==null&&(p.lanes|=h);for(var b=!1,R=a.return;R!==null;)R.childLanes|=h,p=R.alternate,p!==null&&(p.childLanes|=h),R.tag===22&&(a=R.stateNode,a===null||a._visibility&1||(b=!0)),a=R,R=R.return;return a.tag===3?(R=a.stateNode,b&&c!==null&&(b=31-et(h),a=R.hiddenUpdates,p=a[b],p===null?a[b]=[c]:p.push(c),c.lane=h|536870912),R):null}function Ba(a){if(50<ra)throw ra=0,su=null,Error(s(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var Gi={};function tm(a,c,h,p){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _s(a,c,h,p){return new tm(a,c,h,p)}function Jl(a){return a=a.prototype,!(!a||!a.isReactComponent)}function gr(a,c){var h=a.alternate;return h===null?(h=_s(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function Qu(a,c){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,c=h.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function Fa(a,c,h,p,b,R){var ee=0;if(p=a,typeof a=="function")Jl(a)&&(ee=1);else if(typeof a=="string")ee=sp(a,h,Be.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case P:return a=_s(31,h,c,b),a.elementType=P,a.lanes=R,a;case E:return pi(h.children,b,R,c);case w:ee=8,b|=24;break;case A:return a=_s(12,h,c,b|2),a.elementType=A,a.lanes=R,a;case j:return a=_s(13,h,c,b),a.elementType=j,a.lanes=R,a;case H:return a=_s(19,h,c,b),a.elementType=H,a.lanes=R,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case I:case V:ee=10;break e;case D:ee=9;break e;case Y:ee=11;break e;case S:ee=14;break e;case T:ee=16,p=null;break e}ee=29,h=Error(s(130,a===null?"null":typeof a,"")),p=null}return c=_s(ee,h,c,b),c.elementType=a,c.type=p,c.lanes=R,c}function pi(a,c,h,p){return a=_s(7,a,p,c),a.lanes=h,a}function Zl(a,c,h){return a=_s(6,a,null,c),a.lanes=h,a}function ec(a,c,h){return c=_s(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Wi=[],Yi=0,za=null,Ua=0,js=[],Ns=0,gi=null,xr=1,yr="";function xi(a,c){Wi[Yi++]=Ua,Wi[Yi++]=za,za=a,Ua=c}function Ju(a,c,h){js[Ns++]=xr,js[Ns++]=yr,js[Ns++]=gi,gi=a;var p=xr;a=yr;var b=32-et(p)-1;p&=~(1<<b),h+=1;var R=32-et(c)+b;if(30<R){var ee=b-b%5;R=(p&(1<<ee)-1).toString(32),p>>=ee,b-=ee,xr=1<<32-et(c)+b|h<<b|p,yr=R+a}else xr=1<<R|h<<b|p,yr=a}function tc(a){a.return!==null&&(xi(a,1),Ju(a,1,0))}function nc(a){for(;a===za;)za=Wi[--Yi],Wi[Yi]=null,Ua=Wi[--Yi],Wi[Yi]=null;for(;a===gi;)gi=js[--Ns],js[Ns]=null,yr=js[--Ns],js[Ns]=null,xr=js[--Ns],js[Ns]=null}var hs=null,Ln=null,xn=!1,yi=null,er=!1,sc=Error(s(519));function _i(a){var c=Error(s(418,""));throw Vo(Ps(c,a)),sc}function Zu(a){var c=a.stateNode,h=a.type,p=a.memoizedProps;switch(c[Dt]=a,c[pn]=p,h){case"dialog":qt("cancel",c),qt("close",c);break;case"iframe":case"object":case"embed":qt("load",c);break;case"video":case"audio":for(h=0;h<oa.length;h++)qt(oa[h],c);break;case"source":qt("error",c);break;case"img":case"image":case"link":qt("error",c),qt("load",c);break;case"details":qt("toggle",c);break;case"input":qt("invalid",c),si(c,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Ni(c);break;case"select":qt("invalid",c);break;case"textarea":qt("invalid",c),ri(c,p.value,p.defaultValue,p.children),Ni(c)}h=p.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||p.suppressHydrationWarning===!0||_f(c.textContent,h)?(p.popover!=null&&(qt("beforetoggle",c),qt("toggle",c)),p.onScroll!=null&&qt("scroll",c),p.onScrollEnd!=null&&qt("scrollend",c),p.onClick!=null&&(c.onclick=El),c=!0):c=!1,c||_i(a)}function ed(a){for(hs=a.return;hs;)switch(hs.tag){case 5:case 13:er=!1;return;case 27:case 3:er=!0;return;default:hs=hs.return}}function ko(a){if(a!==hs)return!1;if(!xn)return ed(a),xn=!0,!1;var c=a.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||_u(a.type,a.memoizedProps)),h=!h),h&&Ln&&_i(a),ed(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(h=a.data,h==="/$"){if(c===0){Ln=Us(a.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;a=a.nextSibling}Ln=null}}else c===27?(c=Ln,Yr(a.type)?(a=wu,wu=null,Ln=a):Ln=c):Ln=hs?Us(a.stateNode.nextSibling):null;return!0}function Oo(){Ln=hs=null,xn=!1}function td(){var a=yi;return a!==null&&(ps===null?ps=a:ps.push.apply(ps,a),yi=null),a}function Vo(a){yi===null?yi=[a]:yi.push(a)}var rc=_e(null),vi=null,_r=null;function Dr(a,c,h){Re(rc,c._currentValue),c._currentValue=h}function vr(a){a._currentValue=rc.current,Se(rc)}function ic(a,c,h){for(;a!==null;){var p=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),a===h)break;a=a.return}}function oc(a,c,h,p){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var R=b.dependencies;if(R!==null){var ee=b.child;R=R.firstContext;e:for(;R!==null;){var te=R;R=b;for(var ae=0;ae<c.length;ae++)if(te.context===c[ae]){R.lanes|=h,te=R.alternate,te!==null&&(te.lanes|=h),ic(R.return,h,a),p||(ee=null);break e}R=te.next}}else if(b.tag===18){if(ee=b.return,ee===null)throw Error(s(341));ee.lanes|=h,R=ee.alternate,R!==null&&(R.lanes|=h),ic(ee,h,a),ee=null}else ee=b.child;if(ee!==null)ee.return=b;else for(ee=b;ee!==null;){if(ee===a){ee=null;break}if(b=ee.sibling,b!==null){b.return=ee.return,ee=b;break}ee=ee.return}b=ee}}function Mo(a,c,h,p){a=null;for(var b=c,R=!1;b!==null;){if(!R){if((b.flags&524288)!==0)R=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var ee=b.alternate;if(ee===null)throw Error(s(387));if(ee=ee.memoizedProps,ee!==null){var te=b.type;ys(b.pendingProps.value,ee.value)||(a!==null?a.push(te):a=[te])}}else if(b===Te.current){if(ee=b.alternate,ee===null)throw Error(s(387));ee.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(ha):a=[ha])}b=b.return}a!==null&&oc(c,a,h,p),c.flags|=262144}function $a(a){for(a=a.firstContext;a!==null;){if(!ys(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function bi(a){vi=a,_r=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ls(a){return nd(vi,a)}function Ha(a,c){return vi===null&&bi(a),nd(a,c)}function nd(a,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},_r===null){if(a===null)throw Error(s(308));_r=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else _r=_r.next=c;return h}var nm=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(h,p){a.push(p)}};this.abort=function(){c.aborted=!0,a.forEach(function(h){return h()})}},sm=t.unstable_scheduleCallback,rm=t.unstable_NormalPriority,Kn={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ac(){return{controller:new nm,data:new Map,refCount:0}}function Lo(a){a.refCount--,a.refCount===0&&sm(rm,function(){a.controller.abort()})}var Bo=null,lc=0,Ki=0,Xi=null;function im(a,c){if(Bo===null){var h=Bo=[];lc=0,Ki=uu(),Xi={status:"pending",value:void 0,then:function(p){h.push(p)}}}return lc++,c.then(sd,sd),c}function sd(){if(--lc===0&&Bo!==null){Xi!==null&&(Xi.status="fulfilled");var a=Bo;Bo=null,Ki=0,Xi=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function om(a,c){var h=[],p={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return a.then(function(){p.status="fulfilled",p.value=c;for(var b=0;b<h.length;b++)(0,h[b])(c)},function(b){for(p.status="rejected",p.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),p}var rd=oe.S;oe.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&im(a,c),rd!==null&&rd(a,c)};var Ei=_e(null);function cc(){var a=Ei.current;return a!==null?a:In.pooledCache}function qa(a,c){c===null?Re(Ei,Ei.current):Re(Ei,c.pool)}function od(){var a=cc();return a===null?null:{parent:Kn._currentValue,pool:a}}var Fo=Error(s(460)),ad=Error(s(474)),Ga=Error(s(542)),uc={then:function(){}};function ld(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Wa(){}function cd(a,c,h){switch(h=a[h],h===void 0?a.push(c):h!==c&&(c.then(Wa,Wa),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,dd(a),a;default:if(typeof c.status=="string")c.then(Wa,Wa);else{if(a=In,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=c,a.status="pending",a.then(function(p){if(c.status==="pending"){var b=c;b.status="fulfilled",b.value=p}},function(p){if(c.status==="pending"){var b=c;b.status="rejected",b.reason=p}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,dd(a),a}throw zo=c,Fo}}var zo=null;function ud(){if(zo===null)throw Error(s(459));var a=zo;return zo=null,a}function dd(a){if(a===Fo||a===Ga)throw Error(s(483))}var kr=!1;function dc(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hc(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Or(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Vr(a,c,h){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(vn&2)!==0){var b=p.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),p.pending=c,c=Ba(a),Xu(a,null,h),c}return La(a,p,c,h),Ba(a)}function Uo(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var p=c.lanes;p&=a.pendingLanes,h|=p,c.lanes=h,Fn(a,h)}}function fc(a,c){var h=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var b=null,R=null;if(h=h.firstBaseUpdate,h!==null){do{var ee={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};R===null?b=R=ee:R=R.next=ee,h=h.next}while(h!==null);R===null?b=R=c:R=R.next=c}else b=R=c;h={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:R,shared:p.shared,callbacks:p.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}var mc=!1;function $o(){if(mc){var a=Xi;if(a!==null)throw a}}function Ho(a,c,h,p){mc=!1;var b=a.updateQueue;kr=!1;var R=b.firstBaseUpdate,ee=b.lastBaseUpdate,te=b.shared.pending;if(te!==null){b.shared.pending=null;var ae=te,Ee=ae.next;ae.next=null,ee===null?R=Ee:ee.next=Ee,ee=ae;var Ve=a.alternate;Ve!==null&&(Ve=Ve.updateQueue,te=Ve.lastBaseUpdate,te!==ee&&(te===null?Ve.firstBaseUpdate=Ee:te.next=Ee,Ve.lastBaseUpdate=ae))}if(R!==null){var Fe=b.baseState;ee=0,Ve=Ee=ae=null,te=R;do{var Ae=te.lane&-536870913,Ce=Ae!==te.lane;if(Ce?(fn&Ae)===Ae:(p&Ae)===Ae){Ae!==0&&Ae===Ki&&(mc=!0),Ve!==null&&(Ve=Ve.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var rt=a,tt=te;Ae=c;var An=h;switch(tt.tag){case 1:if(rt=tt.payload,typeof rt=="function"){Fe=rt.call(An,Fe,Ae);break e}Fe=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=tt.payload,Ae=typeof rt=="function"?rt.call(An,Fe,Ae):rt,Ae==null)break e;Fe=m({},Fe,Ae);break e;case 2:kr=!0}}Ae=te.callback,Ae!==null&&(a.flags|=64,Ce&&(a.flags|=8192),Ce=b.callbacks,Ce===null?b.callbacks=[Ae]:Ce.push(Ae))}else Ce={lane:Ae,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Ve===null?(Ee=Ve=Ce,ae=Fe):Ve=Ve.next=Ce,ee|=Ae;if(te=te.next,te===null){if(te=b.shared.pending,te===null)break;Ce=te,te=Ce.next,Ce.next=null,b.lastBaseUpdate=Ce,b.shared.pending=null}}while(!0);Ve===null&&(ae=Fe),b.baseState=ae,b.firstBaseUpdate=Ee,b.lastBaseUpdate=Ve,R===null&&(b.shared.lanes=0),Hr|=ee,a.lanes=ee,a.memoizedState=Fe}}function hd(a,c){if(typeof a!="function")throw Error(s(191,a));a.call(c)}function fd(a,c){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)hd(h[a],c)}var Qi=_e(null),Ya=_e(0);function md(a,c){a=Sr,Re(Ya,a),Re(Qi,c),Sr=a|c.baseLanes}function pc(){Re(Ya,Sr),Re(Qi,Qi.current)}function gc(){Sr=Ya.current,Se(Qi),Se(Ya)}var Mr=0,kt=null,wn=null,qn=null,Ka=!1,Ji=!1,wi=!1,Xa=0,qo=0,Zi=null,am=0;function Un(){throw Error(s(321))}function xc(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!ys(a[h],c[h]))return!1;return!0}function yc(a,c,h,p,b,R){return Mr=R,kt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,oe.H=a===null||a.memoizedState===null?Qd:Jd,wi=!1,R=h(p,b),wi=!1,Ji&&(R=gd(c,h,p,b)),pd(a),R}function pd(a){oe.H=nl;var c=wn!==null&&wn.next!==null;if(Mr=0,qn=wn=kt=null,Ka=!1,qo=0,Zi=null,c)throw Error(s(300));a===null||Zn||(a=a.dependencies,a!==null&&$a(a)&&(Zn=!0))}function gd(a,c,h,p){kt=a;var b=0;do{if(Ji&&(Zi=null),qo=0,Ji=!1,25<=b)throw Error(s(301));if(b+=1,qn=wn=null,a.updateQueue!=null){var R=a.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}oe.H=mm,R=c(h,p)}while(Ji);return R}function lm(){var a=oe.H,c=a.useState()[0];return c=typeof c.then=="function"?Go(c):c,a=a.useState()[0],(wn!==null?wn.memoizedState:null)!==a&&(kt.flags|=1024),c}function _c(){var a=Xa!==0;return Xa=0,a}function vc(a,c,h){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~h}function bc(a){if(Ka){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Ka=!1}Mr=0,qn=wn=kt=null,Ji=!1,qo=Xa=0,Zi=null}function fs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?kt.memoizedState=qn=a:qn=qn.next=a,qn}function Gn(){if(wn===null){var a=kt.alternate;a=a!==null?a.memoizedState:null}else a=wn.next;var c=qn===null?kt.memoizedState:qn.next;if(c!==null)qn=c,wn=a;else{if(a===null)throw kt.alternate===null?Error(s(467)):Error(s(310));wn=a,a={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},qn===null?kt.memoizedState=qn=a:qn=qn.next=a}return qn}function Ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Go(a){var c=qo;return qo+=1,Zi===null&&(Zi=[]),a=cd(Zi,a,c),c=kt,(qn===null?c.memoizedState:qn.next)===null&&(c=c.alternate,oe.H=c===null||c.memoizedState===null?Qd:Jd),a}function Qa(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Go(a);if(a.$$typeof===V)return ls(a)}throw Error(s(438,String(a)))}function wc(a){var c=null,h=kt.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var p=kt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(c={data:p.data.map(function(b){return b.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=Ec(),kt.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(a),p=0;p<a;p++)h[p]=U;return c.index++,h}function br(a,c){return typeof c=="function"?c(a):c}function Ja(a){var c=Gn();return Rc(c,wn,a)}function Rc(a,c,h){var p=a.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=h;var b=a.baseQueue,R=p.pending;if(R!==null){if(b!==null){var ee=b.next;b.next=R.next,R.next=ee}c.baseQueue=b=R,p.pending=null}if(R=a.baseState,b===null)a.memoizedState=R;else{c=b.next;var te=ee=null,ae=null,Ee=c,Ve=!1;do{var Fe=Ee.lane&-536870913;if(Fe!==Ee.lane?(fn&Fe)===Fe:(Mr&Fe)===Fe){var Ae=Ee.revertLane;if(Ae===0)ae!==null&&(ae=ae.next={lane:0,revertLane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),Fe===Ki&&(Ve=!0);else if((Mr&Ae)===Ae){Ee=Ee.next,Ae===Ki&&(Ve=!0);continue}else Fe={lane:0,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ae===null?(te=ae=Fe,ee=R):ae=ae.next=Fe,kt.lanes|=Ae,Hr|=Ae;Fe=Ee.action,wi&&h(R,Fe),R=Ee.hasEagerState?Ee.eagerState:h(R,Fe)}else Ae={lane:Fe,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ae===null?(te=ae=Ae,ee=R):ae=ae.next=Ae,kt.lanes|=Fe,Hr|=Fe;Ee=Ee.next}while(Ee!==null&&Ee!==c);if(ae===null?ee=R:ae.next=te,!ys(R,a.memoizedState)&&(Zn=!0,Ve&&(h=Xi,h!==null)))throw h;a.memoizedState=R,a.baseState=ee,a.baseQueue=ae,p.lastRenderedState=R}return b===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function Ac(a){var c=Gn(),h=c.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=a;var p=h.dispatch,b=h.pending,R=c.memoizedState;if(b!==null){h.pending=null;var ee=b=b.next;do R=a(R,ee.action),ee=ee.next;while(ee!==b);ys(R,c.memoizedState)||(Zn=!0),c.memoizedState=R,c.baseQueue===null&&(c.baseState=R),h.lastRenderedState=R}return[R,p]}function xd(a,c,h){var p=kt,b=Gn(),R=xn;if(R){if(h===void 0)throw Error(s(407));h=h()}else h=c();var ee=!ys((wn||b).memoizedState,h);ee&&(b.memoizedState=h,Zn=!0),b=b.queue;var te=vd.bind(null,p,b,a);if(Wo(2048,8,te,[a]),b.getSnapshot!==c||ee||qn!==null&&qn.memoizedState.tag&1){if(p.flags|=2048,eo(9,Za(),_d.bind(null,p,b,h,c),null),In===null)throw Error(s(349));R||(Mr&124)!==0||yd(p,c,h)}return h}function yd(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=kt.updateQueue,c===null?(c=Ec(),kt.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function _d(a,c,h,p){c.value=h,c.getSnapshot=p,bd(c)&&Ed(a)}function vd(a,c,h){return h(function(){bd(c)&&Ed(a)})}function bd(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!ys(a,h)}catch{return!0}}function Ed(a){var c=qi(a,2);c!==null&&Rs(c,a,2)}function Tc(a){var c=fs();if(typeof a=="function"){var h=a;if(a=h(),wi){Xe(!0);try{h()}finally{Xe(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:a},c}function wd(a,c,h,p){return a.baseState=h,Rc(a,wn,typeof p=="function"?p:br)}function cm(a,c,h,p,b){if(tl(a))throw Error(s(485));if(a=c.action,a!==null){var R={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ee){R.listeners.push(ee)}};oe.T!==null?h(!0):R.isTransition=!1,p(R),h=c.pending,h===null?(R.next=c.pending=R,Rd(c,R)):(R.next=h.next,c.pending=h.next=R)}}function Rd(a,c){var h=c.action,p=c.payload,b=a.state;if(c.isTransition){var R=oe.T,ee={};oe.T=ee;try{var te=h(b,p),ae=oe.S;ae!==null&&ae(ee,te),Ad(a,c,te)}catch(Ee){Sc(a,c,Ee)}finally{oe.T=R}}else try{R=h(b,p),Ad(a,c,R)}catch(Ee){Sc(a,c,Ee)}}function Ad(a,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(p){Td(a,c,p)},function(p){return Sc(a,c,p)}):Td(a,c,h)}function Td(a,c,h){c.status="fulfilled",c.value=h,Sd(c),a.state=h,c=a.pending,c!==null&&(h=c.next,h===c?a.pending=null:(h=h.next,c.next=h,Rd(a,h)))}function Sc(a,c,h){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do c.status="rejected",c.reason=h,Sd(c),c=c.next;while(c!==p)}a.action=null}function Sd(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function Cd(a,c){return c}function Pd(a,c){if(xn){var h=In.formState;if(h!==null){e:{var p=kt;if(xn){if(Ln){t:{for(var b=Ln,R=er;b.nodeType!==8;){if(!R){b=null;break t}if(b=Us(b.nextSibling),b===null){b=null;break t}}R=b.data,b=R==="F!"||R==="F"?b:null}if(b){Ln=Us(b.nextSibling),p=b.data==="F!";break e}}_i(p)}p=!1}p&&(c=h[0])}}return h=fs(),h.memoizedState=h.baseState=c,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cd,lastRenderedState:c},h.queue=p,h=Yd.bind(null,kt,p),p.dispatch=h,p=Tc(!1),R=Nc.bind(null,kt,!1,p.queue),p=fs(),b={state:c,dispatch:null,action:a,pending:null},p.queue=b,h=cm.bind(null,kt,b,R,h),b.dispatch=h,p.memoizedState=a,[c,h,!1]}function Id(a){var c=Gn();return jd(c,wn,a)}function jd(a,c,h){if(c=Rc(a,c,Cd)[0],a=Ja(br)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var p=Go(c)}catch(ee){throw ee===Fo?Ga:ee}else p=c;c=Gn();var b=c.queue,R=b.dispatch;return h!==c.memoizedState&&(kt.flags|=2048,eo(9,Za(),um.bind(null,b,h),null)),[p,R,a]}function um(a,c){a.action=c}function Nd(a){var c=Gn(),h=wn;if(h!==null)return jd(c,h,a);Gn(),c=c.memoizedState,h=Gn();var p=h.queue.dispatch;return h.memoizedState=a,[c,p,!1]}function eo(a,c,h,p){return a={tag:a,create:h,deps:p,inst:c,next:null},c=kt.updateQueue,c===null&&(c=Ec(),kt.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=a.next=a:(p=h.next,h.next=a,a.next=p,c.lastEffect=a),a}function Za(){return{destroy:void 0,resource:void 0}}function Dd(){return Gn().memoizedState}function el(a,c,h,p){var b=fs();p=p===void 0?null:p,kt.flags|=a,b.memoizedState=eo(1|c,Za(),h,p)}function Wo(a,c,h,p){var b=Gn();p=p===void 0?null:p;var R=b.memoizedState.inst;wn!==null&&p!==null&&xc(p,wn.memoizedState.deps)?b.memoizedState=eo(c,R,h,p):(kt.flags|=a,b.memoizedState=eo(1|c,R,h,p))}function kd(a,c){el(8390656,8,a,c)}function Od(a,c){Wo(2048,8,a,c)}function Vd(a,c){return Wo(4,2,a,c)}function Md(a,c){return Wo(4,4,a,c)}function Ld(a,c){if(typeof c=="function"){a=a();var h=c(a);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Bd(a,c,h){h=h!=null?h.concat([a]):null,Wo(4,4,Ld.bind(null,c,a),h)}function Cc(){}function Fd(a,c){var h=Gn();c=c===void 0?null:c;var p=h.memoizedState;return c!==null&&xc(c,p[1])?p[0]:(h.memoizedState=[a,c],a)}function zd(a,c){var h=Gn();c=c===void 0?null:c;var p=h.memoizedState;if(c!==null&&xc(c,p[1]))return p[0];if(p=a(),wi){Xe(!0);try{a()}finally{Xe(!1)}}return h.memoizedState=[p,c],p}function Pc(a,c,h){return h===void 0||(Mr&1073741824)!==0?a.memoizedState=c:(a.memoizedState=h,a=qh(),kt.lanes|=a,Hr|=a,h)}function Ud(a,c,h,p){return ys(h,c)?h:Qi.current!==null?(a=Pc(a,h,p),ys(a,c)||(Zn=!0),a):(Mr&42)===0?(Zn=!0,a.memoizedState=h):(a=qh(),kt.lanes|=a,Hr|=a,c)}function $d(a,c,h,p,b){var R=ce.p;ce.p=R!==0&&8>R?R:8;var ee=oe.T,te={};oe.T=te,Nc(a,!1,c,h);try{var ae=b(),Ee=oe.S;if(Ee!==null&&Ee(te,ae),ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Ve=om(ae,p);Yo(a,c,Ve,ws(a))}else Yo(a,c,p,ws(a))}catch(Fe){Yo(a,c,{then:function(){},status:"rejected",reason:Fe},ws())}finally{ce.p=R,oe.T=ee}}function dm(){}function Ic(a,c,h,p){if(a.tag!==5)throw Error(s(476));var b=Hd(a).queue;$d(a,b,c,ie,h===null?dm:function(){return qd(a),h(p)})}function Hd(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:ie},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:h},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function qd(a){var c=Hd(a).next.queue;Yo(a,c,{},ws())}function jc(){return ls(ha)}function Gd(){return Gn().memoizedState}function Wd(){return Gn().memoizedState}function hm(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var h=ws();a=Or(h);var p=Vr(c,a,h);p!==null&&(Rs(p,c,h),Uo(p,c,h)),c={cache:ac()},a.payload=c;return}c=c.return}}function fm(a,c,h){var p=ws();h={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},tl(a)?Kd(c,h):(h=Ql(a,c,h,p),h!==null&&(Rs(h,a,p),Xd(h,c,p)))}function Yd(a,c,h){var p=ws();Yo(a,c,h,p)}function Yo(a,c,h,p){var b={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(tl(a))Kd(c,b);else{var R=a.alternate;if(a.lanes===0&&(R===null||R.lanes===0)&&(R=c.lastRenderedReducer,R!==null))try{var ee=c.lastRenderedState,te=R(ee,h);if(b.hasEagerState=!0,b.eagerState=te,ys(te,ee))return La(a,c,b,0),In===null&&Ma(),!1}catch{}finally{}if(h=Ql(a,c,b,p),h!==null)return Rs(h,a,p),Xd(h,c,p),!0}return!1}function Nc(a,c,h,p){if(p={lane:2,revertLane:uu(),action:p,hasEagerState:!1,eagerState:null,next:null},tl(a)){if(c)throw Error(s(479))}else c=Ql(a,h,p,2),c!==null&&Rs(c,a,2)}function tl(a){var c=a.alternate;return a===kt||c!==null&&c===kt}function Kd(a,c){Ji=Ka=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function Xd(a,c,h){if((h&4194048)!==0){var p=c.lanes;p&=a.pendingLanes,h|=p,c.lanes=h,Fn(a,h)}}var nl={readContext:ls,use:Qa,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useLayoutEffect:Un,useInsertionEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useSyncExternalStore:Un,useId:Un,useHostTransitionStatus:Un,useFormState:Un,useActionState:Un,useOptimistic:Un,useMemoCache:Un,useCacheRefresh:Un},Qd={readContext:ls,use:Qa,useCallback:function(a,c){return fs().memoizedState=[a,c===void 0?null:c],a},useContext:ls,useEffect:kd,useImperativeHandle:function(a,c,h){h=h!=null?h.concat([a]):null,el(4194308,4,Ld.bind(null,c,a),h)},useLayoutEffect:function(a,c){return el(4194308,4,a,c)},useInsertionEffect:function(a,c){el(4,2,a,c)},useMemo:function(a,c){var h=fs();c=c===void 0?null:c;var p=a();if(wi){Xe(!0);try{a()}finally{Xe(!1)}}return h.memoizedState=[p,c],p},useReducer:function(a,c,h){var p=fs();if(h!==void 0){var b=h(c);if(wi){Xe(!0);try{h(c)}finally{Xe(!1)}}}else b=c;return p.memoizedState=p.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},p.queue=a,a=a.dispatch=fm.bind(null,kt,a),[p.memoizedState,a]},useRef:function(a){var c=fs();return a={current:a},c.memoizedState=a},useState:function(a){a=Tc(a);var c=a.queue,h=Yd.bind(null,kt,c);return c.dispatch=h,[a.memoizedState,h]},useDebugValue:Cc,useDeferredValue:function(a,c){var h=fs();return Pc(h,a,c)},useTransition:function(){var a=Tc(!1);return a=$d.bind(null,kt,a.queue,!0,!1),fs().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,h){var p=kt,b=fs();if(xn){if(h===void 0)throw Error(s(407));h=h()}else{if(h=c(),In===null)throw Error(s(349));(fn&124)!==0||yd(p,c,h)}b.memoizedState=h;var R={value:h,getSnapshot:c};return b.queue=R,kd(vd.bind(null,p,R,a),[a]),p.flags|=2048,eo(9,Za(),_d.bind(null,p,R,h,c),null),h},useId:function(){var a=fs(),c=In.identifierPrefix;if(xn){var h=yr,p=xr;h=(p&~(1<<32-et(p)-1)).toString(32)+h,c="«"+c+"R"+h,h=Xa++,0<h&&(c+="H"+h.toString(32)),c+="»"}else h=am++,c="«"+c+"r"+h.toString(32)+"»";return a.memoizedState=c},useHostTransitionStatus:jc,useFormState:Pd,useActionState:Pd,useOptimistic:function(a){var c=fs();c.memoizedState=c.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=Nc.bind(null,kt,!0,h),h.dispatch=c,[a,c]},useMemoCache:wc,useCacheRefresh:function(){return fs().memoizedState=hm.bind(null,kt)}},Jd={readContext:ls,use:Qa,useCallback:Fd,useContext:ls,useEffect:Od,useImperativeHandle:Bd,useInsertionEffect:Vd,useLayoutEffect:Md,useMemo:zd,useReducer:Ja,useRef:Dd,useState:function(){return Ja(br)},useDebugValue:Cc,useDeferredValue:function(a,c){var h=Gn();return Ud(h,wn.memoizedState,a,c)},useTransition:function(){var a=Ja(br)[0],c=Gn().memoizedState;return[typeof a=="boolean"?a:Go(a),c]},useSyncExternalStore:xd,useId:Gd,useHostTransitionStatus:jc,useFormState:Id,useActionState:Id,useOptimistic:function(a,c){var h=Gn();return wd(h,wn,a,c)},useMemoCache:wc,useCacheRefresh:Wd},mm={readContext:ls,use:Qa,useCallback:Fd,useContext:ls,useEffect:Od,useImperativeHandle:Bd,useInsertionEffect:Vd,useLayoutEffect:Md,useMemo:zd,useReducer:Ac,useRef:Dd,useState:function(){return Ac(br)},useDebugValue:Cc,useDeferredValue:function(a,c){var h=Gn();return wn===null?Pc(h,a,c):Ud(h,wn.memoizedState,a,c)},useTransition:function(){var a=Ac(br)[0],c=Gn().memoizedState;return[typeof a=="boolean"?a:Go(a),c]},useSyncExternalStore:xd,useId:Gd,useHostTransitionStatus:jc,useFormState:Nd,useActionState:Nd,useOptimistic:function(a,c){var h=Gn();return wn!==null?wd(h,wn,a,c):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:wc,useCacheRefresh:Wd},no=null,Ko=0;function sl(a){var c=Ko;return Ko+=1,no===null&&(no=[]),cd(no,a,c)}function Xo(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function rl(a,c){throw c.$$typeof===g?Error(s(525)):(a=Object.prototype.toString.call(c),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function Zd(a){var c=a._init;return c(a._payload)}function eh(a){function c(pe,fe){if(a){var be=pe.deletions;be===null?(pe.deletions=[fe],pe.flags|=16):be.push(fe)}}function h(pe,fe){if(!a)return null;for(;fe!==null;)c(pe,fe),fe=fe.sibling;return null}function p(pe){for(var fe=new Map;pe!==null;)pe.key!==null?fe.set(pe.key,pe):fe.set(pe.index,pe),pe=pe.sibling;return fe}function b(pe,fe){return pe=gr(pe,fe),pe.index=0,pe.sibling=null,pe}function R(pe,fe,be){return pe.index=be,a?(be=pe.alternate,be!==null?(be=be.index,be<fe?(pe.flags|=67108866,fe):be):(pe.flags|=67108866,fe)):(pe.flags|=1048576,fe)}function ee(pe){return a&&pe.alternate===null&&(pe.flags|=67108866),pe}function te(pe,fe,be,Le){return fe===null||fe.tag!==6?(fe=Zl(be,pe.mode,Le),fe.return=pe,fe):(fe=b(fe,be),fe.return=pe,fe)}function ae(pe,fe,be,Le){var Ke=be.type;return Ke===E?Ve(pe,fe,be.props.children,Le,be.key):fe!==null&&(fe.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===T&&Zd(Ke)===fe.type)?(fe=b(fe,be.props),Xo(fe,be),fe.return=pe,fe):(fe=Fa(be.type,be.key,be.props,null,pe.mode,Le),Xo(fe,be),fe.return=pe,fe)}function Ee(pe,fe,be,Le){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==be.containerInfo||fe.stateNode.implementation!==be.implementation?(fe=ec(be,pe.mode,Le),fe.return=pe,fe):(fe=b(fe,be.children||[]),fe.return=pe,fe)}function Ve(pe,fe,be,Le,Ke){return fe===null||fe.tag!==7?(fe=pi(be,pe.mode,Le,Ke),fe.return=pe,fe):(fe=b(fe,be),fe.return=pe,fe)}function Fe(pe,fe,be){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=Zl(""+fe,pe.mode,be),fe.return=pe,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case y:return be=Fa(fe.type,fe.key,fe.props,null,pe.mode,be),Xo(be,fe),be.return=pe,be;case v:return fe=ec(fe,pe.mode,be),fe.return=pe,fe;case T:var Le=fe._init;return fe=Le(fe._payload),Fe(pe,fe,be)}if(ge(fe)||W(fe))return fe=pi(fe,pe.mode,be,null),fe.return=pe,fe;if(typeof fe.then=="function")return Fe(pe,sl(fe),be);if(fe.$$typeof===V)return Fe(pe,Ha(pe,fe),be);rl(pe,fe)}return null}function Ae(pe,fe,be,Le){var Ke=fe!==null?fe.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return Ke!==null?null:te(pe,fe,""+be,Le);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case y:return be.key===Ke?ae(pe,fe,be,Le):null;case v:return be.key===Ke?Ee(pe,fe,be,Le):null;case T:return Ke=be._init,be=Ke(be._payload),Ae(pe,fe,be,Le)}if(ge(be)||W(be))return Ke!==null?null:Ve(pe,fe,be,Le,null);if(typeof be.then=="function")return Ae(pe,fe,sl(be),Le);if(be.$$typeof===V)return Ae(pe,fe,Ha(pe,be),Le);rl(pe,be)}return null}function Ce(pe,fe,be,Le,Ke){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return pe=pe.get(be)||null,te(fe,pe,""+Le,Ke);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case y:return pe=pe.get(Le.key===null?be:Le.key)||null,ae(fe,pe,Le,Ke);case v:return pe=pe.get(Le.key===null?be:Le.key)||null,Ee(fe,pe,Le,Ke);case T:var Lt=Le._init;return Le=Lt(Le._payload),Ce(pe,fe,be,Le,Ke)}if(ge(Le)||W(Le))return pe=pe.get(be)||null,Ve(fe,pe,Le,Ke,null);if(typeof Le.then=="function")return Ce(pe,fe,be,sl(Le),Ke);if(Le.$$typeof===V)return Ce(pe,fe,be,Ha(fe,Le),Ke);rl(fe,Le)}return null}function rt(pe,fe,be,Le){for(var Ke=null,Lt=null,Je=fe,nt=fe=0,ts=null;Je!==null&&nt<be.length;nt++){Je.index>nt?(ts=Je,Je=null):ts=Je.sibling;var gn=Ae(pe,Je,be[nt],Le);if(gn===null){Je===null&&(Je=ts);break}a&&Je&&gn.alternate===null&&c(pe,Je),fe=R(gn,fe,nt),Lt===null?Ke=gn:Lt.sibling=gn,Lt=gn,Je=ts}if(nt===be.length)return h(pe,Je),xn&&xi(pe,nt),Ke;if(Je===null){for(;nt<be.length;nt++)Je=Fe(pe,be[nt],Le),Je!==null&&(fe=R(Je,fe,nt),Lt===null?Ke=Je:Lt.sibling=Je,Lt=Je);return xn&&xi(pe,nt),Ke}for(Je=p(Je);nt<be.length;nt++)ts=Ce(Je,pe,nt,be[nt],Le),ts!==null&&(a&&ts.alternate!==null&&Je.delete(ts.key===null?nt:ts.key),fe=R(ts,fe,nt),Lt===null?Ke=ts:Lt.sibling=ts,Lt=ts);return a&&Je.forEach(function(Zr){return c(pe,Zr)}),xn&&xi(pe,nt),Ke}function tt(pe,fe,be,Le){if(be==null)throw Error(s(151));for(var Ke=null,Lt=null,Je=fe,nt=fe=0,ts=null,gn=be.next();Je!==null&&!gn.done;nt++,gn=be.next()){Je.index>nt?(ts=Je,Je=null):ts=Je.sibling;var Zr=Ae(pe,Je,gn.value,Le);if(Zr===null){Je===null&&(Je=ts);break}a&&Je&&Zr.alternate===null&&c(pe,Je),fe=R(Zr,fe,nt),Lt===null?Ke=Zr:Lt.sibling=Zr,Lt=Zr,Je=ts}if(gn.done)return h(pe,Je),xn&&xi(pe,nt),Ke;if(Je===null){for(;!gn.done;nt++,gn=be.next())gn=Fe(pe,gn.value,Le),gn!==null&&(fe=R(gn,fe,nt),Lt===null?Ke=gn:Lt.sibling=gn,Lt=gn);return xn&&xi(pe,nt),Ke}for(Je=p(Je);!gn.done;nt++,gn=be.next())gn=Ce(Je,pe,nt,gn.value,Le),gn!==null&&(a&&gn.alternate!==null&&Je.delete(gn.key===null?nt:gn.key),fe=R(gn,fe,nt),Lt===null?Ke=gn:Lt.sibling=gn,Lt=gn);return a&&Je.forEach(function(gp){return c(pe,gp)}),xn&&xi(pe,nt),Ke}function An(pe,fe,be,Le){if(typeof be=="object"&&be!==null&&be.type===E&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case y:e:{for(var Ke=be.key;fe!==null;){if(fe.key===Ke){if(Ke=be.type,Ke===E){if(fe.tag===7){h(pe,fe.sibling),Le=b(fe,be.props.children),Le.return=pe,pe=Le;break e}}else if(fe.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===T&&Zd(Ke)===fe.type){h(pe,fe.sibling),Le=b(fe,be.props),Xo(Le,be),Le.return=pe,pe=Le;break e}h(pe,fe);break}else c(pe,fe);fe=fe.sibling}be.type===E?(Le=pi(be.props.children,pe.mode,Le,be.key),Le.return=pe,pe=Le):(Le=Fa(be.type,be.key,be.props,null,pe.mode,Le),Xo(Le,be),Le.return=pe,pe=Le)}return ee(pe);case v:e:{for(Ke=be.key;fe!==null;){if(fe.key===Ke)if(fe.tag===4&&fe.stateNode.containerInfo===be.containerInfo&&fe.stateNode.implementation===be.implementation){h(pe,fe.sibling),Le=b(fe,be.children||[]),Le.return=pe,pe=Le;break e}else{h(pe,fe);break}else c(pe,fe);fe=fe.sibling}Le=ec(be,pe.mode,Le),Le.return=pe,pe=Le}return ee(pe);case T:return Ke=be._init,be=Ke(be._payload),An(pe,fe,be,Le)}if(ge(be))return rt(pe,fe,be,Le);if(W(be)){if(Ke=W(be),typeof Ke!="function")throw Error(s(150));return be=Ke.call(be),tt(pe,fe,be,Le)}if(typeof be.then=="function")return An(pe,fe,sl(be),Le);if(be.$$typeof===V)return An(pe,fe,Ha(pe,be),Le);rl(pe,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,fe!==null&&fe.tag===6?(h(pe,fe.sibling),Le=b(fe,be),Le.return=pe,pe=Le):(h(pe,fe),Le=Zl(be,pe.mode,Le),Le.return=pe,pe=Le),ee(pe)):h(pe,fe)}return function(pe,fe,be,Le){try{Ko=0;var Ke=An(pe,fe,be,Le);return no=null,Ke}catch(Je){if(Je===Fo||Je===Ga)throw Je;var Lt=_s(29,Je,null,pe.mode);return Lt.lanes=Le,Lt.return=pe,Lt}finally{}}}var so=eh(!0),th=eh(!1),Ds=_e(null),tr=null;function Lr(a){var c=a.alternate;Re(Xn,Xn.current&1),Re(Ds,a),tr===null&&(c===null||Qi.current!==null||c.memoizedState!==null)&&(tr=a)}function nh(a){if(a.tag===22){if(Re(Xn,Xn.current),Re(Ds,a),tr===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(tr=a)}}else Br()}function Br(){Re(Xn,Xn.current),Re(Ds,Ds.current)}function Er(a){Se(Ds),tr===a&&(tr=null),Se(Xn)}var Xn=_e(0);function il(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Eu(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Dc(a,c,h,p){c=a.memoizedState,h=h(p,c),h=h==null?c:m({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var kc={enqueueSetState:function(a,c,h){a=a._reactInternals;var p=ws(),b=Or(p);b.payload=c,h!=null&&(b.callback=h),c=Vr(a,b,p),c!==null&&(Rs(c,a,p),Uo(c,a,p))},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var p=ws(),b=Or(p);b.tag=1,b.payload=c,h!=null&&(b.callback=h),c=Vr(a,b,p),c!==null&&(Rs(c,a,p),Uo(c,a,p))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=ws(),p=Or(h);p.tag=2,c!=null&&(p.callback=c),c=Vr(a,p,h),c!==null&&(Rs(c,a,h),Uo(c,a,h))}};function sh(a,c,h,p,b,R,ee){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,R,ee):c.prototype&&c.prototype.isPureReactComponent?!No(h,p)||!No(b,R):!0}function rh(a,c,h,p){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,p),c.state!==a&&kc.enqueueReplaceState(c,c.state,null)}function Ri(a,c){var h=c;if("ref"in c){h={};for(var p in c)p!=="ref"&&(h[p]=c[p])}if(a=a.defaultProps){h===c&&(h=m({},h));for(var b in a)h[b]===void 0&&(h[b]=a[b])}return h}var ol=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function ih(a){ol(a)}function oh(a){console.error(a)}function ah(a){ol(a)}function al(a,c){try{var h=a.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(p){setTimeout(function(){throw p})}}function lh(a,c,h){try{var p=a.onCaughtError;p(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Oc(a,c,h){return h=Or(h),h.tag=3,h.payload={element:null},h.callback=function(){al(a,c)},h}function ch(a){return a=Or(a),a.tag=3,a}function uh(a,c,h,p){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var R=p.value;a.payload=function(){return b(R)},a.callback=function(){lh(c,h,p)}}var ee=h.stateNode;ee!==null&&typeof ee.componentDidCatch=="function"&&(a.callback=function(){lh(c,h,p),typeof b!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var te=p.stack;this.componentDidCatch(p.value,{componentStack:te!==null?te:""})})}function pm(a,c,h,p,b){if(h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(c=h.alternate,c!==null&&Mo(c,h,b,!0),h=Ds.current,h!==null){switch(h.tag){case 13:return tr===null?iu():h.alternate===null&&Bn===0&&(Bn=3),h.flags&=-257,h.flags|=65536,h.lanes=b,p===uc?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([p]):c.add(p),au(a,p,b)),!1;case 22:return h.flags|=65536,p===uc?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([p])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([p]):h.add(p)),au(a,p,b)),!1}throw Error(s(435,h.tag))}return au(a,p,b),iu(),!1}if(xn)return c=Ds.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=b,p!==sc&&(a=Error(s(422),{cause:p}),Vo(Ps(a,h)))):(p!==sc&&(c=Error(s(423),{cause:p}),Vo(Ps(c,h))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,p=Ps(p,h),b=Oc(a.stateNode,p,b),fc(a,b),Bn!==4&&(Bn=2)),!1;var R=Error(s(520),{cause:p});if(R=Ps(R,h),sa===null?sa=[R]:sa.push(R),Bn!==4&&(Bn=2),c===null)return!0;p=Ps(p,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,a=b&-b,h.lanes|=a,a=Oc(h.stateNode,p,a),fc(h,a),!1;case 1:if(c=h.type,R=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(qr===null||!qr.has(R))))return h.flags|=65536,b&=-b,h.lanes|=b,b=ch(b),uh(b,a,h,p),fc(h,b),!1}h=h.return}while(h!==null);return!1}var dh=Error(s(461)),Zn=!1;function is(a,c,h,p){c.child=a===null?th(c,null,h,p):so(c,a.child,h,p)}function hh(a,c,h,p,b){h=h.render;var R=c.ref;if("ref"in p){var ee={};for(var te in p)te!=="ref"&&(ee[te]=p[te])}else ee=p;return bi(c),p=yc(a,c,h,ee,R,b),te=_c(),a!==null&&!Zn?(vc(a,c,b),wr(a,c,b)):(xn&&te&&tc(c),c.flags|=1,is(a,c,p,b),c.child)}function fh(a,c,h,p,b){if(a===null){var R=h.type;return typeof R=="function"&&!Jl(R)&&R.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=R,mh(a,c,R,p,b)):(a=Fa(h.type,null,p,c,c.mode,b),a.ref=c.ref,a.return=c,c.child=a)}if(R=a.child,!$c(a,b)){var ee=R.memoizedProps;if(h=h.compare,h=h!==null?h:No,h(ee,p)&&a.ref===c.ref)return wr(a,c,b)}return c.flags|=1,a=gr(R,p),a.ref=c.ref,a.return=c,c.child=a}function mh(a,c,h,p,b){if(a!==null){var R=a.memoizedProps;if(No(R,p)&&a.ref===c.ref)if(Zn=!1,c.pendingProps=p=R,$c(a,b))(a.flags&131072)!==0&&(Zn=!0);else return c.lanes=a.lanes,wr(a,c,b)}return Vc(a,c,h,p,b)}function ph(a,c,h){var p=c.pendingProps,b=p.children,R=a!==null?a.memoizedState:null;if(p.mode==="hidden"){if((c.flags&128)!==0){if(p=R!==null?R.baseLanes|h:h,a!==null){for(b=c.child=a.child,R=0;b!==null;)R=R|b.lanes|b.childLanes,b=b.sibling;c.childLanes=R&~p}else c.childLanes=0,c.child=null;return gh(a,c,p,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&qa(c,R!==null?R.cachePool:null),R!==null?md(c,R):pc(),nh(c);else return c.lanes=c.childLanes=536870912,gh(a,c,R!==null?R.baseLanes|h:h,h)}else R!==null?(qa(c,R.cachePool),md(c,R),Br(),c.memoizedState=null):(a!==null&&qa(c,null),pc(),Br());return is(a,c,b,h),c.child}function gh(a,c,h,p){var b=cc();return b=b===null?null:{parent:Kn._currentValue,pool:b},c.memoizedState={baseLanes:h,cachePool:b},a!==null&&qa(c,null),pc(),nh(c),a!==null&&Mo(a,c,p,!0),null}function ll(a,c){var h=c.ref;if(h===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(s(284));(a===null||a.ref!==h)&&(c.flags|=4194816)}}function Vc(a,c,h,p,b){return bi(c),h=yc(a,c,h,p,void 0,b),p=_c(),a!==null&&!Zn?(vc(a,c,b),wr(a,c,b)):(xn&&p&&tc(c),c.flags|=1,is(a,c,h,b),c.child)}function xh(a,c,h,p,b,R){return bi(c),c.updateQueue=null,h=gd(c,p,h,b),pd(a),p=_c(),a!==null&&!Zn?(vc(a,c,R),wr(a,c,R)):(xn&&p&&tc(c),c.flags|=1,is(a,c,h,R),c.child)}function yh(a,c,h,p,b){if(bi(c),c.stateNode===null){var R=Gi,ee=h.contextType;typeof ee=="object"&&ee!==null&&(R=ls(ee)),R=new h(p,R),c.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=kc,c.stateNode=R,R._reactInternals=c,R=c.stateNode,R.props=p,R.state=c.memoizedState,R.refs={},dc(c),ee=h.contextType,R.context=typeof ee=="object"&&ee!==null?ls(ee):Gi,R.state=c.memoizedState,ee=h.getDerivedStateFromProps,typeof ee=="function"&&(Dc(c,h,ee,p),R.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(ee=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),ee!==R.state&&kc.enqueueReplaceState(R,R.state,null),Ho(c,p,R,b),$o(),R.state=c.memoizedState),typeof R.componentDidMount=="function"&&(c.flags|=4194308),p=!0}else if(a===null){R=c.stateNode;var te=c.memoizedProps,ae=Ri(h,te);R.props=ae;var Ee=R.context,Ve=h.contextType;ee=Gi,typeof Ve=="object"&&Ve!==null&&(ee=ls(Ve));var Fe=h.getDerivedStateFromProps;Ve=typeof Fe=="function"||typeof R.getSnapshotBeforeUpdate=="function",te=c.pendingProps!==te,Ve||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(te||Ee!==ee)&&rh(c,R,p,ee),kr=!1;var Ae=c.memoizedState;R.state=Ae,Ho(c,p,R,b),$o(),Ee=c.memoizedState,te||Ae!==Ee||kr?(typeof Fe=="function"&&(Dc(c,h,Fe,p),Ee=c.memoizedState),(ae=kr||sh(c,h,ae,p,Ae,Ee,ee))?(Ve||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(c.flags|=4194308)):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=Ee),R.props=p,R.state=Ee,R.context=ee,p=ae):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{R=c.stateNode,hc(a,c),ee=c.memoizedProps,Ve=Ri(h,ee),R.props=Ve,Fe=c.pendingProps,Ae=R.context,Ee=h.contextType,ae=Gi,typeof Ee=="object"&&Ee!==null&&(ae=ls(Ee)),te=h.getDerivedStateFromProps,(Ee=typeof te=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(ee!==Fe||Ae!==ae)&&rh(c,R,p,ae),kr=!1,Ae=c.memoizedState,R.state=Ae,Ho(c,p,R,b),$o();var Ce=c.memoizedState;ee!==Fe||Ae!==Ce||kr||a!==null&&a.dependencies!==null&&$a(a.dependencies)?(typeof te=="function"&&(Dc(c,h,te,p),Ce=c.memoizedState),(Ve=kr||sh(c,h,Ve,p,Ae,Ce,ae)||a!==null&&a.dependencies!==null&&$a(a.dependencies))?(Ee||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(p,Ce,ae),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(p,Ce,ae)),typeof R.componentDidUpdate=="function"&&(c.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof R.componentDidUpdate!="function"||ee===a.memoizedProps&&Ae===a.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||ee===a.memoizedProps&&Ae===a.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=Ce),R.props=p,R.state=Ce,R.context=ae,p=Ve):(typeof R.componentDidUpdate!="function"||ee===a.memoizedProps&&Ae===a.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||ee===a.memoizedProps&&Ae===a.memoizedState||(c.flags|=1024),p=!1)}return R=p,ll(a,c),p=(c.flags&128)!==0,R||p?(R=c.stateNode,h=p&&typeof h.getDerivedStateFromError!="function"?null:R.render(),c.flags|=1,a!==null&&p?(c.child=so(c,a.child,null,b),c.child=so(c,null,h,b)):is(a,c,h,b),c.memoizedState=R.state,a=c.child):a=wr(a,c,b),a}function _h(a,c,h,p){return Oo(),c.flags|=256,is(a,c,h,p),c.child}var Mc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lc(a){return{baseLanes:a,cachePool:od()}}function Bc(a,c,h){return a=a!==null?a.childLanes&~h:0,c&&(a|=ks),a}function bh(a,c,h){var p=c.pendingProps,b=!1,R=(c.flags&128)!==0,ee;if((ee=R)||(ee=a!==null&&a.memoizedState===null?!1:(Xn.current&2)!==0),ee&&(b=!0,c.flags&=-129),ee=(c.flags&32)!==0,c.flags&=-33,a===null){if(xn){if(b?Lr(c):Br(),xn){var te=Ln,ae;if(ae=te){e:{for(ae=te,te=er;ae.nodeType!==8;){if(!te){te=null;break e}if(ae=Us(ae.nextSibling),ae===null){te=null;break e}}te=ae}te!==null?(c.memoizedState={dehydrated:te,treeContext:gi!==null?{id:xr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},ae=_s(18,null,null,0),ae.stateNode=te,ae.return=c,c.child=ae,hs=c,Ln=null,ae=!0):ae=!1}ae||_i(c)}if(te=c.memoizedState,te!==null&&(te=te.dehydrated,te!==null))return Eu(te)?c.lanes=32:c.lanes=536870912,null;Er(c)}return te=p.children,p=p.fallback,b?(Br(),b=c.mode,te=cl({mode:"hidden",children:te},b),p=pi(p,b,h,null),te.return=c,p.return=c,te.sibling=p,c.child=te,b=c.child,b.memoizedState=Lc(h),b.childLanes=Bc(a,ee,h),c.memoizedState=Mc,p):(Lr(c),Fc(c,te))}if(ae=a.memoizedState,ae!==null&&(te=ae.dehydrated,te!==null)){if(R)c.flags&256?(Lr(c),c.flags&=-257,c=zc(a,c,h)):c.memoizedState!==null?(Br(),c.child=a.child,c.flags|=128,c=null):(Br(),b=p.fallback,te=c.mode,p=cl({mode:"visible",children:p.children},te),b=pi(b,te,h,null),b.flags|=2,p.return=c,b.return=c,p.sibling=b,c.child=p,so(c,a.child,null,h),p=c.child,p.memoizedState=Lc(h),p.childLanes=Bc(a,ee,h),c.memoizedState=Mc,c=b);else if(Lr(c),Eu(te)){if(ee=te.nextSibling&&te.nextSibling.dataset,ee)var Ee=ee.dgst;ee=Ee,p=Error(s(419)),p.stack="",p.digest=ee,Vo({value:p,source:null,stack:null}),c=zc(a,c,h)}else if(Zn||Mo(a,c,h,!1),ee=(h&a.childLanes)!==0,Zn||ee){if(ee=In,ee!==null&&(p=h&-h,p=(p&42)!==0?1:Tn(p),p=(p&(ee.suspendedLanes|h))!==0?0:p,p!==0&&p!==ae.retryLane))throw ae.retryLane=p,qi(a,p),Rs(ee,a,p),dh;te.data==="$?"||iu(),c=zc(a,c,h)}else te.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=ae.treeContext,Ln=Us(te.nextSibling),hs=c,xn=!0,yi=null,er=!1,a!==null&&(js[Ns++]=xr,js[Ns++]=yr,js[Ns++]=gi,xr=a.id,yr=a.overflow,gi=c),c=Fc(c,p.children),c.flags|=4096);return c}return b?(Br(),b=p.fallback,te=c.mode,ae=a.child,Ee=ae.sibling,p=gr(ae,{mode:"hidden",children:p.children}),p.subtreeFlags=ae.subtreeFlags&65011712,Ee!==null?b=gr(Ee,b):(b=pi(b,te,h,null),b.flags|=2),b.return=c,p.return=c,p.sibling=b,c.child=p,p=b,b=c.child,te=a.child.memoizedState,te===null?te=Lc(h):(ae=te.cachePool,ae!==null?(Ee=Kn._currentValue,ae=ae.parent!==Ee?{parent:Ee,pool:Ee}:ae):ae=od(),te={baseLanes:te.baseLanes|h,cachePool:ae}),b.memoizedState=te,b.childLanes=Bc(a,ee,h),c.memoizedState=Mc,p):(Lr(c),h=a.child,a=h.sibling,h=gr(h,{mode:"visible",children:p.children}),h.return=c,h.sibling=null,a!==null&&(ee=c.deletions,ee===null?(c.deletions=[a],c.flags|=16):ee.push(a)),c.child=h,c.memoizedState=null,h)}function Fc(a,c){return c=cl({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function cl(a,c){return a=_s(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function zc(a,c,h){return so(c,a.child,null,h),a=Fc(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function Eh(a,c,h){a.lanes|=c;var p=a.alternate;p!==null&&(p.lanes|=c),ic(a.return,c,h)}function Uc(a,c,h,p,b){var R=a.memoizedState;R===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:b}:(R.isBackwards=c,R.rendering=null,R.renderingStartTime=0,R.last=p,R.tail=h,R.tailMode=b)}function wh(a,c,h){var p=c.pendingProps,b=p.revealOrder,R=p.tail;if(is(a,c,p.children,h),p=Xn.current,(p&2)!==0)p=p&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Eh(a,h,c);else if(a.tag===19)Eh(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}p&=1}switch(Re(Xn,p),b){case"forwards":for(h=c.child,b=null;h!==null;)a=h.alternate,a!==null&&il(a)===null&&(b=h),h=h.sibling;h=b,h===null?(b=c.child,c.child=null):(b=h.sibling,h.sibling=null),Uc(c,!1,b,h,R);break;case"backwards":for(h=null,b=c.child,c.child=null;b!==null;){if(a=b.alternate,a!==null&&il(a)===null){c.child=b;break}a=b.sibling,b.sibling=h,h=b,b=a}Uc(c,!0,h,null,R);break;case"together":Uc(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function wr(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),Hr|=c.lanes,(h&c.childLanes)===0)if(a!==null){if(Mo(a,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(s(153));if(c.child!==null){for(a=c.child,h=gr(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=gr(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function $c(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&$a(a)))}function gm(a,c,h){switch(c.tag){case 3:ke(c,c.stateNode.containerInfo),Dr(c,Kn,a.memoizedState.cache),Oo();break;case 27:case 5:we(c);break;case 4:ke(c,c.stateNode.containerInfo);break;case 10:Dr(c,c.type,c.memoizedProps.value);break;case 13:var p=c.memoizedState;if(p!==null)return p.dehydrated!==null?(Lr(c),c.flags|=128,null):(h&c.child.childLanes)!==0?bh(a,c,h):(Lr(c),a=wr(a,c,h),a!==null?a.sibling:null);Lr(c);break;case 19:var b=(a.flags&128)!==0;if(p=(h&c.childLanes)!==0,p||(Mo(a,c,h,!1),p=(h&c.childLanes)!==0),b){if(p)return wh(a,c,h);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Re(Xn,Xn.current),p)break;return null;case 22:case 23:return c.lanes=0,ph(a,c,h);case 24:Dr(c,Kn,a.memoizedState.cache)}return wr(a,c,h)}function Rh(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps)Zn=!0;else{if(!$c(a,h)&&(c.flags&128)===0)return Zn=!1,gm(a,c,h);Zn=(a.flags&131072)!==0}else Zn=!1,xn&&(c.flags&1048576)!==0&&Ju(c,Ua,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var p=c.elementType,b=p._init;if(p=b(p._payload),c.type=p,typeof p=="function")Jl(p)?(a=Ri(p,a),c.tag=1,c=yh(null,c,p,a,h)):(c.tag=0,c=Vc(null,c,p,a,h));else{if(p!=null){if(b=p.$$typeof,b===Y){c.tag=11,c=hh(null,c,p,a,h);break e}else if(b===S){c.tag=14,c=fh(null,c,p,a,h);break e}}throw c=le(p)||p,Error(s(306,c,""))}}return c;case 0:return Vc(a,c,c.type,c.pendingProps,h);case 1:return p=c.type,b=Ri(p,c.pendingProps),yh(a,c,p,b,h);case 3:e:{if(ke(c,c.stateNode.containerInfo),a===null)throw Error(s(387));p=c.pendingProps;var R=c.memoizedState;b=R.element,hc(a,c),Ho(c,p,null,h);var ee=c.memoizedState;if(p=ee.cache,Dr(c,Kn,p),p!==R.cache&&oc(c,[Kn],h,!0),$o(),p=ee.element,R.isDehydrated)if(R={element:p,isDehydrated:!1,cache:ee.cache},c.updateQueue.baseState=R,c.memoizedState=R,c.flags&256){c=_h(a,c,p,h);break e}else if(p!==b){b=Ps(Error(s(424)),c),Vo(b),c=_h(a,c,p,h);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ln=Us(a.firstChild),hs=c,xn=!0,yi=null,er=!0,h=th(c,null,p,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Oo(),p===b){c=wr(a,c,h);break e}is(a,c,p,h)}c=c.child}return c;case 26:return ll(a,c),a===null?(h=Pf(c.type,null,c.pendingProps,null))?c.memoizedState=h:xn||(h=c.type,a=c.pendingProps,p=wl(je.current).createElement(h),p[Dt]=c,p[pn]=a,as(p,h,a),zn(p),c.stateNode=p):c.memoizedState=Pf(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return we(c),a===null&&xn&&(p=c.stateNode=Tf(c.type,c.pendingProps,je.current),hs=c,er=!0,b=Ln,Yr(c.type)?(wu=b,Ln=Us(p.firstChild)):Ln=b),is(a,c,c.pendingProps.children,h),ll(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&xn&&((b=p=Ln)&&(p=Hm(p,c.type,c.pendingProps,er),p!==null?(c.stateNode=p,hs=c,Ln=Us(p.firstChild),er=!1,b=!0):b=!1),b||_i(c)),we(c),b=c.type,R=c.pendingProps,ee=a!==null?a.memoizedProps:null,p=R.children,_u(b,R)?p=null:ee!==null&&_u(b,ee)&&(c.flags|=32),c.memoizedState!==null&&(b=yc(a,c,lm,null,null,h),ha._currentValue=b),ll(a,c),is(a,c,p,h),c.child;case 6:return a===null&&xn&&((a=h=Ln)&&(h=qm(h,c.pendingProps,er),h!==null?(c.stateNode=h,hs=c,Ln=null,a=!0):a=!1),a||_i(c)),null;case 13:return bh(a,c,h);case 4:return ke(c,c.stateNode.containerInfo),p=c.pendingProps,a===null?c.child=so(c,null,p,h):is(a,c,p,h),c.child;case 11:return hh(a,c,c.type,c.pendingProps,h);case 7:return is(a,c,c.pendingProps,h),c.child;case 8:return is(a,c,c.pendingProps.children,h),c.child;case 12:return is(a,c,c.pendingProps.children,h),c.child;case 10:return p=c.pendingProps,Dr(c,c.type,p.value),is(a,c,p.children,h),c.child;case 9:return b=c.type._context,p=c.pendingProps.children,bi(c),b=ls(b),p=p(b),c.flags|=1,is(a,c,p,h),c.child;case 14:return fh(a,c,c.type,c.pendingProps,h);case 15:return mh(a,c,c.type,c.pendingProps,h);case 19:return wh(a,c,h);case 31:return p=c.pendingProps,h=c.mode,p={mode:p.mode,children:p.children},a===null?(h=cl(p,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=gr(a.child,p),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return ph(a,c,h);case 24:return bi(c),p=ls(Kn),a===null?(b=cc(),b===null&&(b=In,R=ac(),b.pooledCache=R,R.refCount++,R!==null&&(b.pooledCacheLanes|=h),b=R),c.memoizedState={parent:p,cache:b},dc(c),Dr(c,Kn,b)):((a.lanes&h)!==0&&(hc(a,c),Ho(c,null,null,h),$o()),b=a.memoizedState,R=c.memoizedState,b.parent!==p?(b={parent:p,cache:p},c.memoizedState=b,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=b),Dr(c,Kn,p)):(p=R.cache,Dr(c,Kn,p),p!==b.cache&&oc(c,[Kn],h,!0))),is(a,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(s(156,c.tag))}function Rr(a){a.flags|=4}function Ah(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!kf(c)){if(c=Ds.current,c!==null&&((fn&4194048)===fn?tr!==null:(fn&62914560)!==fn&&(fn&536870912)===0||c!==tr))throw zo=uc,ad;a.flags|=8192}}function ul(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?Dn():536870912,a.lanes|=c,ao|=c)}function Qo(a,c){if(!xn)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function Vn(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,p=0;if(c)for(var b=a.child;b!==null;)h|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)h|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=p,a.childLanes=h,c}function xm(a,c,h){var p=c.pendingProps;switch(nc(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(c),null;case 1:return Vn(c),null;case 3:return h=c.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),vr(Kn),Ge(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(ko(c)?Rr(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,td())),Vn(c),null;case 26:return h=c.memoizedState,a===null?(Rr(c),h!==null?(Vn(c),Ah(c,h)):(Vn(c),c.flags&=-16777217)):h?h!==a.memoizedState?(Rr(c),Vn(c),Ah(c,h)):(Vn(c),c.flags&=-16777217):(a.memoizedProps!==p&&Rr(c),Vn(c),c.flags&=-16777217),null;case 27:de(c),h=je.current;var b=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==p&&Rr(c);else{if(!p){if(c.stateNode===null)throw Error(s(166));return Vn(c),null}a=Be.current,ko(c)?Zu(c):(a=Tf(b,p,h),c.stateNode=a,Rr(c))}return Vn(c),null;case 5:if(de(c),h=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==p&&Rr(c);else{if(!p){if(c.stateNode===null)throw Error(s(166));return Vn(c),null}if(a=Be.current,ko(c))Zu(c);else{switch(b=wl(je.current),a){case 1:a=b.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:a=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":a=b.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":a=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof p.is=="string"?b.createElement("select",{is:p.is}):b.createElement("select"),p.multiple?a.multiple=!0:p.size&&(a.size=p.size);break;default:a=typeof p.is=="string"?b.createElement(h,{is:p.is}):b.createElement(h)}}a[Dt]=c,a[pn]=p;e:for(b=c.child;b!==null;){if(b.tag===5||b.tag===6)a.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break e;for(;b.sibling===null;){if(b.return===null||b.return===c)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}c.stateNode=a;e:switch(as(a,h,p),h){case"button":case"input":case"select":case"textarea":a=!!p.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Rr(c)}}return Vn(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==p&&Rr(c);else{if(typeof p!="string"&&c.stateNode===null)throw Error(s(166));if(a=je.current,ko(c)){if(a=c.stateNode,h=c.memoizedProps,p=null,b=hs,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}a[Dt]=c,a=!!(a.nodeValue===h||p!==null&&p.suppressHydrationWarning===!0||_f(a.nodeValue,h)),a||_i(c)}else a=wl(a).createTextNode(p),a[Dt]=c,c.stateNode=a}return Vn(c),null;case 13:if(p=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=ko(c),p!==null&&p.dehydrated!==null){if(a===null){if(!b)throw Error(s(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));b[Dt]=c}else Oo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Vn(c),b=!1}else b=td(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return c.flags&256?(Er(c),c):(Er(c),null)}if(Er(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=p!==null,a=a!==null&&a.memoizedState!==null,h){p=c.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool);var R=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(R=p.memoizedState.cachePool.pool),R!==b&&(p.flags|=2048)}return h!==a&&h&&(c.child.flags|=8192),ul(c,c.updateQueue),Vn(c),null;case 4:return Ge(),a===null&&mu(c.stateNode.containerInfo),Vn(c),null;case 10:return vr(c.type),Vn(c),null;case 19:if(Se(Xn),b=c.memoizedState,b===null)return Vn(c),null;if(p=(c.flags&128)!==0,R=b.rendering,R===null)if(p)Qo(b,!1);else{if(Bn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(R=il(a),R!==null){for(c.flags|=128,Qo(b,!1),a=R.updateQueue,c.updateQueue=a,ul(c,a),c.subtreeFlags=0,a=h,h=c.child;h!==null;)Qu(h,a),h=h.sibling;return Re(Xn,Xn.current&1|2),c.child}a=a.sibling}b.tail!==null&&ze()>fl&&(c.flags|=128,p=!0,Qo(b,!1),c.lanes=4194304)}else{if(!p)if(a=il(R),a!==null){if(c.flags|=128,p=!0,a=a.updateQueue,c.updateQueue=a,ul(c,a),Qo(b,!0),b.tail===null&&b.tailMode==="hidden"&&!R.alternate&&!xn)return Vn(c),null}else 2*ze()-b.renderingStartTime>fl&&h!==536870912&&(c.flags|=128,p=!0,Qo(b,!1),c.lanes=4194304);b.isBackwards?(R.sibling=c.child,c.child=R):(a=b.last,a!==null?a.sibling=R:c.child=R,b.last=R)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=ze(),c.sibling=null,a=Xn.current,Re(Xn,p?a&1|2:a&1),c):(Vn(c),null);case 22:case 23:return Er(c),gc(),p=c.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(c.flags|=8192):p&&(c.flags|=8192),p?(h&536870912)!==0&&(c.flags&128)===0&&(Vn(c),c.subtreeFlags&6&&(c.flags|=8192)):Vn(c),h=c.updateQueue,h!==null&&ul(c,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==h&&(c.flags|=2048),a!==null&&Se(Ei),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),vr(Kn),Vn(c),null;case 25:return null;case 30:return null}throw Error(s(156,c.tag))}function ym(a,c){switch(nc(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return vr(Kn),Ge(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return de(c),null;case 13:if(Er(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(s(340));Oo()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Se(Xn),null;case 4:return Ge(),null;case 10:return vr(c.type),null;case 22:case 23:return Er(c),gc(),a!==null&&Se(Ei),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return vr(Kn),null;case 25:return null;default:return null}}function Th(a,c){switch(nc(c),c.tag){case 3:vr(Kn),Ge();break;case 26:case 27:case 5:de(c);break;case 4:Ge();break;case 13:Er(c);break;case 19:Se(Xn);break;case 10:vr(c.type);break;case 22:case 23:Er(c),gc(),a!==null&&Se(Ei);break;case 24:vr(Kn)}}function Jo(a,c){try{var h=c.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var b=p.next;h=b;do{if((h.tag&a)===a){p=void 0;var R=h.create,ee=h.inst;p=R(),ee.destroy=p}h=h.next}while(h!==b)}}catch(te){Cn(c,c.return,te)}}function Fr(a,c,h){try{var p=c.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var R=b.next;p=R;do{if((p.tag&a)===a){var ee=p.inst,te=ee.destroy;if(te!==void 0){ee.destroy=void 0,b=c;var ae=h,Ee=te;try{Ee()}catch(Ve){Cn(b,ae,Ve)}}}p=p.next}while(p!==R)}}catch(Ve){Cn(c,c.return,Ve)}}function Sh(a){var c=a.updateQueue;if(c!==null){var h=a.stateNode;try{fd(c,h)}catch(p){Cn(a,a.return,p)}}}function Ch(a,c,h){h.props=Ri(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(p){Cn(a,c,p)}}function Zo(a,c){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof h=="function"?a.refCleanup=h(p):h.current=p}}catch(b){Cn(a,c,b)}}function nr(a,c){var h=a.ref,p=a.refCleanup;if(h!==null)if(typeof p=="function")try{p()}catch(b){Cn(a,c,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){Cn(a,c,b)}else h.current=null}function Ph(a){var c=a.type,h=a.memoizedProps,p=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&p.focus();break e;case"img":h.src?p.src=h.src:h.srcSet&&(p.srcset=h.srcSet)}}catch(b){Cn(a,a.return,b)}}function Hc(a,c,h){try{var p=a.stateNode;Bm(p,a.type,h,c),p[pn]=c}catch(b){Cn(a,a.return,b)}}function Ih(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Yr(a.type)||a.tag===4}function qc(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Ih(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Yr(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Gc(a,c,h){var p=a.tag;if(p===5||p===6)a=a.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(a),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=El));else if(p!==4&&(p===27&&Yr(a.type)&&(h=a.stateNode,c=null),a=a.child,a!==null))for(Gc(a,c,h),a=a.sibling;a!==null;)Gc(a,c,h),a=a.sibling}function dl(a,c,h){var p=a.tag;if(p===5||p===6)a=a.stateNode,c?h.insertBefore(a,c):h.appendChild(a);else if(p!==4&&(p===27&&Yr(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(dl(a,c,h),a=a.sibling;a!==null;)dl(a,c,h),a=a.sibling}function jh(a){var c=a.stateNode,h=a.memoizedProps;try{for(var p=a.type,b=c.attributes;b.length;)c.removeAttributeNode(b[0]);as(c,p,h),c[Dt]=a,c[pn]=h}catch(R){Cn(a,a.return,R)}}var Ar=!1,$n=!1,Wc=!1,Nh=typeof WeakSet=="function"?WeakSet:Set,es=null;function _m(a,c){if(a=a.containerInfo,xu=Pl,a=zu(a),ql(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var b=p.anchorOffset,R=p.focusNode;p=p.focusOffset;try{h.nodeType,R.nodeType}catch{h=null;break e}var ee=0,te=-1,ae=-1,Ee=0,Ve=0,Fe=a,Ae=null;t:for(;;){for(var Ce;Fe!==h||b!==0&&Fe.nodeType!==3||(te=ee+b),Fe!==R||p!==0&&Fe.nodeType!==3||(ae=ee+p),Fe.nodeType===3&&(ee+=Fe.nodeValue.length),(Ce=Fe.firstChild)!==null;)Ae=Fe,Fe=Ce;for(;;){if(Fe===a)break t;if(Ae===h&&++Ee===b&&(te=ee),Ae===R&&++Ve===p&&(ae=ee),(Ce=Fe.nextSibling)!==null)break;Fe=Ae,Ae=Fe.parentNode}Fe=Ce}h=te===-1||ae===-1?null:{start:te,end:ae}}else h=null}h=h||{start:0,end:0}}else h=null;for(yu={focusedElem:a,selectionRange:h},Pl=!1,es=c;es!==null;)if(c=es,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,es=a;else for(;es!==null;){switch(c=es,R=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&R!==null){a=void 0,h=c,b=R.memoizedProps,R=R.memoizedState,p=h.stateNode;try{var rt=Ri(h.type,b,h.elementType===h.type);a=p.getSnapshotBeforeUpdate(rt,R),p.__reactInternalSnapshotBeforeUpdate=a}catch(tt){Cn(h,h.return,tt)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,h=a.nodeType,h===9)bu(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":bu(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=c.sibling,a!==null){a.return=c.return,es=a;break}es=c.return}}function Dh(a,c,h){var p=h.flags;switch(h.tag){case 0:case 11:case 15:zr(a,h),p&4&&Jo(5,h);break;case 1:if(zr(a,h),p&4)if(a=h.stateNode,c===null)try{a.componentDidMount()}catch(ee){Cn(h,h.return,ee)}else{var b=Ri(h.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(b,c,a.__reactInternalSnapshotBeforeUpdate)}catch(ee){Cn(h,h.return,ee)}}p&64&&Sh(h),p&512&&Zo(h,h.return);break;case 3:if(zr(a,h),p&64&&(a=h.updateQueue,a!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{fd(a,c)}catch(ee){Cn(h,h.return,ee)}}break;case 27:c===null&&p&4&&jh(h);case 26:case 5:zr(a,h),c===null&&p&4&&Ph(h),p&512&&Zo(h,h.return);break;case 12:zr(a,h);break;case 13:zr(a,h),p&4&&Vh(a,h),p&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=Cm.bind(null,h),Gm(a,h))));break;case 22:if(p=h.memoizedState!==null||Ar,!p){c=c!==null&&c.memoizedState!==null||$n,b=Ar;var R=$n;Ar=p,($n=c)&&!R?Ur(a,h,(h.subtreeFlags&8772)!==0):zr(a,h),Ar=b,$n=R}break;case 30:break;default:zr(a,h)}}function kh(a){var c=a.alternate;c!==null&&(a.alternate=null,kh(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&Pr(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var kn=null,ms=!1;function Tr(a,c,h){for(h=h.child;h!==null;)Oh(a,c,h),h=h.sibling}function Oh(a,c,h){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(He,h)}catch{}switch(h.tag){case 26:$n||nr(h,c),Tr(a,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:$n||nr(h,c);var p=kn,b=ms;Yr(h.type)&&(kn=h.stateNode,ms=!1),Tr(a,c,h),la(h.stateNode),kn=p,ms=b;break;case 5:$n||nr(h,c);case 6:if(p=kn,b=ms,kn=null,Tr(a,c,h),kn=p,ms=b,kn!==null)if(ms)try{(kn.nodeType===9?kn.body:kn.nodeName==="HTML"?kn.ownerDocument.body:kn).removeChild(h.stateNode)}catch(R){Cn(h,c,R)}else try{kn.removeChild(h.stateNode)}catch(R){Cn(h,c,R)}break;case 18:kn!==null&&(ms?(a=kn,Rf(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),ga(a)):Rf(kn,h.stateNode));break;case 4:p=kn,b=ms,kn=h.stateNode.containerInfo,ms=!0,Tr(a,c,h),kn=p,ms=b;break;case 0:case 11:case 14:case 15:$n||Fr(2,h,c),$n||Fr(4,h,c),Tr(a,c,h);break;case 1:$n||(nr(h,c),p=h.stateNode,typeof p.componentWillUnmount=="function"&&Ch(h,c,p)),Tr(a,c,h);break;case 21:Tr(a,c,h);break;case 22:$n=(p=$n)||h.memoizedState!==null,Tr(a,c,h),$n=p;break;default:Tr(a,c,h)}}function Vh(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{ga(a)}catch(h){Cn(c,c.return,h)}}function vm(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new Nh),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new Nh),c;default:throw Error(s(435,a.tag))}}function Yc(a,c){var h=vm(a);c.forEach(function(p){var b=Pm.bind(null,a,p);h.has(p)||(h.add(p),p.then(b,b))})}function vs(a,c){var h=c.deletions;if(h!==null)for(var p=0;p<h.length;p++){var b=h[p],R=a,ee=c,te=ee;e:for(;te!==null;){switch(te.tag){case 27:if(Yr(te.type)){kn=te.stateNode,ms=!1;break e}break;case 5:kn=te.stateNode,ms=!1;break e;case 3:case 4:kn=te.stateNode.containerInfo,ms=!0;break e}te=te.return}if(kn===null)throw Error(s(160));Oh(R,ee,b),kn=null,ms=!1,R=b.alternate,R!==null&&(R.return=null),b.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)Mh(c,a),c=c.sibling}var zs=null;function Mh(a,c){var h=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:vs(c,a),bs(a),p&4&&(Fr(3,a,a.return),Jo(3,a),Fr(5,a,a.return));break;case 1:vs(c,a),bs(a),p&512&&($n||h===null||nr(h,h.return)),p&64&&Ar&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?p:h.concat(p))));break;case 26:var b=zs;if(vs(c,a),bs(a),p&512&&($n||h===null||nr(h,h.return)),p&4){var R=h!==null?h.memoizedState:null;if(p=a.memoizedState,h===null)if(p===null)if(a.stateNode===null){e:{p=a.type,h=a.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":R=b.getElementsByTagName("title")[0],(!R||R[Ms]||R[Dt]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=b.createElement(p),b.head.insertBefore(R,b.querySelector("head > title"))),as(R,p,h),R[Dt]=a,zn(R),p=R;break e;case"link":var ee=Nf("link","href",b).get(p+(h.href||""));if(ee){for(var te=0;te<ee.length;te++)if(R=ee[te],R.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&R.getAttribute("rel")===(h.rel==null?null:h.rel)&&R.getAttribute("title")===(h.title==null?null:h.title)&&R.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){ee.splice(te,1);break t}}R=b.createElement(p),as(R,p,h),b.head.appendChild(R);break;case"meta":if(ee=Nf("meta","content",b).get(p+(h.content||""))){for(te=0;te<ee.length;te++)if(R=ee[te],R.getAttribute("content")===(h.content==null?null:""+h.content)&&R.getAttribute("name")===(h.name==null?null:h.name)&&R.getAttribute("property")===(h.property==null?null:h.property)&&R.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&R.getAttribute("charset")===(h.charSet==null?null:h.charSet)){ee.splice(te,1);break t}}R=b.createElement(p),as(R,p,h),b.head.appendChild(R);break;default:throw Error(s(468,p))}R[Dt]=a,zn(R),p=R}a.stateNode=p}else Df(b,a.type,a.stateNode);else a.stateNode=jf(b,p,a.memoizedProps);else R!==p?(R===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):R.count--,p===null?Df(b,a.type,a.stateNode):jf(b,p,a.memoizedProps)):p===null&&a.stateNode!==null&&Hc(a,a.memoizedProps,h.memoizedProps)}break;case 27:vs(c,a),bs(a),p&512&&($n||h===null||nr(h,h.return)),h!==null&&p&4&&Hc(a,a.memoizedProps,h.memoizedProps);break;case 5:if(vs(c,a),bs(a),p&512&&($n||h===null||nr(h,h.return)),a.flags&32){b=a.stateNode;try{As(b,"")}catch(Ce){Cn(a,a.return,Ce)}}p&4&&a.stateNode!=null&&(b=a.memoizedProps,Hc(a,b,h!==null?h.memoizedProps:b)),p&1024&&(Wc=!0);break;case 6:if(vs(c,a),bs(a),p&4){if(a.stateNode===null)throw Error(s(162));p=a.memoizedProps,h=a.stateNode;try{h.nodeValue=p}catch(Ce){Cn(a,a.return,Ce)}}break;case 3:if(Tl=null,b=zs,zs=Rl(c.containerInfo),vs(c,a),zs=b,bs(a),p&4&&h!==null&&h.memoizedState.isDehydrated)try{ga(c.containerInfo)}catch(Ce){Cn(a,a.return,Ce)}Wc&&(Wc=!1,Lh(a));break;case 4:p=zs,zs=Rl(a.stateNode.containerInfo),vs(c,a),bs(a),zs=p;break;case 12:vs(c,a),bs(a);break;case 13:vs(c,a),bs(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(eu=ze()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Yc(a,p)));break;case 22:b=a.memoizedState!==null;var ae=h!==null&&h.memoizedState!==null,Ee=Ar,Ve=$n;if(Ar=Ee||b,$n=Ve||ae,vs(c,a),$n=Ve,Ar=Ee,bs(a),p&8192)e:for(c=a.stateNode,c._visibility=b?c._visibility&-2:c._visibility|1,b&&(h===null||ae||Ar||$n||Ai(a)),h=null,c=a;;){if(c.tag===5||c.tag===26){if(h===null){ae=h=c;try{if(R=ae.stateNode,b)ee=R.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none";else{te=ae.stateNode;var Fe=ae.memoizedProps.style,Ae=Fe!=null&&Fe.hasOwnProperty("display")?Fe.display:null;te.style.display=Ae==null||typeof Ae=="boolean"?"":(""+Ae).trim()}}catch(Ce){Cn(ae,ae.return,Ce)}}}else if(c.tag===6){if(h===null){ae=c;try{ae.stateNode.nodeValue=b?"":ae.memoizedProps}catch(Ce){Cn(ae,ae.return,Ce)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}p&4&&(p=a.updateQueue,p!==null&&(h=p.retryQueue,h!==null&&(p.retryQueue=null,Yc(a,h))));break;case 19:vs(c,a),bs(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Yc(a,p)));break;case 30:break;case 21:break;default:vs(c,a),bs(a)}}function bs(a){var c=a.flags;if(c&2){try{for(var h,p=a.return;p!==null;){if(Ih(p)){h=p;break}p=p.return}if(h==null)throw Error(s(160));switch(h.tag){case 27:var b=h.stateNode,R=qc(a);dl(a,R,b);break;case 5:var ee=h.stateNode;h.flags&32&&(As(ee,""),h.flags&=-33);var te=qc(a);dl(a,te,ee);break;case 3:case 4:var ae=h.stateNode.containerInfo,Ee=qc(a);Gc(a,Ee,ae);break;default:throw Error(s(161))}}catch(Ve){Cn(a,a.return,Ve)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function Lh(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;Lh(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function zr(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Dh(a,c.alternate,c),c=c.sibling}function Ai(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:Fr(4,c,c.return),Ai(c);break;case 1:nr(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&Ch(c,c.return,h),Ai(c);break;case 27:la(c.stateNode);case 26:case 5:nr(c,c.return),Ai(c);break;case 22:c.memoizedState===null&&Ai(c);break;case 30:Ai(c);break;default:Ai(c)}a=a.sibling}}function Ur(a,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var p=c.alternate,b=a,R=c,ee=R.flags;switch(R.tag){case 0:case 11:case 15:Ur(b,R,h),Jo(4,R);break;case 1:if(Ur(b,R,h),p=R,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Ee){Cn(p,p.return,Ee)}if(p=R,b=p.updateQueue,b!==null){var te=p.stateNode;try{var ae=b.shared.hiddenCallbacks;if(ae!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ae.length;b++)hd(ae[b],te)}catch(Ee){Cn(p,p.return,Ee)}}h&&ee&64&&Sh(R),Zo(R,R.return);break;case 27:jh(R);case 26:case 5:Ur(b,R,h),h&&p===null&&ee&4&&Ph(R),Zo(R,R.return);break;case 12:Ur(b,R,h);break;case 13:Ur(b,R,h),h&&ee&4&&Vh(b,R);break;case 22:R.memoizedState===null&&Ur(b,R,h),Zo(R,R.return);break;case 30:break;default:Ur(b,R,h)}c=c.sibling}}function Kc(a,c){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&Lo(h))}function Xc(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Lo(a))}function sr(a,c,h,p){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Bh(a,c,h,p),c=c.sibling}function Bh(a,c,h,p){var b=c.flags;switch(c.tag){case 0:case 11:case 15:sr(a,c,h,p),b&2048&&Jo(9,c);break;case 1:sr(a,c,h,p);break;case 3:sr(a,c,h,p),b&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Lo(a)));break;case 12:if(b&2048){sr(a,c,h,p),a=c.stateNode;try{var R=c.memoizedProps,ee=R.id,te=R.onPostCommit;typeof te=="function"&&te(ee,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ae){Cn(c,c.return,ae)}}else sr(a,c,h,p);break;case 13:sr(a,c,h,p);break;case 23:break;case 22:R=c.stateNode,ee=c.alternate,c.memoizedState!==null?R._visibility&2?sr(a,c,h,p):ea(a,c):R._visibility&2?sr(a,c,h,p):(R._visibility|=2,ro(a,c,h,p,(c.subtreeFlags&10256)!==0)),b&2048&&Kc(ee,c);break;case 24:sr(a,c,h,p),b&2048&&Xc(c.alternate,c);break;default:sr(a,c,h,p)}}function ro(a,c,h,p,b){for(b=b&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var R=a,ee=c,te=h,ae=p,Ee=ee.flags;switch(ee.tag){case 0:case 11:case 15:ro(R,ee,te,ae,b),Jo(8,ee);break;case 23:break;case 22:var Ve=ee.stateNode;ee.memoizedState!==null?Ve._visibility&2?ro(R,ee,te,ae,b):ea(R,ee):(Ve._visibility|=2,ro(R,ee,te,ae,b)),b&&Ee&2048&&Kc(ee.alternate,ee);break;case 24:ro(R,ee,te,ae,b),b&&Ee&2048&&Xc(ee.alternate,ee);break;default:ro(R,ee,te,ae,b)}c=c.sibling}}function ea(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=a,p=c,b=p.flags;switch(p.tag){case 22:ea(h,p),b&2048&&Kc(p.alternate,p);break;case 24:ea(h,p),b&2048&&Xc(p.alternate,p);break;default:ea(h,p)}c=c.sibling}}var ta=8192;function io(a){if(a.subtreeFlags&ta)for(a=a.child;a!==null;)Fh(a),a=a.sibling}function Fh(a){switch(a.tag){case 26:io(a),a.flags&ta&&a.memoizedState!==null&&ip(zs,a.memoizedState,a.memoizedProps);break;case 5:io(a);break;case 3:case 4:var c=zs;zs=Rl(a.stateNode.containerInfo),io(a),zs=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=ta,ta=16777216,io(a),ta=c):io(a));break;default:io(a)}}function zh(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function na(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var p=c[h];es=p,$h(p,a)}zh(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Uh(a),a=a.sibling}function Uh(a){switch(a.tag){case 0:case 11:case 15:na(a),a.flags&2048&&Fr(9,a,a.return);break;case 3:na(a);break;case 12:na(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,hl(a)):na(a);break;default:na(a)}}function hl(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var p=c[h];es=p,$h(p,a)}zh(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:Fr(8,c,c.return),hl(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,hl(c));break;default:hl(c)}a=a.sibling}}function $h(a,c){for(;es!==null;){var h=es;switch(h.tag){case 0:case 11:case 15:Fr(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var p=h.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Lo(h.memoizedState.cache)}if(p=h.child,p!==null)p.return=h,es=p;else e:for(h=a;es!==null;){p=es;var b=p.sibling,R=p.return;if(kh(p),p===h){es=null;break e}if(b!==null){b.return=R,es=b;break e}es=R}}}var bm={getCacheForType:function(a){var c=ls(Kn),h=c.data.get(a);return h===void 0&&(h=a(),c.data.set(a,h)),h}},Em=typeof WeakMap=="function"?WeakMap:Map,vn=0,In=null,Ut=null,fn=0,bn=0,Es=null,$r=!1,oo=!1,Qc=!1,Sr=0,Bn=0,Hr=0,Ti=0,Jc=0,ks=0,ao=0,sa=null,ps=null,Zc=!1,eu=0,fl=1/0,ml=null,qr=null,os=0,Gr=null,lo=null,co=0,tu=0,nu=null,Hh=null,ra=0,su=null;function ws(){if((vn&2)!==0&&fn!==0)return fn&-fn;if(oe.T!==null){var a=Ki;return a!==0?a:uu()}return Mn()}function qh(){ks===0&&(ks=(fn&536870912)===0||xn?Qe():536870912);var a=Ds.current;return a!==null&&(a.flags|=32),ks}function Rs(a,c,h){(a===In&&(bn===2||bn===9)||a.cancelPendingCommit!==null)&&(uo(a,0),Wr(a,fn,ks,!1)),Wt(a,h),((vn&2)===0||a!==In)&&(a===In&&((vn&2)===0&&(Ti|=h),Bn===4&&Wr(a,fn,ks,!1)),rr(a))}function Gh(a,c,h){if((vn&6)!==0)throw Error(s(327));var p=!h&&(c&124)===0&&(c&a.expiredLanes)===0||un(a,c),b=p?Am(a,c):ou(a,c,!0),R=p;do{if(b===0){oo&&!p&&Wr(a,c,0,!1);break}else{if(h=a.current.alternate,R&&!wm(h)){b=ou(a,c,!1),R=!1;continue}if(b===2){if(R=c,a.errorRecoveryDisabledLanes&R)var ee=0;else ee=a.pendingLanes&-536870913,ee=ee!==0?ee:ee&536870912?536870912:0;if(ee!==0){c=ee;e:{var te=a;b=sa;var ae=te.current.memoizedState.isDehydrated;if(ae&&(uo(te,ee).flags|=256),ee=ou(te,ee,!1),ee!==2){if(Qc&&!ae){te.errorRecoveryDisabledLanes|=R,Ti|=R,b=4;break e}R=ps,ps=b,R!==null&&(ps===null?ps=R:ps.push.apply(ps,R))}b=ee}if(R=!1,b!==2)continue}}if(b===1){uo(a,0),Wr(a,c,0,!0);break}e:{switch(p=a,R=b,R){case 0:case 1:throw Error(s(345));case 4:if((c&4194048)!==c)break;case 6:Wr(p,c,ks,!$r);break e;case 2:ps=null;break;case 3:case 5:break;default:throw Error(s(329))}if((c&62914560)===c&&(b=eu+300-ze(),10<b)){if(Wr(p,c,ks,!$r),Gt(p,0,!0)!==0)break e;p.timeoutHandle=Ef(Wh.bind(null,p,h,ps,ml,Zc,c,ks,Ti,ao,$r,R,2,-0,0),b);break e}Wh(p,h,ps,ml,Zc,c,ks,Ti,ao,$r,R,0,-0,0)}}break}while(!0);rr(a)}function Wh(a,c,h,p,b,R,ee,te,ae,Ee,Ve,Fe,Ae,Ce){if(a.timeoutHandle=-1,Fe=c.subtreeFlags,(Fe&8192||(Fe&16785408)===16785408)&&(da={stylesheets:null,count:0,unsuspend:rp},Fh(c),Fe=op(),Fe!==null)){a.cancelPendingCommit=Fe(ef.bind(null,a,c,R,h,p,b,ee,te,ae,Ve,1,Ae,Ce)),Wr(a,R,ee,!Ee);return}ef(a,c,R,h,p,b,ee,te,ae)}function wm(a){for(var c=a;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var p=0;p<h.length;p++){var b=h[p],R=b.getSnapshot;b=b.value;try{if(!ys(R(),b))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Wr(a,c,h,p){c&=~Jc,c&=~Ti,a.suspendedLanes|=c,a.pingedLanes&=~c,p&&(a.warmLanes|=c),p=a.expirationTimes;for(var b=c;0<b;){var R=31-et(b),ee=1<<R;p[R]=-1,b&=~ee}h!==0&&jn(a,h,c)}function pl(){return(vn&6)===0?(ia(0),!1):!0}function ru(){if(Ut!==null){if(bn===0)var a=Ut.return;else a=Ut,_r=vi=null,bc(a),no=null,Ko=0,a=Ut;for(;a!==null;)Th(a.alternate,a),a=a.return;Ut=null}}function uo(a,c){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,zm(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),ru(),In=a,Ut=h=gr(a.current,null),fn=c,bn=0,Es=null,$r=!1,oo=un(a,c),Qc=!1,ao=ks=Jc=Ti=Hr=Bn=0,ps=sa=null,Zc=!1,(c&8)!==0&&(c|=c&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=c;0<p;){var b=31-et(p),R=1<<b;c|=a[b],p&=~R}return Sr=c,Ma(),h}function Yh(a,c){kt=null,oe.H=nl,c===Fo||c===Ga?(c=ud(),bn=3):c===ad?(c=ud(),bn=4):bn=c===dh?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Es=c,Ut===null&&(Bn=1,al(a,Ps(c,a.current)))}function Kh(){var a=oe.H;return oe.H=nl,a===null?nl:a}function Xh(){var a=oe.A;return oe.A=bm,a}function iu(){Bn=4,$r||(fn&4194048)!==fn&&Ds.current!==null||(oo=!0),(Hr&134217727)===0&&(Ti&134217727)===0||In===null||Wr(In,fn,ks,!1)}function ou(a,c,h){var p=vn;vn|=2;var b=Kh(),R=Xh();(In!==a||fn!==c)&&(ml=null,uo(a,c)),c=!1;var ee=Bn;e:do try{if(bn!==0&&Ut!==null){var te=Ut,ae=Es;switch(bn){case 8:ru(),ee=6;break e;case 3:case 2:case 9:case 6:Ds.current===null&&(c=!0);var Ee=bn;if(bn=0,Es=null,ho(a,te,ae,Ee),h&&oo){ee=0;break e}break;default:Ee=bn,bn=0,Es=null,ho(a,te,ae,Ee)}}Rm(),ee=Bn;break}catch(Ve){Yh(a,Ve)}while(!0);return c&&a.shellSuspendCounter++,_r=vi=null,vn=p,oe.H=b,oe.A=R,Ut===null&&(In=null,fn=0,Ma()),ee}function Rm(){for(;Ut!==null;)Qh(Ut)}function Am(a,c){var h=vn;vn|=2;var p=Kh(),b=Xh();In!==a||fn!==c?(ml=null,fl=ze()+500,uo(a,c)):oo=un(a,c);e:do try{if(bn!==0&&Ut!==null){c=Ut;var R=Es;t:switch(bn){case 1:bn=0,Es=null,ho(a,c,R,1);break;case 2:case 9:if(ld(R)){bn=0,Es=null,Jh(c);break}c=function(){bn!==2&&bn!==9||In!==a||(bn=7),rr(a)},R.then(c,c);break e;case 3:bn=7;break e;case 4:bn=5;break e;case 7:ld(R)?(bn=0,Es=null,Jh(c)):(bn=0,Es=null,ho(a,c,R,7));break;case 5:var ee=null;switch(Ut.tag){case 26:ee=Ut.memoizedState;case 5:case 27:var te=Ut;if(!ee||kf(ee)){bn=0,Es=null;var ae=te.sibling;if(ae!==null)Ut=ae;else{var Ee=te.return;Ee!==null?(Ut=Ee,gl(Ee)):Ut=null}break t}}bn=0,Es=null,ho(a,c,R,5);break;case 6:bn=0,Es=null,ho(a,c,R,6);break;case 8:ru(),Bn=6;break e;default:throw Error(s(462))}}Tm();break}catch(Ve){Yh(a,Ve)}while(!0);return _r=vi=null,oe.H=p,oe.A=b,vn=h,Ut!==null?0:(In=null,fn=0,Ma(),Bn)}function Tm(){for(;Ut!==null&&!he();)Qh(Ut)}function Qh(a){var c=Rh(a.alternate,a,Sr);a.memoizedProps=a.pendingProps,c===null?gl(a):Ut=c}function Jh(a){var c=a,h=c.alternate;switch(c.tag){case 15:case 0:c=xh(h,c,c.pendingProps,c.type,void 0,fn);break;case 11:c=xh(h,c,c.pendingProps,c.type.render,c.ref,fn);break;case 5:bc(c);default:Th(h,c),c=Ut=Qu(c,Sr),c=Rh(h,c,Sr)}a.memoizedProps=a.pendingProps,c===null?gl(a):Ut=c}function ho(a,c,h,p){_r=vi=null,bc(c),no=null,Ko=0;var b=c.return;try{if(pm(a,b,c,h,fn)){Bn=1,al(a,Ps(h,a.current)),Ut=null;return}}catch(R){if(b!==null)throw Ut=b,R;Bn=1,al(a,Ps(h,a.current)),Ut=null;return}c.flags&32768?(xn||p===1?a=!0:oo||(fn&536870912)!==0?a=!1:($r=a=!0,(p===2||p===9||p===3||p===6)&&(p=Ds.current,p!==null&&p.tag===13&&(p.flags|=16384))),Zh(c,a)):gl(c)}function gl(a){var c=a;do{if((c.flags&32768)!==0){Zh(c,$r);return}a=c.return;var h=xm(c.alternate,c,Sr);if(h!==null){Ut=h;return}if(c=c.sibling,c!==null){Ut=c;return}Ut=c=a}while(c!==null);Bn===0&&(Bn=5)}function Zh(a,c){do{var h=ym(a.alternate,a);if(h!==null){h.flags&=32767,Ut=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(a=a.sibling,a!==null)){Ut=a;return}Ut=a=h}while(a!==null);Bn=6,Ut=null}function ef(a,c,h,p,b,R,ee,te,ae){a.cancelPendingCommit=null;do xl();while(os!==0);if((vn&6)!==0)throw Error(s(327));if(c!==null){if(c===a.current)throw Error(s(177));if(R=c.lanes|c.childLanes,R|=Xl,On(a,h,R,ee,te,ae),a===In&&(Ut=In=null,fn=0),lo=c,Gr=a,co=h,tu=R,nu=b,Hh=p,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Im(xe,function(){return of(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||p){p=oe.T,oe.T=null,b=ce.p,ce.p=2,ee=vn,vn|=4;try{_m(a,c,h)}finally{vn=ee,ce.p=b,oe.T=p}}os=1,tf(),nf(),sf()}}function tf(){if(os===1){os=0;var a=Gr,c=lo,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=oe.T,oe.T=null;var p=ce.p;ce.p=2;var b=vn;vn|=4;try{Mh(c,a);var R=yu,ee=zu(a.containerInfo),te=R.focusedElem,ae=R.selectionRange;if(ee!==te&&te&&te.ownerDocument&&Fu(te.ownerDocument.documentElement,te)){if(ae!==null&&ql(te)){var Ee=ae.start,Ve=ae.end;if(Ve===void 0&&(Ve=Ee),"selectionStart"in te)te.selectionStart=Ee,te.selectionEnd=Math.min(Ve,te.value.length);else{var Fe=te.ownerDocument||document,Ae=Fe&&Fe.defaultView||window;if(Ae.getSelection){var Ce=Ae.getSelection(),rt=te.textContent.length,tt=Math.min(ae.start,rt),An=ae.end===void 0?tt:Math.min(ae.end,rt);!Ce.extend&&tt>An&&(ee=An,An=tt,tt=ee);var pe=Bu(te,tt),fe=Bu(te,An);if(pe&&fe&&(Ce.rangeCount!==1||Ce.anchorNode!==pe.node||Ce.anchorOffset!==pe.offset||Ce.focusNode!==fe.node||Ce.focusOffset!==fe.offset)){var be=Fe.createRange();be.setStart(pe.node,pe.offset),Ce.removeAllRanges(),tt>An?(Ce.addRange(be),Ce.extend(fe.node,fe.offset)):(be.setEnd(fe.node,fe.offset),Ce.addRange(be))}}}}for(Fe=[],Ce=te;Ce=Ce.parentNode;)Ce.nodeType===1&&Fe.push({element:Ce,left:Ce.scrollLeft,top:Ce.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<Fe.length;te++){var Le=Fe[te];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}Pl=!!xu,yu=xu=null}finally{vn=b,ce.p=p,oe.T=h}}a.current=c,os=2}}function nf(){if(os===2){os=0;var a=Gr,c=lo,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=oe.T,oe.T=null;var p=ce.p;ce.p=2;var b=vn;vn|=4;try{Dh(a,c.alternate,c)}finally{vn=b,ce.p=p,oe.T=h}}os=3}}function sf(){if(os===4||os===3){os=0,Pe();var a=Gr,c=lo,h=co,p=Hh;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?os=5:(os=0,lo=Gr=null,rf(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(qr=null),Nn(h),c=c.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(He,c,void 0,(c.current.flags&128)===128)}catch{}if(p!==null){c=oe.T,b=ce.p,ce.p=2,oe.T=null;try{for(var R=a.onRecoverableError,ee=0;ee<p.length;ee++){var te=p[ee];R(te.value,{componentStack:te.stack})}}finally{oe.T=c,ce.p=b}}(co&3)!==0&&xl(),rr(a),b=a.pendingLanes,(h&4194090)!==0&&(b&42)!==0?a===su?ra++:(ra=0,su=a):ra=0,ia(0)}}function rf(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,Lo(c)))}function xl(a){return tf(),nf(),sf(),of()}function of(){if(os!==5)return!1;var a=Gr,c=tu;tu=0;var h=Nn(co),p=oe.T,b=ce.p;try{ce.p=32>h?32:h,oe.T=null,h=nu,nu=null;var R=Gr,ee=co;if(os=0,lo=Gr=null,co=0,(vn&6)!==0)throw Error(s(331));var te=vn;if(vn|=4,Uh(R.current),Bh(R,R.current,ee,h),vn=te,ia(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(He,R)}catch{}return!0}finally{ce.p=b,oe.T=p,rf(a,c)}}function af(a,c,h){c=Ps(h,c),c=Oc(a.stateNode,c,2),a=Vr(a,c,2),a!==null&&(Wt(a,2),rr(a))}function Cn(a,c,h){if(a.tag===3)af(a,a,h);else for(;c!==null;){if(c.tag===3){af(c,a,h);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(qr===null||!qr.has(p))){a=Ps(h,a),h=ch(2),p=Vr(c,h,2),p!==null&&(uh(h,p,c,a),Wt(p,2),rr(p));break}}c=c.return}}function au(a,c,h){var p=a.pingCache;if(p===null){p=a.pingCache=new Em;var b=new Set;p.set(c,b)}else b=p.get(c),b===void 0&&(b=new Set,p.set(c,b));b.has(h)||(Qc=!0,b.add(h),a=Sm.bind(null,a,c,h),c.then(a,a))}function Sm(a,c,h){var p=a.pingCache;p!==null&&p.delete(c),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,In===a&&(fn&h)===h&&(Bn===4||Bn===3&&(fn&62914560)===fn&&300>ze()-eu?(vn&2)===0&&uo(a,0):Jc|=h,ao===fn&&(ao=0)),rr(a)}function lf(a,c){c===0&&(c=Dn()),a=qi(a,c),a!==null&&(Wt(a,c),rr(a))}function Cm(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),lf(a,h)}function Pm(a,c){var h=0;switch(a.tag){case 13:var p=a.stateNode,b=a.memoizedState;b!==null&&(h=b.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(s(314))}p!==null&&p.delete(c),lf(a,h)}function Im(a,c){return ue(a,c)}var yl=null,fo=null,lu=!1,_l=!1,cu=!1,Si=0;function rr(a){a!==fo&&a.next===null&&(fo===null?yl=fo=a:fo=fo.next=a),_l=!0,lu||(lu=!0,Nm())}function ia(a,c){if(!cu&&_l){cu=!0;do for(var h=!1,p=yl;p!==null;){if(a!==0){var b=p.pendingLanes;if(b===0)var R=0;else{var ee=p.suspendedLanes,te=p.pingedLanes;R=(1<<31-et(42|a)+1)-1,R&=b&~(ee&~te),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(h=!0,hf(p,R))}else R=fn,R=Gt(p,p===In?R:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(R&3)===0||un(p,R)||(h=!0,hf(p,R));p=p.next}while(h);cu=!1}}function jm(){cf()}function cf(){_l=lu=!1;var a=0;Si!==0&&(Fm()&&(a=Si),Si=0);for(var c=ze(),h=null,p=yl;p!==null;){var b=p.next,R=uf(p,c);R===0?(p.next=null,h===null?yl=b:h.next=b,b===null&&(fo=h)):(h=p,(a!==0||(R&3)!==0)&&(_l=!0)),p=b}ia(a)}function uf(a,c){for(var h=a.suspendedLanes,p=a.pingedLanes,b=a.expirationTimes,R=a.pendingLanes&-62914561;0<R;){var ee=31-et(R),te=1<<ee,ae=b[ee];ae===-1?((te&h)===0||(te&p)!==0)&&(b[ee]=pt(te,c)):ae<=c&&(a.expiredLanes|=te),R&=~te}if(c=In,h=fn,h=Gt(a,a===c?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,h===0||a===c&&(bn===2||bn===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&se(p),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||un(a,h)){if(c=h&-h,c===a.callbackPriority)return c;switch(p!==null&&se(p),Nn(h)){case 2:case 8:h=ve;break;case 32:h=xe;break;case 268435456:h=Oe;break;default:h=xe}return p=df.bind(null,a),h=ue(h,p),a.callbackPriority=c,a.callbackNode=h,c}return p!==null&&p!==null&&se(p),a.callbackPriority=2,a.callbackNode=null,2}function df(a,c){if(os!==0&&os!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(xl()&&a.callbackNode!==h)return null;var p=fn;return p=Gt(a,a===In?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(Gh(a,p,c),uf(a,ze()),a.callbackNode!=null&&a.callbackNode===h?df.bind(null,a):null)}function hf(a,c){if(xl())return null;Gh(a,c,!0)}function Nm(){Um(function(){(vn&6)!==0?ue(vt,jm):cf()})}function uu(){return Si===0&&(Si=Qe()),Si}function ff(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Di(""+a)}function mf(a,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,a.id&&h.setAttribute("form",a.id),c.parentNode.insertBefore(h,c),a=new FormData(a),h.parentNode.removeChild(h),a}function Dm(a,c,h,p,b){if(c==="submit"&&h&&h.stateNode===b){var R=ff((b[pn]||null).action),ee=p.submitter;ee&&(c=(c=ee[pn]||null)?ff(c.formAction):ee.getAttribute("formAction"),c!==null&&(R=c,ee=null));var te=new ki("action","action",null,p,b);a.push({event:te,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Si!==0){var ae=ee?mf(b,ee):new FormData(b);Ic(h,{pending:!0,data:ae,method:b.method,action:R},null,ae)}}else typeof R=="function"&&(te.preventDefault(),ae=ee?mf(b,ee):new FormData(b),Ic(h,{pending:!0,data:ae,method:b.method,action:R},R,ae))},currentTarget:b}]})}}for(var du=0;du<Kl.length;du++){var hu=Kl[du],km=hu.toLowerCase(),Om=hu[0].toUpperCase()+hu.slice(1);Fs(km,"on"+Om)}Fs(Hu,"onAnimationEnd"),Fs(qu,"onAnimationIteration"),Fs(Gu,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(Jf,"onTransitionRun"),Fs(Zf,"onTransitionStart"),Fs(em,"onTransitionCancel"),Fs(Wu,"onTransitionEnd"),ar("onMouseEnter",["mouseout","mouseover"]),ar("onMouseLeave",["mouseout","mouseover"]),ar("onPointerEnter",["pointerout","pointerover"]),ar("onPointerLeave",["pointerout","pointerover"]),Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oa));function pf(a,c){c=(c&4)!==0;for(var h=0;h<a.length;h++){var p=a[h],b=p.event;p=p.listeners;e:{var R=void 0;if(c)for(var ee=p.length-1;0<=ee;ee--){var te=p[ee],ae=te.instance,Ee=te.currentTarget;if(te=te.listener,ae!==R&&b.isPropagationStopped())break e;R=te,b.currentTarget=Ee;try{R(b)}catch(Ve){ol(Ve)}b.currentTarget=null,R=ae}else for(ee=0;ee<p.length;ee++){if(te=p[ee],ae=te.instance,Ee=te.currentTarget,te=te.listener,ae!==R&&b.isPropagationStopped())break e;R=te,b.currentTarget=Ee;try{R(b)}catch(Ve){ol(Ve)}b.currentTarget=null,R=ae}}}}function qt(a,c){var h=c[Vs];h===void 0&&(h=c[Vs]=new Set);var p=a+"__bubble";h.has(p)||(gf(c,a,2,!1),h.add(p))}function fu(a,c,h){var p=0;c&&(p|=4),gf(h,a,p,c)}var vl="_reactListening"+Math.random().toString(36).slice(2);function mu(a){if(!a[vl]){a[vl]=!0,yo.forEach(function(h){h!=="selectionchange"&&(Vm.has(h)||fu(h,!1,a),fu(h,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[vl]||(c[vl]=!0,fu("selectionchange",!1,c))}}function gf(a,c,h,p){switch(Ff(c)){case 2:var b=cp;break;case 8:b=dp;break;default:b=Cu}h=b.bind(null,c,h,a),b=void 0,!Ss||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),p?b!==void 0?a.addEventListener(c,h,{capture:!0,passive:b}):a.addEventListener(c,h,!0):b!==void 0?a.addEventListener(c,h,{passive:b}):a.addEventListener(c,h,!1)}function pu(a,c,h,p,b){var R=p;if((c&1)===0&&(c&2)===0&&p!==null)e:for(;;){if(p===null)return;var ee=p.tag;if(ee===3||ee===4){var te=p.stateNode.containerInfo;if(te===b)break;if(ee===4)for(ee=p.return;ee!==null;){var ae=ee.tag;if((ae===3||ae===4)&&ee.stateNode.containerInfo===b)return;ee=ee.return}for(;te!==null;){if(ee=or(te),ee===null)return;if(ae=ee.tag,ae===5||ae===6||ae===26||ae===27){p=R=ee;continue e}te=te.parentNode}}p=p.return}Ea(function(){var Ee=R,Ve=Ts(h),Fe=[];e:{var Ae=Yu.get(a);if(Ae!==void 0){var Ce=ki,rt=a;switch(a){case"keypress":if(Ks(h)===0)break e;case"keydown":case"keyup":Ce=Fi;break;case"focusin":rt="focus",Ce=Mi;break;case"focusout":rt="blur",Ce=Mi;break;case"beforeblur":case"afterblur":Ce=Mi;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=Cs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=zl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=Ia;break;case Hu:case qu:case Gu:Ce=Li;break;case Wu:Ce=Na;break;case"scroll":case"scrollend":Ce=wa;break;case"wheel":Ce=zi;break;case"copy":case"cut":case"paste":Ce=Bi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=Io;break;case"toggle":case"beforetoggle":Ce=ka}var tt=(c&4)!==0,An=!tt&&(a==="scroll"||a==="scrollend"),pe=tt?Ae!==null?Ae+"Capture":null:Ae;tt=[];for(var fe=Ee,be;fe!==null;){var Le=fe;if(be=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||be===null||pe===null||(Le=oi(fe,pe),Le!=null&&tt.push(aa(fe,Le,be))),An)break;fe=fe.return}0<tt.length&&(Ae=new Ce(Ae,rt,null,h,Ve),Fe.push({event:Ae,listeners:tt}))}}if((c&7)===0){e:{if(Ae=a==="mouseover"||a==="pointerover",Ce=a==="mouseout"||a==="pointerout",Ae&&h!==ur&&(rt=h.relatedTarget||h.fromElement)&&(or(rt)||rt[Sn]))break e;if((Ce||Ae)&&(Ae=Ve.window===Ve?Ve:(Ae=Ve.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Ce?(rt=h.relatedTarget||h.toElement,Ce=Ee,rt=rt?or(rt):null,rt!==null&&(An=o(rt),tt=rt.tag,rt!==An||tt!==5&&tt!==27&&tt!==6)&&(rt=null)):(Ce=null,rt=Ee),Ce!==rt)){if(tt=Cs,Le="onMouseLeave",pe="onMouseEnter",fe="mouse",(a==="pointerout"||a==="pointerover")&&(tt=Io,Le="onPointerLeave",pe="onPointerEnter",fe="pointer"),An=Ce==null?Ae:qs(Ce),be=rt==null?Ae:qs(rt),Ae=new tt(Le,fe+"leave",Ce,h,Ve),Ae.target=An,Ae.relatedTarget=be,Le=null,or(Ve)===Ee&&(tt=new tt(pe,fe+"enter",rt,h,Ve),tt.target=be,tt.relatedTarget=An,Le=tt),An=Le,Ce&&rt)t:{for(tt=Ce,pe=rt,fe=0,be=tt;be;be=mo(be))fe++;for(be=0,Le=pe;Le;Le=mo(Le))be++;for(;0<fe-be;)tt=mo(tt),fe--;for(;0<be-fe;)pe=mo(pe),be--;for(;fe--;){if(tt===pe||pe!==null&&tt===pe.alternate)break t;tt=mo(tt),pe=mo(pe)}tt=null}else tt=null;Ce!==null&&xf(Fe,Ae,Ce,tt,!1),rt!==null&&An!==null&&xf(Fe,An,rt,tt,!0)}}e:{if(Ae=Ee?qs(Ee):window,Ce=Ae.nodeName&&Ae.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&Ae.type==="file")var Ke=Du;else if(Yn(Ae))if(ku)Ke=Kf;else{Ke=Wf;var Lt=Gf}else Ce=Ae.nodeName,!Ce||Ce.toLowerCase()!=="input"||Ae.type!=="checkbox"&&Ae.type!=="radio"?Ee&&wo(Ee.elementType)&&(Ke=Du):Ke=Yf;if(Ke&&(Ke=Ke(a,Ee))){pr(Fe,Ke,h,Ve);break e}Lt&&Lt(a,Ae,Ee),a==="focusout"&&Ee&&Ae.type==="number"&&Ee.memoizedProps.value!=null&&jr(Ae,"number",Ae.value)}switch(Lt=Ee?qs(Ee):window,a){case"focusin":(Yn(Lt)||Lt.contentEditable==="true")&&(Ui=Lt,Gl=Ee,Do=null);break;case"focusout":Do=Gl=Ui=null;break;case"mousedown":Wl=!0;break;case"contextmenu":case"mouseup":case"dragend":Wl=!1,Uu(Fe,h,Ve);break;case"selectionchange":if(Qf)break;case"keydown":case"keyup":Uu(Fe,h,Ve)}var Je;if(Js)e:{switch(a){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else dn?De(a,h)&&(nt="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(nt="onCompositionStart");nt&&(Z&&h.locale!=="ko"&&(dn||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&dn&&(Je=Ao()):(Ys=Ve,Nr="value"in Ys?Ys.value:Ys.textContent,dn=!0)),Lt=bl(Ee,nt),0<Lt.length&&(nt=new Co(nt,a,null,h,Ve),Fe.push({event:nt,listeners:Lt}),Je?nt.data=Je:(Je=We(h),Je!==null&&(nt.data=Je)))),(Je=C?Wn(a,h):hn(a,h))&&(nt=bl(Ee,"onBeforeInput"),0<nt.length&&(Lt=new Co("onBeforeInput","beforeinput",null,h,Ve),Fe.push({event:Lt,listeners:nt}),Lt.data=Je)),Dm(Fe,a,Ee,h,Ve)}pf(Fe,c)})}function aa(a,c,h){return{instance:a,listener:c,currentTarget:h}}function bl(a,c){for(var h=c+"Capture",p=[];a!==null;){var b=a,R=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||R===null||(b=oi(a,h),b!=null&&p.unshift(aa(a,b,R)),b=oi(a,c),b!=null&&p.push(aa(a,b,R))),a.tag===3)return p;a=a.return}return[]}function mo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function xf(a,c,h,p,b){for(var R=c._reactName,ee=[];h!==null&&h!==p;){var te=h,ae=te.alternate,Ee=te.stateNode;if(te=te.tag,ae!==null&&ae===p)break;te!==5&&te!==26&&te!==27||Ee===null||(ae=Ee,b?(Ee=oi(h,R),Ee!=null&&ee.unshift(aa(h,Ee,ae))):b||(Ee=oi(h,R),Ee!=null&&ee.push(aa(h,Ee,ae)))),h=h.return}ee.length!==0&&a.push({event:c,listeners:ee})}var Mm=/\r\n?/g,Lm=/\u0000|\uFFFD/g;function yf(a){return(typeof a=="string"?a:""+a).replace(Mm,`
`).replace(Lm,"")}function _f(a,c){return c=yf(c),yf(a)===c}function El(){}function Rn(a,c,h,p,b,R){switch(h){case"children":typeof p=="string"?c==="body"||c==="textarea"&&p===""||As(a,p):(typeof p=="number"||typeof p=="bigint")&&c!=="body"&&As(a,""+p);break;case"className":Gs(a,"class",p);break;case"tabIndex":Gs(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Gs(a,h,p);break;case"style":Eo(a,p,R);break;case"data":if(c!=="object"){Gs(a,"data",p);break}case"src":case"href":if(p===""&&(c!=="a"||h!=="href")){a.removeAttribute(h);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(h);break}p=Di(""+p),a.setAttribute(h,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(h==="formAction"?(c!=="input"&&Rn(a,c,"name",b.name,b,null),Rn(a,c,"formEncType",b.formEncType,b,null),Rn(a,c,"formMethod",b.formMethod,b,null),Rn(a,c,"formTarget",b.formTarget,b,null)):(Rn(a,c,"encType",b.encType,b,null),Rn(a,c,"method",b.method,b,null),Rn(a,c,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(h);break}p=Di(""+p),a.setAttribute(h,p);break;case"onClick":p!=null&&(a.onclick=El);break;case"onScroll":p!=null&&qt("scroll",a);break;case"onScrollEnd":p!=null&&qt("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(h=p.__html,h!=null){if(b.children!=null)throw Error(s(60));a.innerHTML=h}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}h=Di(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(h,""+p):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":p===!0?a.setAttribute(h,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(h,p):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(h,p):a.removeAttribute(h);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(h):a.setAttribute(h,p);break;case"popover":qt("beforetoggle",a),qt("toggle",a),Ir(a,"popover",p);break;case"xlinkActuate":ss(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ss(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ss(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ss(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ss(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ss(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ss(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ss(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ss(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Ir(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Bl.get(h)||h,Ir(a,h,p))}}function gu(a,c,h,p,b,R){switch(h){case"style":Eo(a,p,R);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(h=p.__html,h!=null){if(b.children!=null)throw Error(s(60));a.innerHTML=h}}break;case"children":typeof p=="string"?As(a,p):(typeof p=="number"||typeof p=="bigint")&&As(a,""+p);break;case"onScroll":p!=null&&qt("scroll",a);break;case"onScrollEnd":p!=null&&qt("scrollend",a);break;case"onClick":p!=null&&(a.onclick=El);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ci.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),c=h.slice(2,b?h.length-7:void 0),R=a[pn]||null,R=R!=null?R[h]:null,typeof R=="function"&&a.removeEventListener(c,R,b),typeof p=="function")){typeof R!="function"&&R!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(c,p,b);break e}h in a?a[h]=p:p===!0?a.setAttribute(h,""):Ir(a,h,p)}}}function as(a,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",a),qt("load",a);var p=!1,b=!1,R;for(R in h)if(h.hasOwnProperty(R)){var ee=h[R];if(ee!=null)switch(R){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:Rn(a,c,R,ee,h,null)}}b&&Rn(a,c,"srcSet",h.srcSet,h,null),p&&Rn(a,c,"src",h.src,h,null);return;case"input":qt("invalid",a);var te=R=ee=b=null,ae=null,Ee=null;for(p in h)if(h.hasOwnProperty(p)){var Ve=h[p];if(Ve!=null)switch(p){case"name":b=Ve;break;case"type":ee=Ve;break;case"checked":ae=Ve;break;case"defaultChecked":Ee=Ve;break;case"value":R=Ve;break;case"defaultValue":te=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(s(137,c));break;default:Rn(a,c,p,Ve,h,null)}}si(a,R,te,ae,Ee,ee,b,!1),Ni(a);return;case"select":qt("invalid",a),p=ee=R=null;for(b in h)if(h.hasOwnProperty(b)&&(te=h[b],te!=null))switch(b){case"value":R=te;break;case"defaultValue":ee=te;break;case"multiple":p=te;default:Rn(a,c,b,te,h,null)}c=R,h=ee,a.multiple=!!p,c!=null?cr(a,!!p,c,!1):h!=null&&cr(a,!!p,h,!0);return;case"textarea":qt("invalid",a),R=b=p=null;for(ee in h)if(h.hasOwnProperty(ee)&&(te=h[ee],te!=null))switch(ee){case"value":p=te;break;case"defaultValue":b=te;break;case"children":R=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(91));break;default:Rn(a,c,ee,te,h,null)}ri(a,p,b,R),Ni(a);return;case"option":for(ae in h)if(h.hasOwnProperty(ae)&&(p=h[ae],p!=null))switch(ae){case"selected":a.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Rn(a,c,ae,p,h,null)}return;case"dialog":qt("beforetoggle",a),qt("toggle",a),qt("cancel",a),qt("close",a);break;case"iframe":case"object":qt("load",a);break;case"video":case"audio":for(p=0;p<oa.length;p++)qt(oa[p],a);break;case"image":qt("error",a),qt("load",a);break;case"details":qt("toggle",a);break;case"embed":case"source":case"link":qt("error",a),qt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in h)if(h.hasOwnProperty(Ee)&&(p=h[Ee],p!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:Rn(a,c,Ee,p,h,null)}return;default:if(wo(c)){for(Ve in h)h.hasOwnProperty(Ve)&&(p=h[Ve],p!==void 0&&gu(a,c,Ve,p,h,void 0));return}}for(te in h)h.hasOwnProperty(te)&&(p=h[te],p!=null&&Rn(a,c,te,p,h,null))}function Bm(a,c,h,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,R=null,ee=null,te=null,ae=null,Ee=null,Ve=null;for(Ce in h){var Fe=h[Ce];if(h.hasOwnProperty(Ce)&&Fe!=null)switch(Ce){case"checked":break;case"value":break;case"defaultValue":ae=Fe;default:p.hasOwnProperty(Ce)||Rn(a,c,Ce,null,p,Fe)}}for(var Ae in p){var Ce=p[Ae];if(Fe=h[Ae],p.hasOwnProperty(Ae)&&(Ce!=null||Fe!=null))switch(Ae){case"type":R=Ce;break;case"name":b=Ce;break;case"checked":Ee=Ce;break;case"defaultChecked":Ve=Ce;break;case"value":ee=Ce;break;case"defaultValue":te=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(s(137,c));break;default:Ce!==Fe&&Rn(a,c,Ae,Ce,p,Fe)}}xs(a,ee,te,ae,Ee,Ve,R,b);return;case"select":Ce=ee=te=Ae=null;for(R in h)if(ae=h[R],h.hasOwnProperty(R)&&ae!=null)switch(R){case"value":break;case"multiple":Ce=ae;default:p.hasOwnProperty(R)||Rn(a,c,R,null,p,ae)}for(b in p)if(R=p[b],ae=h[b],p.hasOwnProperty(b)&&(R!=null||ae!=null))switch(b){case"value":Ae=R;break;case"defaultValue":te=R;break;case"multiple":ee=R;default:R!==ae&&Rn(a,c,b,R,p,ae)}c=te,h=ee,p=Ce,Ae!=null?cr(a,!!h,Ae,!1):!!p!=!!h&&(c!=null?cr(a,!!h,c,!0):cr(a,!!h,h?[]:"",!1));return;case"textarea":Ce=Ae=null;for(te in h)if(b=h[te],h.hasOwnProperty(te)&&b!=null&&!p.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:Rn(a,c,te,null,p,b)}for(ee in p)if(b=p[ee],R=h[ee],p.hasOwnProperty(ee)&&(b!=null||R!=null))switch(ee){case"value":Ae=b;break;case"defaultValue":Ce=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:b!==R&&Rn(a,c,ee,b,p,R)}En(a,Ae,Ce);return;case"option":for(var rt in h)if(Ae=h[rt],h.hasOwnProperty(rt)&&Ae!=null&&!p.hasOwnProperty(rt))switch(rt){case"selected":a.selected=!1;break;default:Rn(a,c,rt,null,p,Ae)}for(ae in p)if(Ae=p[ae],Ce=h[ae],p.hasOwnProperty(ae)&&Ae!==Ce&&(Ae!=null||Ce!=null))switch(ae){case"selected":a.selected=Ae&&typeof Ae!="function"&&typeof Ae!="symbol";break;default:Rn(a,c,ae,Ae,p,Ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in h)Ae=h[tt],h.hasOwnProperty(tt)&&Ae!=null&&!p.hasOwnProperty(tt)&&Rn(a,c,tt,null,p,Ae);for(Ee in p)if(Ae=p[Ee],Ce=h[Ee],p.hasOwnProperty(Ee)&&Ae!==Ce&&(Ae!=null||Ce!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(s(137,c));break;default:Rn(a,c,Ee,Ae,p,Ce)}return;default:if(wo(c)){for(var An in h)Ae=h[An],h.hasOwnProperty(An)&&Ae!==void 0&&!p.hasOwnProperty(An)&&gu(a,c,An,void 0,p,Ae);for(Ve in p)Ae=p[Ve],Ce=h[Ve],!p.hasOwnProperty(Ve)||Ae===Ce||Ae===void 0&&Ce===void 0||gu(a,c,Ve,Ae,p,Ce);return}}for(var pe in h)Ae=h[pe],h.hasOwnProperty(pe)&&Ae!=null&&!p.hasOwnProperty(pe)&&Rn(a,c,pe,null,p,Ae);for(Fe in p)Ae=p[Fe],Ce=h[Fe],!p.hasOwnProperty(Fe)||Ae===Ce||Ae==null&&Ce==null||Rn(a,c,Fe,Ae,p,Ce)}var xu=null,yu=null;function wl(a){return a.nodeType===9?a:a.ownerDocument}function vf(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bf(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function _u(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var vu=null;function Fm(){var a=window.event;return a&&a.type==="popstate"?a===vu?!1:(vu=a,!0):(vu=null,!1)}var Ef=typeof setTimeout=="function"?setTimeout:void 0,zm=typeof clearTimeout=="function"?clearTimeout:void 0,wf=typeof Promise=="function"?Promise:void 0,Um=typeof queueMicrotask=="function"?queueMicrotask:typeof wf<"u"?function(a){return wf.resolve(null).then(a).catch($m)}:Ef;function $m(a){setTimeout(function(){throw a})}function Yr(a){return a==="head"}function Rf(a,c){var h=c,p=0,b=0;do{var R=h.nextSibling;if(a.removeChild(h),R&&R.nodeType===8)if(h=R.data,h==="/$"){if(0<p&&8>p){h=p;var ee=a.ownerDocument;if(h&1&&la(ee.documentElement),h&2&&la(ee.body),h&4)for(h=ee.head,la(h),ee=h.firstChild;ee;){var te=ee.nextSibling,ae=ee.nodeName;ee[Ms]||ae==="SCRIPT"||ae==="STYLE"||ae==="LINK"&&ee.rel.toLowerCase()==="stylesheet"||h.removeChild(ee),ee=te}}if(b===0){a.removeChild(R),ga(c);return}b--}else h==="$"||h==="$?"||h==="$!"?b++:p=h.charCodeAt(0)-48;else p=0;h=R}while(h);ga(c)}function bu(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":bu(h),Pr(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function Hm(a,c,h,p){for(;a.nodeType===1;){var b=h;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[Ms])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(R=a.getAttribute("rel"),R==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(R!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(R=a.getAttribute("src"),(R!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&R&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var R=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===R)return a}else return a;if(a=Us(a.nextSibling),a===null)break}return null}function qm(a,c,h){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=Us(a.nextSibling),a===null))return null;return a}function Eu(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Gm(a,c){var h=a.ownerDocument;if(a.data!=="$?"||h.readyState==="complete")c();else{var p=function(){c(),h.removeEventListener("DOMContentLoaded",p)};h.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function Us(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var wu=null;function Af(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return a;c--}else h==="/$"&&c++}a=a.previousSibling}return null}function Tf(a,c,h){switch(c=wl(h),a){case"html":if(a=c.documentElement,!a)throw Error(s(452));return a;case"head":if(a=c.head,!a)throw Error(s(453));return a;case"body":if(a=c.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function la(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);Pr(a)}var Os=new Map,Sf=new Set;function Rl(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Cr=ce.d;ce.d={f:Wm,r:Ym,D:Km,C:Xm,L:Qm,m:Jm,X:ep,S:Zm,M:tp};function Wm(){var a=Cr.f(),c=pl();return a||c}function Ym(a){var c=Hs(a);c!==null&&c.tag===5&&c.type==="form"?qd(c):Cr.r(a)}var po=typeof document>"u"?null:document;function Cf(a,c,h){var p=po;if(p&&typeof c=="string"&&c){var b=Hn(c);b='link[rel="'+a+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),Sf.has(b)||(Sf.add(b),a={rel:a,crossOrigin:h,href:c},p.querySelector(b)===null&&(c=p.createElement("link"),as(c,"link",a),zn(c),p.head.appendChild(c)))}}function Km(a){Cr.D(a),Cf("dns-prefetch",a,null)}function Xm(a,c){Cr.C(a,c),Cf("preconnect",a,c)}function Qm(a,c,h){Cr.L(a,c,h);var p=po;if(p&&a&&c){var b='link[rel="preload"][as="'+Hn(c)+'"]';c==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+Hn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+Hn(h.imageSizes)+'"]')):b+='[href="'+Hn(a)+'"]';var R=b;switch(c){case"style":R=go(a);break;case"script":R=xo(a)}Os.has(R)||(a=m({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:a,as:c},h),Os.set(R,a),p.querySelector(b)!==null||c==="style"&&p.querySelector(ca(R))||c==="script"&&p.querySelector(ua(R))||(c=p.createElement("link"),as(c,"link",a),zn(c),p.head.appendChild(c)))}}function Jm(a,c){Cr.m(a,c);var h=po;if(h&&a){var p=c&&typeof c.as=="string"?c.as:"script",b='link[rel="modulepreload"][as="'+Hn(p)+'"][href="'+Hn(a)+'"]',R=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=xo(a)}if(!Os.has(R)&&(a=m({rel:"modulepreload",href:a},c),Os.set(R,a),h.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(ua(R)))return}p=h.createElement("link"),as(p,"link",a),zn(p),h.head.appendChild(p)}}}function Zm(a,c,h){Cr.S(a,c,h);var p=po;if(p&&a){var b=cs(p).hoistableStyles,R=go(a);c=c||"default";var ee=b.get(R);if(!ee){var te={loading:0,preload:null};if(ee=p.querySelector(ca(R)))te.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":c},h),(h=Os.get(R))&&Ru(a,h);var ae=ee=p.createElement("link");zn(ae),as(ae,"link",a),ae._p=new Promise(function(Ee,Ve){ae.onload=Ee,ae.onerror=Ve}),ae.addEventListener("load",function(){te.loading|=1}),ae.addEventListener("error",function(){te.loading|=2}),te.loading|=4,Al(ee,c,p)}ee={type:"stylesheet",instance:ee,count:1,state:te},b.set(R,ee)}}}function ep(a,c){Cr.X(a,c);var h=po;if(h&&a){var p=cs(h).hoistableScripts,b=xo(a),R=p.get(b);R||(R=h.querySelector(ua(b)),R||(a=m({src:a,async:!0},c),(c=Os.get(b))&&Au(a,c),R=h.createElement("script"),zn(R),as(R,"link",a),h.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},p.set(b,R))}}function tp(a,c){Cr.M(a,c);var h=po;if(h&&a){var p=cs(h).hoistableScripts,b=xo(a),R=p.get(b);R||(R=h.querySelector(ua(b)),R||(a=m({src:a,async:!0,type:"module"},c),(c=Os.get(b))&&Au(a,c),R=h.createElement("script"),zn(R),as(R,"link",a),h.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},p.set(b,R))}}function Pf(a,c,h,p){var b=(b=je.current)?Rl(b):null;if(!b)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=go(h.href),h=cs(b).hoistableStyles,p=h.get(c),p||(p={type:"style",instance:null,count:0,state:null},h.set(c,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=go(h.href);var R=cs(b).hoistableStyles,ee=R.get(a);if(ee||(b=b.ownerDocument||b,ee={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(a,ee),(R=b.querySelector(ca(a)))&&!R._p&&(ee.instance=R,ee.state.loading=5),Os.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Os.set(a,h),R||np(b,a,h,ee.state))),c&&p===null)throw Error(s(528,""));return ee}if(c&&p!==null)throw Error(s(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=xo(h),h=cs(b).hoistableScripts,p=h.get(c),p||(p={type:"script",instance:null,count:0,state:null},h.set(c,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function go(a){return'href="'+Hn(a)+'"'}function ca(a){return'link[rel="stylesheet"]['+a+"]"}function If(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function np(a,c,h,p){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?p.loading=1:(c=a.createElement("link"),p.preload=c,c.addEventListener("load",function(){return p.loading|=1}),c.addEventListener("error",function(){return p.loading|=2}),as(c,"link",h),zn(c),a.head.appendChild(c))}function xo(a){return'[src="'+Hn(a)+'"]'}function ua(a){return"script[async]"+a}function jf(a,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var p=a.querySelector('style[data-href~="'+Hn(h.href)+'"]');if(p)return c.instance=p,zn(p),p;var b=m({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),zn(p),as(p,"style",b),Al(p,h.precedence,a),c.instance=p;case"stylesheet":b=go(h.href);var R=a.querySelector(ca(b));if(R)return c.state.loading|=4,c.instance=R,zn(R),R;p=If(h),(b=Os.get(b))&&Ru(p,b),R=(a.ownerDocument||a).createElement("link"),zn(R);var ee=R;return ee._p=new Promise(function(te,ae){ee.onload=te,ee.onerror=ae}),as(R,"link",p),c.state.loading|=4,Al(R,h.precedence,a),c.instance=R;case"script":return R=xo(h.src),(b=a.querySelector(ua(R)))?(c.instance=b,zn(b),b):(p=h,(b=Os.get(R))&&(p=m({},h),Au(p,b)),a=a.ownerDocument||a,b=a.createElement("script"),zn(b),as(b,"link",p),a.head.appendChild(b),c.instance=b);case"void":return null;default:throw Error(s(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(p=c.instance,c.state.loading|=4,Al(p,h.precedence,a));return c.instance}function Al(a,c,h){for(var p=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,R=b,ee=0;ee<p.length;ee++){var te=p[ee];if(te.dataset.precedence===c)R=te;else if(R!==b)break}R?R.parentNode.insertBefore(a,R.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(a,c.firstChild))}function Ru(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function Au(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var Tl=null;function Nf(a,c,h){if(Tl===null){var p=new Map,b=Tl=new Map;b.set(h,p)}else b=Tl,p=b.get(h),p||(p=new Map,b.set(h,p));if(p.has(a))return p;for(p.set(a,null),h=h.getElementsByTagName(a),b=0;b<h.length;b++){var R=h[b];if(!(R[Ms]||R[Dt]||a==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var ee=R.getAttribute(c)||"";ee=a+ee;var te=p.get(ee);te?te.push(R):p.set(ee,[R])}}return p}function Df(a,c,h){a=a.ownerDocument||a,a.head.insertBefore(h,c==="title"?a.querySelector("head > title"):null)}function sp(a,c,h){if(h===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function kf(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var da=null;function rp(){}function ip(a,c,h){if(da===null)throw Error(s(475));var p=da;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=go(h.href),R=a.querySelector(ca(b));if(R){a=R._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(p.count++,p=Sl.bind(p),a.then(p,p)),c.state.loading|=4,c.instance=R,zn(R);return}R=a.ownerDocument||a,h=If(h),(b=Os.get(b))&&Ru(h,b),R=R.createElement("link"),zn(R);var ee=R;ee._p=new Promise(function(te,ae){ee.onload=te,ee.onerror=ae}),as(R,"link",h),c.instance=R}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(p.count++,c=Sl.bind(p),a.addEventListener("load",c),a.addEventListener("error",c))}}function op(){if(da===null)throw Error(s(475));var a=da;return a.stylesheets&&a.count===0&&Tu(a,a.stylesheets),0<a.count?function(c){var h=setTimeout(function(){if(a.stylesheets&&Tu(a,a.stylesheets),a.unsuspend){var p=a.unsuspend;a.unsuspend=null,p()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(h)}}:null}function Sl(){if(this.count--,this.count===0){if(this.stylesheets)Tu(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Cl=null;function Tu(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Cl=new Map,c.forEach(ap,a),Cl=null,Sl.call(a))}function ap(a,c){if(!(c.state.loading&4)){var h=Cl.get(a);if(h)var p=h.get(null);else{h=new Map,Cl.set(a,h);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<b.length;R++){var ee=b[R];(ee.nodeName==="LINK"||ee.getAttribute("media")!=="not all")&&(h.set(ee.dataset.precedence,ee),p=ee)}p&&h.set(null,p)}b=c.instance,ee=b.getAttribute("data-precedence"),R=h.get(ee)||p,R===p&&h.set(null,b),h.set(ee,b),this.count++,p=Sl.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),R?R.parentNode.insertBefore(b,R.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),c.state.loading|=4}}var ha={$$typeof:V,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function lp(a,c,h,p,b,R,ee,te){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pn(0),this.hiddenUpdates=Pn(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=R,this.onRecoverableError=ee,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=te,this.incompleteTransitions=new Map}function Of(a,c,h,p,b,R,ee,te,ae,Ee,Ve,Fe){return a=new lp(a,c,h,ee,te,ae,Ee,Fe),c=1,R===!0&&(c|=24),R=_s(3,null,null,c),a.current=R,R.stateNode=a,c=ac(),c.refCount++,a.pooledCache=c,c.refCount++,R.memoizedState={element:p,isDehydrated:h,cache:c},dc(R),a}function Vf(a){return a?(a=Gi,a):Gi}function Mf(a,c,h,p,b,R){b=Vf(b),p.context===null?p.context=b:p.pendingContext=b,p=Or(c),p.payload={element:h},R=R===void 0?null:R,R!==null&&(p.callback=R),h=Vr(a,p,c),h!==null&&(Rs(h,a,c),Uo(h,a,c))}function Lf(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function Su(a,c){Lf(a,c),(a=a.alternate)&&Lf(a,c)}function Bf(a){if(a.tag===13){var c=qi(a,67108864);c!==null&&Rs(c,a,67108864),Su(a,67108864)}}var Pl=!0;function cp(a,c,h,p){var b=oe.T;oe.T=null;var R=ce.p;try{ce.p=2,Cu(a,c,h,p)}finally{ce.p=R,oe.T=b}}function dp(a,c,h,p){var b=oe.T;oe.T=null;var R=ce.p;try{ce.p=8,Cu(a,c,h,p)}finally{ce.p=R,oe.T=b}}function Cu(a,c,h,p){if(Pl){var b=Pu(p);if(b===null)pu(a,c,p,Il,h),zf(a,p);else if(fp(b,a,c,h,p))p.stopPropagation();else if(zf(a,p),c&4&&-1<hp.indexOf(a)){for(;b!==null;){var R=Hs(b);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var ee=Nt(R.pendingLanes);if(ee!==0){var te=R;for(te.pendingLanes|=2,te.entangledLanes|=2;ee;){var ae=1<<31-et(ee);te.entanglements[1]|=ae,ee&=~ae}rr(R),(vn&6)===0&&(fl=ze()+500,ia(0))}}break;case 13:te=qi(R,2),te!==null&&Rs(te,R,2),pl(),Su(R,2)}if(R=Pu(p),R===null&&pu(a,c,p,Il,h),R===b)break;b=R}b!==null&&p.stopPropagation()}else pu(a,c,p,null,h)}}function Pu(a){return a=Ts(a),Iu(a)}var Il=null;function Iu(a){if(Il=null,a=or(a),a!==null){var c=o(a);if(c===null)a=null;else{var h=c.tag;if(h===13){if(a=l(c),a!==null)return a;a=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Il=a,null}function Ff(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($e()){case vt:return 2;case ve:return 8;case xe:case Ue:return 32;case Oe:return 268435456;default:return 32}default:return 32}}var ju=!1,Kr=null,Xr=null,Qr=null,fa=new Map,ma=new Map,Jr=[],hp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zf(a,c){switch(a){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":fa.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(c.pointerId)}}function pa(a,c,h,p,b,R){return a===null||a.nativeEvent!==R?(a={blockedOn:c,domEventName:h,eventSystemFlags:p,nativeEvent:R,targetContainers:[b]},c!==null&&(c=Hs(c),c!==null&&Bf(c)),a):(a.eventSystemFlags|=p,c=a.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),a)}function fp(a,c,h,p,b){switch(c){case"focusin":return Kr=pa(Kr,a,c,h,p,b),!0;case"dragenter":return Xr=pa(Xr,a,c,h,p,b),!0;case"mouseover":return Qr=pa(Qr,a,c,h,p,b),!0;case"pointerover":var R=b.pointerId;return fa.set(R,pa(fa.get(R)||null,a,c,h,p,b)),!0;case"gotpointercapture":return R=b.pointerId,ma.set(R,pa(ma.get(R)||null,a,c,h,p,b)),!0}return!1}function Uf(a){var c=or(a.target);if(c!==null){var h=o(c);if(h!==null){if(c=h.tag,c===13){if(c=l(h),c!==null){a.blockedOn=c,gs(a.priority,function(){if(h.tag===13){var p=ws();p=Tn(p);var b=qi(h,p);b!==null&&Rs(b,h,p),Su(h,p)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function jl(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var h=Pu(a.nativeEvent);if(h===null){h=a.nativeEvent;var p=new h.constructor(h.type,h);ur=p,h.target.dispatchEvent(p),ur=null}else return c=Hs(h),c!==null&&Bf(c),a.blockedOn=h,!1;c.shift()}return!0}function $f(a,c,h){jl(a)&&h.delete(c)}function mp(){ju=!1,Kr!==null&&jl(Kr)&&(Kr=null),Xr!==null&&jl(Xr)&&(Xr=null),Qr!==null&&jl(Qr)&&(Qr=null),fa.forEach($f),ma.forEach($f)}function Nl(a,c){a.blockedOn===c&&(a.blockedOn=null,ju||(ju=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,mp)))}var Dl=null;function Hf(a){Dl!==a&&(Dl=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Dl===a&&(Dl=null);for(var c=0;c<a.length;c+=3){var h=a[c],p=a[c+1],b=a[c+2];if(typeof p!="function"){if(Iu(p||h)===null)continue;break}var R=Hs(h);R!==null&&(a.splice(c,3),c-=3,Ic(R,{pending:!0,data:b,method:h.method,action:p},p,b))}}))}function ga(a){function c(ae){return Nl(ae,a)}Kr!==null&&Nl(Kr,a),Xr!==null&&Nl(Xr,a),Qr!==null&&Nl(Qr,a),fa.forEach(c),ma.forEach(c);for(var h=0;h<Jr.length;h++){var p=Jr[h];p.blockedOn===a&&(p.blockedOn=null)}for(;0<Jr.length&&(h=Jr[0],h.blockedOn===null);)Uf(h),h.blockedOn===null&&Jr.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(p=0;p<h.length;p+=3){var b=h[p],R=h[p+1],ee=b[pn]||null;if(typeof R=="function")ee||Hf(h);else if(ee){var te=null;if(R&&R.hasAttribute("formAction")){if(b=R,ee=R[pn]||null)te=ee.formAction;else if(Iu(b)!==null)continue}else te=ee.action;typeof te=="function"?h[p+1]=te:(h.splice(p,3),p-=3),Hf(h)}}}function Nu(a){this._internalRoot=a}kl.prototype.render=Nu.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(s(409));var h=c.current,p=ws();Mf(h,p,a,c,null,null)},kl.prototype.unmount=Nu.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Mf(a.current,2,null,a,null,null),pl(),c[Sn]=null}};function kl(a){this._internalRoot=a}kl.prototype.unstable_scheduleHydration=function(a){if(a){var c=Mn();a={blockedOn:null,target:a,priority:c};for(var h=0;h<Jr.length&&c!==0&&c<Jr[h].priority;h++);Jr.splice(h,0,a),h===0&&Uf(a)}};var qf=e.version;if(qf!=="19.1.0")throw Error(s(527,qf,"19.1.0"));ce.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=d(c),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var pp={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:oe,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{He=Ol.inject(pp),qe=Ol}catch{}}return reactDomClient_production.createRoot=function(a,c){if(!i(a))throw Error(s(299));var h=!1,p="",b=ih,R=oh,ee=ah,te=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(R=c.onCaughtError),c.onRecoverableError!==void 0&&(ee=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(te=c.unstable_transitionCallbacks)),c=Of(a,1,!1,null,null,h,p,b,R,ee,te,null),a[Sn]=c.current,mu(a),new Nu(c)},reactDomClient_production.hydrateRoot=function(a,c,h){if(!i(a))throw Error(s(299));var p=!1,b="",R=ih,ee=oh,te=ah,ae=null,Ee=null;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(R=h.onUncaughtError),h.onCaughtError!==void 0&&(ee=h.onCaughtError),h.onRecoverableError!==void 0&&(te=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(ae=h.unstable_transitionCallbacks),h.formState!==void 0&&(Ee=h.formState)),c=Of(a,1,!0,c,h??null,p,b,R,ee,te,ae,Ee),c.context=Vf(null),h=c.current,p=ws(),p=Tn(p),b=Or(p),b.callback=null,Vr(h,b,p),h=p,c.current.lanes=h,Wt(c,h),rr(c),a[Sn]=c.current,mu(a),new kl(c)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},byteArrayToString=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[s++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],l=t[n++],u=t[n++],d=((i&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const o=t[i],l=i+1<t.length,u=l?t[i+1]:0,d=i+2<t.length,f=d?t[i+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let y=(u&15)<<2|f>>6,v=f&63;d||(v=64,l||(y=64)),s.push(n[m],n[g],n[y],n[v])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(stringToByteArray$1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):byteArrayToString(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||f==null||g==null)throw new DecodeBase64StringError;const y=o<<2|u>>4;if(s.push(y),f!==64){const v=u<<4&240|f>>2;if(s.push(v),g!==64){const E=f<<6&192|g;s.push(E)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(t){const e=stringToByteArray$1(t);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(t){return base64Encode(t).replace(/\./g,"")},base64Decode=function(t){try{return base64.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const t=define_process_env_default.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&base64Decode(t[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},getDefaultEmulatorHost=t=>{var e,n;return(n=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},getDefaultEmulatorHostnameAndPort=t=>{const e=getDefaultEmulatorHost(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},getDefaultAppConfig=()=>{var t;return(t=getDefaults())===null||t===void 0?void 0:t.config},getExperimentalSetting=t=>{var e;return(e=getDefaults())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(t){return t.endsWith(".cloudworkstations.dev")}async function pingServer(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[base64urlEncodeWithoutPadding(JSON.stringify(n)),base64urlEncodeWithoutPadding(JSON.stringify(l)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const t={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?t.emulator.push(e):t.prod.push(e);return t}function getOrCreateEl(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(t,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[t]===e||emulatorStatus[t]||previouslyDismissed)return;emulatorStatus[t]=e;function n(y){return`__firebase__banner__${y}`}const s="__firebase__banner",o=getEmulatorSummary().prod.length>0;function l(){const y=document.getElementById(s);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function d(y,v){y.setAttribute("width","24"),y.setAttribute("id",v),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function f(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{previouslyDismissed=!0,l()},y}function m(y,v){y.setAttribute("id",v),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function g(){const y=getOrCreateEl(s),v=n("text"),E=document.getElementById(v)||document.createElement("span"),w=n("learnmore"),A=document.getElementById(w)||document.createElement("a"),I=n("preprendIcon"),D=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const V=y.element;u(V),m(A,w);const Y=f();d(D,I),V.append(D,E,A,Y),document.body.appendChild(V)}o?(E.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode$2(){var t;const e=(t=getDefaults())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const t=getUA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function isSafari(){return!isNode$2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?replaceTemplate(o,s):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new FirebaseError(i,u,s)}}function replaceTemplate(t,e){return t.replace(PATTERN,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function deepEqual$1(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const o=t[i],l=e[i];if(isObject$2(o)&&isObject$2(l)){if(!deepEqual$1(o,l))return!1}else if(o!==l)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function isObject$2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function querystringDecode(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,o]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function extractQuerystring(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function createSubscribe(t,e){const n=new ObserverProxy(t,e);return n.subscribe.bind(n)}class ObserverProxy{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=noop$3),i.error===void 0&&(i.error=noop$3),i.complete===void 0&&(i.complete=noop$3);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function noop$3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(t){return t&&t._delegate?t._delegate:t}class Component{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Deferred;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});s.resolve(o)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);s===u&&l.resolve(i)}return i}onInit(e,n){var s;const i=this.normalizeInstanceIdentifier(n),o=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(t){return t===DEFAULT_ENTRY_NAME$1?void 0:t}function isComponentEager(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Provider(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=ConsoleMethod[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(t,e)=>e.some(n=>t instanceof n);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(wrap(t.result)),i()},l=()=>{s(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&cursorRequestMap.set(n,t)}).catch(()=>{}),reverseTransformCache.set(e,t),e}function cacheDonePromiseForTransaction(t){if(transactionDoneMap.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});transactionDoneMap.set(t,e)}let idbProxyTraps={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||transactionStoreNamesMap.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wrap(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps(t){idbProxyTraps=t(idbProxyTraps)}function wrapFunction(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(unwrap(this),e,...n);return transactionStoreNamesMap.set(s,e.sort?e.sort():[e]),wrap(s)}:getCursorAdvanceMethods().includes(t)?function(...e){return t.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(t.apply(unwrap(this),e))}}function transformCachableValue(t){return typeof t=="function"?wrapFunction(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction(t),instanceOfAny(t,getIdbProxyableTypes())?new Proxy(t,idbProxyTraps):t)}function wrap(t){if(t instanceof IDBRequest)return promisifyRequest(t);if(transformCache.has(t))return transformCache.get(t);const e=transformCachableValue(t);return e!==t&&(transformCache.set(t,e),reverseTransformCache.set(e,t)),e}const unwrap=t=>reverseTransformCache.get(t);function openDB(t,e,{blocked:n,upgrade:s,blocking:i,terminated:o}={}){const l=indexedDB.open(t,e),u=wrap(l);return s&&l.addEventListener("upgradeneeded",d=>{s(wrap(l.result),d.oldVersion,d.newVersion,wrap(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=writeMethods.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||readMethods.includes(n)))return;const o=async function(l,...u){const d=this.transaction(l,i?"readwrite":"readonly");let f=d.store;return s&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&d.done]))[0]};return cachedMethods.set(e,o),o}replaceTraps(t=>({...t,get:(e,n,s)=>getMethod(e,n)||t.get(e,n,s),has:(e,n)=>!!getMethod(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(isVersionServiceProvider(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function isVersionServiceProvider(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const name$q="@firebase/app",version$1$1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$4="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(t,e){try{t.container.addComponent(e)}catch(n){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _registerComponent(t){const e=t.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,t);for(const n of _apps.values())_addComponent(n,t);for(const n of _serverApps.values())_addComponent(n,t);return!0}function _getProvider(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _isFirebaseServerApp(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$4;function initializeApp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0},e),i=s.name;if(typeof i!="string"||!i)throw ERROR_FACTORY.create("bad-app-name",{appName:String(i)});if(n||(n=getDefaultAppConfig()),!n)throw ERROR_FACTORY.create("no-options");const o=_apps.get(i);if(o){if(deepEqual$1(n,o.options)&&deepEqual$1(s,o.config))return o;throw ERROR_FACTORY.create("duplicate-app",{appName:i})}const l=new ComponentContainer(i);for(const d of _components.values())l.addComponent(d);const u=new FirebaseAppImpl(n,s,l);return _apps.set(i,u),u}function getApp(t=DEFAULT_ENTRY_NAME){const e=_apps.get(t);if(!e&&t===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:t});return e}function registerVersion(t,e,n){var s;let i=(s=PLATFORM_LOG_STRING[t])!==null&&s!==void 0?s:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(u.join(" "));return}_registerComponent(new Component(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(STORE_NAME)}catch(n){console.warn(n)}}}}).catch(t=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:t.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(t){try{const n=(await getDbPromise()).transaction(STORE_NAME),s=await n.objectStore(STORE_NAME).get(computeKey(t));return await n.done,s}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const n=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});logger.warn(n.message)}}}async function writeHeartbeatsToIndexedDB(t,e){try{const s=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await s.objectStore(STORE_NAME).put(e,computeKey(t)),await s.done}catch(n){if(n instanceof FirebaseError)logger.warn(n.message);else{const s=ERROR_FACTORY.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});logger.warn(s.message)}}}function computeKey(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=getUTCDateString();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const l=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){logger.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=getUTCDateString(),{heartbeatsToSend:s,unsentEntries:i}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),o=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return logger.warn(n),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(t,e=MAX_HEADER_BYTES){const n=[];let s=t.slice();for(const i of t){const o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),countBytes(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),countBytes(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await readHeartbeatsFromIndexedDB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function countBytes(t){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}function getEarliestHeartbeatIdx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(t){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,t),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var __assign=function(){return __assign=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},__assign.apply(this,arguments)};function __rest(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function __spreadArray(t,e,n){if(n||arguments.length===2)for(var s=0,i=e.length,o;s<i;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return t.concat(o||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(t,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${t}`,...e)}function _logError(t,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(t,...e){throw createErrorInternal(t,...e)}function _createError(t,...e){return createErrorInternal(t,...e)}function _errorWithCustomMessage(t,e,n){const s=Object.assign(Object.assign({},prodErrorMap()),{[e]:n});return new ErrorFactory("auth","Firebase",s).create(e,{appName:t.name})}function _serverAppCurrentUserOperationNotSupportedError(t){return _errorWithCustomMessage(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return _DEFAULT_AUTH_ERROR_FACTORY.create(t,...e)}function _assert(t,e,...n){if(!t)throw createErrorInternal(e,...n)}function debugFail(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _logError(e),new Error(e)}function debugAssert(t,e){t||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,n){this.shortDelay=e,this.longDelay=n,debugAssert(n>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(t,e){debugAssert(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _performApiRequest(t,e,n,s,i={}){return _performFetchWithErrorHandling(t,i,async()=>{let o={},l={};s&&(e==="GET"?l=s:o={body:JSON.stringify(s)});const u=querystring(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return isCloudflareWorker()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(f.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(t,t.config.apiHost,n,u),f)})}async function _performFetchWithErrorHandling(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},SERVER_ERROR_MAP),e);try{const i=new NetworkTimeout(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw _makeTaggedError(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw _makeTaggedError(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw _makeTaggedError(t,"user-disabled",l);const m=s[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw _errorWithCustomMessage(t,m,f);_fail(t,m)}}catch(i){if(i instanceof FirebaseError)throw i;_fail(t,"network-request-failed",{message:String(i)})}}async function _performSignInRequest(t,e,n,s,i={}){const o=await _performApiRequest(t,e,n,s,i);return"mfaPendingCredential"in o&&_fail(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function _getFinalTarget(t,e,n,s){const i=`${e}${n}?${s}`,o=t,l=o.config.emulator?_emulatorUrl(t.config,i):`${t.config.apiScheme}://${i}`;return CookieAuthProxiedEndpoints.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function _parseEnforcementState(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=_createError(t,e,s);return i.customData._tokenResponse=n,i}function isEnterprise(t){return t!==void 0&&t.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _parseEnforcementState(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(t,e){return _performApiRequest(t,"GET","/v2/recaptchaConfig",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(t,e){return _performApiRequest(t,"POST","/v1/accounts:delete",e)}async function getAccountInfo(t,e){return _performApiRequest(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(t,e=!1){const n=getModularInstance(t),s=await n.getIdToken(e),i=_parseToken(s);_assert(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:s,authTime:utcTimestampToDateString(secondsStringToMilliseconds(i.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(i.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function secondsStringToMilliseconds(t){return Number(t)*1e3}function _parseToken(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const i=base64Decode(n);return i?JSON.parse(i):(_logError("Failed to decode base64 JWT payload"),null)}catch(i){return _logError("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function _tokenExpiresIn(t){const e=_parseToken(t);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof FirebaseError&&isUserInvalidated(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function isUserInvalidated({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(t){var e;const n=t.auth,s=await t.getIdToken(),i=await _logoutIfInvalidated(t,getAccountInfo(n,{idToken:s}));_assert(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?extractProviderData(o.providerUserInfo):[],u=mergeProviderData(t.providerData,l),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),m=d?f:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new UserMetadata(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function reload(t){const e=getModularInstance(t);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function extractProviderData(t){return t.map(e=>{var{providerId:n}=e,s=__rest(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(t,e){const n=await _performFetchWithErrorHandling(t,{},async()=>{const s=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,l=await _getFinalTarget(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:s};return t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(d.credentials="include"),FetchProvider.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function revokeToken(t,e){return _performApiRequest(t,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const n=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:o}=await requestStsToken(e,n);this.updateTokensAndExpiration(s,i,Number(o))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:o}=n,l=new StsTokenManager;return s&&(_assert(typeof s=="string","internal-error",{appName:e}),l.refreshToken=s),i&&(_assert(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(_assert(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(t,e){_assert(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class UserImpl{constructor(e){var{uid:n,auth:s,stsTokenManager:i}=e,o=__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new UserMetadata(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,i,o,l,u,d,f,m;const g=(s=n.displayName)!==null&&s!==void 0?s:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,v=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,E=(l=n.photoURL)!==null&&l!==void 0?l:void 0,w=(u=n.tenantId)!==null&&u!==void 0?u:void 0,A=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,I=(f=n.createdAt)!==null&&f!==void 0?f:void 0,D=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:V,emailVerified:Y,isAnonymous:j,providerData:H,stsTokenManager:S}=n;_assert(V&&S,e,"internal-error");const T=StsTokenManager.fromJSON(this.name,S);_assert(typeof V=="string",e,"internal-error"),assertStringOrUndefined(g,e.name),assertStringOrUndefined(y,e.name),_assert(typeof Y=="boolean",e,"internal-error"),_assert(typeof j=="boolean",e,"internal-error"),assertStringOrUndefined(v,e.name),assertStringOrUndefined(E,e.name),assertStringOrUndefined(w,e.name),assertStringOrUndefined(A,e.name),assertStringOrUndefined(I,e.name),assertStringOrUndefined(D,e.name);const P=new UserImpl({uid:V,auth:e,email:y,emailVerified:Y,displayName:g,isAnonymous:j,photoURL:E,phoneNumber:v,tenantId:w,stsTokenManager:T,createdAt:I,lastLoginAt:D});return H&&Array.isArray(H)&&(P.providerData=H.map(U=>Object.assign({},U))),A&&(P._redirectEventId=A),P}static async _fromIdTokenResponse(e,n,s=!1){const i=new StsTokenManager;i.updateFromServerResponse(n);const o=new UserImpl({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await _reloadWithoutSaving(o),o}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];_assert(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?extractProviderData(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new StsTokenManager;u.updateFromIdToken(s);const d=new UserImpl({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new UserMetadata(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(t){debugAssert(t instanceof Function,"Expected a class definition");let e=instanceCache.get(t);return e?(debugAssert(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,instanceCache.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(t,e,n){return`firebase:${t}:${e}:${n}`}class PersistenceUserManager{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:o}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,i.apiKey,o),this.fullPersistenceKey=_persistenceKeyName("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return n?UserImpl._fromGetAccountInfoResponse(this.auth,n,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,s);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||_getInstance(inMemoryPersistence);const l=_persistenceKeyName(s,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(l);if(m){let g;if(typeof m=="string"){const y=await getAccountInfo(e,{idToken:m}).catch(()=>{});if(!y)break;g=await UserImpl._fromGetAccountInfoResponse(e,y,m)}else g=UserImpl._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const d=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new PersistenceUserManager(o,e,s):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new PersistenceUserManager(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function _isFirefox(t=getUA()){return/firefox\//i.test(t)}function _isSafari(t=getUA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(t=getUA()){return/crios\//i.test(t)}function _isIEMobile(t=getUA()){return/iemobile/i.test(t)}function _isAndroid(t=getUA()){return/android/i.test(t)}function _isBlackBerry(t=getUA()){return/blackberry/i.test(t)}function _isWebOS(t=getUA()){return/webos/i.test(t)}function _isIOS(t=getUA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _isIOSStandalone(t=getUA()){var e;return _isIOS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(t=getUA()){return _isIOS(t)||_isAndroid(t)||_isWebOS(t)||_isBlackBerry(t)||/windows phone/i.test(t)||_isIEMobile(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(t,e=[]){let n;switch(t){case"Browser":n=_getBrowserName(getUA());break;case"Worker":n=`${_getBrowserName(getUA())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${SDK_VERSION}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(t,e={}){return _performApiRequest(t,"GET","/v2/passwordPolicy",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){var n,s,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:MINIMUM_MIN_PASSWORD_LENGTH,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,i,o,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(s=d.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_getInstance(n)),this._initializationPromise=this.queue(async()=>{var s,i,o;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await getAccountInfo(this,{idToken:e}),s=await UserImpl._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_isFirebaseServerApp(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&(d!=null&&d.user)&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const n=e?getModularInstance(e):null;return n&&_assert(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),n=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await revokeToken(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_getInstance(e)||this._popupRedirectResolver;_assert(n,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,s,i);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_logWarn(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _castAuth(t){return getModularInstance(t)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(n=>this.observer=n)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(t){externalJSProvider=t}function _loadJS(t){return externalJSProvider.loadJS(t)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MockGreCAPTCHA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",n=!1){async function s(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{getRecaptchaConfig(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new RecaptchaConfig(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function i(o,l,u){const d=window.grecaptcha;isEnterprise(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(FAKE_TOKEN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{s(this.auth).then(u=>{if(!n&&isEnterprise(window.grecaptcha))i(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=_recaptchaEnterpriseScriptUrl();d.length!==0&&(d+=u),_loadJS(d).then(()=>{i(u,o,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function injectRecaptchaFields(t,e,n,s=!1,i=!1){const o=new RecaptchaEnterpriseVerifier(t);let l;if(i)l=FAKE_TOKEN;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return s?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function handleRecaptchaFlow(t,e,n,s,i){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await injectRecaptchaFields(t,e,n,n==="getOobCode");return s(t,l)}else return s(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await injectRecaptchaFields(t,e,n,n==="getOobCode");return s(t,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(t,e){const n=_getProvider(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(deepEqual$1(o,e??{}))return i;_fail(i,"already-initialized")}return n.initialize({options:e})}function _initializeAuthInstance(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(_getInstance);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function connectAuthEmulator(t,e,n){const s=_castAuth(t);_assert(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,o=extractProtocol(e),{host:l,port:u}=extractHostAndPort(e),d=u===null?"":`:${u}`,f={url:`${o}//${l}${d}/`},m=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){_assert(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_assert(deepEqual$1(f,s.config.emulator)&&deepEqual$1(m,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=f,s.emulatorConfig=m,s.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(l)?(pingServer(`${o}//${l}${d}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function extractHostAndPort(t){const e=extractProtocol(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const o=i[1];return{host:o,port:parsePort(s.substr(o.length+1))}}else{const[o,l]=s.split(":");return{host:o,port:parsePort(l)}}}function parsePort(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function emitEmulatorWarning(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,n){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function linkEmailPassword(t,e){return _performApiRequest(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}async function signInWithEmailLinkForLinking(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new EmailAuthCredential(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new EmailAuthCredential(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,n,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,s,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:n,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_fail("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=n,o=__rest(n,["providerId","signInMethod"]);if(!s||!i)return null;const l=new OAuthCredential(s,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return signInWithIdp(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,signInWithIdp(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,signInWithIdp(e,n)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=querystring(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(t){const e=querystringDecode(extractQuerystring(t)).link,n=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,s=querystringDecode(extractQuerystring(t)).deep_link_id;return(s?querystringDecode(extractQuerystring(s)).link:null)||s||n||e||t}class ActionCodeURL{constructor(e){var n,s,i,o,l,u;const d=querystringDecode(extractQuerystring(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,m=(s=d.oobCode)!==null&&s!==void 0?s:null,g=parseMode((i=d.mode)!==null&&i!==void 0?i:null);_assert(f&&m&&g,"argument-error"),this.apiKey=f,this.operation=g,this.code=m,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=parseDeepLink(e);try{return new ActionCodeURL(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,n){return EmailAuthCredential._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=ActionCodeURL.parseLink(n);return _assert(s,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,s.code,s.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return GoogleAuthProvider.credential(n,s)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,n){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return TwitterAuthProvider.credential(n,s)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signUp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const o=await UserImpl._fromIdTokenResponse(e,s,i),l=providerIdForResponse(s);return new UserCredentialImpl({user:o,providerId:l,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=providerIdForResponse(s);return new UserCredentialImpl({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function providerIdForResponse(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,n,s,i){var o;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new MultiFactorError(e,n,s,i)}}function _processCredentialSavingMfaContextIfNecessary(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(t,o,e,s):o})}async function _link$1(t,e,n=!1){const s=await _logoutIfInvalidated(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return UserCredentialImpl._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(t,e,n=!1){const{auth:s}=t;if(_isFirebaseServerApp(s.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(s));const i="reauthenticate";try{const o=await _logoutIfInvalidated(t,_processCredentialSavingMfaContextIfNecessary(s,i,e,t),n);_assert(o.idToken,s,"internal-error");const l=_parseToken(o.idToken);_assert(l,s,"internal-error");const{sub:u}=l;return _assert(t.uid===u,s,"user-mismatch"),UserCredentialImpl._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&_fail(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(t,e,n=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const s="signIn",i=await _processCredentialSavingMfaContextIfNecessary(t,s,e),o=await UserCredentialImpl._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(o.user),o}async function signInWithCredential(t,e){return _signInWithCredential(_castAuth(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(t){const e=_castAuth(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function createUserWithEmailAndPassword(t,e,n){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const s=_castAuth(t),l=await handleRecaptchaFlow(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),d}),u=await UserCredentialImpl._fromIdTokenResponse(s,"signIn",l);return await s._updateCurrentUser(u.user),u}function signInWithEmailAndPassword(t,e,n){return _isFirebaseServerApp(t.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t)):signInWithCredential(getModularInstance(t),EmailAuthProvider.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile$1(t,e){return _performApiRequest(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=getModularInstance(t),o={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await _logoutIfInvalidated(s,updateProfile$1(s.auth,o));s.displayName=l.displayName||null,s.photoURL=l.photoUrl||null;const u=s.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=s.displayName,u.photoURL=s.photoURL),await s._updateTokensIfNecessary(l)}function onIdTokenChanged(t,e,n,s){return getModularInstance(t).onIdTokenChanged(e,n,s)}function beforeAuthStateChanged(t,e,n){return getModularInstance(t).beforeAuthStateChanged(e,n)}function onAuthStateChanged(t,e,n,s){return getModularInstance(t).onAuthStateChanged(e,n,s)}function signOut(t){return getModularInstance(t).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(s);!n&&this.localCache[s]===l||this.notifyListeners(s,l)},o=this.storage.getItem(s);_isIE10()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,IE10_LOCAL_STORAGE_SYNC_DELAY):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new Receiver(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:o}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const u=Array.from(l).map(async f=>f(n.origin,o)),d=await _allSettled(u);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const f=_generateEventId("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},s);l={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(y.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(t){_window().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function getObjectStore(t,e){return t.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const t=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(t).toPromise()}function _openDatabase(){const t=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(s):(s.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(t,e,n){const s=getObjectStore(t,!0).put({[DB_DATA_KEYPATH]:e,value:n});return new DBPromise(s).toPromise()}async function getObject(t,e){const n=getObjectStore(t,!1).get(e),s=await new DBPromise(n).toPromise();return s===void 0?null:s.value}function _deleteObject(t,e){const n=getObjectStore(t,!0).delete(e);return new DBPromise(n).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>_TRANSACTION_RETRY_COUNT)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>_putObject(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>getObject(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_deleteObject(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=getObjectStore(i,!1).getAll();return new DBPromise(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(t,e){return e?_getInstance(e):(_assert(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return signInWithIdp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _signIn(t){return _signInWithCredential(t.auth,new IdpCredential(t),t.bypassAuthState)}function _reauth(t){const{auth:e,user:n}=t;return _assert(n,e,"internal-error"),_reauthenticate(n,new IdpCredential(t),t.bypassAuthState)}async function _link(t){const{auth:e,user:n}=t;return _assert(n,e,"internal-error"),_link$1(n,new IdpCredential(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,n,s,i,o=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:s,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,n,s,i,o){super(e,n,i,o),this.provider=s,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const s=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(t,e){const n=pendingRedirectKey(e),s=resolverPersistence(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function _overrideRedirectResult(t,e){redirectOutcomeMap.set(t._key(),e)}function resolverPersistence(t){return _getInstance(t._redirectPersistence)}function pendingRedirectKey(t){return _persistenceKeyName(PENDING_REDIRECT_KEY,t.config.apiKey,t.name)}async function _getRedirectResult(t,e,n=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const s=_castAuth(t),i=_withDefaultResolver(s,e),l=await new RedirectAction(s,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!isNullRedirectEvent(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(_createError(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function isRedirectEvent(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(t,e={}){return _performApiRequest(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(t);for(const n of e)try{if(matchDomain(n))return}catch{}_fail(t,"unauthorized-domain")}function matchDomain(t){const e=_getCurrentUrl(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===s}if(!HTTP_REGEX.test(n))return!1;if(IP_ADDRESS_REGEX.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const t=_window().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function loadGapi(t){return new Promise((e,n)=>{var s,i,o;function l(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),n(_createError(t,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((i=(s=_window().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=_window().gapi)===null||o===void 0)&&o.load)l();else{const u=_generateCallbackName("iframefcb");return _window()[u]=()=>{gapi.load?l():n(_createError(t,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${u}`).catch(d=>n(d))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(t){return cachedGApiLoader=cachedGApiLoader||loadGapi(t),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(t){const e=t.config;_assert(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${t.config.authDomain}/${IFRAME_PATH}`,s={apiKey:e.apiKey,appName:t.name,v:SDK_VERSION},i=EID_FROM_APIHOST.get(t.config.apiHost);i&&(s.eid=i);const o=t._getFrameworks();return o.length&&(s.fw=o.join(",")),`${n}?${querystring(s).slice(1)}`}async function _openIframe(t){const e=await _loadGapi(t),n=_window().gapi;return _assert(n,t,"internal-error"),e.open({where:document.body,url:getIframeUrl(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},s=>new Promise(async(i,o)=>{await s.restyle({setHideOnLeave:!1});const l=_createError(t,"network-request-failed"),u=_window().setTimeout(()=>{o(l)},PING_TIMEOUT.get());function d(){_window().clearTimeout(u),i(s)}s.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(t,e,n,s=DEFAULT_WIDTH,i=DEFAULT_HEIGHT){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-s)/2,0).toString();let u="";const d=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:s.toString(),height:i.toString(),top:o,left:l}),f=getUA().toLowerCase();n&&(u=_isChromeIOS(f)?TARGET_BLANK:n),_isFirefox(f)&&(e=e||FIREFOX_EMPTY_URL,d.scrollbars="yes");const m=Object.entries(d).reduce((y,[v,E])=>`${y}${v}=${E},`,"");if(_isIOSStandalone(f)&&u!=="_self")return openAsNewWindowIOS(e||"",u),new AuthPopup(null);const g=window.open(e||"",u,m);_assert(g,t,"popup-blocked");try{g.focus()}catch{}return new AuthPopup(g)}function openAsNewWindowIOS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(t,e,n,s,i,o){_assert(t.config.authDomain,t,"auth-domain-config-required"),_assert(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:SDK_VERSION,eventId:i};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",isEmpty$1(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))l[m]=g}if(e instanceof BaseOAuthProvider){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await t._getAppCheckToken(),f=d?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(d)}`:"";return`${getHandlerBase(t)}?${querystring(u).slice(1)}${f}`}function getHandlerBase({config:t}){return t.emulator?_emulatorUrl(t,EMULATOR_WIDGET_PATH):`https://${t.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,n,s,i){var o;debugAssert((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await _getRedirectUrl(e,n,s,_getCurrentUrl(),i);return _open(e,l,_generateEventId())}async _openRedirect(e,n,s,i){await this._originValidation(e);const o=await _getRedirectUrl(e,n,s,_getCurrentUrl(),i);return _setWindowLocation(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(debugAssert(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await _openIframe(e),s=new AuthEventManager(e);return n.register("authEvent",i=>(_assert(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},i=>{var o;const l=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[WEB_STORAGE_SUPPORT_KEY];l!==void 0&&n(!!l),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_validateOrigin(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$1="@firebase/auth",version$3="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(t){_registerComponent(new Component("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=s.options;_assert(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});const d={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(t)},f=new AuthImpl(s,i,o,d);return _initializeAuthInstance(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const n=_castAuth(e.getProvider("auth").getImmediate());return(s=>new AuthInterop(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$1,version$3,getVersionForPlatform(t)),registerVersion(name$1,version$3,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>authIdTokenMaxAge)return;const i=n==null?void 0:n.token;lastPostedIdToken!==i&&(lastPostedIdToken=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function getAuth(t=getApp()){const e=_getProvider(t,"auth");if(e.isInitialized())return e.getImmediate();const n=initializeAuth(t,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),s=getExperimentalSetting("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const l=mintCookieFactory(o.toString());beforeAuthStateChanged(n,l,()=>l(n.currentUser)),onIdTokenChanged(n,u=>l(u))}}const i=getDefaultEmulatorHost("auth");return i&&connectAuthEmulator(n,`http://${i}`),n}function getScriptParentElement(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_setExternalJSProvider({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const o=_createError("internal-error");o.customData=i,n(o)},s.type="text/javascript",s.charset="UTF-8",getScriptParentElement().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function P(){}P.prototype=T.prototype,S.D=T.prototype,S.prototype=new P,S.prototype.constructor=S,S.C=function(U,J,W){for(var K=Array(arguments.length-2),le=2;le<arguments.length;le++)K[le-2]=arguments[le];return T.prototype[J].apply(U,K)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,P){P||(P=0);var U=Array(16);if(typeof T=="string")for(var J=0;16>J;++J)U[J]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(J=0;16>J;++J)U[J]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=S.g[0],P=S.g[1],J=S.g[2];var W=S.g[3],K=T+(W^P&(J^W))+U[0]+3614090360&4294967295;T=P+(K<<7&4294967295|K>>>25),K=W+(J^T&(P^J))+U[1]+3905402710&4294967295,W=T+(K<<12&4294967295|K>>>20),K=J+(P^W&(T^P))+U[2]+606105819&4294967295,J=W+(K<<17&4294967295|K>>>15),K=P+(T^J&(W^T))+U[3]+3250441966&4294967295,P=J+(K<<22&4294967295|K>>>10),K=T+(W^P&(J^W))+U[4]+4118548399&4294967295,T=P+(K<<7&4294967295|K>>>25),K=W+(J^T&(P^J))+U[5]+1200080426&4294967295,W=T+(K<<12&4294967295|K>>>20),K=J+(P^W&(T^P))+U[6]+2821735955&4294967295,J=W+(K<<17&4294967295|K>>>15),K=P+(T^J&(W^T))+U[7]+4249261313&4294967295,P=J+(K<<22&4294967295|K>>>10),K=T+(W^P&(J^W))+U[8]+1770035416&4294967295,T=P+(K<<7&4294967295|K>>>25),K=W+(J^T&(P^J))+U[9]+2336552879&4294967295,W=T+(K<<12&4294967295|K>>>20),K=J+(P^W&(T^P))+U[10]+4294925233&4294967295,J=W+(K<<17&4294967295|K>>>15),K=P+(T^J&(W^T))+U[11]+2304563134&4294967295,P=J+(K<<22&4294967295|K>>>10),K=T+(W^P&(J^W))+U[12]+1804603682&4294967295,T=P+(K<<7&4294967295|K>>>25),K=W+(J^T&(P^J))+U[13]+4254626195&4294967295,W=T+(K<<12&4294967295|K>>>20),K=J+(P^W&(T^P))+U[14]+2792965006&4294967295,J=W+(K<<17&4294967295|K>>>15),K=P+(T^J&(W^T))+U[15]+1236535329&4294967295,P=J+(K<<22&4294967295|K>>>10),K=T+(J^W&(P^J))+U[1]+4129170786&4294967295,T=P+(K<<5&4294967295|K>>>27),K=W+(P^J&(T^P))+U[6]+3225465664&4294967295,W=T+(K<<9&4294967295|K>>>23),K=J+(T^P&(W^T))+U[11]+643717713&4294967295,J=W+(K<<14&4294967295|K>>>18),K=P+(W^T&(J^W))+U[0]+3921069994&4294967295,P=J+(K<<20&4294967295|K>>>12),K=T+(J^W&(P^J))+U[5]+3593408605&4294967295,T=P+(K<<5&4294967295|K>>>27),K=W+(P^J&(T^P))+U[10]+38016083&4294967295,W=T+(K<<9&4294967295|K>>>23),K=J+(T^P&(W^T))+U[15]+3634488961&4294967295,J=W+(K<<14&4294967295|K>>>18),K=P+(W^T&(J^W))+U[4]+3889429448&4294967295,P=J+(K<<20&4294967295|K>>>12),K=T+(J^W&(P^J))+U[9]+568446438&4294967295,T=P+(K<<5&4294967295|K>>>27),K=W+(P^J&(T^P))+U[14]+3275163606&4294967295,W=T+(K<<9&4294967295|K>>>23),K=J+(T^P&(W^T))+U[3]+4107603335&4294967295,J=W+(K<<14&4294967295|K>>>18),K=P+(W^T&(J^W))+U[8]+1163531501&4294967295,P=J+(K<<20&4294967295|K>>>12),K=T+(J^W&(P^J))+U[13]+2850285829&4294967295,T=P+(K<<5&4294967295|K>>>27),K=W+(P^J&(T^P))+U[2]+4243563512&4294967295,W=T+(K<<9&4294967295|K>>>23),K=J+(T^P&(W^T))+U[7]+1735328473&4294967295,J=W+(K<<14&4294967295|K>>>18),K=P+(W^T&(J^W))+U[12]+2368359562&4294967295,P=J+(K<<20&4294967295|K>>>12),K=T+(P^J^W)+U[5]+4294588738&4294967295,T=P+(K<<4&4294967295|K>>>28),K=W+(T^P^J)+U[8]+2272392833&4294967295,W=T+(K<<11&4294967295|K>>>21),K=J+(W^T^P)+U[11]+1839030562&4294967295,J=W+(K<<16&4294967295|K>>>16),K=P+(J^W^T)+U[14]+4259657740&4294967295,P=J+(K<<23&4294967295|K>>>9),K=T+(P^J^W)+U[1]+2763975236&4294967295,T=P+(K<<4&4294967295|K>>>28),K=W+(T^P^J)+U[4]+1272893353&4294967295,W=T+(K<<11&4294967295|K>>>21),K=J+(W^T^P)+U[7]+4139469664&4294967295,J=W+(K<<16&4294967295|K>>>16),K=P+(J^W^T)+U[10]+3200236656&4294967295,P=J+(K<<23&4294967295|K>>>9),K=T+(P^J^W)+U[13]+681279174&4294967295,T=P+(K<<4&4294967295|K>>>28),K=W+(T^P^J)+U[0]+3936430074&4294967295,W=T+(K<<11&4294967295|K>>>21),K=J+(W^T^P)+U[3]+3572445317&4294967295,J=W+(K<<16&4294967295|K>>>16),K=P+(J^W^T)+U[6]+76029189&4294967295,P=J+(K<<23&4294967295|K>>>9),K=T+(P^J^W)+U[9]+3654602809&4294967295,T=P+(K<<4&4294967295|K>>>28),K=W+(T^P^J)+U[12]+3873151461&4294967295,W=T+(K<<11&4294967295|K>>>21),K=J+(W^T^P)+U[15]+530742520&4294967295,J=W+(K<<16&4294967295|K>>>16),K=P+(J^W^T)+U[2]+3299628645&4294967295,P=J+(K<<23&4294967295|K>>>9),K=T+(J^(P|~W))+U[0]+4096336452&4294967295,T=P+(K<<6&4294967295|K>>>26),K=W+(P^(T|~J))+U[7]+1126891415&4294967295,W=T+(K<<10&4294967295|K>>>22),K=J+(T^(W|~P))+U[14]+2878612391&4294967295,J=W+(K<<15&4294967295|K>>>17),K=P+(W^(J|~T))+U[5]+4237533241&4294967295,P=J+(K<<21&4294967295|K>>>11),K=T+(J^(P|~W))+U[12]+1700485571&4294967295,T=P+(K<<6&4294967295|K>>>26),K=W+(P^(T|~J))+U[3]+2399980690&4294967295,W=T+(K<<10&4294967295|K>>>22),K=J+(T^(W|~P))+U[10]+4293915773&4294967295,J=W+(K<<15&4294967295|K>>>17),K=P+(W^(J|~T))+U[1]+2240044497&4294967295,P=J+(K<<21&4294967295|K>>>11),K=T+(J^(P|~W))+U[8]+1873313359&4294967295,T=P+(K<<6&4294967295|K>>>26),K=W+(P^(T|~J))+U[15]+4264355552&4294967295,W=T+(K<<10&4294967295|K>>>22),K=J+(T^(W|~P))+U[6]+2734768916&4294967295,J=W+(K<<15&4294967295|K>>>17),K=P+(W^(J|~T))+U[13]+1309151649&4294967295,P=J+(K<<21&4294967295|K>>>11),K=T+(J^(P|~W))+U[4]+4149444226&4294967295,T=P+(K<<6&4294967295|K>>>26),K=W+(P^(T|~J))+U[11]+3174756917&4294967295,W=T+(K<<10&4294967295|K>>>22),K=J+(T^(W|~P))+U[2]+718787259&4294967295,J=W+(K<<15&4294967295|K>>>17),K=P+(W^(J|~T))+U[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(J+(K<<21&4294967295|K>>>11))&4294967295,S.g[2]=S.g[2]+J&4294967295,S.g[3]=S.g[3]+W&4294967295}s.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var P=T-this.blockSize,U=this.B,J=this.h,W=0;W<T;){if(J==0)for(;W<=P;)i(this,S,W),W+=this.blockSize;if(typeof S=="string"){for(;W<T;)if(U[J++]=S.charCodeAt(W++),J==this.blockSize){i(this,U),J=0;break}}else for(;W<T;)if(U[J++]=S[W++],J==this.blockSize){i(this,U),J=0;break}}this.h=J,this.o+=T},s.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var P=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=P&255,P/=256;for(this.u(S),S=Array(16),T=P=0;4>T;++T)for(var U=0;32>U;U+=8)S[P++]=this.g[T]>>>U&255;return S};function o(S,T){var P=u;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=T(S)}function l(S,T){this.h=T;for(var P=[],U=!0,J=S.length-1;0<=J;J--){var W=S[J]|0;U&&W==T||(P[J]=W,U=!1)}this.g=P}var u={};function d(S){return-128<=S&&128>S?o(S,function(T){return new l([T|0],0>T?-1:0)}):new l([S|0],0>S?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return g;if(0>S)return A(f(-S));for(var T=[],P=1,U=0;S>=P;U++)T[U]=S/P|0,P*=4294967296;return new l(T,0)}function m(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return A(m(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=f(Math.pow(T,8)),U=g,J=0;J<S.length;J+=8){var W=Math.min(8,S.length-J),K=parseInt(S.substring(J,J+W),T);8>W?(W=f(Math.pow(T,W)),U=U.j(W).add(f(K))):(U=U.j(P),U=U.add(f(K)))}return U}var g=d(0),y=d(1),v=d(16777216);t=l.prototype,t.m=function(){if(w(this))return-A(this).m();for(var S=0,T=1,P=0;P<this.g.length;P++){var U=this.i(P);S+=(0<=U?U:4294967296+U)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E(this))return"0";if(w(this))return"-"+A(this).toString(S);for(var T=f(Math.pow(S,6)),P=this,U="";;){var J=Y(P,T).g;P=I(P,J.j(T));var W=((0<P.g.length?P.g[0]:P.h)>>>0).toString(S);if(P=J,E(P))return W+U;for(;6>W.length;)W="0"+W;U=W+U}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function E(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function w(S){return S.h==-1}t.l=function(S){return S=I(this,S),w(S)?-1:E(S)?0:1};function A(S){for(var T=S.g.length,P=[],U=0;U<T;U++)P[U]=~S.g[U];return new l(P,~S.h).add(y)}t.abs=function(){return w(this)?A(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],U=0,J=0;J<=T;J++){var W=U+(this.i(J)&65535)+(S.i(J)&65535),K=(W>>>16)+(this.i(J)>>>16)+(S.i(J)>>>16);U=K>>>16,W&=65535,K&=65535,P[J]=K<<16|W}return new l(P,P[P.length-1]&-2147483648?-1:0)};function I(S,T){return S.add(A(T))}t.j=function(S){if(E(this)||E(S))return g;if(w(this))return w(S)?A(this).j(A(S)):A(A(this).j(S));if(w(S))return A(this.j(A(S)));if(0>this.l(v)&&0>S.l(v))return f(this.m()*S.m());for(var T=this.g.length+S.g.length,P=[],U=0;U<2*T;U++)P[U]=0;for(U=0;U<this.g.length;U++)for(var J=0;J<S.g.length;J++){var W=this.i(U)>>>16,K=this.i(U)&65535,le=S.i(J)>>>16,ge=S.i(J)&65535;P[2*U+2*J]+=K*ge,D(P,2*U+2*J),P[2*U+2*J+1]+=W*ge,D(P,2*U+2*J+1),P[2*U+2*J+1]+=K*le,D(P,2*U+2*J+1),P[2*U+2*J+2]+=W*le,D(P,2*U+2*J+2)}for(U=0;U<T;U++)P[U]=P[2*U+1]<<16|P[2*U];for(U=T;U<2*T;U++)P[U]=0;return new l(P,0)};function D(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function V(S,T){this.g=S,this.h=T}function Y(S,T){if(E(T))throw Error("division by zero");if(E(S))return new V(g,g);if(w(S))return T=Y(A(S),T),new V(A(T.g),A(T.h));if(w(T))return T=Y(S,A(T)),new V(A(T.g),T.h);if(30<S.g.length){if(w(S)||w(T))throw Error("slowDivide_ only works with positive integers.");for(var P=y,U=T;0>=U.l(S);)P=j(P),U=j(U);var J=H(P,1),W=H(U,1);for(U=H(U,2),P=H(P,2);!E(U);){var K=W.add(U);0>=K.l(S)&&(J=J.add(P),W=K),U=H(U,1),P=H(P,1)}return T=I(S,J.j(T)),new V(J,T)}for(J=g;0<=S.l(T);){for(P=Math.max(1,Math.floor(S.m()/T.m())),U=Math.ceil(Math.log(P)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),W=f(P),K=W.j(T);w(K)||0<K.l(S);)P-=U,W=f(P),K=W.j(T);E(W)&&(W=y),J=J.add(W),S=I(S,K)}return new V(J,S)}t.A=function(S){return Y(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],U=0;U<T;U++)P[U]=this.i(U)&S.i(U);return new l(P,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],U=0;U<T;U++)P[U]=this.i(U)|S.i(U);return new l(P,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],U=0;U<T;U++)P[U]=this.i(U)^S.i(U);return new l(P,this.h^S.h)};function j(S){for(var T=S.g.length+1,P=[],U=0;U<T;U++)P[U]=S.i(U)<<1|S.i(U-1)>>>31;return new l(P,S.h)}function H(S,T){var P=T>>5;T%=32;for(var U=S.g.length-P,J=[],W=0;W<U;W++)J[W]=0<T?S.i(W+P)>>>T|S.i(W+P+1)<<32-T:S.i(W+P);return new l(J,S.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Md5=s,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,Integer=l}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,C,Z){return _==Array.prototype||_==Object.prototype||(_[C]=Z.value),_};function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var C=0;C<_.length;++C){var Z=_[C];if(Z&&Z.Math==Math)return Z}throw Error("Cannot find global object")}var s=n(this);function i(_,C){if(C)e:{var Z=s;_=_.split(".");for(var ne=0;ne<_.length-1;ne++){var ye=_[ne];if(!(ye in Z))break e;Z=Z[ye]}_=_[_.length-1],ne=Z[_],C=C(ne),C!=ne&&C!=null&&e(Z,_,{configurable:!0,writable:!0,value:C})}}function o(_,C){_ instanceof String&&(_+="");var Z=0,ne=!1,ye={next:function(){if(!ne&&Z<_.length){var De=Z++;return{value:C(De,_[De]),done:!1}}return ne=!0,{done:!0,value:void 0}}};return ye[Symbol.iterator]=function(){return ye},ye}i("Array.prototype.values",function(_){return _||function(){return o(this,function(C,Z){return Z})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(_){var C=typeof _;return C=C!="object"?C:_?Array.isArray(_)?"array":C:"null",C=="array"||C=="object"&&typeof _.length=="number"}function f(_){var C=typeof _;return C=="object"&&_!=null||C=="function"}function m(_,C,Z){return _.call.apply(_.bind,arguments)}function g(_,C,Z){if(!_)throw Error();if(2<arguments.length){var ne=Array.prototype.slice.call(arguments,2);return function(){var ye=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ye,ne),_.apply(C,ye)}}return function(){return _.apply(C,arguments)}}function y(_,C,Z){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,y.apply(null,arguments)}function v(_,C){var Z=Array.prototype.slice.call(arguments,1);return function(){var ne=Z.slice();return ne.push.apply(ne,arguments),_.apply(this,ne)}}function E(_,C){function Z(){}Z.prototype=C.prototype,_.aa=C.prototype,_.prototype=new Z,_.prototype.constructor=_,_.Qb=function(ne,ye,De){for(var We=Array(arguments.length-2),dn=2;dn<arguments.length;dn++)We[dn-2]=arguments[dn];return C.prototype[ye].apply(ne,We)}}function w(_){const C=_.length;if(0<C){const Z=Array(C);for(let ne=0;ne<C;ne++)Z[ne]=_[ne];return Z}return[]}function A(_,C){for(let Z=1;Z<arguments.length;Z++){const ne=arguments[Z];if(d(ne)){const ye=_.length||0,De=ne.length||0;_.length=ye+De;for(let We=0;We<De;We++)_[ye+We]=ne[We]}else _.push(ne)}}class I{constructor(C,Z){this.i=C,this.j=Z,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function D(_){return/^[\s\xa0]*$/.test(_)}function V(){var _=u.navigator;return _&&(_=_.userAgent)?_:""}function Y(_){return Y[" "](_),_}Y[" "]=function(){};var j=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function H(_,C,Z){for(const ne in _)C.call(Z,_[ne],ne,_)}function S(_,C){for(const Z in _)C.call(void 0,_[Z],Z,_)}function T(_){const C={};for(const Z in _)C[Z]=_[Z];return C}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(_,C){let Z,ne;for(let ye=1;ye<arguments.length;ye++){ne=arguments[ye];for(Z in ne)_[Z]=ne[Z];for(let De=0;De<P.length;De++)Z=P[De],Object.prototype.hasOwnProperty.call(ne,Z)&&(_[Z]=ne[Z])}}function J(_){var C=1;_=_.split(":");const Z=[];for(;0<C&&_.length;)Z.push(_.shift()),C--;return _.length&&Z.push(_.join(":")),Z}function W(_){u.setTimeout(()=>{throw _},0)}function K(){var _=Ne;let C=null;return _.g&&(C=_.g,_.g=_.g.next,_.g||(_.h=null),C.next=null),C}class le{constructor(){this.h=this.g=null}add(C,Z){const ne=ge.get();ne.set(C,Z),this.h?this.h.next=ne:this.g=ne,this.h=ne}}var ge=new I(()=>new oe,_=>_.reset());class oe{constructor(){this.next=this.g=this.h=null}set(C,Z){this.h=C,this.g=Z,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ie=!1,Ne=new le,re=()=>{const _=u.Promise.resolve(void 0);ce=()=>{_.then(_e)}};var _e=()=>{for(var _;_=K();){try{_.h.call(_.g)}catch(Z){W(Z)}var C=ge;C.j(_),100>C.h&&(C.h++,_.next=C.g,C.g=_)}ie=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(_,C){this.type=_,this.g=this.target=C,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var Be=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var _=!1,C=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const Z=()=>{};u.addEventListener("test",Z,C),u.removeEventListener("test",Z,C)}catch{}return _}();function Ie(_,C){if(Re.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var Z=this.type=_.type,ne=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=C,C=_.relatedTarget){if(j){e:{try{Y(C.nodeName);var ye=!0;break e}catch{}ye=!1}ye||(C=null)}}else Z=="mouseover"?C=_.fromElement:Z=="mouseout"&&(C=_.toElement);this.relatedTarget=C,ne?(this.clientX=ne.clientX!==void 0?ne.clientX:ne.pageX,this.clientY=ne.clientY!==void 0?ne.clientY:ne.pageY,this.screenX=ne.screenX||0,this.screenY=ne.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:je[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&Ie.aa.h.call(this)}}E(Ie,Re);var je={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),ke=0;function Ge(_,C,Z,ne,ye){this.listener=_,this.proxy=null,this.src=C,this.type=Z,this.capture=!!ne,this.ha=ye,this.key=++ke,this.da=this.fa=!1}function we(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function de(_){this.src=_,this.g={},this.h=0}de.prototype.add=function(_,C,Z,ne,ye){var De=_.toString();_=this.g[De],_||(_=this.g[De]=[],this.h++);var We=ue(_,C,ne,ye);return-1<We?(C=_[We],Z||(C.fa=!1)):(C=new Ge(C,this.src,De,!!ne,ye),C.fa=Z,_.push(C)),C};function me(_,C){var Z=C.type;if(Z in _.g){var ne=_.g[Z],ye=Array.prototype.indexOf.call(ne,C,void 0),De;(De=0<=ye)&&Array.prototype.splice.call(ne,ye,1),De&&(we(C),_.g[Z].length==0&&(delete _.g[Z],_.h--))}}function ue(_,C,Z,ne){for(var ye=0;ye<_.length;++ye){var De=_[ye];if(!De.da&&De.listener==C&&De.capture==!!Z&&De.ha==ne)return ye}return-1}var se="closure_lm_"+(1e6*Math.random()|0),he={};function Pe(_,C,Z,ne,ye){if(Array.isArray(C)){for(var De=0;De<C.length;De++)Pe(_,C[De],Z,ne,ye);return null}return Z=Ze(Z),_&&_[Te]?_.K(C,Z,f(ne)?!!ne.capture:!1,ye):ze(_,C,Z,!1,ne,ye)}function ze(_,C,Z,ne,ye,De){if(!C)throw Error("Invalid event type");var We=f(ye)?!!ye.capture:!!ye,dn=Oe(_);if(dn||(_[se]=dn=new de(_)),Z=dn.add(C,Z,ne,We,De),Z.proxy)return Z;if(ne=$e(),Z.proxy=ne,ne.src=_,ne.listener=Z,_.addEventListener)Be||(ye=We),ye===void 0&&(ye=!1),_.addEventListener(C.toString(),ne,ye);else if(_.attachEvent)_.attachEvent(xe(C.toString()),ne);else if(_.addListener&&_.removeListener)_.addListener(ne);else throw Error("addEventListener and attachEvent are unavailable.");return Z}function $e(){function _(Z){return C.call(_.src,_.listener,Z)}const C=Ue;return _}function vt(_,C,Z,ne,ye){if(Array.isArray(C))for(var De=0;De<C.length;De++)vt(_,C[De],Z,ne,ye);else ne=f(ne)?!!ne.capture:!!ne,Z=Ze(Z),_&&_[Te]?(_=_.i,C=String(C).toString(),C in _.g&&(De=_.g[C],Z=ue(De,Z,ne,ye),-1<Z&&(we(De[Z]),Array.prototype.splice.call(De,Z,1),De.length==0&&(delete _.g[C],_.h--)))):_&&(_=Oe(_))&&(C=_.g[C.toString()],_=-1,C&&(_=ue(C,Z,ne,ye)),(Z=-1<_?C[_]:null)&&ve(Z))}function ve(_){if(typeof _!="number"&&_&&!_.da){var C=_.src;if(C&&C[Te])me(C.i,_);else{var Z=_.type,ne=_.proxy;C.removeEventListener?C.removeEventListener(Z,ne,_.capture):C.detachEvent?C.detachEvent(xe(Z),ne):C.addListener&&C.removeListener&&C.removeListener(ne),(Z=Oe(C))?(me(Z,_),Z.h==0&&(Z.src=null,C[se]=null)):we(_)}}}function xe(_){return _ in he?he[_]:he[_]="on"+_}function Ue(_,C){if(_.da)_=!0;else{C=new Ie(C,this);var Z=_.listener,ne=_.ha||_.src;_.fa&&ve(_),_=Z.call(ne,C)}return _}function Oe(_){return _=_[se],_ instanceof de?_:null}var Me="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ze(_){return typeof _=="function"?_:(_[Me]||(_[Me]=function(C){return _.handleEvent(C)}),_[Me])}function He(){Se.call(this),this.i=new de(this),this.M=this,this.F=null}E(He,Se),He.prototype[Te]=!0,He.prototype.removeEventListener=function(_,C,Z,ne){vt(this,_,C,Z,ne)};function qe(_,C){var Z,ne=_.F;if(ne)for(Z=[];ne;ne=ne.F)Z.push(ne);if(_=_.M,ne=C.type||C,typeof C=="string")C=new Re(C,_);else if(C instanceof Re)C.target=C.target||_;else{var ye=C;C=new Re(ne,_),U(C,ye)}if(ye=!0,Z)for(var De=Z.length-1;0<=De;De--){var We=C.g=Z[De];ye=Xe(We,ne,!0,C)&&ye}if(We=C.g=_,ye=Xe(We,ne,!0,C)&&ye,ye=Xe(We,ne,!1,C)&&ye,Z)for(De=0;De<Z.length;De++)We=C.g=Z[De],ye=Xe(We,ne,!1,C)&&ye}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var _=this.i,C;for(C in _.g){for(var Z=_.g[C],ne=0;ne<Z.length;ne++)we(Z[ne]);delete _.g[C],_.h--}}this.F=null},He.prototype.K=function(_,C,Z,ne){return this.i.add(String(_),C,!1,Z,ne)},He.prototype.L=function(_,C,Z,ne){return this.i.add(String(_),C,!0,Z,ne)};function Xe(_,C,Z,ne){if(C=_.i.g[String(C)],!C)return!0;C=C.concat();for(var ye=!0,De=0;De<C.length;++De){var We=C[De];if(We&&!We.da&&We.capture==Z){var dn=We.listener,Wn=We.ha||We.src;We.fa&&me(_.i,We),ye=dn.call(Wn,ne)!==!1&&ye}}return ye&&!ne.defaultPrevented}function et(_,C,Z){if(typeof _=="function")Z&&(_=y(_,Z));else if(_&&typeof _.handleEvent=="function")_=y(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:u.setTimeout(_,C||0)}function Kt(_){_.g=et(()=>{_.g=null,_.i&&(_.i=!1,Kt(_))},_.l);const C=_.h;_.h=null,_.m.apply(null,C)}class It extends Se{constructor(C,Z){super(),this.m=C,this.l=Z,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Kt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bt(_){Se.call(this),this.h=_,this.g={}}E(Bt,Se);var Et=[];function mn(_){H(_.g,function(C,Z){this.g.hasOwnProperty(Z)&&ve(C)},_),_.g={}}Bt.prototype.N=function(){Bt.aa.N.call(this),mn(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nt=u.JSON.stringify,Gt=u.JSON.parse,un=class{stringify(_){return u.JSON.stringify(_,void 0)}parse(_){return u.JSON.parse(_,void 0)}};function pt(){}pt.prototype.h=null;function Qe(_){return _.h||(_.h=_.i())}function Dn(){}var Pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wt(){Re.call(this,"d")}E(Wt,Re);function On(){Re.call(this,"c")}E(On,Re);var jn={},Fn=null;function Tn(){return Fn=Fn||new He}jn.La="serverreachability";function Nn(_){Re.call(this,jn.La,_)}E(Nn,Re);function Mn(_){const C=Tn();qe(C,new Nn(C))}jn.STAT_EVENT="statevent";function gs(_,C){Re.call(this,jn.STAT_EVENT,_),this.stat=C}E(gs,Re);function Ct(_){const C=Tn();qe(C,new gs(C,_))}jn.Ma="timingevent";function Dt(_,C){Re.call(this,jn.Ma,_),this.size=C}E(Dt,Re);function pn(_,C){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){_()},C)}function Sn(){this.g=!0}Sn.prototype.xa=function(){this.g=!1};function Vs(_,C,Z,ne,ye,De){_.info(function(){if(_.g)if(De)for(var We="",dn=De.split("&"),Wn=0;Wn<dn.length;Wn++){var hn=dn[Wn].split("=");if(1<hn.length){var Jn=hn[0];hn=hn[1];var Yn=Jn.split("_");We=2<=Yn.length&&Yn[1]=="type"?We+(Jn+"="+hn+"&"):We+(Jn+"=redacted&")}}else We=null;else We=De;return"XMLHTTP REQ ("+ne+") [attempt "+ye+"]: "+C+`
`+Z+`
`+We})}function ir(_,C,Z,ne,ye,De,We){_.info(function(){return"XMLHTTP RESP ("+ne+") [ attempt "+ye+"]: "+C+`
`+Z+`
`+De+" "+We})}function ns(_,C,Z,ne){_.info(function(){return"XMLHTTP TEXT ("+C+"): "+Ms(_,Z)+(ne?" "+ne:"")})}function $s(_,C){_.info(function(){return"TIMEOUT: "+C})}Sn.prototype.info=function(){};function Ms(_,C){if(!_.g)return C;if(!C)return null;try{var Z=JSON.parse(C);if(Z){for(_=0;_<Z.length;_++)if(Array.isArray(Z[_])){var ne=Z[_];if(!(2>ne.length)){var ye=ne[1];if(Array.isArray(ye)&&!(1>ye.length)){var De=ye[0];if(De!="noop"&&De!="stop"&&De!="close")for(var We=1;We<ye.length;We++)ye[We]=""}}}}return Nt(Z)}catch{return C}}var Pr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},or={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hs;function qs(){}E(qs,pt),qs.prototype.g=function(){return new XMLHttpRequest},qs.prototype.i=function(){return{}},Hs=new qs;function cs(_,C,Z,ne){this.j=_,this.i=C,this.l=Z,this.R=ne||1,this.U=new Bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zn}function zn(){this.i=null,this.g="",this.h=!1}var yo={},Ci={};function Ls(_,C,Z){_.L=1,_.v=ri(xs(C)),_.m=Z,_.P=!0,ar(_,null)}function ar(_,C){_.F=Date.now(),ei(_),_.A=xs(_.v);var Z=_.A,ne=_.R;Array.isArray(ne)||(ne=[String(ne)]),Ro(Z.i,"t",ne),_.C=0,Z=_.j.J,_.h=new zn,_.g=Na(_.j,Z?C:null,!_.m),0<_.O&&(_.M=new It(y(_.Y,_,_.g),_.O)),C=_.U,Z=_.g,ne=_.ca;var ye="readystatechange";Array.isArray(ye)||(ye&&(Et[0]=ye.toString()),ye=Et);for(var De=0;De<ye.length;De++){var We=Pe(Z,ye[De],ne||C.handleEvent,!1,C.h||C);if(!We)break;C.g[We.key]=We}C=_.H?T(_.H):{},_.m?(_.u||(_.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,C)):(_.u="GET",_.g.ea(_.A,_.u,null,C)),Mn(),Vs(_.i,_.u,_.A,_.l,_.R,_.m)}cs.prototype.ca=function(_){_=_.target;const C=this.M;C&&Cs(_)==3?C.j():this.Y(_)},cs.prototype.Y=function(_){try{if(_==this.g)e:{const Yn=Cs(this.g);var C=this.g.Ba();const pr=this.g.Z();if(!(3>Yn)&&(Yn!=3||this.g&&(this.h.h||this.g.oa()||Ra(this.g)))){this.J||Yn!=4||C==7||(C==8||0>=pr?Mn(3):Mn(2)),Ir(this);var Z=this.g.Z();this.X=Z;t:if(xa(this)){var ne=Ra(this.g);_="";var ye=ne.length,De=Cs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ss(this),Gs(this);var We="";break t}this.h.i=new u.TextDecoder}for(C=0;C<ye;C++)this.h.h=!0,_+=this.h.i.decode(ne[C],{stream:!(De&&C==ye-1)});ne.length=0,this.h.g+=_,this.C=0,We=this.h.g}else We=this.g.oa();if(this.o=Z==200,ir(this.i,this.u,this.A,this.l,this.R,Yn,Z),this.o){if(this.T&&!this.K){t:{if(this.g){var dn,Wn=this.g;if((dn=Wn.g?Wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(dn)){var hn=dn;break t}}hn=null}if(Z=hn)ns(this.i,this.l,Z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ti(this,Z);else{this.o=!1,this.s=3,Ct(12),ss(this),Gs(this);break e}}if(this.P){Z=!0;let rs;for(;!this.J&&this.C<We.length;)if(rs=ya(this,We),rs==Ci){Yn==4&&(this.s=4,Ct(14),Z=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(rs==yo){this.s=4,Ct(15),ns(this.i,this.l,We,"[Invalid Chunk]"),Z=!1;break}else ns(this.i,this.l,rs,null),ti(this,rs);if(xa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yn!=4||We.length!=0||this.h.h||(this.s=1,Ct(16),Z=!1),this.o=this.o&&Z,!Z)ns(this.i,this.l,We,"[Invalid Chunked Response]"),ss(this),Gs(this);else if(0<We.length&&!this.W){this.W=!0;var Jn=this.j;Jn.g==this&&Jn.ba&&!Jn.M&&(Jn.j.info("Great, no buffering proxy detected. Bytes received: "+We.length),hi(Jn),Jn.M=!0,Ct(11))}}else ns(this.i,this.l,We,null),ti(this,We);Yn==4&&ss(this),this.o&&!this.J&&(Yn==4?Pa(this.j,this):(this.o=!1,ei(this)))}else zl(this.g),Z==400&&0<We.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),ss(this),Gs(this)}}}catch{}finally{}};function xa(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function ya(_,C){var Z=_.C,ne=C.indexOf(`
`,Z);return ne==-1?Ci:(Z=Number(C.substring(Z,ne)),isNaN(Z)?yo:(ne+=1,ne+Z>C.length?Ci:(C=C.slice(ne,ne+Z),_.C=ne+Z,C)))}cs.prototype.cancel=function(){this.J=!0,ss(this)};function ei(_){_.S=Date.now()+_.I,_a(_,_.I)}function _a(_,C){if(_.B!=null)throw Error("WatchDog timer not null");_.B=pn(y(_.ba,_),C)}function Ir(_){_.B&&(u.clearTimeout(_.B),_.B=null)}cs.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?($s(this.i,this.A),this.L!=2&&(Mn(),Ct(17)),ss(this),this.s=2,Gs(this)):_a(this,this.S-_)};function Gs(_){_.j.G==0||_.J||Pa(_.j,_)}function ss(_){Ir(_);var C=_.M;C&&typeof C.ma=="function"&&C.ma(),_.M=null,mn(_.U),_.g&&(C=_.g,_.g=null,C.abort(),C.ma())}function ti(_,C){try{var Z=_.j;if(Z.G!=0&&(Z.g==_||_o(Z.h,_))){if(!_.K&&_o(Z.h,_)&&Z.G==3){try{var ne=Z.Da.g.parse(C)}catch{ne=null}if(Array.isArray(ne)&&ne.length==3){var ye=ne;if(ye[0]==0){e:if(!Z.u){if(Z.g)if(Z.g.F+3e3<_.F)Fi(Z),Li(Z);else break e;Po(Z),Ct(18)}}else Z.za=ye[1],0<Z.za-Z.T&&37500>ye[2]&&Z.F&&Z.v==0&&!Z.C&&(Z.C=pn(y(Z.Za,Z),6e3));if(1>=Ii(Z.h)&&Z.ca){try{Z.ca()}catch{}Z.ca=void 0}}else mr(Z,11)}else if((_.K||Z.g==_)&&Fi(Z),!D(C))for(ye=Z.Da.g.parse(C),C=0;C<ye.length;C++){let hn=ye[C];if(Z.T=hn[0],hn=hn[1],Z.G==2)if(hn[0]=="c"){Z.K=hn[1],Z.ia=hn[2];const Jn=hn[3];Jn!=null&&(Z.la=Jn,Z.j.info("VER="+Z.la));const Yn=hn[4];Yn!=null&&(Z.Aa=Yn,Z.j.info("SVER="+Z.Aa));const pr=hn[5];pr!=null&&typeof pr=="number"&&0<pr&&(ne=1.5*pr,Z.L=ne,Z.j.info("backChannelRequestTimeoutMs_="+ne)),ne=Z;const rs=_.g;if(rs){const Zs=rs.g?rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zs){var De=ne.h;De.g||Zs.indexOf("spdy")==-1&&Zs.indexOf("quic")==-1&&Zs.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(ji(De,De.h),De.h=null))}if(ne.D){const jo=rs.g?rs.g.getResponseHeader("X-HTTP-Session-Id"):null;jo&&(ne.ya=jo,En(ne.I,ne.D,jo))}}Z.G=3,Z.l&&Z.l.ua(),Z.ba&&(Z.R=Date.now()-_.F,Z.j.info("Handshake RTT: "+Z.R+"ms")),ne=Z;var We=_;if(ne.qa=ja(ne,ne.J?ne.ia:null,ne.W),We.K){us(ne.h,We);var dn=We,Wn=ne.L;Wn&&(dn.I=Wn),dn.B&&(Ir(dn),ei(dn)),ne.g=We}else Sa(ne);0<Z.i.length&&Bi(Z)}else hn[0]!="stop"&&hn[0]!="close"||mr(Z,7);else Z.G==3&&(hn[0]=="stop"||hn[0]=="close"?hn[0]=="stop"?mr(Z,7):So(Z):hn[0]!="noop"&&Z.l&&Z.l.ta(hn),Z.v=0)}}Mn(4)}catch{}}var va=class{constructor(_,C){this.g=_,this.map=C}};function lr(_){this.l=_||10,u.PerformanceNavigationTiming?(_=u.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pi(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Ii(_){return _.h?1:_.g?_.g.size:0}function _o(_,C){return _.h?_.h==C:_.g?_.g.has(C):!1}function ji(_,C){_.g?_.g.add(C):_.h=C}function us(_,C){_.h&&_.h==C?_.h=null:_.g&&_.g.has(C)&&_.g.delete(C)}lr.prototype.cancel=function(){if(this.i=vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function vo(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let C=_.i;for(const Z of _.g.values())C=C.concat(Z.D);return C}return w(_.i)}function Ml(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(d(_)){for(var C=[],Z=_.length,ne=0;ne<Z;ne++)C.push(_[ne]);return C}C=[],Z=0;for(ne in _)C[Z++]=_[ne];return C}function Ni(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(d(_)||typeof _=="string"){var C=[];_=_.length;for(var Z=0;Z<_;Z++)C.push(Z);return C}C=[],Z=0;for(const ne in _)C[Z++]=ne;return C}}}function bo(_,C){if(_.forEach&&typeof _.forEach=="function")_.forEach(C,void 0);else if(d(_)||typeof _=="string")Array.prototype.forEach.call(_,C,void 0);else for(var Z=Ni(_),ne=Ml(_),ye=ne.length,De=0;De<ye;De++)C.call(void 0,ne[De],Z&&Z[De],_)}var ni=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ll(_,C){if(_){_=_.split("&");for(var Z=0;Z<_.length;Z++){var ne=_[Z].indexOf("="),ye=null;if(0<=ne){var De=_[Z].substring(0,ne);ye=_[Z].substring(ne+1)}else De=_[Z];C(De,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function Hn(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof Hn){this.h=_.h,si(this,_.j),this.o=_.o,this.g=_.g,jr(this,_.s),this.l=_.l;var C=_.i,Z=new ur;Z.i=C.i,C.g&&(Z.g=new Map(C.g),Z.h=C.h),cr(this,Z),this.m=_.m}else _&&(C=String(_).match(ni))?(this.h=!1,si(this,C[1]||"",!0),this.o=As(C[2]||""),this.g=As(C[3]||"",!0),jr(this,C[4]),this.l=As(C[5]||"",!0),cr(this,C[6]||"",!0),this.m=As(C[7]||"")):(this.h=!1,this.i=new ur(null,this.h))}Hn.prototype.toString=function(){var _=[],C=this.j;C&&_.push(ii(C,Eo,!0),":");var Z=this.g;return(Z||C=="file")&&(_.push("//"),(C=this.o)&&_.push(ii(C,Eo,!0),"@"),_.push(encodeURIComponent(String(Z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Z=this.s,Z!=null&&_.push(":",String(Z))),(Z=this.l)&&(this.g&&Z.charAt(0)!="/"&&_.push("/"),_.push(ii(Z,Z.charAt(0)=="/"?Bl:wo,!0))),(Z=this.i.toString())&&_.push("?",Z),(Z=this.m)&&_.push("#",ii(Z,Di)),_.join("")};function xs(_){return new Hn(_)}function si(_,C,Z){_.j=Z?As(C,!0):C,_.j&&(_.j=_.j.replace(/:$/,""))}function jr(_,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);_.s=C}else _.s=null}function cr(_,C,Z){C instanceof ur?(_.i=C,Ea(_.i,_.h)):(Z||(C=ii(C,Fl)),_.i=new ur(C,_.h))}function En(_,C,Z){_.i.set(C,Z)}function ri(_){return En(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function As(_,C){return _?C?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function ii(_,C,Z){return typeof _=="string"?(_=encodeURI(_).replace(C,ba),Z&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function ba(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Eo=/[#\/\?@]/g,wo=/[#\?:]/g,Bl=/[#\?]/g,Fl=/[#\?@]/g,Di=/#/g;function ur(_,C){this.h=this.g=null,this.i=_||null,this.j=!!C}function Ts(_){_.g||(_.g=new Map,_.h=0,_.i&&Ll(_.i,function(C,Z){_.add(decodeURIComponent(C.replace(/\+/g," ")),Z)}))}t=ur.prototype,t.add=function(_,C){Ts(this),this.i=null,_=Ws(this,_);var Z=this.g.get(_);return Z||this.g.set(_,Z=[]),Z.push(C),this.h+=1,this};function dr(_,C){Ts(_),C=Ws(_,C),_.g.has(C)&&(_.i=null,_.h-=_.g.get(C).length,_.g.delete(C))}function hr(_,C){return Ts(_),C=Ws(_,C),_.g.has(C)}t.forEach=function(_,C){Ts(this),this.g.forEach(function(Z,ne){Z.forEach(function(ye){_.call(C,ye,ne,this)},this)},this)},t.na=function(){Ts(this);const _=Array.from(this.g.values()),C=Array.from(this.g.keys()),Z=[];for(let ne=0;ne<C.length;ne++){const ye=_[ne];for(let De=0;De<ye.length;De++)Z.push(C[ne])}return Z},t.V=function(_){Ts(this);let C=[];if(typeof _=="string")hr(this,_)&&(C=C.concat(this.g.get(Ws(this,_))));else{_=Array.from(this.g.values());for(let Z=0;Z<_.length;Z++)C=C.concat(_[Z])}return C},t.set=function(_,C){return Ts(this),this.i=null,_=Ws(this,_),hr(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[C]),this.h+=1,this},t.get=function(_,C){return _?(_=this.V(_),0<_.length?String(_[0]):C):C};function Ro(_,C,Z){dr(_,C),0<Z.length&&(_.i=null,_.g.set(Ws(_,C),w(Z)),_.h+=Z.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],C=Array.from(this.g.keys());for(var Z=0;Z<C.length;Z++){var ne=C[Z];const De=encodeURIComponent(String(ne)),We=this.V(ne);for(ne=0;ne<We.length;ne++){var ye=De;We[ne]!==""&&(ye+="="+encodeURIComponent(String(We[ne]))),_.push(ye)}}return this.i=_.join("&")};function Ws(_,C){return C=String(C),_.j&&(C=C.toLowerCase()),C}function Ea(_,C){C&&!_.j&&(Ts(_),_.i=null,_.g.forEach(function(Z,ne){var ye=ne.toLowerCase();ne!=ye&&(dr(this,ne),Ro(this,ye,Z))},_)),_.j=C}function oi(_,C){const Z=new Sn;if(u.Image){const ne=new Image;ne.onload=v(Ss,Z,"TestLoadImage: loaded",!0,C,ne),ne.onerror=v(Ss,Z,"TestLoadImage: error",!1,C,ne),ne.onabort=v(Ss,Z,"TestLoadImage: abort",!1,C,ne),ne.ontimeout=v(Ss,Z,"TestLoadImage: timeout",!1,C,ne),u.setTimeout(function(){ne.ontimeout&&ne.ontimeout()},1e4),ne.src=_}else C(!1)}function Bs(_,C){const Z=new Sn,ne=new AbortController,ye=setTimeout(()=>{ne.abort(),Ss(Z,"TestPingServer: timeout",!1,C)},1e4);fetch(_,{signal:ne.signal}).then(De=>{clearTimeout(ye),De.ok?Ss(Z,"TestPingServer: ok",!0,C):Ss(Z,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ye),Ss(Z,"TestPingServer: error",!1,C)})}function Ss(_,C,Z,ne,ye){try{ye&&(ye.onload=null,ye.onerror=null,ye.onabort=null,ye.ontimeout=null),ne(Z)}catch{}}function ai(){this.g=new un}function Ys(_,C,Z){const ne=Z||"";try{bo(_,function(ye,De){let We=ye;f(ye)&&(We=Nt(ye)),C.push(ne+De+"="+encodeURIComponent(We))})}catch(ye){throw C.push(ne+"type="+encodeURIComponent("_badmap")),ye}}function Nr(_){this.l=_.Ub||null,this.j=_.eb||!1}E(Nr,pt),Nr.prototype.g=function(){return new fr(this.l,this.j)},Nr.prototype.i=function(_){return function(){return _}}({});function fr(_,C){He.call(this),this.D=_,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(fr,He),t=fr.prototype,t.open=function(_,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=C,this.readyState=1,Xs(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(C.body=_),(this.D||u).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},t.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Xs(this)),this.g&&(this.readyState=3,Xs(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ao(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ao(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}t.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var C=_.value?_.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!_.done}))&&(this.response=this.responseText+=C)}_.done?Ks(this):Xs(this),this.readyState==3&&Ao(this)}},t.Ra=function(_){this.g&&(this.response=this.responseText=_,Ks(this))},t.Qa=function(_){this.g&&(this.response=_,Ks(this))},t.ga=function(){this.g&&Ks(this)};function Ks(_){_.readyState=4,_.l=null,_.j=null,_.v=null,Xs(_)}t.setRequestHeader=function(_,C){this.u.append(_,C)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],C=this.h.entries();for(var Z=C.next();!Z.done;)Z=Z.value,_.push(Z[0]+": "+Z[1]),Z=C.next();return _.join(`\r
`)};function Xs(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function To(_){let C="";return H(_,function(Z,ne){C+=ne,C+=":",C+=Z,C+=`\r
`}),C}function Qn(_,C,Z){e:{for(ne in Z){var ne=!1;break e}ne=!0}ne||(Z=To(Z),typeof _=="string"?Z!=null&&encodeURIComponent(String(Z)):En(_,C,Z))}function yn(_){He.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(yn,He);var ki=/^https?$/i,li=["POST","PUT"];t=yn.prototype,t.Ha=function(_){this.J=_},t.ea=function(_,C,Z,ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);C=C?C.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hs.g(),this.v=this.o?Qe(this.o):Qe(Hs),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(C,String(_),!0),this.B=!1}catch(De){wa(this,De);return}if(_=Z||"",Z=new Map(this.headers),ne)if(Object.getPrototypeOf(ne)===Object.prototype)for(var ye in ne)Z.set(ye,ne[ye]);else if(typeof ne.keys=="function"&&typeof ne.get=="function")for(const De of ne.keys())Z.set(De,ne.get(De));else throw Error("Unknown input type for opt_headers: "+String(ne));ne=Array.from(Z.keys()).find(De=>De.toLowerCase()=="content-type"),ye=u.FormData&&_ instanceof u.FormData,!(0<=Array.prototype.indexOf.call(li,C,void 0))||ne||ye||Z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,We]of Z)this.g.setRequestHeader(De,We);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ci(this),this.u=!0,this.g.send(_),this.u=!1}catch(De){wa(this,De)}};function wa(_,C){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=C,_.m=5,Oi(_),Qs(_)}function Oi(_){_.A||(_.A=!0,qe(_,"complete"),qe(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,qe(this,"complete"),qe(this,"abort"),Qs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qs(this,!0)),yn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vi(this):this.bb())},t.bb=function(){Vi(this)};function Vi(_){if(_.h&&typeof l<"u"&&(!_.v[1]||Cs(_)!=4||_.Z()!=2)){if(_.u&&Cs(_)==4)et(_.Ea,0,_);else if(qe(_,"readystatechange"),Cs(_)==4){_.h=!1;try{const We=_.Z();e:switch(We){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var Z;if(!(Z=C)){var ne;if(ne=We===0){var ye=String(_.D).match(ni)[1]||null;!ye&&u.self&&u.self.location&&(ye=u.self.location.protocol.slice(0,-1)),ne=!ki.test(ye?ye.toLowerCase():"")}Z=ne}if(Z)qe(_,"complete"),qe(_,"success");else{_.m=6;try{var De=2<Cs(_)?_.g.statusText:""}catch{De=""}_.l=De+" ["+_.Z()+"]",Oi(_)}}finally{Qs(_)}}}}function Qs(_,C){if(_.g){ci(_);const Z=_.g,ne=_.v[0]?()=>{}:null;_.g=null,_.v=null,C||qe(_,"ready");try{Z.onreadystatechange=ne}catch{}}}function ci(_){_.I&&(u.clearTimeout(_.I),_.I=null)}t.isActive=function(){return!!this.g};function Cs(_){return _.g?_.g.readyState:0}t.Z=function(){try{return 2<Cs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(_){if(this.g){var C=this.g.responseText;return _&&C.indexOf(_)==0&&(C=C.substring(_.length)),Gt(C)}};function Ra(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function zl(_){const C={};_=(_.g&&2<=Cs(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let ne=0;ne<_.length;ne++){if(D(_[ne]))continue;var Z=J(_[ne]);const ye=Z[0];if(Z=Z[1],typeof Z!="string")continue;Z=Z.trim();const De=C[ye]||[];C[ye]=De,De.push(Z)}S(C,function(ne){return ne.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ui(_,C,Z){return Z&&Z.internalChannelParams&&Z.internalChannelParams[_]||C}function Mi(_){this.Aa=0,this.i=[],this.j=new Sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ui("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ui("baseRetryDelayMs",5e3,_),this.cb=ui("retryDelaySeedMs",1e4,_),this.Wa=ui("forwardChannelMaxRetries",2,_),this.wa=ui("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new lr(_&&_.concurrentRequestLimit),this.Da=new ai,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mi.prototype,t.la=8,t.G=1,t.connect=function(_,C,Z,ne){Ct(0),this.W=_,this.H=C||{},Z&&ne!==void 0&&(this.H.OSID=Z,this.H.OAID=ne),this.F=this.X,this.I=ja(this,null,this.W),Bi(this)};function So(_){if(Aa(_),_.G==3){var C=_.U++,Z=xs(_.I);if(En(Z,"SID",_.K),En(Z,"RID",C),En(Z,"TYPE","terminate"),di(_,Z),C=new cs(_,_.j,C),C.L=2,C.v=ri(xs(Z)),Z=!1,u.navigator&&u.navigator.sendBeacon)try{Z=u.navigator.sendBeacon(C.v.toString(),"")}catch{}!Z&&u.Image&&(new Image().src=C.v,Z=!0),Z||(C.g=Na(C.j,null),C.g.ea(C.v)),C.F=Date.now(),ei(C)}Ia(_)}function Li(_){_.g&&(hi(_),_.g.cancel(),_.g=null)}function Aa(_){Li(_),_.u&&(u.clearTimeout(_.u),_.u=null),Fi(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&u.clearTimeout(_.s),_.s=null)}function Bi(_){if(!Pi(_.h)&&!_.s){_.s=!0;var C=_.Ga;ce||re(),ie||(ce(),ie=!0),Ne.add(C,_),_.B=0}}function Ul(_,C){return Ii(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=C.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=pn(y(_.Ga,_,C),Io(_,_.B)),_.B++,!0)}t.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const ye=new cs(this,this.j,_);let De=this.o;if(this.S&&(De?(De=T(De),U(De,this.S)):De=this.S),this.m!==null||this.O||(ye.H=De,De=null),this.P)e:{for(var C=0,Z=0;Z<this.i.length;Z++){t:{var ne=this.i[Z];if("__data__"in ne.map&&(ne=ne.map.__data__,typeof ne=="string")){ne=ne.length;break t}ne=void 0}if(ne===void 0)break;if(C+=ne,4096<C){C=Z;break e}if(C===4096||Z===this.i.length-1){C=Z+1;break e}}C=1e3}else C=1e3;C=Ta(this,ye,C),Z=xs(this.I),En(Z,"RID",_),En(Z,"CVER",22),this.D&&En(Z,"X-HTTP-Session-Id",this.D),di(this,Z),De&&(this.O?C="headers="+encodeURIComponent(String(To(De)))+"&"+C:this.m&&Qn(Z,this.m,De)),ji(this.h,ye),this.Ua&&En(Z,"TYPE","init"),this.P?(En(Z,"$req",C),En(Z,"SID","null"),ye.T=!0,Ls(ye,Z,null)):Ls(ye,Z,C),this.G=2}}else this.G==3&&(_?Co(this,_):this.i.length==0||Pi(this.h)||Co(this))};function Co(_,C){var Z;C?Z=C.l:Z=_.U++;const ne=xs(_.I);En(ne,"SID",_.K),En(ne,"RID",Z),En(ne,"AID",_.T),di(_,ne),_.m&&_.o&&Qn(ne,_.m,_.o),Z=new cs(_,_.j,Z,_.B+1),_.m===null&&(Z.H=_.o),C&&(_.i=C.D.concat(_.i)),C=Ta(_,Z,1e3),Z.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),ji(_.h,Z),Ls(Z,ne,C)}function di(_,C){_.H&&H(_.H,function(Z,ne){En(C,ne,Z)}),_.l&&bo({},function(Z,ne){En(C,ne,Z)})}function Ta(_,C,Z){Z=Math.min(_.i.length,Z);var ne=_.l?y(_.l.Na,_.l,_):null;e:{var ye=_.i;let De=-1;for(;;){const We=["count="+Z];De==-1?0<Z?(De=ye[0].g,We.push("ofs="+De)):De=0:We.push("ofs="+De);let dn=!0;for(let Wn=0;Wn<Z;Wn++){let hn=ye[Wn].g;const Jn=ye[Wn].map;if(hn-=De,0>hn)De=Math.max(0,ye[Wn].g-100),dn=!1;else try{Ys(Jn,We,"req"+hn+"_")}catch{ne&&ne(Jn)}}if(dn){ne=We.join("&");break e}}}return _=_.i.splice(0,Z),C.D=_,ne}function Sa(_){if(!_.g&&!_.u){_.Y=1;var C=_.Fa;ce||re(),ie||(ce(),ie=!0),Ne.add(C,_),_.v=0}}function Po(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=pn(y(_.Fa,_),Io(_,_.v)),_.v++,!0)}t.Fa=function(){if(this.u=null,Ca(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=pn(y(this.ab,this),_)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),Li(this),Ca(this))};function hi(_){_.A!=null&&(u.clearTimeout(_.A),_.A=null)}function Ca(_){_.g=new cs(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var C=xs(_.qa);En(C,"RID","rpc"),En(C,"SID",_.K),En(C,"AID",_.T),En(C,"CI",_.F?"0":"1"),!_.F&&_.ja&&En(C,"TO",_.ja),En(C,"TYPE","xmlhttp"),di(_,C),_.m&&_.o&&Qn(C,_.m,_.o),_.L&&(_.g.I=_.L);var Z=_.g;_=_.ia,Z.L=1,Z.v=ri(xs(C)),Z.m=null,Z.P=!0,ar(Z,_)}t.Za=function(){this.C!=null&&(this.C=null,Li(this),Po(this),Ct(19))};function Fi(_){_.C!=null&&(u.clearTimeout(_.C),_.C=null)}function Pa(_,C){var Z=null;if(_.g==C){Fi(_),hi(_),_.g=null;var ne=2}else if(_o(_.h,C))Z=C.D,us(_.h,C),ne=1;else return;if(_.G!=0){if(C.o)if(ne==1){Z=C.m?C.m.length:0,C=Date.now()-C.F;var ye=_.B;ne=Tn(),qe(ne,new Dt(ne,Z)),Bi(_)}else Sa(_);else if(ye=C.s,ye==3||ye==0&&0<C.X||!(ne==1&&Ul(_,C)||ne==2&&Po(_)))switch(Z&&0<Z.length&&(C=_.h,C.i=C.i.concat(Z)),ye){case 1:mr(_,5);break;case 4:mr(_,10);break;case 3:mr(_,6);break;default:mr(_,2)}}}function Io(_,C){let Z=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(Z*=2),Z*C}function mr(_,C){if(_.j.info("Error code "+C),C==2){var Z=y(_.fb,_),ne=_.Xa;const ye=!ne;ne=new Hn(ne||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||si(ne,"https"),ri(ne),ye?oi(ne.toString(),Z):Bs(ne.toString(),Z)}else Ct(2);_.G=0,_.l&&_.l.sa(C),Ia(_),Aa(_)}t.fb=function(_){_?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Ia(_){if(_.G=0,_.ka=[],_.l){const C=vo(_.h);(C.length!=0||_.i.length!=0)&&(A(_.ka,C),A(_.ka,_.i),_.h.i.length=0,w(_.i),_.i.length=0),_.l.ra()}}function ja(_,C,Z){var ne=Z instanceof Hn?xs(Z):new Hn(Z);if(ne.g!="")C&&(ne.g=C+"."+ne.g),jr(ne,ne.s);else{var ye=u.location;ne=ye.protocol,C=C?C+"."+ye.hostname:ye.hostname,ye=+ye.port;var De=new Hn(null);ne&&si(De,ne),C&&(De.g=C),ye&&jr(De,ye),Z&&(De.l=Z),ne=De}return Z=_.D,C=_.ya,Z&&C&&En(ne,Z,C),En(ne,"VER",_.la),di(_,ne),ne}function Na(_,C,Z){if(C&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=_.Ca&&!_.pa?new yn(new Nr({eb:Z})):new yn(_.pa),C.Ha(_.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Da(){}t=Da.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zi(){}zi.prototype.g=function(_,C){return new ds(_,C)};function ds(_,C){He.call(this),this.g=new Mi(C),this.l=_,this.h=C&&C.messageUrlParams||null,_=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(_?_["X-WebChannel-Content-Type"]=C.messageContentType:_={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(_?_["X-WebChannel-Client-Profile"]=C.va:_={"X-WebChannel-Client-Profile":C.va}),this.g.S=_,(_=C&&C.Sb)&&!D(_)&&(this.g.m=_),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!D(C)&&(this.g.D=C,_=this.h,_!==null&&C in _&&(_=this.h,C in _&&delete _[C])),this.j=new Js(this)}E(ds,He),ds.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ds.prototype.close=function(){So(this.g)},ds.prototype.o=function(_){var C=this.g;if(typeof _=="string"){var Z={};Z.__data__=_,_=Z}else this.u&&(Z={},Z.__data__=Nt(_),_=Z);C.i.push(new va(C.Ya++,_)),C.G==3&&Bi(C)},ds.prototype.N=function(){this.g.l=null,delete this.j,So(this.g),delete this.g,ds.aa.N.call(this)};function ka(_){Wt.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var C=_.__sm__;if(C){e:{for(const Z in C){_=Z;break e}_=void 0}(this.i=_)&&(_=this.i,C=C!==null&&_ in C?C[_]:void 0),this.data=C}else this.data=_}E(ka,Wt);function Oa(){On.call(this),this.status=1}E(Oa,On);function Js(_){this.g=_}E(Js,Da),Js.prototype.ua=function(){qe(this.g,"a")},Js.prototype.ta=function(_){qe(this.g,new ka(_))},Js.prototype.sa=function(_){qe(this.g,new Oa)},Js.prototype.ra=function(){qe(this.g,"b")},zi.prototype.createWebChannel=zi.prototype.g,ds.prototype.send=ds.prototype.o,ds.prototype.open=ds.prototype.m,ds.prototype.close=ds.prototype.close,createWebChannelTransport=function(){return new zi},getStatEventTarget=function(){return Tn()},Event$1=jn,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pr.NO_ERROR=0,Pr.TIMEOUT=8,Pr.HTTP_ERROR=6,ErrorCode=Pr,or.COMPLETE="complete",EventType=or,Dn.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",He.prototype.listen=He.prototype.K,WebChannel=Dn,yn.prototype.listenOnce=yn.prototype.L,yn.prototype.getLastError=yn.prototype.Ka,yn.prototype.getLastErrorCode=yn.prototype.Ba,yn.prototype.getStatus=yn.prototype.Z,yn.prototype.getResponseJson=yn.prototype.Oa,yn.prototype.getResponseText=yn.prototype.oa,yn.prototype.send=yn.prototype.ea,yn.prototype.setWithCredentials=yn.prototype.Ha,XhrIo=yn}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F="@firebase/firestore",M="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let User$1=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};User$1.UNAUTHENTICATED=new User$1(null),User$1.GOOGLE_CREDENTIALS=new User$1("google-credentials-uid"),User$1.FIRST_PARTY=new User$1("first-party-uid"),User$1.MOCK_USER=new User$1("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O.logLevel}function __PRIVATE_logDebug(t,...e){if(O.logLevel<=LogLevel.DEBUG){const n=e.map(__PRIVATE_argToString);O.debug(`Firestore (${x}): ${t}`,...n)}}function __PRIVATE_logError(t,...e){if(O.logLevel<=LogLevel.ERROR){const n=e.map(__PRIVATE_argToString);O.error(`Firestore (${x}): ${t}`,...n)}}function __PRIVATE_logWarn(t,...e){if(O.logLevel<=LogLevel.WARN){const n=e.map(__PRIVATE_argToString);O.warn(`Firestore (${x}): ${t}`,...n)}}function __PRIVATE_argToString(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,__PRIVATE__fail(t,s,n)}function __PRIVATE__fail(t,e,n){let s=`FIRESTORE (${x}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw __PRIVATE_logError(s),new Error(s)}function __PRIVATE_hardAssert(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||__PRIVATE__fail(e,i,s)}function __PRIVATE_debugCast(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(User$1.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User$1.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){__PRIVATE_hardAssert(this.o===void 0,42304);let s=this.i;const i=d=>this.i!==s?(s=this.i,n(d)):Promise.resolve();let o=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new __PRIVATE_Deferred,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},u=d=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new __PRIVATE_Deferred)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(__PRIVATE_hardAssert(typeof s.accessToken=="string",31837,{l:s}),new __PRIVATE_OAuthToken(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User$1(e)}}class __PRIVATE_FirstPartyToken{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=User$1.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(User$1.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){__PRIVATE_hardAssert(this.o===void 0,3512);const s=o=>{o.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>s(o))};const i=o=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(__PRIVATE_hardAssert(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new AppCheckToken(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=__PRIVATE_randomBytes(40);for(let o=0;o<i.length;++o)s.length<20&&i[o]<n&&(s+=e.charAt(i[o]%62))}return s}}function __PRIVATE_primitiveComparator(t,e){return t<e?-1:t>e?1:0}function __PRIVATE_compareUtf8Strings(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),i=e.codePointAt(n);if(s!==i){if(s<128&&i<128)return __PRIVATE_primitiveComparator(s,i);{const o=__PRIVATE_newTextEncoder(),l=__PRIVATE_compareByteArrays$1(o.encode(__PRIVATE_getUtf8SafeSubstring(t,n)),o.encode(__PRIVATE_getUtf8SafeSubstring(e,n)));return l!==0?l:__PRIVATE_primitiveComparator(s,i)}}n+=s>65535?2:1}return __PRIVATE_primitiveComparator(t.length,e.length)}function __PRIVATE_getUtf8SafeSubstring(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function __PRIVATE_compareByteArrays$1(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return __PRIVATE_primitiveComparator(t[n],e[n]);return __PRIVATE_primitiveComparator(t.length,e.length)}function __PRIVATE_arrayEquals(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=-62135596800,L=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*L);return new Timestamp(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<B)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-B;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k="__name__";class BasePath{constructor(e,n,s){n===void 0?n=0:n>e.length&&fail(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&fail(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const o=BasePath.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return __PRIVATE_primitiveComparator(e.length,n.length)}static compareSegments(e,n){const s=BasePath.isNumericId(e),i=BasePath.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(n)):__PRIVATE_compareUtf8Strings(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,n,s){return new ResourcePath(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new ResourcePath(n)}static emptyPath(){return new ResourcePath([])}}const q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,n,s){return new FieldPath$1(e,n,s)}static isValidIdentifier(e){return q.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k}static keyField(){return new FieldPath$1([k])}static fromServerFormat(e){const n=[];let s="",i=0;const o=()=>{if(s.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new FirestoreError(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new FirestoreError(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=d,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(s+=u,i++):(o(),i++)}if(o(),l)throw new FirestoreError(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(n)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ResourcePath.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=SnapshotVersion.fromTimestamp(s===1e9?new Timestamp(n+1,0):new Timestamp(n,s));return new IndexOffset(i,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(t){return new IndexOffset(t.readTime,t.key,Q)}class IndexOffset{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),Q)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),Q)}}function __PRIVATE_indexOffsetComparator(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=DocumentKey.comparator(t.documentKey,e.documentKey),n!==0?n:__PRIVATE_primitiveComparator(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==$)throw t;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((s,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof PersistencePromise?n:PersistencePromise.resolve(n)}catch(n){return PersistencePromise.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):PersistencePromise.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):PersistencePromise.reject(n)}static resolve(e){return new PersistencePromise((n,s)=>{n(e)})}static reject(e){return new PersistencePromise((n,s)=>{s(e)})}static waitFor(e){return new PersistencePromise((n,s)=>{let i=0,o=0,l=!1;e.forEach(u=>{++i,u.next(()=>{++o,l&&o===i&&n()},d=>s(d))}),l=!0,o===i&&n()})}static or(e){let n=PersistencePromise.resolve(!1);for(const s of e)n=n.next(i=>i?PersistencePromise.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,o)=>{s.push(n.call(this,i,o))}),this.waitFor(s)}static mapArray(e,n){return new PersistencePromise((s,i)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(m=>{l[f]=m,++u,u===o&&s(l)},m=>i(m))}})}static doWhile(e,n){return new PersistencePromise((s,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):s()};o()})}}function __PRIVATE_getAndroidVersion(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function __PRIVATE_isIndexedDbTransactionError(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}__PRIVATE_ListenSequence.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G=-1;function __PRIVATE_isNullOrUndefined(t){return t==null}function __PRIVATE_isNegativeZero(t){return t===0&&1/t==-1/0}function isSafeInteger(t){return typeof t=="number"&&Number.isInteger(t)&&!__PRIVATE_isNegativeZero(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z="";function __PRIVATE_encodeResourcePath(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(t.get(n),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case z:n+="";break;default:n+=o}}return n}function __PRIVATE_encodeSeparator(t){return t+z+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function forEach(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function isEmpty(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,n){this.comparator=e,this.root=n||LLRBNode.EMPTY}insert(e,n){return new SortedMap(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?s(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,n,s,i,o){this.key=e,this.value=n,this.color=s??LLRBNode.RED,this.left=i??LLRBNode.EMPTY,this.right=o??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,o){return new LLRBNode(e??this.key,n??this.value,s??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const o=s(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,s),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return LLRBNode.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,n,s,i,o){return this}insert(e,n,s){return new LLRBNode(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=s.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new SortedSet(this.comparator);return n.data=e,n}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let n=new SortedSet(FieldPath$1.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new FieldMask(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+o):o}}(e);return new ByteString(n)}static fromUint8Array(e){const n=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new ByteString(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const it=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(t){if(__PRIVATE_hardAssert(!!t,39018),typeof t=="string"){let e=0;const n=it.exec(t);if(__PRIVATE_hardAssert(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(t.seconds),nanos:__PRIVATE_normalizeNumber(t.nanos)}}function __PRIVATE_normalizeNumber(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function __PRIVATE_normalizeByteString(t){return typeof t=="string"?ByteString.fromBase64String(t):ByteString.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="server_timestamp",ot="__type__",_t="__previous_value__",at="__local_write_time__";function __PRIVATE_isServerTimestamp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ot])===null||n===void 0?void 0:n.stringValue)===st}function __PRIVATE_getPreviousValue(t){const e=t.mapValue.fields[_t];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(t){const e=__PRIVATE_normalizeTimestamp(t.mapValue.fields[at].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,n,s,i,o,l,u,d,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=m}}const ut="(default)";class DatabaseId{constructor(e,n){this.projectId=e,this.database=n||ut}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===ut}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="__type__",lt="__max__",ht={mapValue:{}},Pt="__vector__",Tt="value";function __PRIVATE_typeOrder(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?__PRIVATE_isServerTimestamp(t)?4:__PRIVATE_isMaxValue(t)?9007199254740991:__PRIVATE_isVectorValue(t)?10:11:fail(28295,{value:t})}function __PRIVATE_valueEquals(t,e){if(t===e)return!0;const n=__PRIVATE_typeOrder(t);if(n!==__PRIVATE_typeOrder(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(t).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=__PRIVATE_normalizeTimestamp(i.timestampValue),u=__PRIVATE_normalizeTimestamp(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return __PRIVATE_normalizeByteString(i.bytesValue).isEqual(__PRIVATE_normalizeByteString(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return __PRIVATE_normalizeNumber(i.geoPointValue.latitude)===__PRIVATE_normalizeNumber(o.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(i.geoPointValue.longitude)===__PRIVATE_normalizeNumber(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return __PRIVATE_normalizeNumber(i.integerValue)===__PRIVATE_normalizeNumber(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=__PRIVATE_normalizeNumber(i.doubleValue),u=__PRIVATE_normalizeNumber(o.doubleValue);return l===u?__PRIVATE_isNegativeZero(l)===__PRIVATE_isNegativeZero(u):isNaN(l)&&isNaN(u)}return!1}(t,e);case 9:return __PRIVATE_arrayEquals(t.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},u=o.mapValue.fields||{};if(__PRIVATE_objectSize(l)!==__PRIVATE_objectSize(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!__PRIVATE_valueEquals(l[d],u[d])))return!1;return!0}(t,e);default:return fail(52216,{left:t})}}function __PRIVATE_arrayValueContains(t,e){return(t.values||[]).find(n=>__PRIVATE_valueEquals(n,e))!==void 0}function __PRIVATE_valueCompare(t,e){if(t===e)return 0;const n=__PRIVATE_typeOrder(t),s=__PRIVATE_typeOrder(e);if(n!==s)return __PRIVATE_primitiveComparator(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(t.booleanValue,e.booleanValue);case 2:return function(o,l){const u=__PRIVATE_normalizeNumber(o.integerValue||o.doubleValue),d=__PRIVATE_normalizeNumber(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return __PRIVATE_compareTimestamps(t.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(t),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(t.stringValue,e.stringValue);case 6:return function(o,l){const u=__PRIVATE_normalizeByteString(o),d=__PRIVATE_normalizeByteString(l);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const m=__PRIVATE_primitiveComparator(u[f],d[f]);if(m!==0)return m}return __PRIVATE_primitiveComparator(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const u=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(o.latitude),__PRIVATE_normalizeNumber(l.latitude));return u!==0?u:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(o.longitude),__PRIVATE_normalizeNumber(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(t.arrayValue,e.arrayValue);case 10:return function(o,l){var u,d,f,m;const g=o.fields||{},y=l.fields||{},v=(u=g[Tt])===null||u===void 0?void 0:u.arrayValue,E=(d=y[Tt])===null||d===void 0?void 0:d.arrayValue,w=__PRIVATE_primitiveComparator(((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0,((m=E==null?void 0:E.values)===null||m===void 0?void 0:m.length)||0);return w!==0?w:__PRIVATE_compareArrays(v,E)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===ht.mapValue&&l===ht.mapValue)return 0;if(o===ht.mapValue)return 1;if(l===ht.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=l.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let g=0;g<d.length&&g<m.length;++g){const y=__PRIVATE_compareUtf8Strings(d[g],m[g]);if(y!==0)return y;const v=__PRIVATE_valueCompare(u[d[g]],f[m[g]]);if(v!==0)return v}return __PRIVATE_primitiveComparator(d.length,m.length)}(t.mapValue,e.mapValue);default:throw fail(23264,{Pe:n})}}function __PRIVATE_compareTimestamps(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return __PRIVATE_primitiveComparator(t,e);const n=__PRIVATE_normalizeTimestamp(t),s=__PRIVATE_normalizeTimestamp(e),i=__PRIVATE_primitiveComparator(n.seconds,s.seconds);return i!==0?i:__PRIVATE_primitiveComparator(n.nanos,s.nanos)}function __PRIVATE_compareArrays(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const o=__PRIVATE_valueCompare(n[i],s[i]);if(o)return o}return __PRIVATE_primitiveComparator(n.length,s.length)}function canonicalId(t){return __PRIVATE_canonifyValue(t)}function __PRIVATE_canonifyValue(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=__PRIVATE_normalizeTimestamp(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return __PRIVATE_normalizeByteString(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return DocumentKey.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const o of n.values||[])i?i=!1:s+=",",s+=__PRIVATE_canonifyValue(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const l of s)o?o=!1:i+=",",i+=`${l}:${__PRIVATE_canonifyValue(n.fields[l])}`;return i+"}"}(t.mapValue):fail(61005,{value:t})}function __PRIVATE_estimateByteSize(t){switch(__PRIVATE_typeOrder(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(t);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*t.stringValue.length;case 6:return __PRIVATE_normalizeByteString(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,o)=>i+__PRIVATE_estimateByteSize(o),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return forEach(s.fields,(o,l)=>{i+=o.length+__PRIVATE_estimateByteSize(l)}),i}(t.mapValue);default:throw fail(13486,{value:t})}}function __PRIVATE_refValue(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function isInteger$1(t){return!!t&&"integerValue"in t}function isArray$1(t){return!!t&&"arrayValue"in t}function __PRIVATE_isNullValue(t){return!!t&&"nullValue"in t}function __PRIVATE_isNanValue(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function __PRIVATE_isMapValue(t){return!!t&&"mapValue"in t}function __PRIVATE_isVectorValue(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ct])===null||n===void 0?void 0:n.stringValue)===Pt}function __PRIVATE_deepClone(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return forEach(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=__PRIVATE_deepClone(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=__PRIVATE_deepClone(t.arrayValue.values[n]);return e}return Object.assign({},t)}function __PRIVATE_isMaxValue(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!__PRIVATE_isMapValue(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(n)}setAll(e){let n=FieldPath$1.emptyPath(),s={},i=[];e.forEach((l,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,s,i),s={},i=[],n=u.popLast()}l?s[u.lastSegment()]=__PRIVATE_deepClone(l):i.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,s,i)}delete(e){const n=this.field(e.popLast());__PRIVATE_isMapValue(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];__PRIVATE_isMapValue(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){forEach(n,(i,o)=>e[i]=o);for(const i of s)delete e[i]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(t){const e=[];return forEach(t.fields,(n,s)=>{const i=new FieldPath$1([n]);if(__PRIVATE_isMapValue(s)){const o=__PRIVATE_extractFieldMask(s.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,n,s,i,o,l,u){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,n,s,i){return new MutableDocument(e,1,n,SnapshotVersion.min(),s,i,0)}static newNoDocument(e,n){return new MutableDocument(e,2,n,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,n){return new MutableDocument(e,3,n,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,n){this.position=e,this.inclusive=n}}function __PRIVATE_boundCompareToDocument(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const o=e[i],l=t.position[i];if(o.field.isKeyField()?s=DocumentKey.comparator(DocumentKey.fromName(l.referenceValue),n.key):s=__PRIVATE_valueCompare(l,n.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function __PRIVATE_boundEquals(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!__PRIVATE_valueEquals(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,n="asc"){this.field=e,this.dir=n}}function __PRIVATE_orderByEquals(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new __PRIVATE_KeyFieldFilter(e,n,s):n==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,s):n==="in"?new __PRIVATE_InFilter(e,s):n==="not-in"?new __PRIVATE_NotInFilter(e,s):n==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,s):new FieldFilter(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new __PRIVATE_KeyFieldInFilter(e,s):new __PRIVATE_KeyFieldNotInFilter(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(n,this.value)):n!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(n)&&this.matchesComparison(__PRIVATE_valueCompare(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new CompositeFilter(e,n)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(t){return t.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(t){return __PRIVATE_compositeFilterIsFlat(t)&&__PRIVATE_compositeFilterIsConjunction(t)}function __PRIVATE_compositeFilterIsFlat(t){for(const e of t.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(t){if(t instanceof FieldFilter)return t.field.canonicalString()+t.op.toString()+canonicalId(t.value);if(__PRIVATE_compositeFilterIsFlatConjunction(t))return t.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=t.filters.map(n=>__PRIVATE_canonifyFilter(n)).join(",");return`${t.op}(${e})`}}function __PRIVATE_filterEquals(t,e){return t instanceof FieldFilter?function(s,i){return i instanceof FieldFilter&&s.op===i.op&&s.field.isEqual(i.field)&&__PRIVATE_valueEquals(s.value,i.value)}(t,e):t instanceof CompositeFilter?function(s,i){return i instanceof CompositeFilter&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((o,l,u)=>o&&__PRIVATE_filterEquals(l,i.filters[u]),!0):!1}(t,e):void fail(19439)}function __PRIVATE_stringifyFilter(t){return t instanceof FieldFilter?function(n){return`${n.field.canonicalString()} ${n.op} ${canonicalId(n.value)}`}(t):t instanceof CompositeFilter?function(n){return n.op.toString()+" {"+n.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(t):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,n,s){super(e,n,s),this.key=DocumentKey.fromName(s.referenceValue)}matches(e){const n=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(n)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,n){super(e,"in",n),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,n){super(e,"not-in",n),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>DocumentKey.fromName(s.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return isArray$1(n)&&__PRIVATE_arrayValueContains(n.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,n)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,n){super(e,"not-in",n)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,n)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!isArray$1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>__PRIVATE_arrayValueContains(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,n=null,s=[],i=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=o,this.startAt=l,this.endAt=u,this.Ie=null}}function __PRIVATE_newTarget(t,e=null,n=[],s=[],i=null,o=null,l=null){return new __PRIVATE_TargetImpl(t,e,n,s,i,o,l)}function __PRIVATE_canonifyTarget(t){const e=__PRIVATE_debugCast(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>__PRIVATE_canonifyFilter(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(o){return o.field.canonicalString()+o.dir}(s)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>canonicalId(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>canonicalId(s)).join(",")),e.Ie=n}return e.Ie}function __PRIVATE_targetEquals(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!__PRIVATE_orderByEquals(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!__PRIVATE_filterEquals(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(t.startAt,e.startAt)&&__PRIVATE_boundEquals(t.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(t){return DocumentKey.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,n=null,s=[],i=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(t,e,n,s,i,o,l,u){return new __PRIVATE_QueryImpl(t,e,n,s,i,o,l,u)}function __PRIVATE_newQueryForPath(t){return new __PRIVATE_QueryImpl(t)}function __PRIVATE_queryMatchesAllDocuments(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(t){return t.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(t){const e=__PRIVATE_debugCast(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new SortedSet(FieldPath$1.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new OrderBy(o,s))}),n.has(FieldPath$1.keyField().canonicalString())||e.Ee.push(new OrderBy(FieldPath$1.keyField(),s))}return e.Ee}function __PRIVATE_queryToTarget(t){const e=__PRIVATE_debugCast(t);return e.de||(e.de=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(t))),e.de}function __PRIVATE__queryToTarget(t,e){if(t.limitType==="F")return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new OrderBy(i.field,o)});const n=t.endAt?new Bound(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Bound(t.startAt.position,t.startAt.inclusive):null;return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function __PRIVATE_queryWithAddedFilter(t,e){const n=t.filters.concat([e]);return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function __PRIVATE_queryWithLimit(t,e,n){return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function __PRIVATE_queryEquals(t,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(t),__PRIVATE_queryToTarget(e))&&t.limitType===e.limitType}function __PRIVATE_canonifyQuery(t){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(t))}|lt:${t.limitType}`}function __PRIVATE_stringifyQuery(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>__PRIVATE_stringifyFilter(i)).join(", ")}]`),__PRIVATE_isNullOrUndefined(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>canonicalId(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>canonicalId(i)).join(",")),`Target(${s})`}(__PRIVATE_queryToTarget(t))}; limitType=${t.limitType})`}function __PRIVATE_queryMatches(t,e){return e.isFoundDocument()&&function(s,i){const o=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):DocumentKey.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)}(t,e)&&function(s,i){for(const o of __PRIVATE_queryNormalizedOrderBy(s))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const o of s.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(l,u,d){const f=__PRIVATE_boundCompareToDocument(l,u,d);return l.inclusive?f<=0:f<0}(s.startAt,__PRIVATE_queryNormalizedOrderBy(s),i)||s.endAt&&!function(l,u,d){const f=__PRIVATE_boundCompareToDocument(l,u,d);return l.inclusive?f>=0:f>0}(s.endAt,__PRIVATE_queryNormalizedOrderBy(s),i))}(t,e)}function __PRIVATE_queryCollectionGroup(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function __PRIVATE_newQueryComparator(t){return(e,n)=>{let s=!1;for(const i of __PRIVATE_queryNormalizedOrderBy(t)){const o=__PRIVATE_compareDocs(i,e,n);if(o!==0)return o;s=s||i.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(t,e,n){const s=t.field.isKeyField()?DocumentKey.comparator(e.key,n.key):function(o,l,u){const d=l.data.field(o),f=u.data.field(o);return d!==null&&f!==null?__PRIVATE_valueCompare(d,f):fail(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return fail(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,o]of s)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,(n,s)=>{for(const[i,o]of s)e(i,o)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return dt}const At=new SortedMap(DocumentKey.comparator);function documentMap(...t){let e=At;for(const n of t)e=e.insert(n.key,n);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(t){let e=At;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(t=>t.toString(),(t,e)=>t.isEqual(e))}const Rt=new SortedMap(DocumentKey.comparator),Vt=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...t){let e=Vt;for(const n of t)e=e.add(n);return e}const mt=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return mt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(t){return{integerValue:""+t}}function toNumber(t,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(t,e,n){return t instanceof __PRIVATE_ServerTimestampTransform?function(i,o){const l={fields:{[ot]:{stringValue:st},[at]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&__PRIVATE_isServerTimestamp(o)&&(o=__PRIVATE_getPreviousValue(o)),o&&(l.fields[_t]=o),{mapValue:l}}(n,e):t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):function(i,o){const l=__PRIVATE_computeTransformOperationBaseValue(i,o),u=asNumber$1(l)+asNumber$1(i.Re);return isInteger$1(l)&&isInteger$1(i.Re)?__PRIVATE_toInteger(u):__PRIVATE_toDouble(i.serializer,u)}(t,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(t,e,n){return t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):n}function __PRIVATE_computeTransformOperationBaseValue(t,e){return t instanceof __PRIVATE_NumericIncrementTransformOperation?function(s){return isInteger$1(s)||function(o){return!!o&&"doubleValue"in o}(s)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(t,e){const n=__PRIVATE_coercedFieldValuesArray(e);for(const s of t.elements)n.some(i=>__PRIVATE_valueEquals(i,s))||n.push(s);return{arrayValue:{values:n}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(t,e){let n=__PRIVATE_coercedFieldValuesArray(e);for(const s of t.elements)n=n.filter(i=>!__PRIVATE_valueEquals(i,s));return{arrayValue:{values:n}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,n){super(),this.serializer=e,this.Re=n}}function asNumber$1(t){return __PRIVATE_normalizeNumber(t.integerValue||t.doubleValue)}function __PRIVATE_coercedFieldValuesArray(t){return isArray$1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldTransform{constructor(e,n){this.field=e,this.transform=n}}function __PRIVATE_fieldTransformEquals(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof __PRIVATE_ArrayUnionTransformOperation&&i instanceof __PRIVATE_ArrayUnionTransformOperation||s instanceof __PRIVATE_ArrayRemoveTransformOperation&&i instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(s.elements,i.elements,__PRIVATE_valueEquals):s instanceof __PRIVATE_NumericIncrementTransformOperation&&i instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(s.Re,i.Re):s instanceof __PRIVATE_ServerTimestampTransform&&i instanceof __PRIVATE_ServerTimestampTransform}(t.transform,e.transform)}class MutationResult{constructor(e,n){this.version=e,this.transformResults=n}}class Precondition{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new __PRIVATE_DeleteMutation(t.key,Precondition.none()):new __PRIVATE_SetMutation(t.key,t.data,Precondition.none());{const n=t.data,s=ObjectValue.empty();let i=new SortedSet(FieldPath$1.comparator);for(let o of e.fields)if(!i.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?s.delete(o):s.set(o,l),i=i.add(o)}return new __PRIVATE_PatchMutation(t.key,s,new FieldMask(i.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(t,e,n){t instanceof __PRIVATE_SetMutation?function(i,o,l){const u=i.value.clone(),d=__PRIVATE_serverTransformResults(i.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(t,e,n):t instanceof __PRIVATE_PatchMutation?function(i,o,l){if(!__PRIVATE_preconditionIsValidForDocument(i.precondition,o))return void o.convertToUnknownDocument(l.version);const u=__PRIVATE_serverTransformResults(i.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(__PRIVATE_getPatch(i)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function __PRIVATE_mutationApplyToLocalView(t,e,n,s){return t instanceof __PRIVATE_SetMutation?function(o,l,u,d){if(!__PRIVATE_preconditionIsValidForDocument(o.precondition,l))return u;const f=o.value.clone(),m=__PRIVATE_localTransformResults(o.fieldTransforms,d,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(t,e,n,s):t instanceof __PRIVATE_PatchMutation?function(o,l,u,d){if(!__PRIVATE_preconditionIsValidForDocument(o.precondition,l))return u;const f=__PRIVATE_localTransformResults(o.fieldTransforms,d,l),m=l.data;return m.setAll(__PRIVATE_getPatch(o)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,s):function(o,l,u){return __PRIVATE_preconditionIsValidForDocument(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(t,e,n)}function __PRIVATE_mutationExtractBaseValue(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),o=__PRIVATE_computeTransformOperationBaseValue(s.transform,i||null);o!=null&&(n===null&&(n=ObjectValue.empty()),n.set(s.field,o))}return n||null}function __PRIVATE_mutationEquals(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&__PRIVATE_arrayEquals(s,i,(o,l)=>__PRIVATE_fieldTransformEquals(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,n,s,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function __PRIVATE_serverTransformResults(t,e,n){const s=new Map;__PRIVATE_hardAssert(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){const o=t[i],l=o.transform,u=e.data.field(o.field);s.set(o.field,__PRIVATE_applyTransformOperationToRemoteDocument(l,u,n[i]))}return s}function __PRIVATE_localTransformResults(t,e,n){const s=new Map;for(const i of t){const o=i.transform,l=n.data.field(i.field);s.set(i.field,__PRIVATE_applyTransformOperationToLocalView(o,l,e))}return s}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(o,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=__PRIVATE_mutationApplyToLocalView(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=__PRIVATE_mutationApplyToLocalView(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=__PRIVATE_newMutationMap();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=n.has(i.key)?null:u;const d=__PRIVATE_calculateOverlayMutation(l,u);d!==null&&s.set(i.key,d),l.isValidDocument()||l.convertToNoDocument(SnapshotVersion.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(n,s)=>__PRIVATE_mutationEquals(n,s))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(n,s)=>__PRIVATE_mutationEquals(n,s))}}class MutationBatchResult{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){__PRIVATE_hardAssert(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let i=function(){return Rt}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,s[l].version);return new MutationBatchResult(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,gt;function __PRIVATE_isPermanentError(t){switch(t){case N.OK:return fail(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return fail(15467,{code:t})}}function __PRIVATE_mapCodeFromRpcCode(t){if(t===void 0)return __PRIVATE_logError("GRPC error has no .code"),N.UNKNOWN;switch(t){case ft.OK:return N.OK;case ft.CANCELLED:return N.CANCELLED;case ft.UNKNOWN:return N.UNKNOWN;case ft.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ft.INTERNAL:return N.INTERNAL;case ft.UNAVAILABLE:return N.UNAVAILABLE;case ft.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ft.NOT_FOUND:return N.NOT_FOUND;case ft.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ft.ABORTED:return N.ABORTED;case ft.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ft.DATA_LOSS:return N.DATA_LOSS;default:return fail(39323,{code:t})}}(gt=ft||(ft={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(t){const e=__PRIVATE_newTextEncoder().encode(t),n=new Md5;return n.update(e),new Uint8Array(n.digest())}function __PRIVATE_get64BitUints(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Integer([n,s],0),new Integer([i,o],0)]}class BloomFilter{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${n}`);if(s<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Integer.fromNumber(this.pe)}we(e,n,s){let i=e.add(n.multiply(Integer.fromNumber(s)));return i.compare(yt)===1&&(i=new Integer([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=__PRIVATE_getMd5HashValue(e),[s,i]=__PRIVATE_get64BitUints(n);for(let o=0;o<this.hashCount;o++){const l=this.we(s,i,o);if(!this.be(l))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new BloomFilter(o,i,n);return s.forEach(u=>l.insert(u)),l}insert(e){if(this.pe===0)return;const n=__PRIVATE_getMd5HashValue(e),[s,i]=__PRIVATE_get64BitUints(n);for(let o=0;o<this.hashCount;o++){const l=this.we(s,i,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,n,s,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new RemoteEvent(SnapshotVersion.min(),i,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,n,s,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new TargetChange(s,n,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,n,s,i){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=i}}class __PRIVATE_ExistenceFilterChange{constructor(e,n){this.targetId=e,this.Ce=n}}class __PRIVATE_WatchTargetChange{constructor(e,n,s=ByteString.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class __PRIVATE_TargetState{constructor(){this.Fe=0,this.Me=__PRIVATE_snapshotChangesMap(),this.xe=ByteString.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=__PRIVATE_documentKeySet(),n=__PRIVATE_documentKeySet(),s=__PRIVATE_documentKeySet();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:fail(38017,{changeType:o})}}),new TargetChange(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=__PRIVATE_snapshotChangesMap()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,__PRIVATE_hardAssert(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.ze=e,this.je=new Map,this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:fail(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,i)=>{this.it(i)&&n(i)})}ot(e){const n=e.targetId,s=e.Ce.count,i=this._t(n);if(i){const o=i.target;if(__PRIVATE_targetIsDocumentTarget(o))if(s===0){const l=new DocumentKey(o.path);this.tt(n,l,MutableDocument.newNoDocument(l,SnapshotVersion.min()))}else __PRIVATE_hardAssert(s===1,20013,{expectedCount:s});else{const l=this.ut(n);if(l!==s){const u=this.ct(e),d=u?this.lt(u,e,l):1;if(d!==0){this.st(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:o=0}=n;let l,u;try{l=__PRIVATE_normalizeByteString(s).toUint8Array()}catch(d){if(d instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new BloomFilter(l,i,o)}catch(d){return __PRIVATE_logWarn(d instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.pe===0?null:u}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let i=0;return s.forEach(o=>{const l=this.ze.Pt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.tt(n,o,null),i++)}),i}It(e){const n=new Map;this.je.forEach((o,l)=>{const u=this._t(l);if(u){if(o.current&&__PRIVATE_targetIsDocumentTarget(u.target)){const d=new DocumentKey(u.target.path);this.Et(d).has(l)||this.dt(l,d)||this.tt(l,d,MutableDocument.newNoDocument(d,e))}o.Le&&(n.set(l,o.qe()),o.Qe())}});let s=__PRIVATE_documentKeySet();this.Ye.forEach((o,l)=>{let u=!0;l.forEachWhile(d=>{const f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(s=s.add(o))}),this.He.forEach((o,l)=>l.setReadTime(e));const i=new RemoteEvent(e,n,this.Ze,this.He,s);return this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator),i}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new __PRIVATE_TargetState,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new SortedSet(__PRIVATE_primitiveComparator),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new __PRIVATE_TargetState),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const wt={asc:"ASCENDING",desc:"DESCENDING"},bt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},St={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function __PRIVATE_toInt32Proto(t,e){return t.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(t,e){return toTimestamp(t,e.toTimestamp())}function __PRIVATE_fromVersion(t){return __PRIVATE_hardAssert(!!t,49232),SnapshotVersion.fromTimestamp(function(n){const s=__PRIVATE_normalizeTimestamp(n);return new Timestamp(s.seconds,s.nanos)}(t))}function __PRIVATE_toResourceName(t,e){return __PRIVATE_toResourcePath(t,e).canonicalString()}function __PRIVATE_toResourcePath(t,e){const n=function(i){return new ResourcePath(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function __PRIVATE_fromResourceName(t){const e=ResourcePath.fromString(t);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(t,e){return __PRIVATE_toResourceName(t.databaseId,e.path)}function fromName(t,e){const n=__PRIVATE_fromResourceName(e);if(n.get(1)!==t.databaseId.projectId)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(n))}function __PRIVATE_toQueryPath(t,e){return __PRIVATE_toResourceName(t.databaseId,e)}function __PRIVATE_fromQueryPath(t){const e=__PRIVATE_fromResourceName(t);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(t){return new ResourcePath(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(t){return __PRIVATE_hardAssert(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function __PRIVATE_toMutationDocument(t,e,n){return{name:__PRIVATE_toName(t,e),fields:n.value.mapValue.fields}}function __PRIVATE_fromWatchChange(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:fail(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(__PRIVATE_hardAssert(m===void 0||typeof m=="string",58123),ByteString.fromBase64String(m||"")):(__PRIVATE_hardAssert(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),ByteString.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(f){const m=f.code===void 0?N.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(f.code);return new FirestoreError(m,f.message||"")}(l);n=new __PRIVATE_WatchTargetChange(s,i,o,u||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=fromName(t,s.document.name),o=__PRIVATE_fromVersion(s.document.updateTime),l=s.document.createTime?__PRIVATE_fromVersion(s.document.createTime):SnapshotVersion.min(),u=new ObjectValue({mapValue:{fields:s.document.fields}}),d=MutableDocument.newFoundDocument(i,o,l,u),f=s.targetIds||[],m=s.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=fromName(t,s.document),o=s.readTime?__PRIVATE_fromVersion(s.readTime):SnapshotVersion.min(),l=MutableDocument.newNoDocument(i,o),u=s.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=fromName(t,s.document),o=s.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange([],o,i,null)}else{if(!("filter"in e))return fail(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:o}=s,l=new ExistenceFilter(i,o),u=s.targetId;n=new __PRIVATE_ExistenceFilterChange(u,l)}}return n}function toMutation(t,e){let n;if(e instanceof __PRIVATE_SetMutation)n={update:__PRIVATE_toMutationDocument(t,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)n={delete:__PRIVATE_toName(t,e.key)};else if(e instanceof __PRIVATE_PatchMutation)n={update:__PRIVATE_toMutationDocument(t,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{ft:e.type});n={verify:__PRIVATE_toName(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(o,l){const u=l.transform;if(u instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:l.field.canonicalString(),increment:u.Re};throw fail(20930,{transform:l.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:fail(27497)}(t,e.precondition)),n}function __PRIVATE_fromWriteResults(t,e){return t&&t.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),t.map(n=>function(i,o){let l=i.updateTime?__PRIVATE_fromVersion(i.updateTime):__PRIVATE_fromVersion(o);return l.isEqual(SnapshotVersion.min())&&(l=__PRIVATE_fromVersion(o)),new MutationResult(l,i.transformResults||[])}(n,e))):[]}function __PRIVATE_toDocumentsTarget(t,e){return{documents:[__PRIVATE_toQueryPath(t,e.path)]}}function __PRIVATE_toQueryTarget(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=__PRIVATE_toQueryPath(t,i);const o=function(f){if(f.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(m=>function(y){return{field:__PRIVATE_toFieldPathReference(y.field),direction:__PRIVATE_toDirection(y.dir)}}(m))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=__PRIVATE_toInt32Proto(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:n,parent:i}}function __PRIVATE_convertQueryTargetToQuery(t){let e=__PRIVATE_fromQueryPath(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){__PRIVATE_hardAssert(s===1,65062);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const y=__PRIVATE_fromFilter(g);return y instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(y)?y.getFilters():[y]}(n.where));let l=[];n.orderBy&&(l=function(g){return g.map(y=>function(E){return new OrderBy(__PRIVATE_fromFieldPathReference(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(y))}(n.orderBy));let u=null;n.limit&&(u=function(g){let y;return y=typeof g=="object"?g.value:g,__PRIVATE_isNullOrUndefined(y)?null:y}(n.limit));let d=null;n.startAt&&(d=function(g){const y=!!g.before,v=g.values||[];return new Bound(v,y)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const y=!g.before,v=g.values||[];return new Bound(v,y)}(n.endAt)),__PRIVATE_newQuery(e,i,l,o,u,"F",d,f)}function __PRIVATE_toListenRequestLabels(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function __PRIVATE_fromFilter(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(t):t.fieldFilter!==void 0?function(n){return FieldFilter.create(__PRIVATE_fromFieldPathReference(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return CompositeFilter.create(n.compositeFilter.filters.map(s=>__PRIVATE_fromFilter(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(n.compositeFilter.op))}(t):fail(30097,{filter:t})}function __PRIVATE_toDirection(t){return wt[t]}function __PRIVATE_toOperatorName(t){return bt[t]}function __PRIVATE_toCompositeOperatorName(t){return St[t]}function __PRIVATE_toFieldPathReference(t){return{fieldPath:t.canonicalString()}}function __PRIVATE_fromFieldPathReference(t){return FieldPath$1.fromServerFormat(t.fieldPath)}function __PRIVATE_toFilter(t){return t instanceof FieldFilter?function(n){if(n.op==="=="){if(__PRIVATE_isNanValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(__PRIVATE_isNanValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:__PRIVATE_toOperatorName(n.op),value:n.value}}}(t):t instanceof CompositeFilter?function(n){const s=n.getFilters().map(i=>__PRIVATE_toFilter(i));return s.length===1?s[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(n.op),filters:s}}}(t):fail(54877,{filter:t})}function __PRIVATE_toDocumentMask(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,n,s,i,o=SnapshotVersion.min(),l=SnapshotVersion.min(),u=ByteString.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.wt=e}}function __PRIVATE_fromBundledQuery(t){const e=__PRIVATE_convertQueryTargetToQuery({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,n){return this.Cn.add(n),PersistencePromise.resolve()}getCollectionParents(e,n){return PersistencePromise.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return PersistencePromise.resolve()}deleteFieldIndex(e,n){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,n){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,n){return PersistencePromise.resolve(null)}getIndexType(e,n){return PersistencePromise.resolve(0)}getFieldIndexes(e,n){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,n){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,n){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,n,s){return PersistencePromise.resolve()}updateIndexEntries(e,n){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new SortedSet(ResourcePath.comparator),o=!i.has(s);return this.index[n]=i.add(s),o}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mt=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Mt,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new __PRIVATE_TargetIdGenerator(0)}static lr(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="LruGarbageCollector",Ot=1048576;function __PRIVATE_bufferEntryComparator([t,e],[n,s]){const i=__PRIVATE_primitiveComparator(t,n);return i===0?__PRIVATE_primitiveComparator(e,s):i}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Er=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();__PRIVATE_bufferEntryComparator(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){__PRIVATE_logDebug(xt,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){__PRIVATE_isIndexedDbTransactionError(n)?__PRIVATE_logDebug(xt,"Ignoring IndexedDB error during garbage collection: ",n):await __PRIVATE_ignoreIfPrimaryLeaseLoss(n)}await this.mr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.le);const s=new __PRIVATE_RollingSequenceNumberBuffer(n);return this.gr.forEachTarget(e,i=>s.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>s.Rr(i))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(Ft)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ft):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,i,o,l,u,d,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,l=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(s=g,u=Date.now(),this.removeTargets(e,s,n))).next(g=>(o=g,d=Date.now(),this.removeOrphanedDocuments(e,s))).next(g=>(f=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}}function __PRIVATE_newLruGarbageCollector(t,e){return new __PRIVATE_LruGarbageCollectorImpl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?PersistencePromise.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&__PRIVATE_mutationApplyToLocalView(s.mutation,i,FieldMask.empty(),Timestamp.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,__PRIVATE_documentKeySet()).next(()=>s))}getLocalViewOfDocuments(e,n,s=__PRIVATE_documentKeySet()){const i=__PRIVATE_newOverlayMap();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(o=>{let l=documentMap();return o.forEach((u,d)=>{l=l.insert(u,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const s=__PRIVATE_newOverlayMap();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,__PRIVATE_documentKeySet()))}populateOverlays(e,n,s){const i=[];return s.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,u)=>{n.set(l,u)})})}computeViews(e,n,s,i){let o=__PRIVATE_mutableDocumentMap();const l=__PRIVATE_newDocumentKeyMap(),u=function(){return __PRIVATE_newDocumentKeyMap()}();return n.forEach((d,f)=>{const m=s.get(f.key);i.has(f.key)&&(m===void 0||m.mutation instanceof __PRIVATE_PatchMutation)?o=o.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(m.mutation,f,m.mutation.getFieldMask(),Timestamp.now())):l.set(f.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,m)=>l.set(f,m)),n.forEach((f,m)=>{var g;return u.set(f,new OverlayedDocument(m,(g=l.get(f))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const s=__PRIVATE_newDocumentKeyMap();let i=new SortedMap((l,u)=>l-u),o=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const u of l)u.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let m=s.get(d)||FieldMask.empty();m=u.applyToLocalView(f,m),s.set(d,m);const g=(i.get(u.batchId)||__PRIVATE_documentKeySet()).add(d);i=i.insert(u.batchId,g)})}).next(()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,m=d.value,g=__PRIVATE_newMutationMap();m.forEach(y=>{if(!o.has(y)){const v=__PRIVATE_calculateOverlayMutation(n.get(y),s.get(y));v!==null&&g.set(y,v),o=o.add(y)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,g))}return PersistencePromise.waitFor(l)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(l){return DocumentKey.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):__PRIVATE_isCollectionGroupQuery(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-o.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let u=Q,d=o;return l.next(f=>PersistencePromise.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,m).next(y=>{d=d.insert(m,y)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,__PRIVATE_documentKeySet())).next(m=>({batchId:u,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new DocumentKey(n)).next(s=>{let i=documentMap();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const o=n.collectionGroup;let l=documentMap();return this.indexManager.getCollectionParents(e,o).next(u=>PersistencePromise.forEach(u,d=>{const f=function(g,y){return new __PRIVATE_QueryImpl(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,s,i).next(m=>{m.forEach((g,y)=>{l=l.insert(g,y)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,s,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,o,i))).next(l=>{o.forEach((d,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,MutableDocument.newInvalidDocument(m)))});let u=documentMap();return l.forEach((d,f)=>{const m=o.get(d);m!==void 0&&__PRIVATE_mutationApplyToLocalView(m.mutation,f,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(n,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return PersistencePromise.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:__PRIVATE_fromVersion(i.createTime)}}(n)),PersistencePromise.resolve()}getNamedQuery(e,n){return PersistencePromise.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:__PRIVATE_fromBundledQuery(i.bundledQuery),readTime:__PRIVATE_fromVersion(i.readTime)}}(n)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.Qr=new Map}getOverlay(e,n){return PersistencePromise.resolve(this.overlays.get(n))}getOverlays(e,n){const s=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&s.set(i,o)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,o)=>{this.St(e,n,o)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.Qr.get(s);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(s)),PersistencePromise.resolve()}getOverlaysForCollection(e,n,s){const i=__PRIVATE_newOverlayMap(),o=n.length+1,l=new DocumentKey(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>s&&i.set(d.getKey(),d)}return PersistencePromise.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let o=new SortedMap((f,m)=>f-m);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>s){let m=o.get(f.largestBatchId);m===null&&(m=__PRIVATE_newOverlayMap(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=__PRIVATE_newOverlayMap(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=i)););return PersistencePromise.resolve(u)}St(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const l=this.Qr.get(i.largestBatchId).delete(s.key);this.Qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(s.key,new Overlay(n,s));let o=this.Qr.get(n);o===void 0&&(o=__PRIVATE_documentKeySet(),this.Qr.set(n,o)),this.Qr.set(n,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.$r=new SortedSet(__PRIVATE_DocReference.Ur),this.Kr=new SortedSet(__PRIVATE_DocReference.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new __PRIVATE_DocReference(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new __PRIVATE_DocReference(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new DocumentKey(new ResourcePath([])),s=new __PRIVATE_DocReference(n,e),i=new __PRIVATE_DocReference(n,e+1),o=[];return this.Kr.forEachInRange([s,i],l=>{this.zr(l),o.push(l.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new DocumentKey(new ResourcePath([])),s=new __PRIVATE_DocReference(n,e),i=new __PRIVATE_DocReference(n,e+1);let o=__PRIVATE_documentKeySet();return this.Kr.forEachInRange([s,i],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new __PRIVATE_DocReference(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class __PRIVATE_DocReference{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return DocumentKey.comparator(e.key,n.key)||__PRIVATE_primitiveComparator(e.Zr,n.Zr)}static Wr(e,n){return __PRIVATE_primitiveComparator(e.Zr,n.Zr)||DocumentKey.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new SortedSet(__PRIVATE_DocReference.Ur)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new MutationBatch(o,n,s,i);this.mutationQueue.push(l);for(const u of i)this.Xr=this.Xr.add(new __PRIVATE_DocReference(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return PersistencePromise.resolve(l)}lookupMutationBatch(e,n){return PersistencePromise.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.ti(s),o=i<0?0:i;return PersistencePromise.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?G:this.nr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new __PRIVATE_DocReference(n,0),i=new __PRIVATE_DocReference(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([s,i],l=>{const u=this.ei(l.Zr);o.push(u)}),PersistencePromise.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new SortedSet(__PRIVATE_primitiveComparator);return n.forEach(i=>{const o=new __PRIVATE_DocReference(i,0),l=new __PRIVATE_DocReference(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,l],u=>{s=s.add(u.Zr)})}),PersistencePromise.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let o=s;DocumentKey.isDocumentKey(o)||(o=o.child(""));const l=new __PRIVATE_DocReference(new DocumentKey(o),0);let u=new SortedSet(__PRIVATE_primitiveComparator);return this.Xr.forEachWhile(d=>{const f=d.key.path;return!!s.isPrefixOf(f)&&(f.length===i&&(u=u.add(d.Zr)),!0)},l),PersistencePromise.resolve(this.ni(u))}ni(e){const n=[];return e.forEach(s=>{const i=this.ei(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){__PRIVATE_hardAssert(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return PersistencePromise.forEach(n.mutations,i=>{const o=new __PRIVATE_DocReference(i.key,n.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new __PRIVATE_DocReference(n,0),i=this.Xr.firstAfterOrEqual(s);return PersistencePromise.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ii=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),o=i?i.size:0,l=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return PersistencePromise.resolve(s?s.document.mutableCopy():MutableDocument.newInvalidDocument(n))}getEntries(e,n){let s=__PRIVATE_mutableDocumentMap();return n.forEach(i=>{const o=this.docs.get(i);s=s.insert(i,o?o.document.mutableCopy():MutableDocument.newInvalidDocument(i))}),PersistencePromise.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let o=__PRIVATE_mutableDocumentMap();const l=n.path,u=new DocumentKey(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(m),s)<=0||(i.has(m.key)||__PRIVATE_queryMatches(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return PersistencePromise.resolve(o)}getAllFromCollectionGroup(e,n,s,i){fail(9500)}si(e,n){return PersistencePromise.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(s)}),PersistencePromise.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.oi=new ObjectMap(n=>__PRIVATE_canonifyTarget(n),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this._i=0,this.ai=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ui=__PRIVATE_TargetIdGenerator.cr()}forEachTarget(e,n){return this.oi.forEach((s,i)=>n(i)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),PersistencePromise.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new __PRIVATE_TargetIdGenerator(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,n){return this.Tr(n),PersistencePromise.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,n,s){let i=0;const o=[];return this.oi.forEach((l,u)=>{u.sequenceNumber<=n&&s.get(u.targetId)===null&&(this.oi.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),PersistencePromise.waitFor(o).next(()=>i)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return PersistencePromise.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),PersistencePromise.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),PersistencePromise.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return PersistencePromise.resolve(s)}containsKey(e,n){return PersistencePromise.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,n){this.ci={},this.overlays={},this.li=new __PRIVATE_ListenSequence(0),this.hi=!1,this.hi=!0,this.Pi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Ti=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(i){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(i)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new __PRIVATE_LocalSerializer(n),this.Ei=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new __PRIVATE_MemoryMutationQueue(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const i=new __PRIVATE_MemoryTransaction(this.li.next());return this.referenceDelegate.di(),s(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,n){return PersistencePromise.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Vi=new __PRIVATE_ReferenceSet,this.mi=null}static fi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get gi(){if(this.mi)return this.mi;throw fail(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),PersistencePromise.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),PersistencePromise.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.gi,s=>{const i=DocumentKey.fromPath(s);return this.pi(e,i).next(o=>{o||n.removeEntry(i,SnapshotVersion.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,n){this.persistence=e,this.yi=new ObjectMap(s=>__PRIVATE_encodeResourcePath(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,n)}static fi(e,n){return new __PRIVATE_MemoryLruDelegate(e,n)}di(){}Ai(e){return PersistencePromise.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(i=>s+i))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return PersistencePromise.forEach(this.yi,(s,i)=>this.Dr(e,s,i).next(o=>o?PersistencePromise.resolve():n(i)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,l=>this.Dr(e,l,n).next(u=>{u||(s++,o.removeEntry(l,SnapshotVersion.min()))})).next(()=>o.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=__PRIVATE_estimateByteSize(e.data.value)),n}Dr(e,n,s){return PersistencePromise.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.yi.get(n);return PersistencePromise.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.ds=s,this.As=i}static Rs(e,n){let s=__PRIVATE_documentKeySet(),i=__PRIVATE_documentKeySet();for(const o of n.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new __PRIVATE_LocalViewChanges(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,i){const o={result:null};return this.ws(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.bs(e,n,i,s).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new QueryContext;return this.Ss(e,n,l).next(u=>{if(o.result=u,this.fs)return this.Ds(e,n,l,u.size)})}).next(()=>o.result)}Ds(e,n,s,i){return s.documentReadCount<this.gs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ps*i?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(n))):PersistencePromise.resolve())}ws(e,n){if(__PRIVATE_queryMatchesAllDocuments(n))return PersistencePromise.resolve(null);let s=__PRIVATE_queryToTarget(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=__PRIVATE_queryWithLimit(n,null,"F"),s=__PRIVATE_queryToTarget(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(o=>{const l=__PRIVATE_documentKeySet(...o);return this.ys.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,s).next(d=>{const f=this.vs(n,u);return this.Cs(n,f,l,d.readTime)?this.ws(e,__PRIVATE_queryWithLimit(n,null,"F")):this.Fs(e,f,n,d)}))})))}bs(e,n,s,i){return __PRIVATE_queryMatchesAllDocuments(n)||i.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ys.getDocuments(e,s).next(o=>{const l=this.vs(n,o);return this.Cs(n,l,s,i)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),__PRIVATE_stringifyQuery(n)),this.Fs(e,l,n,__PRIVATE_newIndexOffsetSuccessorFromReadTime(i,Q)).next(u=>u))})}vs(e,n){let s=new SortedSet(__PRIVATE_newQueryComparator(e));return n.forEach((i,o)=>{__PRIVATE_queryMatches(e,o)&&(s=s.add(o))}),s}Cs(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,s){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(n)),this.ys.getDocumentsMatchingQuery(e,n,IndexOffset.min(),s)}Fs(e,n,s,i){return this.ys.getDocumentsMatchingQuery(e,s,i).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="LocalStore",$t=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,n,s,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new SortedMap(__PRIVATE_primitiveComparator),this.Os=new ObjectMap(o=>__PRIVATE_canonifyTarget(o),__PRIVATE_targetEquals),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function __PRIVATE_newLocalStore(t,e,n,s){return new __PRIVATE_LocalStoreImpl(t,e,n,s)}async function __PRIVATE_localStoreHandleUserChange(t,e){const n=__PRIVATE_debugCast(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(o=>(i=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(o=>{const l=[],u=[];let d=__PRIVATE_documentKeySet();for(const f of i){l.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return n.localDocuments.getDocuments(s,d).next(f=>({ks:f,removedBatchIds:l,addedBatchIds:u}))})})}function __PRIVATE_localStoreAcknowledgeBatch(t,e){const n=__PRIVATE_debugCast(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(u,d,f,m){const g=f.batch,y=g.keys();let v=PersistencePromise.resolve();return y.forEach(E=>{v=v.next(()=>m.getEntry(d,E)).next(w=>{const A=f.docVersions.get(E);__PRIVATE_hardAssert(A!==null,48541),w.version.compareTo(A)<0&&(g.applyToRemoteDocument(w,f),w.isValidDocument()&&(w.setReadTime(f.commitVersion),m.addEntry(w)))})}),v.next(()=>u.mutationQueue.removeMutationBatch(d,g))}(n,s,e,o).next(()=>o.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(u){let d=__PRIVATE_documentKeySet();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t){const e=__PRIVATE_debugCast(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(t,e){const n=__PRIVATE_debugCast(t),s=e.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const u=[];e.targetChanges.forEach((m,g)=>{const y=i.get(g);if(!y)return;u.push(n.Ti.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Ti.addMatchingKeys(o,m.addedDocuments,g)));let v=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?v=v.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):m.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(m.resumeToken,s)),i=i.insert(g,v),function(w,A,I){return w.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=$t?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(y,v,m)&&u.push(n.Ti.updateTargetData(o,v))});let d=__PRIVATE_mutableDocumentMap(),f=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(__PRIVATE_populateDocumentChangeBuffer(o,l,e.documentUpdates).next(m=>{d=m.qs,f=m.Qs})),!s.isEqual(SnapshotVersion.min())){const m=n.Ti.getLastRemoteSnapshotVersion(o).next(g=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,s));u.push(m)}return PersistencePromise.waitFor(u).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.xs=i,o))}function __PRIVATE_populateDocumentChangeBuffer(t,e,n){let s=__PRIVATE_documentKeySet(),i=__PRIVATE_documentKeySet();return n.forEach(o=>s=s.add(o)),e.getEntries(t,s).next(o=>{let l=__PRIVATE_mutableDocumentMap();return n.forEach((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(SnapshotVersion.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):__PRIVATE_logDebug(Qt,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{qs:l,Qs:i}})}function __PRIVATE_localStoreGetNextMutationBatch(t,e){const n=__PRIVATE_debugCast(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=G),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function __PRIVATE_localStoreAllocateTarget(t,e){const n=__PRIVATE_debugCast(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Ti.getTargetData(s,e).next(o=>o?(i=o,PersistencePromise.resolve(i)):n.Ti.allocateTargetId(s).next(l=>(i=new TargetData(e,l,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.xs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function __PRIVATE_localStoreReleaseTarget(t,e,n){const s=__PRIVATE_debugCast(t),i=s.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",o,l=>s.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!__PRIVATE_isIndexedDbTransactionError(l))throw l;__PRIVATE_logDebug(Qt,`Failed to update sequence numbers for target ${e}: ${l}`)}s.xs=s.xs.remove(e),s.Os.delete(i.target)}function __PRIVATE_localStoreExecuteQuery(t,e,n){const s=__PRIVATE_debugCast(t);let i=SnapshotVersion.min(),o=__PRIVATE_documentKeySet();return s.persistence.runTransaction("Execute query","readwrite",l=>function(d,f,m){const g=__PRIVATE_debugCast(d),y=g.Os.get(m);return y!==void 0?PersistencePromise.resolve(g.xs.get(y)):g.Ti.getTargetData(f,m)}(s,l,__PRIVATE_queryToTarget(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(l,u.targetId).next(d=>{o=d})}).next(()=>s.Ms.getDocumentsMatchingQuery(l,e,n?i:SnapshotVersion.min(),n?o:__PRIVATE_documentKeySet())).next(u=>(__PRIVATE_setMaxReadTime(s,__PRIVATE_queryCollectionGroup(e),u),{documents:u,$s:o})))}function __PRIVATE_setMaxReadTime(t,e,n){let s=t.Ns.get(e)||SnapshotVersion.min();n.forEach((i,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)}),t.Ns.set(e,s)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.xo=new __PRIVATE_LocalClientState,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){__PRIVATE_logDebug(zt,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){__PRIVATE_logDebug(zt,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jt=null;function __PRIVATE_generateUniqueDebugId(){return jt===null?jt=function(){return 268435456+Math.round(2147483648*Math.random())}():jt++,"0x"+jt.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="RestConnection",Jt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${i}`,this.Go=this.databaseId.database===ut?`project_id=${s}`:`project_id=${s}&database_id=${i}`}zo(e,n,s,i,o){const l=__PRIVATE_generateUniqueDebugId(),u=this.jo(e,n.toUriEncodedString());__PRIVATE_logDebug(Ht,`Sending RPC '${e}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,i,o);const{host:f}=new URL(u),m=isCloudWorkstation(f);return this.Jo(e,u,d,s,m).then(g=>(__PRIVATE_logDebug(Ht,`Received RPC '${e}' ${l}: `,g),g),g=>{throw __PRIVATE_logWarn(Ht,`RPC '${e}' ${l} failed with error: `,g,"url: ",u,"request:",s),g})}Yo(e,n,s,i,o,l){return this.zo(e,n,s,i,o)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),s&&s.headers.forEach((i,o)=>e[o]=i)}jo(e,n){const s=Jt[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,i,o){const l=__PRIVATE_generateUniqueDebugId();return new Promise((u,d)=>{const f=new XhrIo;f.setWithCredentials(!0),f.listenOnce(EventType.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case ErrorCode.NO_ERROR:const g=f.getResponseJson();__PRIVATE_logDebug(Yt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(g)),u(g);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Yt,`RPC '${e}' ${l} timed out`),d(new FirestoreError(N.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const y=f.getStatus();if(__PRIVATE_logDebug(Yt,`RPC '${e}' ${l} failed with status:`,y,"response text:",f.getResponseText()),y>0){let v=f.getResponseJson();Array.isArray(v)&&(v=v[0]);const E=v==null?void 0:v.error;if(E&&E.status&&E.message){const w=function(I){const D=I.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(D)>=0?D:N.UNKNOWN}(E.status);d(new FirestoreError(w,E.message))}else d(new FirestoreError(N.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new FirestoreError(N.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{h_:e,streamId:l,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{__PRIVATE_logDebug(Yt,`RPC '${e}' ${l} completed.`)}});const m=JSON.stringify(i);__PRIVATE_logDebug(Yt,`RPC '${e}' ${l} sending request:`,i),f.send(n,"POST",m,s,15)})}I_(e,n,s){const i=__PRIVATE_generateUniqueDebugId(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=createWebChannelTransport(),u=getStatEventTarget(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,n,s),d.encodeInitMessageHeaders=!0;const m=o.join("");__PRIVATE_logDebug(Yt,`Creating RPC '${e}' stream ${i}: ${m}`,d);const g=l.createWebChannel(m,d);this.E_(g);let y=!1,v=!1;const E=new __PRIVATE_StreamBridge({Zo:A=>{v?__PRIVATE_logDebug(Yt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(y||(__PRIVATE_logDebug(Yt,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${i} sending:`,A),g.send(A))},Xo:()=>g.close()}),w=(A,I,D)=>{A.listen(I,V=>{try{D(V)}catch(Y){setTimeout(()=>{throw Y},0)}})};return w(g,WebChannel.EventType.OPEN,()=>{v||(__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${i} transport opened.`),E.__())}),w(g,WebChannel.EventType.CLOSE,()=>{v||(v=!0,__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${i} transport closed`),E.u_(),this.d_(g))}),w(g,WebChannel.EventType.ERROR,A=>{v||(v=!0,__PRIVATE_logWarn(Yt,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),E.u_(new FirestoreError(N.UNAVAILABLE,"The operation could not be completed")))}),w(g,WebChannel.EventType.MESSAGE,A=>{var I;if(!v){const D=A.data[0];__PRIVATE_hardAssert(!!D,16349);const V=D,Y=(V==null?void 0:V.error)||((I=V[0])===null||I===void 0?void 0:I.error);if(Y){__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${i} received error:`,Y);const j=Y.status;let H=function(P){const U=ft[P];if(U!==void 0)return __PRIVATE_mapCodeFromRpcCode(U)}(j),S=Y.message;H===void 0&&(H=N.INTERNAL,S="Unknown error status: "+j+" with message "+Y.message),v=!0,E.u_(new FirestoreError(H,S)),g.close()}else __PRIVATE_logDebug(Yt,`RPC '${e}' stream ${i} received:`,D),E.c_(D)}}),w(u,Event$1.STAT_EVENT,A=>{A.stat===Stat.PROXY?__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.a_()},0),E}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(t){return new JsonProtoSerializer(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,n,s=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-s);i>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,n,s,i,o,l,u,d){this.xi=e,this.S_=s,this.D_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new __PRIVATE_ExponentialBackoff(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(__PRIVATE_logError(n.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.v_===n&&this.z_(s,i)},s=>{e(()=>{const i=new FirestoreError(N.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(i)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{s(()=>this.j_(i))}),this.stream.onMessage(i=>{s(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return __PRIVATE_logDebug(Zt,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(__PRIVATE_logDebug(Zt,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,n,s,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,l),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=__PRIVATE_fromWatchChange(this.serializer,e),s=function(o){if(!("targetChange"in o))return SnapshotVersion.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?SnapshotVersion.min():l.readTime?__PRIVATE_fromVersion(l.readTime):SnapshotVersion.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=__PRIVATE_getEncodedDatabaseId(this.serializer),n.addTarget=function(o,l){let u;const d=l.target;if(u=__PRIVATE_targetIsDocumentTarget(d)?{documents:__PRIVATE_toDocumentsTarget(o,d)}:{query:__PRIVATE_toQueryTarget(o,d).gt},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=__PRIVATE_toBytes(o,l.resumeToken);const f=__PRIVATE_toInt32Proto(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(SnapshotVersion.min())>0){u.readTime=toTimestamp(o,l.snapshotVersion.toTimestamp());const f=__PRIVATE_toInt32Proto(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const s=__PRIVATE_toListenRequestLabels(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=__PRIVATE_getEncodedDatabaseId(this.serializer),n.removeTarget=e,this.Q_(n)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,n,s,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,l),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),s=__PRIVATE_fromVersion(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>toMutation(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.zo(e,__PRIVATE_toResourcePath(n,s),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new FirestoreError(N.UNKNOWN,o.toString())})}Yo(e,n,s,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Yo(e,__PRIVATE_toResourcePath(n,s),i,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new FirestoreError(N.UNKNOWN,l.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(__PRIVATE_logError(n),this.ua=!1):__PRIVATE_logDebug("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,n,s,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(l=>{s.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(Xt,"Restarting streams for network reachability change."),await async function(d){const f=__PRIVATE_debugCast(d);f.da.add(4),await __PRIVATE_disableNetworkInternal(f),f.Va.set("Unknown"),f.da.delete(4),await __PRIVATE_enableNetworkInternal(f)}(this))})}),this.Va=new __PRIVATE_OnlineStateTracker(s,i)}}async function __PRIVATE_enableNetworkInternal(t){if(__PRIVATE_canUseNetwork(t))for(const e of t.Aa)await e(!0)}async function __PRIVATE_disableNetworkInternal(t){for(const e of t.Aa)await e(!1)}function __PRIVATE_remoteStoreListen(t,e){const n=__PRIVATE_debugCast(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(n)?__PRIVATE_startWatchStream(n):__PRIVATE_ensureWatchStream(n).N_()&&__PRIVATE_sendWatchRequest(n,e))}function __PRIVATE_remoteStoreUnlisten(t,e){const n=__PRIVATE_debugCast(t),s=__PRIVATE_ensureWatchStream(n);n.Ea.delete(e),s.N_()&&__PRIVATE_sendUnwatchRequest(n,e),n.Ea.size===0&&(s.N_()?s.k_():__PRIVATE_canUseNetwork(n)&&n.Va.set("Unknown"))}function __PRIVATE_sendWatchRequest(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}__PRIVATE_ensureWatchStream(t).Z_(e)}function __PRIVATE_sendUnwatchRequest(t,e){t.ma.Ke(e),__PRIVATE_ensureWatchStream(t).X_(e)}function __PRIVATE_startWatchStream(t){t.ma=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(t).start(),t.Va.ca()}function __PRIVATE_shouldStartWatchStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWatchStream(t).O_()&&t.Ea.size>0}function __PRIVATE_canUseNetwork(t){return __PRIVATE_debugCast(t).da.size===0}function __PRIVATE_cleanUpWatchStreamState(t){t.ma=void 0}async function __PRIVATE_onWatchStreamConnected(t){t.Va.set("Online")}async function __PRIVATE_onWatchStreamOpen(t){t.Ea.forEach((e,n)=>{__PRIVATE_sendWatchRequest(t,e)})}async function __PRIVATE_onWatchStreamClose(t,e){__PRIVATE_cleanUpWatchStreamState(t),__PRIVATE_shouldStartWatchStream(t)?(t.Va.Pa(e),__PRIVATE_startWatchStream(t)):t.Va.set("Unknown")}async function __PRIVATE_onWatchStreamChange(t,e,n){if(t.Va.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const u of o.targetIds)i.Ea.has(u)&&(await i.remoteSyncer.rejectListen(u,l),i.Ea.delete(u),i.ma.removeTarget(u))}(t,e)}catch(s){__PRIVATE_logDebug(Xt,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await __PRIVATE_disableNetworkUntilRecovery(t,s)}else if(e instanceof __PRIVATE_DocumentWatchChange?t.ma.Xe(e):e instanceof __PRIVATE_ExistenceFilterChange?t.ma.ot(e):t.ma.nt(e),!n.isEqual(SnapshotVersion.min()))try{const s=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore);n.compareTo(s)>=0&&await function(o,l){const u=o.ma.It(l);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=o.Ea.get(f);m&&o.Ea.set(f,m.withResumeToken(d.resumeToken,l))}}),u.targetMismatches.forEach((d,f)=>{const m=o.Ea.get(d);if(!m)return;o.Ea.set(d,m.withResumeToken(ByteString.EMPTY_BYTE_STRING,m.snapshotVersion)),__PRIVATE_sendUnwatchRequest(o,d);const g=new TargetData(m.target,d,f,m.sequenceNumber);__PRIVATE_sendWatchRequest(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(s){__PRIVATE_logDebug(Xt,"Failed to raise snapshot:",s),await __PRIVATE_disableNetworkUntilRecovery(t,s)}}async function __PRIVATE_disableNetworkUntilRecovery(t,e,n){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;t.da.add(1),await __PRIVATE_disableNetworkInternal(t),t.Va.set("Offline"),n||(n=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(Xt,"Retrying IndexedDB access"),await n(),t.da.delete(1),await __PRIVATE_enableNetworkInternal(t)})}function __PRIVATE_executeWithRecovery(t,e){return e().catch(n=>__PRIVATE_disableNetworkUntilRecovery(t,n,e))}async function __PRIVATE_fillWritePipeline(t){const e=__PRIVATE_debugCast(t),n=__PRIVATE_ensureWriteStream(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:G;for(;__PRIVATE_canAddToWritePipeline(e);)try{const i=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,s);if(i===null){e.Ia.length===0&&n.k_();break}s=i.batchId,__PRIVATE_addToWritePipeline(e,i)}catch(i){await __PRIVATE_disableNetworkUntilRecovery(e,i)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(t){return __PRIVATE_canUseNetwork(t)&&t.Ia.length<10}function __PRIVATE_addToWritePipeline(t,e){t.Ia.push(e);const n=__PRIVATE_ensureWriteStream(t);n.N_()&&n.ea&&n.ta(e.mutations)}function __PRIVATE_shouldStartWriteStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWriteStream(t).O_()&&t.Ia.length>0}function __PRIVATE_startWriteStream(t){__PRIVATE_ensureWriteStream(t).start()}async function __PRIVATE_onWriteStreamOpen(t){__PRIVATE_ensureWriteStream(t).ia()}async function __PRIVATE_onWriteHandshakeComplete(t){const e=__PRIVATE_ensureWriteStream(t);for(const n of t.Ia)e.ta(n.mutations)}async function __PRIVATE_onMutationResult(t,e,n){const s=t.Ia.shift(),i=MutationBatchResult.from(s,e,n);await __PRIVATE_executeWithRecovery(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await __PRIVATE_fillWritePipeline(t)}async function __PRIVATE_onWriteStreamClose(t,e){e&&__PRIVATE_ensureWriteStream(t).ea&&await async function(s,i){if(function(l){return __PRIVATE_isPermanentError(l)&&l!==N.ABORTED}(i.code)){const o=s.Ia.shift();__PRIVATE_ensureWriteStream(s).L_(),await __PRIVATE_executeWithRecovery(s,()=>s.remoteSyncer.rejectFailedWrite(o.batchId,i)),await __PRIVATE_fillWritePipeline(s)}}(t,e),__PRIVATE_shouldStartWriteStream(t)&&__PRIVATE_startWriteStream(t)}async function __PRIVATE_remoteStoreHandleCredentialChange(t,e){const n=__PRIVATE_debugCast(t);n.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Xt,"RemoteStore received new credentials");const s=__PRIVATE_canUseNetwork(n);n.da.add(3),await __PRIVATE_disableNetworkInternal(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await __PRIVATE_enableNetworkInternal(n)}async function __PRIVATE_remoteStoreApplyPrimaryState(t,e){const n=__PRIVATE_debugCast(t);e?(n.da.delete(2),await __PRIVATE_enableNetworkInternal(n)):e||(n.da.add(2),await __PRIVATE_disableNetworkInternal(n),n.Va.set("Unknown"))}function __PRIVATE_ensureWatchStream(t){return t.fa||(t.fa=function(n,s,i){const o=__PRIVATE_debugCast(n);return o.oa(),new __PRIVATE_PersistentListenStream(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:__PRIVATE_onWatchStreamConnected.bind(null,t),n_:__PRIVATE_onWatchStreamOpen.bind(null,t),i_:__PRIVATE_onWatchStreamClose.bind(null,t),Y_:__PRIVATE_onWatchStreamChange.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),__PRIVATE_shouldStartWatchStream(t)?__PRIVATE_startWatchStream(t):t.Va.set("Unknown")):(await t.fa.stop(),__PRIVATE_cleanUpWatchStreamState(t))})),t.fa}function __PRIVATE_ensureWriteStream(t){return t.ga||(t.ga=function(n,s,i){const o=__PRIVATE_debugCast(n);return o.oa(),new __PRIVATE_PersistentWriteStream(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:__PRIVATE_onWriteStreamOpen.bind(null,t),i_:__PRIVATE_onWriteStreamClose.bind(null,t),na:__PRIVATE_onWriteHandshakeComplete.bind(null,t),ra:__PRIVATE_onMutationResult.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await __PRIVATE_fillWritePipeline(t)):(await t.ga.stop(),t.Ia.length>0&&(__PRIVATE_logDebug(Xt,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,n,s,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=o,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,o){const l=Date.now()+s,u=new DelayedOperation(e,n,l,i,o);return u.start(s),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(t,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${t}`),__PRIVATE_isIndexedDbTransactionError(t))return new FirestoreError(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||DocumentKey.comparator(n.key,s.key):(n,s)=>DocumentKey.comparator(n.key,s.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=s.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new DocumentSet;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.pa=new SortedMap(DocumentKey.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):fail(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class ViewSnapshot{constructor(e,n,s,i,o,l,u,d,f){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,s,i,o){const l=[];return n.forEach(u=>{l.push({type:0,doc:u})}),new ViewSnapshot(e,n,DocumentSet.emptySet(n),l,s,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=__PRIVATE_debugCast(n),o=i.queries;i.queries=__PRIVATE_newQueriesObjectMap(),o.forEach((l,u)=>{for(const d of u.Sa)d.onError(s)})})(this,new FirestoreError(N.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(t=>__PRIVATE_canonifyQuery(t),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(t,e){const n=__PRIVATE_debugCast(t);let s=3;const i=e.query;let o=n.queries.get(i);o?!o.Da()&&e.va()&&(s=2):(o=new __PRIVATE_QueryListenersInfo,s=e.va()?0:1);try{switch(s){case 0:o.ba=await n.onListen(i,!0);break;case 1:o.ba=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const u=__PRIVATE_wrapInUserErrorIfRecoverable(l,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&__PRIVATE_raiseSnapshotsInSyncEvent(n)}async function __PRIVATE_eventManagerUnlisten(t,e){const n=__PRIVATE_debugCast(t),s=e.query;let i=3;const o=n.queries.get(s);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function __PRIVATE_eventManagerOnWatchChange(t,e){const n=__PRIVATE_debugCast(t);let s=!1;for(const i of e){const o=i.query,l=n.queries.get(o);if(l){for(const u of l.Sa)u.Ma(i)&&(s=!0);l.ba=i}}s&&__PRIVATE_raiseSnapshotsInSyncEvent(n)}function __PRIVATE_eventManagerOnWatchError(t,e,n){const s=__PRIVATE_debugCast(t),i=s.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);s.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(t){t.Ca.forEach(e=>{e.next()})}var en,tn;(tn=en||(en={})).xa="default",tn.Cache="cache";class __PRIVATE_QueryListener{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==en.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.Za=__PRIVATE_newQueryComparator(e),this.Xa=new DocumentSet(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new __PRIVATE_DocumentChangeSet,i=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,l=i,u=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,g)=>{const y=i.get(m),v=__PRIVATE_queryMatches(this.query,g)?g:null,E=!!y&&this.mutatedKeys.has(y.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let A=!1;y&&v?y.data.isEqual(v.data)?E!==w&&(s.track({type:3,doc:v}),A=!0):this.ru(y,v)||(s.track({type:2,doc:v}),A=!0,(d&&this.Za(v,d)>0||f&&this.Za(v,f)<0)&&(u=!0)):!y&&v?(s.track({type:0,doc:v}),A=!0):y&&!v&&(s.track({type:1,doc:y}),A=!0,(d||f)&&(u=!0)),A&&(v?(l=l.add(v),o=w?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),s.track({type:1,doc:m})}return{Xa:l,nu:s,Cs:u,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const l=e.nu.wa();l.sort((m,g)=>function(v,E){const w=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Vt:A})}};return w(v)-w(E)}(m.type,g.type)||this.Za(m.doc,g.doc)),this.iu(s),i=i!=null&&i;const u=n&&!i?this.su():[],d=this.Ya.size===0&&this.current&&!i?1:0,f=d!==this.Ja;return this.Ja=d,l.length!==0||f?{snapshot:new ViewSnapshot(this.query,e.Xa,o,l,e.mutatedKeys,d===0,f,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:u}:{ou:u}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=__PRIVATE_documentKeySet(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new __PRIVATE_RemovedLimboDocument(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new __PRIVATE_AddedLimboDocument(s))}),n}au(e){this.Ha=e.$s,this.Ya=__PRIVATE_documentKeySet();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return ViewSnapshot.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const nn="SyncEngine";class __PRIVATE_QueryView{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class LimboResolution{constructor(e){this.key=e,this.cu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,n,s,i,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.lu={},this.hu=new ObjectMap(u=>__PRIVATE_canonifyQuery(u),__PRIVATE_queryEquals),this.Pu=new Map,this.Tu=new Set,this.Iu=new SortedMap(DocumentKey.comparator),this.Eu=new Map,this.du=new __PRIVATE_ReferenceSet,this.Au={},this.Ru=new Map,this.Vu=__PRIVATE_TargetIdGenerator.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function __PRIVATE_syncEngineListen(t,e,n=!0){const s=__PRIVATE_ensureWatchCallbacks(t);let i;const o=s.hu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=await __PRIVATE_allocateTargetAndMaybeListen(s,e,n,!0),i}async function __PRIVATE_triggerRemoteStoreListen(t,e){const n=__PRIVATE_ensureWatchCallbacks(t);await __PRIVATE_allocateTargetAndMaybeListen(n,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(t,e,n,s){const i=await __PRIVATE_localStoreAllocateTarget(t.localStore,__PRIVATE_queryToTarget(e)),o=i.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let u;return s&&(u=await __PRIVATE_initializeViewAndComputeSnapshot(t,e,o,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&__PRIVATE_remoteStoreListen(t.remoteStore,i),u}async function __PRIVATE_initializeViewAndComputeSnapshot(t,e,n,s,i){t.fu=(g,y,v)=>async function(w,A,I,D){let V=A.view.tu(I);V.Cs&&(V=await __PRIVATE_localStoreExecuteQuery(w.localStore,A.query,!1).then(({documents:S})=>A.view.tu(S,V)));const Y=D&&D.targetChanges.get(A.targetId),j=D&&D.targetMismatches.get(A.targetId)!=null,H=A.view.applyChanges(V,w.isPrimaryClient,Y,j);return __PRIVATE_updateTrackedLimbos(w,A.targetId,H.ou),H.snapshot}(t,g,y,v);const o=await __PRIVATE_localStoreExecuteQuery(t.localStore,e,!0),l=new __PRIVATE_View(e,o.$s),u=l.tu(o.documents),d=TargetChange.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),f=l.applyChanges(u,t.isPrimaryClient,d);__PRIVATE_updateTrackedLimbos(t,n,f.ou);const m=new __PRIVATE_QueryView(e,n,l);return t.hu.set(e,m),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),f.snapshot}async function __PRIVATE_syncEngineUnlisten(t,e,n){const s=__PRIVATE_debugCast(t),i=s.hu.get(e),o=s.Pu.get(i.targetId);if(o.length>1)return s.Pu.set(i.targetId,o.filter(l=>!__PRIVATE_queryEquals(l,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await __PRIVATE_localStoreReleaseTarget(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&__PRIVATE_remoteStoreUnlisten(s.remoteStore,i.targetId),__PRIVATE_removeAndCleanupTarget(s,i.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(s,i.targetId),await __PRIVATE_localStoreReleaseTarget(s.localStore,i.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(t,e){const n=__PRIVATE_debugCast(t),s=n.hu.get(e),i=n.Pu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),__PRIVATE_remoteStoreUnlisten(n.remoteStore,s.targetId))}async function __PRIVATE_syncEngineWrite(t,e,n){const s=__PRIVATE_syncEngineEnsureWriteCallbacks(t);try{const i=await function(l,u){const d=__PRIVATE_debugCast(l),f=Timestamp.now(),m=u.reduce((v,E)=>v.add(E.key),__PRIVATE_documentKeySet());let g,y;return d.persistence.runTransaction("Locally write mutations","readwrite",v=>{let E=__PRIVATE_mutableDocumentMap(),w=__PRIVATE_documentKeySet();return d.Bs.getEntries(v,m).next(A=>{E=A,E.forEach((I,D)=>{D.isValidDocument()||(w=w.add(I))})}).next(()=>d.localDocuments.getOverlayedDocuments(v,E)).next(A=>{g=A;const I=[];for(const D of u){const V=__PRIVATE_mutationExtractBaseValue(D,g.get(D.key).overlayedDocument);V!=null&&I.push(new __PRIVATE_PatchMutation(D.key,V,__PRIVATE_extractFieldMask(V.value.mapValue),Precondition.exists(!0)))}return d.mutationQueue.addMutationBatch(v,f,I,u)}).next(A=>{y=A;const I=A.applyToLocalDocumentSet(g,w);return d.documentOverlayCache.saveOverlays(v,A.batchId,I)})}).then(()=>({batchId:y.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(g)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(l,u,d){let f=l.Au[l.currentUser.toKey()];f||(f=new SortedMap(__PRIVATE_primitiveComparator)),f=f.insert(u,d),l.Au[l.currentUser.toKey()]=f}(s,i.batchId,n),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,i.changes),await __PRIVATE_fillWritePipeline(s.remoteStore)}catch(i){const o=__PRIVATE_wrapInUserErrorIfRecoverable(i,"Failed to persist write");n.reject(o)}}async function __PRIVATE_syncEngineApplyRemoteEvent(t,e){const n=__PRIVATE_debugCast(t);try{const s=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(n.localStore,e);e.targetChanges.forEach((i,o)=>{const l=n.Eu.get(o);l&&(__PRIVATE_hardAssert(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.cu=!0:i.modifiedDocuments.size>0?__PRIVATE_hardAssert(l.cu,14607):i.removedDocuments.size>0&&(__PRIVATE_hardAssert(l.cu,42227),l.cu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,s,e)}catch(s){await __PRIVATE_ignoreIfPrimaryLeaseLoss(s)}}function __PRIVATE_syncEngineApplyOnlineStateChange(t,e,n){const s=__PRIVATE_debugCast(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.hu.forEach((o,l)=>{const u=l.view.Fa(e);u.snapshot&&i.push(u.snapshot)}),function(l,u){const d=__PRIVATE_debugCast(l);d.onlineState=u;let f=!1;d.queries.forEach((m,g)=>{for(const y of g.Sa)y.Fa(u)&&(f=!0)}),f&&__PRIVATE_raiseSnapshotsInSyncEvent(d)}(s.eventManager,e),i.length&&s.lu.Y_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(t,e,n){const s=__PRIVATE_debugCast(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Eu.get(e),o=i&&i.key;if(o){let l=new SortedMap(DocumentKey.comparator);l=l.insert(o,MutableDocument.newNoDocument(o,SnapshotVersion.min()));const u=__PRIVATE_documentKeySet().add(o),d=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),l,u);await __PRIVATE_syncEngineApplyRemoteEvent(s,d),s.Iu=s.Iu.remove(o),s.Eu.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(s)}else await __PRIVATE_localStoreReleaseTarget(s.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(s,e,n)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(t,e){const n=__PRIVATE_debugCast(t),s=e.batch.batchId;try{const i=await __PRIVATE_localStoreAcknowledgeBatch(n.localStore,e);__PRIVATE_processUserCallback(n,s,null),__PRIVATE_triggerPendingWritesCallbacks(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,i)}catch(i){await __PRIVATE_ignoreIfPrimaryLeaseLoss(i)}}async function __PRIVATE_syncEngineRejectFailedWrite(t,e,n){const s=__PRIVATE_debugCast(t);try{const i=await function(l,u){const d=__PRIVATE_debugCast(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,u).next(g=>(__PRIVATE_hardAssert(g!==null,37113),m=g.keys(),d.mutationQueue.removeMutationBatch(f,g))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})}(s.localStore,e);__PRIVATE_processUserCallback(s,e,n),__PRIVATE_triggerPendingWritesCallbacks(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,i)}catch(i){await __PRIVATE_ignoreIfPrimaryLeaseLoss(i)}}function __PRIVATE_triggerPendingWritesCallbacks(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function __PRIVATE_processUserCallback(t,e,n){const s=__PRIVATE_debugCast(t);let i=s.Au[s.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),s.Au[s.currentUser.toKey()]=i}}function __PRIVATE_removeAndCleanupTarget(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Pu.get(e))t.hu.delete(s),n&&t.lu.gu(s,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(s=>{t.du.containsKey(s)||__PRIVATE_removeLimboTarget(t,s)})}function __PRIVATE_removeLimboTarget(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(__PRIVATE_remoteStoreUnlisten(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_updateTrackedLimbos(t,e,n){for(const s of n)s instanceof __PRIVATE_AddedLimboDocument?(t.du.addReference(s.key,e),__PRIVATE_trackLimboChange(t,s)):s instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(nn,"Document no longer in limbo: "+s.key),t.du.removeReference(s.key,e),t.du.containsKey(s.key)||__PRIVATE_removeLimboTarget(t,s.key)):fail(19791,{pu:s})}function __PRIVATE_trackLimboChange(t,e){const n=e.key,s=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(s)||(__PRIVATE_logDebug(nn,"New document in limbo: "+n),t.Tu.add(s),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_pumpEnqueuedLimboResolutions(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new DocumentKey(ResourcePath.fromString(e)),s=t.Vu.next();t.Eu.set(s,new LimboResolution(n)),t.Iu=t.Iu.insert(n,s),__PRIVATE_remoteStoreListen(t.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(n.path)),s,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.le))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,e,n){const s=__PRIVATE_debugCast(t),i=[],o=[],l=[];s.hu.isEmpty()||(s.hu.forEach((u,d)=>{l.push(s.fu(d,e,n).then(f=>{var m;if((f||n)&&s.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;s.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){i.push(f);const g=__PRIVATE_LocalViewChanges.Rs(d.targetId,f);o.push(g)}}))}),await Promise.all(l),s.lu.Y_(i),await async function(d,f){const m=__PRIVATE_debugCast(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>PersistencePromise.forEach(f,y=>PersistencePromise.forEach(y.ds,v=>m.persistence.referenceDelegate.addReference(g,y.targetId,v)).next(()=>PersistencePromise.forEach(y.As,v=>m.persistence.referenceDelegate.removeReference(g,y.targetId,v)))))}catch(g){if(!__PRIVATE_isIndexedDbTransactionError(g))throw g;__PRIVATE_logDebug(Qt,"Failed to update sequence numbers: "+g)}for(const g of f){const y=g.targetId;if(!g.fromCache){const v=m.xs.get(y),E=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(E);m.xs=m.xs.insert(y,w)}}}(s.localStore,o))}async function __PRIVATE_syncEngineHandleCredentialChange(t,e){const n=__PRIVATE_debugCast(t);if(!n.currentUser.isEqual(e)){__PRIVATE_logDebug(nn,"User change. New user:",e.toKey());const s=await __PRIVATE_localStoreHandleUserChange(n.localStore,e);n.currentUser=e,function(o,l){o.Ru.forEach(u=>{u.forEach(d=>{d.reject(new FirestoreError(N.CANCELLED,l))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,s.ks)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(t,e){const n=__PRIVATE_debugCast(t),s=n.Eu.get(e);if(s&&s.cu)return __PRIVATE_documentKeySet().add(s.key);{let i=__PRIVATE_documentKeySet();const o=n.Pu.get(e);if(!o)return i;for(const l of o){const u=n.hu.get(l);i=i.unionWith(u.view.eu)}return i}}function __PRIVATE_ensureWatchCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.lu.Y_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.lu.gu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Su(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.fi,this.serializer)}bu(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(s=>__PRIVATE_MemoryLruDelegate.fi(s,n),this.serializer)}}class OnlineComponentProvider{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const n=__PRIVATE_newSerializer(e.databaseInfo.databaseId),s=function(o){return new __PRIVATE_WebChannelConnection(o)}(e.databaseInfo);return function(o,l,u,d){return new __PRIVATE_DatastoreImpl(o,l,u,d)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,o,l,u){return new __PRIVATE_RemoteStoreImpl(s,i,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,n=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,n,0),function(){return __PRIVATE_BrowserConnectivityMonitor.C()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,n){return function(i,o,l,u,d,f,m){const g=new __PRIVATE_SyncEngineImpl(i,o,l,u,d,f);return m&&(g.mu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=__PRIVATE_debugCast(i);__PRIVATE_logDebug(Xt,"RemoteStore shutting down."),o.da.add(5),await __PRIVATE_disableNetworkInternal(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="FirestoreClient";class FirestoreClient{constructor(e,n,s,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=User$1.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,async l=>{__PRIVATE_logDebug(rn,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(s,l=>(__PRIVATE_logDebug(rn,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=__PRIVATE_wrapInUserErrorIfRecoverable(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(rn,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress();const n=await __PRIVATE_ensureOfflineComponents(t);__PRIVATE_logDebug(rn,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,i)),t._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){__PRIVATE_logDebug(rn,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+n),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(rn,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return t._offlineComponents}async function __PRIVATE_ensureOnlineComponents(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(__PRIVATE_logDebug(rn,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,t._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(rn,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,new OnlineComponentProvider))),t._onlineComponents}function __PRIVATE_getSyncEngine(t){return __PRIVATE_ensureOnlineComponents(t).then(e=>e.syncEngine)}async function __PRIVATE_getEventManager(t){const e=await __PRIVATE_ensureOnlineComponents(t),n=e.eventManager;return n.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),n.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),n}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(t,e,n={}){const s=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,u,d,f){const m=new __PRIVATE_AsyncObserver({next:y=>{m.xu(),l.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(o,g));const v=y.docs.has(u);!v&&y.fromCache?f.reject(new FirestoreError(N.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&y.fromCache&&d&&d.source==="server"?f.reject(new FirestoreError(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(y)},error:y=>f.reject(y)}),g=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(u.path),m,{includeMetadataChanges:!0,Qa:!0});return __PRIVATE_eventManagerListen(o,g)}(await __PRIVATE_getEventManager(t),t.asyncQueue,e,n,s)),s.promise}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(t,e,n={}){const s=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,u,d,f){const m=new __PRIVATE_AsyncObserver({next:y=>{m.xu(),l.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(o,g)),y.fromCache&&d.source==="server"?f.reject(new FirestoreError(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),g=new __PRIVATE_QueryListener(u,m,{includeMetadataChanges:!0,Qa:!0});return __PRIVATE_eventManagerListen(o,g)}(await __PRIVATE_getEventManager(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(t,e,n){if(!n)throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(t,e,n,s){if(e===!0&&s===!0)throw new FirestoreError(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function __PRIVATE_validateDocumentPath(t){if(!DocumentKey.isDocumentKey(t))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_validateCollectionPath(t){if(DocumentKey.isDocumentKey(t))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_valueDescription(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fail(12329,{type:typeof t})}function __PRIVATE_cast(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new FirestoreError(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=__PRIVATE_valueDescription(t);throw new FirestoreError(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on$1="firestore.googleapis.com",_n=!0;class FirestoreSettingsImpl{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=on$1,this.ssl=_n}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:_n;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mt;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ot)throw new FirestoreError(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(s.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new FirestoreError(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=sn.get(n);s&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),sn.delete(n),s.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(t,e,n,s={}){var i;t=__PRIVATE_cast(t,Firestore$1);const o=isCloudWorkstation(e),l=t._getSettings(),u=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(pingServer(`https://${d}`),updateEmulatorBanner("Firestore",!0)),l.host!==on$1&&l.host!==d&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:d,ssl:o,emulatorOptions:s});if(!deepEqual$1(f,u)&&(t._setSettings(f),s.mockUserToken)){let m,g;if(typeof s.mockUserToken=="string")m=s.mockUserToken,g=User$1.MOCK_USER;else{m=createMockUserToken(s.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new FirestoreError(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new User$1(y)}t._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}}class CollectionReference extends Query{constructor(e,n,s){super(e,n,__PRIVATE_newQueryForPath(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(t,e,...n){if(t=getModularInstance(t),__PRIVATE_validateNonEmptyArgument("collection","path",e),t instanceof Firestore$1){const s=ResourcePath.fromString(e,...n);return __PRIVATE_validateCollectionPath(s),new CollectionReference(t,null,s)}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ResourcePath.fromString(e,...n));return __PRIVATE_validateCollectionPath(s),new CollectionReference(t.firestore,null,s)}}function doc(t,e,...n){if(t=getModularInstance(t),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),t instanceof Firestore$1){const s=ResourcePath.fromString(e,...n);return __PRIVATE_validateDocumentPath(s),new DocumentReference(t,null,new DocumentKey(s))}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ResourcePath.fromString(e,...n));return __PRIVATE_validateDocumentPath(s),new DocumentReference(t.firestore,t instanceof CollectionReference?t.converter:null,new DocumentKey(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.rc=()=>{const s=getDocument();s&&__PRIVATE_logDebug(an,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=getDocument();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=getDocument();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new __PRIVATE_Deferred;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(an,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const i=DelayedOperation.createAndSchedule(this,e,n,s,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&fail(47125,{cc:__PRIVATE_getMessageOrStack(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function __PRIVATE_getMessageOrStack(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Firestore extends Firestore$1{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(t,e){const n=typeof t=="object"?t:getApp(),s=typeof t=="string"?t:ut,i=_getProvider(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const o=getDefaultEmulatorHostnameAndPort("firestore");o&&connectFirestoreEmulator(i,...o)}return i}function ensureFirestoreConfigured(t){if(t._terminated)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||__PRIVATE_configureFirestore(t),t._firestoreClient}function __PRIVATE_configureFirestore(t){var e,n,s;const i=t._freezeSettings(),o=function(u,d,f,m){return new DatabaseInfo(u,d,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new FirestoreClient(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(n){throw new FirestoreError(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new FirestoreError(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn$1=/^__.*__$/;class ParsedSetData{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,n,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,n,this.fieldTransforms)}}class ParsedUpdateData{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function __PRIVATE_isWrite(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ic:t})}}class __PRIVATE_ParseContextImpl{constructor(e,n,s,i,o,l){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:s,Rc:!1});return i.Vc(e),i}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:s,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ic)&&cn$1.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||__PRIVATE_newSerializer(e)}bc(e,n,s,i=!1){return new __PRIVATE_ParseContextImpl({Ic:e,methodName:n,wc:s,path:FieldPath$1.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(t){const e=t._freezeSettings(),n=__PRIVATE_newSerializer(t._databaseId);return new __PRIVATE_UserDataReader(t._databaseId,!!e.ignoreUndefinedProperties,n)}function __PRIVATE_parseSetData(t,e,n,s,i,o={}){const l=t.bc(o.merge||o.mergeFields?2:0,e,n,i);__PRIVATE_validatePlainObject("Data must be an object, but it was:",l,s);const u=__PRIVATE_parseObject(s,l);let d,f;if(o.merge)d=new FieldMask(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const y=__PRIVATE_fieldPathFromArgument$1(e,g,n);if(!l.contains(y))throw new FirestoreError(N.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(m,y)||m.push(y)}d=new FieldMask(m),f=l.fieldTransforms.filter(g=>d.covers(g.field))}else d=null,f=l.fieldTransforms;return new ParsedSetData(new ObjectValue(u),d,f)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}class __PRIVATE_ServerTimestampFieldValueImpl extends FieldValue{_toFieldTransform(e){return new FieldTransform(e.path,new __PRIVATE_ServerTimestampTransform)}isEqual(e){return e instanceof __PRIVATE_ServerTimestampFieldValueImpl}}function __PRIVATE_parseUpdateData(t,e,n,s){const i=t.bc(1,e,n);__PRIVATE_validatePlainObject("Data must be an object, but it was:",i,s);const o=[],l=ObjectValue.empty();forEach(s,(d,f)=>{const m=__PRIVATE_fieldPathFromDotSeparatedString(e,d,n);f=getModularInstance(f);const g=i.mc(m);if(f instanceof __PRIVATE_DeleteFieldValueImpl)o.push(m);else{const y=__PRIVATE_parseData(f,g);y!=null&&(o.push(m),l.set(m,y))}});const u=new FieldMask(o);return new ParsedUpdateData(l,u,i.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(t,e,n,s,i,o){const l=t.bc(1,e,n),u=[__PRIVATE_fieldPathFromArgument$1(e,s,n)],d=[i];if(o.length%2!=0)throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)u.push(__PRIVATE_fieldPathFromArgument$1(e,o[y])),d.push(o[y+1]);const f=[],m=ObjectValue.empty();for(let y=u.length-1;y>=0;--y)if(!__PRIVATE_fieldMaskContains(f,u[y])){const v=u[y];let E=d[y];E=getModularInstance(E);const w=l.mc(v);if(E instanceof __PRIVATE_DeleteFieldValueImpl)f.push(v);else{const A=__PRIVATE_parseData(E,w);A!=null&&(f.push(v),m.set(v,A))}}const g=new FieldMask(f);return new ParsedUpdateData(m,g,l.fieldTransforms)}function __PRIVATE_parseQueryValue(t,e,n,s=!1){return __PRIVATE_parseData(n,t.bc(s?4:3,e))}function __PRIVATE_parseData(t,e){if(__PRIVATE_looksLikeJsonObject(t=getModularInstance(t)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,t),__PRIVATE_parseObject(t,e);if(t instanceof FieldValue)return function(s,i){if(!__PRIVATE_isWrite(i.Ic))throw i.gc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,i){const o=[];let l=0;for(const u of s){let d=__PRIVATE_parseData(u,i.fc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(s,i){if((s=getModularInstance(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return toNumber(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=Timestamp.fromDate(s);return{timestampValue:toTimestamp(i.serializer,o)}}if(s instanceof Timestamp){const o=new Timestamp(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:toTimestamp(i.serializer,o)}}if(s instanceof GeoPoint)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(i.serializer,s._byteString)};if(s instanceof DocumentReference){const o=i.databaseId,l=s.firestore._databaseId;if(!l.isEqual(o))throw i.gc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:__PRIVATE_toResourceName(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof VectorValue)return function(l,u){return{mapValue:{fields:{[ct]:{stringValue:Pt},[Tt]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw u.gc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(u.serializer,f)})}}}}}}(s,i);throw i.gc(`Unsupported field value: ${__PRIVATE_valueDescription(s)}`)}(t,e)}function __PRIVATE_parseObject(t,e){const n={};return isEmpty(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(t,(s,i)=>{const o=__PRIVATE_parseData(i,e.Ac(s));o!=null&&(n[s]=o)}),{mapValue:{fields:n}}}function __PRIVATE_looksLikeJsonObject(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Timestamp||t instanceof GeoPoint||t instanceof Bytes||t instanceof DocumentReference||t instanceof FieldValue||t instanceof VectorValue)}function __PRIVATE_validatePlainObject(t,e,n){if(!__PRIVATE_looksLikeJsonObject(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=__PRIVATE_valueDescription(n);throw s==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+s)}}function __PRIVATE_fieldPathFromArgument$1(t,e,n){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(t,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",t,!1,void 0,n)}const ln=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(t,e,n){if(e.search(ln)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function __PRIVATE_createError(t,e,n,s,i){const o=s&&!s.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${s}`),l&&(d+=` in document ${i}`),d+=")"),new FirestoreError(N.INVALID_ARGUMENT,u+t+d)}function __PRIVATE_fieldMaskContains(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,n,s,i,o){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(t,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(t,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new FirestoreError(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(t,e,...n){let s=[];e instanceof AppliableConstraint&&s.push(e),s=s.concat(n),function(o){const l=o.filter(d=>d instanceof QueryCompositeFilterConstraint).length,u=o.filter(d=>d instanceof QueryFieldFilterConstraint).length;if(l>1||l>0&&u>0)throw new FirestoreError(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new QueryFieldFilterConstraint(e,n,s)}_apply(e){const n=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,n),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,n))}_parse(e){const n=__PRIVATE_newUserDataReader(e.firestore);return function(o,l,u,d,f,m,g){let y;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(g,m);const E=[];for(const w of g)E.push(__PRIVATE_parseDocumentIdValue(d,o,w));y={arrayValue:{values:E}}}else y=__PRIVATE_parseDocumentIdValue(d,o,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(g,m),y=__PRIVATE_parseQueryValue(u,l,g,m==="in"||m==="not-in");return FieldFilter.create(f,m,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function where(t,e,n){const s=e,i=__PRIVATE_fieldPathFromArgument("where",t);return QueryFieldFilterConstraint._create(i,s,n)}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new QueryCompositeFilterConstraint(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:CompositeFilter.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let l=i;const u=o.getFlattenedFilters();for(const d of u)__PRIVATE_validateNewFieldFilter(l,d),l=__PRIVATE_queryWithAddedFilter(l,d)}(e._query,n),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new QueryOrderByConstraint(e,n)}_apply(e){const n=function(i,o,l){if(i.startAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(o,l)}(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new __PRIVATE_QueryImpl(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function orderBy(t,e="asc"){const n=e,s=__PRIVATE_fieldPathFromArgument("orderBy",t);return QueryOrderByConstraint._create(s,n)}function __PRIVATE_parseDocumentIdValue(t,e,n){if(typeof(n=getModularInstance(n))=="string"){if(n==="")throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&n.indexOf("/")!==-1)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ResourcePath.fromString(n));if(!DocumentKey.isDocumentKey(s))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return __PRIVATE_refValue(t,new DocumentKey(s))}if(n instanceof DocumentReference)return __PRIVATE_refValue(t,n._key);throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(n)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(t,e){if(!Array.isArray(t)||t.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(t,e){const n=function(i,o){for(const l of i)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,n="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return forEach(e,(i,o)=>{s[i]=this.convertValue(o,n)}),s}convertVectorValue(e){var n,s,i;const o=(i=(s=(n=e.fields)===null||n===void 0?void 0:n[Tt].arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map(l=>__PRIVATE_normalizeNumber(l.doubleValue));return new VectorValue(o)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=__PRIVATE_getPreviousValue(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const n=__PRIVATE_normalizeTimestamp(e);return new Timestamp(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(s),9688,{name:e});const i=new DatabaseId(s.get(1),s.get(3)),o=new DocumentKey(s.popFirst(5));return i.isEqual(n)||__PRIVATE_logError(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,n,s,i,o,l){super(e,n,s,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new SnapshotMetadata(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,s.key,s,new SnapshotMetadata(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(u=>{const d=new QueryDocumentSnapshot(i._firestore,i._userDataWriter,u.doc.key,u.doc,new SnapshotMetadata(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new QueryDocumentSnapshot(i._firestore,i._userDataWriter,u.doc.key,u.doc,new SnapshotMetadata(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,m=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),m=l.indexOf(u.doc.key)),{type:__PRIVATE_resultChangeType(u.type),doc:d,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function __PRIVATE_resultChangeType(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(t){t=__PRIVATE_cast(t,DocumentReference);const e=__PRIVATE_cast(t.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),t._key).then(n=>__PRIVATE_convertToDocSnapshot(e,t,n))}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,n)}}function getDocs(t){t=__PRIVATE_cast(t,Query);const e=__PRIVATE_cast(t.firestore,Firestore),n=ensureFirestoreConfigured(e),s=new __PRIVATE_ExpUserDataWriter(e);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(t._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(n,t._query).then(i=>new QuerySnapshot(e,s,t,i))}function setDoc(t,e,n){t=__PRIVATE_cast(t,DocumentReference);const s=__PRIVATE_cast(t.firestore,Firestore),i=__PRIVATE_applyFirestoreDataConverter(t.converter,e,n);return executeWrite(s,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Precondition.none())])}function updateDoc(t,e,n,...s){t=__PRIVATE_cast(t,DocumentReference);const i=__PRIVATE_cast(t.firestore,Firestore),o=__PRIVATE_newUserDataReader(i);let l;return l=typeof(e=getModularInstance(e))=="string"||e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(o,"updateDoc",t._key,e,n,s):__PRIVATE_parseUpdateData(o,"updateDoc",t._key,e),executeWrite(i,[l.toMutation(t._key,Precondition.exists(!0))])}function deleteDoc(t){return executeWrite(__PRIVATE_cast(t.firestore,Firestore),[new __PRIVATE_DeleteMutation(t._key,Precondition.none())])}function addDoc(t,e){const n=__PRIVATE_cast(t.firestore,Firestore),s=doc(t),i=__PRIVATE_applyFirestoreDataConverter(t.converter,e);return executeWrite(n,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,Precondition.exists(!1))]).then(()=>s)}function executeWrite(t,e){return function(s,i){const o=new __PRIVATE_Deferred;return s.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(s),i,o)),o.promise}(ensureFirestoreConfigured(t),e)}function __PRIVATE_convertToDocSnapshot(t,e,n){const s=n.docs.get(e._key),i=new __PRIVATE_ExpUserDataWriter(t);return new DocumentSnapshot(t,i,e._key,s,new SnapshotMetadata(n.hasPendingWrites,n.fromCache),e.converter)}function serverTimestamp(){return new __PRIVATE_ServerTimestampFieldValueImpl("serverTimestamp")}(function(e,n=!0){(function(i){x=i})(SDK_VERSION),_registerComponent(new Component("firestore",(s,{instanceIdentifier:i,options:o})=>{const l=s.getProvider("app").getImmediate(),u=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(s.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(l,s.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new FirestoreError(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(f.options.projectId,m)}(l,i),l);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),registerVersion(F,M,e),registerVersion(F,M,"esm2017")})();var name="firebase",version$2="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name,version$2,"app");const firebaseConfig={apiKey:"AIzaSyC47zD98jUi-_T67Tn5sPNbClG56YOwu4Y",authDomain:"caminhantes-office.firebaseapp.com",projectId:"caminhantes-office",storageBucket:"caminhantes-office.firebasestorage.app",messagingSenderId:"1054244552778",appId:"1:1054244552778:web:3b37d72d563f3eeb3766b3"},app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),AuthContext=reactExports.createContext(void 0),useAuth=()=>{const t=reactExports.useContext(AuthContext);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},AuthProvider=({children:t})=>{const[e,n]=reactExports.useState(null),[s,i]=reactExports.useState(!0),o=async(f,m)=>{const{user:g}=await signInWithEmailAndPassword(auth,f,m);try{await updateDoc(doc(db,"users",g.uid),{lastLogin:serverTimestamp(),updatedAt:serverTimestamp()})}catch(y){console.error("Erro ao atualizar último login:",y)}},l=async(f,m,g)=>{const{user:y}=await createUserWithEmailAndPassword(auth,f,m);await updateProfile(y,{displayName:g})},u=async()=>{await signOut(auth)};reactExports.useEffect(()=>onAuthStateChanged(auth,m=>{n(m),i(!1)}),[]);const d={currentUser:e,login:o,register:l,logout:u,loading:s};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:d,children:!s&&t})},UserContext=reactExports.createContext(void 0),useUser=()=>{const t=reactExports.useContext(UserContext);if(t===void 0)throw new Error("useUser must be used within a UserProvider");return t},UserProvider=({children:t})=>{const{currentUser:e}=useAuth(),[n,s]=reactExports.useState(null),[i,o]=reactExports.useState([]),[l,u]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{var I,D,V,Y,j;if(e)try{const H=await getDoc(doc(db,"users",e.uid));if(H.exists()){const S=H.data(),T={...S,id:e.uid,createdAt:(I=S.createdAt)!=null&&I.toDate?S.createdAt.toDate():new Date(S.createdAt),updatedAt:(D=S.updatedAt)!=null&&D.toDate?S.updatedAt.toDate():new Date(S.updatedAt),lastLogin:(V=S.lastLogin)!=null&&V.toDate?S.lastLogin.toDate():S.lastLogin?new Date(S.lastLogin):void 0};s(T)}else{const S={name:e.displayName||"Usuário",email:e.email||"",role:"user",active:!0,createdAt:serverTimestamp(),updatedAt:serverTimestamp()};await setDoc(doc(db,"users",e.uid),S);const T=await getDoc(doc(db,"users",e.uid));if(T.exists()){const P=T.data();s({...P,id:e.uid,createdAt:(Y=P.createdAt)!=null&&Y.toDate?P.createdAt.toDate():new Date,updatedAt:(j=P.updatedAt)!=null&&j.toDate?P.updatedAt.toDate():new Date})}}}catch(H){console.error("Erro ao carregar dados do usuário:",H)}else s(null);u(!1)})()},[e]);const d=async A=>{try{const{user:I}=await createUserWithEmailAndPassword(auth,A.email,A.password);await updateProfile(I,{displayName:A.name});const D={name:A.name,email:A.email,role:A.role,active:A.active??!0,createdAt:serverTimestamp(),updatedAt:serverTimestamp(),createdBy:e==null?void 0:e.uid};await setDoc(doc(db,"users",I.uid),D),await g()}catch(I){throw console.error("Erro ao criar usuário:",I),I}},f=async(A,I)=>{try{await updateDoc(doc(db,"users",A),{active:I,updatedAt:serverTimestamp()}),o(D=>D.map(V=>V.id===A?{...V,active:I}:V))}catch(D){throw console.error("Erro ao atualizar status do usuário:",D),D}},m=async(A,I)=>{try{await updateDoc(doc(db,"users",A),{role:I,updatedAt:serverTimestamp()}),o(D=>D.map(V=>V.id===A?{...V,role:I}:V))}catch(D){throw console.error("Erro ao atualizar role do usuário:",D),D}},g=async()=>{try{const A=query(collection(db,"users"),orderBy("createdAt","desc")),I=await getDocs(A),D=[];I.forEach(V=>{var j,H,S;const Y=V.data();D.push({...Y,id:V.id,createdAt:(j=Y.createdAt)!=null&&j.toDate?Y.createdAt.toDate():new Date(Y.createdAt),updatedAt:(H=Y.updatedAt)!=null&&H.toDate?Y.updatedAt.toDate():new Date(Y.updatedAt),lastLogin:(S=Y.lastLogin)!=null&&S.toDate?Y.lastLogin.toDate():Y.lastLogin?new Date(Y.lastLogin):void 0})}),o(D)}catch(A){throw console.error("Erro ao carregar usuários:",A),A}},w={currentUserData:n,users:i,loading:l,createUser:d,updateUserStatus:f,updateUserRole:m,loadUsers:g,canAccessAdmin:()=>(n==null?void 0:n.role)==="root"||(n==null?void 0:n.role)==="editor",canManageUsers:()=>(n==null?void 0:n.role)==="root"||(n==null?void 0:n.role)==="editor",isRoot:()=>(n==null?void 0:n.role)==="root"};return jsxRuntimeExports.jsx(UserContext.Provider,{value:w,children:t})},IMGBB_API_KEY="bcd04b7d89a2adaba76c1df8a88a8ac4",IMGBB_API_URL="https://api.imgbb.com/1/upload",uploadToImgBB=async t=>{var e;try{const n=validateImageFile(t);if(!n.valid)return{success:!1,url:"",error:n.error||"Arquivo inválido"};const s=await fileToBase64(t),i=new FormData;i.append("key",IMGBB_API_KEY),i.append("image",s.split(",")[1]),i.append("name",t.name);const o=await fetch(IMGBB_API_URL,{method:"POST",body:i});if(!o.ok)return{success:!1,url:"",error:`Erro HTTP: ${o.status} - ${o.statusText}`};const l=await o.json();return l.success?{success:!0,url:l.data.url,deleteUrl:l.data.delete_url}:{success:!1,url:"",error:((e=l.error)==null?void 0:e.message)||"Erro no upload para ImgBB"}}catch(n){return console.error("Erro no upload para ImgBB:",n),{success:!1,url:"",error:n instanceof Error?n.message:"Erro de conexão com o serviço de upload"}}},fileToBase64=t=>new Promise((e,n)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>e(s.result),s.onerror=i=>n(i)}),validateImageFile=t=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type))return{valid:!1,error:"Formato não suportado. Use JPG, PNG ou WebP."};const n=32*1024*1024;return t.size>n?{valid:!1,error:"Arquivo muito grande. Máximo 32MB."}:{valid:!0}},PLAYER_POSITIONS={GOL:"Goleiro",DEF:"Defensor",MEI:"Meio-campo",ATA:"Atacante"},POSITION_COLORS={GOL:"bg-yellow-100 text-yellow-800",DEF:"bg-blue-100 text-blue-800",MEI:"bg-green-100 text-green-800",ATA:"bg-red-100 text-red-800"},INITIAL_LIVERPOOL_SQUAD=[{name:"Alisson",number:"1",position:"GOL"},{name:"Kelleher",number:"62",position:"GOL"},{name:"Jaros",number:"56",position:"GOL"},{name:"Alexander-Arnold",number:"66",position:"DEF"},{name:"Bradley",number:"84",position:"DEF"},{name:"Konaté",number:"5",position:"DEF"},{name:"Quansah",number:"78",position:"DEF"},{name:"Virgil",number:"4",position:"DEF"},{name:"Gomez",number:"2",position:"DEF"},{name:"Robertson",number:"26",position:"DEF"},{name:"Tsimikas",number:"21",position:"DEF"},{name:"Gravenberch",number:"38",position:"MEI"},{name:"Endo",number:"3",position:"MEI"},{name:"Mac Allister",number:"10",position:"MEI"},{name:"Jones",number:"17",position:"MEI"},{name:"Szoboszlai",number:"8",position:"MEI"},{name:"Elliott",number:"19",position:"MEI"},{name:"Nyoni",number:"98",position:"MEI"},{name:"McConnell",number:"53",position:"MEI"},{name:"Morton",number:"80",position:"MEI"},{name:"Gakpo",number:"18",position:"ATA"},{name:"Díaz",number:"7",position:"ATA"},{name:"Jota",number:"20",position:"ATA"},{name:"Núñez",number:"9",position:"ATA"},{name:"Chiesa",number:"14",position:"ATA"},{name:"Salah",number:"11",position:"ATA"},{name:"Ngumoha",number:"73",position:"ATA"}],SquadContext=reactExports.createContext(void 0),useSquad=()=>{const t=reactExports.useContext(SquadContext);if(t===void 0)throw new Error("useSquad must be used within a SquadProvider");return t},SquadProvider=({children:t})=>{const[e,n]=reactExports.useState([]),[s,i]=reactExports.useState(!0),{currentUser:o}=useAuth(),l=async()=>{try{i(!0);const D=collection(db,"squad"),V=await getDocs(D),Y=[];V.forEach(j=>{var S,T;const H=j.data();Y.push({id:j.id,name:H.name,number:H.number,position:H.position,imgUrl:H.imgUrl||[],createdAt:((S=H.createdAt)==null?void 0:S.toDate())||new Date,updatedAt:((T=H.updatedAt)==null?void 0:T.toDate())||new Date})}),Y.sort((j,H)=>{const S={GOL:1,DEF:2,MEI:3,ATA:4},T=S[j.position]-S[H.position];return T!==0?T:parseInt(j.number)-parseInt(H.number)}),n(Y)}catch(D){console.error("Erro ao carregar elenco:",D)}finally{i(!1)}},u=async D=>{if(!o)return{success:!1,error:"Usuário não autenticado"};const V=A(D);if(!V.valid)return{success:!1,error:V.error};if(v(D.number))return{success:!1,error:`Número ${D.number} já está em uso`};try{const Y=doc(collection(db,"squad")),j=new Date;await setDoc(Y,{name:D.name.trim(),number:D.number.trim(),position:D.position,imgUrl:[],createdAt:j,updatedAt:j});const H={id:Y.id,name:D.name.trim(),number:D.number.trim(),position:D.position,imgUrl:[],createdAt:j,updatedAt:j};return n(S=>[...S,H].sort((P,U)=>{const J={GOL:1,DEF:2,MEI:3,ATA:4},W=J[P.position]-J[U.position];return W!==0?W:parseInt(P.number)-parseInt(U.number)})),{success:!0}}catch(Y){return console.error("Erro ao adicionar jogador:",Y),{success:!1,error:"Erro interno ao adicionar jogador"}}},d=async(D,V)=>{const Y=A(V);if(!Y.valid)return{success:!1,error:Y.error};if(v(V.number,D))return{success:!1,error:`Número ${V.number} já está em uso`};try{const j=doc(db,"squad",D),H=new Date;return await updateDoc(j,{name:V.name.trim(),number:V.number.trim(),position:V.position,updatedAt:H}),n(S=>S.map(P=>P.id===D?{...P,name:V.name.trim(),number:V.number.trim(),position:V.position,updatedAt:H}:P).sort((P,U)=>{const J={GOL:1,DEF:2,MEI:3,ATA:4},W=J[P.position]-J[U.position];return W!==0?W:parseInt(P.number)-parseInt(U.number)})),{success:!0}}catch(j){return console.error("Erro ao atualizar jogador:",j),{success:!1,error:"Erro interno ao atualizar jogador"}}},f=async D=>{try{return await deleteDoc(doc(db,"squad",D)),n(V=>V.filter(Y=>Y.id!==D)),{success:!0}}catch(V){return console.error("Erro ao deletar jogador:",V),{success:!1,error:"Erro ao deletar jogador"}}},m=async(D,V)=>{if(!o)return{success:!1,error:"Usuário não autenticado"};const Y=e.find(j=>j.id===D);if(!Y)return{success:!1,error:"Jogador não encontrado"};if(Y.imgUrl&&Y.imgUrl.length>=2)return{success:!1,error:"Jogador já possui o máximo de 2 imagens"};try{const j=await uploadToImgBB(V);if(!j.success||!j.url)return{success:!1,error:j.error||"Erro no upload da imagem"};const H=doc(db,"squad",D),T=[...Y.imgUrl||[],j.url];return await updateDoc(H,{imgUrl:T,updatedAt:new Date}),n(P=>P.map(U=>U.id===D?{...U,imgUrl:T,updatedAt:new Date}:U)),{success:!0,imageUrl:j.url}}catch(j){return console.error("Erro ao fazer upload da imagem:",j),{success:!1,error:"Erro interno no upload da imagem"}}},g=async(D,V)=>{if(!o)return{success:!1,error:"Usuário não autenticado"};const Y=e.find(j=>j.id===D);if(!Y)return{success:!1,error:"Jogador não encontrado"};try{const H=(Y.imgUrl||[]).filter(T=>T!==V),S=doc(db,"squad",D);return await updateDoc(S,{imgUrl:H,updatedAt:new Date}),n(T=>T.map(P=>P.id===D?{...P,imgUrl:H,updatedAt:new Date}:P)),{success:!0}}catch(j){return console.error("Erro ao remover imagem:",j),{success:!1,error:"Erro interno ao remover imagem"}}},y=D=>e.filter(V=>V.position===D),v=(D,V)=>e.some(Y=>Y.number===D.trim()&&Y.id!==V),E=async()=>{if(!o)return{success:!1,error:"Usuário não autenticado"};try{if(i(!0),e.length>0)return{success:!1,error:"Elenco já foi inicializado"};const D=[],V=new Date;for(const Y of INITIAL_LIVERPOOL_SQUAD){const j=doc(collection(db,"squad"));D.push(setDoc(j,{...Y,imgUrl:[],createdAt:V,updatedAt:V}))}return await Promise.all(D),await l(),{success:!0}}catch(D){return console.error("Erro ao inicializar elenco:",D),{success:!1,error:"Erro ao inicializar elenco"}}finally{i(!1)}},w=async()=>{await l()},A=D=>{if(!D.name.trim())return{valid:!1,error:"Nome é obrigatório"};if(D.name.trim().length<2)return{valid:!1,error:"Nome deve ter pelo menos 2 caracteres"};if(!D.number.trim())return{valid:!1,error:"Número é obrigatório"};const V=parseInt(D.number.trim());return isNaN(V)||V<1||V>99?{valid:!1,error:"Número deve ser entre 1 e 99"}:D.position?{valid:!0}:{valid:!1,error:"Posição é obrigatória"}};reactExports.useEffect(()=>{l()},[]);const I={players:e,loading:s,addPlayer:u,updatePlayer:d,deletePlayer:f,getPlayersByPosition:y,isNumberTaken:v,initializeSquad:E,refreshSquad:w,uploadPlayerImage:m,removePlayerImage:g};return jsxRuntimeExports.jsx(SquadContext.Provider,{value:I,children:t})};var parser={},hasRequiredParser;function requireParser(){return hasRequiredParser||(hasRequiredParser=1,parser.load=function(t,e,n={}){var s,i,o;for(s in e)o=e[s],n[s]=(i=t[s])!=null?i:o;return n},parser.overwrite=function(t,e,n={}){var s,i;for(s in t)i=t[s],e[s]!==void 0&&(n[s]=i);return n}),parser}var DLList_1,hasRequiredDLList;function requireDLList(){if(hasRequiredDLList)return DLList_1;hasRequiredDLList=1;var t;return t=class{constructor(n,s){this.incr=n,this.decr=s,this._first=null,this._last=null,this.length=0}push(n){var s;this.length++,typeof this.incr=="function"&&this.incr(),s={value:n,prev:this._last,next:null},this._last!=null?(this._last.next=s,this._last=s):this._first=this._last=s}shift(){var n;if(this._first!=null)return this.length--,typeof this.decr=="function"&&this.decr(),n=this._first.value,(this._first=this._first.next)!=null?this._first.prev=null:this._last=null,n}first(){if(this._first!=null)return this._first.value}getArray(){var n,s,i;for(n=this._first,i=[];n!=null;)i.push((s=n,n=n.next,s.value));return i}forEachShift(n){var s;for(s=this.shift();s!=null;)n(s),s=this.shift()}debug(){var n,s,i,o,l;for(n=this._first,l=[];n!=null;)l.push((s=n,n=n.next,{value:s.value,prev:(i=s.prev)!=null?i.value:void 0,next:(o=s.next)!=null?o.value:void 0}));return l}},DLList_1=t,DLList_1}var Events_1,hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return Events_1;hasRequiredEvents=1;function t(s,i,o,l,u,d,f){try{var m=s[d](f),g=m.value}catch(y){o(y);return}m.done?i(g):Promise.resolve(g).then(l,u)}function e(s){return function(){var i=this,o=arguments;return new Promise(function(l,u){var d=s.apply(i,o);function f(g){t(d,l,u,f,m,"next",g)}function m(g){t(d,l,u,f,m,"throw",g)}f(void 0)})}}var n;return n=class{constructor(i){if(this.instance=i,this._events={},this.instance.on!=null||this.instance.once!=null||this.instance.removeAllListeners!=null)throw new Error("An Emitter already exists for this object");this.instance.on=(o,l)=>this._addListener(o,"many",l),this.instance.once=(o,l)=>this._addListener(o,"once",l),this.instance.removeAllListeners=(o=null)=>o!=null?delete this._events[o]:this._events={}}_addListener(i,o,l){var u;return(u=this._events)[i]==null&&(u[i]=[]),this._events[i].push({cb:l,status:o}),this.instance}listenerCount(i){return this._events[i]!=null?this._events[i].length:0}trigger(i,...o){var l=this;return e(function*(){var u,d;try{return i!=="debug"&&l.trigger("debug",`Event triggered: ${i}`,o),l._events[i]==null?void 0:(l._events[i]=l._events[i].filter(function(f){return f.status!=="none"}),d=l._events[i].map(function(){var f=e(function*(m){var g,y;if(m.status!=="none"){m.status==="once"&&(m.status="none");try{return y=typeof m.cb=="function"?m.cb(...o):void 0,typeof(y!=null?y.then:void 0)=="function"?yield y:y}catch(v){return g=v,l.trigger("error",g),null}}});return function(m){return f.apply(this,arguments)}}()),(yield Promise.all(d)).find(function(f){return f!=null}))}catch(f){return u=f,l.trigger("error",u),null}})()}},Events_1=n,Events_1}var Queues_1,hasRequiredQueues;function requireQueues(){if(hasRequiredQueues)return Queues_1;hasRequiredQueues=1;var t,e,n;return t=requireDLList(),e=requireEvents(),n=class{constructor(i){this.Events=new e(this),this._length=0,this._lists=(function(){var o,l,u;for(u=[],o=1,l=i;1<=l?o<=l:o>=l;1<=l?++o:--o)u.push(new t(()=>this.incr(),()=>this.decr()));return u}).call(this)}incr(){if(this._length++===0)return this.Events.trigger("leftzero")}decr(){if(--this._length===0)return this.Events.trigger("zero")}push(i){return this._lists[i.options.priority].push(i)}queued(i){return i!=null?this._lists[i].length:this._length}shiftAll(i){return this._lists.forEach(function(o){return o.forEachShift(i)})}getFirst(i=this._lists){var o,l,u;for(o=0,l=i.length;o<l;o++)if(u=i[o],u.length>0)return u;return[]}shiftLastFrom(i){return this.getFirst(this._lists.slice(i).reverse()).shift()}},Queues_1=n,Queues_1}var BottleneckError_1,hasRequiredBottleneckError;function requireBottleneckError(){if(hasRequiredBottleneckError)return BottleneckError_1;hasRequiredBottleneckError=1;var t;return t=class extends Error{},BottleneckError_1=t,BottleneckError_1}var Job_1,hasRequiredJob;function requireJob(){if(hasRequiredJob)return Job_1;hasRequiredJob=1;function t(u,d,f,m,g,y,v){try{var E=u[y](v),w=E.value}catch(A){f(A);return}E.done?d(w):Promise.resolve(w).then(m,g)}function e(u){return function(){var d=this,f=arguments;return new Promise(function(m,g){var y=u.apply(d,f);function v(w){t(y,m,g,v,E,"next",w)}function E(w){t(y,m,g,v,E,"throw",w)}v(void 0)})}}var n,s,i,o,l;return o=10,s=5,l=requireParser(),n=requireBottleneckError(),i=class{constructor(d,f,m,g,y,v,E,w){this.task=d,this.args=f,this.rejectOnDrop=y,this.Events=v,this._states=E,this.Promise=w,this.options=l.load(m,g),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===g.id&&(this.options.id=`${this.options.id}-${this._randomIndex()}`),this.promise=new this.Promise((A,I)=>{this._resolve=A,this._reject=I}),this.retryCount=0}_sanitizePriority(d){var f;return f=~~d!==d?s:d,f<0?0:f>o-1?o-1:f}_randomIndex(){return Math.random().toString(36).slice(2)}doDrop({error:d,message:f="This job has been dropped by Bottleneck"}={}){return this._states.remove(this.options.id)?(this.rejectOnDrop&&this._reject(d??new n(f)),this.Events.trigger("dropped",{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0):!1}_assertStatus(d){var f;if(f=this._states.jobStatus(this.options.id),!(f===d||d==="DONE"&&f===null))throw new n(`Invalid job status ${f}, expected ${d}. Please open an issue at https://github.com/SGrondin/bottleneck/issues`)}doReceive(){return this._states.start(this.options.id),this.Events.trigger("received",{args:this.args,options:this.options})}doQueue(d,f){return this._assertStatus("RECEIVED"),this._states.next(this.options.id),this.Events.trigger("queued",{args:this.args,options:this.options,reachedHWM:d,blocked:f})}doRun(){return this.retryCount===0?(this._assertStatus("QUEUED"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),this.Events.trigger("scheduled",{args:this.args,options:this.options})}doExecute(d,f,m,g){var y=this;return e(function*(){var v,E,w;y.retryCount===0?(y._assertStatus("RUNNING"),y._states.next(y.options.id)):y._assertStatus("EXECUTING"),E={args:y.args,options:y.options,retryCount:y.retryCount},y.Events.trigger("executing",E);try{if(w=yield d!=null?d.schedule(y.options,y.task,...y.args):y.task(...y.args),f())return y.doDone(E),yield g(y.options,E),y._assertStatus("DONE"),y._resolve(w)}catch(A){return v=A,y._onFailure(v,E,f,m,g)}})()}doExpire(d,f,m){var g,y;return this._states.jobStatus(this.options.id==="RUNNING")&&this._states.next(this.options.id),this._assertStatus("EXECUTING"),y={args:this.args,options:this.options,retryCount:this.retryCount},g=new n(`This job timed out after ${this.options.expiration} ms.`),this._onFailure(g,y,d,f,m)}_onFailure(d,f,m,g,y){var v=this;return e(function*(){var E,w;if(m())return E=yield v.Events.trigger("failed",d,f),E!=null?(w=~~E,v.Events.trigger("retry",`Retrying ${v.options.id} after ${w} ms`,f),v.retryCount++,g(w)):(v.doDone(f),yield y(v.options,f),v._assertStatus("DONE"),v._reject(d))})()}doDone(d){return this._assertStatus("EXECUTING"),this._states.next(this.options.id),this.Events.trigger("done",d)}},Job_1=i,Job_1}var LocalDatastore_1,hasRequiredLocalDatastore;function requireLocalDatastore(){if(hasRequiredLocalDatastore)return LocalDatastore_1;hasRequiredLocalDatastore=1;function t(o,l,u,d,f,m,g){try{var y=o[m](g),v=y.value}catch(E){u(E);return}y.done?l(v):Promise.resolve(v).then(d,f)}function e(o){return function(){var l=this,u=arguments;return new Promise(function(d,f){var m=o.apply(l,u);function g(v){t(m,d,f,g,y,"next",v)}function y(v){t(m,d,f,g,y,"throw",v)}g(void 0)})}}var n,s,i;return i=requireParser(),n=requireBottleneckError(),s=class{constructor(l,u,d){this.instance=l,this.storeOptions=u,this.clientId=this.instance._randomIndex(),i.load(d,d,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat()}_startHeartbeat(){var l;return this.heartbeat==null&&(this.storeOptions.reservoirRefreshInterval!=null&&this.storeOptions.reservoirRefreshAmount!=null||this.storeOptions.reservoirIncreaseInterval!=null&&this.storeOptions.reservoirIncreaseAmount!=null)?typeof(l=this.heartbeat=setInterval(()=>{var u,d,f,m,g;if(m=Date.now(),this.storeOptions.reservoirRefreshInterval!=null&&m>=this._lastReservoirRefresh+this.storeOptions.reservoirRefreshInterval&&(this._lastReservoirRefresh=m,this.storeOptions.reservoir=this.storeOptions.reservoirRefreshAmount,this.instance._drainAll(this.computeCapacity())),this.storeOptions.reservoirIncreaseInterval!=null&&m>=this._lastReservoirIncrease+this.storeOptions.reservoirIncreaseInterval){var y=this.storeOptions;if(u=y.reservoirIncreaseAmount,f=y.reservoirIncreaseMaximum,g=y.reservoir,this._lastReservoirIncrease=m,d=f!=null?Math.min(u,f-g):u,d>0)return this.storeOptions.reservoir+=d,this.instance._drainAll(this.computeCapacity())}},this.heartbeatInterval)).unref=="function"?l.unref():void 0:clearInterval(this.heartbeat)}__publish__(l){var u=this;return e(function*(){return yield u.yieldLoop(),u.instance.Events.trigger("message",l.toString())})()}__disconnect__(l){var u=this;return e(function*(){return yield u.yieldLoop(),clearInterval(u.heartbeat),u.Promise.resolve()})()}yieldLoop(l=0){return new this.Promise(function(u,d){return setTimeout(u,l)})}computePenalty(){var l;return(l=this.storeOptions.penalty)!=null?l:15*this.storeOptions.minTime||5e3}__updateSettings__(l){var u=this;return e(function*(){return yield u.yieldLoop(),i.overwrite(l,l,u.storeOptions),u._startHeartbeat(),u.instance._drainAll(u.computeCapacity()),!0})()}__running__(){var l=this;return e(function*(){return yield l.yieldLoop(),l._running})()}__queued__(){var l=this;return e(function*(){return yield l.yieldLoop(),l.instance.queued()})()}__done__(){var l=this;return e(function*(){return yield l.yieldLoop(),l._done})()}__groupCheck__(l){var u=this;return e(function*(){return yield u.yieldLoop(),u._nextRequest+u.timeout<l})()}computeCapacity(){var l,u,d=this.storeOptions;return l=d.maxConcurrent,u=d.reservoir,l!=null&&u!=null?Math.min(l-this._running,u):l!=null?l-this._running:u??null}conditionsCheck(l){var u;return u=this.computeCapacity(),u==null||l<=u}__incrementReservoir__(l){var u=this;return e(function*(){var d;return yield u.yieldLoop(),d=u.storeOptions.reservoir+=l,u.instance._drainAll(u.computeCapacity()),d})()}__currentReservoir__(){var l=this;return e(function*(){return yield l.yieldLoop(),l.storeOptions.reservoir})()}isBlocked(l){return this._unblockTime>=l}check(l,u){return this.conditionsCheck(l)&&this._nextRequest-u<=0}__check__(l){var u=this;return e(function*(){var d;return yield u.yieldLoop(),d=Date.now(),u.check(l,d)})()}__register__(l,u,d){var f=this;return e(function*(){var m,g;return yield f.yieldLoop(),m=Date.now(),f.conditionsCheck(u)?(f._running+=u,f.storeOptions.reservoir!=null&&(f.storeOptions.reservoir-=u),g=Math.max(f._nextRequest-m,0),f._nextRequest=m+g+f.storeOptions.minTime,{success:!0,wait:g,reservoir:f.storeOptions.reservoir}):{success:!1}})()}strategyIsBlock(){return this.storeOptions.strategy===3}__submit__(l,u){var d=this;return e(function*(){var f,m,g;if(yield d.yieldLoop(),d.storeOptions.maxConcurrent!=null&&u>d.storeOptions.maxConcurrent)throw new n(`Impossible to add a job having a weight of ${u} to a limiter having a maxConcurrent setting of ${d.storeOptions.maxConcurrent}`);return m=Date.now(),g=d.storeOptions.highWater!=null&&l===d.storeOptions.highWater&&!d.check(u,m),f=d.strategyIsBlock()&&(g||d.isBlocked(m)),f&&(d._unblockTime=m+d.computePenalty(),d._nextRequest=d._unblockTime+d.storeOptions.minTime,d.instance._dropAllQueued()),{reachedHWM:g,blocked:f,strategy:d.storeOptions.strategy}})()}__free__(l,u){var d=this;return e(function*(){return yield d.yieldLoop(),d._running-=u,d._done+=u,d.instance._drainAll(d.computeCapacity()),{running:d._running}})()}},LocalDatastore_1=s,LocalDatastore_1}var Scripts={};const require$$0={"blacklist_client.lua":`local blacklist = ARGV[num_static_argv + 1]

if redis.call('zscore', client_last_seen_key, blacklist) then
  redis.call('zadd', client_last_seen_key, 0, blacklist)
end


return {}
`,"check.lua":`local weight = tonumber(ARGV[num_static_argv + 1])

local capacity = process_tick(now, false)['capacity']
local nextRequest = tonumber(redis.call('hget', settings_key, 'nextRequest'))

return conditions_check(capacity, weight) and nextRequest - now <= 0
`,"conditions_check.lua":`local conditions_check = function (capacity, weight)
  return capacity == nil or weight <= capacity
end
`,"current_reservoir.lua":`return process_tick(now, false)['reservoir']
`,"done.lua":`process_tick(now, false)

return tonumber(redis.call('hget', settings_key, 'done'))
`,"free.lua":`local index = ARGV[num_static_argv + 1]

redis.call('zadd', job_expirations_key, 0, index)

return process_tick(now, false)['running']
`,"get_time.lua":`redis.replicate_commands()

local get_time = function ()
  local time = redis.call('time')

  return tonumber(time[1]..string.sub(time[2], 1, 3))
end
`,"group_check.lua":`return not (redis.call('exists', settings_key) == 1)
`,"heartbeat.lua":`process_tick(now, true)
`,"increment_reservoir.lua":`local incr = tonumber(ARGV[num_static_argv + 1])

redis.call('hincrby', settings_key, 'reservoir', incr)

local reservoir = process_tick(now, true)['reservoir']

local groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))
refresh_expiration(0, 0, groupTimeout)

return reservoir
`,"init.lua":`local clear = tonumber(ARGV[num_static_argv + 1])
local limiter_version = ARGV[num_static_argv + 2]
local num_local_argv = num_static_argv + 2

if clear == 1 then
  redis.call('del', unpack(KEYS))
end

if redis.call('exists', settings_key) == 0 then
  -- Create
  local args = {'hmset', settings_key}

  for i = num_local_argv + 1, #ARGV do
    table.insert(args, ARGV[i])
  end

  redis.call(unpack(args))
  redis.call('hmset', settings_key,
    'nextRequest', now,
    'lastReservoirRefresh', now,
    'lastReservoirIncrease', now,
    'running', 0,
    'done', 0,
    'unblockTime', 0,
    'capacityPriorityCounter', 0
  )

else
  -- Apply migrations
  local settings = redis.call('hmget', settings_key,
    'id',
    'version'
  )
  local id = settings[1]
  local current_version = settings[2]

  if current_version ~= limiter_version then
    local version_digits = {}
    for k, v in string.gmatch(current_version, "([^.]+)") do
      table.insert(version_digits, tonumber(k))
    end

    -- 2.10.0
    if version_digits[2] < 10 then
      redis.call('hsetnx', settings_key, 'reservoirRefreshInterval', '')
      redis.call('hsetnx', settings_key, 'reservoirRefreshAmount', '')
      redis.call('hsetnx', settings_key, 'lastReservoirRefresh', '')
      redis.call('hsetnx', settings_key, 'done', 0)
      redis.call('hset', settings_key, 'version', '2.10.0')
    end

    -- 2.11.1
    if version_digits[2] < 11 or (version_digits[2] == 11 and version_digits[3] < 1) then
      if redis.call('hstrlen', settings_key, 'lastReservoirRefresh') == 0 then
        redis.call('hmset', settings_key,
          'lastReservoirRefresh', now,
          'version', '2.11.1'
        )
      end
    end

    -- 2.14.0
    if version_digits[2] < 14 then
      local old_running_key = 'b_'..id..'_running'
      local old_executing_key = 'b_'..id..'_executing'

      if redis.call('exists', old_running_key) == 1 then
        redis.call('rename', old_running_key, job_weights_key)
      end
      if redis.call('exists', old_executing_key) == 1 then
        redis.call('rename', old_executing_key, job_expirations_key)
      end
      redis.call('hset', settings_key, 'version', '2.14.0')
    end

    -- 2.15.2
    if version_digits[2] < 15 or (version_digits[2] == 15 and version_digits[3] < 2) then
      redis.call('hsetnx', settings_key, 'capacityPriorityCounter', 0)
      redis.call('hset', settings_key, 'version', '2.15.2')
    end

    -- 2.17.0
    if version_digits[2] < 17 then
      redis.call('hsetnx', settings_key, 'clientTimeout', 10000)
      redis.call('hset', settings_key, 'version', '2.17.0')
    end

    -- 2.18.0
    if version_digits[2] < 18 then
      redis.call('hsetnx', settings_key, 'reservoirIncreaseInterval', '')
      redis.call('hsetnx', settings_key, 'reservoirIncreaseAmount', '')
      redis.call('hsetnx', settings_key, 'reservoirIncreaseMaximum', '')
      redis.call('hsetnx', settings_key, 'lastReservoirIncrease', now)
      redis.call('hset', settings_key, 'version', '2.18.0')
    end

  end

  process_tick(now, false)
end

local groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))
refresh_expiration(0, 0, groupTimeout)

return {}
`,"process_tick.lua":`local process_tick = function (now, always_publish)

  local compute_capacity = function (maxConcurrent, running, reservoir)
    if maxConcurrent ~= nil and reservoir ~= nil then
      return math.min((maxConcurrent - running), reservoir)
    elseif maxConcurrent ~= nil then
      return maxConcurrent - running
    elseif reservoir ~= nil then
      return reservoir
    else
      return nil
    end
  end

  local settings = redis.call('hmget', settings_key,
    'id',
    'maxConcurrent',
    'running',
    'reservoir',
    'reservoirRefreshInterval',
    'reservoirRefreshAmount',
    'lastReservoirRefresh',
    'reservoirIncreaseInterval',
    'reservoirIncreaseAmount',
    'reservoirIncreaseMaximum',
    'lastReservoirIncrease',
    'capacityPriorityCounter',
    'clientTimeout'
  )
  local id = settings[1]
  local maxConcurrent = tonumber(settings[2])
  local running = tonumber(settings[3])
  local reservoir = tonumber(settings[4])
  local reservoirRefreshInterval = tonumber(settings[5])
  local reservoirRefreshAmount = tonumber(settings[6])
  local lastReservoirRefresh = tonumber(settings[7])
  local reservoirIncreaseInterval = tonumber(settings[8])
  local reservoirIncreaseAmount = tonumber(settings[9])
  local reservoirIncreaseMaximum = tonumber(settings[10])
  local lastReservoirIncrease = tonumber(settings[11])
  local capacityPriorityCounter = tonumber(settings[12])
  local clientTimeout = tonumber(settings[13])

  local initial_capacity = compute_capacity(maxConcurrent, running, reservoir)

  --
  -- Process 'running' changes
  --
  local expired = redis.call('zrangebyscore', job_expirations_key, '-inf', '('..now)

  if #expired > 0 then
    redis.call('zremrangebyscore', job_expirations_key, '-inf', '('..now)

    local flush_batch = function (batch, acc)
      local weights = redis.call('hmget', job_weights_key, unpack(batch))
                      redis.call('hdel',  job_weights_key, unpack(batch))
      local clients = redis.call('hmget', job_clients_key, unpack(batch))
                      redis.call('hdel',  job_clients_key, unpack(batch))

      -- Calculate sum of removed weights
      for i = 1, #weights do
        acc['total'] = acc['total'] + (tonumber(weights[i]) or 0)
      end

      -- Calculate sum of removed weights by client
      local client_weights = {}
      for i = 1, #clients do
        local removed = tonumber(weights[i]) or 0
        if removed > 0 then
          acc['client_weights'][clients[i]] = (acc['client_weights'][clients[i]] or 0) + removed
        end
      end
    end

    local acc = {
      ['total'] = 0,
      ['client_weights'] = {}
    }
    local batch_size = 1000

    -- Compute changes to Zsets and apply changes to Hashes
    for i = 1, #expired, batch_size do
      local batch = {}
      for j = i, math.min(i + batch_size - 1, #expired) do
        table.insert(batch, expired[j])
      end

      flush_batch(batch, acc)
    end

    -- Apply changes to Zsets
    if acc['total'] > 0 then
      redis.call('hincrby', settings_key, 'done', acc['total'])
      running = tonumber(redis.call('hincrby', settings_key, 'running', -acc['total']))
    end

    for client, weight in pairs(acc['client_weights']) do
      redis.call('zincrby', client_running_key, -weight, client)
    end
  end

  --
  -- Process 'reservoir' changes
  --
  local reservoirRefreshActive = reservoirRefreshInterval ~= nil and reservoirRefreshAmount ~= nil
  if reservoirRefreshActive and now >= lastReservoirRefresh + reservoirRefreshInterval then
    reservoir = reservoirRefreshAmount
    redis.call('hmset', settings_key,
      'reservoir', reservoir,
      'lastReservoirRefresh', now
    )
  end

  local reservoirIncreaseActive = reservoirIncreaseInterval ~= nil and reservoirIncreaseAmount ~= nil
  if reservoirIncreaseActive and now >= lastReservoirIncrease + reservoirIncreaseInterval then
    local num_intervals = math.floor((now - lastReservoirIncrease) / reservoirIncreaseInterval)
    local incr = reservoirIncreaseAmount * num_intervals
    if reservoirIncreaseMaximum ~= nil then
      incr = math.min(incr, reservoirIncreaseMaximum - (reservoir or 0))
    end
    if incr > 0 then
      reservoir = (reservoir or 0) + incr
    end
    redis.call('hmset', settings_key,
      'reservoir', reservoir,
      'lastReservoirIncrease', lastReservoirIncrease + (num_intervals * reservoirIncreaseInterval)
    )
  end

  --
  -- Clear unresponsive clients
  --
  local unresponsive = redis.call('zrangebyscore', client_last_seen_key, '-inf', (now - clientTimeout))
  local unresponsive_lookup = {}
  local terminated_clients = {}
  for i = 1, #unresponsive do
    unresponsive_lookup[unresponsive[i]] = true
    if tonumber(redis.call('zscore', client_running_key, unresponsive[i])) == 0 then
      table.insert(terminated_clients, unresponsive[i])
    end
  end
  if #terminated_clients > 0 then
    redis.call('zrem', client_running_key,         unpack(terminated_clients))
    redis.call('hdel', client_num_queued_key,      unpack(terminated_clients))
    redis.call('zrem', client_last_registered_key, unpack(terminated_clients))
    redis.call('zrem', client_last_seen_key,       unpack(terminated_clients))
  end

  --
  -- Broadcast capacity changes
  --
  local final_capacity = compute_capacity(maxConcurrent, running, reservoir)

  if always_publish or (initial_capacity ~= nil and final_capacity == nil) then
    -- always_publish or was not unlimited, now unlimited
    redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))

  elseif initial_capacity ~= nil and final_capacity ~= nil and final_capacity > initial_capacity then
    -- capacity was increased
    -- send the capacity message to the limiter having the lowest number of running jobs
    -- the tiebreaker is the limiter having not registered a job in the longest time

    local lowest_concurrency_value = nil
    local lowest_concurrency_clients = {}
    local lowest_concurrency_last_registered = {}
    local client_concurrencies = redis.call('zrange', client_running_key, 0, -1, 'withscores')

    for i = 1, #client_concurrencies, 2 do
      local client = client_concurrencies[i]
      local concurrency = tonumber(client_concurrencies[i+1])

      if (
        lowest_concurrency_value == nil or lowest_concurrency_value == concurrency
      ) and (
        not unresponsive_lookup[client]
      ) and (
        tonumber(redis.call('hget', client_num_queued_key, client)) > 0
      ) then
        lowest_concurrency_value = concurrency
        table.insert(lowest_concurrency_clients, client)
        local last_registered = tonumber(redis.call('zscore', client_last_registered_key, client))
        table.insert(lowest_concurrency_last_registered, last_registered)
      end
    end

    if #lowest_concurrency_clients > 0 then
      local position = 1
      local earliest = lowest_concurrency_last_registered[1]

      for i,v in ipairs(lowest_concurrency_last_registered) do
        if v < earliest then
          position = i
          earliest = v
        end
      end

      local next_client = lowest_concurrency_clients[position]
      redis.call('publish', 'b_'..id,
        'capacity-priority:'..(final_capacity or '')..
        ':'..next_client..
        ':'..capacityPriorityCounter
      )
      redis.call('hincrby', settings_key, 'capacityPriorityCounter', '1')
    else
      redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))
    end
  end

  return {
    ['capacity'] = final_capacity,
    ['running'] = running,
    ['reservoir'] = reservoir
  }
end
`,"queued.lua":`local clientTimeout = tonumber(redis.call('hget', settings_key, 'clientTimeout'))
local valid_clients = redis.call('zrangebyscore', client_last_seen_key, (now - clientTimeout), 'inf')
local client_queued = redis.call('hmget', client_num_queued_key, unpack(valid_clients))

local sum = 0
for i = 1, #client_queued do
  sum = sum + tonumber(client_queued[i])
end

return sum
`,"refresh_expiration.lua":`local refresh_expiration = function (now, nextRequest, groupTimeout)

  if groupTimeout ~= nil then
    local ttl = (nextRequest + groupTimeout) - now

    for i = 1, #KEYS do
      redis.call('pexpire', KEYS[i], ttl)
    end
  end

end
`,"refs.lua":`local settings_key = KEYS[1]
local job_weights_key = KEYS[2]
local job_expirations_key = KEYS[3]
local job_clients_key = KEYS[4]
local client_running_key = KEYS[5]
local client_num_queued_key = KEYS[6]
local client_last_registered_key = KEYS[7]
local client_last_seen_key = KEYS[8]

local now = tonumber(ARGV[1])
local client = ARGV[2]

local num_static_argv = 2
`,"register.lua":`local index = ARGV[num_static_argv + 1]
local weight = tonumber(ARGV[num_static_argv + 2])
local expiration = tonumber(ARGV[num_static_argv + 3])

local state = process_tick(now, false)
local capacity = state['capacity']
local reservoir = state['reservoir']

local settings = redis.call('hmget', settings_key,
  'nextRequest',
  'minTime',
  'groupTimeout'
)
local nextRequest = tonumber(settings[1])
local minTime = tonumber(settings[2])
local groupTimeout = tonumber(settings[3])

if conditions_check(capacity, weight) then

  redis.call('hincrby', settings_key, 'running', weight)
  redis.call('hset', job_weights_key, index, weight)
  if expiration ~= nil then
    redis.call('zadd', job_expirations_key, now + expiration, index)
  end
  redis.call('hset', job_clients_key, index, client)
  redis.call('zincrby', client_running_key, weight, client)
  redis.call('hincrby', client_num_queued_key, client, -1)
  redis.call('zadd', client_last_registered_key, now, client)

  local wait = math.max(nextRequest - now, 0)
  local newNextRequest = now + wait + minTime

  if reservoir == nil then
    redis.call('hset', settings_key,
      'nextRequest', newNextRequest
    )
  else
    reservoir = reservoir - weight
    redis.call('hmset', settings_key,
      'reservoir', reservoir,
      'nextRequest', newNextRequest
    )
  end

  refresh_expiration(now, newNextRequest, groupTimeout)

  return {true, wait, reservoir}

else
  return {false}
end
`,"register_client.lua":`local queued = tonumber(ARGV[num_static_argv + 1])

-- Could have been re-registered concurrently
if not redis.call('zscore', client_last_seen_key, client) then
  redis.call('zadd', client_running_key, 0, client)
  redis.call('hset', client_num_queued_key, client, queued)
  redis.call('zadd', client_last_registered_key, 0, client)
end

redis.call('zadd', client_last_seen_key, now, client)

return {}
`,"running.lua":`return process_tick(now, false)['running']
`,"submit.lua":`local queueLength = tonumber(ARGV[num_static_argv + 1])
local weight = tonumber(ARGV[num_static_argv + 2])

local capacity = process_tick(now, false)['capacity']

local settings = redis.call('hmget', settings_key,
  'id',
  'maxConcurrent',
  'highWater',
  'nextRequest',
  'strategy',
  'unblockTime',
  'penalty',
  'minTime',
  'groupTimeout'
)
local id = settings[1]
local maxConcurrent = tonumber(settings[2])
local highWater = tonumber(settings[3])
local nextRequest = tonumber(settings[4])
local strategy = tonumber(settings[5])
local unblockTime = tonumber(settings[6])
local penalty = tonumber(settings[7])
local minTime = tonumber(settings[8])
local groupTimeout = tonumber(settings[9])

if maxConcurrent ~= nil and weight > maxConcurrent then
  return redis.error_reply('OVERWEIGHT:'..weight..':'..maxConcurrent)
end

local reachedHWM = (highWater ~= nil and queueLength == highWater
  and not (
    conditions_check(capacity, weight)
    and nextRequest - now <= 0
  )
)

local blocked = strategy == 3 and (reachedHWM or unblockTime >= now)

if blocked then
  local computedPenalty = penalty
  if computedPenalty == nil then
    if minTime == 0 then
      computedPenalty = 5000
    else
      computedPenalty = 15 * minTime
    end
  end

  local newNextRequest = now + computedPenalty + minTime

  redis.call('hmset', settings_key,
    'unblockTime', now + computedPenalty,
    'nextRequest', newNextRequest
  )

  local clients_queued_reset = redis.call('hkeys', client_num_queued_key)
  local queued_reset = {}
  for i = 1, #clients_queued_reset do
    table.insert(queued_reset, clients_queued_reset[i])
    table.insert(queued_reset, 0)
  end
  redis.call('hmset', client_num_queued_key, unpack(queued_reset))

  redis.call('publish', 'b_'..id, 'blocked:')

  refresh_expiration(now, newNextRequest, groupTimeout)
end

if not blocked and not reachedHWM then
  redis.call('hincrby', client_num_queued_key, client, 1)
end

return {reachedHWM, blocked, strategy}
`,"update_settings.lua":`local args = {'hmset', settings_key}

for i = num_static_argv + 1, #ARGV do
  table.insert(args, ARGV[i])
end

redis.call(unpack(args))

process_tick(now, true)

local groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))
refresh_expiration(0, 0, groupTimeout)

return {}
`,"validate_client.lua":`if not redis.call('zscore', client_last_seen_key, client) then
  return redis.error_reply('UNKNOWN_CLIENT')
end

redis.call('zadd', client_last_seen_key, now, client)
`,"validate_keys.lua":`if not (redis.call('exists', settings_key) == 1) then
  return redis.error_reply('SETTINGS_KEY_NOT_FOUND')
end
`};var hasRequiredScripts;function requireScripts(){return hasRequiredScripts||(hasRequiredScripts=1,function(t){var e,n,s;n=require$$0,e={refs:n["refs.lua"],validate_keys:n["validate_keys.lua"],validate_client:n["validate_client.lua"],refresh_expiration:n["refresh_expiration.lua"],process_tick:n["process_tick.lua"],conditions_check:n["conditions_check.lua"],get_time:n["get_time.lua"]},t.allKeys=function(i){return[`b_${i}_settings`,`b_${i}_job_weights`,`b_${i}_job_expirations`,`b_${i}_job_clients`,`b_${i}_client_running`,`b_${i}_client_num_queued`,`b_${i}_client_last_registered`,`b_${i}_client_last_seen`]},s={init:{keys:t.allKeys,headers:["process_tick"],refresh_expiration:!0,code:n["init.lua"]},group_check:{keys:t.allKeys,headers:[],refresh_expiration:!1,code:n["group_check.lua"]},register_client:{keys:t.allKeys,headers:["validate_keys"],refresh_expiration:!1,code:n["register_client.lua"]},blacklist_client:{keys:t.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:n["blacklist_client.lua"]},heartbeat:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["heartbeat.lua"]},update_settings:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["update_settings.lua"]},running:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["running.lua"]},queued:{keys:t.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:n["queued.lua"]},done:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["done.lua"]},check:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!1,code:n["check.lua"]},submit:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:n["submit.lua"]},register:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:n["register.lua"]},free:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["free.lua"]},current_reservoir:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["current_reservoir.lua"]},increment_reservoir:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["increment_reservoir.lua"]}},t.names=Object.keys(s),t.keys=function(i,o){return s[i].keys(o)},t.payload=function(i){var o;return o=s[i],Array.prototype.concat(e.refs,o.headers.map(function(l){return e[l]}),o.refresh_expiration?e.refresh_expiration:"",o.code).join(`
`)}}(Scripts)),Scripts}var RedisConnection_1,hasRequiredRedisConnection;function requireRedisConnection(){if(hasRequiredRedisConnection)return RedisConnection_1;hasRequiredRedisConnection=1;function asyncGeneratorStep(t,e,n,s,i,o,l){try{var u=t[o](l),d=u.value}catch(f){n(f);return}u.done?e(d):Promise.resolve(d).then(s,i)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise(function(s,i){var o=t.apply(e,n);function l(d){asyncGeneratorStep(o,s,i,l,u,"next",d)}function u(d){asyncGeneratorStep(o,s,i,l,u,"throw",d)}l(void 0)})}}var Events,RedisConnection,Scripts,parser;return parser=requireParser(),Events=requireEvents(),Scripts=requireScripts(),RedisConnection=(function(){class RedisConnection{constructor(options={}){parser.load(options,this.defaults,this),this.Redis==null&&(this.Redis=eval("require")("redis")),this.Events==null&&(this.Events=new Events(this)),this.terminated=!1,this.client==null&&(this.client=this.Redis.createClient(this.clientOptions)),this.subscriber=this.client.duplicate(),this.limiters={},this.shas={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then(()=>this._loadScripts()).then(()=>({client:this.client,subscriber:this.subscriber}))}_setup(t,e){return t.setMaxListeners(0),new this.Promise((n,s)=>(t.on("error",i=>this.Events.trigger("error",i)),e&&t.on("message",(i,o)=>{var l;return(l=this.limiters[i])!=null?l._store.onMessage(i,o):void 0}),t.ready?n():t.once("ready",n)))}_loadScript(t){return new this.Promise((e,n)=>{var s;return s=Scripts.payload(t),this.client.multi([["script","load",s]]).exec((i,o)=>i!=null?n(i):(this.shas[t]=o[0],e(o[0])))})}_loadScripts(){return this.Promise.all(Scripts.names.map(t=>this._loadScript(t)))}__runCommand__(t){var e=this;return _asyncToGenerator(function*(){return yield e.ready,new e.Promise((n,s)=>e.client.multi([t]).exec_atomic(function(i,o){return i!=null?s(i):n(o[0])}))})()}__addLimiter__(t){return this.Promise.all([t.channel(),t.channel_client()].map(e=>new this.Promise((n,s)=>{var i;return i=o=>{if(o===e)return this.subscriber.removeListener("subscribe",i),this.limiters[e]=t,n()},this.subscriber.on("subscribe",i),this.subscriber.subscribe(e)})))}__removeLimiter__(t){var e=this;return this.Promise.all([t.channel(),t.channel_client()].map(function(){var n=_asyncToGenerator(function*(s){return e.terminated||(yield new e.Promise((i,o)=>e.subscriber.unsubscribe(s,function(l,u){if(l!=null)return o(l);if(u===s)return i()}))),delete e.limiters[s]});return function(s){return n.apply(this,arguments)}}()))}__scriptArgs__(t,e,n,s){var i;return i=Scripts.keys(t,e),[this.shas[t],i.length].concat(i,n,s)}__scriptFn__(t){return this.client.evalsha.bind(this.client)}disconnect(t=!0){var e,n,s,i;for(i=Object.keys(this.limiters),e=0,s=i.length;e<s;e++)n=i[e],clearInterval(this.limiters[n]._store.heartbeat);return this.limiters={},this.terminated=!0,this.client.end(t),this.subscriber.end(t),this.Promise.resolve()}}return RedisConnection.prototype.datastore="redis",RedisConnection.prototype.defaults={Redis:null,clientOptions:{},client:null,Promise,Events:null},RedisConnection}).call(void 0),RedisConnection_1=RedisConnection,RedisConnection_1}var IORedisConnection_1,hasRequiredIORedisConnection;function requireIORedisConnection(){if(hasRequiredIORedisConnection)return IORedisConnection_1;hasRequiredIORedisConnection=1;function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],s=!0,i=!1,o=void 0;try{for(var l=t[Symbol.iterator](),u;!(s=(u=l.next()).done)&&(n.push(u.value),!(e&&n.length===e));s=!0);}catch(d){i=!0,o=d}finally{try{!s&&l.return!=null&&l.return()}finally{if(i)throw o}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function asyncGeneratorStep(t,e,n,s,i,o,l){try{var u=t[o](l),d=u.value}catch(f){n(f);return}u.done?e(d):Promise.resolve(d).then(s,i)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise(function(s,i){var o=t.apply(e,n);function l(d){asyncGeneratorStep(o,s,i,l,u,"next",d)}function u(d){asyncGeneratorStep(o,s,i,l,u,"throw",d)}l(void 0)})}}var Events,IORedisConnection,Scripts,parser;return parser=requireParser(),Events=requireEvents(),Scripts=requireScripts(),IORedisConnection=(function(){class IORedisConnection{constructor(options={}){parser.load(options,this.defaults,this),this.Redis==null&&(this.Redis=eval("require")("ioredis")),this.Events==null&&(this.Events=new Events(this)),this.terminated=!1,this.clusterNodes!=null?(this.client=new this.Redis.Cluster(this.clusterNodes,this.clientOptions),this.subscriber=new this.Redis.Cluster(this.clusterNodes,this.clientOptions)):this.client!=null&&this.client.duplicate==null?this.subscriber=new this.Redis.Cluster(this.client.startupNodes,this.client.options):(this.client==null&&(this.client=new this.Redis(this.clientOptions)),this.subscriber=this.client.duplicate()),this.limiters={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then(()=>(this._loadScripts(),{client:this.client,subscriber:this.subscriber}))}_setup(t,e){return t.setMaxListeners(0),new this.Promise((n,s)=>(t.on("error",i=>this.Events.trigger("error",i)),e&&t.on("message",(i,o)=>{var l;return(l=this.limiters[i])!=null?l._store.onMessage(i,o):void 0}),t.status==="ready"?n():t.once("ready",n)))}_loadScripts(){return Scripts.names.forEach(t=>this.client.defineCommand(t,{lua:Scripts.payload(t)}))}__runCommand__(t){var e=this;return _asyncToGenerator(function*(){var n;yield e.ready;var s=yield e.client.pipeline([t]).exec(),i=_slicedToArray(s,1),o=_slicedToArray(i[0],2);return o[0],n=o[1],n})()}__addLimiter__(t){return this.Promise.all([t.channel(),t.channel_client()].map(e=>new this.Promise((n,s)=>this.subscriber.subscribe(e,()=>(this.limiters[e]=t,n())))))}__removeLimiter__(t){var e=this;return[t.channel(),t.channel_client()].forEach(function(){var n=_asyncToGenerator(function*(s){return e.terminated||(yield e.subscriber.unsubscribe(s)),delete e.limiters[s]});return function(s){return n.apply(this,arguments)}}())}__scriptArgs__(t,e,n,s){var i;return i=Scripts.keys(t,e),[i.length].concat(i,n,s)}__scriptFn__(t){return this.client[t].bind(this.client)}disconnect(t=!0){var e,n,s,i;for(i=Object.keys(this.limiters),e=0,s=i.length;e<s;e++)n=i[e],clearInterval(this.limiters[n]._store.heartbeat);return this.limiters={},this.terminated=!0,t?this.Promise.all([this.client.quit(),this.subscriber.quit()]):(this.client.disconnect(),this.subscriber.disconnect(),this.Promise.resolve())}}return IORedisConnection.prototype.datastore="ioredis",IORedisConnection.prototype.defaults={Redis:null,clientOptions:{},clusterNodes:null,client:null,Promise,Events:null},IORedisConnection}).call(void 0),IORedisConnection_1=IORedisConnection,IORedisConnection_1}var RedisDatastore_1,hasRequiredRedisDatastore;function requireRedisDatastore(){if(hasRequiredRedisDatastore)return RedisDatastore_1;hasRequiredRedisDatastore=1;function t(g,y){return s(g)||n(g,y)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(g,y){var v=[],E=!0,w=!1,A=void 0;try{for(var I=g[Symbol.iterator](),D;!(E=(D=I.next()).done)&&(v.push(D.value),!(y&&v.length===y));E=!0);}catch(V){w=!0,A=V}finally{try{!E&&I.return!=null&&I.return()}finally{if(w)throw A}}return v}function s(g){if(Array.isArray(g))return g}function i(g,y,v,E,w,A,I){try{var D=g[A](I),V=D.value}catch(Y){v(Y);return}D.done?y(V):Promise.resolve(V).then(E,w)}function o(g){return function(){var y=this,v=arguments;return new Promise(function(E,w){var A=g.apply(y,v);function I(V){i(A,E,w,I,D,"next",V)}function D(V){i(A,E,w,I,D,"throw",V)}I(void 0)})}}var l,u,d,f,m;return m=requireParser(),l=requireBottleneckError(),d=requireRedisConnection(),u=requireIORedisConnection(),f=class{constructor(y,v,E){this.instance=y,this.storeOptions=v,this.originalId=this.instance.id,this.clientId=this.instance._randomIndex(),m.load(E,E,this),this.clients={},this.capacityPriorityCounters={},this.sharedConnection=this.connection!=null,this.connection==null&&(this.connection=this.instance.datastore==="redis"?new d({Redis:this.Redis,clientOptions:this.clientOptions,Promise:this.Promise,Events:this.instance.Events}):this.instance.datastore==="ioredis"?new u({Redis:this.Redis,clientOptions:this.clientOptions,clusterNodes:this.clusterNodes,Promise:this.Promise,Events:this.instance.Events}):void 0),this.instance.connection=this.connection,this.instance.datastore=this.connection.datastore,this.ready=this.connection.ready.then(w=>(this.clients=w,this.runScript("init",this.prepareInitSettings(this.clearDatastore)))).then(()=>this.connection.__addLimiter__(this.instance)).then(()=>this.runScript("register_client",[this.instance.queued()])).then(()=>{var w;return typeof(w=this.heartbeat=setInterval(()=>this.runScript("heartbeat",[]).catch(A=>this.instance.Events.trigger("error",A)),this.heartbeatInterval)).unref=="function"&&w.unref(),this.clients})}__publish__(y){var v=this;return o(function*(){var E,w=yield v.ready;return E=w.client,E.publish(v.instance.channel(),`message:${y.toString()}`)})()}onMessage(y,v){var E=this;return o(function*(){var w,A,I,D,V,Y,j,H,S,T;try{j=v.indexOf(":");var P=[v.slice(0,j),v.slice(j+1)];if(T=P[0],I=P[1],T==="capacity")return yield E.instance._drainAll(I.length>0?~~I:void 0);if(T==="capacity-priority"){var U=I.split(":"),J=t(U,3);return S=J[0],H=J[1],A=J[2],w=S.length>0?~~S:void 0,H===E.clientId?(D=yield E.instance._drainAll(w),Y=w!=null?w-(D||0):"",yield E.clients.client.publish(E.instance.channel(),`capacity-priority:${Y}::${A}`)):H===""?(clearTimeout(E.capacityPriorityCounters[A]),delete E.capacityPriorityCounters[A],E.instance._drainAll(w)):E.capacityPriorityCounters[A]=setTimeout(o(function*(){var W;try{return delete E.capacityPriorityCounters[A],yield E.runScript("blacklist_client",[H]),yield E.instance._drainAll(w)}catch(K){return W=K,E.instance.Events.trigger("error",W)}}),1e3)}else{if(T==="message")return E.instance.Events.trigger("message",I);if(T==="blocked")return yield E.instance._dropAllQueued()}}catch(W){return V=W,E.instance.Events.trigger("error",V)}})()}__disconnect__(y){return clearInterval(this.heartbeat),this.sharedConnection?this.connection.__removeLimiter__(this.instance):this.connection.disconnect(y)}runScript(y,v){var E=this;return o(function*(){return y==="init"||y==="register_client"||(yield E.ready),new E.Promise((w,A)=>{var I,D;return I=[Date.now(),E.clientId].concat(v),E.instance.Events.trigger("debug",`Calling Redis script: ${y}.lua`,I),D=E.connection.__scriptArgs__(y,E.originalId,I,function(V,Y){return V!=null?A(V):w(Y)}),E.connection.__scriptFn__(y)(...D)}).catch(w=>w.message==="SETTINGS_KEY_NOT_FOUND"?y==="heartbeat"?E.Promise.resolve():E.runScript("init",E.prepareInitSettings(!1)).then(()=>E.runScript(y,v)):w.message==="UNKNOWN_CLIENT"?E.runScript("register_client",[E.instance.queued()]).then(()=>E.runScript(y,v)):E.Promise.reject(w))})()}prepareArray(y){var v,E,w,A;for(w=[],v=0,E=y.length;v<E;v++)A=y[v],w.push(A!=null?A.toString():"");return w}prepareObject(y){var v,E,w;v=[];for(E in y)w=y[E],v.push(E,w!=null?w.toString():"");return v}prepareInitSettings(y){var v;return v=this.prepareObject(Object.assign({},this.storeOptions,{id:this.originalId,version:this.instance.version,groupTimeout:this.timeout,clientTimeout:this.clientTimeout})),v.unshift(y?1:0,this.instance.version),v}convertBool(y){return!!y}__updateSettings__(y){var v=this;return o(function*(){return yield v.runScript("update_settings",v.prepareObject(y)),m.overwrite(y,y,v.storeOptions)})()}__running__(){return this.runScript("running",[])}__queued__(){return this.runScript("queued",[])}__done__(){return this.runScript("done",[])}__groupCheck__(){var y=this;return o(function*(){return y.convertBool(yield y.runScript("group_check",[]))})()}__incrementReservoir__(y){return this.runScript("increment_reservoir",[y])}__currentReservoir__(){return this.runScript("current_reservoir",[])}__check__(y){var v=this;return o(function*(){return v.convertBool(yield v.runScript("check",v.prepareArray([y])))})()}__register__(y,v,E){var w=this;return o(function*(){var A,I,D,V=yield w.runScript("register",w.prepareArray([y,v,E])),Y=t(V,3);return I=Y[0],D=Y[1],A=Y[2],{success:w.convertBool(I),wait:D,reservoir:A}})()}__submit__(y,v){var E=this;return o(function*(){var w,A,I,D,V;try{var Y=yield E.runScript("submit",E.prepareArray([y,v])),j=t(Y,3);return D=j[0],w=j[1],V=j[2],{reachedHWM:E.convertBool(D),blocked:E.convertBool(w),strategy:V}}catch(T){if(A=T,A.message.indexOf("OVERWEIGHT")===0){var H=A.message.split(":"),S=t(H,3);throw S[0],v=S[1],I=S[2],new l(`Impossible to add a job having a weight of ${v} to a limiter having a maxConcurrent setting of ${I}`)}else throw A}})()}__free__(y,v){var E=this;return o(function*(){var w;return w=yield E.runScript("free",E.prepareArray([y])),{running:w}})()}},RedisDatastore_1=f,RedisDatastore_1}var States_1,hasRequiredStates;function requireStates(){if(hasRequiredStates)return States_1;hasRequiredStates=1;var t,e;return t=requireBottleneckError(),e=class{constructor(s){this.status=s,this._jobs={},this.counts=this.status.map(function(){return 0})}next(s){var i,o;if(i=this._jobs[s],o=i+1,i!=null&&o<this.status.length)return this.counts[i]--,this.counts[o]++,this._jobs[s]++;if(i!=null)return this.counts[i]--,delete this._jobs[s]}start(s){var i;return i=0,this._jobs[s]=i,this.counts[i]++}remove(s){var i;return i=this._jobs[s],i!=null&&(this.counts[i]--,delete this._jobs[s]),i!=null}jobStatus(s){var i;return(i=this.status[this._jobs[s]])!=null?i:null}statusJobs(s){var i,o,l,u,d;if(s!=null){if(o=this.status.indexOf(s),o<0)throw new t(`status must be one of ${this.status.join(", ")}`);l=this._jobs,u=[];for(i in l)d=l[i],d===o&&u.push(i);return u}else return Object.keys(this._jobs)}statusCounts(){return this.counts.reduce((s,i,o)=>(s[this.status[o]]=i,s),{})}},States_1=e,States_1}var Sync_1,hasRequiredSync;function requireSync(){if(hasRequiredSync)return Sync_1;hasRequiredSync=1;function t(i,o,l,u,d,f,m){try{var g=i[f](m),y=g.value}catch(v){l(v);return}g.done?o(y):Promise.resolve(y).then(u,d)}function e(i){return function(){var o=this,l=arguments;return new Promise(function(u,d){var f=i.apply(o,l);function m(y){t(f,u,d,m,g,"next",y)}function g(y){t(f,u,d,m,g,"throw",y)}m(void 0)})}}var n,s;return n=requireDLList(),s=class{constructor(o,l){this.schedule=this.schedule.bind(this),this.name=o,this.Promise=l,this._running=0,this._queue=new n}isEmpty(){return this._queue.length===0}_tryToRun(){var o=this;return e(function*(){var l,u,d,f,m,g,y;if(o._running<1&&o._queue.length>0){o._running++;var v=o._queue.shift();return y=v.task,l=v.args,m=v.resolve,f=v.reject,u=yield e(function*(){try{return g=yield y(...l),function(){return m(g)}}catch(E){return d=E,function(){return f(d)}}})(),o._running--,o._tryToRun(),u()}})()}schedule(o,...l){var u,d,f;return f=d=null,u=new this.Promise(function(m,g){return f=m,d=g}),this._queue.push({task:o,args:l,resolve:f,reject:d}),this._tryToRun(),u}},Sync_1=s,Sync_1}const version$1="2.19.5",require$$8={version:version$1};var Group_1,hasRequiredGroup;function requireGroup(){if(hasRequiredGroup)return Group_1;hasRequiredGroup=1;function t(y,v){return s(y)||n(y,v)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(y,v){var E=[],w=!0,A=!1,I=void 0;try{for(var D=y[Symbol.iterator](),V;!(w=(V=D.next()).done)&&(E.push(V.value),!(v&&E.length===v));w=!0);}catch(Y){A=!0,I=Y}finally{try{!w&&D.return!=null&&D.return()}finally{if(A)throw I}}return E}function s(y){if(Array.isArray(y))return y}function i(y,v,E,w,A,I,D){try{var V=y[I](D),Y=V.value}catch(j){E(j);return}V.done?v(Y):Promise.resolve(Y).then(w,A)}function o(y){return function(){var v=this,E=arguments;return new Promise(function(w,A){var I=y.apply(v,E);function D(Y){i(I,w,A,D,V,"next",Y)}function V(Y){i(I,w,A,D,V,"throw",Y)}D(void 0)})}}var l,u,d,f,m,g;return g=requireParser(),l=requireEvents(),f=requireRedisConnection(),d=requireIORedisConnection(),m=requireScripts(),u=(function(){class y{constructor(E={}){this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=E,g.load(this.limiterOptions,this.defaults,this),this.Events=new l(this),this.instances={},this.Bottleneck=requireBottleneck(),this._startAutoCleanup(),this.sharedConnection=this.connection!=null,this.connection==null&&(this.limiterOptions.datastore==="redis"?this.connection=new f(Object.assign({},this.limiterOptions,{Events:this.Events})):this.limiterOptions.datastore==="ioredis"&&(this.connection=new d(Object.assign({},this.limiterOptions,{Events:this.Events}))))}key(E=""){var w;return(w=this.instances[E])!=null?w:(()=>{var A;return A=this.instances[E]=new this.Bottleneck(Object.assign(this.limiterOptions,{id:`${this.id}-${E}`,timeout:this.timeout,connection:this.connection})),this.Events.trigger("created",A,E),A})()}deleteKey(E=""){var w=this;return o(function*(){var A,I;return I=w.instances[E],w.connection&&(A=yield w.connection.__runCommand__(["del",...m.allKeys(`${w.id}-${E}`)])),I!=null&&(delete w.instances[E],yield I.disconnect()),I!=null||A>0})()}limiters(){var E,w,A,I;w=this.instances,A=[];for(E in w)I=w[E],A.push({key:E,limiter:I});return A}keys(){return Object.keys(this.instances)}clusterKeys(){var E=this;return o(function*(){var w,A,I,D,V,Y,j,H,S;if(E.connection==null)return E.Promise.resolve(E.keys());for(Y=[],w=null,S=`b_${E.id}-`.length,A=9;w!==0;){var T=yield E.connection.__runCommand__(["scan",w??0,"match",`b_${E.id}-*_settings`,"count",1e4]),P=t(T,2);for(H=P[0],I=P[1],w=~~H,D=0,j=I.length;D<j;D++)V=I[D],Y.push(V.slice(S,-A))}return Y})()}_startAutoCleanup(){var E=this,w;return clearInterval(this.interval),typeof(w=this.interval=setInterval(o(function*(){var A,I,D,V,Y,j;Y=Date.now(),D=E.instances,V=[];for(I in D){j=D[I];try{(yield j._store.__groupCheck__(Y))?V.push(E.deleteKey(I)):V.push(void 0)}catch(H){A=H,V.push(j.Events.trigger("error",A))}}return V}),this.timeout/2)).unref=="function"?w.unref():void 0}updateSettings(E={}){if(g.overwrite(E,this.defaults,this),g.overwrite(E,E,this.limiterOptions),E.timeout!=null)return this._startAutoCleanup()}disconnect(E=!0){var w;if(!this.sharedConnection)return(w=this.connection)!=null?w.disconnect(E):void 0}}return y.prototype.defaults={timeout:1e3*60*5,connection:null,Promise,id:"group-key"},y}).call(void 0),Group_1=u,Group_1}var Batcher_1,hasRequiredBatcher;function requireBatcher(){if(hasRequiredBatcher)return Batcher_1;hasRequiredBatcher=1;var t,e,n;return n=requireParser(),e=requireEvents(),t=(function(){class s{constructor(o={}){this.options=o,n.load(this.options,this.defaults,this),this.Events=new e(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now()}_resetPromise(){return this._promise=new this.Promise((o,l)=>this._resolve=o)}_flush(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger("batch",this._arr),this._arr=[],this._resetPromise()}add(o){var l;return this._arr.push(o),l=this._promise,this._arr.length===this.maxSize?this._flush():this.maxTime!=null&&this._arr.length===1&&(this._timeout=setTimeout(()=>this._flush(),this.maxTime)),l}}return s.prototype.defaults={maxTime:null,maxSize:null,Promise},s}).call(void 0),Batcher_1=t,Batcher_1}var Bottleneck_1,hasRequiredBottleneck;function requireBottleneck(){if(hasRequiredBottleneck)return Bottleneck_1;hasRequiredBottleneck=1;function t(Y,j){return o(Y)||e(Y,j)||s()}function e(Y,j){var H=[],S=!0,T=!1,P=void 0;try{for(var U=Y[Symbol.iterator](),J;!(S=(J=U.next()).done)&&(H.push(J.value),!(j&&H.length===j));S=!0);}catch(W){T=!0,P=W}finally{try{!S&&U.return!=null&&U.return()}finally{if(T)throw P}}return H}function n(Y){return o(Y)||i(Y)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(Y){if(Symbol.iterator in Object(Y)||Object.prototype.toString.call(Y)==="[object Arguments]")return Array.from(Y)}function o(Y){if(Array.isArray(Y))return Y}function l(Y,j,H,S,T,P,U){try{var J=Y[P](U),W=J.value}catch(K){H(K);return}J.done?j(W):Promise.resolve(W).then(S,T)}function u(Y){return function(){var j=this,H=arguments;return new Promise(function(S,T){var P=Y.apply(j,H);function U(W){l(P,S,T,U,J,"next",W)}function J(W){l(P,S,T,U,J,"throw",W)}U(void 0)})}}var d,f,m,g,y,v,E,w,A,I,D,V=[].splice;return v=10,f=5,D=requireParser(),E=requireQueues(),g=requireJob(),y=requireLocalDatastore(),w=requireRedisDatastore(),m=requireEvents(),A=requireStates(),I=requireSync(),d=(function(){class Y{constructor(H={},...S){var T,P;this._addToQueue=this._addToQueue.bind(this),this._validateOptions(H,S),D.load(H,this.instanceDefaults,this),this._queues=new E(v),this._scheduled={},this._states=new A(["RECEIVED","QUEUED","RUNNING","EXECUTING"].concat(this.trackDoneStatus?["DONE"]:[])),this._limiter=null,this.Events=new m(this),this._submitLock=new I("submit",this.Promise),this._registerLock=new I("register",this.Promise),P=D.load(H,this.storeDefaults,{}),this._store=(function(){if(this.datastore==="redis"||this.datastore==="ioredis"||this.connection!=null)return T=D.load(H,this.redisStoreDefaults,{}),new w(this,P,T);if(this.datastore==="local")return T=D.load(H,this.localStoreDefaults,{}),new y(this,P,T);throw new Y.prototype.BottleneckError(`Invalid datastore type: ${this.datastore}`)}).call(this),this._queues.on("leftzero",()=>{var U;return(U=this._store.heartbeat)!=null&&typeof U.ref=="function"?U.ref():void 0}),this._queues.on("zero",()=>{var U;return(U=this._store.heartbeat)!=null&&typeof U.unref=="function"?U.unref():void 0})}_validateOptions(H,S){if(!(H!=null&&typeof H=="object"&&S.length===0))throw new Y.prototype.BottleneckError("Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.")}ready(){return this._store.ready}clients(){return this._store.clients}channel(){return`b_${this.id}`}channel_client(){return`b_${this.id}_${this._store.clientId}`}publish(H){return this._store.__publish__(H)}disconnect(H=!0){return this._store.__disconnect__(H)}chain(H){return this._limiter=H,this}queued(H){return this._queues.queued(H)}clusterQueued(){return this._store.__queued__()}empty(){return this.queued()===0&&this._submitLock.isEmpty()}running(){return this._store.__running__()}done(){return this._store.__done__()}jobStatus(H){return this._states.jobStatus(H)}jobs(H){return this._states.statusJobs(H)}counts(){return this._states.statusCounts()}_randomIndex(){return Math.random().toString(36).slice(2)}check(H=1){return this._store.__check__(H)}_clearGlobalState(H){return this._scheduled[H]!=null?(clearTimeout(this._scheduled[H].expiration),delete this._scheduled[H],!0):!1}_free(H,S,T,P){var U=this;return u(function*(){var J,W;try{var K=yield U._store.__free__(H,T.weight);if(W=K.running,U.Events.trigger("debug",`Freed ${T.id}`,P),W===0&&U.empty())return U.Events.trigger("idle")}catch(le){return J=le,U.Events.trigger("error",J)}})()}_run(H,S,T){var P,U,J;return S.doRun(),P=this._clearGlobalState.bind(this,H),J=this._run.bind(this,H,S),U=this._free.bind(this,H,S),this._scheduled[H]={timeout:setTimeout(()=>S.doExecute(this._limiter,P,J,U),T),expiration:S.options.expiration!=null?setTimeout(function(){return S.doExpire(P,J,U)},T+S.options.expiration):void 0,job:S}}_drainOne(H){return this._registerLock.schedule(()=>{var S,T,P,U,J;if(this.queued()===0)return this.Promise.resolve(null);J=this._queues.getFirst();var W=P=J.first();return U=W.options,S=W.args,H!=null&&U.weight>H?this.Promise.resolve(null):(this.Events.trigger("debug",`Draining ${U.id}`,{args:S,options:U}),T=this._randomIndex(),this._store.__register__(T,U.weight,U.expiration).then(({success:K,wait:le,reservoir:ge})=>{var oe;return this.Events.trigger("debug",`Drained ${U.id}`,{success:K,args:S,options:U}),K?(J.shift(),oe=this.empty(),oe&&this.Events.trigger("empty"),ge===0&&this.Events.trigger("depleted",oe),this._run(T,P,le),this.Promise.resolve(U.weight)):this.Promise.resolve(null)}))})}_drainAll(H,S=0){return this._drainOne(H).then(T=>{var P;return T!=null?(P=H!=null?H-T:H,this._drainAll(P,S+T)):this.Promise.resolve(S)}).catch(T=>this.Events.trigger("error",T))}_dropAllQueued(H){return this._queues.shiftAll(function(S){return S.doDrop({message:H})})}stop(H={}){var S,T;return H=D.load(H,this.stopDefaults),T=P=>{var U;return U=()=>{var J;return J=this._states.counts,J[0]+J[1]+J[2]+J[3]===P},new this.Promise((J,W)=>U()?J():this.on("done",()=>{if(U())return this.removeAllListeners("done"),J()}))},S=H.dropWaitingJobs?(this._run=function(P,U){return U.doDrop({message:H.dropErrorMessage})},this._drainOne=()=>this.Promise.resolve(null),this._registerLock.schedule(()=>this._submitLock.schedule(()=>{var P,U,J;U=this._scheduled;for(P in U)J=U[P],this.jobStatus(J.job.options.id)==="RUNNING"&&(clearTimeout(J.timeout),clearTimeout(J.expiration),J.job.doDrop({message:H.dropErrorMessage}));return this._dropAllQueued(H.dropErrorMessage),T(0)}))):this.schedule({priority:v-1,weight:0},()=>T(1)),this._receive=function(P){return P._reject(new Y.prototype.BottleneckError(H.enqueueErrorMessage))},this.stop=()=>this.Promise.reject(new Y.prototype.BottleneckError("stop() has already been called")),S}_addToQueue(H){var S=this;return u(function*(){var T,P,U,J,W,K,le;T=H.args,J=H.options;try{var ge=yield S._store.__submit__(S.queued(),J.weight);W=ge.reachedHWM,P=ge.blocked,le=ge.strategy}catch(oe){return U=oe,S.Events.trigger("debug",`Could not queue ${J.id}`,{args:T,options:J,error:U}),H.doDrop({error:U}),!1}return P?(H.doDrop(),!0):W&&(K=le===Y.prototype.strategy.LEAK?S._queues.shiftLastFrom(J.priority):le===Y.prototype.strategy.OVERFLOW_PRIORITY?S._queues.shiftLastFrom(J.priority+1):le===Y.prototype.strategy.OVERFLOW?H:void 0,K!=null&&K.doDrop(),K==null||le===Y.prototype.strategy.OVERFLOW)?(K==null&&H.doDrop(),W):(H.doQueue(W,P),S._queues.push(H),yield S._drainAll(),W)})()}_receive(H){return this._states.jobStatus(H.options.id)!=null?(H._reject(new Y.prototype.BottleneckError(`A job with the same id already exists (id=${H.options.id})`)),!1):(H.doReceive(),this._submitLock.schedule(this._addToQueue,H))}submit(...H){var S,T,P,U,J,W,K;if(typeof H[0]=="function"){var le,ge,oe,ce;J=H,le=J,ge=n(le),T=ge[0],H=ge.slice(1),oe=V.call(H,-1),ce=t(oe,1),S=ce[0],U=D.load({},this.jobDefaults)}else{var ie,Ne,re,_e;W=H,ie=W,Ne=n(ie),U=Ne[0],T=Ne[1],H=Ne.slice(2),re=V.call(H,-1),_e=t(re,1),S=_e[0],U=D.load(U,this.jobDefaults)}return K=(...Se)=>new this.Promise(function(Re,Be){return T(...Se,function(...Ie){return(Ie[0]!=null?Be:Re)(Ie)})}),P=new g(K,H,U,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),P.promise.then(function(Se){return typeof S=="function"?S(...Se):void 0}).catch(function(Se){return Array.isArray(Se)?typeof S=="function"?S(...Se):void 0:typeof S=="function"?S(Se):void 0}),this._receive(P)}schedule(...H){var S,T,P;if(typeof H[0]=="function"){var U=H,J=n(U);P=J[0],H=J.slice(1),T={}}else{var W=H,K=n(W);T=K[0],P=K[1],H=K.slice(2)}return S=new g(P,H,T,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(S),S.promise}wrap(H){var S,T;return S=this.schedule.bind(this),T=function(...U){return S(H.bind(this),...U)},T.withOptions=function(P,...U){return S(P,H,...U)},T}updateSettings(H={}){var S=this;return u(function*(){return yield S._store.__updateSettings__(D.overwrite(H,S.storeDefaults)),D.overwrite(H,S.instanceDefaults,S),S})()}currentReservoir(){return this._store.__currentReservoir__()}incrementReservoir(H=0){return this._store.__incrementReservoir__(H)}}return Y.default=Y,Y.Events=m,Y.version=Y.prototype.version=require$$8.version,Y.strategy=Y.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},Y.BottleneckError=Y.prototype.BottleneckError=requireBottleneckError(),Y.Group=Y.prototype.Group=requireGroup(),Y.RedisConnection=Y.prototype.RedisConnection=requireRedisConnection(),Y.IORedisConnection=Y.prototype.IORedisConnection=requireIORedisConnection(),Y.Batcher=Y.prototype.Batcher=requireBatcher(),Y.prototype.jobDefaults={priority:f,weight:1,expiration:null,id:"<no-id>"},Y.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:Y.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},Y.prototype.localStoreDefaults={Promise,timeout:null,heartbeatInterval:250},Y.prototype.redisStoreDefaults={Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},Y.prototype.instanceDefaults={datastore:"local",connection:null,id:"<no-id>",rejectOnDrop:!0,trackDoneStatus:!1,Promise},Y.prototype.stopDefaults={enqueueErrorMessage:"This limiter has been stopped and cannot accept new jobs.",dropWaitingJobs:!0,dropErrorMessage:"This limiter has been stopped."},Y}).call(void 0),Bottleneck_1=d,Bottleneck_1}var lib,hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,lib=requireBottleneck()),lib}var libExports=requireLib();const Bottleneck=getDefaultExportFromCjs(libExports);async function getTeamAlias(t){const e=getFirestore(),n=collection(e,"aliases"),s=query(n,where("name","==",t)),i=await getDocs(s);return i.empty?t:i.docs[0].data().alias||t}const TeamsContext=reactExports.createContext(void 0),teamDataCache={},limiter=new Bottleneck({reservoir:100,reservoirRefreshAmount:100,reservoirRefreshInterval:60*1e3});async function fetchTeamData(t){var n;const e=t.replace(/\./g,"");if(teamDataCache[e])return teamDataCache[e];try{const o=(n=(await(await limiter.schedule(()=>fetch(`https://www.thesportsdb.com/api/v1/json/3/searchteams.php?t=${e}`))).json()).teams)==null?void 0:n[0];return o&&(teamDataCache[e]=o),o}catch(s){console.error(`Erro ao buscar time "${e}"`,s);return}}const TeamsProvider=({children:t})=>{const[e,n]=reactExports.useState({}),[s,i]=reactExports.useState(!1),o=reactExports.useCallback(async l=>{if(l){i(!0);try{const u=l.teams.home.name.replace(/\./g,""),d=l.teams.away.name.replace(/\./g,""),[f,m]=await Promise.all([getTeamAlias(u),getTeamAlias(d)]),[g,y]=await Promise.all([fetchTeamData(f),fetchTeamData(m)]);n({homeTeam:g,awayTeam:y})}catch(u){console.error("Erro ao buscar dados dos times:",u)}finally{i(!1)}}},[]);return jsxRuntimeExports.jsx(TeamsContext.Provider,{value:{teams:e,getTeams:o,loading:s},children:t})};function useSportDbTeams(t){const e=reactExports.useContext(TeamsContext);if(!e)throw new Error("useTeams deve ser usado dentro de <TeamsProvider>");const{getTeams:n,teams:s,loading:i}=e;return reactExports.useEffect(()=>{t&&n(t)},[t,n]),{...s,loading:i}}const useRoundTranslations=()=>{const[t,e]=reactExports.useState([]),[n,s]=reactExports.useState(!0),[i,o]=reactExports.useState(null);return reactExports.useEffect(()=>{(async()=>{try{s(!0),o(null);const u=collection(db,"translations"),f=(await getDocs(u)).docs.map(m=>m.data());e(f)}catch(u){console.error("Error fetching translations:",u),o("Failed to load translations. Please try again.")}finally{s(!1)}})()},[]),{translations:t,loading:n,error:i}},GlobalContext=reactExports.createContext(void 0),useGlobal=()=>{const t=reactExports.useContext(GlobalContext);if(t===void 0)throw new Error("useGlobal must be used within a GlobalProvider");return t},GlobalProvider=({children:t})=>{const[e,n]=reactExports.useState(!1),[s,i]=reactExports.useState(!1),[o,l]=reactExports.useState(null),[u,d]=reactExports.useState({theme:"light",language:"pt-BR"}),f=y=>{d(v=>({...v,...y}))},m=(y,v)=>{console.log(`${v.toUpperCase()}: ${y}`)};useRoundTranslations();const g={isLoading:e,setIsLoading:n,isMenuOpen:s,setIsMenuOpen:i,appSettings:u,updateAppSettings:f,currentEscalacao:o,setCurrentEscalacao:l,showNotification:m};return jsxRuntimeExports.jsx(GlobalContext.Provider,{value:g,children:t})};var IMAGE_SECTIONS=(t=>(t.ESCALACAO="escalacao",t.MATCHDAY="matchday",t.PROXIMO_JOGO="proximo_jogo",t.FIM_DE_JOGO="fim_de_jogo",t.MAN_OF_THE_MATCH="man_of_the_match",t.CONFRONTO="confronto",t.INICIO_JOGO="inicio_jogo",t.INTERVALO="intervalo",t.INICIO_SEGUNDO_TEMPO="inicio_segundo_tempo",t.INICIO_PRORROGACAO="inicio_prorrogacao",t.INICIO_SEGUNDO_TEMPO_PRORROGACAO="inicio_segundo_tempo_prorrogacao",t.GOL="gol",t.SUBSTITUICAO="substituicao",t))(IMAGE_SECTIONS||{});const SECTIONS_CONFIG={escalacao:{key:"escalacao",label:"Escalação",description:"Imagens para posts de escalação do time",allowedTypes:["quadrada","vertical","horizontal"]},matchday:{key:"matchday",label:"Matchday",description:"Imagens para posts do dia do jogo",allowedTypes:["quadrada","vertical"]},proximo_jogo:{key:"proximo_jogo",label:"Próximo Jogo",description:"Imagens para posts do próximo jogo",allowedTypes:["quadrada","vertical"]},fim_de_jogo:{key:"fim_de_jogo",label:"Fim de Jogo",description:"Imagens para posts do fim de jogo",allowedTypes:["quadrada","vertical"]},man_of_the_match:{key:"man_of_the_match",label:"Man of the Match",description:"Imagens para posts do melhor jogador",allowedTypes:["quadrada","vertical"]},confronto:{key:"confronto",label:"Confronto",description:"Imagens de fundo para o gerador de confrontos com gráfico.",allowedTypes:["quadrada","vertical"]},inicio_jogo:{key:"inicio_jogo",label:"Início de Jogo",description:"Imagens para posts do início da partida",allowedTypes:["quadrada","vertical"]},intervalo:{key:"intervalo",label:"Intervalo",description:"Imagens para posts do intervalo da partida",allowedTypes:["quadrada","vertical"]},inicio_segundo_tempo:{key:"inicio_segundo_tempo",label:"Início do Segundo Tempo",description:"Imagens para posts do início do segundo tempo",allowedTypes:["quadrada","vertical"]},inicio_prorrogacao:{key:"inicio_prorrogacao",label:"Início da Prorrogação",description:"Imagens para posts do início da prorrogação",allowedTypes:["quadrada","vertical"]},inicio_segundo_tempo_prorrogacao:{key:"inicio_segundo_tempo_prorrogacao",label:"Início do Segundo Tempo da Prorrogação",description:"Imagens para posts do início do segundo tempo da prorrogação",allowedTypes:["quadrada","vertical"]},gol:{key:"gol",label:"Gol",description:"Imagens para posts de gols marcados",allowedTypes:["quadrada","vertical"]},substituicao:{key:"substituicao",label:"Substituição",description:"Imagens para posts de substituições",allowedTypes:["quadrada","vertical"]}},IMAGE_TYPES_CONFIG={quadrada:{key:"quadrada",label:"Quadrada",description:"Para posts quadrados (Instagram feed)",dimensions:"1080x1080"},vertical:{key:"vertical",label:"Vertical",description:"Para stories (Instagram/Facebook)",dimensions:"1080x1920"},horizontal:{key:"horizontal",label:"Horizontal",description:"Para posts horizontais (Facebook/Twitter)",dimensions:"1200x630"}},getSectionConfig=t=>SECTIONS_CONFIG[t],getImageTypeConfig=t=>IMAGE_TYPES_CONFIG[t],getAllowedTypesForSection=t=>SECTIONS_CONFIG[t].allowedTypes,generateImageId=(t,e)=>`${t}_${e}`,ImagesContext=reactExports.createContext(void 0),ImagesProvider=({children:t})=>{const{currentUser:e}=useAuth(),[n,s]=reactExports.useState([]),[i,o]=reactExports.useState(null),[l,u]=reactExports.useState([]),[d,f]=reactExports.useState(!0);reactExports.useEffect(()=>{e&&m()},[e]);const m=async()=>{var T;try{f(!0);const U=(await getDocs(collection(db,"baseImages"))).docs.map(le=>{var ge;return{id:le.id,...le.data(),uploadedAt:((ge=le.data().uploadedAt)==null?void 0:ge.toDate())||new Date}});s(U);const J=await getDocs(collection(db,"gameArt"));if(!J.empty){const le=J.docs[0];o({id:le.id,...le.data(),uploadedAt:((T=le.data().uploadedAt)==null?void 0:T.toDate())||new Date})}const K=(await getDocs(collection(db,"channels"))).docs.map(le=>{var oe;const ge=le.data();return{id:le.id,name:ge.name,logoUrl:ge.logoUrl,type:ge.type,uploadedAt:((oe=ge.uploadedAt)==null?void 0:oe.toDate())||new Date}});u(K),U.length===0&&await g()}catch(P){console.error("Erro ao carregar imagens:",P)}finally{f(!1)}},g=async()=>{var T;try{const P=await getDocs(collection(db,"legacyBaseImages"));if(!P.empty){const U=[];for(const J of P.docs){const W=J.data(),K={id:generateImageId(IMAGE_SECTIONS.ESCALACAO,W.type),section:IMAGE_SECTIONS.ESCALACAO,type:W.type,url:W.url,filename:W.filename,uploadedAt:((T=W.uploadedAt)==null?void 0:T.toDate())||new Date,uploadedBy:W.uploadedBy};await setDoc(doc(db,"baseImages",K.id),{section:K.section,type:K.type,url:K.url,filename:K.filename,uploadedAt:serverTimestamp(),uploadedBy:K.uploadedBy}),U.push(K)}s(U)}}catch(P){console.error("Erro na migração:",P)}},y=async(T,P,U)=>{if(!e)return{success:!1,error:"Usuário não autenticado"};try{const J=n.find(oe=>oe.section===P&&oe.type===U),W=await uploadToImgBB(T);if(!W.success)return W;const K=generateImageId(P,U),le={section:P,type:U,url:W.url,filename:T.name,uploadedAt:serverTimestamp(),uploadedBy:e.uid};await setDoc(doc(db,"baseImages",K),le);const ge={id:K,section:P,type:U,url:W.url,filename:T.name,uploadedAt:new Date,uploadedBy:e.uid};return s(J?oe=>oe.map(ce=>ce.section===P&&ce.type===U?ge:ce):oe=>[...oe,ge]),{success:!0,url:W.url}}catch(J){return console.error("Erro ao fazer upload da imagem:",J),{success:!1,error:"Erro ao fazer upload da imagem"}}},v=async(T,P)=>{try{const U=generateImageId(T,P);return await deleteDoc(doc(db,"baseImages",U)),s(J=>J.filter(W=>!(W.section===T&&W.type===P))),{success:!0}}catch(U){return console.error("Erro ao remover imagem:",U),{success:!1,error:"Erro ao remover imagem"}}},E=T=>n.find(P=>P.section===T.section&&P.type===T.type),S={baseImages:n,loading:d,uploadBaseImage:y,removeBaseImage:v,getImageByIdentifier:E,getImagesBySection:T=>n.filter(P=>P.section===T),getImageByType:T=>E({section:IMAGE_SECTIONS.ESCALACAO,type:T})||null,uploadLegacyImage:async(T,P)=>y(T,IMAGE_SECTIONS.ESCALACAO,P),removeLegacyImage:async T=>{try{const P=n.find(U=>U.id===T);return P?v(P.section,P.type):{success:!1,error:"Imagem não encontrada"}}catch(P){return console.error("Erro ao remover imagem legacy:",P),{success:!1,error:"Erro ao remover imagem"}}},gameArt:i,uploadGameArt:async T=>{if(!e)return{success:!1,error:"Usuário não autenticado"};try{const P=await uploadToImgBB(T);if(!P.success)return P;const U={url:P.url,filename:T.name,uploadedAt:new Date,uploadedBy:e.uid};if(i)await setDoc(doc(db,"gameArt",i.id),{...U,uploadedAt:serverTimestamp()}),o({...U,id:i.id,uploadedAt:new Date});else{const J=doc(collection(db,"gameArt"));await setDoc(J,{...U,uploadedAt:serverTimestamp()}),o({...U,id:J.id,uploadedAt:new Date})}return{success:!0,url:P.url}}catch(P){return console.error("Erro ao fazer upload da arte do jogo:",P),{success:!1,error:"Erro ao fazer upload da arte do jogo"}}},removeGameArt:async()=>{if(!i)return{success:!1,error:"Nenhuma arte do jogo para remover"};try{return await deleteDoc(doc(db,"gameArt",i.id)),o(null),{success:!0}}catch(T){return console.error("Erro ao remover arte do jogo:",T),{success:!1,error:"Erro ao remover arte do jogo"}}},channelLogos:l,getChannelLogoById:T=>l.find(P=>P.id===T),getChannelLogosByType:T=>l.filter(P=>P.type===T)};return jsxRuntimeExports.jsx(ImagesContext.Provider,{value:S,children:t})},useImages=()=>{const t=reactExports.useContext(ImagesContext);if(!t)throw new Error("useImages deve ser usado dentro de um ImagesProvider");return t};/*!
* sweetalert2 v11.22.1
* Released under the MIT License.
*/function _assertClassBrand(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function _checkPrivateRedeclaration(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet2(t,e){return t.get(_assertClassBrand(t,e))}function _classPrivateFieldInitSpec(t,e,n){_checkPrivateRedeclaration(t,e),e.set(t,n)}function _classPrivateFieldSet2(t,e,n){return t.set(_assertClassBrand(t,e),n),n}const RESTORE_FOCUS_TIMEOUT=100,globalState={},focusPreviousActiveElement=()=>{globalState.previousActiveElement instanceof HTMLElement?(globalState.previousActiveElement.focus(),globalState.previousActiveElement=null):document.body&&document.body.focus()},restoreActiveElement=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,s=window.scrollY;globalState.restoreFocusTimeout=setTimeout(()=>{focusPreviousActiveElement(),e()},RESTORE_FOCUS_TIMEOUT),window.scrollTo(n,s)}),swalPrefix="swal2-",classNames=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],swalClasses=classNames.reduce((t,e)=>(t[e]=swalPrefix+e,t),{}),icons=["success","warning","info","question","error"],iconTypes=icons.reduce((t,e)=>(t[e]=swalPrefix+e,t),{}),consolePrefix="SweetAlert2:",capitalizeFirstLetter=t=>t.charAt(0).toUpperCase()+t.slice(1),warn=t=>{console.warn(`${consolePrefix} ${typeof t=="object"?t.join(" "):t}`)},error=t=>{console.error(`${consolePrefix} ${t}`)},previousWarnOnceMessages=[],warnOnce=t=>{previousWarnOnceMessages.includes(t)||(previousWarnOnceMessages.push(t),warn(t))},warnAboutDeprecation=(t,e=null)=>{warnOnce(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},callIfFunction=t=>typeof t=="function"?t():t,hasToPromiseFn=t=>t&&typeof t.toPromise=="function",asPromise=t=>hasToPromiseFn(t)?t.toPromise():Promise.resolve(t),isPromise=t=>t&&Promise.resolve(t)===t,getContainer=()=>document.body.querySelector(`.${swalClasses.container}`),elementBySelector=t=>{const e=getContainer();return e?e.querySelector(t):null},elementByClass=t=>elementBySelector(`.${t}`),getPopup=()=>elementByClass(swalClasses.popup),getIcon=()=>elementByClass(swalClasses.icon),getIconContent=()=>elementByClass(swalClasses["icon-content"]),getTitle=()=>elementByClass(swalClasses.title),getHtmlContainer=()=>elementByClass(swalClasses["html-container"]),getImage=()=>elementByClass(swalClasses.image),getProgressSteps=()=>elementByClass(swalClasses["progress-steps"]),getValidationMessage=()=>elementByClass(swalClasses["validation-message"]),getConfirmButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.confirm}`),getCancelButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.cancel}`),getDenyButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.deny}`),getInputLabel=()=>elementByClass(swalClasses["input-label"]),getLoader=()=>elementBySelector(`.${swalClasses.loader}`),getActions=()=>elementByClass(swalClasses.actions),getFooter=()=>elementByClass(swalClasses.footer),getTimerProgressBar=()=>elementByClass(swalClasses["timer-progress-bar"]),getCloseButton=()=>elementByClass(swalClasses.close),focusable=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,getFocusableElements=()=>{const t=getPopup();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((o,l)=>{const u=parseInt(o.getAttribute("tabindex")||"0"),d=parseInt(l.getAttribute("tabindex")||"0");return u>d?1:u<d?-1:0}),s=t.querySelectorAll(focusable),i=Array.from(s).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(i))].filter(o=>isVisible$1(o))},isModal=()=>hasClass(document.body,swalClasses.shown)&&!hasClass(document.body,swalClasses["toast-shown"])&&!hasClass(document.body,swalClasses["no-backdrop"]),isToast=()=>{const t=getPopup();return t?hasClass(t,swalClasses.toast):!1},isLoading=()=>{const t=getPopup();return t?t.hasAttribute("data-loading"):!1},setInnerHtml=(t,e)=>{if(t.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),i=s.querySelector("head");i&&Array.from(i.childNodes).forEach(l=>{t.appendChild(l)});const o=s.querySelector("body");o&&Array.from(o.childNodes).forEach(l=>{l instanceof HTMLVideoElement||l instanceof HTMLAudioElement?t.appendChild(l.cloneNode(!0)):t.appendChild(l)})}},hasClass=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let s=0;s<n.length;s++)if(!t.classList.contains(n[s]))return!1;return!0},removeCustomClasses=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(swalClasses).includes(n)&&!Object.values(iconTypes).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},applyCustomClass=(t,e,n)=>{if(removeCustomClasses(t,e),!e.customClass)return;const s=e.customClass[n];if(s){if(typeof s!="string"&&!s.forEach){warn(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof s}"`);return}addClass(t,s)}},getInput$1=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${swalClasses.popup} > .${swalClasses[e]}`);case"checkbox":return t.querySelector(`.${swalClasses.popup} > .${swalClasses.checkbox} input`);case"radio":return t.querySelector(`.${swalClasses.popup} > .${swalClasses.radio} input:checked`)||t.querySelector(`.${swalClasses.popup} > .${swalClasses.radio} input:first-child`);case"range":return t.querySelector(`.${swalClasses.popup} > .${swalClasses.range} input`);default:return t.querySelector(`.${swalClasses.popup} > .${swalClasses.input}`)}},focusInput=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},toggleClass=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(t)?t.forEach(i=>{n?i.classList.add(s):i.classList.remove(s)}):n?t.classList.add(s):t.classList.remove(s)}))},addClass=(t,e)=>{toggleClass(t,e,!0)},removeClass=(t,e)=>{toggleClass(t,e,!1)},getDirectChildByClass=(t,e)=>{const n=Array.from(t.children);for(let s=0;s<n.length;s++){const i=n[s];if(i instanceof HTMLElement&&hasClass(i,e))return i}},applyNumericalStyle=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},show=(t,e="flex")=>{t&&(t.style.display=e)},hide$3=t=>{t&&(t.style.display="none")},showWhenInnerHtmlPresent=(t,e="block")=>{t&&new MutationObserver(()=>{toggle(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},setStyle$2=(t,e,n,s)=>{const i=t.querySelector(e);i&&i.style.setProperty(n,s)},toggle=(t,e,n="flex")=>{e?show(t,n):hide$3(t)},isVisible$1=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),allButtonsAreHidden=()=>!isVisible$1(getConfirmButton())&&!isVisible$1(getDenyButton())&&!isVisible$1(getCancelButton()),isScrollable$1=t=>t.scrollHeight>t.clientHeight,selfOrParentIsScrollable=(t,e)=>{let n=t;for(;n&&n!==e;){if(isScrollable$1(n))return!0;n=n.parentElement}return!1},hasCssAnimation=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||s>0},animateTimerProgressBar=(t,e=!1)=>{const n=getTimerProgressBar();n&&isVisible$1(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},stopTimerProgressBar=()=>{const t=getTimerProgressBar();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),s=e/n*100;t.style.width=`${s}%`},isNodeEnv=()=>typeof window>"u"||typeof document>"u",sweetHTML=`
 <div aria-labelledby="${swalClasses.title}" aria-describedby="${swalClasses["html-container"]}" class="${swalClasses.popup}" tabindex="-1">
   <button type="button" class="${swalClasses.close}"></button>
   <ul class="${swalClasses["progress-steps"]}"></ul>
   <div class="${swalClasses.icon}"></div>
   <img class="${swalClasses.image}" />
   <h2 class="${swalClasses.title}" id="${swalClasses.title}"></h2>
   <div class="${swalClasses["html-container"]}" id="${swalClasses["html-container"]}"></div>
   <input class="${swalClasses.input}" id="${swalClasses.input}" />
   <input type="file" class="${swalClasses.file}" />
   <div class="${swalClasses.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${swalClasses.select}" id="${swalClasses.select}"></select>
   <div class="${swalClasses.radio}"></div>
   <label class="${swalClasses.checkbox}">
     <input type="checkbox" id="${swalClasses.checkbox}" />
     <span class="${swalClasses.label}"></span>
   </label>
   <textarea class="${swalClasses.textarea}" id="${swalClasses.textarea}"></textarea>
   <div class="${swalClasses["validation-message"]}" id="${swalClasses["validation-message"]}"></div>
   <div class="${swalClasses.actions}">
     <div class="${swalClasses.loader}"></div>
     <button type="button" class="${swalClasses.confirm}"></button>
     <button type="button" class="${swalClasses.deny}"></button>
     <button type="button" class="${swalClasses.cancel}"></button>
   </div>
   <div class="${swalClasses.footer}"></div>
   <div class="${swalClasses["timer-progress-bar-container"]}">
     <div class="${swalClasses["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),resetOldContainer=()=>{const t=getContainer();return t?(t.remove(),removeClass([document.documentElement,document.body],[swalClasses["no-backdrop"],swalClasses["toast-shown"],swalClasses["has-column"]]),!0):!1},resetValidationMessage$1=()=>{globalState.currentInstance.resetValidationMessage()},addInputChangeListeners=()=>{const t=getPopup(),e=getDirectChildByClass(t,swalClasses.input),n=getDirectChildByClass(t,swalClasses.file),s=t.querySelector(`.${swalClasses.range} input`),i=t.querySelector(`.${swalClasses.range} output`),o=getDirectChildByClass(t,swalClasses.select),l=t.querySelector(`.${swalClasses.checkbox} input`),u=getDirectChildByClass(t,swalClasses.textarea);e.oninput=resetValidationMessage$1,n.onchange=resetValidationMessage$1,o.onchange=resetValidationMessage$1,l.onchange=resetValidationMessage$1,u.oninput=resetValidationMessage$1,s.oninput=()=>{resetValidationMessage$1(),i.value=s.value},s.onchange=()=>{resetValidationMessage$1(),i.value=s.value}},getTarget=t=>typeof t=="string"?document.querySelector(t):t,setupAccessibility=t=>{const e=getPopup();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},setupRTL=t=>{window.getComputedStyle(t).direction==="rtl"&&addClass(getContainer(),swalClasses.rtl)},init=t=>{const e=resetOldContainer();if(isNodeEnv()){error("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=swalClasses.container,e&&addClass(n,swalClasses["no-transition"]),setInnerHtml(n,sweetHTML),n.dataset.swal2Theme=t.theme;const s=getTarget(t.target);s.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),setupAccessibility(t),setupRTL(s),addInputChangeListeners()},parseHtmlToContainer=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?handleObject(t,e):t&&setInnerHtml(e,t)},handleObject=(t,e)=>{t.jquery?handleJqueryElem(e,t):setInnerHtml(e,t.toString())},handleJqueryElem=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},renderActions=(t,e)=>{const n=getActions(),s=getLoader();!n||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?hide$3(n):show(n),applyCustomClass(n,e,"actions"),renderButtons(n,s,e),setInnerHtml(s,e.loaderHtml||""),applyCustomClass(s,e,"loader"))};function renderButtons(t,e,n){const s=getConfirmButton(),i=getDenyButton(),o=getCancelButton();!s||!i||!o||(renderButton(s,"confirm",n),renderButton(i,"deny",n),renderButton(o,"cancel",n),handleButtonsStyling(s,i,o,n),n.reverseButtons&&(n.toast?(t.insertBefore(o,s),t.insertBefore(i,s)):(t.insertBefore(o,e),t.insertBefore(i,e),t.insertBefore(s,e))))}function handleButtonsStyling(t,e,n,s){if(!s.buttonsStyling){removeClass([t,e,n],swalClasses.styled);return}addClass([t,e,n],swalClasses.styled),s.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",s.confirmButtonColor),s.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",s.denyButtonColor),s.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",s.cancelButtonColor),applyOutlineColor(t),applyOutlineColor(e),applyOutlineColor(n)}function applyOutlineColor(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function renderButton(t,e,n){const s=capitalizeFirstLetter(e);toggle(t,n[`show${s}Button`],"inline-block"),setInnerHtml(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=swalClasses[e],applyCustomClass(t,n,`${e}Button`)}const renderCloseButton=(t,e)=>{const n=getCloseButton();n&&(setInnerHtml(n,e.closeButtonHtml||""),applyCustomClass(n,e,"closeButton"),toggle(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},renderContainer=(t,e)=>{const n=getContainer();n&&(handleBackdropParam(n,e.backdrop),handlePositionParam(n,e.position),handleGrowParam(n,e.grow),applyCustomClass(n,e,"container"))};function handleBackdropParam(t,e){typeof e=="string"?t.style.background=e:e||addClass([document.documentElement,document.body],swalClasses["no-backdrop"])}function handlePositionParam(t,e){e&&(e in swalClasses?addClass(t,swalClasses[e]):(warn('The "position" parameter is not valid, defaulting to "center"'),addClass(t,swalClasses.center)))}function handleGrowParam(t,e){e&&addClass(t,swalClasses[`grow-${e}`])}var privateProps={innerParams:new WeakMap,domCache:new WeakMap};const inputClasses=["input","file","range","select","radio","checkbox","textarea"],renderInput=(t,e)=>{const n=getPopup();if(!n)return;const s=privateProps.innerParams.get(t),i=!s||e.input!==s.input;inputClasses.forEach(o=>{const l=getDirectChildByClass(n,swalClasses[o]);l&&(setAttributes(o,e.inputAttributes),l.className=swalClasses[o],i&&hide$3(l))}),e.input&&(i&&showInput(e),setCustomClass(e))},showInput=t=>{if(!t.input)return;if(!renderInputType[t.input]){error(`Unexpected type of input! Expected ${Object.keys(renderInputType).join(" | ")}, got "${t.input}"`);return}const e=getInputContainer(t.input);if(!e)return;const n=renderInputType[t.input](e,t);show(e),t.inputAutoFocus&&setTimeout(()=>{focusInput(n)})},removeAttributes=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},setAttributes=(t,e)=>{const n=getPopup();if(!n)return;const s=getInput$1(n,t);if(s){removeAttributes(s);for(const i in e)s.setAttribute(i,e[i])}},setCustomClass=t=>{if(!t.input)return;const e=getInputContainer(t.input);e&&applyCustomClass(e,t,"input")},setInputPlaceholder=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},setInputLabel=(t,e,n)=>{if(n.inputLabel){const s=document.createElement("label"),i=swalClasses["input-label"];s.setAttribute("for",t.id),s.className=i,typeof n.customClass=="object"&&addClass(s,n.customClass.inputLabel),s.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",s)}},getInputContainer=t=>{const e=getPopup();if(e)return getDirectChildByClass(e,swalClasses[t]||swalClasses.input)},checkAndSetInputValue=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:isPromise(e)||warn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},renderInputType={};renderInputType.text=renderInputType.email=renderInputType.password=renderInputType.number=renderInputType.tel=renderInputType.url=renderInputType.search=renderInputType.date=renderInputType["datetime-local"]=renderInputType.time=renderInputType.week=renderInputType.month=(t,e)=>(checkAndSetInputValue(t,e.inputValue),setInputLabel(t,t,e),setInputPlaceholder(t,e),t.type=e.input,t);renderInputType.file=(t,e)=>(setInputLabel(t,t,e),setInputPlaceholder(t,e),t);renderInputType.range=(t,e)=>{const n=t.querySelector("input"),s=t.querySelector("output");return checkAndSetInputValue(n,e.inputValue),n.type=e.input,checkAndSetInputValue(s,e.inputValue),setInputLabel(n,t,e),t};renderInputType.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");setInnerHtml(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return setInputLabel(t,t,e),t};renderInputType.radio=t=>(t.textContent="",t);renderInputType.checkbox=(t,e)=>{const n=getInput$1(getPopup(),"checkbox");n.value="1",n.checked=!!e.inputValue;const s=t.querySelector("span");return setInnerHtml(s,e.inputPlaceholder||e.inputLabel),n};renderInputType.textarea=(t,e)=>{checkAndSetInputValue(t,e.inputValue),setInputPlaceholder(t,e),setInputLabel(t,t,e);const n=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(getPopup()).width),i=()=>{if(!document.body.contains(t))return;const o=t.offsetWidth+n(t);o>s?getPopup().style.width=`${o}px`:applyNumericalStyle(getPopup(),"width",e.width)};new MutationObserver(i).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const renderContent=(t,e)=>{const n=getHtmlContainer();n&&(showWhenInnerHtmlPresent(n),applyCustomClass(n,e,"htmlContainer"),e.html?(parseHtmlToContainer(e.html,n),show(n,"block")):e.text?(n.textContent=e.text,show(n,"block")):hide$3(n),renderInput(t,e))},renderFooter=(t,e)=>{const n=getFooter();n&&(showWhenInnerHtmlPresent(n),toggle(n,e.footer,"block"),e.footer&&parseHtmlToContainer(e.footer,n),applyCustomClass(n,e,"footer"))},renderIcon=(t,e)=>{const n=privateProps.innerParams.get(t),s=getIcon();if(!s)return;if(n&&e.icon===n.icon){setContent(s,e),applyStyles(s,e);return}if(!e.icon&&!e.iconHtml){hide$3(s);return}if(e.icon&&Object.keys(iconTypes).indexOf(e.icon)===-1){error(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),hide$3(s);return}show(s),setContent(s,e),applyStyles(s,e),addClass(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",adjustSuccessIconBackgroundColor)},applyStyles=(t,e)=>{for(const[n,s]of Object.entries(iconTypes))e.icon!==n&&removeClass(t,s);addClass(t,e.icon&&iconTypes[e.icon]),setColor(t,e),adjustSuccessIconBackgroundColor(),applyCustomClass(t,e,"icon")},adjustSuccessIconBackgroundColor=()=>{const t=getPopup();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<n.length;s++)n[s].style.backgroundColor=e},successIconHtml=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,errorIconHtml=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,setContent=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,s="";e.iconHtml?s=iconContent(e.iconHtml):e.icon==="success"?(s=successIconHtml,n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?s=errorIconHtml:e.icon&&(s=iconContent({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==s.trim()&&setInnerHtml(t,s)},setColor=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])setStyle$2(t,n,"background-color",e.iconColor);setStyle$2(t,".swal2-success-ring","border-color",e.iconColor)}},iconContent=t=>`<div class="${swalClasses["icon-content"]}">${t}</div>`,renderImage=(t,e)=>{const n=getImage();if(n){if(!e.imageUrl){hide$3(n);return}show(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),applyNumericalStyle(n,"width",e.imageWidth),applyNumericalStyle(n,"height",e.imageHeight),n.className=swalClasses.image,applyCustomClass(n,e,"image")}};let dragging=!1,mousedownX=0,mousedownY=0,initialX=0,initialY=0;const addDraggableListeners=t=>{t.addEventListener("mousedown",down),document.body.addEventListener("mousemove",move),t.addEventListener("mouseup",up),t.addEventListener("touchstart",down),document.body.addEventListener("touchmove",move),t.addEventListener("touchend",up)},removeDraggableListeners=t=>{t.removeEventListener("mousedown",down),document.body.removeEventListener("mousemove",move),t.removeEventListener("mouseup",up),t.removeEventListener("touchstart",down),document.body.removeEventListener("touchmove",move),t.removeEventListener("touchend",up)},down=t=>{const e=getPopup();if(t.target===e||getIcon().contains(t.target)){dragging=!0;const n=getClientXY(t);mousedownX=n.clientX,mousedownY=n.clientY,initialX=parseInt(e.style.insetInlineStart)||0,initialY=parseInt(e.style.insetBlockStart)||0,addClass(e,"swal2-dragging")}},move=t=>{const e=getPopup();if(dragging){let{clientX:n,clientY:s}=getClientXY(t);e.style.insetInlineStart=`${initialX+(n-mousedownX)}px`,e.style.insetBlockStart=`${initialY+(s-mousedownY)}px`}},up=()=>{const t=getPopup();dragging=!1,removeClass(t,"swal2-dragging")},getClientXY=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},renderPopup=(t,e)=>{const n=getContainer(),s=getPopup();if(!(!n||!s)){if(e.toast){applyNumericalStyle(n,"width",e.width),s.style.width="100%";const i=getLoader();i&&s.insertBefore(i,getIcon())}else applyNumericalStyle(s,"width",e.width);applyNumericalStyle(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),hide$3(getValidationMessage()),addClasses$1(s,e),e.draggable&&!e.toast?(addClass(s,swalClasses.draggable),addDraggableListeners(s)):(removeClass(s,swalClasses.draggable),removeDraggableListeners(s))}},addClasses$1=(t,e)=>{const n=e.showClass||{};t.className=`${swalClasses.popup} ${isVisible$1(t)?n.popup:""}`,e.toast?(addClass([document.documentElement,document.body],swalClasses["toast-shown"]),addClass(t,swalClasses.toast)):addClass(t,swalClasses.modal),applyCustomClass(t,e,"popup"),typeof e.customClass=="string"&&addClass(t,e.customClass),e.icon&&addClass(t,swalClasses[`icon-${e.icon}`])},renderProgressSteps=(t,e)=>{const n=getProgressSteps();if(!n)return;const{progressSteps:s,currentProgressStep:i}=e;if(!s||s.length===0||i===void 0){hide$3(n);return}show(n),n.textContent="",i>=s.length&&warn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((o,l)=>{const u=createStepElement(o);if(n.appendChild(u),l===i&&addClass(u,swalClasses["active-progress-step"]),l!==s.length-1){const d=createLineElement(e);n.appendChild(d)}})},createStepElement=t=>{const e=document.createElement("li");return addClass(e,swalClasses["progress-step"]),setInnerHtml(e,t),e},createLineElement=t=>{const e=document.createElement("li");return addClass(e,swalClasses["progress-step-line"]),t.progressStepsDistance&&applyNumericalStyle(e,"width",t.progressStepsDistance),e},renderTitle=(t,e)=>{const n=getTitle();n&&(showWhenInnerHtmlPresent(n),toggle(n,e.title||e.titleText,"block"),e.title&&parseHtmlToContainer(e.title,n),e.titleText&&(n.innerText=e.titleText),applyCustomClass(n,e,"title"))},render=(t,e)=>{renderPopup(t,e),renderContainer(t,e),renderProgressSteps(t,e),renderIcon(t,e),renderImage(t,e),renderTitle(t,e),renderCloseButton(t,e),renderContent(t,e),renderActions(t,e),renderFooter(t,e);const n=getPopup();typeof e.didRender=="function"&&n&&e.didRender(n),globalState.eventEmitter.emit("didRender",n)},isVisible=()=>isVisible$1(getPopup()),clickConfirm=()=>{var t;return(t=getConfirmButton())===null||t===void 0?void 0:t.click()},clickDeny=()=>{var t;return(t=getDenyButton())===null||t===void 0?void 0:t.click()},clickCancel=()=>{var t;return(t=getCancelButton())===null||t===void 0?void 0:t.click()},DismissReason=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),removeKeydownHandler=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},addKeydownHandler=(t,e,n)=>{removeKeydownHandler(t),e.toast||(t.keydownHandler=s=>keydownHandler(e,s,n),t.keydownTarget=e.keydownListenerCapture?window:getPopup(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},setFocus=(t,e)=>{var n;const s=getFocusableElements();if(s.length){t=t+e,t===-2&&(t=s.length-1),t===s.length?t=0:t===-1&&(t=s.length-1),s[t].focus();return}(n=getPopup())===null||n===void 0||n.focus()},arrowKeysNextButton=["ArrowRight","ArrowDown"],arrowKeysPreviousButton=["ArrowLeft","ArrowUp"],keydownHandler=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?handleEnter(e,t):e.key==="Tab"?handleTab(e):[...arrowKeysNextButton,...arrowKeysPreviousButton].includes(e.key)?handleArrows(e.key):e.key==="Escape"&&handleEsc(e,t,n)))},handleEnter=(t,e)=>{if(!callIfFunction(e.allowEnterKey))return;const n=getInput$1(getPopup(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;clickConfirm(),t.preventDefault()}},handleTab=t=>{const e=t.target,n=getFocusableElements();let s=-1;for(let i=0;i<n.length;i++)if(e===n[i]){s=i;break}t.shiftKey?setFocus(s,-1):setFocus(s,1),t.stopPropagation(),t.preventDefault()},handleArrows=t=>{const e=getActions(),n=getConfirmButton(),s=getDenyButton(),i=getCancelButton();if(!e||!n||!s||!i)return;const o=[n,s,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const l=arrowKeysNextButton.includes(t)?"nextElementSibling":"previousElementSibling";let u=document.activeElement;if(u){for(let d=0;d<e.children.length;d++){if(u=u[l],!u)return;if(u instanceof HTMLButtonElement&&isVisible$1(u))break}u instanceof HTMLButtonElement&&u.focus()}},handleEsc=(t,e,n)=>{t.preventDefault(),callIfFunction(e.allowEscapeKey)&&n(DismissReason.esc)};var privateMethods={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const setAriaHidden=()=>{const t=getContainer();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},unsetAriaHidden=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},isSafariOrIOS=typeof window<"u"&&!!window.GestureEvent,iOSfix=()=>{if(isSafariOrIOS&&!hasClass(document.body,swalClasses.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,addClass(document.body,swalClasses.iosfix),lockBodyScroll()}},lockBodyScroll=()=>{const t=getContainer();if(!t)return;let e;t.ontouchstart=n=>{e=shouldPreventTouchMove(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},shouldPreventTouchMove=t=>{const e=t.target,n=getContainer(),s=getHtmlContainer();return!n||!s||isStylus(t)||isZoom(t)?!1:e===n||!isScrollable$1(n)&&e instanceof HTMLElement&&!selfOrParentIsScrollable(e,s)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(isScrollable$1(s)&&s.contains(e))},isStylus=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",isZoom=t=>t.touches&&t.touches.length>1,undoIOSfix=()=>{if(hasClass(document.body,swalClasses.iosfix)){const t=parseInt(document.body.style.top,10);removeClass(document.body,swalClasses.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},measureScrollbar=()=>{const t=document.createElement("div");t.className=swalClasses["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let previousBodyPadding=null;const replaceScrollbarWithPadding=t=>{previousBodyPadding===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${previousBodyPadding+measureScrollbar()}px`)},undoReplaceScrollbarWithPadding=()=>{previousBodyPadding!==null&&(document.body.style.paddingRight=`${previousBodyPadding}px`,previousBodyPadding=null)};function removePopupAndResetState(t,e,n,s){isToast()?triggerDidCloseAndDispose(t,s):(restoreActiveElement(n).then(()=>triggerDidCloseAndDispose(t,s)),removeKeydownHandler(globalState)),isSafariOrIOS?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),isModal()&&(undoReplaceScrollbarWithPadding(),undoIOSfix(),unsetAriaHidden()),removeBodyClasses()}function removeBodyClasses(){removeClass([document.documentElement,document.body],[swalClasses.shown,swalClasses["height-auto"],swalClasses["no-backdrop"],swalClasses["toast-shown"]])}function close(t){t=prepareResolveValue(t);const e=privateMethods.swalPromiseResolve.get(this),n=triggerClosePopup(this);this.isAwaitingPromise?t.isDismissed||(handleAwaitingPromise(this),e(t)):n&&e(t)}const triggerClosePopup=t=>{const e=getPopup();if(!e)return!1;const n=privateProps.innerParams.get(t);if(!n||hasClass(e,n.hideClass.popup))return!1;removeClass(e,n.showClass.popup),addClass(e,n.hideClass.popup);const s=getContainer();return removeClass(s,n.showClass.backdrop),addClass(s,n.hideClass.backdrop),handlePopupAnimation(t,e,n),!0};function rejectPromise(t){const e=privateMethods.swalPromiseReject.get(this);handleAwaitingPromise(this),e&&e(t)}const handleAwaitingPromise=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,privateProps.innerParams.get(t)||t._destroy())},prepareResolveValue=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),handlePopupAnimation=(t,e,n)=>{var s;const i=getContainer(),o=hasCssAnimation(e);typeof n.willClose=="function"&&n.willClose(e),(s=globalState.eventEmitter)===null||s===void 0||s.emit("willClose",e),o?animatePopup(t,e,i,n.returnFocus,n.didClose):removePopupAndResetState(t,i,n.returnFocus,n.didClose)},animatePopup=(t,e,n,s,i)=>{globalState.swalCloseEventFinishedCallback=removePopupAndResetState.bind(null,t,n,s,i);const o=function(l){if(l.target===e){var u;(u=globalState.swalCloseEventFinishedCallback)===null||u===void 0||u.call(globalState),delete globalState.swalCloseEventFinishedCallback,e.removeEventListener("animationend",o),e.removeEventListener("transitionend",o)}};e.addEventListener("animationend",o),e.addEventListener("transitionend",o)},triggerDidCloseAndDispose=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=globalState.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},showLoading=t=>{let e=getPopup();if(e||new Swal,e=getPopup(),!e)return;const n=getLoader();isToast()?hide$3(getIcon()):replaceButton(e,t),show(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},replaceButton=(t,e)=>{const n=getActions(),s=getLoader();!n||!s||(!e&&isVisible$1(getConfirmButton())&&(e=getConfirmButton()),show(n),e&&(hide$3(e),s.setAttribute("data-button-to-replace",e.className),n.insertBefore(s,e)),addClass([t,n],swalClasses.loading))},handleInputOptionsAndValue=(t,e)=>{e.input==="select"||e.input==="radio"?handleInputOptions(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(hasToPromiseFn(e.inputValue)||isPromise(e.inputValue))&&(showLoading(getConfirmButton()),handleInputValue(t,e))},getInputValue=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return getCheckboxValue(n);case"radio":return getRadioValue(n);case"file":return getFileValue(n);default:return e.inputAutoTrim?n.value.trim():n.value}},getCheckboxValue=t=>t.checked?1:0,getRadioValue=t=>t.checked?t.value:null,getFileValue=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,handleInputOptions=(t,e)=>{const n=getPopup();if(!n)return;const s=i=>{e.input==="select"?populateSelectOptions(n,formatInputOptions(i),e):e.input==="radio"&&populateRadioOptions(n,formatInputOptions(i),e)};hasToPromiseFn(e.inputOptions)||isPromise(e.inputOptions)?(showLoading(getConfirmButton()),asPromise(e.inputOptions).then(i=>{t.hideLoading(),s(i)})):typeof e.inputOptions=="object"?s(e.inputOptions):error(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},handleInputValue=(t,e)=>{const n=t.getInput();n&&(hide$3(n),asPromise(e.inputValue).then(s=>{n.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,show(n),n.focus(),t.hideLoading()}).catch(s=>{error(`Error in inputValue promise: ${s}`),n.value="",show(n),n.focus(),t.hideLoading()}))};function populateSelectOptions(t,e,n){const s=getDirectChildByClass(t,swalClasses.select);if(!s)return;const i=(o,l,u)=>{const d=document.createElement("option");d.value=u,setInnerHtml(d,l),d.selected=isSelected(u,n.inputValue),o.appendChild(d)};e.forEach(o=>{const l=o[0],u=o[1];if(Array.isArray(u)){const d=document.createElement("optgroup");d.label=l,d.disabled=!1,s.appendChild(d),u.forEach(f=>i(d,f[1],f[0]))}else i(s,u,l)}),s.focus()}function populateRadioOptions(t,e,n){const s=getDirectChildByClass(t,swalClasses.radio);if(!s)return;e.forEach(o=>{const l=o[0],u=o[1],d=document.createElement("input"),f=document.createElement("label");d.type="radio",d.name=swalClasses.radio,d.value=l,isSelected(l,n.inputValue)&&(d.checked=!0);const m=document.createElement("span");setInnerHtml(m,u),m.className=swalClasses.label,f.appendChild(d),f.appendChild(m),s.appendChild(f)});const i=s.querySelectorAll("input");i.length&&i[0].focus()}const formatInputOptions=t=>{const e=[];return t instanceof Map?t.forEach((n,s)=>{let i=n;typeof i=="object"&&(i=formatInputOptions(i)),e.push([s,i])}):Object.keys(t).forEach(n=>{let s=t[n];typeof s=="object"&&(s=formatInputOptions(s)),e.push([n,s])}),e},isSelected=(t,e)=>!!e&&e.toString()===t.toString(),handleConfirmButtonClick=t=>{const e=privateProps.innerParams.get(t);t.disableButtons(),e.input?handleConfirmOrDenyWithInput(t,"confirm"):confirm(t,!0)},handleDenyButtonClick=t=>{const e=privateProps.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?handleConfirmOrDenyWithInput(t,"deny"):deny(t,!1)},handleCancelButtonClick=(t,e)=>{t.disableButtons(),e(DismissReason.cancel)},handleConfirmOrDenyWithInput=(t,e)=>{const n=privateProps.innerParams.get(t);if(!n.input){error(`The "input" parameter is needed to be set when using returnInputValueOn${capitalizeFirstLetter(e)}`);return}const s=t.getInput(),i=getInputValue(t,n);n.inputValidator?handleInputValidator(t,i,e):s&&!s.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||s.validationMessage)):e==="deny"?deny(t,i):confirm(t,i)},handleInputValidator=(t,e,n)=>{const s=privateProps.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>asPromise(s.inputValidator(e,s.validationMessage))).then(o=>{t.enableButtons(),t.enableInput(),o?t.showValidationMessage(o):n==="deny"?deny(t,e):confirm(t,e)})},deny=(t,e)=>{const n=privateProps.innerParams.get(t||void 0);n.showLoaderOnDeny&&showLoading(getDenyButton()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>asPromise(n.preDeny(e,n.validationMessage))).then(i=>{i===!1?(t.hideLoading(),handleAwaitingPromise(t)):t.close({isDenied:!0,value:typeof i>"u"?e:i})}).catch(i=>rejectWith(t||void 0,i))):t.close({isDenied:!0,value:e})},succeedWith=(t,e)=>{t.close({isConfirmed:!0,value:e})},rejectWith=(t,e)=>{t.rejectPromise(e)},confirm=(t,e)=>{const n=privateProps.innerParams.get(t||void 0);n.showLoaderOnConfirm&&showLoading(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>asPromise(n.preConfirm(e,n.validationMessage))).then(i=>{isVisible$1(getValidationMessage())||i===!1?(t.hideLoading(),handleAwaitingPromise(t)):succeedWith(t,typeof i>"u"?e:i)}).catch(i=>rejectWith(t||void 0,i))):succeedWith(t,e)};function hideLoading(){const t=privateProps.innerParams.get(this);if(!t)return;const e=privateProps.domCache.get(this);hide$3(e.loader),isToast()?t.icon&&show(getIcon()):showRelatedButton(e),removeClass([e.popup,e.actions],swalClasses.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const showRelatedButton=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?show(e[0],"inline-block"):allButtonsAreHidden()&&hide$3(t.actions)};function getInput(){const t=privateProps.innerParams.get(this),e=privateProps.domCache.get(this);return e?getInput$1(e.popup,t.input):null}function setButtonsDisabled(t,e,n){const s=privateProps.domCache.get(t);e.forEach(i=>{s[i].disabled=n})}function setInputDisabled(t,e){const n=getPopup();if(!(!n||!t))if(t.type==="radio"){const s=n.querySelectorAll(`[name="${swalClasses.radio}"]`);for(let i=0;i<s.length;i++)s[i].disabled=e}else t.disabled=e}function enableButtons(){setButtonsDisabled(this,["confirmButton","denyButton","cancelButton"],!1)}function disableButtons(){setButtonsDisabled(this,["confirmButton","denyButton","cancelButton"],!0)}function enableInput(){setInputDisabled(this.getInput(),!1)}function disableInput(){setInputDisabled(this.getInput(),!0)}function showValidationMessage(t){const e=privateProps.domCache.get(this),n=privateProps.innerParams.get(this);setInnerHtml(e.validationMessage,t),e.validationMessage.className=swalClasses["validation-message"],n.customClass&&n.customClass.validationMessage&&addClass(e.validationMessage,n.customClass.validationMessage),show(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",swalClasses["validation-message"]),focusInput(s),addClass(s,swalClasses.inputerror))}function resetValidationMessage(){const t=privateProps.domCache.get(this);t.validationMessage&&hide$3(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),removeClass(e,swalClasses.inputerror))}const defaultParams={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},updatableParams=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],deprecatedParams={allowEnterKey:void 0},toastIncompatibleParams=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],isValidParameter=t=>Object.prototype.hasOwnProperty.call(defaultParams,t),isUpdatableParameter=t=>updatableParams.indexOf(t)!==-1,isDeprecatedParameter=t=>deprecatedParams[t],checkIfParamIsValid=t=>{isValidParameter(t)||warn(`Unknown parameter "${t}"`)},checkIfToastParamIsValid=t=>{toastIncompatibleParams.includes(t)&&warn(`The parameter "${t}" is incompatible with toasts`)},checkIfParamIsDeprecated=t=>{const e=isDeprecatedParameter(t);e&&warnAboutDeprecation(t,e)},showWarningsForParams=t=>{t.backdrop===!1&&t.allowOutsideClick&&warn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&warn(`Invalid theme "${t.theme}"`);for(const e in t)checkIfParamIsValid(e),t.toast&&checkIfToastParamIsValid(e),checkIfParamIsDeprecated(e)};function update(t){const e=getContainer(),n=getPopup(),s=privateProps.innerParams.get(this);if(!n||hasClass(n,s.hideClass.popup)){warn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const i=filterValidParams(t),o=Object.assign({},s,i);showWarningsForParams(o),e.dataset.swal2Theme=o.theme,render(this,o),privateProps.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const filterValidParams=t=>{const e={};return Object.keys(t).forEach(n=>{isUpdatableParameter(n)?e[n]=t[n]:warn(`Invalid parameter to update: ${n}`)}),e};function _destroy(){const t=privateProps.domCache.get(this),e=privateProps.innerParams.get(this);if(!e){disposeWeakMaps(this);return}t.popup&&globalState.swalCloseEventFinishedCallback&&(globalState.swalCloseEventFinishedCallback(),delete globalState.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),globalState.eventEmitter.emit("didDestroy"),disposeSwal(this)}const disposeSwal=t=>{disposeWeakMaps(t),delete t.params,delete globalState.keydownHandler,delete globalState.keydownTarget,delete globalState.currentInstance},disposeWeakMaps=t=>{t.isAwaitingPromise?(unsetWeakMaps(privateProps,t),t.isAwaitingPromise=!0):(unsetWeakMaps(privateMethods,t),unsetWeakMaps(privateProps,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},unsetWeakMaps=(t,e)=>{for(const n in t)t[n].delete(e)};var instanceMethods=Object.freeze({__proto__:null,_destroy,close,closeModal:close,closePopup:close,closeToast:close,disableButtons,disableInput,disableLoading:hideLoading,enableButtons,enableInput,getInput,handleAwaitingPromise,hideLoading,rejectPromise,resetValidationMessage,showValidationMessage,update});const handlePopupClick=(t,e,n)=>{t.toast?handleToastClick(t,e,n):(handleModalMousedown(e),handleContainerMousedown(e),handleModalClick(t,e,n))},handleToastClick=(t,e,n)=>{e.popup.onclick=()=>{t&&(isAnyButtonShown(t)||t.timer||t.input)||n(DismissReason.close)}},isAnyButtonShown=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let ignoreOutsideClick=!1;const handleModalMousedown=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(ignoreOutsideClick=!0)}}},handleContainerMousedown=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(ignoreOutsideClick=!0)}}},handleModalClick=(t,e,n)=>{e.container.onclick=s=>{if(ignoreOutsideClick){ignoreOutsideClick=!1;return}s.target===e.container&&callIfFunction(t.allowOutsideClick)&&n(DismissReason.backdrop)}},isJqueryElement=t=>typeof t=="object"&&t.jquery,isElement$1=t=>t instanceof Element||isJqueryElement(t),argsToParams=t=>{const e={};return typeof t[0]=="object"&&!isElement$1(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,s)=>{const i=t[s];typeof i=="string"||isElement$1(i)?e[n]=i:i!==void 0&&error(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)}),e};function fire(...t){return new this(...t)}function mixin(t){class e extends this{_main(s,i){return super._main(s,Object.assign({},t,i))}}return e}const getTimerLeft=()=>globalState.timeout&&globalState.timeout.getTimerLeft(),stopTimer=()=>{if(globalState.timeout)return stopTimerProgressBar(),globalState.timeout.stop()},resumeTimer=()=>{if(globalState.timeout){const t=globalState.timeout.start();return animateTimerProgressBar(t),t}},toggleTimer=()=>{const t=globalState.timeout;return t&&(t.running?stopTimer():resumeTimer())},increaseTimer=t=>{if(globalState.timeout){const e=globalState.timeout.increase(t);return animateTimerProgressBar(e,!0),e}},isTimerRunning=()=>!!(globalState.timeout&&globalState.timeout.isRunning());let bodyClickListenerAdded=!1;const clickHandlers={};function bindClickHandler(t="data-swal-template"){clickHandlers[t]=this,bodyClickListenerAdded||(document.body.addEventListener("click",bodyClickListener),bodyClickListenerAdded=!0)}const bodyClickListener=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in clickHandlers){const s=e.getAttribute(n);if(s){clickHandlers[n].fire({template:s});return}}};class EventEmitter{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const s=this._getHandlersByEventName(e);s.includes(n)||s.push(n)}once(e,n){const s=(...i)=>{this.removeListener(e,s),n.apply(this,i)};this.on(e,s)}emit(e,...n){this._getHandlersByEventName(e).forEach(s=>{try{s.apply(this,n)}catch(i){console.error(i)}})}removeListener(e,n){const s=this._getHandlersByEventName(e),i=s.indexOf(n);i>-1&&s.splice(i,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}globalState.eventEmitter=new EventEmitter;const on=(t,e)=>{globalState.eventEmitter.on(t,e)},once=(t,e)=>{globalState.eventEmitter.once(t,e)},off=(t,e)=>{if(!t){globalState.eventEmitter.reset();return}e?globalState.eventEmitter.removeListener(t,e):globalState.eventEmitter.removeAllListeners(t)};var staticMethods=Object.freeze({__proto__:null,argsToParams,bindClickHandler,clickCancel,clickConfirm,clickDeny,enableLoading:showLoading,fire,getActions,getCancelButton,getCloseButton,getConfirmButton,getContainer,getDenyButton,getFocusableElements,getFooter,getHtmlContainer,getIcon,getIconContent,getImage,getInputLabel,getLoader,getPopup,getProgressSteps,getTimerLeft,getTimerProgressBar,getTitle,getValidationMessage,increaseTimer,isDeprecatedParameter,isLoading,isTimerRunning,isUpdatableParameter,isValidParameter,isVisible,mixin,off,on,once,resumeTimer,showLoading,stopTimer,toggleTimer});class Timer{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const swalStringParams=["swal-title","swal-html","swal-footer"],getTemplateParams=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return showWarningsForElements(n),Object.assign(getSwalParams(n),getSwalFunctionParams(n),getSwalButtons(n),getSwalImage(n),getSwalIcon(n),getSwalInput(n),getSwalStringParams(n,swalStringParams))},getSwalParams=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(s=>{showWarningsForAttributes(s,["name","value"]);const i=s.getAttribute("name"),o=s.getAttribute("value");!i||!o||(typeof defaultParams[i]=="boolean"?e[i]=o!=="false":typeof defaultParams[i]=="object"?e[i]=JSON.parse(o):e[i]=o)}),e},getSwalFunctionParams=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(s=>{const i=s.getAttribute("name"),o=s.getAttribute("value");!i||!o||(e[i]=new Function(`return ${o}`)())}),e},getSwalButtons=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(s=>{showWarningsForAttributes(s,["type","color","aria-label"]);const i=s.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(e[`${i}ButtonText`]=s.innerHTML,e[`show${capitalizeFirstLetter(i)}Button`]=!0,s.hasAttribute("color")&&(e[`${i}ButtonColor`]=s.getAttribute("color")),s.hasAttribute("aria-label")&&(e[`${i}ButtonAriaLabel`]=s.getAttribute("aria-label")))}),e},getSwalImage=t=>{const e={},n=t.querySelector("swal-image");return n&&(showWarningsForAttributes(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},getSwalIcon=t=>{const e={},n=t.querySelector("swal-icon");return n&&(showWarningsForAttributes(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},getSwalInput=t=>{const e={},n=t.querySelector("swal-input");n&&(showWarningsForAttributes(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const s=Array.from(t.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(i=>{showWarningsForAttributes(i,["value"]);const o=i.getAttribute("value");if(!o)return;const l=i.innerHTML;e.inputOptions[o]=l})),e},getSwalStringParams=(t,e)=>{const n={};for(const s in e){const i=e[s],o=t.querySelector(i);o&&(showWarningsForAttributes(o,[]),n[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return n},showWarningsForElements=t=>{const e=swalStringParams.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const s=n.tagName.toLowerCase();e.includes(s)||warn(`Unrecognized element <${s}>`)})},showWarningsForAttributes=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&warn([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},SHOW_CLASS_TIMEOUT=10,openPopup=t=>{const e=getContainer(),n=getPopup();typeof t.willOpen=="function"&&t.willOpen(n),globalState.eventEmitter.emit("willOpen",n);const i=window.getComputedStyle(document.body).overflowY;addClasses(e,n,t),setTimeout(()=>{setScrollingVisibility(e,n)},SHOW_CLASS_TIMEOUT),isModal()&&(fixScrollContainer(e,t.scrollbarPadding,i),setAriaHidden()),!isToast()&&!globalState.previousActiveElement&&(globalState.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),globalState.eventEmitter.emit("didOpen",n),removeClass(e,swalClasses["no-transition"])},swalOpenAnimationFinished=t=>{const e=getPopup();if(t.target!==e)return;const n=getContainer();e.removeEventListener("animationend",swalOpenAnimationFinished),e.removeEventListener("transitionend",swalOpenAnimationFinished),n.style.overflowY="auto"},setScrollingVisibility=(t,e)=>{hasCssAnimation(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",swalOpenAnimationFinished),e.addEventListener("transitionend",swalOpenAnimationFinished)):t.style.overflowY="auto"},fixScrollContainer=(t,e,n)=>{iOSfix(),e&&n!=="hidden"&&replaceScrollbarWithPadding(n),setTimeout(()=>{t.scrollTop=0})},addClasses=(t,e,n)=>{addClass(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),show(e,"grid"),setTimeout(()=>{addClass(e,n.showClass.popup),e.style.removeProperty("opacity")},SHOW_CLASS_TIMEOUT)):show(e,"grid"),addClass([document.documentElement,document.body],swalClasses.shown),n.heightAuto&&n.backdrop&&!n.toast&&addClass([document.documentElement,document.body],swalClasses["height-auto"])};var defaultInputValidators={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function setDefaultInputValidators(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=defaultInputValidators.email),t.input==="url"&&(t.inputValidator=defaultInputValidators.url))}function validateCustomTargetElement(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(warn('Target parameter is not valid, defaulting to "body"'),t.target="body")}function setParameters(t){setDefaultInputValidators(t),t.showLoaderOnConfirm&&!t.preConfirm&&warn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),validateCustomTargetElement(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),init(t)}let currentInstance;var _promise=new WeakMap;class SweetAlert{constructor(...e){if(_classPrivateFieldInitSpec(this,_promise,void 0),typeof window>"u")return;currentInstance=this;const n=Object.freeze(this.constructor.argsToParams(e));this.params=n,this.isAwaitingPromise=!1,_classPrivateFieldSet2(_promise,this,this._main(currentInstance.params))}_main(e,n={}){if(showWarningsForParams(Object.assign({},n,e)),globalState.currentInstance){const o=privateMethods.swalPromiseResolve.get(globalState.currentInstance),{isAwaitingPromise:l}=globalState.currentInstance;globalState.currentInstance._destroy(),l||o({isDismissed:!0}),isModal()&&unsetAriaHidden()}globalState.currentInstance=currentInstance;const s=prepareParams(e,n);setParameters(s),Object.freeze(s),globalState.timeout&&(globalState.timeout.stop(),delete globalState.timeout),clearTimeout(globalState.restoreFocusTimeout);const i=populateDomCache(currentInstance);return render(currentInstance,s),privateProps.innerParams.set(currentInstance,s),swalPromise(currentInstance,i,s)}then(e){return _classPrivateFieldGet2(_promise,this).then(e)}finally(e){return _classPrivateFieldGet2(_promise,this).finally(e)}}const swalPromise=(t,e,n)=>new Promise((s,i)=>{const o=l=>{t.close({isDismissed:!0,dismiss:l})};privateMethods.swalPromiseResolve.set(t,s),privateMethods.swalPromiseReject.set(t,i),e.confirmButton.onclick=()=>{handleConfirmButtonClick(t)},e.denyButton.onclick=()=>{handleDenyButtonClick(t)},e.cancelButton.onclick=()=>{handleCancelButtonClick(t,o)},e.closeButton.onclick=()=>{o(DismissReason.close)},handlePopupClick(n,e,o),addKeydownHandler(globalState,n,o),handleInputOptionsAndValue(t,n),openPopup(n),setupTimer(globalState,n,o),initFocus(e,n),setTimeout(()=>{e.container.scrollTop=0})}),prepareParams=(t,e)=>{const n=getTemplateParams(t),s=Object.assign({},defaultParams,e,n,t);return s.showClass=Object.assign({},defaultParams.showClass,s.showClass),s.hideClass=Object.assign({},defaultParams.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},populateDomCache=t=>{const e={popup:getPopup(),container:getContainer(),actions:getActions(),confirmButton:getConfirmButton(),denyButton:getDenyButton(),cancelButton:getCancelButton(),loader:getLoader(),closeButton:getCloseButton(),validationMessage:getValidationMessage(),progressSteps:getProgressSteps()};return privateProps.domCache.set(t,e),e},setupTimer=(t,e,n)=>{const s=getTimerProgressBar();hide$3(s),e.timer&&(t.timeout=new Timer(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(show(s),applyCustomClass(s,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&animateTimerProgressBar(e.timer)})))},initFocus=(t,e)=>{if(!e.toast){if(!callIfFunction(e.allowEnterKey)){warnAboutDeprecation("allowEnterKey"),blurActiveElement();return}focusAutofocus(t)||focusButton(t,e)||setFocus(-1,1)}},focusAutofocus=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&isVisible$1(n))return n.focus(),!0;return!1},focusButton=(t,e)=>e.focusDeny&&isVisible$1(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&isVisible$1(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&isVisible$1(t.confirmButton)?(t.confirmButton.focus(),!0):!1,blurActiveElement=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${t}`)}SweetAlert.prototype.disableButtons=disableButtons;SweetAlert.prototype.enableButtons=enableButtons;SweetAlert.prototype.getInput=getInput;SweetAlert.prototype.disableInput=disableInput;SweetAlert.prototype.enableInput=enableInput;SweetAlert.prototype.hideLoading=hideLoading;SweetAlert.prototype.disableLoading=hideLoading;SweetAlert.prototype.showValidationMessage=showValidationMessage;SweetAlert.prototype.resetValidationMessage=resetValidationMessage;SweetAlert.prototype.close=close;SweetAlert.prototype.closePopup=close;SweetAlert.prototype.closeModal=close;SweetAlert.prototype.closeToast=close;SweetAlert.prototype.rejectPromise=rejectPromise;SweetAlert.prototype.update=update;SweetAlert.prototype._destroy=_destroy;Object.assign(SweetAlert,staticMethods);Object.keys(instanceMethods).forEach(t=>{SweetAlert[t]=function(...e){return currentInstance&&currentInstance[t]?currentInstance[t](...e):null}});SweetAlert.DismissReason=DismissReason;SweetAlert.version="11.22.1";const Swal=SweetAlert;Swal.default=Swal;typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const showConfirmDialog=async t=>{const{title:e,text:n="",icon:s="question",confirmButtonText:i="Confirmar",cancelButtonText:o="Cancelar",confirmButtonColor:l="#3085d6",cancelButtonColor:u="#d33"}=t;return(await Swal.fire({title:e,text:n,icon:s,showCancelButton:!0,confirmButtonColor:l,cancelButtonColor:u,confirmButtonText:i,cancelButtonText:o,reverseButtons:!0,customClass:{popup:"rounded-lg",confirmButton:"rounded-md px-4 py-2 mx-2",cancelButton:"rounded-md px-4 py-2 mx-2"}})).isConfirmed},showSuccessAlert=async(t,e)=>{await Swal.fire({title:t,text:e,icon:"success",confirmButtonText:"OK",confirmButtonColor:"#10b981",customClass:{popup:"rounded-lg",confirmButton:"rounded-md px-4 py-2"}})},showErrorAlert=async(t,e)=>{await Swal.fire({title:t,text:e,icon:"error",confirmButtonText:"OK",confirmButtonColor:"#ef4444",customClass:{popup:"rounded-lg",confirmButton:"rounded-md px-4 py-2"}})},showInfoAlert=async(t,e)=>{await Swal.fire({title:t,text:e,icon:"info",confirmButtonText:"OK",confirmButtonColor:"#3b82f6",customClass:{popup:"rounded-lg",confirmButton:"rounded-md px-4 py-2"}})},executeWithConfirmationAndLoading=async(t,e,n={})=>{const{title:s="Processando...",text:i="Por favor, aguarde..."}=n;if(!await showConfirmDialog(t))return!1;Swal.fire({title:s,text:i,allowOutsideClick:!1,didOpen:()=>{Swal.showLoading()}});try{return await e(),Swal.close(),await showSuccessAlert(t.title||"Sucesso!","Operação concluída com êxito."),!0}catch(l){return Swal.close(),await showErrorAlert(t.title||"Erro!",l.message||"Ocorreu um erro inesperado."),console.error("Erro na operação:",l),!1}},useConfirmDialog=()=>({showConfirmDialog,showSuccessAlert,showErrorAlert,showInfoAlert,executeWithConfirmationAndLoading});async function uploadImageToImageBB(t){const e="bcd04b7d89a2adaba76c1df8a88a8ac4",n=new FormData;n.append("image",t);try{const i=await(await fetch(`https://api.imgbb.com/1/upload?key=${e}`,{method:"POST",body:n})).json();return i.success?i.data.url:(console.error("Erro no upload para ImageBB:",i.error.message),null)}catch(s){return console.error("Falha ao fazer upload da imagem:",s),null}}const ChannelContext=reactExports.createContext(void 0),ChannelProvider=({children:t})=>{const[e,n]=reactExports.useState([]),[s,i]=reactExports.useState(!0),o=collection(db,"channels"),l=async()=>{i(!0);try{const g=(await getDocs(o)).docs.map(y=>({...y.data(),id:y.id}));n(g.sort((y,v)=>y.name.localeCompare(v.name)))}catch(m){console.error("Erro ao buscar canais:",m)}finally{i(!1)}};reactExports.useEffect(()=>{l()},[]);const u=async(m,g)=>await executeWithConfirmationAndLoading({title:"Criar Canal",text:`Tem certeza que deseja criar o canal ${m.name}?`,confirmButtonText:"Criar",cancelButtonText:"Cancelar",icon:"question"},async()=>{let v=null;if(g&&(v=await uploadImageToImageBB(g),!v))throw new Error("Falha no upload da logo.");await addDoc(o,{...m,logoUrl:v}),await l()},{title:"Criando Canal...",text:`Adicionando ${m.name}. Por favor, aguarde.`})?(console.log(`Canal ${m.name} criado com sucesso!`),{success:!0}):(console.log(`Criação do canal ${m.name} cancelada ou falhou.`),{success:!1,error:"Criação cancelada ou falha na operação."}),d=async(m,g,y)=>await executeWithConfirmationAndLoading({title:"Atualizar Canal",text:`Tem certeza que deseja atualizar o canal ${g.name}?`,confirmButtonText:"Atualizar",cancelButtonText:"Cancelar"},async()=>{const E=doc(db,"channels",m),w={...g};if(y){const A=await uploadImageToImageBB(y);if(!A)throw new Error("Falha no upload da nova logo.");w.logoUrl=A}await updateDoc(E,w),await l()},{title:"Atualizando Canal...",text:`Atualizando ${g.name}. Por favor, aguarde.`})?(console.log(`Canal ${g.name} atualizado com sucesso!`),{success:!0}):(console.log(`Atualização do canal ${g.name} cancelada ou falhou.`),{success:!1,error:"Atualização cancelada ou falha na operação."}),f=async(m,g)=>await executeWithConfirmationAndLoading({title:"Deletar Canal",text:`Tem certeza que deseja deletar o canal "${g}"? Esta ação é irreversível.`,icon:"warning",confirmButtonText:"Sim, Deletar!",cancelButtonText:"Cancelar",confirmButtonColor:"#dc3545"},async()=>{const v=doc(db,"channels",m);await deleteDoc(v),await l()},{title:"Deletando Canal...",text:`Removendo "${g}". Por favor, aguarde.`})?(console.log(`Canal "${g}" deletado com sucesso!`),{success:!0}):(console.log(`Exclusão do canal "${g}" cancelada ou falhou.`),{success:!1,error:"Exclusão cancelada ou falha na operação."});return jsxRuntimeExports.jsx(ChannelContext.Provider,{value:{channels:e,loading:s,addChannel:u,updateChannel:d,deleteChannel:f},children:t})},useChannels=()=>{const t=reactExports.useContext(ChannelContext);if(t===void 0)throw new Error("useChannels deve ser usado dentro de um ChannelProvider");return t},DatabaseContext=reactExports.createContext(void 0),DatabaseProvider=({children:t})=>{const e=async(g,y)=>(await addDoc(collection(db,g),{...y,createdAt:new Date,updatedAt:new Date})).id,n=async(g,y)=>{const v=doc(db,g,y),E=await getDoc(v);return E.exists()?{id:E.id,...E.data()}:null},s=async(g,y,v)=>{const E=doc(db,g,y);await updateDoc(E,{...v,updatedAt:new Date})},i=async(g,y)=>{const v=doc(db,g,y);await deleteDoc(v)},o=async(g,y=[])=>{const v=query(collection(db,g),...y);return(await getDocs(v)).docs.map(w=>({id:w.id,...w.data()}))},m={create:e,read:n,update:s,delete:i,list:o,createEscalacao:async g=>await e("escalacoes",g),getEscalacoes:async g=>await o("escalacoes",[where("userId","==",g),orderBy("createdAt","desc")]),updateEscalacao:async(g,y)=>{await s("escalacoes",g,y)},deleteEscalacao:async g=>{await i("escalacoes",g)}};return jsxRuntimeExports.jsx(DatabaseContext.Provider,{value:m,children:t})},AliasContext=reactExports.createContext(void 0),AliasProvider=({children:t})=>{const[e,n]=reactExports.useState([]),[s,i]=reactExports.useState(!0),o=collection(db,"aliases"),l=async()=>{i(!0);const g=(await getDocs(o)).docs.map(y=>({...y.data(),id:y.id}));n(g),i(!1)};reactExports.useEffect(()=>{l()},[]);const u=async m=>await executeWithConfirmationAndLoading({title:"Criar Alias",text:`Deseja criar o alias para "${m.name}"?`,confirmButtonText:"Criar",cancelButtonText:"Cancelar",icon:"question"},async()=>{await addDoc(o,m),await l()},{title:"Criando Alias...",text:`Adicionando "${m.name}". Por favor, aguarde.`}),d=async m=>m.id?await executeWithConfirmationAndLoading({title:"Atualizar Alias",text:`Deseja atualizar o alias "${m.name}"?`,confirmButtonText:"Atualizar",cancelButtonText:"Cancelar",icon:"question"},async()=>{await updateDoc(doc(o,m.id),{name:m.name,alias:m.alias}),await l()},{title:"Atualizando Alias...",text:`Salvando alterações de "${m.name}"...`}):!1,f=async(m,g)=>await executeWithConfirmationAndLoading({title:"Excluir Alias",text:`Tem certeza que deseja excluir o alias "${g}"?`,confirmButtonText:"Excluir",cancelButtonText:"Cancelar",icon:"warning"},async()=>{await deleteDoc(doc(o,m)),await l()},{title:"Excluindo Alias...",text:`Removendo "${g}". Aguarde um momento.`});return jsxRuntimeExports.jsx(AliasContext.Provider,{value:{aliases:e,loading:s,addAlias:u,updateAlias:d,deleteAlias:f},children:t})},useAliases=()=>{const t=reactExports.useContext(AliasContext);if(!t)throw new Error("useAliases deve ser usado dentro de AliasProvider");return t},AppProviders=({children:t})=>jsxRuntimeExports.jsx(GlobalProvider,{children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(DatabaseProvider,{children:jsxRuntimeExports.jsx(AliasProvider,{children:jsxRuntimeExports.jsx(UserProvider,{children:jsxRuntimeExports.jsx(TeamsProvider,{children:jsxRuntimeExports.jsx(ImagesProvider,{children:jsxRuntimeExports.jsx(ChannelProvider,{children:jsxRuntimeExports.jsx(SquadProvider,{children:t})})})})})})})})});/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),toPascalCase=t=>{const e=toCamelCase(t);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),hasA11yProp=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes$1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:o,iconNode:l,...u},d)=>reactExports.createElement("svg",{ref:d,...defaultAttributes$1,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:mergeClasses("lucide",i),...!o&&!hasA11yProp(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,m])=>reactExports.createElement(f,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(t,e)=>{const n=reactExports.forwardRef(({className:s,...i},o)=>reactExports.createElement(Icon,{ref:o,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(t))}`,`lucide-${t}`,s),...i}));return n.displayName=toPascalCase(t),n};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$T=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ArrowDown=createLucideIcon("arrow-down",__iconNode$T);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$S=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],ArrowLeftRight=createLucideIcon("arrow-left-right",__iconNode$S);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$R=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$R);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Q=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$Q);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$P=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ArrowUp=createLucideIcon("arrow-up",__iconNode$P);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$O=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],Brush=createLucideIcon("brush",__iconNode$O);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$N=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$N);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ChartPie=createLucideIcon("chart-pie",__iconNode$M);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$L);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$K);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$J);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],ClipboardCheck=createLucideIcon("clipboard-check",__iconNode$I);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Clock=createLucideIcon("clock",__iconNode$H);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Coffee=createLucideIcon("coffee",__iconNode$G);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$F);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$E);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Database=createLucideIcon("database",__iconNode$D);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Download=createLucideIcon("download",__iconNode$C);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$B);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$A);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],GripVertical=createLucideIcon("grip-vertical",__iconNode$z);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],House=createLucideIcon("house",__iconNode$y);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$1=createLucideIcon("image",__iconNode$x);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$w);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],LayoutTemplate=createLucideIcon("layout-template",__iconNode$v);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Link2=createLucideIcon("link-2",__iconNode$u);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Loader=createLucideIcon("loader",__iconNode$t);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$s);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],LogOut=createLucideIcon("log-out",__iconNode$r);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$q);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],MapPin=createLucideIcon("map-pin",__iconNode$p);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Menu=createLucideIcon("menu",__iconNode$o);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M5 12h14",key:"1ays0h"}]],Minus=createLucideIcon("minus",__iconNode$n);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Palette=createLucideIcon("palette",__iconNode$m);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$l);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Play=createLucideIcon("play",__iconNode$k);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$j);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Repeat=createLucideIcon("repeat",__iconNode$i);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$h);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$g);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$f);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ShieldCheck=createLucideIcon("shield-check",__iconNode$e);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$d);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Sparkles=createLucideIcon("sparkles",__iconNode$c);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],SquarePen=createLucideIcon("square-pen",__iconNode$b);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],Swords=createLucideIcon("swords",__iconNode$a);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Trash2=createLucideIcon("trash-2",__iconNode$8);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Trophy=createLucideIcon("trophy",__iconNode$7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]],Tv=createLucideIcon("tv",__iconNode$6);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Upload=createLucideIcon("upload",__iconNode$5);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],UserCheck=createLucideIcon("user-check",__iconNode$4);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],UserX=createLucideIcon("user-x",__iconNode$3);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode$1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode);function setRef(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function composeRefs(...t){return e=>{let n=!1;const s=t.map(i=>{const o=setRef(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<s.length;i++){const o=s[i];typeof o=="function"?o():setRef(t[i],null)}}}}function useComposedRefs(...t){return reactExports.useCallback(composeRefs(...t),t)}function createSlot(t){const e=createSlotClone(t),n=reactExports.forwardRef((s,i)=>{const{children:o,...l}=s,u=reactExports.Children.toArray(o),d=u.find(isSlottable);if(d){const f=d.props.children,m=u.map(g=>g===d?reactExports.Children.count(f)>1?reactExports.Children.only(null):reactExports.isValidElement(f)?f.props.children:null:g);return jsxRuntimeExports.jsx(e,{...l,ref:i,children:reactExports.isValidElement(f)?reactExports.cloneElement(f,void 0,m):null})}return jsxRuntimeExports.jsx(e,{...l,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}var Slot$1=createSlot("Slot");function createSlotClone(t){const e=reactExports.forwardRef((n,s)=>{const{children:i,...o}=n,l=reactExports.isValidElement(i)?getElementRef$1(i):void 0,u=useComposedRefs(l,s);if(reactExports.isValidElement(i)){const d=mergeProps(o,i.props);return i.type!==reactExports.Fragment&&(d.ref=u),reactExports.cloneElement(i,d)}return reactExports.Children.count(i)>1?reactExports.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function isSlottable(t){return reactExports.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(t,e){const n={...e};for(const s in e){const i=t[s],o=e[s];/^on[A-Z]/.test(s)?i&&o?n[s]=(...u)=>{const d=o(...u);return i(...u),d}:i&&(n[s]=i):s==="style"?n[s]={...i,...o}:s==="className"&&(n[s]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function getElementRef$1(t){var s,i;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function r(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=r(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function clsx(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=r(t))&&(s&&(s+=" "),s+=e);return s}const falsyToString=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,cx=clsx,cva=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return cx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,l=Object.keys(i).map(f=>{const m=n==null?void 0:n[f],g=o==null?void 0:o[f];if(m===null)return null;const y=falsyToString(m)||falsyToString(g);return i[f][y]}),u=n&&Object.entries(n).reduce((f,m)=>{let[g,y]=m;return y===void 0||(f[g]=y),f},{}),d=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((f,m)=>{let{class:g,className:y,...v}=m;return Object.entries(v).every(E=>{let[w,A]=E;return Array.isArray(A)?A.includes({...o,...u}[w]):{...o,...u}[w]===A})?[...f,g,y]:f},[]);return cx(t,l,d,n==null?void 0:n.class,n==null?void 0:n.className)},CLASS_PART_SEPARATOR="-",createClassGroupUtils=t=>{const e=createClassMap(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:l=>{const u=l.split(CLASS_PART_SEPARATOR);return u[0]===""&&u.length!==1&&u.shift(),getGroupRecursive(u,e)||getGroupIdForArbitraryProperty(l)},getConflictingClassGroupIds:(l,u)=>{const d=n[l]||[];return u&&s[l]?[...d,...s[l]]:d}}},getGroupRecursive=(t,e)=>{var l;if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),i=s?getGroupRecursive(t.slice(1),s):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(CLASS_PART_SEPARATOR);return(l=e.validators.find(({validator:u})=>u(o)))==null?void 0:l.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=t=>{if(arbitraryPropertyRegex.test(t)){const e=arbitraryPropertyRegex.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},createClassMap=t=>{const{theme:e,classGroups:n}=t,s={nextPart:new Map,validators:[]};for(const i in n)processClassesRecursively(n[i],s,i,e);return s},processClassesRecursively=(t,e,n,s)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:getPart(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(isThemeGetter(i)){processClassesRecursively(i(s),e,n,s);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,l])=>{processClassesRecursively(l,getPart(e,o),n,s)})})},getPart=(t,e)=>{let n=t;return e.split(CLASS_PART_SEPARATOR).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},isThemeGetter=t=>t.isThemeGetter,createLruCache=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const i=(o,l)=>{n.set(o,l),e++,e>t&&(e=0,s=n,n=new Map)};return{get(o){let l=n.get(o);if(l!==void 0)return l;if((l=s.get(o))!==void 0)return i(o,l),l},set(o,l){n.has(o)?n.set(o,l):i(o,l)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",MODIFIER_SEPARATOR_LENGTH=MODIFIER_SEPARATOR.length,createParseClassName=t=>{const{prefix:e,experimentalParseClassName:n}=t;let s=i=>{const o=[];let l=0,u=0,d=0,f;for(let E=0;E<i.length;E++){let w=i[E];if(l===0&&u===0){if(w===MODIFIER_SEPARATOR){o.push(i.slice(d,E)),d=E+MODIFIER_SEPARATOR_LENGTH;continue}if(w==="/"){f=E;continue}}w==="["?l++:w==="]"?l--:w==="("?u++:w===")"&&u--}const m=o.length===0?i:i.substring(d),g=stripImportantModifier(m),y=g!==m,v=f&&f>d?f-d:void 0;return{modifiers:o,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:v}};if(e){const i=e+MODIFIER_SEPARATOR,o=s;s=l=>l.startsWith(i)?o(l.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(n){const i=s;s=o=>n({className:o,parseClassName:i})}return s},stripImportantModifier=t=>t.endsWith(IMPORTANT_MODIFIER)?t.substring(0,t.length-1):t.startsWith(IMPORTANT_MODIFIER)?t.substring(1):t,createSortModifiers=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const i=[];let o=[];return s.forEach(l=>{l[0]==="["||e[l]?(i.push(...o.sort(),l),o=[]):o.push(l)}),i.push(...o.sort()),i}},createConfigUtils=t=>({cache:createLruCache(t.cacheSize),parseClassName:createParseClassName(t),sortModifiers:createSortModifiers(t),...createClassGroupUtils(t)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:o}=e,l=[],u=t.trim().split(SPLIT_CLASSES_REGEX);let d="";for(let f=u.length-1;f>=0;f-=1){const m=u[f],{isExternal:g,modifiers:y,hasImportantModifier:v,baseClassName:E,maybePostfixModifierPosition:w}=n(m);if(g){d=m+(d.length>0?" "+d:d);continue}let A=!!w,I=s(A?E.substring(0,w):E);if(!I){if(!A){d=m+(d.length>0?" "+d:d);continue}if(I=s(E),!I){d=m+(d.length>0?" "+d:d);continue}A=!1}const D=o(y).join(":"),V=v?D+IMPORTANT_MODIFIER:D,Y=V+I;if(l.includes(Y))continue;l.push(Y);const j=i(I,A);for(let H=0;H<j.length;++H){const S=j[H];l.push(V+S)}d=m+(d.length>0?" "+d:d)}return d};function twJoin(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=toValue(e))&&(s&&(s+=" "),s+=n);return s}const toValue=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=toValue(t[s]))&&(n&&(n+=" "),n+=e);return n};function createTailwindMerge(t,...e){let n,s,i,o=l;function l(d){const f=e.reduce((m,g)=>g(m),t());return n=createConfigUtils(f),s=n.cache.get,i=n.cache.set,o=u,u(d)}function u(d){const f=s(d);if(f)return f;const m=mergeClassList(d,n);return i(d,m),m}return function(){return o(twJoin.apply(null,arguments))}}const fromTheme=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+\/\d+$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=t=>fractionRegex.test(t),isNumber$1=t=>!!t&&!Number.isNaN(Number(t)),isInteger=t=>!!t&&Number.isInteger(Number(t)),isPercent=t=>t.endsWith("%")&&isNumber$1(t.slice(0,-1)),isTshirtSize=t=>tshirtUnitRegex.test(t),isAny=()=>!0,isLengthOnly=t=>lengthUnitRegex.test(t)&&!colorFunctionRegex.test(t),isNever=()=>!1,isShadow=t=>shadowRegex.test(t),isImage=t=>imageRegex.test(t),isAnyNonArbitrary=t=>!isArbitraryValue(t)&&!isArbitraryVariable(t),isArbitrarySize=t=>getIsArbitraryValue(t,isLabelSize,isNever),isArbitraryValue=t=>arbitraryValueRegex.test(t),isArbitraryLength=t=>getIsArbitraryValue(t,isLabelLength,isLengthOnly),isArbitraryNumber=t=>getIsArbitraryValue(t,isLabelNumber,isNumber$1),isArbitraryPosition=t=>getIsArbitraryValue(t,isLabelPosition,isNever),isArbitraryImage=t=>getIsArbitraryValue(t,isLabelImage,isImage),isArbitraryShadow=t=>getIsArbitraryValue(t,isLabelShadow,isShadow),isArbitraryVariable=t=>arbitraryVariableRegex.test(t),isArbitraryVariableLength=t=>getIsArbitraryVariable(t,isLabelLength),isArbitraryVariableFamilyName=t=>getIsArbitraryVariable(t,isLabelFamilyName),isArbitraryVariablePosition=t=>getIsArbitraryVariable(t,isLabelPosition),isArbitraryVariableSize=t=>getIsArbitraryVariable(t,isLabelSize),isArbitraryVariableImage=t=>getIsArbitraryVariable(t,isLabelImage),isArbitraryVariableShadow=t=>getIsArbitraryVariable(t,isLabelShadow,!0),getIsArbitraryValue=(t,e,n)=>{const s=arbitraryValueRegex.exec(t);return s?s[1]?e(s[1]):n(s[2]):!1},getIsArbitraryVariable=(t,e,n=!1)=>{const s=arbitraryVariableRegex.exec(t);return s?s[1]?e(s[1]):n:!1},isLabelPosition=t=>t==="position"||t==="percentage",isLabelImage=t=>t==="image"||t==="url",isLabelSize=t=>t==="length"||t==="size"||t==="bg-size",isLabelLength=t=>t==="length",isLabelNumber=t=>t==="number",isLabelFamilyName=t=>t==="family-name",isLabelShadow=t=>t==="shadow",getDefaultConfig=()=>{const t=fromTheme("color"),e=fromTheme("font"),n=fromTheme("text"),s=fromTheme("font-weight"),i=fromTheme("tracking"),o=fromTheme("leading"),l=fromTheme("breakpoint"),u=fromTheme("container"),d=fromTheme("spacing"),f=fromTheme("radius"),m=fromTheme("shadow"),g=fromTheme("inset-shadow"),y=fromTheme("text-shadow"),v=fromTheme("drop-shadow"),E=fromTheme("blur"),w=fromTheme("perspective"),A=fromTheme("aspect"),I=fromTheme("ease"),D=fromTheme("animate"),V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...Y(),isArbitraryVariable,isArbitraryValue],H=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],T=()=>[isArbitraryVariable,isArbitraryValue,d],P=()=>[isFraction,"full","auto",...T()],U=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],J=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],W=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],K=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],le=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ge=()=>["start","end","center","stretch","center-safe","end-safe"],oe=()=>["auto",...T()],ce=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],ie=()=>[t,isArbitraryVariable,isArbitraryValue],Ne=()=>[...Y(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],re=()=>["no-repeat",{repeat:["","x","y","space","round"]}],_e=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],Se=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],Re=()=>["","none","full",f,isArbitraryVariable,isArbitraryValue],Be=()=>["",isNumber$1,isArbitraryVariableLength,isArbitraryLength],Ie=()=>["solid","dashed","dotted","double"],je=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>[isNumber$1,isPercent,isArbitraryVariablePosition,isArbitraryPosition],ke=()=>["","none",E,isArbitraryVariable,isArbitraryValue],Ge=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],we=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],de=()=>[isNumber$1,isArbitraryVariable,isArbitraryValue],me=()=>[isFraction,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber$1],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,A]}],container:["container"],columns:[{columns:[isNumber$1,isArbitraryValue,isArbitraryVariable,u]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",u,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber$1,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:J()}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:J()}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...le(),"normal"]}],"justify-items":[{"justify-items":[...ge(),"normal"]}],"justify-self":[{"justify-self":["auto",...ge()]}],"align-content":[{content:["normal",...le()]}],"align-items":[{items:[...ge(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ge(),{baseline:["","last"]}]}],"place-content":[{"place-content":le()}],"place-items":[{"place-items":[...ge(),"baseline"]}],"place-self":[{"place-self":["auto",...ge()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:oe()}],mx:[{mx:oe()}],my:[{my:oe()}],ms:[{ms:oe()}],me:[{me:oe()}],mt:[{mt:oe()}],mr:[{mr:oe()}],mb:[{mb:oe()}],ml:[{ml:oe()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:ce()}],w:[{w:[u,"screen",...ce()]}],"min-w":[{"min-w":[u,"screen","none",...ce()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...ce()]}],h:[{h:["screen","lh",...ce()]}],"min-h":[{"min-h":["screen","lh","none",...ce()]}],"max-h":[{"max-h":["screen","lh",...ce()]}],"font-size":[{text:["base",n,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber$1,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[o,...T()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ie()}],"text-color":[{text:ie()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ie(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber$1,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:ie()}],"underline-offset":[{"underline-offset":[isNumber$1,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ne()}],"bg-repeat":[{bg:re()}],"bg-size":[{bg:_e()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:ie()}],"gradient-from-pos":[{from:Se()}],"gradient-via-pos":[{via:Se()}],"gradient-to-pos":[{to:Se()}],"gradient-from":[{from:ie()}],"gradient-via":[{via:ie()}],"gradient-to":[{to:ie()}],rounded:[{rounded:Re()}],"rounded-s":[{"rounded-s":Re()}],"rounded-e":[{"rounded-e":Re()}],"rounded-t":[{"rounded-t":Re()}],"rounded-r":[{"rounded-r":Re()}],"rounded-b":[{"rounded-b":Re()}],"rounded-l":[{"rounded-l":Re()}],"rounded-ss":[{"rounded-ss":Re()}],"rounded-se":[{"rounded-se":Re()}],"rounded-ee":[{"rounded-ee":Re()}],"rounded-es":[{"rounded-es":Re()}],"rounded-tl":[{"rounded-tl":Re()}],"rounded-tr":[{"rounded-tr":Re()}],"rounded-br":[{"rounded-br":Re()}],"rounded-bl":[{"rounded-bl":Re()}],"border-w":[{border:Be()}],"border-w-x":[{"border-x":Be()}],"border-w-y":[{"border-y":Be()}],"border-w-s":[{"border-s":Be()}],"border-w-e":[{"border-e":Be()}],"border-w-t":[{"border-t":Be()}],"border-w-r":[{"border-r":Be()}],"border-w-b":[{"border-b":Be()}],"border-w-l":[{"border-l":Be()}],"divide-x":[{"divide-x":Be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ie(),"hidden","none"]}],"divide-style":[{divide:[...Ie(),"hidden","none"]}],"border-color":[{border:ie()}],"border-color-x":[{"border-x":ie()}],"border-color-y":[{"border-y":ie()}],"border-color-s":[{"border-s":ie()}],"border-color-e":[{"border-e":ie()}],"border-color-t":[{"border-t":ie()}],"border-color-r":[{"border-r":ie()}],"border-color-b":[{"border-b":ie()}],"border-color-l":[{"border-l":ie()}],"divide-color":[{divide:ie()}],"outline-style":[{outline:[...Ie(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:ie()}],shadow:[{shadow:["","none",m,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:ie()}],"inset-shadow":[{"inset-shadow":["none",g,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":ie()}],"ring-w":[{ring:Be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ie()}],"ring-offset-w":[{"ring-offset":[isNumber$1,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":ie()}],"inset-ring-w":[{"inset-ring":Be()}],"inset-ring-color":[{"inset-ring":ie()}],"text-shadow":[{"text-shadow":["none",y,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":ie()}],opacity:[{opacity:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...je(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":je()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber$1]}],"mask-image-linear-from-pos":[{"mask-linear-from":Te()}],"mask-image-linear-to-pos":[{"mask-linear-to":Te()}],"mask-image-linear-from-color":[{"mask-linear-from":ie()}],"mask-image-linear-to-color":[{"mask-linear-to":ie()}],"mask-image-t-from-pos":[{"mask-t-from":Te()}],"mask-image-t-to-pos":[{"mask-t-to":Te()}],"mask-image-t-from-color":[{"mask-t-from":ie()}],"mask-image-t-to-color":[{"mask-t-to":ie()}],"mask-image-r-from-pos":[{"mask-r-from":Te()}],"mask-image-r-to-pos":[{"mask-r-to":Te()}],"mask-image-r-from-color":[{"mask-r-from":ie()}],"mask-image-r-to-color":[{"mask-r-to":ie()}],"mask-image-b-from-pos":[{"mask-b-from":Te()}],"mask-image-b-to-pos":[{"mask-b-to":Te()}],"mask-image-b-from-color":[{"mask-b-from":ie()}],"mask-image-b-to-color":[{"mask-b-to":ie()}],"mask-image-l-from-pos":[{"mask-l-from":Te()}],"mask-image-l-to-pos":[{"mask-l-to":Te()}],"mask-image-l-from-color":[{"mask-l-from":ie()}],"mask-image-l-to-color":[{"mask-l-to":ie()}],"mask-image-x-from-pos":[{"mask-x-from":Te()}],"mask-image-x-to-pos":[{"mask-x-to":Te()}],"mask-image-x-from-color":[{"mask-x-from":ie()}],"mask-image-x-to-color":[{"mask-x-to":ie()}],"mask-image-y-from-pos":[{"mask-y-from":Te()}],"mask-image-y-to-pos":[{"mask-y-to":Te()}],"mask-image-y-from-color":[{"mask-y-from":ie()}],"mask-image-y-to-color":[{"mask-y-to":ie()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":Te()}],"mask-image-radial-to-pos":[{"mask-radial-to":Te()}],"mask-image-radial-from-color":[{"mask-radial-from":ie()}],"mask-image-radial-to-color":[{"mask-radial-to":ie()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Y()}],"mask-image-conic-pos":[{"mask-conic":[isNumber$1]}],"mask-image-conic-from-pos":[{"mask-conic-from":Te()}],"mask-image-conic-to-pos":[{"mask-conic-to":Te()}],"mask-image-conic-from-color":[{"mask-conic-from":ie()}],"mask-image-conic-to-color":[{"mask-conic-to":ie()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ne()}],"mask-repeat":[{mask:re()}],"mask-size":[{mask:_e()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:ke()}],brightness:[{brightness:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",v,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":ie()}],grayscale:[{grayscale:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":ke()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber$1,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",I,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",D,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:Ge()}],"rotate-x":[{"rotate-x":Ge()}],"rotate-y":[{"rotate-y":Ge()}],"rotate-z":[{"rotate-z":Ge()}],scale:[{scale:we()}],"scale-x":[{"scale-x":we()}],"scale-y":[{"scale-y":we()}],"scale-z":[{"scale-z":we()}],"scale-3d":["scale-3d"],skew:[{skew:de()}],"skew-x":[{"skew-x":de()}],"skew-y":[{"skew-y":de()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:me()}],"translate-x":[{"translate-x":me()}],"translate-y":[{"translate-y":me()}],"translate-z":[{"translate-z":me()}],"translate-none":["translate-none"],accent:[{accent:ie()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ie()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...ie()]}],"stroke-w":[{stroke:[isNumber$1,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...ie()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...t){return twMerge(clsx(t))}const buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Button({className:t,variant:e,size:n,asChild:s=!1,...i}){const o=s?Slot$1:"button";return jsxRuntimeExports.jsx(o,{"data-slot":"button",className:cn(buttonVariants({variant:e,size:n,className:t})),...i})}const caminhantesClock="/caminhantes-clock.png",LoginForm=()=>{const[t,e]=reactExports.useState(""),[n,s]=reactExports.useState(""),[i,o]=reactExports.useState(!1),[l,u]=reactExports.useState(!1),{login:d}=useAuth(),{showErrorAlert:f,showSuccessAlert:m}=useConfirmDialog(),g=async y=>{if(y.preventDefault(),!t||!n){await f("Campos obrigatórios","Por favor, preencha email e senha.");return}u(!0);try{await d(t,n),await m("Login realizado!","Bem-vindo ao Caminhantes Office!")}catch(v){let E="Erro ao fazer login. Tente novamente.";v.code==="auth/user-not-found"?E="Usuário não encontrado.":v.code==="auth/wrong-password"?E="Senha incorreta.":v.code==="auth/invalid-email"&&(E="Email inválido."),await f("Erro no login",E)}finally{u(!1)}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("img",{src:caminhantesClock,alt:"Caminhantes",className:"w-24 h-24 mx-auto mb-4 drop-shadow-lg"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Caminhantes Office"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Faça login para acessar suas aplicações"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[jsxRuntimeExports.jsxs("form",{onSubmit:g,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{id:"email",type:"email",value:t,onChange:y=>e(y.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors",placeholder:"seu@email.com",disabled:l})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{id:"password",type:i?"text":"password",value:n,onChange:y=>s(y.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors",placeholder:"••••••••",disabled:l}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:l,children:i?jsxRuntimeExports.jsx(EyeOff,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Eye,{className:"w-5 h-5"})})]})]}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:l,className:"w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:l?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Entrando..."]}):"Entrar"})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Não tem uma conta?"," ",jsxRuntimeExports.jsx("span",{className:"text-red-600 font-medium cursor-help",title:"Entre em contato com o administrador do sistema",children:"Entre em contato com o administrador"})]})})]}),jsxRuntimeExports.jsx("div",{className:"text-center mt-8",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["© ",new Date().getFullYear()," Caminhantes Office. Todos os direitos reservados."]})})]})})},LayoutGroupContext=reactExports.createContext({});function useConstant(t){const e=reactExports.useRef(null);return e.current===null&&(e.current=t()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect$2=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(t,e){t.indexOf(e)===-1&&t.push(e)}function removeItem(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const clamp$1=(t,e,n)=>n>e?e:n<t?t:n;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function isObject$1(t){return typeof t=="object"&&t!==null}const isZeroValueString=t=>/^0[^.\s]+$/u.test(t);function memo(t){let e;return()=>(e===void 0&&(e=t()),e)}const noop$2=t=>t,combineFunctions=(t,e)=>n=>e(t(n)),pipe=(...t)=>t.reduce(combineFunctions),progress=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let o=0;o<i;o++){const l=this.subscriptions[o];l&&l(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=t=>t*1e3,millisecondsToSeconds=t=>t/1e3;function velocityPerSecond(t,e){return e?t*(1e3/e):0}const calcBezier=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(t,e,n,s,i){let o,l,u=0;do l=e+(n-e)/2,o=calcBezier(l,s,i)-t,o>0?n=l:e=l;while(Math.abs(o)>subdivisionPrecision&&++u<subdivisionMaxIterations);return l}function cubicBezier(t,e,n,s){if(t===e&&n===s)return noop$2;const i=o=>binarySubdivide(o,0,1,t,n);return o=>o===0||o===1?o:calcBezier(i(o),e,s)}const mirrorEasing=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,reverseEasing=t=>e=>1-t(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=t=>(t*=2)<1?.5*backIn(t):.5*(2-Math.pow(2,-10*(t-1))),circIn=t=>1-Math.sin(Math.acos(t)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=t=>Array.isArray(t)&&typeof t[0]!="number",isBezierDefinition=t=>Array.isArray(t)&&typeof t[0]=="number",easingLookup={linear:noop$2,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=t=>typeof t=="string",easingDefinitionToFunction=t=>{if(isBezierDefinition(t)){invariant(t.length===4);const[e,n,s,i]=t;return cubicBezier(e,n,s,i)}else if(isValidEasing(t))return easingLookup[t];return t},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],statsBuffer={value:null};function createRenderStep(t,e){let n=new Set,s=new Set,i=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},d=0;function f(g){l.has(g)&&(m.schedule(g),t()),d++,g(u)}const m={schedule:(g,y=!1,v=!1)=>{const w=v&&i?n:s;return y&&l.add(g),w.has(g)||w.add(g),g},cancel:g=>{s.delete(g),l.delete(g)},process:g=>{if(u=g,i){o=!0;return}i=!0,[n,s]=[s,n],n.forEach(f),e&&statsBuffer.value&&statsBuffer.value.frameloop[e].push(d),d=0,n.clear(),i=!1,o&&(o=!1,m.process(g))}};return m}const maxElapsed=40;function createRenderBatcher(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=stepsOrder.reduce((V,Y)=>(V[Y]=createRenderStep(o,e?Y:void 0),V),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:m,update:g,preRender:y,render:v,postRender:E}=l,w=()=>{const V=MotionGlobalConfig.useManualTiming?i.timestamp:performance.now();n=!1,MotionGlobalConfig.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(V-i.timestamp,maxElapsed),1)),i.timestamp=V,i.isProcessing=!0,u.process(i),d.process(i),f.process(i),m.process(i),g.process(i),y.process(i),v.process(i),E.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(w))},A=()=>{n=!0,s=!0,i.isProcessing||t(w)};return{schedule:stepsOrder.reduce((V,Y)=>{const j=l[Y];return V[Y]=(H,S=!1,T=!1)=>(n||A(),j.schedule(H,S,T)),V},{}),cancel:V=>{for(let Y=0;Y<stepsOrder.length;Y++)l[stepsOrder[Y]].cancel(V)},state:i,steps:l}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$2,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:t=>{now=t,queueMicrotask(clearTime)}},checkStringStartsWith=t=>e=>typeof e=="string"&&e.startsWith(t),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=t=>startsAsVariableToken(t)?singleCssVariableRegex.test(t.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},alpha$1={...number,transform:t=>clamp$1(0,1,t)},scale={...number,default:1},sanitize=t=>Math.round(t*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(t){return t==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(t,e)=>n=>!!(typeof n=="string"&&singleColorRegex.test(n)&&n.startsWith(t)||e&&!isNullish(n)&&Object.prototype.hasOwnProperty.call(n,e)),splitColor=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,o,l,u]=s.match(floatRegex);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},clampRgbUnit=t=>clamp$1(0,255,t),rgbUnit={...number,transform:t=>Math.round(clampRgbUnit(t))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+rgbUnit.transform(t)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(n)+", "+sanitize(alpha$1.transform(s))+")"};function parseHex(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const hex$1={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:t=>percent.parse(t)/100,transform:t=>percent.transform(t*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(n))+", "+sanitize(alpha$1.transform(s))+")"},color$1={test:t=>rgba.test(t)||hex$1.test(t)||hsla.test(t),parse:t=>rgba.test(t)?rgba.parse(t):hsla.test(t)?hsla.parse(t):hex$1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rgba.transform(t):hsla.transform(t)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(floatRegex))==null?void 0:e.length)||0)+(((n=t.match(colorRegex))==null?void 0:n.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let o=0;const u=e.replace(complexRegex,d=>(color$1.test(d)?(s.color.push(o),i.push(COLOR_TOKEN),n.push(color$1.parse(d))):d.startsWith(VAR_FUNCTION_TOKEN)?(s.var.push(o),i.push(VAR_TOKEN),n.push(d)):(s.number.push(o),i.push(NUMBER_TOKEN),n.push(parseFloat(d))),++o,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:n,split:u,indexes:s,types:i}}function parseComplexValue(t){return analyseComplexValue(t).values}function createTransformer(t){const{split:e,types:n}=analyseComplexValue(t),s=e.length;return i=>{let o="";for(let l=0;l<s;l++)if(o+=e[l],i[l]!==void 0){const u=n[l];u===NUMBER_TOKEN?o+=sanitize(i[l]):u===COLOR_TOKEN?o+=color$1.transform(i[l]):o+=i[l]}return o}}const convertNumbersToZero=t=>typeof t=="number"?0:t;function getAnimatableNone$1(t){const e=parseComplexValue(t);return createTransformer(t)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hslaToRgba({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,o=0,l=0;if(!e)i=o=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,d=2*n-u;i=hueToRgb(d,u,t+1/3),o=hueToRgb(d,u,t),l=hueToRgb(d,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:s}}function mixImmediate(t,e){return n=>n>0?e:t}const mixNumber$1=(t,e,n)=>t+(e-t)*n,mixLinearColor=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},colorTypes=[hex$1,rgba,hsla],getColorType=t=>colorTypes.find(e=>e.test(t));function asRGBA(t){const e=getColorType(t);if(!e)return!1;let n=e.parse(t);return e===hsla&&(n=hslaToRgba(n)),n}const mixColor=(t,e)=>{const n=asRGBA(t),s=asRGBA(e);if(!n||!s)return mixImmediate(t,e);const i={...n};return o=>(i.red=mixLinearColor(n.red,s.red,o),i.green=mixLinearColor(n.green,s.green,o),i.blue=mixLinearColor(n.blue,s.blue,o),i.alpha=mixNumber$1(n.alpha,s.alpha,o),rgba.transform(i))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(t,e){return invisibleValues.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function mixNumber(t,e){return n=>mixNumber$1(t,e,n)}function getMixer(t){return typeof t=="number"?mixNumber:typeof t=="string"?isCSSVariableToken(t)?mixImmediate:color$1.test(t)?mixColor:mixComplex:Array.isArray(t)?mixArray:typeof t=="object"?color$1.test(t)?mixColor:mixObject:mixImmediate}function mixArray(t,e){const n=[...t],s=n.length,i=t.map((o,l)=>getMixer(o)(o,e[l]));return o=>{for(let l=0;l<s;l++)n[l]=i[l](o);return n}}function mixObject(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=getMixer(t[i])(t[i],e[i]));return i=>{for(const o in s)n[o]=s[o](i);return n}}function matchOrder(t,e){const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],l=t.indexes[o][s[o]],u=t.values[l]??0;n[i]=u,s[o]++}return n}const mixComplex=(t,e)=>{const n=complex.createTransformer(e),s=analyseComplexValue(t),i=analyseComplexValue(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?invisibleValues.has(t)&&!i.values.length||invisibleValues.has(e)&&!s.values.length?mixVisibility(t,e):pipe(mixArray(matchOrder(s,i),i.values),n):mixImmediate(t,e)};function mix(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?mixNumber$1(t,e,n):getMixer(t)(t,e)}const frameloopDriver=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>frame.update(e,n),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)s+=t(o/(i-1))+", ";return`linear(${s.substring(0,s.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<maxGeneratorDuration;)e+=n,s=t.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(t,e=100,n){const s=n({...t,keyframes:[0,e]}),i=Math.min(calcGeneratorDuration(s),maxGeneratorDuration);return{type:"keyframes",ease:o=>s.next(i*o).value/e,duration:millisecondsToSeconds(i)}}const velocitySampleDuration=5;function calcGeneratorVelocity(t,e,n){const s=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(n-t(s),e-s)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:t=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:n=springDefaults.velocity,mass:s=springDefaults.mass}){let i,o,l=1-e;l=clamp$1(springDefaults.minDamping,springDefaults.maxDamping,l),t=clamp$1(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(t)),l<1?(i=f=>{const m=f*l,g=m*t,y=m-n,v=calcAngularFreq(f,l),E=Math.exp(-g);return safeMin-y/v*E},o=f=>{const g=f*l*t,y=g*n+n,v=Math.pow(l,2)*Math.pow(f,2)*t,E=Math.exp(-g),w=calcAngularFreq(Math.pow(f,2),l);return(-i(f)+safeMin>0?-1:1)*((y-v)*E)/w}):(i=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-.001+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,d=approximateRoot(i,o,u);if(t=secondsToMilliseconds(t),isNaN(d))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:t};{const f=Math.pow(d,2)*s;return{stiffness:f,damping:l*2*Math.sqrt(s*f),duration:t}}}const rootIterations=12;function approximateRoot(t,e,n){let s=n;for(let i=1;i<rootIterations;i++)s=s-t(s)/e(s);return s}function calcAngularFreq(t,e){return t*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(t,e){return e.some(n=>t[n]!==void 0)}function getSpringOptions(t){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...t};if(!isSpringType(t,physicsKeys)&&isSpringType(t,durationKeys))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,o=2*clamp$1(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:springDefaults.mass,stiffness:i,damping:o}}else{const n=findSpring(t);e={...e,...n,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(t=springDefaults.visualDuration,e=springDefaults.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:f,mass:m,duration:g,velocity:y,isResolvedFromDuration:v}=getSpringOptions({...n,velocity:-millisecondsToSeconds(n.velocity||0)}),E=y||0,w=f/(2*Math.sqrt(d*m)),A=l-o,I=millisecondsToSeconds(Math.sqrt(d/m)),D=Math.abs(A)<5;s||(s=D?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),i||(i=D?springDefaults.restDelta.granular:springDefaults.restDelta.default);let V;if(w<1){const j=calcAngularFreq(I,w);V=H=>{const S=Math.exp(-w*I*H);return l-S*((E+w*I*A)/j*Math.sin(j*H)+A*Math.cos(j*H))}}else if(w===1)V=j=>l-Math.exp(-I*j)*(A+(E+I*A)*j);else{const j=I*Math.sqrt(w*w-1);V=H=>{const S=Math.exp(-w*I*H),T=Math.min(j*H,300);return l-S*((E+w*I*A)*Math.sinh(T)+j*A*Math.cosh(T))/j}}const Y={calculatedDuration:v&&g||null,next:j=>{const H=V(j);if(v)u.done=j>=g;else{let S=j===0?E:0;w<1&&(S=j===0?secondsToMilliseconds(E):calcGeneratorVelocity(V,j,H));const T=Math.abs(S)<=s,P=Math.abs(l-H)<=i;u.done=T&&P}return u.value=u.done?l:H,u},toString:()=>{const j=Math.min(calcGeneratorDuration(Y),maxGeneratorDuration),H=generateLinearEasing(S=>Y.next(j*S).value,j,30);return j+"ms "+H},toTransition:()=>{}};return Y}spring.applyToOptions=t=>{const e=createGeneratorEasing(t,100,spring);return t.ease=e.ease,t.duration=secondsToMilliseconds(e.duration),t.type="keyframes",t};function inertia({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:m}){const g=t[0],y={done:!1,value:g},v=T=>u!==void 0&&T<u||d!==void 0&&T>d,E=T=>u===void 0?d:d===void 0||Math.abs(u-T)<Math.abs(d-T)?u:d;let w=n*e;const A=g+w,I=l===void 0?A:l(A);I!==A&&(w=I-g);const D=T=>-w*Math.exp(-T/s),V=T=>I+D(T),Y=T=>{const P=D(T),U=V(T);y.done=Math.abs(P)<=f,y.value=y.done?I:U};let j,H;const S=T=>{v(y.value)&&(j=T,H=spring({keyframes:[y.value,E(y.value)],velocity:calcGeneratorVelocity(V,T,y.value),damping:i,stiffness:o,restDelta:f,restSpeed:m}))};return S(0),{calculatedDuration:null,next:T=>{let P=!1;return!H&&j===void 0&&(P=!0,Y(T),S(T)),j!==void 0&&T>=j?H.next(T-j):(!P&&Y(T),y)}}}function createMixers(t,e,n){const s=[],i=n||MotionGlobalConfig.mix||mix,o=t.length-1;for(let l=0;l<o;l++){let u=i(t[l],t[l+1]);if(e){const d=Array.isArray(e)?e[l]||noop$2:e;u=pipe(d,u)}s.push(u)}return s}function interpolate$2(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const o=t.length;if(invariant(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=createMixers(e,s,i),d=u.length,f=m=>{if(l&&m<t[0])return e[0];let g=0;if(d>1)for(;g<t.length-2&&!(m<t[g+1]);g++);const y=progress(t[g],t[g+1],m);return u[g](y)};return n?m=>f(clamp$1(t[0],t[o-1],m)):f}function fillOffset(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=progress(0,e,s);t.push(mixNumber$1(n,1,i))}}function defaultOffset(t){const e=[0];return fillOffset(e,t.length-1),e}function convertOffsetToTimes(t,e){return t.map(n=>n*e)}function defaultEasing(t,e){return t.map(()=>e||easeInOut).splice(0,t.length-1)}function keyframes({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=isEasingArray(s)?s.map(easingDefinitionToFunction):easingDefinitionToFunction(s),o={done:!1,value:e[0]},l=convertOffsetToTimes(n&&n.length===e.length?n:defaultOffset(e),t),u=interpolate$2(l,e,{ease:Array.isArray(i)?i:defaultEasing(e,i)});return{calculatedDuration:t,next:d=>(o.value=u(d),o.done=d>=t,o)}}const isNotNull$2=t=>t!==null;function getFinalKeyframe$1(t,{repeat:e,repeatType:n="loop"},s,i=1){const o=t.filter(isNotNull$2),u=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!u||s===void 0?o[u]:s}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(t){typeof t.type=="string"&&(t.type=transitionTypeMap[t.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const percentToProgress=t=>t/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,i;const{motionValue:n}=this.options;n&&n.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(s=this.options).onStop)==null||i.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:n=keyframes,repeat:s=0,repeatDelay:i=0,repeatType:o,velocity:l=0}=e;let{keyframes:u}=e;const d=n||keyframes;d!==keyframes&&typeof u[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=calcGeneratorDuration(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:i,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return s.next(0);const{delay:f=0,keyframes:m,repeat:g,repeatType:y,repeatDelay:v,type:E,onUpdate:w,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const I=this.currentTime-f*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?I<0:I>i;this.currentTime=Math.max(I,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let V=this.currentTime,Y=s;if(g){const T=Math.min(this.currentTime,i)/u;let P=Math.floor(T),U=T%1;!U&&T>=1&&(U=1),U===1&&P--,P=Math.min(P,g+1),!!(P%2)&&(y==="reverse"?(U=1-U,v&&(U-=v/u)):y==="mirror"&&(Y=l)),V=clamp$1(0,1,U)*u}const j=D?{done:!1,value:m[0]}:Y.next(V);o&&(j.value=o(j.value));let{done:H}=j;!D&&d!==null&&(H=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return S&&E!==inertia&&(j.value=getFinalKeyframe$1(m,this.options,A,this.speed)),w&&w(j.value),S&&this.finish(),j}then(e,n){return this.finished.then(e,n)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){var n;e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=millisecondsToSeconds(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:n}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(o=(i=this.options).onPlay)==null||o.call(i);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function fillWildcards(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const radToDeg=t=>t*180/Math.PI,rotate$1=t=>{const e=radToDeg(Math.atan2(t[1],t[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:rotate$1,rotateZ:rotate$1,skewX:t=>radToDeg(Math.atan(t[1])),skewY:t=>radToDeg(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rebaseAngle=t=>(t=t%360,t<0&&(t+=360),t),rotateZ=rotate$1,scaleX=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),scaleY=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:t=>(scaleX(t)+scaleY(t))/2,rotateX:t=>rebaseAngle(radToDeg(Math.atan2(t[6],t[5]))),rotateY:t=>rebaseAngle(radToDeg(Math.atan2(-t[2],t[0]))),rotateZ,rotate:rotateZ,skewX:t=>radToDeg(Math.atan(t[4])),skewY:t=>radToDeg(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function defaultTransformValue(t){return t.includes("scale")?1:0}function parseValueFromTransform(t,e){if(!t||t==="none")return defaultTransformValue(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=matrix3dParsers,i=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=matrix2dParsers,i=u}if(!i)return defaultTransformValue(e);const o=s[e],l=i[1].split(",").map(convertTransformToNumber);return typeof o=="function"?o(l):l[o]}const readTransformValue=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return parseValueFromTransform(n,e)};function convertTransformToNumber(t){return parseFloat(t.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=t=>t===number||t===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(t=>!transformKeys.has(t));function removeNonTranslationalTransform(t){const e=[];return nonTranslationalTransformKeys.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>parseValueFromTransform(e,"x"),y:(t,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const t=Array.from(toResolve).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=removeNonTranslationalTransform(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([o,l])=>{var u;(u=s.getValue(o))==null||u.set(l)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(t=>t.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,n,s,i,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(s&&n){const u=s.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=t=>t.startsWith("--");function setStyle$1(t,e,n){isCSSVar(e)?t.style.setProperty(e,n):t.style[e]=n}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(t,e){const n=memo(t);return()=>supportsFlags[e]??n()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(t,e){if(t)return typeof t=="function"?supportsLinearEasing()?generateLinearEasing(t,e):"ease-out":isBezierDefinition(t)?cubicBezierAsString(t):Array.isArray(t)?t.map(n=>mapEasingToNativeEasing(n,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[t]}function startWaapiAnimation(t,e,n,{delay:s=0,duration:i=300,repeat:o=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const m={[e]:n};d&&(m.offset=d);const g=mapEasingToNativeEasing(u,i);Array.isArray(g)&&(m.easing=g);const y={delay:s,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(y.pseudoElement=f),t.animate(m,y)}function isGenerator(t){return typeof t=="function"&&"applyToOptions"in t}function applyGeneratorOptions({type:t,...e}){return isGenerator(t)&&supportsLinearEasing()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:i,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,invariant(typeof e.type!="string");const f=applyGeneratorOptions(e);this.animation=startWaapiAnimation(n,s,i,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=getFinalKeyframe$1(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(m):setStyle$1(n,s,m),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop$2):n(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(t){return t in unsupportedEasingFunctions}function replaceStringEasing(t){typeof t.ease=="string"&&isUnsupportedEase(t.ease)&&(t.ease=unsupportedEasingFunctions[t.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:i,element:o,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new JSAnimation({...l,autoplay:!1}),d=secondsToMilliseconds(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-sampleDelta).value,u.sample(d).value,sampleDelta),u.stop()}}const isAnimatable=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(complex.test(t)||t==="0")&&!t.startsWith("url("));function hasKeyframesChanged(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function canAnimate(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=isAnimatable(i,e),u=isAnimatable(o,e);return!l||!u?!1:hasKeyframesChanged(t)||(n==="spring"||isGenerator(n))&&s}function isHTMLElement$2(t){return isObject$1(t)&&"offsetHeight"in t}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(t){var f;const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:o,type:l}=t;if(!isHTMLElement$2((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return supportsWaapi()&&n&&acceleratedValues.has(n)&&(n!=="transform"||!d)&&!u&&!s&&i!=="mirror"&&o!==0&&l!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:m,...g}){var E;super(),this.stop=()=>{var w,A;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=time.now();const y={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:o,repeatType:l,name:d,motionValue:f,element:m,...g},v=(m==null?void 0:m.KeyframeResolver)||KeyframeResolver;this.keyframeResolver=new v(u,(w,A,I)=>this.onKeyframesResolved(w,A,y,!I),d,f,m),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(e,n,s,i){this.keyframeResolver=void 0;const{name:o,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:m}=s;this.resolvedAt=time.now(),canAnimate(e,o,l,u)||((MotionGlobalConfig.instantAnimations||!d)&&(m==null||m(getFinalKeyframe$1(e,s,n))),e[0]=e[e.length-1],s.duration=0,s.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},v=!f&&supportsBrowserAnimation(y)?new NativeAnimationExtended({...y,element:y.motionValue.owner.current}):new JSAnimation(y);v.finished.then(()=>this.notifyFinished()).catch(noop$2),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(t){const e=splitCSSVariableRegex.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function getVariableValue(t,e,n=1){const[s,i]=parseCSSVariable(t);if(!s)return;const o=window.getComputedStyle(e).getPropertyValue(s);if(o){const l=o.trim();return isNumericalString(l)?parseFloat(l):l}return isCSSVariableToken(i)?getVariableValue(i,e,n+1):i}function getValueTransition(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:t=>t==="auto",parse:t=>t},testValueType=t=>e=>e.test(t),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=t=>dimensionValueTypes.find(testValueType(t));function isNone(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||isZeroValueString(t):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(floatRegex)||[];if(!s)return t;const i=n.replace(s,"");let o=maxDefaults.has(e)?1:0;return s!==n&&(o*=100),e+"("+o+i+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:t=>{const e=t.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):t}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter,WebkitFilter:filter},getDefaultValueType=t=>defaultValueTypes[t];function getAnimatableNone(t,e){let n=getDefaultValueType(t);return n!==filter&&(n=complex),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(t,e,n){let s=0,i;for(;s<t.length&&!i;){const o=t[s];typeof o=="string"&&!invalidTemplates.has(o)&&analyseComplexValue(o).values.length&&(i=t[s]),s++}if(i&&n)for(const o of e)t[o]=getAnimatableNone(n,i)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,n,s,i,o){super(e,n,s,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),isCSSVariableToken(f))){const m=getVariableValue(f,n.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(s)||e.length!==2)return;const[i,o]=e,l=findDimensionValueType(i),u=findDimensionValueType(o);if(l!==u)if(isNumOrPxType(l)&&isNumOrPxType(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else positionalValues[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||isNone(e[i]))&&s.push(i);s.length&&makeNoneKeyframesAnimatable(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,l=s[o];s[o]=positionalValues[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([d,f])=>{e.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function resolveElements(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=(n==null?void 0:n[t])??s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const getValueAsType=(t,e)=>e&&typeof t=="number"?e.transform(t):t,MAX_VELOCITY_DELTA=30,isFloat=t=>!isNaN(parseFloat(t));class MotionValue{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{var l,u;const o=time.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();i&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new SubscriptionManager);const s=this.events[e].add(n);return e==="change"?()=>{s(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(t,e){return new MotionValue(t,e)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(t){return t==="x"||t==="y"?isDragging[t]?null:(isDragging[t]=!0,()=>{isDragging[t]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(t,e){const n=resolveElements(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function isValidHover(t){return!(t.pointerType==="touch"||isDragActive())}function hover(t,e,n={}){const[s,i,o]=setupGesture(t,n),l=u=>{if(!isValidHover(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const m=g=>{isValidHover(g)&&(f(g),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,i)};return s.forEach(u=>{u.addEventListener("pointerenter",l,i)}),o}const isNodeOrChild=(t,e)=>e?t===e?!0:isNodeOrChild(t,e.parentElement):!1,isPrimaryPointer=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(t){return focusableElements.has(t.tagName)||t.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(t){return e=>{e.key==="Enter"&&t(e)}}function firePointerEvent(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=filterEvents(()=>{if(isPressing.has(n))return;firePointerEvent(n,"down");const i=filterEvents(()=>{firePointerEvent(n,"up")}),o=()=>firePointerEvent(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function isValidPressEvent(t){return isPrimaryPointer(t)&&!isDragActive()}function press(t,e,n={}){const[s,i,o]=setupGesture(t,n),l=u=>{const d=u.currentTarget;if(!isValidPressEvent(u))return;isPressing.add(d);const f=e(d,u),m=(v,E)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),isPressing.has(d)&&isPressing.delete(d),isValidPressEvent(v)&&typeof f=="function"&&f(v,{success:E})},g=v=>{m(v,d===window||d===document||n.useGlobalTarget||isNodeOrChild(d,v.target))},y=v=>{m(v,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",y,i)};return s.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,i),isHTMLElement$2(u)&&(u.addEventListener("focus",f=>enableKeyboardPress(f,i)),!isElementKeyboardAccessible(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function isSVGElement$1(t){return isObject$1(t)&&"ownerSVGElement"in t}function isSVGSVGElement(t){return isSVGElement$1(t)&&t.tagName==="svg"}const isMotionValue=t=>!!(t&&t.getVelocity),valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=t=>valueTypes.find(testValueType(t)),MotionConfigContext=reactExports.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,i=isHTMLElement$2(s)&&s.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:t,isPresent:e,anchorX:n}){const s=reactExports.useId(),i=reactExports.useRef(null),o=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:u,height:d,top:f,left:m,right:g}=o.current;if(e||!i.current||!u||!d)return;const y=n==="left"?`left: ${m}`:`right: ${g}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");return l&&(v.nonce=l),document.head.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${y}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.contains(v)&&document.head.removeChild(v)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:i,sizeRef:o,children:reactExports.cloneElement(t,{ref:i})})}const PresenceChild=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:o,mode:l,anchorX:u})=>{const d=useConstant(newChildrenMap),f=reactExports.useId();let m=!0,g=reactExports.useMemo(()=>(m=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:y=>{d.set(y,!0);for(const v of d.values())if(!v)return;s&&s()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,s]);return o&&m&&(g={...g}),reactExports.useMemo(()=>{d.forEach((y,v)=>d.set(v,!1))},[n]),reactExports.useEffect(()=>{!n&&!d.size&&s&&s()},[n]),l==="popLayout"&&(t=jsxRuntimeExports.jsx(PopChild,{isPresent:n,anchorX:u,children:t})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:g,children:t})};function newChildrenMap(){return new Map}function usePresence$1(t=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,o=reactExports.useId();reactExports.useEffect(()=>{if(t)return i(o)},[t]);const l=reactExports.useCallback(()=>t&&s&&s(o),[o,s,t]);return!n&&s?[!1,l]:[!0]}const getChildKey=t=>t.key||"";function onlyElements(t){const e=[];return reactExports.Children.forEach(t,n=>{reactExports.isValidElement(n)&&e.push(n)}),e}const AnimatePresence=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:o="sync",propagate:l=!1,anchorX:u="left"})=>{const[d,f]=usePresence$1(l),m=reactExports.useMemo(()=>onlyElements(t),[t]),g=l&&!d?[]:m.map(getChildKey),y=reactExports.useRef(!0),v=reactExports.useRef(m),E=useConstant(()=>new Map),[w,A]=reactExports.useState(m),[I,D]=reactExports.useState(m);useIsomorphicLayoutEffect$2(()=>{y.current=!1,v.current=m;for(let j=0;j<I.length;j++){const H=getChildKey(I[j]);g.includes(H)?E.delete(H):E.get(H)!==!0&&E.set(H,!1)}},[I,g.length,g.join("-")]);const V=[];if(m!==w){let j=[...m];for(let H=0;H<I.length;H++){const S=I[H],T=getChildKey(S);g.includes(T)||(j.splice(H,0,S),V.push(S))}return o==="wait"&&V.length&&(j=V),D(onlyElements(j)),A(m),null}const{forceRender:Y}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:I.map(j=>{const H=getChildKey(j),S=l&&!d?!1:m===I||g.includes(H),T=()=>{if(E.has(H))E.set(H,!0);else return;let P=!0;E.forEach(U=>{U||(P=!1)}),P&&(Y==null||Y(),D(v.current),l&&(f==null||f()),s&&s())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:S,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,onExitComplete:S?void 0:T,anchorX:u,children:j},H)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const t in featureProps)featureDefinitions[t]={isEnabled:e=>featureProps[t].some(n=>!!e[n])};function loadFeatures(t){for(const e in t)featureDefinitions[e]={...featureDefinitions[e],...t[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||validMotionProps.has(t)}let shouldForward=t=>!isValidMotionProp(t);function loadExternalIsValidProp(t){t&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):t(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(shouldForward(i)||n===!0&&isValidMotionProp(i)||!e&&!isValidMotionProp(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}function createDOMMotionComponentProxy(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const MotionContext=reactExports.createContext({});function isAnimationControls(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function isVariantLabel(t){return typeof t=="string"||Array.isArray(t)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(t){return isAnimationControls(t.animate)||variantProps.some(e=>isVariantLabel(t[e]))}function isVariantNode(t){return!!(isControllingVariants(t)||t.variants)}function getCurrentTreeVariants(t,e){if(isControllingVariants(t)){const{initial:n,animate:s}=t;return{initial:n===!1||isVariantLabel(n)?n:void 0,animate:isVariantLabel(s)?s:void 0}}return t.inherit!==!1?e:{}}function useCreateMotionContext(t){const{initial:e,animate:n}=getCurrentTreeVariants(t,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:n}),[variantLabelsAsDependency(e),variantLabelsAsDependency(n)])}function variantLabelsAsDependency(t){return Array.isArray(t)?t.join(" "):t}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function useMotionRef(t,e,n){return reactExports.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):isRefObject(n)&&(n.current=s))},[e])}const camelToDash=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(t,e,n,s,i){var w,A;const{visualElement:o}=reactExports.useContext(MotionContext),l=reactExports.useContext(LazyContext),u=reactExports.useContext(PresenceContext),d=reactExports.useContext(MotionConfigContext).reducedMotion,f=reactExports.useRef(null);s=s||l.renderer,!f.current&&s&&(f.current=s(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const m=f.current,g=reactExports.useContext(SwitchLayoutGroupContext);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&createProjectionNode$1(f.current,n,i,g);const y=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{m&&y.current&&m.update(n,u)});const v=n[optimizedAppearDataAttribute],E=reactExports.useRef(!!v&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,v))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,v)));return useIsomorphicLayoutEffect$2(()=>{m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),microtask.render(m.render),E.current&&m.animationState&&m.animationState.animateChanges())}),reactExports.useEffect(()=>{m&&(!E.current&&m.animationState&&m.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var I;(I=window.MotionHandoffMarkAsComplete)==null||I.call(window,v)}),E.current=!1))}),m}function createProjectionNode$1(t,e,n,s){const{layoutId:i,layout:o,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!l||u&&isRefObject(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,crossfade:m,layoutScroll:d,layoutRoot:f})}function getClosestProjectingNode(t){if(t)return t.options.allowProjection!==!1?t.projection:getClosestProjectingNode(t.parent)}function createRendererMotionComponent({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:i}){t&&loadFeatures(t);function o(u,d){let f;const m={...reactExports.useContext(MotionConfigContext),...u,layoutId:useLayoutId(u)},{isStatic:g}=m,y=useCreateMotionContext(u),v=s(u,g);if(!g&&isBrowser){useStrictMode();const E=getProjectionFunctionality(m);f=E.MeasureLayout,y.visualElement=useVisualElement(i,v,m,e,E.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:y,children:[f&&y.visualElement?jsxRuntimeExports.jsx(f,{visualElement:y.visualElement,...m}):null,n(i,u,useMotionRef(v,y.visualElement,d),v,g,y.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=reactExports.forwardRef(o);return l[motionComponentSymbol]=i,l}function useLayoutId({layoutId:t}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&t!==void 0?e+"-"+t:t}function useStrictMode(t,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(t){const{drag:e,layout:n}=featureDefinitions;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const scaleCorrectors={};function addScaleCorrector(t){for(const e in t)scaleCorrectors[e]=t[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(t,{layout:e,layoutId:n}){return transformProps.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!scaleCorrectors[t]||t==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(t,e,n){let s="",i=!0;for(let o=0;o<numTransforms;o++){const l=transformPropOrder[o],u=t[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const f=getValueAsType(u,numberValueTypes[l]);if(!d){i=!1;const m=translateAlias[l]||l;s+=`${m}(${f}) `}n&&(e[l]=f)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function buildHTMLStyles(t,e,n){const{style:s,vars:i,transformOrigin:o}=t;let l=!1,u=!1;for(const d in e){const f=e[d];if(transformProps.has(d)){l=!0;continue}else if(isCSSVariableName(d)){i[d]=f;continue}else{const m=getValueAsType(f,numberValueTypes[d]);d.startsWith("origin")?(u=!0,o[d]=m):s[d]=m}}if(e.transform||(l||n?s.transform=buildTransform(e,t.transform,n):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:m=0}=o;s.transformOrigin=`${d} ${f} ${m}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(t,e,n){for(const s in e)!isMotionValue(e[s])&&!isForcedMotionValue(s,n)&&(t[s]=e[s])}function useInitialMotionValues({transformTemplate:t},e){return reactExports.useMemo(()=>{const n=createHtmlRenderState();return buildHTMLStyles(n,e,t),Object.assign({},n.vars,n.style)},[e])}function useStyle(t,e){const n=t.style||{},s={};return copyRawValuesOnly(s,n,t),Object.assign(s,useInitialMotionValues(t,e)),s}function useHTMLProps(t,e){const n={},s=useStyle(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(t,e,n=1,s=0,i=!0){t.pathLength=1;const o=i?dashKeys:camelKeys;t[o.offset]=px.transform(-s);const l=px.transform(e),u=px.transform(n);t[o.array]=`${l} ${u}`}function buildSVGAttrs(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:o=1,pathOffset:l=0,...u},d,f,m){if(buildHTMLStyles(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:y}=t;g.transform&&(y.transform=g.transform,delete g.transform),(y.transform||g.transformOrigin)&&(y.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),y.transform&&(y.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),s!==void 0&&(g.scale=s),i!==void 0&&buildSVGPath(g,i,o,l,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=t=>typeof t=="string"&&t.toLowerCase()==="svg";function useSVGProps(t,e,n,s){const i=reactExports.useMemo(()=>{const o=createSvgRenderState();return buildSVGAttrs(o,e,isSVGTag(s),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};copyRawValuesOnly(o,t.style,t),i.style={...o,...i.style}}return i}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(t){return typeof t!="string"||t.includes("-")?!1:!!(lowercaseSVGElements.indexOf(t)>-1||/[A-Z]/u.test(t))}function createUseRender(t=!1){return(n,s,i,{latestValues:o},l)=>{const d=(isSVGComponent(n)?useSVGProps:useHTMLProps)(s,o,l,n),f=filterProps(s,typeof n=="string",t),m=n!==reactExports.Fragment?{...f,...d,ref:i}:{},{children:g}=s,y=reactExports.useMemo(()=>isMotionValue(g)?g.get():g,[g]);return reactExports.createElement(n,{...m,children:y})}}function getValueState(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function resolveVariantFromProps(t,e,n,s){if(typeof e=="function"){const[i,o]=getValueState(s);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=getValueState(s);e=e(n!==void 0?n:t.custom,i,o)}return e}function resolveMotionValue(t){return isMotionValue(t)?t.get():t}function makeState({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:makeLatestValues(n,s,i,t),renderState:e()}}const makeUseVisualState=t=>(e,n)=>{const s=reactExports.useContext(MotionContext),i=reactExports.useContext(PresenceContext),o=()=>makeState(t,e,s,i);return n?o():useConstant(o)};function makeLatestValues(t,e,n,s){const i={},o=s(t,{});for(const y in o)i[y]=resolveMotionValue(o[y]);let{initial:l,animate:u}=t;const d=isControllingVariants(t),f=isVariantNode(t);e&&f&&!d&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||l===!1;const g=m?u:l;if(g&&typeof g!="boolean"&&!isAnimationControls(g)){const y=Array.isArray(g)?g:[g];for(let v=0;v<y.length;v++){const E=resolveVariantFromProps(t,y[v]);if(E){const{transitionEnd:w,transition:A,...I}=E;for(const D in I){let V=I[D];if(Array.isArray(V)){const Y=m?V.length-1:0;V=V[Y]}V!==null&&(i[D]=V)}for(const D in w)i[D]=w[D]}}}return i}function scrapeMotionValuesFromProps$1(t,e,n){var o;const{style:s}=t,i={};for(const l in s)(isMotionValue(s[l])||e.style&&isMotionValue(e.style[l])||isForcedMotionValue(l,t)||((o=n==null?void 0:n.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(i[l]=s[l]);return i}const htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function scrapeMotionValuesFromProps(t,e,n){const s=scrapeMotionValuesFromProps$1(t,e,n);for(const i in t)if(isMotionValue(t[i])||isMotionValue(e[i])){const o=transformPropOrder.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[o]=t[i]}return s}const svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState})};function createMotionComponentFactory(t,e){return function(s,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...isSVGComponent(s)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:t,useRender:createUseRender(i),createVisualElement:e,Component:s};return createRendererMotionComponent(l)}}function resolveVariant(t,e,n){const s=t.getProps();return resolveVariantFromProps(s,e,n!==void 0?n:s.custom,t)}const isKeyframesTarget=t=>Array.isArray(t);function setMotionValue(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,motionValue(n))}function resolveFinalValueInKeyframes(t){return isKeyframesTarget(t)?t[t.length-1]||0:t}function setTarget(t,e){const n=resolveVariant(t,e);let{transitionEnd:s={},transition:i={},...o}=n||{};o={...o,...s};for(const l in o){const u=resolveFinalValueInKeyframes(o[l]);setMotionValue(t,l,u)}}function isWillChangeMotionValue(t){return!!(isMotionValue(t)&&t.add)}function addValueToWillChange(t,e){const n=t.getValue("willChange");if(isWillChangeMotionValue(n))return n.add(e);if(!n&&MotionGlobalConfig.WillChange){const s=new MotionGlobalConfig.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function getOptimisedAppearId(t){return t.props[optimizedAppearDataAttribute]}const isNotNull$1=t=>t!==null;function getFinalKeyframe(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(isNotNull$1),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[o]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(t,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(t)?t.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:o,repeatType:l,repeatDelay:u,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const animateMotionValue=(t,e,n,s={},i,o)=>l=>{const u=getValueTransition(s,t)||{},d=u.delay||s.delay||0;let{elapsed:f=0}=s;f=f-secondsToMilliseconds(d);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:y=>{e.set(y),u.onUpdate&&u.onUpdate(y)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:i};isTransitionDefined(u)||Object.assign(m,getDefaultTransition(t,m)),m.duration&&(m.duration=secondsToMilliseconds(m.duration)),m.repeatDelay&&(m.repeatDelay=secondsToMilliseconds(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(g=!0,m.duration=0,m.delay=0),m.allowFlatten=!u.type&&!u.ease,g&&!o&&e.get()!==void 0){const y=getFinalKeyframe(m.keyframes,u);if(y!==void 0){frame.update(()=>{m.onUpdate(y),m.onComplete()});return}}return u.isSync?new JSAnimation(m):new AsyncMotionValueAnimation(m)};function shouldBlockAnimation({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function animateTarget(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...u}=e;s&&(o=s);const d=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const m in u){const g=t.getValue(m,t.latestValues[m]??null),y=u[m];if(y===void 0||f&&shouldBlockAnimation(f,m))continue;const v={delay:n,...getValueTransition(o||{},m)},E=g.get();if(E!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===E&&!v.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const I=getOptimisedAppearId(t);if(I){const D=window.MotionHandoffAnimation(I,m,frame);D!==null&&(v.startTime=D,w=!0)}}addValueToWillChange(t,m),g.start(animateMotionValue(m,g,y,t.shouldReduceMotion&&positionalKeys.has(m)?{type:!1}:v,t,w));const A=g.animation;A&&d.push(A)}return l&&Promise.all(d).then(()=>{frame.update(()=>{l&&setTarget(t,l)})}),d}function animateVariant(t,e,n={}){var d;const s=resolveVariant(t,e,n.type==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(animateTarget(t,s,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:y}=i;return animateChildren(t,e,m+f,g,y,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[f,m]=u==="beforeChildren"?[o,l]:[l,o];return f().then(()=>m())}else return Promise.all([o(),l(n.delay)])}function animateChildren(t,e,n=0,s=0,i=1,o){const l=[],u=(t.variantChildren.size-1)*s,d=i===1?(f=0)=>f*s:(f=0)=>u-f*s;return Array.from(t.variantChildren).sort(sortByTreeOrder).forEach((f,m)=>{f.notify("AnimationStart",e),l.push(animateVariant(f,e,{...o,delay:n+d(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function sortByTreeOrder(t,e){return t.sortNodePosition(e)}function animateVisualElement(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(o=>animateVariant(t,o,n));s=Promise.all(i)}else if(typeof e=="string")s=animateVariant(t,e,n);else{const i=typeof e=="function"?resolveVariant(t,e,n.custom):e;s=Promise.all(animateTarget(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function shallowCompare(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?getVariantContext(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<numVariantProps;n++){const s=variantProps[n],i=t.props[s];(isVariantLabel(i)||i===!1)&&(e[s]=i)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(t){return e=>Promise.all(e.map(({animation:n,options:s})=>animateVisualElement(t,n,s)))}function createAnimationState(t){let e=animateList(t),n=createState(),s=!0;const i=d=>(f,m)=>{var y;const g=resolveVariant(t,m,d==="exit"?(y=t.presenceContext)==null?void 0:y.custom:void 0);if(g){const{transition:v,transitionEnd:E,...w}=g;f={...f,...w,...E}}return f};function o(d){e=d(t)}function l(d){const{props:f}=t,m=getVariantContext(t.parent)||{},g=[],y=new Set;let v={},E=1/0;for(let A=0;A<numAnimationTypes;A++){const I=reversePriorityOrder[A],D=n[I],V=f[I]!==void 0?f[I]:m[I],Y=isVariantLabel(V),j=I===d?D.isActive:null;j===!1&&(E=A);let H=V===m[I]&&V!==f[I]&&Y;if(H&&s&&t.manuallyAnimateOnMount&&(H=!1),D.protectedKeys={...v},!D.isActive&&j===null||!V&&!D.prevProp||isAnimationControls(V)||typeof V=="boolean")continue;const S=checkVariantsDidChange(D.prevProp,V);let T=S||I===d&&D.isActive&&!H&&Y||A>E&&Y,P=!1;const U=Array.isArray(V)?V:[V];let J=U.reduce(i(I),{});j===!1&&(J={});const{prevResolvedValues:W={}}=D,K={...W,...J},le=ce=>{T=!0,y.has(ce)&&(P=!0,y.delete(ce)),D.needsAnimating[ce]=!0;const ie=t.getValue(ce);ie&&(ie.liveStyle=!1)};for(const ce in K){const ie=J[ce],Ne=W[ce];if(v.hasOwnProperty(ce))continue;let re=!1;isKeyframesTarget(ie)&&isKeyframesTarget(Ne)?re=!shallowCompare(ie,Ne):re=ie!==Ne,re?ie!=null?le(ce):y.add(ce):ie!==void 0&&y.has(ce)?le(ce):D.protectedKeys[ce]=!0}D.prevProp=V,D.prevResolvedValues=J,D.isActive&&(v={...v,...J}),s&&t.blockInitialAnimation&&(T=!1),T&&(!(H&&S)||P)&&g.push(...U.map(ce=>({animation:ce,options:{type:I}})))}if(y.size){const A={};if(typeof f.initial!="boolean"){const I=resolveVariant(t,Array.isArray(f.initial)?f.initial[0]:f.initial);I&&I.transition&&(A.transition=I.transition)}y.forEach(I=>{const D=t.getBaseTarget(I),V=t.getValue(I);V&&(V.liveStyle=!0),A[I]=D??null}),g.push({animation:A})}let w=!!g.length;return s&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(w=!1),s=!1,w?e(g):Promise.resolve()}function u(d,f){var g;if(n[d].isActive===f)return Promise.resolve();(g=t.variantChildren)==null||g.forEach(y=>{var v;return(v=y.animationState)==null?void 0:v.setActive(d,f)}),n[d].isActive=f;const m=l(d);for(const y in n)n[y].protectedKeys={};return m}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=createState(),s=!0}}}function checkVariantsDidChange(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!shallowCompare(e,t):!1}function createTypeState(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function extractEventInfo(t){return{point:{x:t.pageX,y:t.pageY}}}const addPointerInfo=t=>e=>isPrimaryPointer(e)&&t(e,extractEventInfo(e));function addPointerEvent(t,e,n,s){return addDomEvent(t,e,addPointerInfo(n),s)}function convertBoundingBoxToBox({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function convertBoxToBoundingBox({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function transformBoxPoints(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(t){return t.max-t.min}function isNear(t,e,n){return Math.abs(t-e)<=n}function calcAxisDelta(t,e,n,s=.5){t.origin=s,t.originPoint=mixNumber$1(e.min,e.max,t.origin),t.scale=calcLength(n)/calcLength(e),t.translate=mixNumber$1(n.min,n.max,t.origin)-t.originPoint,(t.scale>=SCALE_MIN&&t.scale<=SCALE_MAX||isNaN(t.scale))&&(t.scale=1),(t.translate>=TRANSLATE_MIN&&t.translate<=TRANSLATE_MAX||isNaN(t.translate))&&(t.translate=0)}function calcBoxDelta(t,e,n,s){calcAxisDelta(t.x,e.x,n.x,s?s.originX:void 0),calcAxisDelta(t.y,e.y,n.y,s?s.originY:void 0)}function calcRelativeAxis(t,e,n){t.min=n.min+e.min,t.max=t.min+calcLength(e)}function calcRelativeBox(t,e,n){calcRelativeAxis(t.x,e.x,n.x),calcRelativeAxis(t.y,e.y,n.y)}function calcRelativeAxisPosition(t,e,n){t.min=e.min-n.min,t.max=t.min+calcLength(e)}function calcRelativePosition(t,e,n){calcRelativeAxisPosition(t.x,e.x,n.x),calcRelativeAxisPosition(t.y,e.y,n.y)}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(t){return[t("x"),t("y")]}function isIdentityScale(t){return t===void 0||t===1}function hasScale({scale:t,scaleX:e,scaleY:n}){return!isIdentityScale(t)||!isIdentityScale(e)||!isIdentityScale(n)}function hasTransform(t){return hasScale(t)||has2DTranslate(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function has2DTranslate(t){return is2DTranslate(t.x)||is2DTranslate(t.y)}function is2DTranslate(t){return t&&t!=="0%"}function scalePoint(t,e,n){const s=t-n,i=e*s;return n+i}function applyPointDelta(t,e,n,s,i){return i!==void 0&&(t=scalePoint(t,i,s)),scalePoint(t,n,s)+e}function applyAxisDelta(t,e=0,n=1,s,i){t.min=applyPointDelta(t.min,e,n,s,i),t.max=applyPointDelta(t.max,e,n,s,i)}function applyBoxDelta(t,{x:e,y:n}){applyAxisDelta(t.x,e.translate,e.scale,e.originPoint),applyAxisDelta(t.y,n.translate,n.scale,n.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,l;for(let u=0;u<i;u++){o=n[u],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&transformBox(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,applyBoxDelta(t,l)),s&&hasTransform(o.latestValues)&&transformBox(t,o.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(t,e){t.min=t.min+e,t.max=t.max+e}function transformAxis(t,e,n,s,i=.5){const o=mixNumber$1(t.min,t.max,i);applyAxisDelta(t,e,n,o,s)}function transformBox(t,e){transformAxis(t.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(t.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(t,e){return convertBoundingBoxToBox(transformBoxPoints(t.getBoundingClientRect(),e))}function measurePageBox(t,e,n){const s=measureViewportBox(t,n),{scroll:i}=e;return i&&(translateAxis(s.x,i.offset.x),translateAxis(s.y,i.offset.y)),s}const getContextWindow=({current:t})=>t?t.ownerDocument.defaultView:null,distance=(t,e)=>Math.abs(t-e);function distance2D(t,e){const n=distance(t.x,e.x),s=distance(t.y,e.y);return Math.sqrt(n**2+s**2)}class PanSession{constructor(e,n,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=getPanInfo(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,v=distance2D(g.offset,{x:0,y:0})>=3;if(!y&&!v)return;const{point:E}=g,{timestamp:w}=frameData;this.history.push({...E,timestamp:w});const{onStart:A,onMove:I}=this.handlers;y||(A&&A(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=transformPoint(y,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:v,onSessionEnd:E,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=getPanInfo(g.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(y,this.transformPagePoint),this.history);this.startEvent&&v&&v(g,A),E&&E(g,A)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=s,this.contextWindow=i||window;const l=extractEventInfo(e),u=transformPoint(l,this.transformPagePoint),{point:d}=u,{timestamp:f}=frameData;this.history=[{...d,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,getPanInfo(u,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(t,e){return e?{point:e(t.point)}:t}function subtractPoint(t,e){return{x:t.x-e.x,y:t.y-e.y}}function getPanInfo({point:t},e){return{point:t,delta:subtractPoint(t,lastDevicePoint(e)),offset:subtractPoint(t,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(t){return t[0]}function lastDevicePoint(t){return t[t.length-1]}function getVelocity(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=lastDevicePoint(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>secondsToMilliseconds(e)));)n--;if(!s)return{x:0,y:0};const o=millisecondsToSeconds(i.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const l={x:(i.x-s.x)/o,y:(i.y-s.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function applyConstraints(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?mixNumber$1(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?mixNumber$1(n,t,s.max):Math.min(t,n)),t}function calcRelativeAxisConstraints(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function calcRelativeConstraints(t,{top:e,left:n,bottom:s,right:i}){return{x:calcRelativeAxisConstraints(t.x,n,i),y:calcRelativeAxisConstraints(t.y,e,s)}}function calcViewportAxisConstraints(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function calcViewportConstraints(t,e){return{x:calcViewportAxisConstraints(t.x,e.x),y:calcViewportAxisConstraints(t.y,e.y)}}function calcOrigin(t,e){let n=.5;const s=calcLength(t),i=calcLength(e);return i>s?n=progress(e.min,e.max-s,t.min):s>i&&(n=progress(t.min,t.max-i,e.min)),clamp$1(0,1,n)}function rebaseAxisConstraints(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const defaultElastic=.35;function resolveDragElastic(t=defaultElastic){return t===!1?t=0:t===!0&&(t=defaultElastic),{x:resolveAxisElastic(t,"left","right"),y:resolveAxisElastic(t,"top","bottom")}}function resolveAxisElastic(t,e,n){return{min:resolvePointElastic(t,e),max:resolvePointElastic(t,n)}}function resolvePointElastic(t,e){return typeof t=="number"?t:t[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(extractEventInfo(m).point)},o=(m,g)=>{const{drag:y,dragPropagation:v,onDragStart:E}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(A=>{let I=this.getAxisMotionValue(A).get()||0;if(percent.test(I)){const{projection:D}=this.visualElement;if(D&&D.layout){const V=D.layout.layoutBox[A];V&&(I=calcLength(V)*(parseFloat(I)/100))}}this.originPoint[A]=I}),E&&frame.postRender(()=>E(m,g)),addValueToWillChange(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(m,g)=>{const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:E,onDrag:w}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:A}=g;if(v&&this.currentDirection===null){this.currentDirection=getCurrentDirection(A),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",g.point,A),this.updateAxis("y",g.point,A),this.visualElement.render(),w&&w(m,g)},u=(m,g)=>this.stop(m,g),d=()=>eachAxis(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)==null?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:getContextWindow(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&frame.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!shouldDrag(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=applyConstraints(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=calcRelativeConstraints(s.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=rebaseAxisConstraints(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!isRefObject(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=measurePageBox(s,i.root,this.visualElement.getTransformPagePoint());let l=calcViewportConstraints(i.layout.layoutBox,o);if(n){const u=n(convertBoxToBoundingBox(l));this.hasMutatedConstraints=!!u,u&&(l=convertBoundingBoxToBox(u))}return l}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=eachAxis(m=>{if(!shouldDrag(m,n,this.currentDirection))return;let g=d&&d[m]||{};l&&(g={min:0,max:0});const y=i?200:1e6,v=i?40:1e7,E={type:"inertia",velocity:s?e[m]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,E)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),s.start(animateMotionValue(e,s,0,n,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(n=>{const{drag:s}=this.getProps();if(!shouldDrag(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:u}=i.layout.layoutBox[n];o.set(e[n]-mixNumber$1(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!isRefObject(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};eachAxis(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();i[l]=calcOrigin({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),eachAxis(l=>{if(!shouldDrag(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(mixNumber$1(d,f,i[l]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,n=addPointerEvent(e,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();isRefObject(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),frame.read(s);const l=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(eachAxis(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:l=defaultElastic,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function shouldDrag(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function getCurrentDirection(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$2,this.removeListeners=noop$2,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$2}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=t=>(e,n)=>{t&&frame.postRender(()=>t(e,n))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$2}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(n),onMove:s,onEnd:(o,l)=>{delete this.session,i&&frame.postRender(()=>i(o,l))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const correctBorderRadius={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(px.test(t))t=parseFloat(t);else return t;const n=pixelsToPercent(t,e.target.x),s=pixelsToPercent(t,e.target.y);return`${n}% ${s}%`}},correctBoxShadow={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=complex.parse(t);if(i.length>5)return s;const o=complex.createTransformer(t),l=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,d=n.y.scale*e.y;i[0+l]/=u,i[1+l]/=d;const f=mixNumber$1(u,d,.5);return typeof i[2+l]=="number"&&(i[2+l]/=f),typeof i[3+l]=="number"&&(i[3+l]/=f),o(i)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:o}=e;addScaleCorrector(defaultScaleCorrectors),o&&(n.group&&n.group.add(o),s&&s.register&&i&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:o}=this.props,{projection:l}=s;return l&&(l.isPresent=o,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||frame.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(t){const[e,n]=usePresence$1(),s=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...t,layoutGroup:s,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:n})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(t,e,n){const s=isMotionValue(t)?t:motionValue(t);return s.start(animateMotionValue("",s,e,n)),s.animation}const compareByDepth=(t,e)=>t.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(t,e){const n=time.now(),s=({timestamp:i})=>{const o=i-n;o>=e&&(cancelFrame(s),t(o-e))};return frame.setup(s,!0),()=>cancelFrame(s)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=t=>typeof t=="string"?parseFloat(t):t,isPx=t=>typeof t=="number"||px.test(t);function mixValues(t,e,n,s,i,o){i?(t.opacity=mixNumber$1(0,n.opacity??1,easeCrossfadeIn(s)),t.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(s))):o&&(t.opacity=mixNumber$1(e.opacity??1,n.opacity??1,s));for(let l=0;l<numBorders;l++){const u=`border${borders[l]}Radius`;let d=getRadius(e,u),f=getRadius(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||isPx(d)===isPx(f)?(t[u]=Math.max(mixNumber$1(asNumber(d),asNumber(f),s),0),(percent.test(f)||percent.test(d))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=mixNumber$1(e.rotate||0,n.rotate||0,s))}function getRadius(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$2);function compress(t,e,n){return s=>s<t?0:s>e?1:n(progress(t,e,s))}function copyAxisInto(t,e){t.min=e.min,t.max=e.max}function copyBoxInto(t,e){copyAxisInto(t.x,e.x),copyAxisInto(t.y,e.y)}function copyAxisDeltaInto(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function removePointDelta(t,e,n,s,i){return t-=e,t=scalePoint(t,1/n,s),i!==void 0&&(t=scalePoint(t,1/i,s)),t}function removeAxisDelta(t,e=0,n=1,s=.5,i,o=t,l=t){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=mixNumber$1(o.min,o.max,s);t===o&&(u-=e),t.min=removePointDelta(t.min,e,n,u,i),t.max=removePointDelta(t.max,e,n,u,i)}function removeAxisTransforms(t,e,[n,s,i],o,l){removeAxisDelta(t,e[n],e[s],e[i],e.scale,o,l)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(t,e,n,s){removeAxisTransforms(t.x,e,xKeys,n?n.x:void 0,s?s.x:void 0),removeAxisTransforms(t.y,e,yKeys,n?n.y:void 0,s?s.y:void 0)}function isAxisDeltaZero(t){return t.translate===0&&t.scale===1}function isDeltaZero(t){return isAxisDeltaZero(t.x)&&isAxisDeltaZero(t.y)}function axisEquals(t,e){return t.min===e.min&&t.max===e.max}function boxEquals(t,e){return axisEquals(t.x,e.x)&&axisEquals(t.y,e.y)}function axisEqualsRounded(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function boxEqualsRounded(t,e){return axisEqualsRounded(t.x,e.x)&&axisEqualsRounded(t.y,e.y)}function aspectRatio(t){return calcLength(t.x)/calcLength(t.y)}function axisDeltaEquals(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(t,e,n){let s="";const i=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((i||o||l)&&(s=`translate3d(${i}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:g,rotateY:y,skewX:v,skewY:E}=n;f&&(s=`perspective(${f}px) ${s}`),m&&(s+=`rotate(${m}deg) `),g&&(s+=`rotateX(${g}deg) `),y&&(s+=`rotateY(${y}deg) `),v&&(s+=`skewX(${v}deg) `),E&&(s+=`skewY(${E}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(s+=`scale(${u}, ${d})`),s||"none"}const transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function cancelTreeOptimisedTransformAnimations(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",frame,!(i||o))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(s)}function createProjectionNode({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(l={},u=e==null?void 0:e()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new SubscriptionManager),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=isSVGElement$1(l)&&!isSVGSVGElement(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),t){let m;const g=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=delay(g,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeLayoutChanged:y,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||f.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:w,onLayoutAnimationComplete:A}=f.getProps(),I=!this.targetLayout||!boxEqualsRounded(this.targetLayout,v),D=!g&&y;if(this.options.layoutRoot||this.resumeFrom||D||g&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const V={...getValueTransition(E,"layout"),onPlay:w,onComplete:A};(f.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V),this.setAnimationOrigin(m,D)}else g||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const u=time.now();frameData.delta=clamp$1(0,1e3/60,u-frameData.timestamp),frameData.timestamp=u,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!isDeltaZero(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||hasTransform(this.latestValues)||m)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),roundBox(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:l}=this.options;if(!l)return createBox();const u=l.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:m}=this.root;m&&(translateAxis(u.x,m.offset.x),translateAxis(u.y,m.offset.y))}return u}removeElementScroll(l){var d;const u=createBox();if(copyBoxInto(u,l),(d=this.scroll)!=null&&d.wasRoot)return u;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:g,options:y}=m;m!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&copyBoxInto(u,l),translateAxis(u.x,g.offset.x),translateAxis(u.y,g.offset.y))}return u}applyTransform(l,u=!1){const d=createBox();copyBoxInto(d,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&transformBox(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),hasTransform(m.latestValues)&&transformBox(d,m.latestValues)}return hasTransform(this.latestValues)&&transformBox(d,this.latestValues),d}removeTransform(l){const u=createBox();copyBoxInto(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!hasTransform(f.latestValues))continue;hasScale(f.latestValues)&&f.updateSnapshot();const m=createBox(),g=f.measurePageBox();copyBoxInto(m,g),removeBoxTransforms(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return hasTransform(this.latestValues)&&removeBoxTransforms(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var y;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!(!this.layout||!(m||g))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,v.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var E;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=createBox());const{target:v}=l;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},g=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=createBox(),v=d?d.source:void 0,E=this.layout?this.layout.source:void 0,w=v!==E,A=this.getStack(),I=!A||A.members.length<=1,D=!!(w&&!I&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let V;this.mixTargetDelta=Y=>{const j=Y/1e3;mixAxisDelta(g.x,l.x,j),mixAxisDelta(g.y,l.y,j),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,y,j),V&&boxEquals(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=createBox()),copyBoxInto(V,this.relativeTarget)),w&&(this.animationValues=m,mixValues(m,f,this.latestValues,j,D,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var u,d,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...l,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),l.onUpdate&&l.onUpdate(m)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:m}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||createBox();const g=calcLength(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+g;const y=calcLength(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+y}copyBoxInto(u,d),transformBox(u,m),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new NodeStack),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&resetDistortingTransform("z",l,f,this.animationValues);for(let m=0;m<transformAxes.length;m++)resetDistortingTransform(`rotate${transformAxes[m]}`,l,f,this.animationValues),resetDistortingTransform(`skew${transformAxes[m]}`,l,f,this.animationValues);l.render();for(const m in f)l.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=resolveMotionValue(l==null?void 0:l.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=resolveMotionValue(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,m),d&&(u.transform=d(m,u.transform));const{x:g,y}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,f.animationValues?u.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const v in scaleCorrectors){if(m[v]===void 0)continue;const{correct:E,applyTo:w,isCSSVariable:A}=scaleCorrectors[v],I=u.transform==="none"?m[v]:E(m[v],f);if(w){const D=w.length;for(let V=0;V<D;V++)u[w[V]]=I}else A?this.options.visualElement.renderState.vars[v]=I:u[v]=I}return this.options.layoutId&&(u.pointerEvents=f===this?resolveMotionValue(l==null?void 0:l.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(t){t.updateLayout()}function notifyLayoutUpdate(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=t.layout,{animationType:o}=t.options,l=e.source!==t.layout.source;o==="size"?eachAxis(g=>{const y=l?e.measuredBox[g]:e.layoutBox[g],v=calcLength(y);y.min=s[g].min,y.max=y.min+v}):shouldAnimatePositionOnly(o,e.layoutBox,s)&&eachAxis(g=>{const y=l?e.measuredBox[g]:e.layoutBox[g],v=calcLength(s[g]);y.max=y.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+v)});const u=createDelta();calcBoxDelta(u,s,e.layoutBox);const d=createDelta();l?calcBoxDelta(d,t.applyTransform(i,!0),e.measuredBox):calcBoxDelta(d,s,e.layoutBox);const f=!isDeltaZero(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:v}=g;if(y&&v){const E=createBox();calcRelativePosition(E,e.layoutBox,y.layoutBox);const w=createBox();calcRelativePosition(w,s,v.layoutBox),boxEqualsRounded(E,w)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=E,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function propagateDirtyNodes(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cleanDirtyNodes(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function clearSnapshot(t){t.clearSnapshot()}function clearMeasurements(t){t.clearMeasurements()}function clearIsLayoutDirty(t){t.isLayoutDirty=!1}function resetTransformStyle(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function finishAnimation(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function resolveTargetDelta(t){t.resolveTargetDelta()}function calcProjection(t){t.calcProjection()}function resetSkewAndRotation(t){t.resetSkewAndRotation()}function removeLeadSnapshots(t){t.removeLeadSnapshot()}function mixAxisDelta(t,e,n){t.translate=mixNumber$1(e.translate,0,n),t.scale=mixNumber$1(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function mixAxis(t,e,n,s){t.min=mixNumber$1(e.min,n.min,s),t.max=mixNumber$1(e.max,n.max,s)}function mixBox(t,e,n,s){mixAxis(t.x,e.x,n.x,s),mixAxis(t.y,e.y,n.y,s)}function hasOpacityCrossfade(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$2;function roundAxis(t){t.min=roundPoint(t.min),t.max=roundPoint(t.max)}function roundBox(t){roundAxis(t.x),roundAxis(t.y)}function shouldAnimatePositionOnly(t,e,n){return t==="position"||t==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(n),.2)}function checkNodeWasScrollRoot(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(t,e)=>addDomEvent(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const t=new DocumentProjectionNode({});t.mount(window),t.setOptions({layoutScroll:!0}),rootProjectionNode.current=t}return rootProjectionNode.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=s[i];o&&frame.postRender(()=>o(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(n,s)=>(handleHoverEvent(this.node,s,"Start"),i=>handleHoverEvent(this.node,i,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=s[i];o&&frame.postRender(()=>o(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(n,s)=>(handlePressEvent(this.node,s,"Start"),(i,{success:o})=>handlePressEvent(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=t=>{const e=observerCallbacks.get(t.target);e&&e(t)},fireAllObserverCallbacks=t=>{t.forEach(fireObserverCallback)};function initIntersectionObserver({root:t,...e}){const n=t||document;observers.has(n)||observers.set(n,{});const s=observers.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(fireAllObserverCallbacks,{root:t,...e})),s[i]}function observeIntersection(t,e,n){const s=initIntersectionObserver(e);return observerCallbacks.set(t,n),s.observe(t),()=>{observerCallbacks.delete(t),s.unobserve(t)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:thresholdNames[i]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),y=f?m:g;y&&y(d)};return observeIntersection(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,n))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=t.matches;t.addListener(e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(t,e,n){for(const s in e){const i=e[s],o=n[s];if(isMotionValue(i))t.addValue(s,i);else if(isMotionValue(o))t.addValue(s,motionValue(i,{owner:t}));else if(o!==i)if(t.hasValue(s)){const l=t.getValue(s);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(s);t.addValue(s,motionValue(l!==void 0?l:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=time.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,frame.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=isControllingVariants(n),this.isVariantNode=isVariantNode(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in g){const v=g[y];d[y]!==void 0&&isMotionValue(v)&&v.set(d[y],!1)}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=transformProps.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&frame.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const n=featureDefinitions[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<propEventHandlers.length;s++){const i=propEventHandlers[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,l=e[o];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=motionValue(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(isNumericalString(s)||isZeroValueString(s))?s=parseFloat(s):!findValueType(s)&&complex.test(n)&&(s=getAnimatableNone(e,n)),this.setBaseTarget(e,isMotionValue(s)?s.get():s)),isMotionValue(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const l=resolveVariantFromProps(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);l&&(s=l[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!isMotionValue(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function renderHTML(t,{style:e,vars:n},s,i){Object.assign(t.style,e,i&&i.getProjectionStyles(s));for(const o in n)t.style.setProperty(o,n[o])}function getComputedStyle$3(t){return window.getComputedStyle(t)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,n){var s;if(transformProps.has(n))return(s=this.projection)!=null&&s.isProjecting?defaultTransformValue(n):readTransformValue(e,n);{const i=getComputedStyle$3(e),o=(isCSSVariableName(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return measureViewportBox(e,n)}build(e,n,s){buildHTMLStyles(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return scrapeMotionValuesFromProps$1(e,n,s)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(t,e,n,s){renderHTML(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(camelCaseAttributes.has(i)?i:camelToDash(i),e.attrs[i])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(transformProps.has(n)){const s=getDefaultValueType(n);return s&&s.default||0}return n=camelCaseAttributes.has(n)?n:camelToDash(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return scrapeMotionValuesFromProps(e,n,s)}build(e,n,s){buildSVGAttrs(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,i){renderSVG(e,n,s,i)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(t,e)=>isSVGComponent(t)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:t!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent),navigationItems=[{id:"gameArt",title:"Artes do Jogo",description:"Crie artes para todos os momentos da partida: início, gols, substituições e mais",icon:jsxRuntimeExports.jsx(Brush,{className:"w-8 h-8 text-cyan-600"}),lucideIcon:Brush,roles:["user","root","editor"],isCard:!0,colorClasses:{border:"border-cyan-200",iconBg:"bg-cyan-100",iconColor:"text-cyan-600",button:"bg-cyan-600 hover:bg-cyan-700"}},{id:"escalacoes",title:"Gerador de Escalações",description:"Crie escalações personalizadas com logos, jogadores e informações da partida",icon:jsxRuntimeExports.jsx(LayoutTemplate,{className:"w-8 h-8 text-blue-600"}),lucideIcon:LayoutTemplate,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-red-100 hover:border-red-300",iconBg:"bg-red-100",iconColor:"text-red-600",button:"bg-red-600 hover:bg-red-700"}},{id:"matchday",title:"Dia de Jogo",description:"Crie a arte de anúncio da partida do dia",icon:jsxRuntimeExports.jsx(Sparkles,{className:"w-8 h-8 text-yellow-600"}),lucideIcon:Sparkles,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-blue-100 hover:border-blue-300",iconBg:"bg-blue-100",iconColor:"text-blue-600",button:"bg-blue-600 hover:bg-blue-700"}},{id:"nextGame",title:"Próximo Jogo",description:"Anuncie qual será o próximo confronto",icon:jsxRuntimeExports.jsx(ShieldCheck,{className:"w-8 h-8 text-green-600"}),lucideIcon:ShieldCheck,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-purple-100 hover:border-purple-300",iconBg:"bg-purple-100",iconColor:"text-purple-600",button:"bg-purple-600 hover:bg-purple-700"}},{id:"motm",title:"Melhor da Partida",description:'Destaque o jogador que foi o "Man of the Match"',icon:jsxRuntimeExports.jsx(Trophy,{className:"w-8 h-8 text-orange-600"}),lucideIcon:Trophy,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-yellow-100 hover:border-yellow-300",iconBg:"bg-yellow-100",iconColor:"text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700"}},{id:"fullTime",title:"Fim de Jogo",description:"Gere cards de resultado final com placar, estatísticas e informações da partida",icon:jsxRuntimeExports.jsx(Clock,{className:"w-8 h-8 text-purple-600"}),lucideIcon:Clock,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-green-100 hover:border-green-300",iconBg:"bg-green-100",iconColor:"text-green-600",button:"bg-green-600 hover:bg-green-700"}},{id:"confronto",title:"Confronto Direto",description:"Crie uma arte com o histórico de confrontos, incluindo um gráfico de pizza",icon:jsxRuntimeExports.jsx(Swords,{className:"w-8 h-8 text-red-600"}),lucideIcon:Swords,roles:["user","editor","root"],isCard:!0,colorClasses:{border:"border border-pink-100 hover:border-pink-300",iconBg:"bg-pink-100",iconColor:"text-pink-600",button:"bg-pink-600 hover:bg-pink-700"}},{id:"admin",title:"Administração",description:t=>`Gerencie ${(t==null?void 0:t.role)==="root"?"usuários, ":""}elenco, canais e mais`,icon:jsxRuntimeExports.jsx(Settings,{className:"w-8 h-8 text-teal-600"}),lucideIcon:Settings,roles:["editor","root"],isCard:!0,colorClasses:{border:"border border-teal-100 hover:border-teal-300",iconBg:"bg-teal-100",iconColor:"text-teal-600",button:"bg-teal-600 hover:bg-teal-700"}},{id:"home",title:"Início",description:"Voltar para a tela inicial",icon:jsxRuntimeExports.jsx(House,{className:"w-5 h-5"}),lucideIcon:House,roles:["user","editor","root"],isCard:!1}],getVisibleNavItems=t=>t?navigationItems.filter(e=>e.roles.includes(t.role)):[],MobileMenu=({onNavigate:t,onLogout:e})=>{const{isMenuOpen:n,setIsMenuOpen:s}=useGlobal(),{currentUserData:i}=useUser(),o=getVisibleNavItems(i),l=m=>{t(m),s(!1)},u=()=>{e(),s(!1)},d={visible:{opacity:1},hidden:{opacity:0}},f={open:{x:0},closed:{x:"100%"}};return jsxRuntimeExports.jsx(AnimatePresence,{children:n&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{variants:d,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.3},onClick:()=>s(!1),className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),jsxRuntimeExports.jsxs(motion.div,{variants:f,initial:"closed",animate:"open",exit:"closed",transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white shadow-xl z-50 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"font-display-bold text-lg text-gray-800",children:"Menu"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>s(!1),className:"cursor-pointer",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-grow p-4 space-y-4 overflow-y-auto",children:[jsxRuntimeExports.jsx("h3",{className:"font-display-semibold text-gray-700",children:"Navegação"}),jsxRuntimeExports.jsx("nav",{className:"flex flex-col space-y-2",children:o.map(m=>jsxRuntimeExports.jsx(MenuItem,{icon:m.icon,text:m.title,onClick:()=>l(m.id)},m.id))})]}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-gray-200 mt-auto",children:jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-gray-200 mt-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3",children:jsxRuntimeExports.jsx(User,{className:"w-5 h-5 text-red-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-semibold text-gray-800",children:(i==null?void 0:i.name)||"Usuário"}),(i==null?void 0:i.role)&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 capitalize",children:i.role})]})]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",onClick:u,className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50 font-display-medium cursor-pointer",children:[jsxRuntimeExports.jsx(LogOut,{className:"w-4 h-4 mr-2"}),"Sair"]})]})})]})]})})},MenuItem=({icon:t,text:e,onClick:n})=>jsxRuntimeExports.jsxs("button",{onClick:n,className:"flex items-center w-full text-left p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors duration-200 font-display-medium cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 flex items-center justify-center mr-3 text-gray-500",children:t}),e]}),CreateUserModal=({isOpen:t,onClose:e,onSuccess:n})=>{const{createUser:s,currentUserData:i}=useUser(),{showSuccessAlert:o,showErrorAlert:l}=useConfirmDialog(),[u,d]=reactExports.useState({name:"",email:"",password:"",role:"user",active:!0}),[f,m]=reactExports.useState(!1),g=async v=>{if(v.preventDefault(),!u.name||!u.email||!u.password){await l("Campos obrigatórios","Por favor, preencha todos os campos.");return}if(u.password.length<6){await l("Senha inválida","A senha deve ter pelo menos 6 caracteres.");return}m(!0);try{await s(u),await o("Usuário criado!",`${u.name} foi criado com sucesso.`),d({name:"",email:"",password:"",role:"user",active:!0}),n(),e()}catch(E){let w="Erro ao criar usuário. Tente novamente.";E.code==="auth/email-already-in-use"?w="Este email já está em uso.":E.code==="auth/invalid-email"?w="Email inválido.":E.code==="auth/weak-password"&&(w="Senha muito fraca."),await l("Erro ao criar usuário",w)}finally{m(!1)}},y=(v,E)=>{d(w=>({...w,[v]:E}))};return t?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800",children:"Criar Novo Usuário"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-400 hover:text-gray-600 cursor-pointer",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"name",className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Nome completo"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{id:"name",type:"text",value:u.name,onChange:v=>y("name",v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors font-display",placeholder:"Nome do usuário",disabled:f})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Email"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{id:"email",type:"email",value:u.email,onChange:v=>y("email",v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors font-display",placeholder:"email@exemplo.com",disabled:f})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Senha"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{id:"password",type:"password",value:u.password,onChange:v=>y("password",v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors font-display",placeholder:"Mínimo 6 caracteres",disabled:f})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"role",className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Cargo"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Shield,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsxs("select",{id:"role",value:u.role,onChange:v=>y("role",v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors cursor-pointer font-display",disabled:f,children:[jsxRuntimeExports.jsx("option",{value:"user",children:"Usuário"}),jsxRuntimeExports.jsx("option",{value:"editor",children:"Editor"}),(i==null?void 0:i.role)==="root"&&jsxRuntimeExports.jsx("option",{value:"root",children:"Root"})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1 font-display",children:[u.role==="user"&&"Acesso apenas às aplicações básicas",u.role==="editor"&&"Acesso às aplicações e área administrativa",u.role==="root"&&"Acesso total ao sistema"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{id:"active",type:"checkbox",checked:u.active,onChange:v=>y("active",v.target.checked),className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded cursor-pointer",disabled:f}),jsxRuntimeExports.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-700 cursor-pointer font-display",children:"Usuário ativo (pode fazer login)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",onClick:e,disabled:f,className:"cursor-pointer font-display-medium",children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:f,className:"bg-teal-600 hover:bg-teal-700 text-white cursor-pointer font-display-medium",children:f?jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Criando..."]}):"Criar Usuário"})]})]})]})}):null},UserManagement=()=>{const{users:t,loadUsers:e,updateUserStatus:n,updateUserRole:s,currentUserData:i}=useUser(),{showConfirmDialog:o,showSuccessAlert:l,showErrorAlert:u}=useConfirmDialog(),[d,f]=reactExports.useState(!1),[m,g]=reactExports.useState(!1);reactExports.useEffect(()=>{y()},[]);const y=async()=>{g(!0);try{await e()}catch{await u("Erro","Não foi possível carregar os usuários.")}finally{g(!1)}},v=async V=>{const Y=V.active?"desativar":"ativar";if(await o({title:`Confirmar ${Y}`,text:`Tem certeza que deseja ${Y} o usuário ${V.name}?`,icon:"question",confirmButtonText:Y.charAt(0).toUpperCase()+Y.slice(1),cancelButtonText:"Cancelar"}))try{await n(V.id,!V.active),await l("Sucesso!",`Usuário ${Y}do com sucesso.`)}catch{await u("Erro",`Não foi possível ${Y} o usuário.`)}},E=async(V,Y)=>{if(V.id===(i==null?void 0:i.id)&&Y!=="root"){await u("Erro","Você não pode alterar seu próprio cargo de root.");return}if(await o({title:"Confirmar alteração de cargo",text:`Alterar cargo de ${V.name} para ${Y}?`,icon:"question",confirmButtonText:"Alterar",cancelButtonText:"Cancelar"}))try{await s(V.id,Y),await l("Sucesso!","Cargo alterado com sucesso.")}catch{await u("Erro","Não foi possível alterar o cargo.")}},w=V=>{switch(V){case"root":return jsxRuntimeExports.jsx(Crown,{className:"w-4 h-4 text-yellow-600"});case"editor":return jsxRuntimeExports.jsx(Shield,{className:"w-4 h-4 text-teal-600"});case"user":return jsxRuntimeExports.jsx(User,{className:"w-4 h-4 text-gray-600"})}},A=V=>{switch(V){case"root":return"bg-yellow-100 text-yellow-800";case"editor":return"bg-teal-100 text-teal-800";case"user":return"bg-gray-100 text-gray-800"}},I=V=>V?new Date(V).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Nunca",D=V=>{if(!V)return{text:"Nunca",color:"text-gray-500"};const j=new Date().getTime()-new Date(V).getTime(),H=Math.floor(j/(1e3*60*60*24));return H===0?{text:"Hoje",color:"text-green-600"}:H===1?{text:"Ontem",color:"text-green-500"}:H<=7?{text:`${H} dias`,color:"text-yellow-600"}:H<=30?{text:`${H} dias`,color:"text-orange-600"}:{text:`${H} dias`,color:"text-red-600"}};return m?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600 font-display",children:"Carregando usuários..."})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-extrabold text-gray-800",children:"Gerenciamento de Usuários"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-1 font-display",children:"Gerencie usuários, permissões e acessos do sistema"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>f(!0),className:"bg-teal-600 hover:bg-teal-700 text-white cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Novo Usuário"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(User,{className:"w-8 h-8 text-teal-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-600",children:"Total"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-800",children:t.length})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(UserCheck,{className:"w-8 h-8 text-green-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-600",children:"Ativos"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-800",children:t.filter(V=>V.active).length})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Crown,{className:"w-8 h-8 text-yellow-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-600",children:"Admins"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-800",children:t.filter(V=>V.role==="root"||V.role==="editor").length})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(UserX,{className:"w-8 h-8 text-red-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-600",children:"Inativos"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-800",children:t.filter(V=>!V.active).length})]})]})})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Usuário"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Cargo"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Último Login"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Criado em"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-display-semibold text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(V=>{const Y=D(V.lastLogin);return jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:jsxRuntimeExports.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-display-semibold text-gray-700",children:V.name.charAt(0).toUpperCase()})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-display-medium text-gray-900",children:V.name}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500 font-display",children:V.email})]})]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[w(V.role),jsxRuntimeExports.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-display-semibold rounded-full ${A(V.role)}`,children:V.role})]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-display-semibold rounded-full ${V.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:V.active?"Ativo":"Inativo"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"text-sm font-display",children:[jsxRuntimeExports.jsx("div",{className:`font-display-medium ${Y.color}`,children:Y.text}),V.lastLogin&&jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 font-display",children:I(V.lastLogin)})]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-display",children:I(V.createdAt)}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[(i==null?void 0:i.role)==="root"&&jsxRuntimeExports.jsxs("select",{value:V.role,onChange:j=>E(V,j.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 cursor-pointer font-display",disabled:V.id===(i==null?void 0:i.id),children:[jsxRuntimeExports.jsx("option",{value:"user",children:"user"}),jsxRuntimeExports.jsx("option",{value:"editor",children:"editor"}),jsxRuntimeExports.jsx("option",{value:"root",children:"root"})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>v(V),className:`cursor-pointer ${V.active?"text-red-600 hover:text-red-700 hover:bg-red-50":"text-green-600 hover:text-green-700 hover:bg-green-50"}`,disabled:V.id===(i==null?void 0:i.id),children:V.active?jsxRuntimeExports.jsx(UserX,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(UserCheck,{className:"w-4 h-4"})})]})})]},V.id)})})]})})}),jsxRuntimeExports.jsx(CreateUserModal,{isOpen:d,onClose:()=>f(!1),onSuccess:y})]})},BaseImagesManager=()=>{const{baseImages:t,loading:e,uploadBaseImage:n,removeBaseImage:s,getImageByIdentifier:i,getImagesBySection:o}=useImages(),{showConfirmDialog:l}=useConfirmDialog(),[u,d]=reactExports.useState(null),[f,m]=reactExports.useState(IMAGE_SECTIONS.ESCALACAO),g=async(D,V,Y)=>{d({section:V,type:Y});try{const H=await n(D,V,Y);H.success||alert(`Erro no upload: ${H.error}`)}catch{alert("Erro inesperado no upload")}finally{d(null)}},y=async(D,V)=>{const Y=getSectionConfig(D),j=getImageTypeConfig(V);if(await l({title:"Deletar Imagem",text:`Tem certeza que deseja deletar a imagem ${j.label} da seção ${Y.label}? Esta ação não pode ser desfeita.`,confirmButtonText:"Deletar",cancelButtonText:"Cancelar"})){const S=await s(D,V);S.success||alert(`Erro ao deletar: ${S.error}`)}},v=(D,V)=>(u==null?void 0:u.section)===D&&(u==null?void 0:u.type)===V,E=({section:D,type:V})=>{const Y=i({section:D,type:V}),j=v(D,V),H=getImageTypeConfig(V);return jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-semibold text-gray-800 mb-2",children:H.label}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:H.description}),jsxRuntimeExports.jsx("span",{className:"inline-block mt-1 px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded font-display-medium",children:H.dimensions})]}),jsxRuntimeExports.jsx("div",{className:"mb-4",children:Y?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:Y.url,alt:`Imagem ${H.label}`,className:"w-full h-32 object-cover rounded-lg border border-gray-300"}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-500 bg-white rounded-full"})})]}):jsxRuntimeExports.jsx("div",{className:"w-full h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Image$1,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 font-display",children:"Nenhuma imagem"})]})})}),Y&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-left bg-gray-50 rounded-lg p-3",children:[jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 font-display",children:[jsxRuntimeExports.jsx("strong",{children:"Arquivo:"})," ",Y.filename]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 font-display",children:[jsxRuntimeExports.jsx("strong",{children:"Upload:"})," ",Y.uploadedAt.toLocaleDateString("pt-BR")]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:S=>{var P;const T=(P=S.target.files)==null?void 0:P[0];T&&g(T,D,V)},className:"hidden",id:`upload-${D}-${V}`,disabled:j}),jsxRuntimeExports.jsx("label",{htmlFor:`upload-${D}-${V}`,className:`w-full inline-flex items-center justify-center px-4 py-2 rounded-lg font-display-medium cursor-pointer transition-colors ${j?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-teal-600 hover:bg-teal-700 text-white"}`,children:j?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"}),"Enviando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4 mr-2"}),Y?"Substituir":"Enviar"]})})]}),Y&&!j&&jsxRuntimeExports.jsxs(Button,{onClick:()=>y(D,V),variant:"outline",size:"sm",className:"w-full text-red-600 border-red-300 hover:bg-red-50 cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4 mr-2"}),"Deletar"]})]})]})})},w=({section:D})=>{const V=getSectionConfig(D),Y=getAllowedTypesForSection(D),j=o(D);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-bold text-gray-800 mb-2",children:V.label}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:V.description})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Y.map(H=>jsxRuntimeExports.jsx(E,{section:D,type:H},`${D}-${H}`))}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("h4",{className:"font-display-semibold text-gray-800 mb-2",children:["Estatísticas - ",V.label]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-teal-600",children:j.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Configuradas"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-600",children:Y.length-j.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Pendentes"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-display-bold text-green-600",children:[Math.round(j.length/Y.length*100),"%"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Completo"})]})]})]})]})};if(e)return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx(Loader,{className:"w-8 h-8 animate-spin text-teal-600"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600 font-display",children:"Carregando imagens..."})]});const A=t.length,I=Object.values(SECTIONS_CONFIG).reduce((D,V)=>D+V.allowedTypes.length,0);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800 mb-2",children:"Gerenciar Imagens por Seção"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Gerencie as imagens base organizadas por seção. Cada seção tem tipos específicos de imagem permitidos."})]}),!1,jsxRuntimeExports.jsx("div",{className:"border-b border-gray-200",children:jsxRuntimeExports.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:Object.values(IMAGE_SECTIONS).map(D=>{const V=getSectionConfig(D),Y=o(D),j=getAllowedTypesForSection(D),H=f===D,S=j.length>0?Math.round(Y.length/j.length*100):0;return jsxRuntimeExports.jsx("button",{onClick:()=>m(D),className:`whitespace-nowrap py-2 px-1 border-b-2 font-display-medium text-sm transition-colors ${H?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} cursor-pointer`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{children:V.label}),jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-display-medium ${S===100?"bg-green-100 text-green-800":S>0?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[Y.length,"/",j.length]})]})},D)})})}),jsxRuntimeExports.jsx(w,{section:f}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-display-semibold text-gray-800 mb-2",children:"Estatísticas Gerais"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-teal-600",children:A-3}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Total Configuradas"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-600",children:I-(A-3)}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Total Pendentes"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-display-bold text-green-600",children:[I>0?Math.round((A-3)/I*100):0,"%"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Progresso Geral"})]})]})]})]})},PlayerImageManager=({player:t,onClose:e})=>{const{uploadPlayerImage:n,removePlayerImage:s}=useSquad(),[i,o]=reactExports.useState(!1),[l,u]=reactExports.useState(!1),d=async E=>{if(!E.type.startsWith("image/")){alert("Por favor, selecione apenas arquivos de imagem.");return}if(E.size>10*1024*1024){alert("Arquivo muito grande. Máximo 10MB.");return}o(!0);try{const w=await n(t.id,E);w.success||alert(w.error||"Erro ao fazer upload da imagem")}catch(w){console.error("Erro no upload:",w),alert("Erro interno no upload da imagem")}finally{o(!1)}},f=E=>{E.preventDefault(),u(!1);const w=Array.from(E.dataTransfer.files);w.length>0&&d(w[0])},m=E=>{const w=Array.from(E.target.files||[]);w.length>0&&d(w[0])},g=async E=>{if(await showConfirmDialog({title:"Remover Imagem",text:"Tem certeza que deseja remover esta imagem?",confirmButtonText:"Remover",cancelButtonText:"Cancelar"})){const A=await s(t.id,E);A.success||alert(A.error||"Erro ao remover imagem")}},y=t.imgUrl||[],v=y.length<2;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-display-bold text-gray-800",children:"Imagens do Jogador"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 font-display",children:[t.number," - ",t.name]})]}),jsxRuntimeExports.jsx(Button,{onClick:e,variant:"ghost",size:"sm",className:"cursor-pointer",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[y.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-display-semibold text-gray-800 mb-4",children:["Imagens Atuais (",y.length,"/2)"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map((E,w)=>jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:E,alt:`${t.name} - Imagem ${w+1}`,className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>g(E),variant:"destructive",size:"sm",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]},w))})]}),v&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-4",children:y.length===0?"Adicionar Imagens":"Adicionar Mais Uma Imagem"}),jsxRuntimeExports.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${l?"border-red-400 bg-red-50":i?"border-gray-300 bg-gray-50":"border-gray-300 hover:border-red-400 hover:bg-red-50 cursor-pointer"}`,onDrop:f,onDragOver:E=>{E.preventDefault(),u(!0)},onDragLeave:()=>u(!1),onClick:()=>{var E;i||(E=document.getElementById("image-upload"))==null||E.click()},children:i?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(Loader,{className:"w-8 h-8 text-red-600 animate-spin mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Fazendo upload..."})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(Upload,{className:"w-8 h-8 text-gray-400 mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display-medium mb-1",children:"Clique ou arraste uma imagem aqui"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 font-display",children:"PNG, JPG até 10MB"})]})}),jsxRuntimeExports.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:m,className:"hidden",disabled:i})]}),!v&&jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-yellow-600 mr-2"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-800 font-display-medium",children:"Limite máximo de 2 imagens atingido"})]}),jsxRuntimeExports.jsx("p",{className:"text-yellow-700 text-sm mt-1 font-display",children:"Remova uma imagem existente para adicionar uma nova."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-medium text-gray-800 mb-2",children:"Dicas:"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 font-display",children:[jsxRuntimeExports.jsx("li",{children:"• Cada jogador pode ter até 2 imagens"}),jsxRuntimeExports.jsx("li",{children:"• Formatos aceitos: PNG, JPG, WebP"}),jsxRuntimeExports.jsx("li",{children:"• Tamanho máximo: 10MB por imagem"}),jsxRuntimeExports.jsx("li",{children:"• Imagens são armazenadas no ImgBB"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:jsxRuntimeExports.jsx(Button,{onClick:e,className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer font-display-medium",children:"Concluído"})})]})})},SquadManager=()=>{const{players:t,loading:e,addPlayer:n,updatePlayer:s,deletePlayer:i,initializeSquad:o,getPlayersByPosition:l}=useSquad(),[u,d]=reactExports.useState(""),[f,m]=reactExports.useState("all"),[g,y]=reactExports.useState(!1),[v,E]=reactExports.useState(null),[w,A]=reactExports.useState(null),I=t.filter(S=>{const T=S.name.toLowerCase().includes(u.toLowerCase())||S.number.includes(u),P=f==="all"||S.position===f;return T&&P}),D={GOL:l("GOL").length,DEF:l("DEF").length,MEI:l("MEI").length,ATA:l("ATA").length},V=async S=>{const T=await n(S);T.success?y(!1):alert(T.error||"Erro ao criar jogador")},Y=async S=>{if(!v)return;const T=await s(v.id,S);T.success?E(null):alert(T.error||"Erro ao atualizar jogador")},j=async S=>{if(await showConfirmDialog({title:"Deletar Jogador",text:`Tem certeza que deseja deletar ${S.name}?`,confirmButtonText:"Deletar",cancelButtonText:"Cancelar"})){const P=await i(S.id);P.success||alert(P.error||"Erro ao deletar jogador")}},H=async()=>{if(await showConfirmDialog({title:"Inicializar Elenco",text:"Isso irá adicionar o elenco oficial do Liverpool. Continuar?",confirmButtonText:"Inicializar",cancelButtonText:"Cancelar"})){const T=await o();T.success||alert(T.error||"Erro ao inicializar elenco")}};return e?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx(Loader,{className:"w-8 h-8 animate-spin text-green-600"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600 font-display",children:"Carregando elenco..."})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800",children:"Elenco do Liverpool"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Gerencie os jogadores do elenco oficial"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[t.length===0&&jsxRuntimeExports.jsxs(Button,{onClick:H,className:"bg-green-600 hover:bg-green-700 text-white cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Users,{className:"w-4 h-4 mr-2"}),"Inicializar Elenco"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>y(!0),className:"bg-green-600 hover:bg-green-700 text-white cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Novo Jogador"]})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(D).map(([S,T])=>jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:PLAYER_POSITIONS[S]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-display-bold text-gray-800",children:T})]}),jsxRuntimeExports.jsx("div",{className:`w-3 h-3 rounded-full ${POSITION_COLORS[S].split(" ")[0]}`})]})},S))}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar por nome ou número...",value:u,onChange:S=>d(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display"})]})}),jsxRuntimeExports.jsxs("select",{value:f,onChange:S=>m(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"Todas as posições"}),Object.entries(PLAYER_POSITIONS).map(([S,T])=>jsxRuntimeExports.jsx("option",{value:S,children:T},S))]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:I.length===0?jsxRuntimeExports.jsxs("div",{className:"p-8 text-center",children:[jsxRuntimeExports.jsx(Users,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-medium text-gray-800 mb-2",children:t.length===0?"Nenhum jogador cadastrado":"Nenhum jogador encontrado"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:t.length===0?'Clique em "Inicializar Elenco" para adicionar o elenco oficial do Liverpool':"Tente ajustar os filtros de busca"})]}):jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Jogador"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Número"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Posição"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Imagens"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(S=>{var T;return jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("div",{className:"font-display-medium text-gray-800",children:S.name})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-display-medium bg-gray-100 text-gray-800",children:["#",S.number]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-display-medium ${POSITION_COLORS[S.position]}`,children:PLAYER_POSITIONS[S.position]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 font-display mr-2",children:[((T=S.imgUrl)==null?void 0:T.length)||0,"/2"]}),jsxRuntimeExports.jsx(Button,{onClick:()=>A(S),variant:"ghost",size:"sm",className:"cursor-pointer",children:jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4"})})]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>E(S),variant:"ghost",size:"sm",className:"cursor-pointer",children:jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>j(S),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 cursor-pointer",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})})]},S.id)})})]})})}),g&&jsxRuntimeExports.jsx(CreatePlayerModal,{onClose:()=>y(!1),onSubmit:V}),v&&jsxRuntimeExports.jsx(CreatePlayerModal,{player:v,onClose:()=>E(null),onSubmit:Y}),w&&jsxRuntimeExports.jsx(PlayerImageManager,{player:w,onClose:()=>A(null)})]})},CreatePlayerModal=({player:t,onClose:e,onSubmit:n})=>{const{isNumberTaken:s}=useSquad(),[i,o]=reactExports.useState({name:(t==null?void 0:t.name)||"",number:(t==null?void 0:t.number)||"",position:(t==null?void 0:t.position)||"ATA"}),[l,u]=reactExports.useState({}),d=()=>{const m={};if(i.name.trim()?i.name.trim().length<2&&(m.name="Nome deve ter pelo menos 2 caracteres"):m.name="Nome é obrigatório",!i.number.trim())m.number="Número é obrigatório";else{const g=parseInt(i.number.trim());isNaN(g)||g<1||g>99?m.number="Número deve ser entre 1 e 99":s(i.number.trim(),t==null?void 0:t.id)&&(m.number="Este número já está em uso")}return u(m),Object.keys(m).length===0},f=m=>{m.preventDefault(),d()&&n(i)};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-display-bold text-gray-800",children:t?"Editar Jogador":"Novo Jogador"}),jsxRuntimeExports.jsx(Button,{onClick:e,variant:"ghost",size:"sm",className:"cursor-pointer",children:"×"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Nome"}),jsxRuntimeExports.jsx("input",{type:"text",value:i.name,onChange:m=>o(g=>({...g,name:m.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display ${l.name?"border-red-500":"border-gray-300"}`,placeholder:"Nome do jogador"}),l.name&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:l.name})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Número"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"99",value:i.number,onChange:m=>o(g=>({...g,number:m.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display ${l.number?"border-red-500":"border-gray-300"}`,placeholder:"Número da camisa"}),l.number&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:l.number})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Posição"}),jsxRuntimeExports.jsx("select",{value:i.position,onChange:m=>o(g=>({...g,position:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display",children:Object.entries(PLAYER_POSITIONS).map(([m,g])=>jsxRuntimeExports.jsx("option",{value:m,children:g},m))})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",onClick:e,variant:"outline",className:"cursor-pointer font-display-medium",children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white cursor-pointer font-display-medium",children:t?"Atualizar":"Criar"})]})]})]})})},CHANNEL_TYPES={TV_ABERTA:"TV Aberta",TV_FECHADA:"TV Fechada",STREAMING:"Streaming"},ChannelManager=()=>{const{channels:t,loading:e,addChannel:n,updateChannel:s,deleteChannel:i}=useChannels(),[o,l]=reactExports.useState(""),[u,d]=reactExports.useState(!1),[f,m]=reactExports.useState(null),g=t.filter(w=>w.name.toLowerCase().includes(o.toLowerCase())),y=(w=null)=>{m(w),d(!0)},v=()=>{m(null),d(!1)},E=async w=>{if(await showConfirmDialog({title:"Deletar Canal",text:`Tem certeza que deseja deletar o canal ${w.name}?`,confirmButtonText:"Deletar",cancelButtonText:"Cancelar"})){const I=await i(w.id,w.name);I.success||alert(I.error||"Erro ao deletar canal")}};return e?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx(Loader,{className:"w-8 h-8 animate-spin text-green-600"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600 font-display",children:"Carregando canais..."})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800",children:"Canais de TV"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Gerencie os canais para exibição nos jogos"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>y(),className:"bg-green-600 hover:bg-green-700 text-white cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Novo Canal"]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar por nome do canal...",value:o,onChange:w=>l(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-display"})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:g.length===0?jsxRuntimeExports.jsxs("div",{className:"p-8 text-center",children:[jsxRuntimeExports.jsx(Tv,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-medium text-gray-800 mb-2",children:"Nenhum canal encontrado"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:t.length===0?'Clique em "Novo Canal" para começar.':"Tente ajustar sua busca."})]}):jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Logo"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-display-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(w=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:w.logoUrl?jsxRuntimeExports.jsx("img",{src:w.logoUrl,alt:`Logo ${w.name}`,className:"h-8 w-auto object-contain"}):jsxRuntimeExports.jsx("div",{className:"h-8 w-12 bg-gray-100 flex items-center justify-center rounded",children:jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4 text-gray-400"})})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-display-medium text-gray-800",children:w.name}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-display",children:CHANNEL_TYPES[w.type]}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>y(w),variant:"ghost",size:"sm",children:jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>E(w),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})})]},w.id))})]})})}),u&&jsxRuntimeExports.jsx(ChannelModal,{channel:f,onClose:v,addChannel:n,updateChannel:s})]})},ChannelModal=({channel:t,onClose:e,addChannel:n,updateChannel:s})=>{const[i,o]=reactExports.useState({name:(t==null?void 0:t.name)||"",type:(t==null?void 0:t.type)||"TV_FECHADA"}),[l,u]=reactExports.useState(null),[d,f]=reactExports.useState((t==null?void 0:t.logoUrl)||null),[m,g]=reactExports.useState(""),y=reactExports.useRef(null),[v,E]=reactExports.useState(!1);reactExports.useEffect(()=>(t!=null&&t.logoUrl?f(t.logoUrl):!t&&!l&&f(null),()=>{d&&d.startsWith("blob:")&&URL.revokeObjectURL(d)}),[t,l]);const w=H=>{H?H.type.startsWith("image/png")||H.type.startsWith("image/jpeg")?(u(H),d&&d.startsWith("blob:")&&URL.revokeObjectURL(d),f(URL.createObjectURL(H)),g("")):(g("Por favor, selecione um arquivo de imagem PNG ou JPEG."),u(null),f((t==null?void 0:t.logoUrl)||null)):(u(null),f((t==null?void 0:t.logoUrl)||null))},A=H=>{var S;w((S=H.target.files)==null?void 0:S[0])},I=H=>{H.preventDefault(),E(!0)},D=H=>{var S;H.preventDefault(),E(!1),w((S=H.dataTransfer.files)==null?void 0:S[0])},V=H=>{H.preventDefault(),E(!0)},Y=H=>{H.preventDefault(),E(!1)},j=async H=>{if(H.preventDefault(),!i.name.trim()){g("O nome do canal é obrigatório.");return}if(!t&&!l){g("A logo é obrigatória para um novo canal.");return}if(t&&!l&&!d){g("A logo é obrigatória. Por favor, mantenha a logo existente ou faça upload de uma nova.");return}g("");let S;t?S=await s(t.id,i,l===null&&d?void 0:l||void 0):S=await n(i,l),S.success?e():g(S.error||"Ocorreu um erro.")};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 font-inter",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-800",children:t?"Editar Canal":"Novo Canal"}),jsxRuntimeExports.jsx(Button,{onClick:e,variant:"ghost",size:"sm",children:"×"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Canal"}),jsxRuntimeExports.jsx("input",{type:"text",value:i.name,onChange:H=>o(S=>({...S,name:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Ex: ESPN"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Canal"}),jsxRuntimeExports.jsx("select",{value:i.type,onChange:H=>o(S=>({...S,type:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:Object.entries(CHANNEL_TYPES).map(([H,S])=>jsxRuntimeExports.jsx("option",{value:H,children:S},H))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo do Canal (PNG transparente)"}),jsxRuntimeExports.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer 
                         ${v?"border-green-500 bg-green-50":"border-gray-300 hover:border-green-500"}`,onClick:()=>{var H;return(H=y.current)==null?void 0:H.click()},onDragOver:I,onDrop:D,onDragEnter:V,onDragLeave:Y,children:[jsxRuntimeExports.jsx("input",{type:"file",ref:y,onChange:A,accept:"image/png, image/jpeg",className:"hidden"}),d?jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("img",{src:d,alt:"Pré-visualização",className:"max-h-24 mx-auto rounded-md shadow-sm"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),f(null),u(null),g("")},className:"absolute top-0 right-0 -mt-2 -mr-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity duration-200","aria-label":"Remover logo",children:"×"})]}):jsxRuntimeExports.jsxs("div",{className:"text-gray-500",children:[jsxRuntimeExports.jsx(Upload,{className:"mx-auto h-8 w-8 mb-2"}),jsxRuntimeExports.jsx("p",{children:v?"Solte o arquivo aqui!":"Clique para fazer upload ou arraste e solte"}),jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Recomendado: PNG sem fundo"})]})]})]}),m&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm font-medium",children:m}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",onClick:e,variant:"outline",className:"font-medium",children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-medium",children:t?"Atualizar":"Criar Canal"})]})]})]})})},AliasModal=({alias:t,onClose:e,onSave:n})=>{const[s,i]=reactExports.useState({name:(t==null?void 0:t.name)||"",alias:(t==null?void 0:t.alias)||""}),[o,l]=reactExports.useState(""),u=d=>{if(d.preventDefault(),!s.name.trim()||!s.alias.trim()){l("Preencha ambos os campos.");return}n({...t,...s}),e()};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-gray-800",children:t?"Editar Alias":"Novo Alias"}),jsxRuntimeExports.jsxs("form",{onSubmit:u,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nome"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.name,onChange:d=>i(f=>({...f,name:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Nome original"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Alias"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.alias,onChange:d=>i(f=>({...f,alias:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Nome alternativo"})]}),o&&jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600",children:o}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:e,children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"bg-green-600 text-white",children:"Salvar"})]})]})]})})},AliasManager=()=>{const{aliases:t,loading:e,addAlias:n,updateAlias:s,deleteAlias:i}=useAliases(),[o,l]=reactExports.useState(""),[u,d]=reactExports.useState(null),f=t.filter(g=>g.name.toLowerCase().includes(o.toLowerCase())),m=async(g,y)=>{await showConfirmDialog({title:"Deletar Alias",text:`Deseja mesmo deletar o alias de "${y}"?`,confirmButtonText:"Deletar",cancelButtonText:"Cancelar"})&&await i(g,y)};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800",children:"Aliases"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Mapeie nomes alternativos para entidades"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>d({name:"",alias:""}),className:"bg-green-600 text-white",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Novo Alias"]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white p-4 border rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar por nome...",value:o,onChange:g=>l(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]})}),e?jsxRuntimeExports.jsx("div",{className:"flex justify-center py-8",children:jsxRuntimeExports.jsx(Loader,{className:"w-6 h-6 animate-spin text-green-600"})}):jsxRuntimeExports.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:f.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(User,{className:"w-12 h-12 mx-auto mb-2"}),"Nenhum alias encontrado."]}):jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 text-xs text-gray-500 uppercase",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left",children:"Nome"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left",children:"Alias"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right",children:"Ações"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y",children:f.sort((g,y)=>g.alias.localeCompare(y.alias)).map(g=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-3",children:g.name}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3",children:g.alias}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-3 text-right space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>d(g),children:jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>m(g.id,g.name),children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})]},g.id))})]})}),u&&jsxRuntimeExports.jsx(AliasModal,{alias:u,onClose:()=>d(null),onSave:async g=>{g.id?await s(g):await n(g)}})]})};function SectionHeader({onBack:t,setCurrentView:e,setIsMenuOpen:n,title:s}){const{currentUser:i,logout:o}=useAuth(),{currentUserData:l}=useUser(),u=()=>(l==null?void 0:l.name)||(i==null?void 0:i.displayName)||"Usuário",d=m=>{e(m)},f=async()=>{await showConfirmDialog({title:"Confirmar logout",text:"Tem certeza que deseja sair?",icon:"question",confirmButtonText:"Sair",cancelButtonText:"Cancelar"})&&await o()};return jsxRuntimeExports.jsxs("header",{className:"bg-white shadow-sm border-b border-gray-200",children:[jsxRuntimeExports.jsx(MobileMenu,{onNavigate:d,onLogout:f}),jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center h-16",children:[t?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button,{onClick:t,variant:"ghost",size:"sm",className:"mr-4 cursor-pointer",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Voltar"]}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-display-bold text-gray-800",children:s})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("img",{src:caminhantesClock,alt:"Caminhantes",className:"w-10 h-10 mr-3"}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-display-bold text-gray-800",children:s})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-gray-600 font-display",children:[jsxRuntimeExports.jsx(User,{className:"w-4 h-4 mr-1"}),u(),(l==null?void 0:l.role)&&jsxRuntimeExports.jsx("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full font-display-medium",children:l.role})]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:f,className:"text-red-600 hover:text-red-700 hover:bg-red-50 cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(LogOut,{className:"w-4 h-4 mr-1"}),"Sair"]})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",className:"cursor-pointer",onClick:()=>n(!0),children:jsxRuntimeExports.jsx(Menu,{className:"w-5 h-5"})})]})]})})]})}const AdminDashboard=({onBack:t,onNavigate:e,onLogout:n})=>{const[s,i]=reactExports.useState("home"),{currentUserData:o}=useUser(),{setIsMenuOpen:l}=useGlobal(),u=(v,E,w)=>s!==v?null:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 to-teal-100",children:[jsxRuntimeExports.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-30",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>i("home"),variant:"ghost",size:"sm",className:"mr-4 cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Voltar"]}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-display-bold text-gray-800",children:E})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>l(!0),children:jsxRuntimeExports.jsx(Menu,{className:"w-5 h-5"})})]})})}),jsxRuntimeExports.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:jsxRuntimeExports.jsx(w,{})})]}),d=u("users","Administração de Usuários",UserManagement),f=u("images","Imagens Base",BaseImagesManager),m=u("squad","Elenco do Liverpool",SquadManager),g=u("channels","Canais de TV",ChannelManager),y=u("alias","Aliases",AliasManager);return s!=="home"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MobileMenu,{onNavigate:e,onLogout:n}),d||f||m||g||y||null]}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 to-teal-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:e,setIsMenuOpen:l,title:"Painel Administrativo"}),jsxRuntimeExports.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-display-extrabold text-gray-800 mb-4",children:"Administração do Sistema"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 font-display",children:"Selecione uma área para gerenciar."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[(o==null?void 0:o.role)==="root"&&jsxRuntimeExports.jsx(AdminCard,{title:"Usuários",description:"Gerencie usuários e permissões.",icon:jsxRuntimeExports.jsx(Users,{className:"w-8 h-8 text-teal-600"}),onClick:()=>i("users")}),(o==null?void 0:o.role)==="root"&&jsxRuntimeExports.jsx(AdminCard,{title:"Imagens Base",description:"Configure as imagens de fundo.",icon:jsxRuntimeExports.jsx(Image$1,{className:"w-8 h-8 text-teal-600"}),onClick:()=>i("images")}),(o==null?void 0:o.role)==="root"&&jsxRuntimeExports.jsx(AdminCard,{title:"Aliases",description:"Configure nomes alternativos para dados.",icon:jsxRuntimeExports.jsx(Link2,{className:"w-8 h-8 text-teal-600"}),onClick:()=>i("alias")}),((o==null?void 0:o.role)==="root"||(o==null?void 0:o.role)==="editor")&&jsxRuntimeExports.jsx(AdminCard,{title:"Elenco Liverpool",description:"Gerencie os jogadores do elenco.",icon:jsxRuntimeExports.jsx(Database,{className:"w-8 h-8 text-teal-600"}),onClick:()=>i("squad")}),((o==null?void 0:o.role)==="root"||(o==null?void 0:o.role)==="editor")&&jsxRuntimeExports.jsx(AdminCard,{title:"Canais de TV",description:"Adicione e gerencie os canais.",icon:jsxRuntimeExports.jsx(Tv,{className:"w-8 h-8 text-teal-600"}),onClick:()=>i("channels")})]})]})]})},AdminCard=({title:t,description:e,icon:n,onClick:s})=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all cursor-pointer border border-gray-200 hover:border-teal-300 flex flex-col",onClick:s,children:[jsxRuntimeExports.jsxs("div",{className:"text-center flex-grow",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-semibold text-gray-800 mb-2",children:t}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4 font-display",children:e})]}),jsxRuntimeExports.jsx(Button,{className:"w-full mt-auto bg-teal-600 hover:bg-teal-700 text-white cursor-pointer font-display-medium",children:"Gerenciar"})]});var domToImage={exports:{}},hasRequiredDomToImage;function requireDomToImage(){return hasRequiredDomToImage||(hasRequiredDomToImage=1,function(t){(function(e){var n=V(),s=Y(),i=j(),o=H(),l={imagePlaceholder:void 0,cacheBust:!1},u={toSvg:d,toPng:m,toJpeg:g,toBlob:y,toPixelData:f,impl:{fontFaces:i,images:o,util:n,inliner:s,options:{}}};t.exports=u;function d(S,T){return T=T||{},v(T),Promise.resolve(S).then(function(U){return w(U,T.filter,!0)}).then(A).then(I).then(P).then(function(U){return D(U,T.width||n.width(S),T.height||n.height(S))});function P(U){return T.bgcolor&&(U.style.backgroundColor=T.bgcolor),T.width&&(U.style.width=T.width+"px"),T.height&&(U.style.height=T.height+"px"),T.style&&Object.keys(T.style).forEach(function(J){U.style[J]=T.style[J]}),U}}function f(S,T){return E(S,T||{}).then(function(P){return P.getContext("2d").getImageData(0,0,n.width(S),n.height(S)).data})}function m(S,T){return E(S,T||{}).then(function(P){return P.toDataURL()})}function g(S,T){return T=T||{},E(S,T).then(function(P){return P.toDataURL("image/jpeg",T.quality||1)})}function y(S,T){return E(S,T||{}).then(n.canvasToBlob)}function v(S){typeof S.imagePlaceholder>"u"?u.impl.options.imagePlaceholder=l.imagePlaceholder:u.impl.options.imagePlaceholder=S.imagePlaceholder,typeof S.cacheBust>"u"?u.impl.options.cacheBust=l.cacheBust:u.impl.options.cacheBust=S.cacheBust}function E(S,T){return d(S,T).then(n.makeImage).then(n.delay(100)).then(function(U){var J=P(S);return J.getContext("2d").drawImage(U,0,0),J});function P(U){var J=document.createElement("canvas");if(J.width=T.width||n.width(U),J.height=T.height||n.height(U),T.bgcolor){var W=J.getContext("2d");W.fillStyle=T.bgcolor,W.fillRect(0,0,J.width,J.height)}return J}}function w(S,T,P){if(!P&&T&&!T(S))return Promise.resolve();return Promise.resolve(S).then(U).then(function(K){return J(S,K,T)}).then(function(K){return W(S,K)});function U(K){return K instanceof HTMLCanvasElement?n.makeImage(K.toDataURL()):K.cloneNode(!1)}function J(K,le,ge){var oe=K.childNodes;if(oe.length===0)return Promise.resolve(le);return ce(le,n.asArray(oe),ge).then(function(){return le});function ce(ie,Ne,re){var _e=Promise.resolve();return Ne.forEach(function(Se){_e=_e.then(function(){return w(Se,re)}).then(function(Re){Re&&ie.appendChild(Re)})}),_e}}function W(K,le){if(!(le instanceof Element))return le;return Promise.resolve().then(ge).then(oe).then(ce).then(ie).then(function(){return le});function ge(){Ne(window.getComputedStyle(K),le.style);function Ne(re,_e){re.cssText?_e.cssText=re.cssText:Se(re,_e);function Se(Re,Be){n.asArray(Re).forEach(function(Ie){Be.setProperty(Ie,Re.getPropertyValue(Ie),Re.getPropertyPriority(Ie))})}}}function oe(){[":before",":after"].forEach(function(re){Ne(re)});function Ne(re){var _e=window.getComputedStyle(K,re),Se=_e.getPropertyValue("content");if(Se===""||Se==="none")return;var Re=n.uid();le.className=le.className+" "+Re;var Be=document.createElement("style");Be.appendChild(Ie(Re,re,_e)),le.appendChild(Be);function Ie(je,Te,ke){var Ge="."+je+":"+Te,we=ke.cssText?de(ke):me(ke);return document.createTextNode(Ge+"{"+we+"}");function de(ue){var se=ue.getPropertyValue("content");return ue.cssText+" content: "+se+";"}function me(ue){return n.asArray(ue).map(se).join("; ")+";";function se(he){return he+": "+ue.getPropertyValue(he)+(ue.getPropertyPriority(he)?" !important":"")}}}}}function ce(){K instanceof HTMLTextAreaElement&&(le.innerHTML=K.value),K instanceof HTMLInputElement&&le.setAttribute("value",K.value)}function ie(){le instanceof SVGElement&&(le.setAttribute("xmlns","http://www.w3.org/2000/svg"),le instanceof SVGRectElement&&["width","height"].forEach(function(Ne){var re=le.getAttribute(Ne);re&&le.style.setProperty(Ne,re)}))}}}function A(S){return i.resolveAll().then(function(T){var P=document.createElement("style");return S.appendChild(P),P.appendChild(document.createTextNode(T)),S})}function I(S){return o.inlineAll(S).then(function(){return S})}function D(S,T,P){return Promise.resolve(S).then(function(U){return U.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(U)}).then(n.escapeXhtml).then(function(U){return'<foreignObject x="0" y="0" width="100%" height="100%">'+U+"</foreignObject>"}).then(function(U){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+T+'" height="'+P+'">'+U+"</svg>"}).then(function(U){return"data:image/svg+xml;charset=utf-8,"+U})}function V(){return{escape:ie,parseExtension:T,mimeType:P,dataAsUrl:ce,isDataUrl:U,canvasToBlob:W,resolveUrl:K,getAndEncode:oe,uid:le(),delay:Ne,asArray:re,escapeXhtml:_e,makeImage:ge,width:Se,height:Re};function S(){var Ie="application/font-woff",je="image/jpeg";return{woff:Ie,woff2:Ie,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:je,jpeg:je,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function T(Ie){var je=/\.([^\.\/]*?)$/g.exec(Ie);return je?je[1]:""}function P(Ie){var je=T(Ie).toLowerCase();return S()[je]||""}function U(Ie){return Ie.search(/^(data:)/)!==-1}function J(Ie){return new Promise(function(je){for(var Te=window.atob(Ie.toDataURL().split(",")[1]),ke=Te.length,Ge=new Uint8Array(ke),we=0;we<ke;we++)Ge[we]=Te.charCodeAt(we);je(new Blob([Ge],{type:"image/png"}))})}function W(Ie){return Ie.toBlob?new Promise(function(je){Ie.toBlob(je)}):J(Ie)}function K(Ie,je){var Te=document.implementation.createHTMLDocument(),ke=Te.createElement("base");Te.head.appendChild(ke);var Ge=Te.createElement("a");return Te.body.appendChild(Ge),ke.href=je,Ge.href=Ie,Ge.href}function le(){var Ie=0;return function(){return"u"+je()+Ie++;function je(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function ge(Ie){return new Promise(function(je,Te){var ke=new Image;ke.onload=function(){je(ke)},ke.onerror=Te,ke.src=Ie})}function oe(Ie){var je=3e4;return u.impl.options.cacheBust&&(Ie+=(/\?/.test(Ie)?"&":"?")+new Date().getTime()),new Promise(function(Te){var ke=new XMLHttpRequest;ke.onreadystatechange=de,ke.ontimeout=me,ke.responseType="blob",ke.timeout=je,ke.open("GET",Ie,!0),ke.send();var Ge;if(u.impl.options.imagePlaceholder){var we=u.impl.options.imagePlaceholder.split(/,/);we&&we[1]&&(Ge=we[1])}function de(){if(ke.readyState===4){if(ke.status!==200){Ge?Te(Ge):ue("cannot fetch resource: "+Ie+", status: "+ke.status);return}var se=new FileReader;se.onloadend=function(){var he=se.result.split(/,/)[1];Te(he)},se.readAsDataURL(ke.response)}}function me(){Ge?Te(Ge):ue("timeout of "+je+"ms occured while fetching resource: "+Ie)}function ue(se){console.error(se),Te("")}})}function ce(Ie,je){return"data:"+je+";base64,"+Ie}function ie(Ie){return Ie.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function Ne(Ie){return function(je){return new Promise(function(Te){setTimeout(function(){Te(je)},Ie)})}}function re(Ie){for(var je=[],Te=Ie.length,ke=0;ke<Te;ke++)je.push(Ie[ke]);return je}function _e(Ie){return Ie.replace(/#/g,"%23").replace(/\n/g,"%0A")}function Se(Ie){var je=Be(Ie,"border-left-width"),Te=Be(Ie,"border-right-width");return Ie.scrollWidth+je+Te}function Re(Ie){var je=Be(Ie,"border-top-width"),Te=Be(Ie,"border-bottom-width");return Ie.scrollHeight+je+Te}function Be(Ie,je){var Te=window.getComputedStyle(Ie).getPropertyValue(je);return parseFloat(Te.replace("px",""))}}function Y(){var S=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:J,shouldProcess:T,impl:{readUrls:P,inline:U}};function T(W){return W.search(S)!==-1}function P(W){for(var K=[],le;(le=S.exec(W))!==null;)K.push(le[1]);return K.filter(function(ge){return!n.isDataUrl(ge)})}function U(W,K,le,ge){return Promise.resolve(K).then(function(ce){return le?n.resolveUrl(ce,le):ce}).then(ge||n.getAndEncode).then(function(ce){return n.dataAsUrl(ce,n.mimeType(K))}).then(function(ce){return W.replace(oe(K),"$1"+ce+"$3")});function oe(ce){return new RegExp(`(url\\(['"]?)(`+n.escape(ce)+`)(['"]?\\))`,"g")}}function J(W,K,le){if(ge())return Promise.resolve(W);return Promise.resolve(W).then(P).then(function(oe){var ce=Promise.resolve(W);return oe.forEach(function(ie){ce=ce.then(function(Ne){return U(Ne,ie,K,le)})}),ce});function ge(){return!T(W)}}}function j(){return{resolveAll:S,impl:{readAll:T}};function S(){return T().then(function(P){return Promise.all(P.map(function(U){return U.resolve()}))}).then(function(P){return P.join(`
`)})}function T(){return Promise.resolve(n.asArray(document.styleSheets)).then(U).then(P).then(function(W){return W.map(J)});function P(W){return W.filter(function(K){return K.type===CSSRule.FONT_FACE_RULE}).filter(function(K){return s.shouldProcess(K.style.getPropertyValue("src"))})}function U(W){var K=[];return W.forEach(function(le){try{n.asArray(le.cssRules||[]).forEach(K.push.bind(K))}catch(ge){console.log("Error while reading CSS rules from "+le.href,ge.toString())}}),K}function J(W){return{resolve:function(){var le=(W.parentStyleSheet||{}).href;return s.inlineAll(W.cssText,le)},src:function(){return W.style.getPropertyValue("src")}}}}}function H(){return{inlineAll:T,impl:{newImage:S}};function S(P){return{inline:U};function U(J){return n.isDataUrl(P.src)?Promise.resolve():Promise.resolve(P.src).then(J||n.getAndEncode).then(function(W){return n.dataAsUrl(W,n.mimeType(P.src))}).then(function(W){return new Promise(function(K,le){P.onload=K,P.onerror=le,P.src=W})})}}function T(P){if(!(P instanceof Element))return Promise.resolve(P);return U(P).then(function(){return P instanceof HTMLImageElement?S(P).inline():Promise.all(n.asArray(P.childNodes).map(function(J){return T(J)}))});function U(J){var W=J.style.getPropertyValue("background");return W?s.inlineAll(W).then(function(K){J.style.setProperty("background",K,J.style.getPropertyPriority("background"))}).then(function(){return J}):Promise.resolve(J)}}}})()}(domToImage)),domToImage.exports}var domToImageExports=requireDomToImage();const domtoimage=getDefaultExportFromCjs(domToImageExports),formatDateToBrazilian=t=>{const e=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],n=t.getDate(),s=e[t.getMonth()],i=t.getFullYear(),o=t.getHours().toString().padStart(2,"0"),l=t.getMinutes().toString().padStart(2,"0");return`${n} de ${s} de ${i} às ${o}:${l}`},formatCompetitionRound=(t,e)=>{if(!t)return"Data não encontrada";if(t.league.round.startsWith("Club Friendlies"))return"Amistoso";if(e){const n=e[0][t.league.id][t.league.round];return`${t.league.name} - ${n}`}return""},convertToSaoPauloTime=t=>{const n=t.getTime()+t.getTimezoneOffset()*6e4;return new Date(n+-180*6e4)},PlayerSelector=({formation:t,selectedPlayers:e,onPlayersChange:n,reservePlayers:s,onReservePlayersChange:i,onOfficialStatusChange:o,maxReserves:l=7,isOfficialLineUp:u=!1})=>{const{players:d,loading:f}=useSquad(),[m,g]=reactExports.useState(""),[y,v]=reactExports.useState("ALL"),[E,w]=reactExports.useState(!1),A=()=>new Set(Object.values(e).filter(Boolean).map(U=>U.id)),I=U=>{const J=A();if(U==="GOL")return d.filter(le=>le.position==="GOL"&&!J.has(le.id)).sort((le,ge)=>parseInt(le.number)-parseInt(ge.number));const W=d.filter(le=>le.position===U&&!J.has(le.id)).sort((le,ge)=>parseInt(le.number)-parseInt(ge.number)),K=d.filter(le=>le.position!=="GOL"&&le.position!==U&&!J.has(le.id)).sort((le,ge)=>parseInt(le.number)-parseInt(ge.number));return{specificPositionPlayers:W,otherAvailablePlayers:K}},D=()=>{const U=new Set([...A(),...s.map(J=>J.id)]);return d.filter(J=>!(U.has(J.id)||m&&!J.name.toLowerCase().includes(m.toLowerCase())&&!J.number.toString().includes(m)||y!=="ALL"&&J.position!==y)).sort((J,W)=>parseInt(J.number)-parseInt(W.number))},V=(U,J)=>{const W=s.some(K=>K.id===J.id);n({...e,[U]:J}),W&&i(s.filter(K=>K.id!==J.id))},Y=U=>{n({...e,[U]:null})},j=U=>{s.length<l&&i([...s,U])},H=U=>{i(s.filter(J=>J.id!==U))},S=()=>{o(!u)};if(reactExports.useEffect(()=>{w(!!u)},[u]),f)return jsxRuntimeExports.jsx("div",{children:"Carregando..."});if(d.length===0)return jsxRuntimeExports.jsx("div",{children:"Nenhum jogador cadastrado."});const T=t.positions.every(U=>e[U.id]),P={GOL:t.positions.filter(U=>U.position==="GOL"),DEF:t.positions.filter(U=>U.position==="DEF"),MEI:t.positions.filter(U=>U.position==="MEI"),ATA:t.positions.filter(U=>U.position==="ATA")};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-display-bold text-gray-800 mb-2",children:["Selecionar Jogadores - ",t.displayName]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Escolha os jogadores para cada posição da formação"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-gray-700",children:"Progresso da Escalação"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-display text-gray-600",children:[Object.values(e).filter(Boolean).length," / ",t.positions.length]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all duration-300",style:{width:`${Object.values(e).filter(Boolean).length/t.positions.length*100}%`}})})]}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:Object.entries(P).map(([U,J])=>J.length===0?null:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-display-semibold text-gray-800 mb-4 flex items-center",children:[jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-full mr-3 ${U==="GOL"?"bg-yellow-500":U==="DEF"?"bg-blue-500":U==="MEI"?"bg-green-600":"bg-red-500"}`}),PLAYER_POSITIONS[U]," (",J.length,")"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.map(W=>{const K=e[W.id],le=I(W.position),ge=W.position==="GOL",oe=ge?le.length>0:le.specificPositionPlayers.length>0||le.otherAvailablePlayers.length>0;return jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-700",children:W.label}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-display-medium ${POSITION_COLORS[W.position]}`,children:PLAYER_POSITIONS[W.position]})]}),K?jsxRuntimeExports.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-display-bold mr-3",children:K.number}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-medium text-gray-800",children:K.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 font-display",children:PLAYER_POSITIONS[K.position]})]})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>Y(W.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:oe?jsxRuntimeExports.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display",value:"",onChange:ce=>{const ie=d.find(Ne=>Ne.id===ce.target.value);ie&&V(W.id,ie)},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Selecionar jogador..."}),ge?le.map(ce=>jsxRuntimeExports.jsxs("option",{value:ce.id,children:["#",ce.number," ",ce.name]},ce.id)):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("optgroup",{label:PLAYER_POSITIONS[W.position],children:le.specificPositionPlayers.map(ce=>jsxRuntimeExports.jsxs("option",{value:ce.id,children:["#",ce.number," ",ce.name]},ce.id))}),le.otherAvailablePlayers.length>0&&jsxRuntimeExports.jsx("optgroup",{label:"Outros Jogadores",children:le.otherAvailablePlayers.map(ce=>jsxRuntimeExports.jsxs("option",{value:ce.id,children:["#",ce.number," ",ce.name]},ce.id))})]})]}):jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-yellow-600 mx-auto mb-1"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-yellow-700 font-display",children:"Nenhum jogador disponível"})]})})]},W.id)})})]},U))}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-display-semibold text-gray-800",children:"Banco de Reservas"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 font-display",children:[s.length," / ",l]})]}),s.length>0&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:s.map(U=>jsxRuntimeExports.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-display-bold mr-2",children:U.number}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-800",children:U.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 font-display",children:PLAYER_POSITIONS[U.position]})]})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>H(U.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:jsxRuntimeExports.jsx(X,{className:"w-3 h-3"})})]})},U.id))}),s.length<l&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar jogador para o banco...",value:m,onChange:U=>g(U.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg w-full"})]}),jsxRuntimeExports.jsxs("select",{value:y,onChange:U=>v(U.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"ALL",children:"Todas as posições"}),Object.entries(PLAYER_POSITIONS).map(([U,J])=>jsxRuntimeExports.jsx("option",{value:U,children:J},U))]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 max-h-40 overflow-y-auto",children:D().map(U=>jsxRuntimeExports.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-2 hover:border-red-300 cursor-pointer",onClick:()=>j(U),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-display-bold mr-2",children:U.number}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-800 truncate",children:U.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 font-display",children:PLAYER_POSITIONS[U.position]})]})]})},U.id))})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800",children:"Status da Escalação"}),jsxRuntimeExports.jsx("p",{className:"font-display text-sm text-gray-600",children:E?"Esta é uma escalação oficial.":"Isto é uma previsão de escalação."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:`font-display text-sm ${E?"text-gray-500":"text-red-600 font-display-semibold"}`,children:"Previsão"}),jsxRuntimeExports.jsx("button",{onClick:S,className:`cursor-pointer relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${E?"bg-red-600":"bg-gray-300"}`,role:"switch","aria-checked":E,children:jsxRuntimeExports.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${E?"translate-x-6":"translate-x-1"}`})}),jsxRuntimeExports.jsx("span",{className:`font-display text-sm ${E?"text-red-600 font-display-semibold":"text-gray-500"}`,children:"Oficial"})]})]})}),T&&jsxRuntimeExports.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Check,{className:"w-5 h-5 text-green-600 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-green-700 font-display-medium",children:"Escalação completa!"})]})})]})},StepperResponsive=({steps:t,currentStep:e,onStepClick:n,canAdvanceToStep:s})=>jsxRuntimeExports.jsx("div",{className:"w-full mb-8",children:jsxRuntimeExports.jsx("div",{className:"flex items-center",children:t.map((i,o)=>{const l=e>i.id,u=e===i.id,d=s(i.id);return jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>d&&n(i.id),disabled:!d,className:cn("flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all shrink-0",{"bg-green-600 border-green-600 text-white":l,"bg-red-600 border-red-600 text-white":u,"border-gray-300 text-gray-500 hover:border-red-500":!u&&!l&&d,"border-gray-200 text-gray-300 cursor-not-allowed":!d,"cursor-pointer":d}),children:l?jsxRuntimeExports.jsx(Check,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(i.icon,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("p",{className:cn("hidden md:block text-xs md:text-sm font-display-medium w-20 md:w-auto truncate md:whitespace-normal",{"text-red-600":u,"text-green-600":l,"text-gray-500":!u&&!l}),children:i.title}),jsxRuntimeExports.jsx("p",{className:"hidden md:block text-xs text-gray-500 font-display",children:i.description})]})]}),o<t.length-1&&jsxRuntimeExports.jsx("div",{className:cn("flex-1 h-px mx-2 md:mx-4",{"bg-green-500":l,"bg-gray-300":!l})})]},i.id)})})}),GameArtSelector=({onArtSelect:t,escalacaoData:e,offPlayer:n=!1,showChannelLogoSelection:s=!1,setShowChannelLogoSelection:i,selectedChannelLogos:o,onToggleChannelLogo:l,allChannelLogos:u})=>{var Y,j,H,S,T,P,U,J,W;const{gameArt:d}=useImages(),{players:f}=useSquad(),[m,g]=reactExports.useState(((Y=e.featuredPlayer)==null?void 0:Y.id)||""),[y,v]=reactExports.useState(e.featuredPlayerImgIndex||0),[E,w]=reactExports.useState(((H=(j=e.featuredPlayer)==null?void 0:j.imgUrl)==null?void 0:H[0])||""),A=f.filter(K=>K.imgUrl&&K.imgUrl.length>0);reactExports.useEffect(()=>{if(d&&n&&t(d.url,null,null),m&&d&&E){const K=f.find(le=>le.id===m);K&&t(d.url,K,E)}},[E,d,m,n,f]);const I=K=>{g(K),v(0);const le=f.find(ge=>ge.id===K);le&&le.imgUrl&&le.imgUrl.length>0&&w(le.imgUrl[0])},D=K=>{v(K);const le=f.find(ge=>ge.id===m);le&&le.imgUrl&&le.imgUrl[K]&&w(le.imgUrl[K])},V=K=>(o==null?void 0:o.some(le=>le.id===K.id))||!1;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800 mb-2",children:n?"Canais de transmissão":s?"Jogador Destaque e Canais de transmissão":"Jogador Destaque"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:n?s?"Escolha os canais que transmitirão o jogo":"":s?"Selecione o jogador destaque e/ou as logos dos canais que transmitirão o jogo":"Selecione o jogador destaque"})]}),u&&o&&i&&l&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-display-semibold text-gray-800 flex items-center",children:[jsxRuntimeExports.jsx(Image$1,{className:"w-5 h-5 mr-2 text-red-600"}),"Logos de Canais"]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800",children:"Adicionar logos dos canais?"}),jsxRuntimeExports.jsx("p",{className:"font-display text-sm text-gray-600",children:s?"Adicionando as logos na arte.":"Logos não serão adicionadas a arte."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:`font-display text-sm ${s?"text-gray-500":"text-red-600 font-display-semibold"}`,children:"Não adicionar"}),jsxRuntimeExports.jsx("button",{onClick:()=>i(!s),className:`cursor-pointer relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s?"bg-red-600":"bg-gray-300"}`,role:"switch","aria-checked":s,children:jsxRuntimeExports.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})}),jsxRuntimeExports.jsx("span",{className:`font-display text-sm ${s?"text-red-600 font-display-semibold":"text-gray-500"}`,children:"Adicionar"})]})]})}),s&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:u.length===0?jsxRuntimeExports.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-yellow-600 mr-2"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-800 font-display-medium",children:"Nenhuma logo de canal disponível."})]})}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-4",children:u.sort((K,le)=>K.name.localeCompare(le.name)).map(K=>jsxRuntimeExports.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 transition-all p-2 flex flex-col items-center justify-center text-center
                        ${V(K)?"border-red-500 ring-2 ring-red-200 bg-red-300":"border-gray-200 hover:border-red-300 bg-red-100"}`,onClick:()=>l(K),children:[jsxRuntimeExports.jsx("img",{src:K.logoUrl||"",alt:`${K.name} Logo`,className:"w-16 h-16 object-contain mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-xs font-display-medium text-gray-700 truncate w-full px-1",children:K.name}),V(K)&&jsxRuntimeExports.jsx("div",{className:"absolute top-1 right-1 bg-red-600 rounded-full p-0.5",children:jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-white"})})]},K.id))})})]}),!n&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-display-semibold text-gray-800 flex items-center",children:[jsxRuntimeExports.jsx(User,{className:"w-5 h-5 mr-2 text-red-600"}),"Jogador Destaque"]}),A.length===0?jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-yellow-600 mr-2"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-800 font-display-medium",children:"Nenhum jogador com imagem disponível"})]}),jsxRuntimeExports.jsx("p",{className:"text-yellow-700 text-sm mt-1 font-display",children:"Adicione imagens aos jogadores na seção de administração do elenco."})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Selecionar Jogador"}),jsxRuntimeExports.jsxs("select",{value:m,onChange:K=>I(K.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Selecione um jogador..."}),A.map(K=>{var le,ge;return jsxRuntimeExports.jsxs("option",{value:K.id,children:[K.number," - ",K.name," (",(le=K.imgUrl)==null?void 0:le.length," ","image",((ge=K.imgUrl)==null?void 0:ge.length)!==1?"ns":"m",")"]},K.id)})]})]}),m&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Selecionar Imagem"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-3",children:(T=(S=f.find(K=>K.id===m))==null?void 0:S.imgUrl)==null?void 0:T.map((K,le)=>{var ge;return jsxRuntimeExports.jsxs("div",{onClick:()=>D(le),className:`relative cursor-pointer rounded-lg border-2 transition-all ${y===le?"border-red-500 ring-2 ring-red-200":"border-gray-200 hover:border-red-300"}`,children:[jsxRuntimeExports.jsx("img",{src:K,alt:`${(ge=f.find(oe=>oe.id===m))==null?void 0:ge.name} - Imagem ${le+1}`,className:"w-full h-32 object-cover rounded-lg"}),y===le&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-red-600 bg-white rounded-full"})}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded font-display",children:["Imagem ",le+1]})]},le)})})]}),m&&jsxRuntimeExports.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-600 mr-2"}),jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-green-800",children:"Jogador Destaque Selecionado"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("img",{src:(U=(P=f.find(K=>K.id===m))==null?void 0:P.imgUrl)==null?void 0:U[y],alt:"Jogador destaque",className:"w-16 h-16 object-cover rounded-lg border"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-semibold text-green-800",children:(J=f.find(K=>K.id===m))==null?void 0:J.name}),jsxRuntimeExports.jsxs("p",{className:"text-green-700 text-sm font-display",children:["Número"," ",(W=f.find(K=>K.id===m))==null?void 0:W.number," ","• Imagem ",y+1]})]})]})]})]})]})]})},FORMATIONS=[{id:"4-3-3",name:"4-3-3",displayName:"4-3-3 (Clássico)",description:"Formação ofensiva com 3 atacantes",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"rb",x:80,y:20,position:"DEF",label:"RB"},{id:"cb1",x:60,y:20,position:"DEF",label:"CB"},{id:"cb2",x:40,y:20,position:"DEF",label:"CB"},{id:"lb",x:20,y:20,position:"DEF",label:"LB"},{id:"cdm",x:50,y:40,position:"MEI",label:"CDM"},{id:"cm1",x:35,y:50,position:"MEI",label:"CM"},{id:"cm2",x:65,y:50,position:"MEI",label:"CM"},{id:"lw",x:25,y:75,position:"ATA",label:"LW"},{id:"st",x:50,y:80,position:"ATA",label:"ST"},{id:"rw",x:75,y:75,position:"ATA",label:"RW"}]},{id:"4-4-2",name:"4-4-2",displayName:"4-4-2 (Equilibrado)",description:"Formação equilibrada com 2 atacantes",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"rb",x:80,y:20,position:"DEF",label:"RB"},{id:"cb1",x:60,y:20,position:"DEF",label:"CB"},{id:"cb2",x:40,y:20,position:"DEF",label:"CB"},{id:"lb",x:20,y:20,position:"DEF",label:"LB"},{id:"rm",x:80,y:50,position:"MEI",label:"RM"},{id:"cm1",x:60,y:45,position:"MEI",label:"CM"},{id:"cm2",x:40,y:45,position:"MEI",label:"CM"},{id:"lm",x:20,y:50,position:"MEI",label:"LM"},{id:"st1",x:40,y:75,position:"ATA",label:"ST"},{id:"st2",x:60,y:75,position:"ATA",label:"ST"}]},{id:"3-5-2",name:"3-5-2",displayName:"3-5-2 (Defensivo)",description:"Formação com 3 zagueiros e meio-campo forte",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"cb1",x:70,y:20,position:"DEF",label:"CB"},{id:"cb2",x:50,y:18,position:"DEF",label:"CB"},{id:"cb3",x:30,y:20,position:"DEF",label:"CB"},{id:"rwb",x:85,y:40,position:"DEF",label:"RWB"},{id:"cm1",x:65,y:50,position:"MEI",label:"CM"},{id:"cdm",x:50,y:45,position:"MEI",label:"CDM"},{id:"cm2",x:35,y:50,position:"MEI",label:"CM"},{id:"lwb",x:15,y:40,position:"DEF",label:"LWB"},{id:"st1",x:40,y:75,position:"ATA",label:"ST"},{id:"st2",x:60,y:75,position:"ATA",label:"ST"}]},{id:"4-2-3-1",name:"4-2-3-1",displayName:"4-2-3-1 (Moderno)",description:"Formação moderna com meio-campo criativo",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"rb",x:80,y:20,position:"DEF",label:"RB"},{id:"cb1",x:60,y:20,position:"DEF",label:"CB"},{id:"cb2",x:40,y:20,position:"DEF",label:"CB"},{id:"lb",x:20,y:20,position:"DEF",label:"LB"},{id:"cdm1",x:40,y:40,position:"MEI",label:"CDM"},{id:"cdm2",x:60,y:40,position:"MEI",label:"CDM"},{id:"lam",x:25,y:60,position:"MEI",label:"LAM"},{id:"cam",x:50,y:65,position:"MEI",label:"CAM"},{id:"ram",x:75,y:60,position:"MEI",label:"RAM"},{id:"st",x:50,y:80,position:"ATA",label:"ST"}]},{id:"3-4-3",name:"3-4-3",displayName:"3-4-3 (Ofensivo)",description:"Formação muito ofensiva com 3 atacantes",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"cb1",x:70,y:20,position:"DEF",label:"CB"},{id:"cb2",x:50,y:18,position:"DEF",label:"CB"},{id:"cb3",x:30,y:20,position:"DEF",label:"CB"},{id:"rm",x:80,y:45,position:"MEI",label:"RM"},{id:"cm1",x:60,y:50,position:"MEI",label:"CM"},{id:"cm2",x:40,y:50,position:"MEI",label:"CM"},{id:"lm",x:20,y:45,position:"MEI",label:"LM"},{id:"rw",x:75,y:75,position:"ATA",label:"RW"},{id:"st",x:50,y:80,position:"ATA",label:"ST"},{id:"lw",x:25,y:75,position:"ATA",label:"LW"}]},{id:"5-3-2",name:"5-3-2",displayName:"5-3-2 (Ultra Defensivo)",description:"Formação muito defensiva com 5 defensores",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"rwb",x:85,y:25,position:"DEF",label:"RWB"},{id:"cb1",x:65,y:20,position:"DEF",label:"CB"},{id:"cb2",x:50,y:18,position:"DEF",label:"CB"},{id:"cb3",x:35,y:20,position:"DEF",label:"CB"},{id:"lwb",x:15,y:25,position:"DEF",label:"LWB"},{id:"cm1",x:35,y:55,position:"MEI",label:"CM"},{id:"cdm",x:50,y:50,position:"MEI",label:"CDM"},{id:"cm2",x:65,y:55,position:"MEI",label:"CM"},{id:"st1",x:40,y:75,position:"ATA",label:"ST"},{id:"st2",x:60,y:75,position:"ATA",label:"ST"}]},{id:"4-1-4-1",name:"4-1-4-1",displayName:"4-1-4-1 (Controle)",description:"Formação com volante de contenção",positions:[{id:"gk",x:50,y:5,position:"GOL",label:"GK"},{id:"rb",x:80,y:20,position:"DEF",label:"RB"},{id:"cb1",x:60,y:20,position:"DEF",label:"CB"},{id:"cb2",x:40,y:20,position:"DEF",label:"CB"},{id:"lb",x:20,y:20,position:"DEF",label:"LB"},{id:"cdm",x:50,y:35,position:"MEI",label:"CDM"},{id:"rm",x:80,y:55,position:"MEI",label:"RM"},{id:"cm1",x:60,y:50,position:"MEI",label:"CM"},{id:"cm2",x:40,y:50,position:"MEI",label:"CM"},{id:"lm",x:20,y:55,position:"MEI",label:"LM"},{id:"st",x:50,y:80,position:"ATA",label:"ST"}]}],getPositionsByType=(t,e)=>t.positions.filter(n=>n.position===e),FormationSelector=({selectedFormation:t,onFormationSelect:e})=>{const[n,s]=reactExports.useState(null),i=({formation:l,isSelected:u=!1,isHovered:d=!1})=>jsxRuntimeExports.jsxs("div",{className:"relative w-32 h-48 bg-green-100 rounded-lg overflow-hidden border-2 border-green-200",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-px h-full bg-green-300"}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 border border-green-300 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-16 h-6 border-t border-l border-r border-green-300"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-8 h-3 border-t border-l border-r border-green-300"})]}),l.positions.map(m=>jsxRuntimeExports.jsx("div",{className:`absolute w-3 h-3 rounded-full transform -translate-x-1/2 -translate-y-1/2 ${m.position==="GOL"?"bg-yellow-500":m.position==="DEF"?"bg-blue-500":m.position==="MEI"?"bg-green-600":"bg-red-500"}`,style:{left:`${m.x*.8}%`,top:`${(100-m.y)*.8+10}%`}},m.id)),u&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-red-500 bg-opacity-20 border-2 border-red-500 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(Check,{className:"w-6 h-6 text-red-600"})}),d&&!u&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-10 border-2 border-gray-400 rounded-lg"})]}),o=l=>({GOL:getPositionsByType(l,"GOL").length,DEF:getPositionsByType(l,"DEF").length,MEI:getPositionsByType(l,"MEI").length,ATA:getPositionsByType(l,"ATA").length});return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-bold text-gray-800 mb-2",children:"Escolher Formação Tática"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Selecione a formação que será usada na escalação"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:FORMATIONS.map(l=>{const u=(t==null?void 0:t.id)===l.id,d=(n==null?void 0:n.id)===l.id,f=o(l);return jsxRuntimeExports.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 cursor-pointer transition-all hover:shadow-lg ${u?"border-red-500 shadow-lg":"border-gray-200 hover:border-red-300"}`,onClick:()=>e(l),onMouseEnter:()=>s(l),onMouseLeave:()=>s(null),children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-3",children:jsxRuntimeExports.jsx(i,{formation:l,isSelected:u,isHovered:d})}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800 text-sm",children:l.displayName}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 font-display mt-1",children:l.description})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-1 text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mx-auto mb-1"}),jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-600",children:f.GOL})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mx-auto mb-1"}),jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-600",children:f.DEF})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full mx-auto mb-1"}),jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-600",children:f.MEI})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mx-auto mb-1"}),jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-600",children:f.ATA})]})]})]},l.id)})}),t&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(i,{formation:t,isSelected:!0})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-display-semibold text-gray-800 mb-2",children:t.displayName}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display mb-4",children:t.description}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(PLAYER_POSITIONS).map(([l,u])=>{const d=getPositionsByType(t,l).length;return d===0?null:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-full mx-auto mb-1 ${l==="GOL"?"bg-yellow-500":l==="DEF"?"bg-blue-500":l==="MEI"?"bg-green-600":"bg-red-500"}`}),jsxRuntimeExports.jsx("p",{className:"text-sm font-display-medium text-gray-800",children:d}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 font-display",children:u})]},l)})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-3",children:[jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 text-gray-500 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-gray-700",children:"Legenda das Posições"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),jsxRuntimeExports.jsx("span",{className:"font-display text-gray-600",children:"Goleiro"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),jsxRuntimeExports.jsx("span",{className:"font-display text-gray-600",children:"Defensor"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full mr-2"}),jsxRuntimeExports.jsx("span",{className:"font-display text-gray-600",children:"Meio-campo"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),jsxRuntimeExports.jsx("span",{className:"font-display text-gray-600",children:"Atacante"})]})]})]})]})},API_BASE_URL$1="https://v3.football.api-sports.io",API_KEY$1="a3a4a4cc8c8f42b486a8e6abf0f3f892",API_HOST$1="v3.football.api-sports.io",fetchData$1=async t=>{try{const e=await fetch(t,{method:"GET",headers:{"x-rapidapi-host":API_HOST$1,"x-apisports-key":API_KEY$1,"Content-Type":"application/json"}});return e.ok?{success:!0,data:await e.json()}:{success:!1,error:`API Error: ${e.status} - ${e.statusText}`}}catch(e){return console.error("Fetch error:",e),{success:!1,error:"Network error or API connection issue."}}},useTeamCodes=()=>{const[t,e]=reactExports.useState({}),[n,s]=reactExports.useState(!0),[i,o]=reactExports.useState(null);return reactExports.useEffect(()=>{(async()=>{s(!0),o(null);try{const d=doc(db,"teamCodes","codes"),f=await getDoc(d);f.exists()?e(f.data()):(console.log("Documento 'codes' não encontrado no Firebase, criando um novo."),await setDoc(d,{}))}catch(d){console.error("Erro ao carregar cache do Firebase:",d),o("Falha ao carregar códigos de times do cache.")}finally{s(!1)}})()},[]),{getTeamCode:reactExports.useCallback(async(u,d)=>{if(t[u])return t[u];try{const f=doc(db,"teamCodes","codes"),m=await getDoc(f),g=m.exists()?m.data():{};if(g[u])return e(y=>({...y,[u]:g[u]})),g[u]}catch(f){console.error("Erro ao buscar código no Firebase durante getTeamCode:",f)}try{s(!0);const f=`${API_BASE_URL$1}/teams?id=${u}`,m=await fetchData$1(f);if(m.success&&m.data&&m.data.response.length>0){const g=m.data.response[0].team.code;if(g){const y=doc(db,"teamCodes","codes");return await setDoc(y,{...t,[u]:g},{merge:!0}),e(v=>({...v,[u]:g})),g}else{const y=d.substring(0,3).toUpperCase(),v=doc(db,"teamCodes","codes");return await setDoc(v,{...t,[u]:y},{merge:!0}),e(E=>({...E,[u]:y})),y}}else return o(m.error||`Não foi possível obter o código para o time ${d}.`),d.substring(0,3).toUpperCase()}catch(f){return console.error("Erro ao buscar código na API:",f),o(`Falha ao buscar código para ${d} na API.`),d.substring(0,3).toUpperCase()}finally{s(!1)}},[t]),loading:n,error:i}};function Textarea({className:t,...e}){return jsxRuntimeExports.jsx("textarea",{"data-slot":"textarea",className:cn("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}function composeEventHandlers(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function createContextScope(t,e=[]){let n=[];function s(o,l){const u=reactExports.createContext(l),d=n.length;n=[...n,l];const f=g=>{var I;const{scope:y,children:v,...E}=g,w=((I=y==null?void 0:y[t])==null?void 0:I[d])||u,A=reactExports.useMemo(()=>E,Object.values(E));return jsxRuntimeExports.jsx(w.Provider,{value:A,children:v})};f.displayName=o+"Provider";function m(g,y){var w;const v=((w=y==null?void 0:y[t])==null?void 0:w[d])||u,E=reactExports.useContext(v);if(E)return E;if(l!==void 0)return l;throw new Error(`\`${g}\` must be used within \`${o}\``)}return[f,m]}const i=()=>{const o=n.map(l=>reactExports.createContext(l));return function(u){const d=(u==null?void 0:u[t])||o;return reactExports.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return i.scopeName=t,[s,composeContextScopes(i,...e)]}function composeContextScopes(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const l=s.reduce((u,{useScope:d,scopeName:f})=>{const g=d(o)[`__scope${f}`];return{...u,...g}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((t,e)=>{const n=createSlot(`Primitive.${e}`),s=reactExports.forwardRef((i,o)=>{const{asChild:l,...u}=i,d=l?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(d,{...u,ref:o})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function dispatchDiscreteCustomEvent(t,e){t&&reactDomExports.flushSync(()=>t.dispatchEvent(e))}function useCallbackRef$1(t){const e=reactExports.useRef(t);return reactExports.useEffect(()=>{e.current=t}),reactExports.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function useEscapeKeydown(t,e=globalThis==null?void 0:globalThis.document){const n=useCallbackRef$1(t);reactExports.useEffect(()=>{const s=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...d}=t,f=reactExports.useContext(DismissableLayerContext),[m,g]=reactExports.useState(null),y=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=reactExports.useState({}),E=useComposedRefs(e,S=>g(S)),w=Array.from(f.layers),[A]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),I=w.indexOf(A),D=m?w.indexOf(m):-1,V=f.layersWithOutsidePointerEventsDisabled.size>0,Y=D>=I,j=usePointerDownOutside(S=>{const T=S.target,P=[...f.branches].some(U=>U.contains(T));!Y||P||(i==null||i(S),l==null||l(S),S.defaultPrevented||u==null||u())},y),H=useFocusOutside(S=>{const T=S.target;[...f.branches].some(U=>U.contains(T))||(o==null||o(S),l==null||l(S),S.defaultPrevented||u==null||u())},y);return useEscapeKeydown(S=>{D===f.layers.size-1&&(s==null||s(S),!S.defaultPrevented&&u&&(S.preventDefault(),u()))},y),reactExports.useEffect(()=>{if(m)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),dispatchUpdate(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=originalBodyPointerEvents)}},[m,y,n,f]),reactExports.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),dispatchUpdate())},[m,f]),reactExports.useEffect(()=>{const S=()=>v({});return document.addEventListener(CONTEXT_UPDATE,S),()=>document.removeEventListener(CONTEXT_UPDATE,S)},[]),jsxRuntimeExports.jsx(Primitive.div,{...d,ref:E,style:{pointerEvents:V?Y?"auto":"none":void 0,...t.style},onFocusCapture:composeEventHandlers(t.onFocusCapture,H.onFocusCapture),onBlurCapture:composeEventHandlers(t.onBlurCapture,H.onBlurCapture),onPointerDownCapture:composeEventHandlers(t.onPointerDownCapture,j.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((t,e)=>{const n=reactExports.useContext(DismissableLayerContext),s=reactExports.useRef(null),i=useComposedRefs(e,s);return reactExports.useEffect(()=>{const o=s.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),jsxRuntimeExports.jsx(Primitive.div,{...t,ref:i})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(t,e=globalThis==null?void 0:globalThis.document){const n=useCallbackRef$1(t),s=reactExports.useRef(!1),i=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const o=u=>{if(u.target&&!s.current){let d=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);s.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function useFocusOutside(t,e=globalThis==null?void 0:globalThis.document){const n=useCallbackRef$1(t),s=reactExports.useRef(!1);return reactExports.useEffect(()=>{const i=o=>{o.target&&!s.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function dispatchUpdate(){const t=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(t)}function handleAndDispatchCustomEvent(t,e,n,{discrete:s}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),s?dispatchDiscreteCustomEvent(i,o):i.dispatchEvent(o)}var count$1=0;function useFocusGuards(){reactExports.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",t[1]??createFocusGuard()),count$1++,()=>{count$1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),count$1--}},[])}function createFocusGuard(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...l}=t,[u,d]=reactExports.useState(null),f=useCallbackRef$1(i),m=useCallbackRef$1(o),g=reactExports.useRef(null),y=useComposedRefs(e,w=>d(w)),v=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(s){let w=function(V){if(v.paused||!u)return;const Y=V.target;u.contains(Y)?g.current=Y:focus(g.current,{select:!0})},A=function(V){if(v.paused||!u)return;const Y=V.relatedTarget;Y!==null&&(u.contains(Y)||focus(g.current,{select:!0}))},I=function(V){if(document.activeElement===document.body)for(const j of V)j.removedNodes.length>0&&focus(u)};document.addEventListener("focusin",w),document.addEventListener("focusout",A);const D=new MutationObserver(I);return u&&D.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",A),D.disconnect()}}},[s,u,v.paused]),reactExports.useEffect(()=>{if(u){focusScopesStack.add(v);const w=document.activeElement;if(!u.contains(w)){const I=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS);u.addEventListener(AUTOFOCUS_ON_MOUNT,f),u.dispatchEvent(I),I.defaultPrevented||(focusFirst(removeLinks(getTabbableCandidates(u)),{select:!0}),document.activeElement===w&&focus(u))}return()=>{u.removeEventListener(AUTOFOCUS_ON_MOUNT,f),setTimeout(()=>{const I=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS);u.addEventListener(AUTOFOCUS_ON_UNMOUNT,m),u.dispatchEvent(I),I.defaultPrevented||focus(w??document.body,{select:!0}),u.removeEventListener(AUTOFOCUS_ON_UNMOUNT,m),focusScopesStack.remove(v)},0)}}},[u,f,m,v]);const E=reactExports.useCallback(w=>{if(!n&&!s||v.paused)return;const A=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,I=document.activeElement;if(A&&I){const D=w.currentTarget,[V,Y]=getTabbableEdges(D);V&&Y?!w.shiftKey&&I===Y?(w.preventDefault(),n&&focus(V,{select:!0})):w.shiftKey&&I===V&&(w.preventDefault(),n&&focus(Y,{select:!0})):I===D&&w.preventDefault()}},[n,s,v.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...l,ref:y,onKeyDown:E})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(focus(s,{select:e}),document.activeElement!==n)return}function getTabbableEdges(t){const e=getTabbableCandidates(t),n=findVisible(e,t),s=findVisible(e.reverse(),t);return[n,s]}function getTabbableCandidates(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function findVisible(t,e){for(const n of t)if(!isHidden(n,{upTo:e}))return n}function isHidden(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function isSelectableInput(t){return t instanceof HTMLInputElement&&"select"in t}function focus(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&isSelectableInput(t)&&e&&t.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=arrayRemove(t,e),t.unshift(e)},remove(e){var n;t=arrayRemove(t,e),(n=t[0])==null||n.resume()}}}function arrayRemove(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function removeLinks(t){return t.filter(e=>e.tagName!=="A")}var useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},useReactId=React$1[" useId ".trim().toString()]||(()=>{}),count=0;function useId(t){const[e,n]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{n(s=>s??String(count++))},[t]),t||(e?`radix-${e}`:"")}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round$1=Math.round,floor=Math.floor,createCoords=t=>({x:t,y:t}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(t,e,n){return max(t,min(e,n))}function evaluate(t,e){return typeof t=="function"?t(e):t}function getSide(t){return t.split("-")[0]}function getAlignment(t){return t.split("-")[1]}function getOppositeAxis(t){return t==="x"?"y":"x"}function getAxisLength(t){return t==="y"?"height":"width"}function getSideAxis(t){return["top","bottom"].includes(getSide(t))?"y":"x"}function getAlignmentAxis(t){return getOppositeAxis(getSideAxis(t))}function getAlignmentSides(t,e,n){n===void 0&&(n=!1);const s=getAlignment(t),i=getAlignmentAxis(t),o=getAxisLength(i);let l=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=getOppositePlacement(l)),[l,getOppositePlacement(l)]}function getExpandedPlacements(t){const e=getOppositePlacement(t);return[getOppositeAlignmentPlacement(t),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(t){return t.replace(/start|end/g,e=>oppositeAlignmentMap[e])}function getSideList(t,e,n){const s=["left","right"],i=["right","left"],o=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:s:e?s:i;case"left":case"right":return e?o:l;default:return[]}}function getOppositeAxisPlacements(t,e,n,s){const i=getAlignment(t);let o=getSideList(getSide(t),n==="start",s);return i&&(o=o.map(l=>l+"-"+i),e&&(o=o.concat(o.map(getOppositeAlignmentPlacement)))),o}function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(t){return{top:0,right:0,bottom:0,left:0,...t}}function getPaddingObject(t){return typeof t!="number"?expandPaddingObject(t):{top:t,right:t,bottom:t,left:t}}function rectToClientRect(t){const{x:e,y:n,width:s,height:i}=t;return{width:s,height:i,top:n,left:e,right:e+s,bottom:n+i,x:e,y:n}}function computeCoordsFromPlacement(t,e,n){let{reference:s,floating:i}=t;const o=getSideAxis(e),l=getAlignmentAxis(e),u=getAxisLength(l),d=getSide(e),f=o==="y",m=s.x+s.width/2-i.width/2,g=s.y+s.height/2-i.height/2,y=s[u]/2-i[u]/2;let v;switch(d){case"top":v={x:m,y:s.y-i.height};break;case"bottom":v={x:m,y:s.y+s.height};break;case"right":v={x:s.x+s.width,y:g};break;case"left":v={x:s.x-i.width,y:g};break;default:v={x:s.x,y:s.y}}switch(getAlignment(e)){case"start":v[l]-=y*(n&&f?-1:1);break;case"end":v[l]+=y*(n&&f?-1:1);break}return v}const computePosition$1=async(t,e,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:m,y:g}=computeCoordsFromPlacement(f,s,d),y=s,v={},E=0;for(let w=0;w<u.length;w++){const{name:A,fn:I}=u[w],{x:D,y:V,data:Y,reset:j}=await I({x:m,y:g,initialPlacement:s,placement:y,strategy:i,middlewareData:v,rects:f,platform:l,elements:{reference:t,floating:e}});m=D??m,g=V??g,v={...v,[A]:{...v[A],...Y}},j&&E<=50&&(E++,typeof j=="object"&&(j.placement&&(y=j.placement),j.rects&&(f=j.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):j.rects),{x:m,y:g}=computeCoordsFromPlacement(f,y,d)),w=-1)}return{x:m,y:g,placement:y,strategy:i,middlewareData:v}};async function detectOverflow(t,e){var n;e===void 0&&(e={});const{x:s,y:i,platform:o,rects:l,elements:u,strategy:d}=t,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:y=!1,padding:v=0}=evaluate(e,t),E=getPaddingObject(v),A=u[y?g==="floating"?"reference":"floating":g],I=rectToClientRect(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(A)))==null||n?A:A.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:f,rootBoundary:m,strategy:d})),D=g==="floating"?{x:s,y:i,width:l.floating.width,height:l.floating.height}:l.reference,V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),Y=await(o.isElement==null?void 0:o.isElement(V))?await(o.getScale==null?void 0:o.getScale(V))||{x:1,y:1}:{x:1,y:1},j=rectToClientRect(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:D,offsetParent:V,strategy:d}):D);return{top:(I.top-j.top+E.top)/Y.y,bottom:(j.bottom-I.bottom+E.bottom)/Y.y,left:(I.left-j.left+E.left)/Y.x,right:(j.right-I.right+E.right)/Y.x}}const arrow$3=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:i,rects:o,platform:l,elements:u,middlewareData:d}=e,{element:f,padding:m=0}=evaluate(t,e)||{};if(f==null)return{};const g=getPaddingObject(m),y={x:n,y:s},v=getAlignmentAxis(i),E=getAxisLength(v),w=await l.getDimensions(f),A=v==="y",I=A?"top":"left",D=A?"bottom":"right",V=A?"clientHeight":"clientWidth",Y=o.reference[E]+o.reference[v]-y[v]-o.floating[E],j=y[v]-o.reference[v],H=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let S=H?H[V]:0;(!S||!await(l.isElement==null?void 0:l.isElement(H)))&&(S=u.floating[V]||o.floating[E]);const T=Y/2-j/2,P=S/2-w[E]/2-1,U=min(g[I],P),J=min(g[D],P),W=U,K=S-w[E]-J,le=S/2-w[E]/2+T,ge=clamp(W,le,K),oe=!d.arrow&&getAlignment(i)!=null&&le!==ge&&o.reference[E]/2-(le<W?U:J)-w[E]/2<0,ce=oe?le<W?le-W:le-K:0;return{[v]:y[v]+ce,data:{[v]:ge,centerOffset:le-ge-ce,...oe&&{alignmentOffset:ce}},reset:oe}}}),flip$2=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:i,middlewareData:o,rects:l,initialPlacement:u,platform:d,elements:f}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:w=!0,...A}=evaluate(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const I=getSide(i),D=getSideAxis(u),V=getSide(u)===u,Y=await(d.isRTL==null?void 0:d.isRTL(f.floating)),j=y||(V||!w?[getOppositePlacement(u)]:getExpandedPlacements(u)),H=E!=="none";!y&&H&&j.push(...getOppositeAxisPlacements(u,w,E,Y));const S=[u,...j],T=await detectOverflow(e,A),P=[];let U=((s=o.flip)==null?void 0:s.overflows)||[];if(m&&P.push(T[I]),g){const ge=getAlignmentSides(i,l,Y);P.push(T[ge[0]],T[ge[1]])}if(U=[...U,{placement:i,overflows:P}],!P.every(ge=>ge<=0)){var J,W;const ge=(((J=o.flip)==null?void 0:J.index)||0)+1,oe=S[ge];if(oe){var K;const ie=g==="alignment"?D!==getSideAxis(oe):!1,Ne=((K=U[0])==null?void 0:K.overflows[0])>0;if(!ie||Ne)return{data:{index:ge,overflows:U},reset:{placement:oe}}}let ce=(W=U.filter(ie=>ie.overflows[0]<=0).sort((ie,Ne)=>ie.overflows[1]-Ne.overflows[1])[0])==null?void 0:W.placement;if(!ce)switch(v){case"bestFit":{var le;const ie=(le=U.filter(Ne=>{if(H){const re=getSideAxis(Ne.placement);return re===D||re==="y"}return!0}).map(Ne=>[Ne.placement,Ne.overflows.filter(re=>re>0).reduce((re,_e)=>re+_e,0)]).sort((Ne,re)=>Ne[1]-re[1])[0])==null?void 0:le[0];ie&&(ce=ie);break}case"initialPlacement":ce=u;break}if(i!==ce)return{reset:{placement:ce}}}return{}}}};function getSideOffsets(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function isAnySideFullyClipped(t){return sides.some(e=>t[e]>=0)}const hide$2=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:s="referenceHidden",...i}=evaluate(t,e);switch(s){case"referenceHidden":{const o=await detectOverflow(e,{...i,elementContext:"reference"}),l=getSideOffsets(o,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:isAnySideFullyClipped(l)}}}case"escaped":{const o=await detectOverflow(e,{...i,altBoundary:!0}),l=getSideOffsets(o,n.floating);return{data:{escapedOffsets:l,escaped:isAnySideFullyClipped(l)}}}default:return{}}}}};async function convertValueToCoords(t,e){const{placement:n,platform:s,elements:i}=t,o=await(s.isRTL==null?void 0:s.isRTL(i.floating)),l=getSide(n),u=getAlignment(n),d=getSideAxis(n)==="y",f=["left","top"].includes(l)?-1:1,m=o&&d?-1:1,g=evaluate(e,t);let{mainAxis:y,crossAxis:v,alignmentAxis:E}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof E=="number"&&(v=u==="end"?E*-1:E),d?{x:v*m,y:y*f}:{x:y*f,y:v*m}}const offset$2=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:i,y:o,placement:l,middlewareData:u}=e,d=await convertValueToCoords(e,t);return l===((n=u.offset)==null?void 0:n.placement)&&(s=u.arrow)!=null&&s.alignmentOffset?{}:{x:i+d.x,y:o+d.y,data:{...d,placement:l}}}}},shift$2=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:i}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:A=>{let{x:I,y:D}=A;return{x:I,y:D}}},...d}=evaluate(t,e),f={x:n,y:s},m=await detectOverflow(e,d),g=getSideAxis(getSide(i)),y=getOppositeAxis(g);let v=f[y],E=f[g];if(o){const A=y==="y"?"top":"left",I=y==="y"?"bottom":"right",D=v+m[A],V=v-m[I];v=clamp(D,v,V)}if(l){const A=g==="y"?"top":"left",I=g==="y"?"bottom":"right",D=E+m[A],V=E-m[I];E=clamp(D,E,V)}const w=u.fn({...e,[y]:v,[g]:E});return{...w,data:{x:w.x-n,y:w.y-s,enabled:{[y]:o,[g]:l}}}}}},limitShift$2=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:i,rects:o,middlewareData:l}=e,{offset:u=0,mainAxis:d=!0,crossAxis:f=!0}=evaluate(t,e),m={x:n,y:s},g=getSideAxis(i),y=getOppositeAxis(g);let v=m[y],E=m[g];const w=evaluate(u,e),A=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(d){const V=y==="y"?"height":"width",Y=o.reference[y]-o.floating[V]+A.mainAxis,j=o.reference[y]+o.reference[V]-A.mainAxis;v<Y?v=Y:v>j&&(v=j)}if(f){var I,D;const V=y==="y"?"width":"height",Y=["top","left"].includes(getSide(i)),j=o.reference[g]-o.floating[V]+(Y&&((I=l.offset)==null?void 0:I[g])||0)+(Y?0:A.crossAxis),H=o.reference[g]+o.reference[V]+(Y?0:((D=l.offset)==null?void 0:D[g])||0)-(Y?A.crossAxis:0);E<j?E=j:E>H&&(E=H)}return{[y]:v,[g]:E}}}},size$2=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:i,rects:o,platform:l,elements:u}=e,{apply:d=()=>{},...f}=evaluate(t,e),m=await detectOverflow(e,f),g=getSide(i),y=getAlignment(i),v=getSideAxis(i)==="y",{width:E,height:w}=o.floating;let A,I;g==="top"||g==="bottom"?(A=g,I=y===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(I=g,A=y==="end"?"top":"bottom");const D=w-m.top-m.bottom,V=E-m.left-m.right,Y=min(w-m[A],D),j=min(E-m[I],V),H=!e.middlewareData.shift;let S=Y,T=j;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=V),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(S=D),H&&!y){const U=max(m.left,0),J=max(m.right,0),W=max(m.top,0),K=max(m.bottom,0);v?T=E-2*(U!==0||J!==0?U+J:max(m.left,m.right)):S=w-2*(W!==0||K!==0?W+K:max(m.top,m.bottom))}await d({...e,availableWidth:T,availableHeight:S});const P=await l.getDimensions(u.floating);return E!==P.width||w!==P.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(t){return isNode$1(t)?(t.nodeName||"").toLowerCase():"#document"}function getWindow$1(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(t){var e;return(e=(isNode$1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function isNode$1(t){return hasWindow()?t instanceof Node||t instanceof getWindow$1(t).Node:!1}function isElement(t){return hasWindow()?t instanceof Element||t instanceof getWindow$1(t).Element:!1}function isHTMLElement$1(t){return hasWindow()?t instanceof HTMLElement||t instanceof getWindow$1(t).HTMLElement:!1}function isShadowRoot(t){return!hasWindow()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof getWindow$1(t).ShadowRoot}function isOverflowElement(t){const{overflow:e,overflowX:n,overflowY:s,display:i}=getComputedStyle$2(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!["inline","contents"].includes(i)}function isTableElement(t){return["table","td","th"].includes(getNodeName(t))}function isTopLayer(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function isContainingBlock(t){const e=isWebKit(),n=isElement(t)?getComputedStyle$2(t):t;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function getContainingBlock(t){let e=getParentNode(t);for(;isHTMLElement$1(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;if(isTopLayer(e))return null;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(t){return["html","body","#document"].includes(getNodeName(t))}function getComputedStyle$2(t){return getWindow$1(t).getComputedStyle(t)}function getNodeScroll(t){return isElement(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function getParentNode(t){if(getNodeName(t)==="html")return t;const e=t.assignedSlot||t.parentNode||isShadowRoot(t)&&t.host||getDocumentElement(t);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(t){const e=getParentNode(t);return isLastTraversableNode(e)?t.ownerDocument?t.ownerDocument.body:t.body:isHTMLElement$1(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=getNearestOverflowAncestor(t),o=i===((s=t.ownerDocument)==null?void 0:s.body),l=getWindow$1(i);if(o){const u=getFrameElement(l);return e.concat(l,l.visualViewport||[],isOverflowElement(i)?i:[],u&&n?getOverflowAncestors(u):[])}return e.concat(i,getOverflowAncestors(i,[],n))}function getFrameElement(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function getCssDimensions(t){const e=getComputedStyle$2(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=isHTMLElement$1(t),o=i?t.offsetWidth:n,l=i?t.offsetHeight:s,u=round$1(n)!==o||round$1(s)!==l;return u&&(n=o,s=l),{width:n,height:s,$:u}}function unwrapElement(t){return isElement(t)?t:t.contextElement}function getScale(t){const e=unwrapElement(t);if(!isHTMLElement$1(e))return createCoords(1);const n=e.getBoundingClientRect(),{width:s,height:i,$:o}=getCssDimensions(e);let l=(o?round$1(n.width):n.width)/s,u=(o?round$1(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const noOffsets=createCoords(0);function getVisualOffsets(t){const e=getWindow$1(t);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==getWindow$1(t)?!1:e}function getBoundingClientRect(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=unwrapElement(t);let l=createCoords(1);e&&(s?isElement(s)&&(l=getScale(s)):l=getScale(t));const u=shouldAddVisualOffsets(o,n,s)?getVisualOffsets(o):createCoords(0);let d=(i.left+u.x)/l.x,f=(i.top+u.y)/l.y,m=i.width/l.x,g=i.height/l.y;if(o){const y=getWindow$1(o),v=s&&isElement(s)?getWindow$1(s):s;let E=y,w=getFrameElement(E);for(;w&&s&&v!==E;){const A=getScale(w),I=w.getBoundingClientRect(),D=getComputedStyle$2(w),V=I.left+(w.clientLeft+parseFloat(D.paddingLeft))*A.x,Y=I.top+(w.clientTop+parseFloat(D.paddingTop))*A.y;d*=A.x,f*=A.y,m*=A.x,g*=A.y,d+=V,f+=Y,E=getWindow$1(w),w=getFrameElement(E)}}return rectToClientRect({width:m,height:g,x:d,y:f})}function getWindowScrollBarX(t,e){const n=getNodeScroll(t).scrollLeft;return e?e.left+n:getBoundingClientRect(getDocumentElement(t)).left+n}function getHTMLOffset(t,e,n){n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=s.left+e.scrollLeft-(n?0:getWindowScrollBarX(t,s)),o=s.top+e.scrollTop;return{x:i,y:o}}function convertOffsetParentRelativeRectToViewportRelativeRect(t){let{elements:e,rect:n,offsetParent:s,strategy:i}=t;const o=i==="fixed",l=getDocumentElement(s),u=e?isTopLayer(e.floating):!1;if(s===l||u&&o)return n;let d={scrollLeft:0,scrollTop:0},f=createCoords(1);const m=createCoords(0),g=isHTMLElement$1(s);if((g||!g&&!o)&&((getNodeName(s)!=="body"||isOverflowElement(l))&&(d=getNodeScroll(s)),isHTMLElement$1(s))){const v=getBoundingClientRect(s);f=getScale(s),m.x=v.x+s.clientLeft,m.y=v.y+s.clientTop}const y=l&&!g&&!o?getHTMLOffset(l,d,!0):createCoords(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-d.scrollLeft*f.x+m.x+y.x,y:n.y*f.y-d.scrollTop*f.y+m.y+y.y}}function getClientRects(t){return Array.from(t.getClientRects())}function getDocumentRect(t){const e=getDocumentElement(t),n=getNodeScroll(t),s=t.ownerDocument.body,i=max(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),o=max(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let l=-n.scrollLeft+getWindowScrollBarX(t);const u=-n.scrollTop;return getComputedStyle$2(s).direction==="rtl"&&(l+=max(e.clientWidth,s.clientWidth)-i),{width:i,height:o,x:l,y:u}}function getViewportRect(t,e){const n=getWindow$1(t),s=getDocumentElement(t),i=n.visualViewport;let o=s.clientWidth,l=s.clientHeight,u=0,d=0;if(i){o=i.width,l=i.height;const f=isWebKit();(!f||f&&e==="fixed")&&(u=i.offsetLeft,d=i.offsetTop)}return{width:o,height:l,x:u,y:d}}function getInnerBoundingClientRect(t,e){const n=getBoundingClientRect(t,!0,e==="fixed"),s=n.top+t.clientTop,i=n.left+t.clientLeft,o=isHTMLElement$1(t)?getScale(t):createCoords(1),l=t.clientWidth*o.x,u=t.clientHeight*o.y,d=i*o.x,f=s*o.y;return{width:l,height:u,x:d,y:f}}function getClientRectFromClippingAncestor(t,e,n){let s;if(e==="viewport")s=getViewportRect(t,n);else if(e==="document")s=getDocumentRect(getDocumentElement(t));else if(isElement(e))s=getInnerBoundingClientRect(e,n);else{const i=getVisualOffsets(t);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return rectToClientRect(s)}function hasFixedPositionAncestor(t,e){const n=getParentNode(t);return n===e||!isElement(n)||isLastTraversableNode(n)?!1:getComputedStyle$2(n).position==="fixed"||hasFixedPositionAncestor(n,e)}function getClippingElementAncestors(t,e){const n=e.get(t);if(n)return n;let s=getOverflowAncestors(t,[],!1).filter(u=>isElement(u)&&getNodeName(u)!=="body"),i=null;const o=getComputedStyle$2(t).position==="fixed";let l=o?getParentNode(t):t;for(;isElement(l)&&!isLastTraversableNode(l);){const u=getComputedStyle$2(l),d=isContainingBlock(l);!d&&u.position==="fixed"&&(i=null),(o?!d&&!i:!d&&u.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||isOverflowElement(l)&&!d&&hasFixedPositionAncestor(t,l))?s=s.filter(m=>m!==l):i=u,l=getParentNode(l)}return e.set(t,s),s}function getClippingRect(t){let{element:e,boundary:n,rootBoundary:s,strategy:i}=t;const l=[...n==="clippingAncestors"?isTopLayer(e)?[]:getClippingElementAncestors(e,this._c):[].concat(n),s],u=l[0],d=l.reduce((f,m)=>{const g=getClientRectFromClippingAncestor(e,m,i);return f.top=max(g.top,f.top),f.right=min(g.right,f.right),f.bottom=min(g.bottom,f.bottom),f.left=max(g.left,f.left),f},getClientRectFromClippingAncestor(e,u,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function getDimensions(t){const{width:e,height:n}=getCssDimensions(t);return{width:e,height:n}}function getRectRelativeToOffsetParent(t,e,n){const s=isHTMLElement$1(e),i=getDocumentElement(e),o=n==="fixed",l=getBoundingClientRect(t,!0,o,e);let u={scrollLeft:0,scrollTop:0};const d=createCoords(0);function f(){d.x=getWindowScrollBarX(i)}if(s||!s&&!o)if((getNodeName(e)!=="body"||isOverflowElement(i))&&(u=getNodeScroll(e)),s){const v=getBoundingClientRect(e,!0,o,e);d.x=v.x+e.clientLeft,d.y=v.y+e.clientTop}else i&&f();o&&!s&&i&&f();const m=i&&!s&&!o?getHTMLOffset(i,u):createCoords(0),g=l.left+u.scrollLeft-d.x-m.x,y=l.top+u.scrollTop-d.y-m.y;return{x:g,y,width:l.width,height:l.height}}function isStaticPositioned(t){return getComputedStyle$2(t).position==="static"}function getTrueOffsetParent(t,e){if(!isHTMLElement$1(t)||getComputedStyle$2(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return getDocumentElement(t)===n&&(n=n.ownerDocument.body),n}function getOffsetParent(t,e){const n=getWindow$1(t);if(isTopLayer(t))return n;if(!isHTMLElement$1(t)){let i=getParentNode(t);for(;i&&!isLastTraversableNode(i);){if(isElement(i)&&!isStaticPositioned(i))return i;i=getParentNode(i)}return n}let s=getTrueOffsetParent(t,e);for(;s&&isTableElement(s)&&isStaticPositioned(s);)s=getTrueOffsetParent(s,e);return s&&isLastTraversableNode(s)&&isStaticPositioned(s)&&!isContainingBlock(s)?n:s||getContainingBlock(t)||n}const getElementRects=async function(t){const e=this.getOffsetParent||getOffsetParent,n=this.getDimensions,s=await n(t.floating);return{reference:getRectRelativeToOffsetParent(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function isRTL(t){return getComputedStyle$2(t).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function observeMove(t,e){let n=null,s;const i=getDocumentElement(t);function o(){var u;clearTimeout(s),(u=n)==null||u.disconnect(),n=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),o();const f=t.getBoundingClientRect(),{left:m,top:g,width:y,height:v}=f;if(u||e(),!y||!v)return;const E=floor(g),w=floor(i.clientWidth-(m+y)),A=floor(i.clientHeight-(g+v)),I=floor(m),V={rootMargin:-E+"px "+-w+"px "+-A+"px "+-I+"px",threshold:max(0,min(1,d))||1};let Y=!0;function j(H){const S=H[0].intersectionRatio;if(S!==d){if(!Y)return l();S?l(!1,S):s=setTimeout(()=>{l(!1,1e-7)},1e3)}S===1&&!rectsAreEqual(f,t.getBoundingClientRect())&&l(),Y=!1}try{n=new IntersectionObserver(j,{...V,root:i.ownerDocument})}catch{n=new IntersectionObserver(j,V)}n.observe(t)}return l(!0),o}function autoUpdate(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,f=unwrapElement(t),m=i||o?[...f?getOverflowAncestors(f):[],...getOverflowAncestors(e)]:[];m.forEach(I=>{i&&I.addEventListener("scroll",n,{passive:!0}),o&&I.addEventListener("resize",n)});const g=f&&u?observeMove(f,n):null;let y=-1,v=null;l&&(v=new ResizeObserver(I=>{let[D]=I;D&&D.target===f&&v&&(v.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var V;(V=v)==null||V.observe(e)})),n()}),f&&!d&&v.observe(f),v.observe(e));let E,w=d?getBoundingClientRect(t):null;d&&A();function A(){const I=getBoundingClientRect(t);w&&!rectsAreEqual(w,I)&&n(),w=I,E=requestAnimationFrame(A)}return n(),()=>{var I;m.forEach(D=>{i&&D.removeEventListener("scroll",n),o&&D.removeEventListener("resize",n)}),g==null||g(),(I=v)==null||I.disconnect(),v=null,d&&cancelAnimationFrame(E)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(t,e,n)=>{const s=new Map,i={platform,...n},o={...i.platform,_c:s};return computePosition$1(t,e,{...i,platform:o})};var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!deepEqual(t[s],e[s]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=n;s--!==0;){const o=i[s];if(!(o==="_owner"&&t.$$typeof)&&!deepEqual(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function getDPR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(t,e){const n=getDPR(t);return Math.round(e*n)/n}function useLatestRef(t){const e=reactExports.useRef(t);return index$1(()=>{e.current=t}),e}function useFloating(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:d,open:f}=t,[m,g]=reactExports.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[y,v]=reactExports.useState(s);deepEqual(y,s)||v(s);const[E,w]=reactExports.useState(null),[A,I]=reactExports.useState(null),D=reactExports.useCallback(ie=>{ie!==H.current&&(H.current=ie,w(ie))},[]),V=reactExports.useCallback(ie=>{ie!==S.current&&(S.current=ie,I(ie))},[]),Y=o||E,j=l||A,H=reactExports.useRef(null),S=reactExports.useRef(null),T=reactExports.useRef(m),P=d!=null,U=useLatestRef(d),J=useLatestRef(i),W=useLatestRef(f),K=reactExports.useCallback(()=>{if(!H.current||!S.current)return;const ie={placement:e,strategy:n,middleware:y};J.current&&(ie.platform=J.current),computePosition(H.current,S.current,ie).then(Ne=>{const re={...Ne,isPositioned:W.current!==!1};le.current&&!deepEqual(T.current,re)&&(T.current=re,reactDomExports.flushSync(()=>{g(re)}))})},[y,e,n,J,W]);index$1(()=>{f===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,g(ie=>({...ie,isPositioned:!1})))},[f]);const le=reactExports.useRef(!1);index$1(()=>(le.current=!0,()=>{le.current=!1}),[]),index$1(()=>{if(Y&&(H.current=Y),j&&(S.current=j),Y&&j){if(U.current)return U.current(Y,j,K);K()}},[Y,j,K,U,P]);const ge=reactExports.useMemo(()=>({reference:H,floating:S,setReference:D,setFloating:V}),[D,V]),oe=reactExports.useMemo(()=>({reference:Y,floating:j}),[Y,j]),ce=reactExports.useMemo(()=>{const ie={position:n,left:0,top:0};if(!oe.floating)return ie;const Ne=roundByDPR(oe.floating,m.x),re=roundByDPR(oe.floating,m.y);return u?{...ie,transform:"translate("+Ne+"px, "+re+"px)",...getDPR(oe.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Ne,top:re}},[n,u,oe.floating,m.x,m.y]);return reactExports.useMemo(()=>({...m,update:K,refs:ge,elements:oe,floatingStyles:ce}),[m,K,ge,oe,ce])}const arrow$1=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:i}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?arrow$2({element:s.current,padding:i}).fn(n):{}:s?arrow$2({element:s,padding:i}).fn(n):{}}}},offset=(t,e)=>({...offset$1(t),options:[t,e]}),shift=(t,e)=>({...shift$1(t),options:[t,e]}),limitShift=(t,e)=>({...limitShift$1(t),options:[t,e]}),flip=(t,e)=>({...flip$1(t),options:[t,e]}),size=(t,e)=>({...size$1(t),options:[t,e]}),hide=(t,e)=>({...hide$1(t),options:[t,e]}),arrow=(t,e)=>({...arrow$1(t),options:[t,e]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((t,e)=>{const{children:n,width:s=10,height:i=5,...o}=t;return jsxRuntimeExports.jsx(Primitive.svg,{...o,ref:e,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$2=Arrow$1;function useSize(t){const[e,n]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let l,u;if("borderBoxSize"in o){const d=o.borderBoxSize,f=Array.isArray(d)?d[0]:d;l=f.inlineSize,u=f.blockSize}else l=t.offsetWidth,u=t.offsetHeight;n({width:l,height:u})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=t=>{const{__scopePopper:e,children:n}=t,[s,i]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:e,anchor:s,onAnchorChange:i,children:n})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...i}=t,o=usePopperContext(ANCHOR_NAME$1,n),l=reactExports.useRef(null),u=useComposedRefs(e,l);return reactExports.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||l.current)}),s?null:jsxRuntimeExports.jsx(Primitive.div,{...i,ref:u})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$1="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$1),PopperContent=reactExports.forwardRef((t,e)=>{var Te,ke,Ge,we,de,me;const{__scopePopper:n,side:s="bottom",sideOffset:i=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:g="partial",hideWhenDetached:y=!1,updatePositionStrategy:v="optimized",onPlaced:E,...w}=t,A=usePopperContext(CONTENT_NAME$1,n),[I,D]=reactExports.useState(null),V=useComposedRefs(e,ue=>D(ue)),[Y,j]=reactExports.useState(null),H=useSize(Y),S=(H==null?void 0:H.width)??0,T=(H==null?void 0:H.height)??0,P=s+(o!=="center"?"-"+o:""),U=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},J=Array.isArray(f)?f:[f],W=J.length>0,K={padding:U,boundary:J.filter(isNotNull),altBoundary:W},{refs:le,floatingStyles:ge,placement:oe,isPositioned:ce,middlewareData:ie}=useFloating({strategy:"fixed",placement:P,whileElementsMounted:(...ue)=>autoUpdate(...ue,{animationFrame:v==="always"}),elements:{reference:A.anchor},middleware:[offset({mainAxis:i+T,alignmentAxis:l}),d&&shift({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?limitShift():void 0,...K}),d&&flip({...K}),size({...K,apply:({elements:ue,rects:se,availableWidth:he,availableHeight:Pe})=>{const{width:ze,height:$e}=se.reference,vt=ue.floating.style;vt.setProperty("--radix-popper-available-width",`${he}px`),vt.setProperty("--radix-popper-available-height",`${Pe}px`),vt.setProperty("--radix-popper-anchor-width",`${ze}px`),vt.setProperty("--radix-popper-anchor-height",`${$e}px`)}}),Y&&arrow({element:Y,padding:u}),transformOrigin({arrowWidth:S,arrowHeight:T}),y&&hide({strategy:"referenceHidden",...K})]}),[Ne,re]=getSideAndAlignFromPlacement(oe),_e=useCallbackRef$1(E);useLayoutEffect2(()=>{ce&&(_e==null||_e())},[ce,_e]);const Se=(Te=ie.arrow)==null?void 0:Te.x,Re=(ke=ie.arrow)==null?void 0:ke.y,Be=((Ge=ie.arrow)==null?void 0:Ge.centerOffset)!==0,[Ie,je]=reactExports.useState();return useLayoutEffect2(()=>{I&&je(window.getComputedStyle(I).zIndex)},[I]),jsxRuntimeExports.jsx("div",{ref:le.setFloating,"data-radix-popper-content-wrapper":"",style:{...ge,transform:ce?ge.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ie,"--radix-popper-transform-origin":[(we=ie.transformOrigin)==null?void 0:we.x,(de=ie.transformOrigin)==null?void 0:de.y].join(" "),...((me=ie.hide)==null?void 0:me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:n,placedSide:Ne,onArrowChange:j,arrowX:Se,arrowY:Re,shouldHideArrow:Be,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":Ne,"data-align":re,...w,ref:V,style:{...w.style,animation:ce?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$1;var ARROW_NAME$1="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function t(e,n){const{__scopePopper:s,...i}=e,o=useContentContext(ARROW_NAME$1,s),l=OPPOSITE_SIDE[o.placedSide];return jsxRuntimeExports.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$2,{...i,ref:n,style:{...i.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$1;function isNotNull(t){return t!==null}var transformOrigin=t=>({name:"transformOrigin",options:t,fn(e){var A,I,D;const{placement:n,rects:s,middlewareData:i}=e,l=((A=i.arrow)==null?void 0:A.centerOffset)!==0,u=l?0:t.arrowWidth,d=l?0:t.arrowHeight,[f,m]=getSideAndAlignFromPlacement(n),g={start:"0%",center:"50%",end:"100%"}[m],y=(((I=i.arrow)==null?void 0:I.x)??0)+u/2,v=(((D=i.arrow)==null?void 0:D.y)??0)+d/2;let E="",w="";return f==="bottom"?(E=l?g:`${y}px`,w=`${-d}px`):f==="top"?(E=l?g:`${y}px`,w=`${s.floating.height+d}px`):f==="right"?(E=`${-d}px`,w=l?g:`${v}px`):f==="left"&&(E=`${s.floating.width+d}px`,w=l?g:`${v}px`),{data:{x:E,y:w}}}});function getSideAndAlignFromPlacement(t){const[e,n="center"]=t.split("-");return[e,n]}var Root2$1=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow,PORTAL_NAME$1="Portal",Portal$1=reactExports.forwardRef((t,e)=>{var u;const{container:n,...s}=t,[i,o]=reactExports.useState(!1);useLayoutEffect2(()=>o(!0),[]);const l=n||i&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return l?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...s,ref:e}),l):null});Portal$1.displayName=PORTAL_NAME$1;function useStateMachine(t,e){return reactExports.useReducer((n,s)=>e[n][s]??n,t)}var Presence=t=>{const{present:e,children:n}=t,s=usePresence(e),i=typeof n=="function"?n({present:s.isPresent}):reactExports.Children.only(n),o=useComposedRefs(s.ref,getElementRef(i));return typeof n=="function"||s.isPresent?reactExports.cloneElement(i,{ref:o}):null};Presence.displayName="Presence";function usePresence(t){const[e,n]=reactExports.useState(),s=reactExports.useRef(null),i=reactExports.useRef(t),o=reactExports.useRef("none"),l=t?"mounted":"unmounted",[u,d]=useStateMachine(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const f=getAnimationName(s.current);o.current=u==="mounted"?f:"none"},[u]),useLayoutEffect2(()=>{const f=s.current,m=i.current;if(m!==t){const y=o.current,v=getAnimationName(f);t?d("MOUNT"):v==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(m&&y!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,d]),useLayoutEffect2(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,g=v=>{const w=getAnimationName(s.current).includes(v.animationName);if(v.target===e&&w&&(d("ANIMATION_END"),!i.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},y=v=>{v.target===e&&(o.current=getAnimationName(s.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:reactExports.useCallback(f=>{s.current=f?getComputedStyle(f):null,n(f)},[])}}function getAnimationName(t){return(t==null?void 0:t.animationName)||"none"}function getElementRef(t){var s,i;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var useInsertionEffect=React$1[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[i,o,l]=useUncontrolledState({defaultProp:e,onChange:n}),u=t!==void 0,d=u?t:i;{const m=reactExports.useRef(t!==void 0);reactExports.useEffect(()=>{const g=m.current;g!==u&&console.warn(`${s} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,s])}const f=reactExports.useCallback(m=>{var g;if(u){const y=isFunction$1(m)?m(t):m;y!==t&&((g=l.current)==null||g.call(l,y))}else o(m)},[u,t,o,l]);return[d,f]}function useUncontrolledState({defaultProp:t,onChange:e}){const[n,s]=reactExports.useState(t),i=reactExports.useRef(n),o=reactExports.useRef(e);return useInsertionEffect(()=>{o.current=e},[e]),reactExports.useEffect(()=>{var l;i.current!==n&&((l=o.current)==null||l.call(o,n),i.current=n)},[n,i]),[n,s,o]}function isFunction$1(t){return typeof t=="function"}var getDefaultParent=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(t){return t&&(t.host||unwrapHost(t.parentNode))},correctTargets=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=unwrapHost(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},applyAttributeToOthers=function(t,e,n,s){var i=correctTargets(e,Array.isArray(t)?t:[t]);markerMap[n]||(markerMap[n]=new WeakMap);var o=markerMap[n],l=[],u=new Set,d=new Set(i),f=function(g){!g||u.has(g)||(u.add(g),f(g.parentNode))};i.forEach(f);var m=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(y){if(u.has(y))m(y);else try{var v=y.getAttribute(s),E=v!==null&&v!=="false",w=(counterMap.get(y)||0)+1,A=(o.get(y)||0)+1;counterMap.set(y,w),o.set(y,A),l.push(y),w===1&&E&&uncontrolledNodes.set(y,!0),A===1&&y.setAttribute(n,"true"),E||y.setAttribute(s,"true")}catch(I){console.error("aria-hidden: cannot operate on ",y,I)}})};return m(e),u.clear(),lockCount++,function(){l.forEach(function(g){var y=counterMap.get(g)-1,v=o.get(g)-1;counterMap.set(g,y),o.set(g,v),y||(uncontrolledNodes.has(g)||g.removeAttribute(s),uncontrolledNodes.delete(g)),v||g.removeAttribute(n)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),i=getDefaultParent(t);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live]"))),applyAttributeToOthers(s,i,n,"aria-hidden")):function(){return null}},zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function useCallbackRef(t,e){var n=reactExports.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var i=n.value;i!==s&&(n.value=s,n.callback(s,i))}}}})[0];return n.callback=e,n.facade}var useIsomorphicLayoutEffect$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(t,e){var n=useCallbackRef(null,function(s){return t.forEach(function(i){return assignRef(i,s)})});return useIsomorphicLayoutEffect$1(function(){var s=currentValues.get(n);if(s){var i=new Set(s),o=new Set(t),l=n.current;i.forEach(function(u){o.has(u)||assignRef(u,null)}),o.forEach(function(u){i.has(u)||assignRef(u,l)})}currentValues.set(n,t)},[t]),n}function ItoI(t){return t}function innerCreateMedium(t,e){e===void 0&&(e=ItoI);var n=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var l=e(o,s);return n.push(l),function(){n=n.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(s=!0;n.length;){var l=n;n=[],l.forEach(o)}n={push:function(u){return o(u)},filter:function(){return n}}},assignMedium:function(o){s=!0;var l=[];if(n.length){var u=n;n=[],u.forEach(o),l=n}var d=function(){var m=l;l=[],m.forEach(o)},f=function(){return Promise.resolve().then(d)};f(),n={push:function(m){l.push(m),f()},filter:function(m){return l=l.filter(m),n}}}};return i}function createSidecarMedium(t){t===void 0&&(t={});var e=innerCreateMedium(null);return e.options=__assign({async:!0,ssr:!1},t),e}var SideCar$1=function(t){var e=t.sideCar,n=__rest(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return reactExports.createElement(s,__assign({},n))};SideCar$1.isSideCarExport=!0;function exportSidecar(t,e){return t.useMedium(e),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(t,e){var n=reactExports.useRef(null),s=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),i=s[0],o=s[1],l=t.forwardProps,u=t.children,d=t.className,f=t.removeScrollBar,m=t.enabled,g=t.shards,y=t.sideCar,v=t.noIsolation,E=t.inert,w=t.allowPinchZoom,A=t.as,I=A===void 0?"div":A,D=t.gapMode,V=__rest(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),Y=y,j=useMergeRefs([n,e]),H=__assign(__assign({},V),i);return reactExports.createElement(reactExports.Fragment,null,m&&reactExports.createElement(Y,{sideCar:effectCar,removeScrollBar:f,shards:g,noIsolation:v,inert:E,setCallbacks:o,allowPinchZoom:!!w,lockRef:n,gapMode:D}),l?reactExports.cloneElement(reactExports.Children.only(u),__assign(__assign({},H),{ref:j})):reactExports.createElement(I,__assign({},H,{className:d,ref:j}),u))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=getNonce();return e&&t.setAttribute("nonce",e),t}function injectStyles(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function insertStyleTag(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var stylesheetSingleton=function(){var t=0,e=null;return{add:function(n){t==0&&(e=makeStyleTag())&&(injectStyles(e,n),insertStyleTag(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},styleHookSingleton=function(){var t=stylesheetSingleton();return function(e,n){reactExports.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},styleSingleton=function(){var t=styleHookSingleton(),e=function(n){var s=n.styles,i=n.dynamic;return t(s,i),null};return e},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(t){return parseInt(t||"",10)||0},getOffset=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[parse$1(n),parse$1(s),parse$1(i)]},getGapWidth=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return zeroGap;var e=getOffset(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(t,e,n,s){var i=t.left,o=t.top,l=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(u,`px;
  }
`)},getCurrentUseCounter=function(){var t=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(t)?t:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var t=getCurrentUseCounter()-1;t<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,t.toString())}},[])},RemoveScrollBar=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,i=s===void 0?"margin":s;useLockAttribute();var o=reactExports.useMemo(function(){return getGapWidth(i)},[i]);return reactExports.createElement(Style,{styles:getStyles(o,!e,i,n?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(t){return t.tagName==="TEXTAREA"},elementCanBeScrolled=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!alwaysContainsScroll(t)&&n[e]==="visible")},elementCouldBeVScrolled=function(t){return elementCanBeScrolled(t,"overflowY")},elementCouldBeHScrolled=function(t){return elementCanBeScrolled(t,"overflowX")},locationCouldBeScrolled=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=elementCouldBeScrolled(t,s);if(i){var o=getScrollVariables(t,s),l=o[1],u=o[2];if(l>u)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},getVScrollVariables=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},getHScrollVariables=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},elementCouldBeScrolled=function(t,e){return t==="v"?elementCouldBeVScrolled(e):elementCouldBeHScrolled(e)},getScrollVariables=function(t,e){return t==="v"?getVScrollVariables(e):getHScrollVariables(e)},getDirectionFactor=function(t,e){return t==="h"&&e==="rtl"?-1:1},handleScroll=function(t,e,n,s,i){var o=getDirectionFactor(t,window.getComputedStyle(e).direction),l=o*s,u=n.target,d=e.contains(u),f=!1,m=l>0,g=0,y=0;do{var v=getScrollVariables(t,u),E=v[0],w=v[1],A=v[2],I=w-A-o*E;(E||I)&&elementCouldBeScrolled(t,u)&&(g+=I,y+=E),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!d&&u!==document.body||d&&(e.contains(u)||e===u));return(m&&Math.abs(g)<1||!m&&Math.abs(y)<1)&&(f=!0),f},getTouchXY=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(t){return[t.deltaX,t.deltaY]},extractRef=function(t){return t&&"current"in t?t.current:t},deltaCompare=function(t,e){return t[0]===e[0]&&t[1]===e[1]},generateStyle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(t){var e=reactExports.useRef([]),n=reactExports.useRef([0,0]),s=reactExports.useRef(),i=reactExports.useState(idCounter++)[0],o=reactExports.useState(styleSingleton)[0],l=reactExports.useRef(t);reactExports.useEffect(function(){l.current=t},[t]),reactExports.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var w=__spreadArray([t.lockRef.current],(t.shards||[]).map(extractRef),!0).filter(Boolean);return w.forEach(function(A){return A.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var u=reactExports.useCallback(function(w,A){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!l.current.allowPinchZoom;var I=getTouchXY(w),D=n.current,V="deltaX"in w?w.deltaX:D[0]-I[0],Y="deltaY"in w?w.deltaY:D[1]-I[1],j,H=w.target,S=Math.abs(V)>Math.abs(Y)?"h":"v";if("touches"in w&&S==="h"&&H.type==="range")return!1;var T=locationCouldBeScrolled(S,H);if(!T)return!0;if(T?j=S:(j=S==="v"?"h":"v",T=locationCouldBeScrolled(S,H)),!T)return!1;if(!s.current&&"changedTouches"in w&&(V||Y)&&(s.current=j),!j)return!0;var P=s.current||j;return handleScroll(P,A,w,P==="h"?V:Y)},[]),d=reactExports.useCallback(function(w){var A=w;if(!(!lockStack.length||lockStack[lockStack.length-1]!==o)){var I="deltaY"in A?getDeltaXY(A):getTouchXY(A),D=e.current.filter(function(j){return j.name===A.type&&(j.target===A.target||A.target===j.shadowParent)&&deltaCompare(j.delta,I)})[0];if(D&&D.should){A.cancelable&&A.preventDefault();return}if(!D){var V=(l.current.shards||[]).map(extractRef).filter(Boolean).filter(function(j){return j.contains(A.target)}),Y=V.length>0?u(A,V[0]):!l.current.noIsolation;Y&&A.cancelable&&A.preventDefault()}}},[]),f=reactExports.useCallback(function(w,A,I,D){var V={name:w,delta:A,target:I,should:D,shadowParent:getOutermostShadowParent(I)};e.current.push(V),setTimeout(function(){e.current=e.current.filter(function(Y){return Y!==V})},1)},[]),m=reactExports.useCallback(function(w){n.current=getTouchXY(w),s.current=void 0},[]),g=reactExports.useCallback(function(w){f(w.type,getDeltaXY(w),w.target,u(w,t.lockRef.current))},[]),y=reactExports.useCallback(function(w){f(w.type,getTouchXY(w),w.target,u(w,t.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(o),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:y}),document.addEventListener("wheel",d,nonPassive),document.addEventListener("touchmove",d,nonPassive),document.addEventListener("touchstart",m,nonPassive),function(){lockStack=lockStack.filter(function(w){return w!==o}),document.removeEventListener("wheel",d,nonPassive),document.removeEventListener("touchmove",d,nonPassive),document.removeEventListener("touchstart",m,nonPassive)}},[]);var v=t.removeScrollBar,E=t.inert;return reactExports.createElement(reactExports.Fragment,null,E?reactExports.createElement(o,{styles:generateStyle(i)}):null,v?reactExports.createElement(RemoveScrollBar,{gapMode:t.gapMode}):null)}function getOutermostShadowParent(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(t,e){return reactExports.createElement(RemoveScroll,__assign({},t,{ref:e,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var POPOVER_NAME="Popover",[createPopoverContext,createPopoverScope]=createContextScope(POPOVER_NAME,[createPopperScope]),usePopperScope=createPopperScope(),[PopoverProvider,usePopoverContext]=createPopoverContext(POPOVER_NAME),Popover$1=t=>{const{__scopePopover:e,children:n,open:s,defaultOpen:i,onOpenChange:o,modal:l=!1}=t,u=usePopperScope(e),d=reactExports.useRef(null),[f,m]=reactExports.useState(!1),[g,y]=useControllableState({prop:s,defaultProp:i??!1,onChange:o,caller:POPOVER_NAME});return jsxRuntimeExports.jsx(Root2$1,{...u,children:jsxRuntimeExports.jsx(PopoverProvider,{scope:e,contentId:useId(),triggerRef:d,open:g,onOpenChange:y,onOpenToggle:reactExports.useCallback(()=>y(v=>!v),[y]),hasCustomAnchor:f,onCustomAnchorAdd:reactExports.useCallback(()=>m(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>m(!1),[]),modal:l,children:n})})};Popover$1.displayName=POPOVER_NAME;var ANCHOR_NAME="PopoverAnchor",PopoverAnchor=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=usePopoverContext(ANCHOR_NAME,n),o=usePopperScope(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:u}=i;return reactExports.useEffect(()=>(l(),()=>u()),[l,u]),jsxRuntimeExports.jsx(Anchor,{...o,...s,ref:e})});PopoverAnchor.displayName=ANCHOR_NAME;var TRIGGER_NAME="PopoverTrigger",PopoverTrigger$1=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=usePopoverContext(TRIGGER_NAME,n),o=usePopperScope(n),l=useComposedRefs(e,i.triggerRef),u=jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":getState$1(i.open),...s,ref:l,onClick:composeEventHandlers(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?u:jsxRuntimeExports.jsx(Anchor,{asChild:!0,...o,children:u})});PopoverTrigger$1.displayName=TRIGGER_NAME;var PORTAL_NAME="PopoverPortal",[PortalProvider,usePortalContext]=createPopoverContext(PORTAL_NAME,{forceMount:void 0}),PopoverPortal=t=>{const{__scopePopover:e,forceMount:n,children:s,container:i}=t,o=usePopoverContext(PORTAL_NAME,e);return jsxRuntimeExports.jsx(PortalProvider,{scope:e,forceMount:n,children:jsxRuntimeExports.jsx(Presence,{present:n||o.open,children:jsxRuntimeExports.jsx(Portal$1,{asChild:!0,container:i,children:s})})})};PopoverPortal.displayName=PORTAL_NAME;var CONTENT_NAME="PopoverContent",PopoverContent$1=reactExports.forwardRef((t,e)=>{const n=usePortalContext(CONTENT_NAME,t.__scopePopover),{forceMount:s=n.forceMount,...i}=t,o=usePopoverContext(CONTENT_NAME,t.__scopePopover);return jsxRuntimeExports.jsx(Presence,{present:s||o.open,children:o.modal?jsxRuntimeExports.jsx(PopoverContentModal,{...i,ref:e}):jsxRuntimeExports.jsx(PopoverContentNonModal,{...i,ref:e})})});PopoverContent$1.displayName=CONTENT_NAME;var Slot=createSlot("PopoverContent.RemoveScroll"),PopoverContentModal=reactExports.forwardRef((t,e)=>{const n=usePopoverContext(CONTENT_NAME,t.__scopePopover),s=reactExports.useRef(null),i=useComposedRefs(e,s),o=reactExports.useRef(!1);return reactExports.useEffect(()=>{const l=s.current;if(l)return hideOthers(l)},[]),jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(PopoverContentImpl,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(t.onCloseAutoFocus,l=>{var u;l.preventDefault(),o.current||(u=n.triggerRef.current)==null||u.focus()}),onPointerDownOutside:composeEventHandlers(t.onPointerDownOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,f=u.button===2||d;o.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:composeEventHandlers(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),PopoverContentNonModal=reactExports.forwardRef((t,e)=>{const n=usePopoverContext(CONTENT_NAME,t.__scopePopover),s=reactExports.useRef(!1),i=reactExports.useRef(!1);return jsxRuntimeExports.jsx(PopoverContentImpl,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,u;(l=t.onCloseAutoFocus)==null||l.call(t,o),o.defaultPrevented||(s.current||(u=n.triggerRef.current)==null||u.focus(),o.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:o=>{var d,f;(d=t.onInteractOutside)==null||d.call(t,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=o.target;((f=n.triggerRef.current)==null?void 0:f.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),PopoverContentImpl=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,...g}=t,y=usePopoverContext(CONTENT_NAME,n),v=usePopperScope(n);return useFocusGuards(),jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:o,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:m,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onDismiss:()=>y.onOpenChange(!1),children:jsxRuntimeExports.jsx(Content,{"data-state":getState$1(y.open),role:"dialog",id:y.contentId,...v,...g,ref:e,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),CLOSE_NAME="PopoverClose",PopoverClose=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=usePopoverContext(CLOSE_NAME,n);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...s,ref:e,onClick:composeEventHandlers(t.onClick,()=>i.onOpenChange(!1))})});PopoverClose.displayName=CLOSE_NAME;var ARROW_NAME="PopoverArrow",PopoverArrow=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=usePopperScope(n);return jsxRuntimeExports.jsx(Arrow,{...i,...s,ref:e})});PopoverArrow.displayName=ARROW_NAME;function getState$1(t){return t?"open":"closed"}var Root2=Popover$1,Trigger=PopoverTrigger$1,Portal=PopoverPortal,Content2=PopoverContent$1;function Popover({...t}){return jsxRuntimeExports.jsx(Root2,{"data-slot":"popover",...t})}function PopoverTrigger({...t}){return jsxRuntimeExports.jsx(Trigger,{"data-slot":"popover-trigger",...t})}function PopoverContent({className:t,align:e="center",sideOffset:n=4,...s}){return jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(Content2,{"data-slot":"popover-content",align:e,sideOffset:n,className:cn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...s})})}const PostTextGenerator=({postType:t,match:e,translations:n,confrontoData:s,escalacaoOficial:i=!1,playerName:o,substitutions:l})=>{const{getTeamCode:u,loading:d,error:f}=useTeamCodes(),[m,g]=reactExports.useState(""),[y,v]=reactExports.useState(""),[E,w]=reactExports.useState(""),[A,I]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{if(e){const T=await u(e.teams.home.id,e.teams.home.name),P=await u(e.teams.away.id,e.teams.away.name);g(T),v(P),w(t==="fimDeJogo"?`Partidaça pela ${formatCompetitionRound(e,n)} da ${e.league.name}! Resultado final no ${e.fixture.venue.name}.`:t==="melhorDaPartida"||t==="gol"?`Atuação de gala na partida entre ${e.teams.home.name} e ${e.teams.away.name}!`:"")}})()},[e,t,u,n]);const V=reactExports.useCallback(()=>{if(!e||d)return"Carregando informações da partida...";if(f)return`Erro ao carregar códigos dos times: ${f}`;const S=formatDateToBrazilian(convertToSaoPauloTime(new Date(e.fixture.date))),T=S.split(" às ")[1],P=formatCompetitionRound(e,n),U=e.league.name.replace(/\s/g,""),J=`${m}${y}`;function W(oe){return!oe||oe.length===0?"":oe.map((ce,ie)=>(ie===0?`
`:"")+`🔴 #${ce.playerOut.number} ${ce.playerOut.name}
🟢 #${ce.playerIn.number} ${ce.playerIn.name}`+(ie<oe.length-1?`
---
`:"")).join("")}const K=()=>{var oe,ce;return((oe=e.goals)==null?void 0:oe.home)!==void 0&&((ce=e.goals)==null?void 0:ce.away)!==void 0?`${e.teams.home.name} ${e.goals.home}-${e.goals.away} ${e.teams.away.name}`:`${e.teams.home.name} x ${e.teams.away.name}`};let le="",ge="";switch(t){case"proximoJogo":le=`
⚽️ PRÓXIMO JOGO: ${e.teams.home.name} 🆚 ${e.teams.away.name}!
🏆 ${P}
🗣️ Arbitragem: ${e.fixture.referee||"A definir"}
🏟️ Local: ${e.fixture.venue.name}
🗓️ Data e Hora: ${S} (Horário de Brasília)
Prepare-se para torcer! 🔥
`.trim(),ge=`
#${U} #${J}${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"matchday":le=`
🎉 É DIA DE JOGO! ${e.teams.home.name} 🆚 ${e.teams.away.name}!
🏆 ${P}
🗣️ Arbitragem: ${e.fixture.referee||"A definir"}
🏟️ Local: ${e.fixture.venue.name}
⏰ Horário: ${T} (Horário de Brasília)!
🔥 A torcida já está aquecida!
`.trim(),ge=`
#${U} #${J} #DiaDeJogo #Matchday${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"escalacao":le=`
⚽️ ${i?"TIME PRONTO PARA":"NOSSA ESCALAÇÃO:"} ${e.teams.home.name} 🆚 ${e.teams.away.name}! ⚽️
🏆 ${P}
🗣️ Arbitragem: ${e.fixture.referee||"A definir"}
🏟️ Local: ${e.fixture.venue.name}
🗓️ Data e Hora: ${S} (Horário de Brasília)
🎬 Pré-jogo já está no nosso canal!
Durante o jogo teremos REACT AO VIVO no Youtube!
${i?"Assim vem o Liverpool hoje, o que você achou? Conta nos comentários! ":"Essa é a escalação que imaginamos para hoje! Qual seria a sua? "}👇
`.trim(),ge=`
#${J} #${U}${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"confronto":le=`
🔥 HISTÓRICO DO CONFRONTO: ${e.teams.home.name} 🆚 ${e.teams.away.name} 🔥

${s?`Até aqui, foram ${s.awayWins+s.draws+s.homeWins} confrontos:
✅ ${e.teams.home.name}: ${s.homeWins} vitórias  
✅ ${e.teams.away.name}: ${s.awayWins} vitórias  
🤝 Empates: ${s.draws}

📊 Veja a distribuição completa na imagem!`:""}
🗓️ Próximo capítulo dessa história: ${S} (Horário de Brasília)

Quem leva a melhor dessa vez? Comenta aí! 👇
`.trim(),ge=`
#${J} #${U}${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"fimDeJogo":le=`
🔚 FIM DE JOGO! ${K()}.
${E}
`.trim(),ge=`
#${U} #${J} #ResultadoFinal #FullTime${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"melhorDaPartida":le=`
✨ CRAQUE DO JOGO! ✨
${E}
`.trim(),ge=`
#${U} #${J} #MelhorDaPartida #Destaque #MOTM #MVP #ManOfTheMatch${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"inicioJogo":le=`
🚀 A BOLA VAI ROLAR! ${K()}!
🏆 ${P}
🏟️ ${e.fixture.venue.name}
Que comece o espetáculo! 🔥
`.trim(),ge=`
#${U} #${J} #InicioDeJogo #KickOff${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"intervalo":le=`
⏸️ INTERVALO! ${K()}!
🏆 ${P}
🏟️ ${e.fixture.venue.name}
Primeiro tempo encerrado! Vamos para o segundo! 💪
`.trim(),ge=`
#${U} #${J} #Intervalo #HalfTime${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"inicioSegundoTempo":le=`
🔄 SEGUNDO TEMPO! ${K()}!
🏆 ${P}
🏟️ ${e.fixture.venue.name}
A bola volta a rolar! Vamos em busca do resultado! ⚽
`.trim(),ge=`
#${U} #${J} #SegundoTempo #SecondHalf${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"inicioProrrogacao":le=`
⏱️ PRORROGAÇÃO! ${K()}!
🏆 ${P}
🏟️ ${e.fixture.venue.name}
Mais 30 minutos de emoção! Quem vai decidir? 🔥
`.trim(),ge=`
#${U} #${J} #Prorrogacao #ExtraTime${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"inicioSegundoTempoProrrogacao":le=`
⏱️ SEGUNDO TEMPO DA PRORROGAÇÃO! ${K()}!
🏆 ${P}
🏟️ ${e.fixture.venue.name}
Últimos 15 minutos! Tudo pode acontecer! 💥
`.trim(),ge=`
#${U} #${J} #Prorrogacao #ExtraTime${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"gol":le=`
⚽ GOOOOOOL! ${o?`${o}!`:""} ${K()}!
🏆 ${P}
🏟️ ${e.fixture.venue.name}
${E}
`.trim(),ge=`
#${U} #${J} #Gol #Goal${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;case"substituicao":le=`
🔄 SUBSTITUIÇÃO! ${K()}!
🏆 ${P}
🏟️ ${e.fixture.venue.name}
${W(l)}
`.trim(),ge=`

#${U} #${J} #Substituicao #Substitution${e.league.name==="Premier League"?" #PremierLeagueNaESPN":""}`;break;default:le="Selecione um tipo de postagem válido.";break}return le+ge},[t,e,d,f,m,y,E,n,o])(),Y=reactExports.useCallback(async()=>{try{await navigator.clipboard.writeText(V),I(!0),setTimeout(()=>I(!1),2e3)}catch(S){console.error("Falha ao copiar texto: ",S),alert("Erro ao copiar texto. Por favor, copie manualmente.")}},[V]),j=reactExports.useCallback(()=>{var J,W,K,le;if(!e)return[];const S=formatDateToBrazilian(convertToSaoPauloTime(new Date(e.fixture.date))),T=S.split(" às ")[1],P=formatCompetitionRound(e,n),U=[{label:`Time da Casa (${e.teams.home.name})`,value:e.teams.home.name},{label:`Time Visitante (${e.teams.away.name})`,value:e.teams.away.name},{label:`Competição/Rodada (${P})`,value:P},{label:`Estádio (${e.fixture.venue.name})`,value:e.fixture.venue.name},{label:`Data (${S})`,value:S},{label:`Hora (${T})`,value:T},{label:`Árbitro (${e.fixture.referee||"Não Informado"})`,value:e.fixture.referee||"Não Informado"}];return t==="fimDeJogo"||t==="melhorDaPartida"||t==="gol"?[...U,{label:`Placar (${((J=e.goals)==null?void 0:J.home)||0} x ${((W=e.goals)==null?void 0:W.away)||0})`,value:`${((K=e.goals)==null?void 0:K.home)||0} x ${((le=e.goals)==null?void 0:le.away)||0}`}]:U},[e,t,n]),H=["fimDeJogo","melhorDaPartida","gol"].includes(t);return e?jsxRuntimeExports.jsxs("div",{className:"space-y-6 p-6 bg-white rounded-lg shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800 text-center mb-4",children:"Gerador de Texto para Postagem"}),H&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Edite o Conteúdo da Postagem:"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Textarea,{value:E,onChange:S=>w(S.target.value),rows:6,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display",placeholder:"Escreva sua mensagem aqui..."})}),jsxRuntimeExports.jsx("div",{className:"w-full md:w-64",children:jsxRuntimeExports.jsxs(Popover,{children:[jsxRuntimeExports.jsx(PopoverTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-display-medium border-dashed border-gray-300",children:[jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 mr-2"})," Inserir Variáveis"]})}),jsxRuntimeExports.jsxs(PopoverContent,{className:"w-72 p-2 bg-white rounded-md shadow-lg border border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-display-semibold text-gray-800 mb-2",children:"Variáveis da Partida:"}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:j().map((S,T)=>jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>w(P=>P+S.value+" "),className:"w-full justify-start text-left text-gray-700 hover:bg-red-50 hover:text-red-700 font-display",children:S.label},T))})]})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Preview da Postagem (Clique para Copiar):"}),jsxRuntimeExports.jsxs("div",{onClick:Y,className:`relative p-4 border rounded-lg cursor-pointer transition-all min-h-[100px]
            ${A?"border-green-500 bg-green-50":"border-gray-200 hover:border-red-300 hover:bg-red-50"}
            font-display whitespace-pre-wrap break-words text-gray-800`,style:{whiteSpace:"pre-wrap"},children:[d?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-4",children:[jsxRuntimeExports.jsx(Info,{className:"w-5 h-5 animate-spin text-red-600 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Preparando texto..."})]}):V,A&&jsxRuntimeExports.jsxs("div",{className:"absolute top-2 right-2 flex items-center text-green-600 text-sm",children:[jsxRuntimeExports.jsx(ClipboardCheck,{className:"w-4 h-4 mr-1"})," Copiado!"]}),!A&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 text-gray-400",children:jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 font-display mt-1",children:"O texto acima será copiado para todas as suas redes sociais."})]})]}):jsxRuntimeExports.jsx("div",{className:"p-4 text-gray-600 font-display-medium",children:"Nenhuma partida selecionada para gerar o texto."})};function useCombinedRefs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return reactExports.useMemo(()=>s=>{e.forEach(i=>i(s))},e)}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function isNode(t){return"nodeType"in t}function getWindow(t){var e,n;return t?isWindow(t)?t:isNode(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function isDocument(t){const{Document:e}=getWindow(t);return t instanceof e}function isHTMLElement(t){return isWindow(t)?!1:t instanceof getWindow(t).HTMLElement}function isSVGElement(t){return t instanceof getWindow(t).SVGElement}function getOwnerDocument(t){return t?isWindow(t)?t.document:isNode(t)?isDocument(t)?t:isHTMLElement(t)||isSVGElement(t)?t.ownerDocument:document:document:document}const useIsomorphicLayoutEffect=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(t){const e=reactExports.useRef(t);return useIsomorphicLayoutEffect(()=>{e.current=t}),reactExports.useCallback(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return e.current==null?void 0:e.current(...s)},[])}function useInterval(){const t=reactExports.useRef(null),e=reactExports.useCallback((s,i)=>{t.current=setInterval(s,i)},[]),n=reactExports.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function useLatestValue(t,e){e===void 0&&(e=[t]);const n=reactExports.useRef(t);return useIsomorphicLayoutEffect(()=>{n.current!==t&&(n.current=t)},e),n}function useLazyMemo(t,e){const n=reactExports.useRef();return reactExports.useMemo(()=>{const s=t(n.current);return n.current=s,s},[...e])}function useNodeRef(t){const e=useEvent(t),n=reactExports.useRef(null),s=reactExports.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,s]}function usePrevious$1(t){const e=reactExports.useRef();return reactExports.useEffect(()=>{e.current=t},[t]),e.current}let ids={};function useUniqueId(t,e){return reactExports.useMemo(()=>{if(e)return e;const n=ids[t]==null?0:ids[t]+1;return ids[t]=n,t+"-"+n},[t,e])}function createAdjustmentFn(t){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>{const u=Object.entries(l);for(const[d,f]of u){const m=o[d];m!=null&&(o[d]=m+t*f)}return o},{...e})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(t){return"clientX"in t&&"clientY"in t}function isKeyboardEvent(t){if(!t)return!1;const{KeyboardEvent:e}=getWindow(t.target);return e&&t instanceof e}function isTouchEvent(t){if(!t)return!1;const{TouchEvent:e}=getWindow(t.target);return e&&t instanceof e}function getEventCoordinates(t){if(isTouchEvent(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return hasViewportRelativeCoordinates(t)?{x:t.clientX,y:t.clientY}:null}const CSS$1=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[CSS$1.Translate.toString(t),CSS$1.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:s}=t;return e+" "+n+"ms "+s}}}),SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(t){return t.matches(SELECTOR)?t:t.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(t){let{id:e,value:n}=t;return React.createElement("div",{id:e,style:hiddenStyles},n)}function LiveRegion(t){let{id:e,announcement:n,ariaLiveType:s="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React.createElement("div",{id:e,style:i,role:"status","aria-live":s,"aria-atomic":!0},n)}function useAnnouncement(){const[t,e]=reactExports.useState("");return{announce:reactExports.useCallback(s=>{s!=null&&e(s)},[]),announcement:t}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(t){const e=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function useDndMonitorProvider(){const[t]=reactExports.useState(()=>new Set),e=reactExports.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[reactExports.useCallback(s=>{let{type:i,event:o}=s;t.forEach(l=>{var u;return(u=l[i])==null?void 0:u.call(l,o)})},[t]),e]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Accessibility(t){let{announcements:e=defaultAnnouncements,container:n,hiddenTextDescribedById:s,screenReaderInstructions:i=defaultScreenReaderInstructions}=t;const{announce:o,announcement:l}=useAnnouncement(),u=useUniqueId("DndLiveRegion"),[d,f]=reactExports.useState(!1);if(reactExports.useEffect(()=>{f(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart(g){let{active:y}=g;o(e.onDragStart({active:y}))},onDragMove(g){let{active:y,over:v}=g;e.onDragMove&&o(e.onDragMove({active:y,over:v}))},onDragOver(g){let{active:y,over:v}=g;o(e.onDragOver({active:y,over:v}))},onDragEnd(g){let{active:y,over:v}=g;o(e.onDragEnd({active:y,over:v}))},onDragCancel(g){let{active:y,over:v}=g;o(e.onDragCancel({active:y,over:v}))}}),[o,e])),!d)return null;const m=React.createElement(React.Fragment,null,React.createElement(HiddenText,{id:s,value:i.draggable}),React.createElement(LiveRegion,{id:u,announcement:l}));return n?reactDomExports.createPortal(m,n):m}var Action;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop$1(){}function useSensor(t,e){return reactExports.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function useSensors(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return reactExports.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const defaultCoordinates=Object.freeze({x:0,y:0});function distanceBetween(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function sortCollisionsAsc(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return n-s}function sortCollisionsDesc(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return s-n}function cornersOfRectangle(t){let{left:e,top:n,height:s,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+s},{x:e+i,y:n+s}]}function getFirstCollision(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function centerOfRectangle(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const closestCenter=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const i=centerOfRectangle(e,e.left,e.top),o=[];for(const l of s){const{id:u}=l,d=n.get(u);if(d){const f=distanceBetween(centerOfRectangle(d),i);o.push({id:u,data:{droppableContainer:l,value:f}})}}return o.sort(sortCollisionsAsc)},closestCorners=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const i=cornersOfRectangle(e),o=[];for(const l of s){const{id:u}=l,d=n.get(u);if(d){const f=cornersOfRectangle(d),m=i.reduce((y,v,E)=>y+distanceBetween(f[E],v),0),g=Number((m/4).toFixed(4));o.push({id:u,data:{droppableContainer:l,value:g}})}}return o.sort(sortCollisionsAsc)};function getIntersectionRatio(t,e){const n=Math.max(e.top,t.top),s=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),l=i-s,u=o-n;if(s<i&&n<o){const d=e.width*e.height,f=t.width*t.height,m=l*u,g=m/(d+f-m);return Number(g.toFixed(4))}return 0}const rectIntersection=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const i=[];for(const o of s){const{id:l}=o,u=n.get(l);if(u){const d=getIntersectionRatio(u,e);d>0&&i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(sortCollisionsDesc)};function adjustScale(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function getRectDelta(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:defaultCoordinates}function createRectAdjustmentFn(t){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return i.reduce((l,u)=>({...l,top:l.top+t*u.y,bottom:l.bottom+t*u.y,left:l.left+t*u.x,right:l.right+t*u.x}),{...n})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function inverseTransform(t,e,n){const s=parseTransform(e);if(!s)return t;const{scaleX:i,scaleY:o,x:l,y:u}=s,d=t.left-l-(1-i)*parseFloat(n),f=t.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),m=i?t.width/i:t.width,g=o?t.height/o:t.height;return{width:m,height:g,top:f,right:d+m,bottom:f+g,left:d}}const defaultOptions={ignoreTransform:!1};function getClientRect(t,e){e===void 0&&(e=defaultOptions);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:m}=getWindow(t).getComputedStyle(t);f&&(n=inverseTransform(n,f,m))}const{top:s,left:i,width:o,height:l,bottom:u,right:d}=n;return{top:s,left:i,width:o,height:l,bottom:u,right:d}}function getTransformAgnosticClientRect(t){return getClientRect(t,{ignoreTransform:!0})}function getWindowClientRect(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function isFixed(t,e){return e===void 0&&(e=getWindow(t).getComputedStyle(t)),e.position==="fixed"}function isScrollable(t,e){e===void 0&&(e=getWindow(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=e[i];return typeof o=="string"?n.test(o):!1})}function getScrollableAncestors(t,e){const n=[];function s(i){if(e!=null&&n.length>=e||!i)return n;if(isDocument(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!isHTMLElement(i)||isSVGElement(i)||n.includes(i))return n;const o=getWindow(t).getComputedStyle(i);return i!==t&&isScrollable(i,o)&&n.push(i),isFixed(i,o)?n:s(i.parentNode)}return t?s(t):n}function getFirstScrollableAncestor(t){const[e]=getScrollableAncestors(t,1);return e??null}function getScrollableElement(t){return!canUseDOM||!t?null:isWindow(t)?t:isNode(t)?isDocument(t)||t===getOwnerDocument(t).scrollingElement?window:isHTMLElement(t)?t:null:null}function getScrollXCoordinate(t){return isWindow(t)?t.scrollX:t.scrollLeft}function getScrollYCoordinate(t){return isWindow(t)?t.scrollY:t.scrollTop}function getScrollCoordinates(t){return{x:getScrollXCoordinate(t),y:getScrollYCoordinate(t)}}var Direction;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(t){return!canUseDOM||!t?!1:t===document.scrollingElement}function getScrollPosition(t){const e={x:0,y:0},n=isDocumentScrollingElement(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,l=t.scrollTop>=s.y,u=t.scrollLeft>=s.x;return{isTop:i,isLeft:o,isBottom:l,isRight:u,maxScroll:s,minScroll:e}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(t,e,n,s,i){let{top:o,left:l,right:u,bottom:d}=n;s===void 0&&(s=10),i===void 0&&(i=defaultThreshold);const{isTop:f,isBottom:m,isLeft:g,isRight:y}=getScrollPosition(t),v={x:0,y:0},E={x:0,y:0},w={height:e.height*i.y,width:e.width*i.x};return!f&&o<=e.top+w.height?(v.y=Direction.Backward,E.y=s*Math.abs((e.top+w.height-o)/w.height)):!m&&d>=e.bottom-w.height&&(v.y=Direction.Forward,E.y=s*Math.abs((e.bottom-w.height-d)/w.height)),!y&&u>=e.right-w.width?(v.x=Direction.Forward,E.x=s*Math.abs((e.right-w.width-u)/w.width)):!g&&l<=e.left+w.width&&(v.x=Direction.Backward,E.x=s*Math.abs((e.left+w.width-l)/w.width)),{direction:v,speed:E}}function getScrollElementRect(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:n,right:s,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:s,bottom:i,width:t.clientWidth,height:t.clientHeight}}function getScrollOffsets(t){return t.reduce((e,n)=>add(e,getScrollCoordinates(n)),defaultCoordinates)}function getScrollXOffset(t){return t.reduce((e,n)=>e+getScrollXCoordinate(n),0)}function getScrollYOffset(t){return t.reduce((e,n)=>e+getScrollYCoordinate(n),0)}function scrollIntoViewIfNeeded(t,e){if(e===void 0&&(e=getClientRect),!t)return;const{top:n,left:s,bottom:i,right:o}=e(t);getFirstScrollableAncestor(t)&&(i<=0||o<=0||n>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];class Rect{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=getScrollableAncestors(n),i=getScrollOffsets(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,u]of properties)for(const d of l)Object.defineProperty(this,d,{get:()=>{const f=u(s),m=i[o]-f;return this.rect[d]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Listeners{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var i;(i=this.target)==null||i.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function getEventListenerTarget(t){const{EventTarget:e}=getWindow(t);return t instanceof e?t:getOwnerDocument(t)}function hasExceededDistance(t,e){const n=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var EventName;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault(t){t.preventDefault()}function stopPropagation(t){t.stopPropagation()}var KeyboardCode;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter,KeyboardCode.Tab]},defaultKeyboardCoordinateGetter=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case KeyboardCode.Right:return{...n,x:n.x+25};case KeyboardCode.Left:return{...n,x:n.x-25};case KeyboardCode.Down:return{...n,y:n.y+25};case KeyboardCode.Up:return{...n,y:n.y-25}}};class KeyboardSensor{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Listeners(getOwnerDocument(n)),this.windowListeners=new Listeners(getWindow(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&scrollIntoViewIfNeeded(s),n(defaultCoordinates)}handleKeyDown(e){if(isKeyboardEvent(e)){const{active:n,context:s,options:i}=this.props,{keyboardCodes:o=defaultKeyboardCodes,coordinateGetter:l=defaultKeyboardCoordinateGetter,scrollBehavior:u="smooth"}=i,{code:d}=e;if(o.end.includes(d)){this.handleEnd(e);return}if(o.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:f}=s.current,m=f?{x:f.left,y:f.top}:defaultCoordinates;this.referenceCoordinates||(this.referenceCoordinates=m);const g=l(e,{active:n,context:s.current,currentCoordinates:m});if(g){const y=subtract(g,m),v={x:0,y:0},{scrollableAncestors:E}=s.current;for(const w of E){const A=e.code,{isTop:I,isRight:D,isLeft:V,isBottom:Y,maxScroll:j,minScroll:H}=getScrollPosition(w),S=getScrollElementRect(w),T={x:Math.min(A===KeyboardCode.Right?S.right-S.width/2:S.right,Math.max(A===KeyboardCode.Right?S.left:S.left+S.width/2,g.x)),y:Math.min(A===KeyboardCode.Down?S.bottom-S.height/2:S.bottom,Math.max(A===KeyboardCode.Down?S.top:S.top+S.height/2,g.y))},P=A===KeyboardCode.Right&&!D||A===KeyboardCode.Left&&!V,U=A===KeyboardCode.Down&&!Y||A===KeyboardCode.Up&&!I;if(P&&T.x!==g.x){const J=w.scrollLeft+y.x,W=A===KeyboardCode.Right&&J<=j.x||A===KeyboardCode.Left&&J>=H.x;if(W&&!y.y){w.scrollTo({left:J,behavior:u});return}W?v.x=w.scrollLeft-J:v.x=A===KeyboardCode.Right?w.scrollLeft-j.x:w.scrollLeft-H.x,v.x&&w.scrollBy({left:-v.x,behavior:u});break}else if(U&&T.y!==g.y){const J=w.scrollTop+y.y,W=A===KeyboardCode.Down&&J<=j.y||A===KeyboardCode.Up&&J>=H.y;if(W&&!y.x){w.scrollTo({top:J,behavior:u});return}W?v.y=w.scrollTop-J:v.y=A===KeyboardCode.Down?w.scrollTop-j.y:w.scrollTop-H.y,v.y&&w.scrollBy({top:-v.y,behavior:u});break}}this.handleMove(e,add(subtract(g,this.referenceCoordinates),v))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:s=defaultKeyboardCodes,onActivation:i}=e,{active:o}=n;const{code:l}=t.nativeEvent;if(s.start.includes(l)){const u=o.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(t){return!!(t&&"distance"in t)}function isDelayConstraint(t){return!!(t&&"delay"in t)}class AbstractPointerSensor{constructor(e,n,s){var i;s===void 0&&(s=getEventListenerTarget(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:l}=o;this.props=e,this.events=n,this.document=getOwnerDocument(l),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(s),this.windowListeners=new Listeners(getWindow(l)),this.initialCoordinates=(i=getEventCoordinates(o))!=null?i:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault),this.documentListeners.add(EventName.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(isDistanceConstraint(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:i}=this.props;i(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!i)return;const d=(n=getEventCoordinates(e))!=null?n:defaultCoordinates,f=subtract(i,d);if(!s&&u){if(isDistanceConstraint(u)){if(u.tolerance!=null&&hasExceededDistance(f,u.tolerance))return this.handleCancel();if(hasExceededDistance(f,u.distance))return this.handleStart()}if(isDelayConstraint(u)&&hasExceededDistance(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}e.cancelable&&e.preventDefault(),l(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const events={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(e){const{event:n}=e,s=getOwnerDocument(n.target);super(e,events,s)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const events$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(t){t[t.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(e){super(e,events$1,getOwnerDocument(e.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return n.button===MouseButton.RightClick?!1:(s==null||s({event:n}),!0)}}];const events$2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(e){super(e,events$2)}static setup(){return window.addEventListener(events$2.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,e)};function e(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;const{touches:i}=n;return i.length>1?!1:(s==null||s({event:n}),!0)}}];var AutoScrollActivator;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(t){let{acceleration:e,activator:n=AutoScrollActivator.Pointer,canScroll:s,draggingRect:i,enabled:o,interval:l=5,order:u=TraversalOrder.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:m,delta:g,threshold:y}=t;const v=useScrollIntent({delta:g,disabled:!o}),[E,w]=useInterval(),A=reactExports.useRef({x:0,y:0}),I=reactExports.useRef({x:0,y:0}),D=reactExports.useMemo(()=>{switch(n){case AutoScrollActivator.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case AutoScrollActivator.DraggableRect:return i}},[n,i,d]),V=reactExports.useRef(null),Y=reactExports.useCallback(()=>{const H=V.current;if(!H)return;const S=A.current.x*I.current.x,T=A.current.y*I.current.y;H.scrollBy(S,T)},[]),j=reactExports.useMemo(()=>u===TraversalOrder.TreeOrder?[...f].reverse():f,[u,f]);reactExports.useEffect(()=>{if(!o||!f.length||!D){w();return}for(const H of j){if((s==null?void 0:s(H))===!1)continue;const S=f.indexOf(H),T=m[S];if(!T)continue;const{direction:P,speed:U}=getScrollDirectionAndSpeed(H,T,D,e,y);for(const J of["x","y"])v[J][P[J]]||(U[J]=0,P[J]=0);if(U.x>0||U.y>0){w(),V.current=H,E(Y,l),A.current=U,I.current=P;return}}A.current={x:0,y:0},I.current={x:0,y:0},w()},[e,Y,s,w,o,l,JSON.stringify(D),JSON.stringify(v),E,f,j,m,JSON.stringify(y)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(t){let{delta:e,disabled:n}=t;const s=usePrevious$1(e);return useLazyMemo(i=>{if(n||!s||!i)return defaultScrollIntent;const o={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Direction.Backward]:i.x[Direction.Backward]||o.x===-1,[Direction.Forward]:i.x[Direction.Forward]||o.x===1},y:{[Direction.Backward]:i.y[Direction.Backward]||o.y===-1,[Direction.Forward]:i.y[Direction.Forward]||o.y===1}}},[n,e,s])}function useCachedNode(t,e){const n=e!=null?t.get(e):void 0,s=n?n.node.current:null;return useLazyMemo(i=>{var o;return e==null?null:(o=s??i)!=null?o:null},[s,e])}function useCombineActivators(t,e){return reactExports.useMemo(()=>t.reduce((n,s)=>{const{sensor:i}=s,o=i.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,s)}));return[...n,...o]},[]),[t,e])}var MeasuringStrategy;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(t){t.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(t,e){let{dragging:n,dependencies:s,config:i}=e;const[o,l]=reactExports.useState(null),{frequency:u,measure:d,strategy:f}=i,m=reactExports.useRef(t),g=A(),y=useLatestValue(g),v=reactExports.useCallback(function(I){I===void 0&&(I=[]),!y.current&&l(D=>D===null?I:D.concat(I.filter(V=>!D.includes(V))))},[y]),E=reactExports.useRef(null),w=useLazyMemo(I=>{if(g&&!n)return defaultValue;if(!I||I===defaultValue||m.current!==t||o!=null){const D=new Map;for(let V of t){if(!V)continue;if(o&&o.length>0&&!o.includes(V.id)&&V.rect.current){D.set(V.id,V.rect.current);continue}const Y=V.node.current,j=Y?new Rect(d(Y),Y):null;V.rect.current=j,j&&D.set(V.id,j)}return D}return I},[t,o,n,g,d]);return reactExports.useEffect(()=>{m.current=t},[t]),reactExports.useEffect(()=>{g||v()},[n,g]),reactExports.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),reactExports.useEffect(()=>{g||typeof u!="number"||E.current!==null||(E.current=setTimeout(()=>{v(),E.current=null},u))},[u,g,v,...s]),{droppableRects:w,measureDroppableContainers:v,measuringScheduled:o!=null};function A(){switch(f){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return n;default:return!n}}}function useInitialValue(t,e){return useLazyMemo(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function useInitialRect(t,e){return useInitialValue(t,e)}function useMutationObserver(t){let{callback:e,disabled:n}=t;const s=useEvent(e),i=reactExports.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,n]);return reactExports.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function useResizeObserver(t){let{callback:e,disabled:n}=t;const s=useEvent(e),i=reactExports.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[n]);return reactExports.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function defaultMeasure(t){return new Rect(getClientRect(t),t)}function useRect(t,e,n){e===void 0&&(e=defaultMeasure);const[s,i]=reactExports.useState(null);function o(){i(d=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=d??n)!=null?f:null}const m=e(t);return JSON.stringify(d)===JSON.stringify(m)?d:m})}const l=useMutationObserver({callback(d){if(t)for(const f of d){const{type:m,target:g}=f;if(m==="childList"&&g instanceof HTMLElement&&g.contains(t)){o();break}}}}),u=useResizeObserver({callback:o});return useIsomorphicLayoutEffect(()=>{o(),t?(u==null||u.observe(t),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[t]),s}function useRectDelta(t){const e=useInitialValue(t);return getRectDelta(t,e)}const defaultValue$1=[];function useScrollableAncestors(t){const e=reactExports.useRef(t),n=useLazyMemo(s=>t?s&&s!==defaultValue$1&&t&&e.current&&t.parentNode===e.current.parentNode?s:getScrollableAncestors(t):defaultValue$1,[t]);return reactExports.useEffect(()=>{e.current=t},[t]),n}function useScrollOffsets(t){const[e,n]=reactExports.useState(null),s=reactExports.useRef(t),i=reactExports.useCallback(o=>{const l=getScrollableElement(o.target);l&&n(u=>u?(u.set(l,getScrollCoordinates(l)),new Map(u)):null)},[]);return reactExports.useEffect(()=>{const o=s.current;if(t!==o){l(o);const u=t.map(d=>{const f=getScrollableElement(d);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,getScrollCoordinates(f)]):null}).filter(d=>d!=null);n(u.length?new Map(u):null),s.current=t}return()=>{l(t),l(o)};function l(u){u.forEach(d=>{const f=getScrollableElement(d);f==null||f.removeEventListener("scroll",i)})}},[i,t]),reactExports.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,l)=>add(o,l),defaultCoordinates):getScrollOffsets(t):defaultCoordinates,[t,e])}function useScrollOffsetsDelta(t,e){e===void 0&&(e=[]);const n=reactExports.useRef(null);return reactExports.useEffect(()=>{n.current=null},e),reactExports.useEffect(()=>{const s=t!==defaultCoordinates;s&&!n.current&&(n.current=t),!s&&n.current&&(n.current=null)},[t]),n.current?subtract(t,n.current):defaultCoordinates}function useSensorSetup(t){reactExports.useEffect(()=>{if(!canUseDOM)return;const e=t.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function useSyntheticListeners(t,e){return reactExports.useMemo(()=>t.reduce((n,s)=>{let{eventName:i,handler:o}=s;return n[i]=l=>{o(l,e)},n},{}),[t,e])}function useWindowRect(t){return reactExports.useMemo(()=>t?getWindowClientRect(t):null,[t])}const defaultValue$2=[];function useRects(t,e){e===void 0&&(e=getClientRect);const[n]=t,s=useWindowRect(n?getWindow(n):null),[i,o]=reactExports.useState(defaultValue$2);function l(){o(()=>t.length?t.map(d=>isDocumentScrollingElement(d)?s:new Rect(e(d),d)):defaultValue$2)}const u=useResizeObserver({callback:l});return useIsomorphicLayoutEffect(()=>{u==null||u.disconnect(),l(),t.forEach(d=>u==null?void 0:u.observe(d))},[t]),i}function getMeasurableNode(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return isHTMLElement(e)?e:t}function useDragOverlayMeasuring(t){let{measure:e}=t;const[n,s]=reactExports.useState(null),i=reactExports.useCallback(f=>{for(const{target:m}of f)if(isHTMLElement(m)){s(g=>{const y=e(m);return g?{...g,width:y.width,height:y.height}:y});break}},[e]),o=useResizeObserver({callback:i}),l=reactExports.useCallback(f=>{const m=getMeasurableNode(f);o==null||o.disconnect(),m&&(o==null||o.observe(m)),s(m?e(m):null)},[e,o]),[u,d]=useNodeRef(l);return reactExports.useMemo(()=>({nodeRef:u,rect:n,setRef:d}),[n,u,d])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop$1},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop$1,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop$1,draggableNodes:new Map,over:null,measureDroppableContainers:noop$1},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(t,e){switch(e.type){case Action.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Action.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Action.DragEnd:case Action.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:n}=e,{id:s}=n,i=new DroppableContainersMap(t.droppable.containers);return i.set(s,n),{...t,droppable:{...t.droppable,containers:i}}}case Action.SetDroppableDisabled:{const{id:n,key:s,disabled:i}=e,o=t.droppable.containers.get(n);if(!o||s!==o.key)return t;const l=new DroppableContainersMap(t.droppable.containers);return l.set(n,{...o,disabled:i}),{...t,droppable:{...t.droppable,containers:l}}}case Action.UnregisterDroppable:{const{id:n,key:s}=e,i=t.droppable.containers.get(n);if(!i||s!==i.key)return t;const o=new DroppableContainersMap(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function RestoreFocus(t){let{disabled:e}=t;const{active:n,activatorEvent:s,draggableNodes:i}=reactExports.useContext(InternalContext),o=usePrevious$1(s),l=usePrevious$1(n==null?void 0:n.id);return reactExports.useEffect(()=>{if(!e&&!s&&o&&l!=null){if(!isKeyboardEvent(o)||document.activeElement===o.target)return;const u=i.get(l);if(!u)return;const{activatorNode:d,node:f}=u;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const m of[d.current,f.current]){if(!m)continue;const g=findFirstFocusableNode(m);if(g){g.focus();break}}})}},[s,e,i,l,o]),null}function applyModifiers(t,e){let{transform:n,...s}=e;return t!=null&&t.length?t.reduce((i,o)=>o({transform:i,...s}),n):n}function useMeasuringConfiguration(t){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...t==null?void 0:t.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...t==null?void 0:t.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function useLayoutShiftScrollCompensation(t){let{activeNode:e,measure:n,initialRect:s,config:i=!0}=t;const o=reactExports.useRef(!1),{x:l,y:u}=typeof i=="boolean"?{x:i,y:i}:i;useIsomorphicLayoutEffect(()=>{if(!l&&!u||!e){o.current=!1;return}if(o.current||!s)return;const f=e==null?void 0:e.node.current;if(!f||f.isConnected===!1)return;const m=n(f),g=getRectDelta(m,s);if(l||(g.x=0),u||(g.y=0),o.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const y=getFirstScrollableAncestor(f);y&&y.scrollBy({top:g.y,left:g.x})}},[e,l,u,s,n])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates,scaleX:1,scaleY:1});var Status;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function t(e){var n,s,i,o;let{id:l,accessibility:u,autoScroll:d=!0,children:f,sensors:m=defaultSensors,collisionDetection:g=rectIntersection,measuring:y,modifiers:v,...E}=e;const w=reactExports.useReducer(reducer,void 0,getInitialState),[A,I]=w,[D,V]=useDndMonitorProvider(),[Y,j]=reactExports.useState(Status.Uninitialized),H=Y===Status.Initialized,{draggable:{active:S,nodes:T,translate:P},droppable:{containers:U}}=A,J=S!=null?T.get(S):null,W=reactExports.useRef({initial:null,translated:null}),K=reactExports.useMemo(()=>{var Wt;return S!=null?{id:S,data:(Wt=J==null?void 0:J.data)!=null?Wt:defaultData,rect:W}:null},[S,J]),le=reactExports.useRef(null),[ge,oe]=reactExports.useState(null),[ce,ie]=reactExports.useState(null),Ne=useLatestValue(E,Object.values(E)),re=useUniqueId("DndDescribedBy",l),_e=reactExports.useMemo(()=>U.getEnabled(),[U]),Se=useMeasuringConfiguration(y),{droppableRects:Re,measureDroppableContainers:Be,measuringScheduled:Ie}=useDroppableMeasuring(_e,{dragging:H,dependencies:[P.x,P.y],config:Se.droppable}),je=useCachedNode(T,S),Te=reactExports.useMemo(()=>ce?getEventCoordinates(ce):null,[ce]),ke=Pn(),Ge=useInitialRect(je,Se.draggable.measure);useLayoutShiftScrollCompensation({activeNode:S!=null?T.get(S):null,config:ke.layoutShiftCompensation,initialRect:Ge,measure:Se.draggable.measure});const we=useRect(je,Se.draggable.measure,Ge),de=useRect(je?je.parentElement:null),me=reactExports.useRef({activatorEvent:null,active:null,activeNode:je,collisionRect:null,collisions:null,droppableRects:Re,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ue=U.getNodeFor((n=me.current.over)==null?void 0:n.id),se=useDragOverlayMeasuring({measure:Se.dragOverlay.measure}),he=(s=se.nodeRef.current)!=null?s:je,Pe=H?(i=se.rect)!=null?i:we:null,ze=!!(se.nodeRef.current&&se.rect),$e=useRectDelta(ze?null:we),vt=useWindowRect(he?getWindow(he):null),ve=useScrollableAncestors(H?ue??je:null),xe=useRects(ve),Ue=applyModifiers(v,{transform:{x:P.x-$e.x,y:P.y-$e.y,scaleX:1,scaleY:1},activatorEvent:ce,active:K,activeNodeRect:we,containerNodeRect:de,draggingNodeRect:Pe,over:me.current.over,overlayNodeRect:se.rect,scrollableAncestors:ve,scrollableAncestorRects:xe,windowRect:vt}),Oe=Te?add(Te,P):null,Me=useScrollOffsets(ve),Ze=useScrollOffsetsDelta(Me),He=useScrollOffsetsDelta(Me,[we]),qe=add(Ue,Ze),Xe=Pe?getAdjustedRect(Pe,Ue):null,et=K&&Xe?g({active:K,collisionRect:Xe,droppableRects:Re,droppableContainers:_e,pointerCoordinates:Oe}):null,Kt=getFirstCollision(et,"id"),[It,Bt]=reactExports.useState(null),Et=ze?Ue:add(Ue,He),mn=adjustScale(Et,(o=It==null?void 0:It.rect)!=null?o:null,we),Nt=reactExports.useRef(null),Gt=reactExports.useCallback((Wt,On)=>{let{sensor:jn,options:Fn}=On;if(le.current==null)return;const Tn=T.get(le.current);if(!Tn)return;const Nn=Wt.nativeEvent,Mn=new jn({active:le.current,activeNode:Tn,event:Nn,options:Fn,context:me,onAbort(Ct){if(!T.get(Ct))return;const{onDragAbort:pn}=Ne.current,Sn={id:Ct};pn==null||pn(Sn),D({type:"onDragAbort",event:Sn})},onPending(Ct,Dt,pn,Sn){if(!T.get(Ct))return;const{onDragPending:ir}=Ne.current,ns={id:Ct,constraint:Dt,initialCoordinates:pn,offset:Sn};ir==null||ir(ns),D({type:"onDragPending",event:ns})},onStart(Ct){const Dt=le.current;if(Dt==null)return;const pn=T.get(Dt);if(!pn)return;const{onDragStart:Sn}=Ne.current,Vs={activatorEvent:Nn,active:{id:Dt,data:pn.data,rect:W}};reactDomExports.unstable_batchedUpdates(()=>{Sn==null||Sn(Vs),j(Status.Initializing),I({type:Action.DragStart,initialCoordinates:Ct,active:Dt}),D({type:"onDragStart",event:Vs}),oe(Nt.current),ie(Nn)})},onMove(Ct){I({type:Action.DragMove,coordinates:Ct})},onEnd:gs(Action.DragEnd),onCancel:gs(Action.DragCancel)});Nt.current=Mn;function gs(Ct){return async function(){const{active:pn,collisions:Sn,over:Vs,scrollAdjustedTranslate:ir}=me.current;let ns=null;if(pn&&ir){const{cancelDrop:$s}=Ne.current;ns={activatorEvent:Nn,active:pn,collisions:Sn,delta:ir,over:Vs},Ct===Action.DragEnd&&typeof $s=="function"&&await Promise.resolve($s(ns))&&(Ct=Action.DragCancel)}le.current=null,reactDomExports.unstable_batchedUpdates(()=>{I({type:Ct}),j(Status.Uninitialized),Bt(null),oe(null),ie(null),Nt.current=null;const $s=Ct===Action.DragEnd?"onDragEnd":"onDragCancel";if(ns){const Ms=Ne.current[$s];Ms==null||Ms(ns),D({type:$s,event:ns})}})}}},[T]),un=reactExports.useCallback((Wt,On)=>(jn,Fn)=>{const Tn=jn.nativeEvent,Nn=T.get(Fn);if(le.current!==null||!Nn||Tn.dndKit||Tn.defaultPrevented)return;const Mn={active:Nn};Wt(jn,On.options,Mn)===!0&&(Tn.dndKit={capturedBy:On.sensor},le.current=Fn,Gt(jn,On))},[T,Gt]),pt=useCombineActivators(m,un);useSensorSetup(m),useIsomorphicLayoutEffect(()=>{we&&Y===Status.Initializing&&j(Status.Initialized)},[we,Y]),reactExports.useEffect(()=>{const{onDragMove:Wt}=Ne.current,{active:On,activatorEvent:jn,collisions:Fn,over:Tn}=me.current;if(!On||!jn)return;const Nn={active:On,activatorEvent:jn,collisions:Fn,delta:{x:qe.x,y:qe.y},over:Tn};reactDomExports.unstable_batchedUpdates(()=>{Wt==null||Wt(Nn),D({type:"onDragMove",event:Nn})})},[qe.x,qe.y]),reactExports.useEffect(()=>{const{active:Wt,activatorEvent:On,collisions:jn,droppableContainers:Fn,scrollAdjustedTranslate:Tn}=me.current;if(!Wt||le.current==null||!On||!Tn)return;const{onDragOver:Nn}=Ne.current,Mn=Fn.get(Kt),gs=Mn&&Mn.rect.current?{id:Mn.id,rect:Mn.rect.current,data:Mn.data,disabled:Mn.disabled}:null,Ct={active:Wt,activatorEvent:On,collisions:jn,delta:{x:Tn.x,y:Tn.y},over:gs};reactDomExports.unstable_batchedUpdates(()=>{Bt(gs),Nn==null||Nn(Ct),D({type:"onDragOver",event:Ct})})},[Kt]),useIsomorphicLayoutEffect(()=>{me.current={activatorEvent:ce,active:K,activeNode:je,collisionRect:Xe,collisions:et,droppableRects:Re,draggableNodes:T,draggingNode:he,draggingNodeRect:Pe,droppableContainers:U,over:It,scrollableAncestors:ve,scrollAdjustedTranslate:qe},W.current={initial:Pe,translated:Xe}},[K,je,et,Xe,T,he,Pe,Re,U,It,ve,qe]),useAutoScroller({...ke,delta:P,draggingRect:Xe,pointerCoordinates:Oe,scrollableAncestors:ve,scrollableAncestorRects:xe});const Qe=reactExports.useMemo(()=>({active:K,activeNode:je,activeNodeRect:we,activatorEvent:ce,collisions:et,containerNodeRect:de,dragOverlay:se,draggableNodes:T,droppableContainers:U,droppableRects:Re,over:It,measureDroppableContainers:Be,scrollableAncestors:ve,scrollableAncestorRects:xe,measuringConfiguration:Se,measuringScheduled:Ie,windowRect:vt}),[K,je,we,ce,et,de,se,T,U,Re,It,Be,ve,xe,Se,Ie,vt]),Dn=reactExports.useMemo(()=>({activatorEvent:ce,activators:pt,active:K,activeNodeRect:we,ariaDescribedById:{draggable:re},dispatch:I,draggableNodes:T,over:It,measureDroppableContainers:Be}),[ce,pt,K,we,I,re,T,It,Be]);return React.createElement(DndMonitorContext.Provider,{value:V},React.createElement(InternalContext.Provider,{value:Dn},React.createElement(PublicContext.Provider,{value:Qe},React.createElement(ActiveDraggableContext.Provider,{value:mn},f)),React.createElement(RestoreFocus,{disabled:(u==null?void 0:u.restoreFocus)===!1})),React.createElement(Accessibility,{...u,hiddenTextDescribedById:re}));function Pn(){const Wt=(ge==null?void 0:ge.autoScrollEnabled)===!1,On=typeof d=="object"?d.enabled===!1:d===!1,jn=H&&!Wt&&!On;return typeof d=="object"?{...d,enabled:jn}:{enabled:jn}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX$1="Draggable";function useDraggable(t){let{id:e,data:n,disabled:s=!1,attributes:i}=t;const o=useUniqueId(ID_PREFIX$1),{activators:l,activatorEvent:u,active:d,activeNodeRect:f,ariaDescribedById:m,draggableNodes:g,over:y}=reactExports.useContext(InternalContext),{role:v=defaultRole,roleDescription:E="draggable",tabIndex:w=0}=i??{},A=(d==null?void 0:d.id)===e,I=reactExports.useContext(A?ActiveDraggableContext:NullContext),[D,V]=useNodeRef(),[Y,j]=useNodeRef(),H=useSyntheticListeners(l,e),S=useLatestValue(n);useIsomorphicLayoutEffect(()=>(g.set(e,{id:e,key:o,node:D,activatorNode:Y,data:S}),()=>{const P=g.get(e);P&&P.key===o&&g.delete(e)}),[g,e]);const T=reactExports.useMemo(()=>({role:v,tabIndex:w,"aria-disabled":s,"aria-pressed":A&&v===defaultRole?!0:void 0,"aria-roledescription":E,"aria-describedby":m.draggable}),[s,v,w,A,E,m.draggable]);return{active:d,activatorEvent:u,activeNodeRect:f,attributes:T,isDragging:A,listeners:s?void 0:H,node:D,over:y,setNodeRef:V,setActivatorNodeRef:j,transform:I}}function useDndContext(){return reactExports.useContext(PublicContext)}const ID_PREFIX$1$1="Droppable",defaultResizeObserverConfig={timeout:25};function useDroppable(t){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:i}=t;const o=useUniqueId(ID_PREFIX$1$1),{active:l,dispatch:u,over:d,measureDroppableContainers:f}=reactExports.useContext(InternalContext),m=reactExports.useRef({disabled:n}),g=reactExports.useRef(!1),y=reactExports.useRef(null),v=reactExports.useRef(null),{disabled:E,updateMeasurementsFor:w,timeout:A}={...defaultResizeObserverConfig,...i},I=useLatestValue(w??s),D=reactExports.useCallback(()=>{if(!g.current){g.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{f(Array.isArray(I.current)?I.current:[I.current]),v.current=null},A)},[A]),V=useResizeObserver({callback:D,disabled:E||!l}),Y=reactExports.useCallback((T,P)=>{V&&(P&&(V.unobserve(P),g.current=!1),T&&V.observe(T))},[V]),[j,H]=useNodeRef(Y),S=useLatestValue(e);return reactExports.useEffect(()=>{!V||!j.current||(V.disconnect(),g.current=!1,V.observe(j.current))},[j,V]),reactExports.useEffect(()=>(u({type:Action.RegisterDroppable,element:{id:s,key:o,disabled:n,node:j,rect:y,data:S}}),()=>u({type:Action.UnregisterDroppable,key:o,id:s})),[s]),reactExports.useEffect(()=>{n!==m.current.disabled&&(u({type:Action.SetDroppableDisabled,id:s,key:o,disabled:n}),m.current.disabled=n)},[s,o,n,u]),{active:l,rect:y,isOver:(d==null?void 0:d.id)===s,node:j,over:d,setNodeRef:H}}function arrayMove(t,e,n){const s=t.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function getSortedRects(t,e){return t.reduce((n,s,i)=>{const o=e.get(s);return o&&(n[i]=o),n},Array(t.length))}function isValidIndex(t){return t!==null&&t>=0}function itemsEqual$1(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function normalizeDisabled(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const rectSortingStrategy=t=>{let{rects:e,activeIndex:n,overIndex:s,index:i}=t;const o=arrayMove(e,s,n),l=e[i],u=o[i];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},defaultScale$1={scaleX:1,scaleY:1},verticalListSortingStrategy=t=>{var e;let{activeIndex:n,activeNodeRect:s,index:i,rects:o,overIndex:l}=t;const u=(e=o[n])!=null?e:s;if(!u)return null;if(i===n){const f=o[l];return f?{x:0,y:n<l?f.top+f.height-(u.top+u.height):f.top-u.top,...defaultScale$1}:null}const d=getItemGap$1(o,i,n);return i>n&&i<=l?{x:0,y:-u.height-d,...defaultScale$1}:i<n&&i>=l?{x:0,y:u.height+d,...defaultScale$1}:{x:0,y:0,...defaultScale$1}};function getItemGap$1(t,e,n){const s=t[e],i=t[e-1],o=t[e+1];return s?n<e?i?s.top-(i.top+i.height):o?o.top-(s.top+s.height):0:o?o.top-(s.top+s.height):i?s.top-(i.top+i.height):0:0}const ID_PREFIX="Sortable",Context=React.createContext({activeIndex:-1,containerId:ID_PREFIX,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rectSortingStrategy,disabled:{draggable:!1,droppable:!1}});function SortableContext(t){let{children:e,id:n,items:s,strategy:i=rectSortingStrategy,disabled:o=!1}=t;const{active:l,dragOverlay:u,droppableRects:d,over:f,measureDroppableContainers:m}=useDndContext(),g=useUniqueId(ID_PREFIX,n),y=u.rect!==null,v=reactExports.useMemo(()=>s.map(H=>typeof H=="object"&&"id"in H?H.id:H),[s]),E=l!=null,w=l?v.indexOf(l.id):-1,A=f?v.indexOf(f.id):-1,I=reactExports.useRef(v),D=!itemsEqual$1(v,I.current),V=A!==-1&&w===-1||D,Y=normalizeDisabled(o);useIsomorphicLayoutEffect(()=>{D&&E&&m(v)},[D,v,E,m]),reactExports.useEffect(()=>{I.current=v},[v]);const j=reactExports.useMemo(()=>({activeIndex:w,containerId:g,disabled:Y,disableTransforms:V,items:v,overIndex:A,useDragOverlay:y,sortedRects:getSortedRects(v,d),strategy:i}),[w,g,Y.draggable,Y.droppable,V,v,A,d,y,i]);return React.createElement(Context.Provider,{value:j},e)}const defaultNewIndexGetter=t=>{let{id:e,items:n,activeIndex:s,overIndex:i}=t;return arrayMove(n,s,i).indexOf(e)},defaultAnimateLayoutChanges=t=>{let{containerId:e,isSorting:n,wasDragging:s,index:i,items:o,newIndex:l,previousItems:u,previousContainerId:d,transition:f}=t;return!f||!s||u!==o&&i===l?!1:n?!0:l!==i&&e===d},defaultTransition={duration:200,easing:"ease"},transitionProperty="transform",disabledTransition=CSS$1.Transition.toString({property:transitionProperty,duration:0,easing:"linear"}),defaultAttributes={roleDescription:"sortable"};function useDerivedTransform(t){let{disabled:e,index:n,node:s,rect:i}=t;const[o,l]=reactExports.useState(null),u=reactExports.useRef(n);return useIsomorphicLayoutEffect(()=>{if(!e&&n!==u.current&&s.current){const d=i.current;if(d){const f=getClientRect(s.current,{ignoreTransform:!0}),m={x:d.left-f.left,y:d.top-f.top,scaleX:d.width/f.width,scaleY:d.height/f.height};(m.x||m.y)&&l(m)}}n!==u.current&&(u.current=n)},[e,n,s,i]),reactExports.useEffect(()=>{o&&l(null)},[o]),o}function useSortable(t){let{animateLayoutChanges:e=defaultAnimateLayoutChanges,attributes:n,disabled:s,data:i,getNewIndex:o=defaultNewIndexGetter,id:l,strategy:u,resizeObserverConfig:d,transition:f=defaultTransition}=t;const{items:m,containerId:g,activeIndex:y,disabled:v,disableTransforms:E,sortedRects:w,overIndex:A,useDragOverlay:I,strategy:D}=reactExports.useContext(Context),V=normalizeLocalDisabled(s,v),Y=m.indexOf(l),j=reactExports.useMemo(()=>({sortable:{containerId:g,index:Y,items:m},...i}),[g,i,Y,m]),H=reactExports.useMemo(()=>m.slice(m.indexOf(l)),[m,l]),{rect:S,node:T,isOver:P,setNodeRef:U}=useDroppable({id:l,data:j,disabled:V.droppable,resizeObserverConfig:{updateMeasurementsFor:H,...d}}),{active:J,activatorEvent:W,activeNodeRect:K,attributes:le,setNodeRef:ge,listeners:oe,isDragging:ce,over:ie,setActivatorNodeRef:Ne,transform:re}=useDraggable({id:l,data:j,attributes:{...defaultAttributes,...n},disabled:V.draggable}),_e=useCombinedRefs(U,ge),Se=!!J,Re=Se&&!E&&isValidIndex(y)&&isValidIndex(A),Be=!I&&ce,Ie=Be&&Re?re:null,Te=Re?Ie??(u??D)({rects:w,activeNodeRect:K,activeIndex:y,overIndex:A,index:Y}):null,ke=isValidIndex(y)&&isValidIndex(A)?o({id:l,items:m,activeIndex:y,overIndex:A}):Y,Ge=J==null?void 0:J.id,we=reactExports.useRef({activeId:Ge,items:m,newIndex:ke,containerId:g}),de=m!==we.current.items,me=e({active:J,containerId:g,isDragging:ce,isSorting:Se,id:l,index:Y,items:m,newIndex:we.current.newIndex,previousItems:we.current.items,previousContainerId:we.current.containerId,transition:f,wasDragging:we.current.activeId!=null}),ue=useDerivedTransform({disabled:!me,index:Y,node:T,rect:S});return reactExports.useEffect(()=>{Se&&we.current.newIndex!==ke&&(we.current.newIndex=ke),g!==we.current.containerId&&(we.current.containerId=g),m!==we.current.items&&(we.current.items=m)},[Se,ke,g,m]),reactExports.useEffect(()=>{if(Ge===we.current.activeId)return;if(Ge!=null&&we.current.activeId==null){we.current.activeId=Ge;return}const he=setTimeout(()=>{we.current.activeId=Ge},50);return()=>clearTimeout(he)},[Ge]),{active:J,activeIndex:y,attributes:le,data:j,rect:S,index:Y,newIndex:ke,items:m,isOver:P,isSorting:Se,isDragging:ce,listeners:oe,node:T,overIndex:A,over:ie,setNodeRef:_e,setActivatorNodeRef:Ne,setDroppableNodeRef:U,setDraggableNodeRef:ge,transform:ue??Te,transition:se()};function se(){if(ue||de&&we.current.newIndex===Y)return disabledTransition;if(!(Be&&!isKeyboardEvent(W)||!f)&&(Se||me))return CSS$1.Transition.toString({...f,property:transitionProperty})}}function normalizeLocalDisabled(t,e){var n,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(s=t==null?void 0:t.droppable)!=null?s:e.droppable}}function hasSortableData(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const directions=[KeyboardCode.Down,KeyboardCode.Right,KeyboardCode.Up,KeyboardCode.Left],sortableKeyboardCoordinates=(t,e)=>{let{context:{active:n,collisionRect:s,droppableRects:i,droppableContainers:o,over:l,scrollableAncestors:u}}=e;if(directions.includes(t.code)){if(t.preventDefault(),!n||!s)return;const d=[];o.getEnabled().forEach(g=>{if(!g||g!=null&&g.disabled)return;const y=i.get(g.id);if(y)switch(t.code){case KeyboardCode.Down:s.top<y.top&&d.push(g);break;case KeyboardCode.Up:s.top>y.top&&d.push(g);break;case KeyboardCode.Left:s.left>y.left&&d.push(g);break;case KeyboardCode.Right:s.left<y.left&&d.push(g);break}});const f=closestCorners({collisionRect:s,droppableRects:i,droppableContainers:d});let m=getFirstCollision(f,"id");if(m===(l==null?void 0:l.id)&&f.length>1&&(m=f[1].id),m!=null){const g=o.get(n.id),y=o.get(m),v=y?i.get(y.id):null,E=y==null?void 0:y.node.current;if(E&&v&&g&&y){const A=getScrollableAncestors(E).some((H,S)=>u[S]!==H),I=isSameContainer(g,y),D=isAfter(g,y),V=A||!I?{x:0,y:0}:{x:D?s.width-v.width:0,y:D?s.height-v.height:0},Y={x:v.left,y:v.top};return V.x&&V.y?Y:subtract(Y,V)}}}};function isSameContainer(t,e){return!hasSortableData(t)||!hasSortableData(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function isAfter(t,e){return!hasSortableData(t)||!hasSortableData(e)||!isSameContainer(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}function SortableItem({id:t}){const{attributes:e,listeners:n,setNodeRef:s,transform:i,transition:o}=useSortable({id:t}),l={transform:CSS$1.Transform.toString(i),transition:o};return jsxRuntimeExports.jsxs("li",{ref:s,style:l,...e,className:"flex items-center justify-between p-2 bg-gray-100 rounded-md mb-2 touch-none",children:[jsxRuntimeExports.jsx("span",{className:"font-display-medium text-sm capitalize",children:t}),jsxRuntimeExports.jsx("button",{...n,className:"cursor-grab active:cursor-grabbing",children:jsxRuntimeExports.jsx(GripVertical,{className:"w-5 h-5 text-gray-500"})})]})}const LayerManager=({renderOrder:t,setRenderOrder:e})=>{const n=useSensors(useSensor(PointerSensor),useSensor(KeyboardSensor,{coordinateGetter:sortableKeyboardCoordinates}));function s(i){const{active:o,over:l}=i;if(l&&o.id!==l.id){const u=t.indexOf(o.id),d=t.indexOf(l.id);e(arrayMove(t,u,d))}}return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-bold text-gray-700 mb-2",children:"Ordem das Camadas"}),jsxRuntimeExports.jsx(DndContext,{sensors:n,collisionDetection:closestCenter,onDragEnd:s,children:jsxRuntimeExports.jsx(SortableContext,{items:t,strategy:verticalListSortingStrategy,children:jsxRuntimeExports.jsx("ul",{className:"list-none p-0",children:t.map(i=>jsxRuntimeExports.jsx(SortableItem,{id:i},i))})})})]})},PositionController=({onMove:t,onResize:e,elementName:n})=>jsxRuntimeExports.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-display-bold mb-2 text-center",children:["Ajustar Posição: ",jsxRuntimeExports.jsx("span",{className:"text-red-600",children:n})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>t("x",-5),children:jsxRuntimeExports.jsx(ArrowLeft,{})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-1",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>t("y",-5),children:jsxRuntimeExports.jsx(ArrowUp,{})}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>t("y",5),children:jsxRuntimeExports.jsx(ArrowDown,{})})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>t("x",5),children:jsxRuntimeExports.jsx(ArrowRight,{})}),e&&jsxRuntimeExports.jsxs("div",{className:"ml-4 flex items-center space-x-2 border-l pl-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>e(-5),children:jsxRuntimeExports.jsx(Minus,{})}),jsxRuntimeExports.jsx("span",{className:"font-display-medium",children:"Tamanho"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"icon",onClick:()=>e(5),children:jsxRuntimeExports.jsx(Plus,{})})]})]})]}),WHITE_LOGO_TEAMS_IDS=[40],SplitRectangleDisplay=({parentFadePercentage:t=30,childFadePercentage:e=20,selectedMatch:n,homeScore:s,homePenScore:i,awayScore:o,awayPenScore:l,logoOffset:u=50,logoFadePercentage:d=70})=>{console.log(s,i,o,l);const[f,m]=reactExports.useState(),g=`${t}%`,y=`${e}%`,v=`${d}%`;function E(P){return P===39?{url:"premierLeagueTrophy.png",size:500}:P===48?{url:"carabaoCupTrophy.png",size:450}:P===45?{url:"faCupTrophy.png",size:350}:P===2?{url:"uclTrophy.png",size:475}:P===3?{url:"uelTrophy.png",size:425}:P===848?{url:"uconflTrophy.png",size:450}:P===531?{url:"superCupTrophy.png",size:425}:P===1?{url:"wcTrophy.png",size:425}:P===15?{url:"FIFA-Club-World-Cup-Trophy.png",size:500}:P===528?{url:"cShieldTrophy.png",size:300}:void 0}const{homeTeam:w,awayTeam:A,loading:I}=useSportDbTeams(n);reactExports.useEffect(()=>{n&&m(E(n.league.id||0))},[n]);const D={parentWidth:1280,parentHeight:720,childWidth:900,childHeight:327,childHalfWidth:900/2,logoHeight:400},V=-u,Y=u,j=1,H=5,S=20,T=20;return jsxRuntimeExports.jsxs("div",{className:"relative bg-transparent overflow-hidden",style:{width:`${D.parentWidth}px`,height:`${D.parentHeight}px`},children:[jsxRuntimeExports.jsxs("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 bg-black",style:{width:`${D.childWidth}px`,height:`${D.childHeight}px`,"--parent-fade-pcnt":g,"--child-fade-pcnt":y,maskImage:`linear-gradient(to right,
            rgba(0,0,0,0) 0%,
            rgba(0,0,0,1) var(--parent-fade-pcnt),
            rgba(0,0,0,1) calc(100% - var(--parent-fade-pcnt)),
            rgba(0,0,0,0) 100%
          )`,WebkitMaskImage:`linear-gradient(to right,
            rgba(0,0,0,0) 0%,
            rgba(0,0,0,1) var(--parent-fade-pcnt),
            rgba(0,0,0,1) calc(100% - var(--parent-fade-pcnt)),
            rgba(0,0,0,0) 100%
          )`,zIndex:j},children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 h-full",style:{width:`${D.childHalfWidth}px`,backgroundColor:(w==null?void 0:w.strColour1)==="#FFFFFF"?w==null?void 0:w.strColour2:w==null?void 0:w.strColour1,maskImage:`linear-gradient(to right,
                rgba(0,0,0,1) 0%,
                rgba(0,0,0,1) calc(100% - var(--child-fade-pcnt)),
                rgba(0,0,0,0) 100%
              )`,WebkitMaskImage:`linear-gradient(to right,
                rgba(0,0,0,1) 0%,
                rgba(0,0,0,1) calc(100% - var(--child-fade-pcnt)),
                rgba(0,0,0,0) 100%
              )`}}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 h-full",style:{width:`${D.childHalfWidth}px`,backgroundColor:(A==null?void 0:A.strColour1)==="#FFFFFF"?A==null?void 0:A.strColour2:A==null?void 0:A.strColour1,maskImage:`linear-gradient(to right,
                rgba(0,0,0,0) 0%,
                rgba(0,0,0,1) var(--child-fade-pcnt),
                rgba(0,0,0,1) 100%
              )`,WebkitMaskImage:`linear-gradient(to right,
                rgba(0,0,0,0) 0%,
                rgba(0,0,0,1) var(--child-fade-pcnt),
                rgba(0,0,0,1) 100%
              )`}})]})," ",jsxRuntimeExports.jsx("p",{className:"absolute text-[400px] font-placar-black text-white/20 uppercase leading-[1.414] text-center",style:{top:"65.7%",left:"50%",transform:"translate(-50%, -50%)",zIndex:H},children:"VS"}),f&&jsxRuntimeExports.jsx("img",{src:f.url,alt:`${n.league.name} Trophy`,className:"absolute left-1/2 -translate-x-1/2 -translate-y-1/2",style:{top:"65.7%",height:`${f.size}px`,width:"auto",zIndex:S}}),!I&&w&&w.strBadge&&jsxRuntimeExports.jsx("img",{src:`https://slow-hare-89.deno.dev/proxy?url=${encodeURIComponent(w.strBadge)}`,alt:`${n.teams.home.name} logo`,className:`absolute -translate-y-1/2 ${WHITE_LOGO_TEAMS_IDS.includes(n.teams.home.id)?"invert brightness-0 white-logo":""}`,style:{top:"93.7%",height:`${D.logoHeight}px`,width:"auto",left:`${D.parentWidth/2-D.childWidth/2+D.childHalfWidth/2+V}px`,transform:"translate(-50%, -50%)",zIndex:S,...(n.fixture.status.long==="Match Finished"||s!==null&&o!==null)&&{maskImage:`linear-gradient(to right,
                  rgba(0,0,0,1) ${100-d}%,
                  rgba(0,0,0,0) 100%
                )`,WebkitMaskImage:`linear-gradient(to right,
                  rgba(0,0,0,1) ${100-d}%,
                  rgba(0,0,0,0) 100%
                )`}}}),!I&&A&&A.strBadge&&jsxRuntimeExports.jsx("img",{src:`https://slow-hare-89.deno.dev/proxy?url=${encodeURIComponent(A.strBadge)}`,alt:`${n.teams.away.name} logo`,className:`absolute -translate-y-1/2 ${WHITE_LOGO_TEAMS_IDS.includes(n.teams.away.id)?"invert brightness-0 white-logo":""}`,style:{top:"93.7%",height:`${D.logoHeight}px`,width:"auto",left:`${D.parentWidth/2-D.childWidth/2+D.childHalfWidth+D.childHalfWidth/2+Y}px`,transform:"translate(-50%, -50%)",zIndex:S,...(n.fixture.status.long==="Match Finished"||s!==null&&o!==null)&&{maskImage:`linear-gradient(to right,
                  rgba(0,0,0,0) 0%,
                  rgba(0,0,0,1) ${v},
                  rgba(0,0,0,1) 100%
                )`,WebkitMaskImage:`linear-gradient(to right,
                  rgba(0,0,0,0) 0%,
                  rgba(0,0,0,1) ${v},
                  rgba(0,0,0,1) 100%
                )`}}}),n.fixture.status.long!=="Match Finished"&&s===null&&o===null?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("p",{className:"absolute text-[150px] font-placar-black text-white uppercase leading-[1.414] text-center left-1/2 -translate-x-1/2 -translate-y-1/2",style:{top:"65.7%",zIndex:T},children:"VS"})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"absolute text-[266px] font-placar-black text-white uppercase leading-[1.414] text-center left-1/2 -translate-x-1/2 -translate-y-1/2",style:{top:"65.7%",zIndex:T},children:[s,"-",o]}),n.fixture.status.short==="PEN"&&i!=null&&l!=null&&jsxRuntimeExports.jsxs("p",{className:"absolute text-[40px] font-placar-black text-white leading-[1.414] text-center left-1/2 -translate-x-1/2 -translate-y-1/2 mt-32",style:{top:"65.7%",zIndex:T},children:["(",i,"-",l," pen.)"]})]})]})},LIVERPOOL_TEAM_ID=40,API_BASE_URL="https://v3.football.api-sports.io",API_KEY="a3a4a4cc8c8f42b486a8e6abf0f3f892",API_HOST="v3.football.api-sports.io",getHeaders=()=>({"x-rapidapi-host":API_HOST,"x-apisports-key":API_KEY,"Content-Type":"application/json"}),fetchData=async t=>{try{const e=await fetch(t,{method:"GET",headers:getHeaders()});return e.ok?{success:!0,data:await e.json()}:e.status===403?{success:!1,error:"Chave da API inválida ou expirada. Verifique sua chave API-Sports."}:e.status===429?{success:!1,error:"Limite de requisições excedido. Tente novamente mais tarde. Verifique seu plano API-Sports."}:{success:!1,error:`Erro na API: ${e.status} - ${e.statusText}`}}catch(e){return console.error("Erro de conexão com a API:",e),{success:!1,error:"Erro de conexão com a API"}}},getLiverpoolUpcomingMatches=async(t=10)=>{try{const e=new Date,n=new Date;n.setMonth(n.getMonth()+3);const s=e.getFullYear(),i=`${API_BASE_URL}/fixtures?team=${LIVERPOOL_TEAM_ID}&season=${s}&status=NS&timezone=Europe/London`,o=await fetchData(i);return o.success&&o.data?{success:!0,matches:o.data.response.filter(u=>{const d=new Date(u.fixture.date);return d>=e&&d<=n}).sort((u,d)=>new Date(u.fixture.date).getTime()-new Date(d.fixture.date).getTime()).slice(0,t)}:{success:!1,error:o.error}}catch(e){return console.error("Erro ao buscar partidas do Liverpool:",e),{success:!1,error:"Erro ao buscar partidas futuras do Liverpool"}}},getLiverpoolRecentMatches=async(t=10)=>{try{const e=new Date,n=new Date;n.setMonth(n.getMonth()-2);const s=e.getFullYear(),i=`${API_BASE_URL}/fixtures?team=${LIVERPOOL_TEAM_ID}&season=${s}&timezone=Europe%2FLondon`,o=await fetchData(i);return o.success&&o.data?{success:!0,matches:o.data.response.filter(d=>{const f=new Date(d.fixture.date);return f<=e&&f>=n&&d.fixture.status.long==="Match Finished"}).sort((d,f)=>new Date(f.fixture.date).getTime()-new Date(d.fixture.date).getTime()).slice(0,t)}:{success:!1,error:o.error}}catch(e){return console.error("Erro ao buscar partidas recentes do Liverpool:",e),{success:!1,error:"Erro ao buscar partidas recentes do Liverpool"}}},getUpcomingMatches=getLiverpoolUpcomingMatches,getPastMatches=getLiverpoolRecentMatches,getDaysInMonth=(t,e)=>new Date(t,e,0).getDate(),months=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],EditMatchModal=({isOpen:t,onClose:e,matchToEdit:n,onSave:s})=>{const[i,o]=reactExports.useState(null),[l,u]=reactExports.useState({}),[d,f]=reactExports.useState({day:"",month:"",year:"",hour:"",minute:""});reactExports.useEffect(()=>{if(n){const j=new Date(n.fixture.date);o(JSON.parse(JSON.stringify(n))),f({day:String(j.getDate()).padStart(2,"0"),month:String(j.getMonth()),year:String(j.getFullYear()),hour:String(j.getHours()).padStart(2,"0"),minute:String(j.getMinutes()).padStart(2,"0")})}},[n]);const m=reactExports.useCallback((j,H)=>{const{value:S}=j.target;o(T=>{if(!T)return null;const P={...T};switch(H){case"homeTeamName":P.teams.home.name=S;break;case"awayTeamName":P.teams.away.name=S;break;case"stadium":P.fixture.venue.name=S;break;case"competition":P.league.name=S;break;case"round":P.league.round=S;break;case"referee":P.fixture.referee=S;break}return P})},[]),g=reactExports.useCallback((j,H)=>{f(S=>{const T={...S,[H]:j.target.value},{day:P,month:U,year:J,hour:W,minute:K}=T;if(P&&U&&J&&W&&K){const le=`${J}-${String(Number(U)+1).padStart(2,"0")}-${P}T${W}:${K}:00+00:00`;o(ge=>ge?{...ge,fixture:{...ge.fixture,date:le,timestamp:new Date(le).getTime()/1e3}}:null)}return T})},[]),y=reactExports.useCallback(()=>{var H,S,T,P,U,J,W,K;const j={};return(S=(H=i==null?void 0:i.fixture)==null?void 0:H.venue)!=null&&S.name||(j.stadium="Estádio é obrigatório"),(T=i==null?void 0:i.fixture)!=null&&T.date||(j.date="Data é obrigatória"),(P=i==null?void 0:i.league)!=null&&P.name||(j.competition="Competição é obrigatória"),(J=(U=i==null?void 0:i.teams)==null?void 0:U.home)!=null&&J.name||(j.homeTeam="Nome do time da casa é obrigatório"),(K=(W=i==null?void 0:i.teams)==null?void 0:W.away)!=null&&K.name||(j.awayTeam="Nome do time visitante é obrigatório"),u(j),Object.keys(j).length===0},[i]),v=j=>{j.preventDefault(),y()&&i&&(s(i),e())},E=()=>{i&&o(j=>{if(!j)return null;const H=JSON.parse(JSON.stringify(j));return[H.teams.home,H.teams.away]=[H.teams.away,H.teams.home],H})};if(!t||!i)return null;const w=new Date().getFullYear(),A=Array.from({length:6},(j,H)=>w-1+H),I=d.year&&d.month?getDaysInMonth(Number(d.year),Number(d.month)+1):31,D=Array.from({length:I},(j,H)=>String(H+1).padStart(2,"0")),V=Array.from({length:24},(j,H)=>String(H).padStart(2,"0")),Y=Array.from({length:60},(j,H)=>String(H).padStart(2,"0"));return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-display-bold text-gray-800",children:"Editar Dados da Partida"}),jsxRuntimeExports.jsx(Button,{onClick:e,variant:"ghost",size:"sm",className:"cursor-pointer",children:"×"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:v,className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-medium text-gray-700",children:"Times"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",size:"icon",onClick:E,title:"Inverter Times",children:jsxRuntimeExports.jsx(Repeat,{className:"w-4 h-4 text-gray-600"})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Time da Casa *"}),jsxRuntimeExports.jsx("input",{type:"text",value:i.teams.home.name,onChange:j=>m(j,"homeTeamName"),className:`w-full px-3 py-2 border rounded-lg font-display ${l.homeTeam?"border-red-500":"border-gray-300"}`,placeholder:"Nome do Time da Casa"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Time Visitante *"}),jsxRuntimeExports.jsx("input",{type:"text",value:i.teams.away.name,onChange:j=>m(j,"awayTeamName"),className:`w-full px-3 py-2 border rounded-lg font-display ${l.awayTeam?"border-red-500":"border-gray-300"}`,placeholder:"Nome do Time Visitante"})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-200"}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Estádio *"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(MapPin,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:i.fixture.venue.name,onChange:j=>m(j,"stadium"),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 font-display ${l.stadium?"border-red-500":"border-gray-300"}`,placeholder:"Ex: Anfield"})]}),l.stadium&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:l.stadium})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Data e Horário *"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("select",{value:d.day,onChange:j=>g(j,"day"),className:`w-1/4 px-3 py-2 border rounded-lg font-display ${l.date?"border-red-500":"border-gray-300"}`,children:D.map(j=>jsxRuntimeExports.jsx("option",{value:j,children:j},j))}),jsxRuntimeExports.jsx("select",{value:d.month,onChange:j=>g(j,"month"),className:`w-2/4 px-3 py-2 border rounded-lg font-display ${l.date?"border-red-500":"border-gray-300"}`,children:months.map((j,H)=>jsxRuntimeExports.jsx("option",{value:H,children:j},j))}),jsxRuntimeExports.jsx("select",{value:d.year,onChange:j=>g(j,"year"),className:`w-1/4 px-3 py-2 border rounded-lg font-display ${l.date?"border-red-500":"border-gray-300"}`,children:A.map(j=>jsxRuntimeExports.jsx("option",{value:j,children:j},j))})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2 mt-2",children:[jsxRuntimeExports.jsx("select",{value:d.hour,onChange:j=>g(j,"hour"),className:`w-1/2 px-3 py-2 border rounded-lg font-display ${l.date?"border-red-500":"border-gray-300"}`,children:V.map(j=>jsxRuntimeExports.jsx("option",{value:j,children:j},j))}),jsxRuntimeExports.jsx("select",{value:d.minute,onChange:j=>g(j,"minute"),className:`w-1/2 px-3 py-2 border rounded-lg font-display ${l.date?"border-red-500":"border-gray-300"}`,children:Y.map(j=>jsxRuntimeExports.jsx("option",{value:j,children:j},j))})]}),l.date&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:l.date})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Competição *"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Trophy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:i.league.name,onChange:j=>m(j,"competition"),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 font-display ${l.competition?"border-red-500":"border-gray-300"}`,placeholder:"Ex: Premier League"})]}),l.competition&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:l.competition})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Rodada"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Trophy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:i.league.round,onChange:j=>m(j,"round"),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 font-display border-gray-300",placeholder:"Ex: 38ª Rodada"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-1",children:"Árbitro"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:i.fixture.referee||"",onChange:j=>m(j,"referee"),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 font-display border-gray-300",placeholder:"Ex: Craig Pawson"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",onClick:e,variant:"outline",className:"cursor-pointer font-display-medium",children:"Cancelar"}),jsxRuntimeExports.jsxs(Button,{type:"submit",className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4 mr-2"}),"Salvar"]})]})]})]})})},MatchSelector=reactExports.forwardRef(({onMatchSelected:t,escalacaoData:e,onValidationChange:n,translations:s,pastMatches:i=!1,includeTheOne:o=!1},l)=>{var le,ge,oe,ce;const[u,d]=reactExports.useState([]),[f,m]=reactExports.useState(!1),[g,y]=reactExports.useState(null),[v,E]=reactExports.useState(null),[w,A]=reactExports.useState(!1),[I,D]=reactExports.useState(!1),[V,Y]=reactExports.useState(null),[j,H]=reactExports.useState({stadium:((le=e.matchData)==null?void 0:le.stadium)||"",date:((ge=e.matchData)==null?void 0:ge.date)||"",competition:((oe=e.matchData)==null?void 0:oe.competition)||"",referee:((ce=e.matchData)==null?void 0:ce.referee)||""}),[S,T]=reactExports.useState({}),P=reactExports.useCallback(()=>{const ie={};return j.stadium.trim()||(ie.stadium="Estádio é obrigatório"),j.date.trim()||(ie.date="Data é obrigatória"),j.competition.trim()||(ie.competition="Competição é obrigatória"),ie},[j]);reactExports.useEffect(()=>{if(w){const ie=P();T(ie),n(Object.keys(ie).length===0)}else T({}),n(!!v)},[v,w,j,n,P]),reactExports.useEffect(()=>{U()},[]);const U=async()=>{m(!0),y(null);try{let ie;if(i){if(ie=await getPastMatches(),o){const Ne=await getUpcomingMatches();if(Ne.success&&Ne.matches&&Ne.matches.length>0){const re=Ne.matches.sort((_e,Se)=>new Date(_e.fixture.date).getTime()-new Date(Se.fixture.date).getTime())[0];ie.matches=[re,...ie.matches||[]]}}(!ie.success||!ie.matches||ie.matches.length===0)&&(ie=await getUpcomingMatches())}else ie=await getUpcomingMatches(),(!ie.success||!ie.matches||ie.matches.length===0)&&(ie=await getPastMatches());ie.success&&ie.matches&&ie.matches.length>0?d(ie.matches):(y("Não foi possível carregar partidas da API. Use o modo manual."),A(!0))}catch(ie){console.error("Erro ao carregar partidas:",ie),y("Erro ao conectar com a API de partidas. Use o modo manual."),A(!0)}finally{m(!1)}},J=ie=>{E(ie),t(ie)},W=ie=>{Y(ie),D(!0)},K=reactExports.useCallback(()=>{const ie=P();if(T(ie),Object.keys(ie).length===0){const re={fixture:{id:Date.now(),referee:j.referee,timezone:"America/Sao_Paulo",date:j.date,timestamp:new Date(j.date).getTime()/1e3,venue:{id:0,name:j.stadium,city:""},status:{long:"Not Started",short:"NS",elapsed:null,extra:null}},teams:{home:{id:0,name:"Time da Casa",logo:"",winner:null},away:{id:1,name:"Time Visitante",logo:"",winner:null}},goals:{home:0,away:0},league:{id:0,name:j.competition,country:"",logo:"",flag:"",season:new Date(j.date).getFullYear(),round:"",standings:!1}};return t(re),!0}return!1},[j,t,P]);return reactExports.useImperativeHandle(l,()=>({submitManualData:K,canProceed:!!v||w&&Object.keys(S).length===0&&Object.values(j).every(ie=>ie!==null&&String(ie).trim()!=="")})),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-display-bold text-gray-800 mb-2",children:"Dados da Partida"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Selecione uma partida da API ou preencha manualmente"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-100 rounded-lg p-1 flex",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>{A(!1),E(null),T({}),u.length===0&&!f&&U()},variant:w?"ghost":"default",size:"sm",className:`cursor-pointer font-display-medium ${w?"text-gray-600 hover:text-gray-800":"bg-red-600 text-white hover:bg-red-700"}`,children:[jsxRuntimeExports.jsx(Search,{className:"w-4 h-4 mr-2"}),"Buscar da API"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{A(!0),E(null),y(null)},variant:w?"default":"ghost",size:"sm",className:`cursor-pointer font-display-medium ${w?"bg-red-600 text-white hover:bg-red-700":"text-gray-600 hover:text-gray-800"}`,children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-2"}),"Preencher Manual"]})]})}),!w&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[f&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-8",children:[jsxRuntimeExports.jsx(Loader,{className:"w-6 h-6 animate-spin text-red-600 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 font-display",children:"Buscando partidas..."})]}),g&&jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-red-600 mr-2"}),jsxRuntimeExports.jsx("p",{className:"text-red-800 font-display-medium",children:"Erro na API"})]}),jsxRuntimeExports.jsx("p",{className:"text-red-700 text-sm mt-1 font-display",children:g}),jsxRuntimeExports.jsx(Button,{onClick:()=>A(!0),className:"mt-3 bg-red-600 hover:bg-red-700 text-white cursor-pointer font-display-medium",size:"sm",children:"Usar Modo Manual"})]}),!f&&!g&&u.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("h3",{className:"font-display-semibold text-gray-800",children:["Partidas Disponíveis (",u.length,")"]}),jsxRuntimeExports.jsx("div",{className:"grid gap-3",children:u.map(ie=>{const Ne=new Date(ie.fixture.date),re=convertToSaoPauloTime(Ne),_e=(v==null?void 0:v.fixture.id)===ie.fixture.id;return jsxRuntimeExports.jsxs("div",{className:`border rounded-lg p-4 transition-all flex relative items-center justify-between ${_e?"border-red-500 bg-red-50":"border-gray-200 hover:border-red-300 hover:bg-red-50"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 relative cursor-pointer",onClick:()=>J(ie),children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center md:justify-start items-center space-x-4 mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("img",{src:ie.teams.home.logo,alt:ie.teams.home.name,className:"w-6 h-6 object-contain"}),jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-800",children:ie.teams.home.name})]}),i&&ie.goals.home!=null&&ie.goals.away!=null?jsxRuntimeExports.jsx("strong",{className:"text-gray-500 font-bold w-fit whitespace-nowrap",children:`${ie.goals.home}-${ie.goals.away}`}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 font-display",children:"vs"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"font-display-medium text-gray-800",children:ie.teams.away.name}),jsxRuntimeExports.jsx("img",{src:ie.teams.away.logo,alt:ie.teams.away.name,className:"w-6 h-6 object-contain"})]}),i&&ie.goals.home===null&&ie.goals.away===null&&jsxRuntimeExports.jsxs("div",{className:"absolute -top-7 left-1/2 transform -translate-x-1/2 flex items-center space-x-1 text-red-600 text-[10px] bg-white rounded-full shadow-md px-2 py-0.5",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Próxima partida"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row items-center space-x-4 text-sm text-gray-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-1"}),jsxRuntimeExports.jsx("span",{className:"font-display",children:formatDateToBrazilian(re)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 mr-1"}),jsxRuntimeExports.jsx("span",{className:"font-display",children:ie.fixture.venue.name||"Estádio não informado"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Trophy,{className:"w-4 h-4 mr-1"}),jsxRuntimeExports.jsx("span",{className:"font-display",children:formatCompetitionRound(ie,s)})]})]})]}),_e&&jsxRuntimeExports.jsxs("div",{className:"flex absolute -right-1 flex-col justify-between h-full items-center space-x-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-red-600 pt-1 mr-1"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:Se=>{Se.stopPropagation(),W(ie)},className:"text-gray-600 hover:text-red-600 hover:bg-transparent cursor-pointer pt-2",title:"Editar partida",children:jsxRuntimeExports.jsx(Pencil,{className:"w-4 h-4"})})]})]},ie.fixture.id)})})]})]}),w&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-display-semibold text-gray-800",children:"Preencher Dados Manualmente"}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Estádio *"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(MapPin,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:j.stadium,onChange:ie=>{H(Ne=>({...Ne,stadium:ie.target.value}))},className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display ${S.stadium?"border-red-500":"border-gray-300"}`,placeholder:"Ex: Anfield, Old Trafford, Estádio do Maracanã"})]}),S.stadium&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:S.stadium})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Data e Horário *"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Calendar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:j.date,onChange:ie=>{H(Ne=>({...Ne,date:ie.target.value}))},className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display ${S.date?"border-red-500":"border-gray-300"}`,placeholder:"Ex: 28 de junho de 2025 às 20:00"})]}),S.date&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:S.date}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-xs mt-1 font-display",children:"Formato: DD de mês de AAAA às HH:MM"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Competição / Rodada *"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Trophy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:j.competition,onChange:ie=>{H(Ne=>({...Ne,competition:ie.target.value}))},className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display ${S.competition?"border-red-500":"border-gray-300"}`,placeholder:"Ex: Premier League - 38ª Rodada, Champions League - Final"})]}),S.competition&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:S.competition}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-xs mt-1 font-display",children:"Formato: Competição - Rodada/Fase"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Árbitro"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{type:"text",value:j.referee??"",onChange:ie=>{H(Ne=>({...Ne,referee:ie.target.value}))},className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display ${S.referee?"border-red-500":"border-gray-300"}`,placeholder:"Ex: Darren England, Craig Pawson, Chris Kavanagh"})]}),S.referee&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1 font-display",children:S.referee})]})]})]}),v||w?jsxRuntimeExports.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-600 mr-2"}),jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-green-800",children:"Dados da Partida Confirmados"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-sm text-green-700 font-display",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Estádio:"})," ",w?j.stadium:(v==null?void 0:v.fixture.venue.name)||"Não informado"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Data:"})," ",w?j.date:formatDateToBrazilian(convertToSaoPauloTime(new Date((v==null?void 0:v.fixture.date)||"")))]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Competição:"})," ",w?j.competition:v?formatCompetitionRound(v,s):"Não informado"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Árbitro:"})," ",w?j.referee||"Não informado":(v==null?void 0:v.fixture.referee)||"Não informado"]})]})]}):null,jsxRuntimeExports.jsx(EditMatchModal,{isOpen:I,onClose:()=>{D(!1),Y(null)},matchToEdit:V,onSave:ie=>{E(ie),t(ie),d(Ne=>Ne.map(re=>re.fixture.id===ie.fixture.id?ie:re))}})]})}),proportionPlayerNameNumber=47/28,proportionReserveNamesTitle=24/18,proportionCoachNameTitle=31/18,escalacaoConfigs={quadrada:{canvasWidth:1080,canvasHeight:1080,logoX:921,logoY:31,logoSize:123,placarX:82,placarY:-75,placarSize:450,jogadorX:484,jogadorY:100,jogadorSize:950,startYJogadores:229,lineHeightJogadores:54.5,playerNumberX:183,playerNameX:198,reserveBlockOffsetY:-30,reserveBancoX:184,reserveNamesX:198,coachOffsetY:0,coachBancoX:184,coachNameX:198,footerY:1005,stadiumX:198,stadiumY:970,dateX:198,dateY:995,competitionX:198,competitionY:1020},vertical:{canvasWidth:1080,canvasHeight:1920,logoX:865,logoY:203,logoSize:175,placarX:52,placarY:33,placarSize:690,jogadorX:400,jogadorY:407,jogadorSize:950,startYJogadores:507,lineHeightJogadores:71,playerNumberX:212,playerNameX:230,reserveBlockOffsetY:-30,reserveBancoX:212,reserveNamesX:230,coachOffsetY:0,coachBancoX:212,coachNameX:230,footerY:1545,stadiumX:230,stadiumY:1545,dateX:230,dateY:1570,competitionX:230,competitionY:1595,playerNumberFontSize:36,playerNameFontSize:36*proportionPlayerNameNumber,reserveBancoFontSize:20,reserveNamesFontSize:20*proportionReserveNamesTitle,coachBancoFontSize:20,coachNameFontSize:20*proportionCoachNameTitle},horizontal:{canvasWidth:1920,canvasHeight:1080,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,jogadorX:175,jogadorY:100,jogadorSize:950,startYJogadores:260,lineHeightJogadores:54.5,playerNumberX:970,playerNameX:990,reserveBlockOffsetY:-30,reserveBancoX:970,reserveNamesX:990,coachOffsetY:0,coachBancoX:970,coachNameX:990,footerY:1005,stadiumX:30,stadiumY:1005,dateX:30,dateY:1030,competitionX:30,competitionY:1055}},EscalacaoGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{const{baseImages:i}=useImages(),[o,l]=reactExports.useState(escalacaoConfigs),[u,d]=reactExports.useState(null),[f,m]=reactExports.useState("quadrada"),[g,y]=reactExports.useState(["fundo","placar","logo","jogador","titulares","reservas","tecnico","info"]),[v,E]=reactExports.useState(null),w=reactExports.useRef(null),A=reactExports.useRef(null),I=reactExports.useRef(null),D=reactExports.useRef(null),V=reactExports.useRef(null),Y={primary:"#ffffff",secondary:"#1ae9de"},[j,H]=reactExports.useState(1),[S,T]=reactExports.useState(!1),[P,U]=reactExports.useState(!1),[J,W]=reactExports.useState(!1),[K,le]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null,formation:null,selectedPlayers:{},reservePlayers:[],coach:"Arne Slot"}),ge=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione ou preencha os dados da partida"},{id:2,title:"Arte do Jogo",icon:Palette,description:"Selecione a arte do jogo e jogador destaque"},{id:3,title:"Formação Tática",icon:Target,description:"Escolha a formação que será utilizada"},{id:4,title:"Seleção de Jogadores",icon:Users,description:"Selecione os jogadores para cada posição"},{id:5,title:"Gerar Escalação",icon:Image$1,description:"Gere a imagem final da escalação"}],[oe,ce]=reactExports.useState(!1),ie=we=>{switch(we){case 2:return oe;case 3:return!!K.gameArt&&!!K.featuredPlayer;case 4:return!!K.formation;case 5:return K.formation?!!K.formation.positions.every(me=>K.selectedPlayers[me.id]):!1;default:return!0}},Ne=()=>{var we;j===1&&(we=V.current)!=null&&we.submitManualData&&!V.current.canProceed&&!V.current.submitManualData()||H(de=>de+1)},re=we=>{const de=new Date(we.fixture.date),me=convertToSaoPauloTime(de),ue={homeTeam:we.teams.home.name,awayTeam:we.teams.away.name,competition:formatCompetitionRound(we,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:we.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:we.fixture.referee||"",stadium:we.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(me),competitionRound:formatCompetitionRound(we,e)};E(we),le(se=>({...se,matchData:ue}))},_e=(we,de,me)=>{le(ue=>({...ue,gameArt:we,featuredPlayer:de,featuredPlayerImageUrl:me}))},Se=we=>{le(de=>({...de,formation:we,selectedPlayers:{}})),H(4)},Re=we=>{le(de=>({...de,selectedPlayers:we}))},Be=we=>{le(de=>({...de,reservePlayers:we}))},Ie=reactExports.useCallback(we=>new Promise((de,me)=>{const ue=new Image;ue.crossOrigin="anonymous",ue.onload=()=>de(ue),ue.onerror=me,ue.src=we}),[]),je=reactExports.useCallback(async(we,de,me)=>{var ze,$e,vt;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const ue=we.current;if(!ue)return;const se=ue.getContext("2d");if(!se||(ue.width=de.canvasWidth,ue.height=de.canvasHeight,se.clearRect(0,0,ue.width,ue.height),me.length===0))return;const he=ve=>{ve.shadowColor="rgba(0, 0, 0, 0.8)",ve.shadowOffsetX=2,ve.shadowOffsetY=2,ve.shadowBlur=5},Pe=ve=>{ve.shadowColor="transparent",ve.shadowOffsetX=0,ve.shadowOffsetY=0,ve.shadowBlur=0};for(const ve of me)if(Pe(se),ve==="fundo")try{const xe=(ze=i.find(Oe=>Oe.section==="escalacao"&&Oe.type===de.imageType))==null?void 0:ze.url;if(!xe)throw new Error("Imagem de fundo para escalação não encontrada");const Ue=await Ie(xe);se.drawImage(Ue,0,0,ue.width,ue.height)}catch{const Ue=se.createLinearGradient(0,0,0,ue.height);Ue.addColorStop(0,"#dc2626"),Ue.addColorStop(1,"#991b1b"),se.fillStyle=Ue,se.fillRect(0,0,ue.width,ue.height)}else if(ve==="logo")try{const xe=await Ie("/caminhantes-clock.png");se.drawImage(xe,de.logoX,de.logoY,de.logoSize,de.logoSize)}catch{console.warn("Erro ao carregar logo")}else if(ve==="placar"&&K.gameArt){if(D.current){T(!0);try{const xe=await domtoimage.toPng(D.current,{quality:1,bgcolor:void 0}),Ue=new Image;Ue.src=xe,await new Promise((Oe,Me)=>{Ue.onload=()=>Oe(),Ue.onerror=Ze=>Me(Ze)}),se.drawImage(Ue,de.placarX,de.placarY,de.placarSize,de.placarSize*(720/1280)),U(!0)}catch(xe){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",xe)}finally{T(!1)}}}else if(ve==="jogador"&&K.featuredPlayerImageUrl)try{const xe=await Ie(K.featuredPlayerImageUrl),Ue=de.jogadorSize*1062/666;se.drawImage(xe,de.jogadorX,de.jogadorY,de.jogadorSize,Ue)}catch{console.warn("Erro ao carregar jogador destaque")}else if(ve==="titulares"&&K.formation){let xe=de.startYJogadores;he(se),K.formation.positions.forEach(Ue=>{const Oe=K.selectedPlayers[Ue.id];if(Oe){se.fillStyle=Y.secondary;const Me=de.playerNumberFontSize||28;se.font=`800 ${Me}px "Funnel Display", sans-serif`,se.textAlign="right",se.fillText(String(Oe.number),de.playerNumberX,xe),se.fillStyle=Y.primary;const Ze=de.playerNameFontSize||47;se.font=`800 ${Ze}px "Funnel Display", sans-serif`,se.textAlign="left",se.fillText(Oe.name.toUpperCase(),de.playerNameX,xe),xe+=de.lineHeightJogadores}}),Pe(se)}else if(ve==="reservas"&&K.reservePlayers.length>0){let xe=de.startYJogadores+((($e=K.formation)==null?void 0:$e.positions.length)||11)*de.lineHeightJogadores+de.reserveBlockOffsetY;const Ue=K.reservePlayers.map(Et=>Et.name).join(", "),Oe=de.imageType==="quadrada"?300:de.imageType==="vertical"?400:300,Me=de.reserveNamesFontSize||18;se.font=`${Me}px "Funnel Display", sans-serif`;const Ze=Ue.split(" ");let He=[],qe="";for(let Et=0;Et<Ze.length;Et++){const mn=qe+Ze[Et]+" ";se.measureText(mn).width>Oe&&Et>0?(He.push(qe.trim()),qe=Ze[Et]+" "):qe=mn}He.push(qe.trim());const Xe=25,et=He.length*Xe;he(se),se.fillStyle=Y.secondary;const Kt=de.reserveBancoFontSize||18;se.font=`800 ${Kt}px "Funnel Display", sans-serif`,se.textAlign="right",se.fillText("BANCO",de.reserveBancoX,xe+et/2+9+15),se.fillStyle=Y.primary;const It=de.reserveNamesFontSize||24;se.font=`800 ${It}px "Funnel Display", sans-serif`,se.textAlign="left";let Bt=xe+15;for(const Et of He)se.fillText(Et.toUpperCase(),de.reserveNamesX,Bt+Xe),Bt+=Xe;Pe(se)}else if(ve==="tecnico"&&K.coach){let xe=de.startYJogadores+(((vt=K.formation)==null?void 0:vt.positions.length)||11)*de.lineHeightJogadores+de.reserveBlockOffsetY+175;he(se),se.fillStyle=Y.secondary;const Ue=de.coachBancoFontSize||18;se.font=`800 ${Ue}px "Funnel Display", sans-serif`,se.textAlign="right",se.fillText("TÉCNICO",de.coachBancoX,xe),se.fillStyle=Y.primary;const Oe=de.coachNameFontSize||31;se.font=`800 ${Oe}px "Funnel Display", sans-serif`,se.textAlign="left",se.fillText(K.coach.toUpperCase(),de.coachNameX,xe),Pe(se)}else if(ve==="info"&&K.matchData){he(se),se.fillStyle=Y.primary;const xe=20;se.font=`800 ${xe}px "Funnel Display", sans-serif`,se.textAlign=de.imageType==="horizontal"?"left":"center";const{stadium:Ue,date:Oe,referee:Me,competitionRound:Ze}=K.matchData,He=[Ze.toUpperCase()];Me&&He.push(`ÁRBITRO: ${Me.toUpperCase()}`);const qe=He.join(" - "),Xe=`${Ue.toUpperCase()} - ${Oe.toUpperCase()}`,et=de.imageType==="horizontal"?30:ue.width/2,Kt=de.footerY,It=xe*1.4,Bt=Kt+It,Et=25;se.fillText(qe,et,Kt+Et),se.fillText(Xe,et,Bt+Et),Pe(se)}},[i,K,Ie]),Te=reactExports.useCallback(()=>{if(j!==5)return;T(!0);const we={imageType:f,...o[f]},de=u?g.indexOf(u):-1,me=de>-1?g.slice(0,de):g,ue=de>-1?[g[de]]:[],se=de>-1?g.slice(de+1):[];Promise.all([je(w,we,me),je(A,we,ue),je(I,we,se)]).then(()=>{T(!1),U(!0)})},[j,o,f,u,g]);reactExports.useEffect(()=>{Te()},[u,f,K,g,Te]),reactExports.useEffect(()=>{if(j!==5||!u)return;const we=o[f];je(A,we,[u])},[o,u,f,j]);const ke=()=>{var se;const we=document.createElement("canvas"),de=o[f];we.width=de.canvasWidth,we.height=de.canvasHeight;const me=we.getContext("2d");if(!me||!w.current||!A.current||!I.current){console.error("Download abortado: um ou mais refs de canvas não estão prontos.");return}me.drawImage(w.current,0,0),me.drawImage(A.current,0,0),me.drawImage(I.current,0,0);const ue=document.createElement("a");ue.download=`escalacao-liverpool-${((se=K.matchData)==null?void 0:se.matchDate)||"custom"}-${f}.png`,ue.href=we.toDataURL("image/png"),ue.click()},Ge=we=>{ie(we)&&H(we)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Gerador de Escalações"}),v&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:D,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:v})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:ge,currentStep:j,onStepClick:Ge,canAdvanceToStep:ie}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[j===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:V,onMatchSelected:re,escalacaoData:K,onValidationChange:ce,translations:e}),j===2&&jsxRuntimeExports.jsx(GameArtSelector,{onArtSelect:_e,escalacaoData:K,setEscalacaoData:le}),j===3&&jsxRuntimeExports.jsx(FormationSelector,{selectedFormation:K.formation,onFormationSelect:Se}),j===4&&K.formation&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(PlayerSelector,{isOfficialLineUp:J,formation:K.formation,selectedPlayers:K.selectedPlayers,onPlayersChange:Re,reservePlayers:K.reservePlayers,onReservePlayersChange:Be,maxReserves:11,onOfficialStatusChange:W}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Técnico"}),jsxRuntimeExports.jsx("input",{type:"text",value:K.coach,onChange:we=>le(de=>({...de,coach:we.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent font-display",placeholder:"Nome do técnico"})]})]}),j===5&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-bold text-gray-800 mb-2",children:"Gerar Escalação Final"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Ajuste os elementos e a ordem das camadas antes de gerar."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:f,onChange:we=>m(we.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"}),jsxRuntimeExports.jsx("option",{value:"horizontal",children:"Horizontal"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:u??"",onChange:we=>d(we.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),g.map(we=>jsxRuntimeExports.jsx("option",{value:we,className:"capitalize",children:we},we))]})]}),u&&jsxRuntimeExports.jsx(PositionController,{elementName:u,onMove:(we,de)=>l(me=>{const ue=JSON.parse(JSON.stringify(me)),se=`${u}${we.toUpperCase()}`;return typeof ue[f][se]=="number"&&(ue[f][se]+=de),ue}),onResize:we=>l(de=>{const me=JSON.parse(JSON.stringify(de)),ue=`${u}Size`;return typeof me[f][ue]=="number"&&(me[f][ue]+=we),me})}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:g,setRenderOrder:y})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${o[f].canvasHeight/o[f].canvasWidth*100}%`},children:[w,A,I].map((we,de)=>jsxRuntimeExports.jsx("canvas",{ref:we,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:de+1}},de))})})]}),v&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"escalacao",match:v,translations:e,escalacaoOficial:J}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-4",children:[jsxRuntimeExports.jsx(Button,{onClick:Te,disabled:S,className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer font-display-medium",children:S?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),P&&jsxRuntimeExports.jsxs(Button,{onClick:ke,disabled:S,variant:"outline",className:"cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download PNG"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${j===1?"justify-end":"justify-between"} mt-6`,children:[j!==1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>H(Math.max(1,j-1)),disabled:j===1,variant:"outline",className:"cursor-pointer font-display-medium",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),j!==5&&jsxRuntimeExports.jsxs(Button,{onClick:Ne,disabled:j===5||!ie(j+1),className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer font-display-medium",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},initialImageGeneratorConfigs$5={quadrada:{canvasWidth:1080,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:921,logoY:31,logoSize:123,placarX:80,placarY:565,placarSize:930,jogadorX:121,jogadorY:85,jogadorSize:900,motmTextX:540,motmTextY:195,motmTextSize:1,playerNumberX:900,playerNumberY:300,playerNumberSize:1},vertical:{canvasWidth:1080,canvasHeight:1920,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:30,logoY:1393,logoSize:95,placarX:115,placarY:923,placarSize:875,jogadorX:105,jogadorY:300,jogadorSize:1025,motmTextX:540,motmTextY:365,motmTextSize:1,playerNumberX:900,playerNumberY:470,playerNumberSize:1},horizontal:{canvasWidth:1920,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1920,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,jogadorX:647,jogadorY:100,jogadorSize:900,motmTextX:960,motmTextY:880,motmTextSize:1,playerNumberX:30,playerNumberY:1005,playerNumberSize:1}},MotmGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{const{baseImages:i}=useImages(),[o,l]=reactExports.useState(initialImageGeneratorConfigs$5),u=reactExports.useRef(null),d=reactExports.useRef(null),f=reactExports.useRef(null),m=reactExports.useRef(null),[g,y]=reactExports.useState(["background","logo","nome","numero","jogador","placar"]),[v,E]=reactExports.useState(null),[w,A]=reactExports.useState("quadrada"),[I,D]=reactExports.useState(null),V=reactExports.useRef(null),Y={primary:"#ffffff",secondary:"#1ae9de"},[j,H]=reactExports.useState(1),[S,T]=reactExports.useState(!1),[P,U]=reactExports.useState(!1),[J,W]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null}),K=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Arte e Jogador",icon:Palette,description:"Selecione a arte e o jogador"},{id:3,title:"Gerar Imagem",icon:Image$1,description:"Ajuste e gere a imagem"}],[le,ge]=reactExports.useState(!1),oe=Te=>{switch(Te){case 2:return le;case 3:return!!J.gameArt&&!!J.featuredPlayer;default:return!0}},ce=()=>{j===1&&V.current&&!V.current.canProceed&&!V.current.submitManualData()||H(Te=>Te+1)},ie=Te=>{const ke=new Date(Te.fixture.date),Ge=convertToSaoPauloTime(ke),we={homeTeam:"Liverpool",awayTeam:"Adversário",competition:formatCompetitionRound(Te,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:Te.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:Te.fixture.referee||"",stadium:Te.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(Ge),competitionRound:formatCompetitionRound(Te,e)};D(Te),W(de=>({...de,matchData:we}))},Ne=(Te,ke,Ge)=>{W(we=>({...we,gameArt:Te,featuredPlayer:ke,featuredPlayerImageUrl:Ge}))},re=reactExports.useCallback(Te=>new Promise((ke,Ge)=>{const we=new Image;we.crossOrigin="anonymous",we.onload=()=>ke(we),we.onerror=()=>Ge(new Error(`Falha ao carregar imagem: ${Te}`)),we.src=Te}),[]),_e=reactExports.useCallback(async(Te,ke,Ge)=>{var me;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const we=Te.current;if(!we)return;const de=we.getContext("2d");if(de){we.width=ke.canvasWidth,we.height=ke.canvasHeight,de.clearRect(0,0,we.width,we.height);for(const ue of Ge)if(ue==="background")try{const se=(me=i.find(he=>he.type===w&&he.section==="man_of_the_match"))==null?void 0:me.url;if(se){const he=await re(se),Pe=he.height/he.width,ze=ke.backgroundSize,$e=ze*Pe;de.drawImage(he,ke.backgroundX,ke.backgroundY,ze,$e)}}catch(se){console.warn(se)}else if(ue==="logo")try{const se=await re("/caminhantes-clock.png");de.drawImage(se,ke.logoX,ke.logoY,ke.logoSize,ke.logoSize)}catch(se){console.error(se)}else if(ue==="placar"&&J.gameArt){if(m.current){T(!0);try{const se=await domtoimage.toPng(m.current,{quality:1,bgcolor:void 0}),he=new Image;he.src=se,await new Promise((Pe,ze)=>{he.onload=()=>Pe(),he.onerror=$e=>ze($e)}),de.drawImage(he,ke.placarX,ke.placarY,ke.placarSize,ke.placarSize*(720/1280)),U(!0)}catch(se){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",se)}finally{T(!1)}}}else if(ue==="jogador"&&J.featuredPlayerImageUrl)try{const se=await re(J.featuredPlayerImageUrl),he=1062/666,Pe=ke.jogadorSize,ze=Pe*he;de.drawImage(se,ke.jogadorX,ke.jogadorY,Pe,ze)}catch(se){console.error(se)}else if(ue==="nome"&&J.featuredPlayer){de.textAlign="center";const se=ke.motmTextSize;de.fillStyle=Y.primary,de.shadowColor="rgba(0, 0, 0, 0.5)",de.shadowOffsetX=5*se,de.shadowOffsetY=5*se,de.shadowBlur=5*se,de.font=`500 ${300*se}px "Lovers Quarrel", sans-serif`,de.fillText(J.featuredPlayer.name,ke.motmTextX,ke.motmTextY),de.shadowColor="transparent",de.shadowOffsetX=0,de.shadowOffsetY=0,de.shadowBlur=0}else if(ue==="numero"&&J.featuredPlayer){de.textAlign="center";const se=ke.playerNumberSize;de.fillStyle=Y.primary,de.shadowColor="rgba(0, 0, 0, 0.75)",de.shadowOffsetX=5*se,de.shadowOffsetY=5*se,de.shadowBlur=10*se,de.font=`400 ${80*se}px "Lovers Quarrel", sans-serif`,de.fillText(`#${J.featuredPlayer.number.toUpperCase()}`,ke.playerNumberX,ke.playerNumberY),de.fillStyle=Y.primary}}},[J,i,Y,w,re]),Se=reactExports.useCallback(()=>{if(j!==3||!u.current||!d.current||!f.current)return;T(!0);const Te=o[w],ke=v?g.indexOf(v):-1,Ge=ke>-1?g.slice(0,ke):g,we=ke>-1?[g[ke]]:[],de=ke>-1?g.slice(ke+1):[];Promise.all([_e(u,Te,Ge),_e(d,Te,we),_e(f,Te,de)]).then(()=>{T(!1),U(!0)}).catch(me=>{console.error("Erro ao desenhar camadas:",me),T(!1)})},[j,o,w,v,g]);reactExports.useEffect(()=>{Se()},[Se]),reactExports.useEffect(()=>{if(j!==3||!v||!d.current)return;const Te=o[w];_e(d,Te,[v])},[o,v,w,j]);const Re=()=>{var de;const Te=document.createElement("canvas"),ke=o[w];Te.width=ke.canvasWidth,Te.height=ke.canvasHeight;const Ge=Te.getContext("2d");if(!Ge||!u.current||!d.current||!f.current)return;Ge.drawImage(u.current,0,0),Ge.drawImage(d.current,0,0),Ge.drawImage(f.current,0,0);const we=document.createElement("a");we.href=Te.toDataURL("image/png"),we.download=`motm-${((de=J.featuredPlayer)==null?void 0:de.name)||"jogador"}-${w}.png`,we.click()},Be=(Te,ke)=>{v&&l(Ge=>{const we=`${v}X`,de=`${v}Y`,me={...Ge[w]};return Te==="x"&&we in me?me[we]+=ke:Te==="y"&&de in me&&(me[de]+=ke),{...Ge,[w]:me}})},Ie=Te=>{v&&l(ke=>{const Ge=`${v}Size`,we={...ke[w]};return Ge in we&&(Ge==="playerNumberSize"||Ge==="motmTextSize"?we[Ge]+=Te/100:we[Ge]+=Te),{...ke,[w]:we}})},je=Te=>{oe(Te)&&H(Te)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Man of The Match"}),I&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:m,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:I})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:K,currentStep:j,onStepClick:je,canAdvanceToStep:oe}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[j===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:V,onMatchSelected:ie,escalacaoData:{...J,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:ge,translations:e,pastMatches:!0}),j===2&&jsxRuntimeExports.jsx(GameArtSelector,{onArtSelect:Ne,escalacaoData:{...J,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},setEscalacaoData:Te=>W(ke=>{let Ge;if(typeof Te=="function"){const we={...ke,formation:null,selectedPlayers:{},reservePlayers:[],coach:""};Ge=Te(we)}else Ge=Te;return{...ke,gameArt:Ge.gameArt,featuredPlayer:Ge.featuredPlayer,featuredPlayerImageUrl:Ge.featuredPlayerImageUrl}})}),j===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:w,onChange:Te=>A(Te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:v??"",onChange:Te=>E(Te.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),g.map(Te=>jsxRuntimeExports.jsx("option",{value:Te,className:"capitalize",children:Te},Te))]})]}),v&&jsxRuntimeExports.jsx(PositionController,{elementName:v,onMove:Be,onResize:Ie}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:g,setRenderOrder:y})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${o[w].canvasHeight/o[w].canvasWidth*100}%`},children:[u,d,f].map((Te,ke)=>jsxRuntimeExports.jsx("canvas",{ref:Te,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:ke+1}},ke))})})]}),I&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"melhorDaPartida",match:I,translations:e}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-4",children:[jsxRuntimeExports.jsx(Button,{onClick:Se,disabled:S,className:"bg-red-600 hover:bg-red-700 text-white",children:S?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),P&&jsxRuntimeExports.jsxs(Button,{onClick:Re,disabled:S,variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${j===1?"justify-end":"justify-between"} mt-6`,children:[j>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>H(Te=>Te-1),variant:"outline",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),j<3&&jsxRuntimeExports.jsxs(Button,{onClick:ce,disabled:!oe(j+1),className:"bg-red-600 hover:bg-red-700 text-white",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},initialImageGeneratorConfigs$4={quadrada:{canvasWidth:1080,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:901,logoY:61,logoSize:123,placarX:312,placarY:135,placarSize:820,jogadorX:-231,jogadorY:90,jogadorSize:950,footerX:1018,footerY:700,footerSize:1.7500000000000007,tvX:3,tvY:885,tvSize:2.3},vertical:{canvasWidth:1080,canvasHeight:1920,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:865,logoY:203,logoSize:175,placarX:17,placarY:443,placarSize:875,jogadorX:520,jogadorY:407,jogadorSize:950,footerX:160,footerY:1090,footerSize:2.1500000000000004,tvX:5,tvY:1310,tvSize:2.1000000000000005},horizontal:{canvasWidth:1920,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1920,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,jogadorX:175,jogadorY:100,jogadorSize:950,footerX:30,footerY:1005,footerSize:1,tvX:30,tvY:950,tvSize:.7}},MatchDayGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{const{baseImages:i,channelLogos:o}=useImages(),[l,u]=reactExports.useState(initialImageGeneratorConfigs$4),d=reactExports.useRef(null),f=reactExports.useRef(null),m=reactExports.useRef(null),g=reactExports.useRef(null),[y,v]=reactExports.useState(["background","jogador","placar","logo","info","tv"]),[E,w]=reactExports.useState(null),[A,I]=reactExports.useState("quadrada"),[D,V]=reactExports.useState(null),Y=reactExports.useRef(null),[j,H]=reactExports.useState(1),[S,T]=reactExports.useState(!1),[P,U]=reactExports.useState(!1),[J,W]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null}),[K,le]=reactExports.useState([]),[ge,oe]=reactExports.useState(!1),ce=me=>{le(ue=>ue.some(se=>se.id===me.id)?ue.filter(se=>se.id!==me.id):[...ue,me])},ie=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Arte e Jogador",icon:Palette,description:"Selecione a arte e o jogador"},{id:3,title:"Gerar Imagem",icon:Image$1,description:"Ajuste e gere a imagem"}],[Ne,re]=reactExports.useState(!1),_e=me=>{switch(me){case 2:return Ne;case 3:return!!J.gameArt&&!!J.featuredPlayer;default:return!0}},Se=()=>{j===1&&Y.current&&!Y.current.canProceed&&!Y.current.submitManualData()||H(me=>me+1)},Re=me=>{const ue=new Date(me.fixture.date),se=convertToSaoPauloTime(ue),he={homeTeam:me.teams.home.name,awayTeam:me.teams.away.name,competition:formatCompetitionRound(me,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:me.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:me.fixture.referee||"",stadium:me.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(se),competitionRound:formatCompetitionRound(me,e)};V(me),W(Pe=>({...Pe,matchData:he}))},Be=(me,ue,se)=>{W(he=>({...he,gameArt:me,featuredPlayer:ue,featuredPlayerImageUrl:se}))},Ie=reactExports.useCallback(me=>new Promise((ue,se)=>{const he=new Image;he.crossOrigin="anonymous",he.onload=()=>ue(he),he.onerror=()=>se(new Error(`Falha ao carregar imagem: ${me}`)),he.src=me}),[]),je=reactExports.useCallback(async(me,ue,se)=>{var ze,$e,vt;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const he=me.current;if(!he)return;const Pe=he.getContext("2d");if(Pe){he.width=ue.canvasWidth,he.height=ue.canvasHeight,Pe.clearRect(0,0,he.width,he.height);for(const ve of se)if(ve==="background")try{const xe=(ze=i.find(Ue=>Ue.type===A&&Ue.section==="matchday"))==null?void 0:ze.url;if(xe){const Ue=await Ie(xe),Oe=Ue.height/Ue.width,Me=ue.backgroundSize,Ze=Me*Oe;Pe.drawImage(Ue,ue.backgroundX,ue.backgroundY,Me,Ze)}}catch(xe){console.warn(xe)}else if(ve==="logo")try{const xe=await Ie("/caminhantes-clock.png");Pe.drawImage(xe,ue.logoX,ue.logoY,ue.logoSize,ue.logoSize)}catch(xe){console.error(xe)}else if(ve==="placar"&&J.gameArt){if(g.current){T(!0);try{const xe=await domtoimage.toPng(g.current,{quality:1,bgcolor:void 0}),Ue=new Image;Ue.src=xe,await new Promise((Oe,Me)=>{Ue.onload=()=>Oe(),Ue.onerror=Ze=>Me(Ze)}),Pe.drawImage(Ue,ue.placarX,ue.placarY,ue.placarSize,ue.placarSize*(720/1280)),U(!0)}catch(xe){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",xe)}finally{T(!1)}}}else if(ve==="jogador"&&J.featuredPlayerImageUrl)try{const xe=await Ie(J.featuredPlayerImageUrl),Ue=1062/666,Oe=ue.jogadorSize,Me=Oe*Ue;Pe.drawImage(xe,ue.jogadorX,ue.jogadorY,Oe,Me)}catch(xe){console.error(xe)}else if(ve==="tv"){if(K.length>0){const xe=ue.tvSize;let Ue=ue.tvY-45;const Oe=350,Me=224,Ze=30*xe,He=Ze/Me*Oe,qe=15*xe,Xe=2*xe,et=A==="horizontal"?8:5,Kt=K.reduce((Nt,Gt)=>(Nt[Gt.type]||(Nt[Gt.type]=[]),Nt[Gt.type].push(Gt),Nt),{}),It=Object.keys(Kt).sort(),Bt=[];for(const Nt of It)Bt.push(...Kt[Nt].sort((Gt,un)=>Gt.name.localeCompare(un.name)));let Et=0,mn=0;for(let Nt=0;Nt<Bt.length;Nt++){const Gt=Bt[Nt];try{const un=await Ie(Gt.logoUrl);if(Et===0)if(A==="quadrada"){const pt=Math.min(et,Bt.length-Nt),Qe=pt*He+(pt-1)*qe,Dn=30*xe;mn=ue.canvasWidth-Dn-Qe,mn+=ue.tvX}else{const pt=75*xe;mn=ue.tvX+pt}else if(Et>=et)if(Ue+=Ze+Xe,Et=0,A==="quadrada"){const pt=Math.min(et,Bt.length-Nt),Qe=pt*He+(pt-1)*qe,Dn=30*xe;mn=ue.canvasWidth-Dn-Qe,mn+=ue.tvX}else{const pt=75*xe;mn=ue.tvX+pt}Pe.drawImage(un,mn,Ue,He,Ze),mn+=He+qe,Et++}catch(un){console.error(`Falha ao carregar logo do canal ${Gt.name}:`,un)}}Pe.shadowColor="transparent",Pe.shadowOffsetX=0,Pe.shadowOffsetY=0,Pe.shadowBlur=0}}else if(ve==="info"&&J.matchData){const xe=ue.footerX,Ue=ue.footerY,Oe=ue.footerSize;Pe.fillStyle="#FFFFFF",Pe.shadowColor="rgba(0, 0, 0, 0.75)",Pe.shadowOffsetX=2*Oe,Pe.shadowOffsetY=2*Oe,Pe.shadowBlur=2*Oe,Pe.font=`800 ${20*Oe}px "Funnel Display", sans-serif`,Pe.textAlign=A==="quadrada"?"right":"left";const Me=xe;Pe.fillText(`${($e=J.matchData.homeTeam)==null?void 0:$e.toUpperCase()} 🆚 ${(vt=J.matchData.awayTeam)==null?void 0:vt.toUpperCase()}`,Me,Ue),Pe.fillText(J.matchData.stadium.toUpperCase(),Me,Ue+25*Oe),Pe.fillText(J.matchData.date.toUpperCase(),Me,Ue+50*Oe),Pe.fillText(J.matchData.competitionRound.toUpperCase(),Me,Ue+75*Oe),Pe.fillText(J.matchData.referee!==""?`ÁRBITRO: ${J.matchData.referee.toUpperCase()}`:"",Me,Ue+100*Oe),Pe.shadowColor="transparent",Pe.shadowOffsetX=0,Pe.shadowOffsetY=0,Pe.shadowBlur=0}}},[J,i,A,Ie]),Te=reactExports.useCallback(()=>{if(j!==3||!d.current||!f.current||!m.current)return;T(!0);const me=l[A],ue=E?y.indexOf(E):-1,se=ue>-1?y.slice(0,ue):y,he=ue>-1?[y[ue]]:[],Pe=ue>-1?y.slice(ue+1):[];Promise.all([je(d,me,se),je(f,me,he),je(m,me,Pe)]).then(()=>{T(!1),U(!0)}).catch(ze=>{console.error("Erro ao desenhar camadas:",ze),T(!1)})},[j,l,A,E,y,je]);reactExports.useEffect(()=>{Te()},[Te]),reactExports.useEffect(()=>{if(j!==3||!E||!f.current)return;const me=l[A];je(f,me,[E])},[l,E,A,j,je]);const ke=()=>{const me=document.createElement("canvas"),ue=l[A];me.width=ue.canvasWidth,me.height=ue.canvasHeight;const se=me.getContext("2d");if(!se||!d.current||!f.current||!m.current)return;se.drawImage(d.current,0,0),se.drawImage(f.current,0,0),se.drawImage(m.current,0,0);const he=document.createElement("a");he.href=me.toDataURL("image/png"),he.download=`matchday-${A}.png`,he.click()},Ge=(me,ue)=>{E&&u(se=>{let he=E;E==="info"&&(he="footer");const Pe=`${he}X`,ze=`${he}Y`,$e={...se[A]};return me==="x"&&Pe in $e?$e[Pe]+=ue:me==="y"&&ze in $e&&($e[ze]+=ue),{...se,[A]:$e}})},we=me=>{E&&u(ue=>{let se=E;E==="info"&&(se="footer");const he=`${se}Size`,Pe={...ue[A]};return he in Pe&&(he==="footerSize"?Pe[he]+=me/100:Pe[he]+=me),{...ue,[A]:Pe}})},de=me=>{_e(me)&&H(me)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Gerador de Matchday"}),D&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:g,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:D})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:ie,currentStep:j,onStepClick:de,canAdvanceToStep:_e}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[j===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:Y,onMatchSelected:Re,escalacaoData:{...J,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:re,translations:e}),j===2&&jsxRuntimeExports.jsx(GameArtSelector,{onArtSelect:Be,escalacaoData:{...J,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},setEscalacaoData:me=>W(ue=>{let se;if(typeof me=="function"){const he={...ue,formation:null,selectedPlayers:{},reservePlayers:[],coach:""};se=me(he)}else se=me;return{...ue,gameArt:se.gameArt,featuredPlayer:se.featuredPlayer,featuredPlayerImageUrl:se.featuredPlayerImageUrl}}),showChannelLogoSelection:ge,selectedChannelLogos:K,setShowChannelLogoSelection:oe,onToggleChannelLogo:ce,allChannelLogos:o}),j===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:A,onChange:me=>I(me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:E??"",onChange:me=>w(me.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),y.map(me=>jsxRuntimeExports.jsx("option",{value:me,className:"capitalize",children:me},me))]})]}),E&&jsxRuntimeExports.jsx(PositionController,{elementName:E,onMove:Ge,onResize:we}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:y,setRenderOrder:v})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${l[A].canvasHeight/l[A].canvasWidth*100}%`},children:[d,f,m].map((me,ue)=>jsxRuntimeExports.jsx("canvas",{ref:me,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:ue+1}},ue))})})]}),D&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"matchday",match:D,translations:e}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-4",children:[jsxRuntimeExports.jsx(Button,{onClick:Te,disabled:S,className:"bg-red-600 hover:bg-red-700 text-white",children:S?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),P&&jsxRuntimeExports.jsxs(Button,{onClick:ke,disabled:S,variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${j===1?"justify-end":"justify-between"} mt-6`,children:[j>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>H(me=>me-1),variant:"outline",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),j<3&&jsxRuntimeExports.jsxs(Button,{onClick:Se,disabled:!_e(j+1),className:"bg-red-600 hover:bg-red-700 text-white",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},initialImageGeneratorConfigs$3={quadrada:{canvasWidth:1080,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:901,logoY:61,logoSize:123,placarX:-43,placarY:135,placarSize:820,jogadorX:444,jogadorY:90,jogadorSize:950,footerX:63,footerY:745,footerSize:1.7500000000000007,tvX:63,tvY:890,tvSize:2.3},vertical:{canvasWidth:1080,canvasHeight:1920,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:865,logoY:203,logoSize:175,placarX:-3,placarY:443,placarSize:875,jogadorX:520,jogadorY:407,jogadorSize:950,footerX:160,footerY:1090,footerSize:2.1500000000000004,tvX:160,tvY:1260,tvSize:2.1000000000000005},horizontal:{canvasWidth:1920,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1920,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,jogadorX:175,jogadorY:100,jogadorSize:950,footerX:30,footerY:1005,footerSize:1,tvX:30,tvY:950,tvSize:.7}},NextGameGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{const{currentUserData:i}=useUser(),{baseImages:o,channelLogos:l}=useImages(),[u,d]=reactExports.useState(initialImageGeneratorConfigs$3),f=reactExports.useRef(null),m=reactExports.useRef(null),g=reactExports.useRef(null),y=reactExports.useRef(null),[v,E]=reactExports.useState(["background","jogador","placar","logo","info","tv"]),[w,A]=reactExports.useState(null),[I,D]=reactExports.useState("quadrada"),[V,Y]=reactExports.useState(null),j=reactExports.useRef(null),[H,S]=reactExports.useState(1),[T,P]=reactExports.useState(!1),[U,J]=reactExports.useState(!1),[W,K]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null}),[le,ge]=reactExports.useState([]),[oe,ce]=reactExports.useState(!1),ie=se=>{ge(he=>he.some(Pe=>Pe.id===se.id)?he.filter(Pe=>Pe.id!==se.id):[...he,se])},Ne=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Arte e Jogador",icon:Palette,description:"Selecione a arte e o jogador"},{id:3,title:"Gerar Imagem",icon:Image$1,description:"Ajuste e gere a imagem"}],[re,_e]=reactExports.useState(!1),Se=se=>{switch(se){case 2:return re;case 3:return!!W.gameArt&&!!W.featuredPlayer;default:return!0}},Re=()=>{H===1&&j.current&&!j.current.canProceed&&!j.current.submitManualData()||S(se=>se+1)},Be=se=>{const he=new Date(se.fixture.date),Pe=convertToSaoPauloTime(he),ze={homeTeam:se.teams.home.name,awayTeam:se.teams.away.name,competition:formatCompetitionRound(se,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:se.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:se.fixture.referee||"",stadium:se.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(Pe),competitionRound:formatCompetitionRound(se,e)};Y(se),K($e=>({...$e,matchData:ze}))},Ie=(se,he,Pe)=>{K(ze=>({...ze,gameArt:se,featuredPlayer:he,featuredPlayerImageUrl:Pe}))},je=reactExports.useCallback(se=>new Promise((he,Pe)=>{const ze=new Image;ze.crossOrigin="anonymous",ze.onload=()=>he(ze),ze.onerror=()=>Pe(new Error(`Falha ao carregar imagem: ${se}`)),ze.src=se}),[]),Te=reactExports.useCallback(async(se,he,Pe)=>{var vt,ve,xe;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const ze=se.current;if(!ze)return;const $e=ze.getContext("2d");if($e){ze.width=he.canvasWidth,ze.height=he.canvasHeight,$e.clearRect(0,0,ze.width,ze.height);for(const Ue of Pe)if(Ue==="background")try{const Oe=(vt=o.find(Me=>Me.type===I&&Me.section==="proximo_jogo"))==null?void 0:vt.url;if(Oe){const Me=await je(Oe),Ze=Me.height/Me.width,He=he.backgroundSize,qe=He*Ze;$e.drawImage(Me,he.backgroundX,he.backgroundY,He,qe)}}catch(Oe){console.warn(Oe)}else if(Ue==="logo")try{const Oe=await je("/caminhantes-clock.png");$e.drawImage(Oe,he.logoX,he.logoY,he.logoSize,he.logoSize)}catch(Oe){console.error(Oe)}else if(Ue==="placar"&&W.gameArt){if(y.current){P(!0);try{const Oe=await domtoimage.toPng(y.current,{quality:1,bgcolor:void 0}),Me=new Image;Me.src=Oe,await new Promise((Ze,He)=>{Me.onload=()=>Ze(),Me.onerror=qe=>He(qe)}),$e.drawImage(Me,he.placarX,he.placarY,he.placarSize,he.placarSize*(720/1280)),J(!0)}catch(Oe){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",Oe)}finally{P(!1)}}}else if(Ue==="jogador"&&W.featuredPlayerImageUrl)try{const Oe=await je(W.featuredPlayerImageUrl),Me=1062/666,Ze=he.jogadorSize,He=Ze*Me;$e.drawImage(Oe,he.jogadorX,he.jogadorY,Ze,He)}catch(Oe){console.error(Oe)}else if(Ue==="tv"){if(le.length>0){const Oe=he.tvSize;let Me=he.tvX,Ze=he.tvY;const He=350,qe=224,Xe=30*Oe,et=Xe/qe*He,Kt=15*Oe,It=2*Oe,Bt=I==="horizontal"?8:5;$e.fillStyle="#FFFFFF",$e.shadowColor="rgba(0, 0, 0, 0.75)",$e.shadowOffsetX=2*Oe,$e.shadowOffsetY=2*Oe,$e.shadowBlur=2*Oe,Ze+=It;const Et=le.reduce((un,pt)=>(un[pt.type]||(un[pt.type]=[]),un[pt.type].push(pt),un),{}),mn=Object.keys(Et).sort(),Nt=[];for(const un of mn)Nt.push(...Et[un].sort((pt,Qe)=>pt.name.localeCompare(Qe.name)));let Gt=0;for(const un of Nt)try{const pt=await je(un.logoUrl);Gt>=Bt&&(Me=he.tvX,Ze+=Xe+It,Gt=0),$e.drawImage(pt,Me,Ze,et,Xe),Me+=et+Kt,Gt++}catch(pt){console.error(`Falha ao carregar logo do canal ${un.name}:`,pt)}$e.shadowColor="transparent",$e.shadowOffsetX=0,$e.shadowOffsetY=0,$e.shadowBlur=0}}else if(Ue==="info"&&W.matchData){const Oe=he.footerSize;$e.fillStyle="#FFFFFF",$e.shadowColor="rgba(0, 0, 0, 0.75)",$e.shadowOffsetX=2*Oe,$e.shadowOffsetY=2*Oe,$e.shadowBlur=2*Oe,$e.font=`800 ${20*he.footerSize}px "Funnel Display", sans-serif`,$e.textAlign="left",$e.fillText(`${(ve=W.matchData.homeTeam)==null?void 0:ve.toUpperCase()} 🆚 ${(xe=W.matchData.awayTeam)==null?void 0:xe.toUpperCase()}`,he.footerX,he.footerY),$e.fillText(W.matchData.stadium.toUpperCase(),he.footerX,he.footerY+25*he.footerSize),$e.fillText(W.matchData.date.toUpperCase(),he.footerX,he.footerY+50*he.footerSize),$e.fillText(W.matchData.competitionRound.toUpperCase(),he.footerX,he.footerY+75*he.footerSize),$e.fillText(W.matchData.referee!==""?`ÁRBITRO: ${W.matchData.referee.toUpperCase()}`:"",he.footerX,he.footerY+100*he.footerSize)}}},[W,o,I,je,oe,le]),ke=reactExports.useCallback(()=>{if(H!==3||!f.current||!m.current||!g.current)return;P(!0);const se=u[I],he=w?v.indexOf(w):-1,Pe=he>-1?v.slice(0,he):v,ze=he>-1?[v[he]]:[],$e=he>-1?v.slice(he+1):[];Promise.all([Te(f,se,Pe),Te(m,se,ze),Te(g,se,$e)]).then(()=>{P(!1),J(!0)}).catch(vt=>{console.error("Erro ao desenhar camadas:",vt),P(!1)})},[H,u,I,w,v,Te]);reactExports.useEffect(()=>{ke()},[ke]),reactExports.useEffect(()=>{if(H!==3||!w||!m.current)return;const se=u[I];Te(m,se,[w])},[u,w,I,H,Te]);const Ge=()=>{const se=document.createElement("canvas"),he=u[I];se.width=he.canvasWidth,se.height=he.canvasHeight;const Pe=se.getContext("2d");if(!Pe||!f.current||!m.current||!g.current)return;Pe.drawImage(f.current,0,0),Pe.drawImage(m.current,0,0),Pe.drawImage(g.current,0,0);const ze=document.createElement("a");ze.href=se.toDataURL("image/png"),ze.download=`proximo-jogo-${I}.png`,ze.click()},we=(se,he)=>{w&&d(Pe=>{let ze=w;w==="info"&&(ze="footer");const $e=`${ze}X`,vt=`${ze}Y`,ve={...Pe[I]};return se==="x"&&$e in ve?ve[$e]+=he:se==="y"&&vt in ve&&(ve[vt]+=he),{...Pe,[I]:ve}})},de=se=>{w&&d(he=>{let Pe=w;w==="info"&&(Pe="footer");const ze=`${Pe}Size`,$e={...he[I]};return ze in $e&&(ze==="footerSize"?$e[ze]+=se/100:$e[ze]+=se),{...he,[I]:$e}})},me=se=>{Se(se)&&S(se)},ue=async()=>{if(y.current)try{const se=await domtoimage.toPng(y.current,{quality:1,bgcolor:void 0}),he=document.createElement("a");he.download="placar.png",he.href=se,he.click()}catch(se){console.error("Erro ao gerar PNG do SplitRectangleDisplay:",se)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Gerador de Próximo Jogo"}),V&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:y,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:V,awayPenScore:null,awayScore:null,homePenScore:null,homeScore:null})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:Ne,currentStep:H,onStepClick:me,canAdvanceToStep:Se}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[H===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:j,onMatchSelected:Be,escalacaoData:{...W,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:_e,translations:e}),H===2&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(GameArtSelector,{onArtSelect:Ie,escalacaoData:{...W,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},setEscalacaoData:se=>K(he=>{let Pe;if(typeof se=="function"){const ze={...he,formation:null,selectedPlayers:{},reservePlayers:[],coach:""};Pe=se(ze)}else Pe=se;return{...he,gameArt:Pe.gameArt,featuredPlayer:Pe.featuredPlayer,featuredPlayerImageUrl:Pe.featuredPlayerImageUrl}}),showChannelLogoSelection:oe,selectedChannelLogos:le,setShowChannelLogoSelection:ce,onToggleChannelLogo:ie,allChannelLogos:l})}),H===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:I,onChange:se=>D(se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:w??"",onChange:se=>A(se.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),v.map(se=>jsxRuntimeExports.jsx("option",{value:se,className:"capitalize",children:se},se))]})]}),w&&jsxRuntimeExports.jsx(PositionController,{elementName:w,onMove:we,onResize:de}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:v,setRenderOrder:E})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${u[I].canvasHeight/u[I].canvasWidth*100}%`},children:[f,m,g].map((se,he)=>jsxRuntimeExports.jsx("canvas",{ref:se,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:he+1}},he))})})]}),V&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"proximoJogo",match:V,translations:e}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center space-x-4 gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:ke,disabled:T,className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer",children:T?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),U&&jsxRuntimeExports.jsxs(Button,{onClick:Ge,disabled:T,variant:"outline",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]}),i&&i.role==="root"&&jsxRuntimeExports.jsxs(Button,{onClick:ue,variant:"default",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),"Baixar Arte 'Placar' (PNG)"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${H===1?"justify-end":"justify-between"} mt-6`,children:[H>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>S(se=>se-1),variant:"outline",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),H<3&&jsxRuntimeExports.jsxs(Button,{onClick:Re,disabled:!Se(H+1),className:"bg-red-600 hover:bg-red-700 text-white",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},initialImageGeneratorConfigs$2={quadrada:{canvasWidth:1080,canvasHeight:1080,logoX:931,logoY:61,logoSize:123,placarX:80,placarY:565,placarSize:930,stadiumTextX:1080/2,stadiumTextY:40,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1080,userBackgroundImgHeight:1080},vertical:{canvasWidth:1080,canvasHeight:1920,logoX:865,logoY:203,logoSize:175,placarX:115,placarY:923,placarSize:875,stadiumTextX:1080/2,stadiumTextY:185,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1080,userBackgroundImgHeight:1920},horizontal:{canvasWidth:1920,canvasHeight:1080,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,stadiumTextX:1920/2,stadiumTextY:40,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1920,userBackgroundImgHeight:1080}},FullTimeGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{var Ge,we,de,me;const{currentUserData:i}=useUser(),{baseImages:o}=useImages(),[l,u]=reactExports.useState(initialImageGeneratorConfigs$2),d=reactExports.useRef(null),f=reactExports.useRef(null),m=reactExports.useRef(null),g=reactExports.useRef(null),[y,v]=reactExports.useState(["background","acabamento","placar","logo","info"]),[E,w]=reactExports.useState(null),[A,I]=reactExports.useState("quadrada"),[D,V]=reactExports.useState(null),Y=reactExports.useRef(null),j={primary:"#ffffff"},[H,S]=reactExports.useState(1),[T,P]=reactExports.useState(!1),[U,J]=reactExports.useState(!1),[W,K]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null,userBackgroundImg:null,userBackgroundImgAspectRatio:null}),le=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Fundo",icon:Upload,description:"Upload da imagem de fundo"},{id:3,title:"Gerar Imagem",icon:Image$1,description:"Ajuste e gere a imagem"}],[ge,oe]=reactExports.useState(!1),ce=ue=>{switch(ue){case 2:return ge;case 3:return!!W.userBackgroundImg;default:return!0}},ie=()=>{H===1&&Y.current&&!Y.current.canProceed&&!Y.current.submitManualData()||S(ue=>ue+1)},Ne=ue=>{const se=new Date(ue.fixture.date),he=convertToSaoPauloTime(se),Pe={homeTeam:"Liverpool",awayTeam:"Adversário",competition:formatCompetitionRound(ue,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:ue.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:ue.fixture.referee||"",stadium:ue.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(he),competitionRound:formatCompetitionRound(ue,e)};V(ue),K(ze=>({...ze,matchData:Pe}))},re=ue=>{var Pe;const se=(Pe=ue.target.files)==null?void 0:Pe[0];if(!se)return;const he=new FileReader;he.onloadend=()=>{const ze=new Image;ze.onload=()=>{K($e=>({...$e,userBackgroundImg:he.result,userBackgroundImgAspectRatio:ze.width/ze.height}))},ze.src=he.result},he.readAsDataURL(se)};reactExports.useEffect(()=>{if(!W.userBackgroundImg||!W.userBackgroundImgAspectRatio)return;const ue=W.userBackgroundImgAspectRatio,se=l[A];let he;A==="vertical"?he=1550:he=se.canvasHeight;const Pe=he*ue,ze=(se.canvasWidth-Pe)/2,$e=(se.canvasHeight-he)/2;u(vt=>({...vt,[A]:{...vt[A],userBackgroundImgWidth:Pe,userBackgroundImgHeight:he,userBackgroundImgX:ze,userBackgroundImgY:$e}}))},[W.userBackgroundImg,W.userBackgroundImgAspectRatio,A]);const _e=reactExports.useCallback(ue=>new Promise((se,he)=>{const Pe=new Image;Pe.crossOrigin="anonymous",Pe.onload=()=>se(Pe),Pe.onerror=()=>he(new Error(`Falha ao carregar imagem: ${ue}`)),Pe.src=ue}),[]),Se=reactExports.useCallback(async(ue,se,he)=>{var $e;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const Pe=ue.current;if(!Pe)return;const ze=Pe.getContext("2d");if(ze){Pe.width=se.canvasWidth,Pe.height=se.canvasHeight,ze.clearRect(0,0,Pe.width,Pe.height);for(const vt of he)if(vt==="background"&&W.userBackgroundImg)try{const ve=await _e(W.userBackgroundImg);ze.drawImage(ve,se.userBackgroundImgX,se.userBackgroundImgY,se.userBackgroundImgWidth,se.userBackgroundImgHeight)}catch(ve){console.error(ve)}else if(vt==="acabamento")try{const ve=($e=o.find(xe=>xe.type===A&&xe.section==="fim_de_jogo"))==null?void 0:$e.url;if(ve){const xe=await _e(ve);ze.drawImage(xe,0,0,Pe.width,Pe.height)}}catch(ve){console.warn(ve)}else if(vt==="placar"){if(g.current){P(!0);try{const ve=await domtoimage.toPng(g.current,{quality:1,bgcolor:void 0}),xe=new Image;xe.src=ve,await new Promise((Ue,Oe)=>{xe.onload=()=>Ue(),xe.onerror=Me=>Oe(Me)}),ze.drawImage(xe,se.placarX,se.placarY,se.placarSize,se.placarSize*(720/1280)),J(!0)}catch(ve){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",ve)}finally{P(!1)}}}else if(vt==="logo")try{const ve=await _e("/caminhantes-clock.png");ze.drawImage(ve,se.logoX,se.logoY,se.logoSize,se.logoSize)}catch(ve){console.error(ve)}else if(vt==="info"&&W.matchData){ze.fillStyle=j.primary,ze.font='800 24px "Funnel Display", Arial, sans-serif',ze.textAlign="center";const ve=`${W.matchData.stadium.toUpperCase()} - ${W.matchData.competitionRound.toUpperCase()}`;ze.fillText(ve,se.stadiumTextX,se.stadiumTextY)}}},[W,o,j.primary,A,_e]),Re=reactExports.useCallback(()=>{if(H!==3||!d.current||!f.current||!m.current)return;P(!0);const ue=l[A],se=E?y.indexOf(E):-1,he=se>-1?y.slice(0,se):y,Pe=se>-1?[y[se]]:[],ze=se>-1?y.slice(se+1):[];Promise.all([Se(d,ue,he),Se(f,ue,Pe),Se(m,ue,ze)]).then(()=>{P(!1),J(!0)}).catch($e=>{console.error("Erro ao desenhar camadas:",$e),P(!1)})},[H,l,A,E,y,Se]);reactExports.useEffect(()=>{Re()},[Re]),reactExports.useEffect(()=>{if(H!==3||!E||!(f!=null&&f.current))return;const ue=l[A];Se(f,ue,[E])},[l,E,A,H,Se]);const Be=()=>{const ue=document.createElement("canvas"),se=l[A];ue.width=se.canvasWidth,ue.height=se.canvasHeight;const he=ue.getContext("2d");if(!he||!d.current||!f.current||!m.current)return;he.drawImage(d.current,0,0),he.drawImage(f.current,0,0),he.drawImage(m.current,0,0);const Pe=document.createElement("a");Pe.href=ue.toDataURL("image/png"),Pe.download=`${A}_placar_final.png`,Pe.click()},Ie=(ue,se)=>{E&&u(he=>{const Pe=E==="background"?"userBackgroundImgX":`${E}X`,ze=E==="background"?"userBackgroundImgY":`${E}Y`,$e={...he[A]};return ue==="x"&&Pe in $e?$e[Pe]+=se:ue==="y"&&ze in $e&&($e[ze]+=se),{...he,[A]:$e}})},je=ue=>{E&&u(se=>{const he=`${E}Size`,Pe=E==="background"?"userBackgroundImgWidth":`${E}Width`,ze=E==="background"?"userBackgroundImgHeight":`${E}Height`,$e={...se[A]};if(he in $e&&typeof $e[he]=="number")$e[he]+=ue;else if(Pe in $e&&typeof $e[Pe]=="number"){const vt=$e[ze]/$e[Pe]||1;$e[Pe]+=ue,$e[ze]=$e[Pe]*vt}return{...se,[A]:$e}})},Te=ue=>{ce(ue)&&S(ue)},ke=async()=>{if(g.current)try{const ue=await domtoimage.toPng(g.current,{quality:1,bgcolor:void 0}),se=document.createElement("a");se.download="placar.png",se.href=ue,se.click()}catch(ue){console.error("Erro ao gerar PNG do SplitRectangleDisplay:",ue)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Gerador de Fim de Jogo"}),D&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:g,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:D,awayPenScore:((we=(Ge=D.score)==null?void 0:Ge.penalty)==null?void 0:we.away)??null,awayScore:D.goals.away,homePenScore:((me=(de=D.score)==null?void 0:de.penalty)==null?void 0:me.home)??null,homeScore:D.goals.home})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:le,currentStep:H,onStepClick:Te,canAdvanceToStep:ce}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[H===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:Y,onMatchSelected:Ne,escalacaoData:{...W,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:oe,translations:e,pastMatches:!0}),H===2&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg p-6",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"background-image-upload",className:"cursor-pointer text-center",children:[jsxRuntimeExports.jsx(Upload,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Clique para selecionar a imagem de fundo"}),jsxRuntimeExports.jsx("input",{id:"background-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:re})]}),W.userBackgroundImg&&jsxRuntimeExports.jsx("img",{src:W.userBackgroundImg,alt:"Preview",className:"mt-4 max-h-48 w-auto rounded-lg"})]}),H===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:A,onChange:ue=>I(ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:E??"",onChange:ue=>w(ue.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),y.map(ue=>jsxRuntimeExports.jsx("option",{value:ue,className:"capitalize",children:ue},ue))]})]}),E&&jsxRuntimeExports.jsx(PositionController,{elementName:E,onMove:Ie,onResize:je}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:y,setRenderOrder:v})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${l[A].canvasHeight/l[A].canvasWidth*100}%`},children:[d,f,m].map((ue,se)=>jsxRuntimeExports.jsx("canvas",{ref:ue,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:se+1}},se))})})]}),D&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"fimDeJogo",match:D,translations:e}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center space-x-4 gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:Re,disabled:T,className:"bg-red-600 hover:bg-red-700 text-white",children:T?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),U&&jsxRuntimeExports.jsxs(Button,{onClick:Be,disabled:T,variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]}),i&&i.role==="root"&&jsxRuntimeExports.jsxs(Button,{onClick:ke,variant:"default",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),"Baixar Arte 'Placar' (PNG)"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${H===1?"justify-end":"justify-between"} mt-6`,children:[H>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>S(ue=>ue-1),variant:"outline",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),H<3&&jsxRuntimeExports.jsxs(Button,{onClick:ie,disabled:!ce(H+1),className:"bg-red-600 hover:bg-red-700 text-white",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function round(t){return t+.5|0}const lim=(t,e,n)=>Math.max(Math.min(t,n),e);function p2b(t){return lim(round(t*2.55),0,255)}function n2b(t){return lim(round(t*255),0,255)}function b2n(t){return lim(round(t/2.55)/100,0,1)}function n2p(t){return lim(round(t*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=[..."0123456789ABCDEF"],h1=t=>hex[t&15],h2=t=>hex[(t&240)>>4]+hex[t&15],eq=t=>(t&240)>>4===(t&15),isShort=t=>eq(t.r)&&eq(t.g)&&eq(t.b)&&eq(t.a);function hexParse(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&map$1[t[1]]*17,g:255&map$1[t[2]]*17,b:255&map$1[t[3]]*17,a:e===5?map$1[t[4]]*17:255}:(e===7||e===9)&&(n={r:map$1[t[1]]<<4|map$1[t[2]],g:map$1[t[3]]<<4|map$1[t[4]],b:map$1[t[5]]<<4|map$1[t[6]],a:e===9?map$1[t[7]]<<4|map$1[t[8]]:255})),n}const alpha=(t,e)=>t<255?e(t):"";function hexString(t){var e=isShort(t)?h1:h2;return t?"#"+e(t.r)+e(t.g)+e(t.b)+alpha(t.a,e):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(t,e,n){const s=e*Math.min(n,1-n),i=(o,l=(o+t/30)%12)=>n-s*Math.max(Math.min(l-3,9-l,1),-1);return[i(0),i(8),i(4)]}function hsv2rgbn(t,e,n){const s=(i,o=(i+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function hwb2rgbn(t,e,n){const s=hsl2rgbn(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)s[i]*=1-e-n,s[i]+=e;return s}function hueValue(t,e,n,s,i){return t===i?(e-n)/s+(e<n?6:0):e===i?(n-t)/s+2:(t-e)/s+4}function rgb2hsl(t){const n=t.r/255,s=t.g/255,i=t.b/255,o=Math.max(n,s,i),l=Math.min(n,s,i),u=(o+l)/2;let d,f,m;return o!==l&&(m=o-l,f=u>.5?m/(2-o-l):m/(o+l),d=hueValue(n,s,i,m,o),d=d*60+.5),[d|0,f||0,u]}function calln(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(n2b)}function hsl2rgb(t,e,n){return calln(hsl2rgbn,t,e,n)}function hwb2rgb(t,e,n){return calln(hwb2rgbn,t,e,n)}function hsv2rgb(t,e,n){return calln(hsv2rgbn,t,e,n)}function hue(t){return(t%360+360)%360}function hueParse(t){const e=HUE_RE.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?p2b(+e[5]):n2b(+e[5]));const i=hue(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?s=hwb2rgb(i,o,l):e[1]==="hsv"?s=hsv2rgb(i,o,l):s=hsl2rgb(i,o,l),{r:s[0],g:s[1],b:s[2],a:n}}function rotate(t,e){var n=rgb2hsl(t);n[0]=hue(n[0]+e),n=hsl2rgb(n),t.r=n[0],t.g=n[1],t.b=n[2]}function hslString(t){if(!t)return;const e=rgb2hsl(t),n=e[0],s=n2p(e[1]),i=n2p(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${i}%, ${b2n(t.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const map$2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const t={},e=Object.keys(names$1),n=Object.keys(map$2);let s,i,o,l,u;for(s=0;s<e.length;s++){for(l=u=e[s],i=0;i<n.length;i++)o=n[i],u=u.replace(o,map$2[o]);o=parseInt(names$1[l],16),t[u]=[o>>16&255,o>>8&255,o&255]}return t}let names;function nameParse(t){names||(names=unpack(),names.transparent=[0,0,0,0]);const e=names[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(t){const e=RGB_RE.exec(t);let n=255,s,i,o;if(e){if(e[7]!==s){const l=+e[7];n=e[8]?p2b(l):lim(l*255,0,255)}return s=+e[1],i=+e[3],o=+e[5],s=255&(e[2]?p2b(s):lim(s,0,255)),i=255&(e[4]?p2b(i):lim(i,0,255)),o=255&(e[6]?p2b(o):lim(o,0,255)),{r:s,g:i,b:o,a:n}}}function rgbString(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${b2n(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const to=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,from=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function interpolate$1(t,e,n){const s=from(b2n(t.r)),i=from(b2n(t.g)),o=from(b2n(t.b));return{r:n2b(to(s+n*(from(b2n(e.r))-s))),g:n2b(to(i+n*(from(b2n(e.g))-i))),b:n2b(to(o+n*(from(b2n(e.b))-o))),a:t.a+n*(e.a-t.a)}}function modHSL(t,e,n){if(t){let s=rgb2hsl(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=hsl2rgb(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function clone$1(t,e){return t&&Object.assign(e||{},t)}function fromObject(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=n2b(t[3]))):(e=clone$1(t,{r:0,g:0,b:0,a:1}),e.a=n2b(e.a)),e}function functionParse(t){return t.charAt(0)==="r"?rgbParse(t):hueParse(t)}class Color{constructor(e){if(e instanceof Color)return e;const n=typeof e;let s;n==="object"?s=fromObject(e):n==="string"&&(s=hexParse(e)||nameParse(e)||functionParse(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=clone$1(this._rgb);return e&&(e.a=b2n(e.a)),e}set rgb(e){this._rgb=fromObject(e)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,i=e.rgb;let o;const l=n===o?.5:n,u=2*l-1,d=s.a-i.a,f=((u*d===-1?u:(u+d)/(1+u*d))+1)/2;o=1-f,s.r=255&f*s.r+o*i.r+.5,s.g=255&f*s.g+o*i.g+.5,s.b=255&f*s.b+o*i.b+.5,s.a=l*s.a+(1-l)*i.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=interpolate$1(this._rgb,e._rgb,n)),this}clone(){return new Color(this.rgb)}alpha(e){return this._rgb.a=n2b(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=round(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return modHSL(this._rgb,2,e),this}darken(e){return modHSL(this._rgb,2,-e),this}saturate(e){return modHSL(this._rgb,1,e),this}desaturate(e){return modHSL(this._rgb,1,-e),this}rotate(e){return rotate(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function noop(){}const uid=(()=>{let t=0;return()=>t++})();function isNullOrUndef(t){return t==null}function isArray(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function isObject(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function isNumberFinite(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function finiteOrDefault(t,e){return isNumberFinite(t)?t:e}function valueOrDefault(t,e){return typeof t>"u"?e:t}const toPercentage=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,toDimension=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function callback(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function each(t,e,n,s){let i,o,l;if(isArray(t))for(o=t.length,i=0;i<o;i++)e.call(n,t[i],i);else if(isObject(t))for(l=Object.keys(t),o=l.length,i=0;i<o;i++)e.call(n,t[l[i]],l[i])}function _elementsEqual(t,e){let n,s,i,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(i=t[n],o=e[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function clone(t){if(isArray(t))return t.map(clone);if(isObject(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let i=0;for(;i<s;++i)e[n[i]]=clone(t[n[i]]);return e}return t}function isValidKey(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function _merger(t,e,n,s){if(!isValidKey(t))return;const i=e[t],o=n[t];isObject(i)&&isObject(o)?merge(i,o,s):e[t]=clone(o)}function merge(t,e,n){const s=isArray(e)?e:[e],i=s.length;if(!isObject(t))return t;n=n||{};const o=n.merger||_merger;let l;for(let u=0;u<i;++u){if(l=s[u],!isObject(l))continue;const d=Object.keys(l);for(let f=0,m=d.length;f<m;++f)o(d[f],t,l,n)}return t}function mergeIf(t,e){return merge(t,e,{merger:_mergerIf})}function _mergerIf(t,e,n){if(!isValidKey(t))return;const s=e[t],i=n[t];isObject(s)&&isObject(i)?mergeIf(s,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=clone(i))}const keyResolvers={"":t=>t,x:t=>t.x,y:t=>t.y};function _splitKey(t){const e=t.split("."),n=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function _getKeyResolver(t){const e=_splitKey(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function resolveObjectKey(t,e){return(keyResolvers[e]||(keyResolvers[e]=_getKeyResolver(e)))(t)}function _capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}const defined=t=>typeof t<"u",isFunction=t=>typeof t=="function",setsEqual=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function _isClickEvent(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign=Math.sign;function almostEquals(t,e,n){return Math.abs(t-e)<n}function niceNum(t){const e=Math.round(t);t=almostEquals(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(log10(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function _factorize(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((i,o)=>i-o).pop(),e}function isNonPrimitive(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function isNumber(t){return!isNonPrimitive(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function almostWhole(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function _setMinAndMaxByKey(t,e,n){let s,i,o;for(s=0,i=t.length;s<i;s++)o=t[s][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function toRadians(t){return t*(PI/180)}function toDegrees(t){return t*(180/PI)}function _decimalPlaces(t){if(!isNumberFinite(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function getAngleFromPoint(t,e){const n=e.x-t.x,s=e.y-t.y,i=Math.sqrt(n*n+s*s);let o=Math.atan2(s,n);return o<-.5*PI&&(o+=TAU),{angle:o,distance:i}}function distanceBetweenPoints(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _angleDiff(t,e){return(t-e+PITAU)%TAU-PI}function _normalizeAngle(t){return(t%TAU+TAU)%TAU}function _angleBetween(t,e,n,s){const i=_normalizeAngle(t),o=_normalizeAngle(e),l=_normalizeAngle(n),u=_normalizeAngle(o-i),d=_normalizeAngle(l-i),f=_normalizeAngle(i-o),m=_normalizeAngle(i-l);return i===o||i===l||s&&o===l||u>d&&f<m}function _limitValue(t,e,n){return Math.max(e,Math.min(n,t))}function _int16Range(t){return _limitValue(t,-32768,32767)}function _isBetween(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function _lookup(t,e,n){n=n||(l=>t[l]<e);let s=t.length-1,i=0,o;for(;s-i>1;)o=i+s>>1,n(o)?i=o:s=o;return{lo:i,hi:s}}const _lookupByKey=(t,e,n,s)=>_lookup(t,n,s?i=>{const o=t[i][e];return o<n||o===n&&t[i+1][e]===n}:i=>t[i][e]<n),_rlookupByKey=(t,e,n)=>_lookup(t,n,s=>t[s][e]>=n);function _filterBetween(t,e,n){let s=0,i=t.length;for(;s<i&&t[s]<e;)s++;for(;i>s&&t[i-1]>n;)i--;return s>0||i<t.length?t.slice(s,i):t}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),arrayEvents.forEach(n=>{const s="_onData"+_capitalize(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...o){const l=i.apply(this,o);return t._chartjs.listeners.forEach(u=>{typeof u[s]=="function"&&u[s](...o)}),l}})})}function unlistenArrayEvents(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(arrayEvents.forEach(o=>{delete t[o]}),delete t._chartjs)}function _arrayUnique(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const requestAnimFrame=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function throttled(t,e){let n=[],s=!1;return function(...i){n=i,s||(s=!0,requestAnimFrame.call(window,()=>{s=!1,t.apply(e,n)}))}}function debounce(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const _toLeftRightCenter=t=>t==="start"?"left":t==="end"?"right":"center",_alignStartEnd=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,_textX=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function _getStartAndCountOfVisiblePoints(t,e,n){const s=e.length;let i=0,o=s;if(t._sorted){const{iScale:l,vScale:u,_parsed:d}=t,f=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,m=l.axis,{min:g,max:y,minDefined:v,maxDefined:E}=l.getUserBounds();if(v){if(i=Math.min(_lookupByKey(d,m,g).lo,n?s:_lookupByKey(e,m,l.getPixelForValue(g)).lo),f){const w=d.slice(0,i+1).reverse().findIndex(A=>!isNullOrUndef(A[u.axis]));i-=Math.max(0,w)}i=_limitValue(i,0,s-1)}if(E){let w=Math.max(_lookupByKey(d,l.axis,y,!0).hi+1,n?0:_lookupByKey(e,m,l.getPixelForValue(y),!0).hi+1);if(f){const A=d.slice(w-1).findIndex(I=>!isNullOrUndef(I[u.axis]));w+=Math.max(0,A)}o=_limitValue(w,i,s)-i}else o=s-i}return{start:i,count:o}}function _scaleRangesChanged(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=i,!0;const o=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),o}const atEdge=t=>t===0||t===1,elasticIn=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*TAU/n)),elasticOut=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*TAU/n)+1,effects={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*HALF_PI)+1,easeOutSine:t=>Math.sin(t*HALF_PI),easeInOutSine:t=>-.5*(Math.cos(PI*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>atEdge(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>atEdge(t)?t:elasticIn(t,.075,.3),easeOutElastic:t=>atEdge(t)?t:elasticOut(t,.075,.3),easeInOutElastic(t){return atEdge(t)?t:t<.5?.5*elasticIn(t*2,.1125,.45):.5+.5*elasticOut(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-effects.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?effects.easeInBounce(t*2)*.5:effects.easeOutBounce(t*2-1)*.5+.5};function isPatternOrGradient(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function color(t){return isPatternOrGradient(t)?t:new Color(t)}function getHoverColor(t){return isPatternOrGradient(t)?t:new Color(t).saturate(.5).darken(.1).hexString()}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];function applyAnimationsDefaults(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function applyLayoutsDefaults(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const intlCache=new Map;function getNumberFormat(t,e){e=e||{};const n=t+JSON.stringify(e);let s=intlCache.get(n);return s||(s=new Intl.NumberFormat(t,e),intlCache.set(n,s)),s}function formatNumber(t,e,n){return getNumberFormat(e,n).format(t)}const formatters={values(t){return isArray(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let i,o=t;if(n.length>1){const f=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(f<1e-4||f>1e15)&&(i="scientific"),o=calculateDelta(t,n)}const l=log10(Math.abs(o)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:i,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(d,this.options.ticks.format),formatNumber(t,s,d)},logarithmic(t,e,n){if(t===0)return"0";const s=n[e].significand||t/Math.pow(10,Math.floor(log10(t)));return[1,2,3,5,10,15].includes(s)||e>.8*n.length?formatters.numeric.call(this,t,e,n):""}};function calculateDelta(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Ticks={formatters};function applyScaleDefaults(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(t,e){if(!e)return t;const n=e.split(".");for(let s=0,i=n.length;s<i;++s){const o=n[s];t=t[o]||(t[o]=Object.create(null))}return t}function set(t,e,n){return typeof e=="string"?merge(getScope$1(t,e),n):merge(getScope$1(t,""),e)}class Defaults{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>getHoverColor(i.backgroundColor),this.hoverBorderColor=(s,i)=>getHoverColor(i.borderColor),this.hoverColor=(s,i)=>getHoverColor(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return set(this,e,n)}get(e){return getScope$1(this,e)}describe(e,n){return set(descriptors,e,n)}override(e,n){return set(overrides,e,n)}route(e,n,s,i){const o=getScope$1(this,e),l=getScope$1(this,s),u="_"+n;Object.defineProperties(o,{[u]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[u],f=l[i];return isObject(d)?Object.assign({},f,d):valueOrDefault(d,f)},set(d){this[u]=d}}})}apply(e){e.forEach(n=>n(this))}}var defaults=new Defaults({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[applyAnimationsDefaults,applyLayoutsDefaults,applyScaleDefaults]);function toFontString(t){return!t||isNullOrUndef(t.size)||isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function _measureText(t,e,n,s,i){let o=e[i];return o||(o=e[i]=t.measureText(i).width,n.push(i)),o>s&&(s=o),s}function _longestText(t,e,n,s){s=s||{};let i=s.data=s.data||{},o=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(i=s.data={},o=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let l=0;const u=n.length;let d,f,m,g,y;for(d=0;d<u;d++)if(g=n[d],g!=null&&!isArray(g))l=_measureText(t,i,o,l,g);else if(isArray(g))for(f=0,m=g.length;f<m;f++)y=g[f],y!=null&&!isArray(y)&&(l=_measureText(t,i,o,l,y));t.restore();const v=o.length/2;if(v>n.length){for(d=0;d<v;d++)delete i[o[d]];o.splice(0,v)}return l}function _alignPixel(t,e,n){const s=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*s)/s+i}function clearCanvas(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function drawPoint(t,e,n,s){drawPointLegend(t,e,n,s,null)}function drawPointLegend(t,e,n,s,i){let o,l,u,d,f,m,g,y;const v=e.pointStyle,E=e.rotation,w=e.radius;let A=(E||0)*RAD_PER_DEG;if(v&&typeof v=="object"&&(o=v.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(A),t.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),v){default:i?t.ellipse(n,s,i/2,w,0,0,TAU):t.arc(n,s,w,0,TAU),t.closePath();break;case"triangle":m=i?i/2:w,t.moveTo(n+Math.sin(A)*m,s-Math.cos(A)*w),A+=TWO_THIRDS_PI,t.lineTo(n+Math.sin(A)*m,s-Math.cos(A)*w),A+=TWO_THIRDS_PI,t.lineTo(n+Math.sin(A)*m,s-Math.cos(A)*w),t.closePath();break;case"rectRounded":f=w*.516,d=w-f,l=Math.cos(A+QUARTER_PI)*d,g=Math.cos(A+QUARTER_PI)*(i?i/2-f:d),u=Math.sin(A+QUARTER_PI)*d,y=Math.sin(A+QUARTER_PI)*(i?i/2-f:d),t.arc(n-g,s-u,f,A-PI,A-HALF_PI),t.arc(n+y,s-l,f,A-HALF_PI,A),t.arc(n+g,s+u,f,A,A+HALF_PI),t.arc(n-y,s+l,f,A+HALF_PI,A+PI),t.closePath();break;case"rect":if(!E){d=Math.SQRT1_2*w,m=i?i/2:d,t.rect(n-m,s-d,2*m,2*d);break}A+=QUARTER_PI;case"rectRot":g=Math.cos(A)*(i?i/2:w),l=Math.cos(A)*w,u=Math.sin(A)*w,y=Math.sin(A)*(i?i/2:w),t.moveTo(n-g,s-u),t.lineTo(n+y,s-l),t.lineTo(n+g,s+u),t.lineTo(n-y,s+l),t.closePath();break;case"crossRot":A+=QUARTER_PI;case"cross":g=Math.cos(A)*(i?i/2:w),l=Math.cos(A)*w,u=Math.sin(A)*w,y=Math.sin(A)*(i?i/2:w),t.moveTo(n-g,s-u),t.lineTo(n+g,s+u),t.moveTo(n+y,s-l),t.lineTo(n-y,s+l);break;case"star":g=Math.cos(A)*(i?i/2:w),l=Math.cos(A)*w,u=Math.sin(A)*w,y=Math.sin(A)*(i?i/2:w),t.moveTo(n-g,s-u),t.lineTo(n+g,s+u),t.moveTo(n+y,s-l),t.lineTo(n-y,s+l),A+=QUARTER_PI,g=Math.cos(A)*(i?i/2:w),l=Math.cos(A)*w,u=Math.sin(A)*w,y=Math.sin(A)*(i?i/2:w),t.moveTo(n-g,s-u),t.lineTo(n+g,s+u),t.moveTo(n+y,s-l),t.lineTo(n-y,s+l);break;case"line":l=i?i/2:Math.cos(A)*w,u=Math.sin(A)*w,t.moveTo(n-l,s-u),t.lineTo(n+l,s+u);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(A)*(i?i/2:w),s+Math.sin(A)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function _isPointInArea(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function clipArea(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function unclipArea(t){t.restore()}function _steppedLineTo(t,e,n,s,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const o=(e.x+n.x)/2;t.lineTo(o,e.y),t.lineTo(o,n.y)}else i==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function _bezierCurveTo(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function setRenderOpts(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),isNullOrUndef(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function decorateText(t,e,n,s,i){if(i.strikethrough||i.underline){const o=t.measureText(s),l=e-o.actualBoundingBoxLeft,u=e+o.actualBoundingBoxRight,d=n-o.actualBoundingBoxAscent,f=n+o.actualBoundingBoxDescent,m=i.strikethrough?(d+f)/2:f;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(l,m),t.lineTo(u,m),t.stroke()}}function drawBackdrop(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function renderText(t,e,n,s,i,o={}){const l=isArray(e)?e:[e],u=o.strokeWidth>0&&o.strokeColor!=="";let d,f;for(t.save(),t.font=i.string,setRenderOpts(t,o),d=0;d<l.length;++d)f=l[d],o.backdrop&&drawBackdrop(t,o.backdrop),u&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),isNullOrUndef(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(f,n,s,o.maxWidth)),t.fillText(f,n,s,o.maxWidth),decorateText(t,n,s,f,o),s+=Number(i.lineHeight);t.restore()}function addRoundedRectPath(t,e){const{x:n,y:s,w:i,h:o,radius:l}=e;t.arc(n+l.topLeft,s+l.topLeft,l.topLeft,1.5*PI,PI,!0),t.lineTo(n,s+o-l.bottomLeft),t.arc(n+l.bottomLeft,s+o-l.bottomLeft,l.bottomLeft,PI,HALF_PI,!0),t.lineTo(n+i-l.bottomRight,s+o),t.arc(n+i-l.bottomRight,s+o-l.bottomRight,l.bottomRight,HALF_PI,0,!0),t.lineTo(n+i,s+l.topRight),t.arc(n+i-l.topRight,s+l.topRight,l.topRight,0,-HALF_PI,!0),t.lineTo(n+l.topLeft,s)}const LINE_HEIGHT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FONT_STYLE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function toLineHeight(t,e){const n=(""+t).match(LINE_HEIGHT);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const numberOrZero=t=>+t||0;function _readValueToProps(t,e){const n={},s=isObject(e),i=s?Object.keys(e):e,o=isObject(t)?s?l=>valueOrDefault(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of i)n[l]=numberOrZero(o(l));return n}function toTRBL(t){return _readValueToProps(t,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(t){return _readValueToProps(t,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(t){const e=toTRBL(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function toFont(t,e){t=t||{},e=e||defaults.font;let n=valueOrDefault(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=valueOrDefault(t.style,e.style);s&&!(""+s).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:valueOrDefault(t.family,e.family),lineHeight:toLineHeight(valueOrDefault(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:valueOrDefault(t.weight,e.weight),string:""};return i.string=toFontString(i),i}function resolve(t,e,n,s){let i,o,l;for(i=0,o=t.length;i<o;++i)if(l=t[i],l!==void 0&&l!==void 0)return l}function _addGrace(t,e,n){const{min:s,max:i}=t,o=toDimension(e,(i-s)/2),l=(u,d)=>n&&u===0?0:u+d;return{min:l(s,-Math.abs(o)),max:l(i,o)}}function createContext(t,e){return Object.assign(Object.create(t),e)}function _createResolver(t,e=[""],n,s,i=()=>t[0]){const o=n||t;typeof s>"u"&&(s=_resolve("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:s,_getTarget:i,override:u=>_createResolver([u,...t],e,o,s)};return new Proxy(l,{deleteProperty(u,d){return delete u[d],delete u._keys,delete t[0][d],!0},get(u,d){return _cached(u,d,()=>_resolveWithPrefixes(d,e,t,u))},getOwnPropertyDescriptor(u,d){return Reflect.getOwnPropertyDescriptor(u._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,d){return getKeysFromAllScopes(u).includes(d)},ownKeys(u){return getKeysFromAllScopes(u)},set(u,d,f){const m=u._storage||(u._storage=i());return u[d]=m[d]=f,delete u._keys,!0}})}function _attachContext(t,e,n,s){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:_descriptors(t,s),setContext:o=>_attachContext(t,o,n,s),override:o=>_attachContext(t.override(o),e,n,s)};return new Proxy(i,{deleteProperty(o,l){return delete o[l],delete t[l],!0},get(o,l,u){return _cached(o,l,()=>_resolveWithContext(o,l,u))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(o,l,u){return t[l]=u,delete o[l],!0}})}function _descriptors(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:s,isScriptable:isFunction(n)?n:()=>n,isIndexable:isFunction(s)?s:()=>s}}const readKey=(t,e)=>t?t+_capitalize(e):e,needsSubResolver=(t,e)=>isObject(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function _cached(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function _resolveWithContext(t,e,n){const{_proxy:s,_context:i,_subProxy:o,_descriptors:l}=t;let u=s[e];return isFunction(u)&&l.isScriptable(e)&&(u=_resolveScriptable(e,u,t,n)),isArray(u)&&u.length&&(u=_resolveArray(e,u,t,l.isIndexable)),needsSubResolver(e,u)&&(u=_attachContext(u,i,o&&o[e],l)),u}function _resolveScriptable(t,e,n,s){const{_proxy:i,_context:o,_subProxy:l,_stack:u}=n;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let d=e(o,l||s);return u.delete(t),needsSubResolver(t,d)&&(d=createSubResolver(i._scopes,i,t,d)),d}function _resolveArray(t,e,n,s){const{_proxy:i,_context:o,_subProxy:l,_descriptors:u}=n;if(typeof o.index<"u"&&s(t))return e[o.index%e.length];if(isObject(e[0])){const d=e,f=i._scopes.filter(m=>m!==d);e=[];for(const m of d){const g=createSubResolver(f,i,t,m);e.push(_attachContext(g,o,l&&l[t],u))}}return e}function resolveFallback(t,e,n){return isFunction(t)?t(e,n):t}const getScope=(t,e)=>t===!0?e:typeof t=="string"?resolveObjectKey(e,t):void 0;function addScopes(t,e,n,s,i){for(const o of e){const l=getScope(n,o);if(l){t.add(l);const u=resolveFallback(l._fallback,n,i);if(typeof u<"u"&&u!==n&&u!==s)return u}else if(l===!1&&typeof s<"u"&&n!==s)return null}return!1}function createSubResolver(t,e,n,s){const i=e._rootScopes,o=resolveFallback(e._fallback,n,s),l=[...t,...i],u=new Set;u.add(s);let d=addScopesFromKey(u,l,n,o||n,s);return d===null||typeof o<"u"&&o!==n&&(d=addScopesFromKey(u,l,o,d,s),d===null)?!1:_createResolver(Array.from(u),[""],i,o,()=>subGetTarget(e,n,s))}function addScopesFromKey(t,e,n,s,i){for(;n;)n=addScopes(t,e,n,s,i);return n}function subGetTarget(t,e,n){const s=t._getTarget();e in s||(s[e]={});const i=s[e];return isArray(i)&&isObject(n)?n:i||{}}function _resolveWithPrefixes(t,e,n,s){let i;for(const o of e)if(i=_resolve(readKey(o,t),n),typeof i<"u")return needsSubResolver(t,i)?createSubResolver(n,s,t,i):i}function _resolve(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function getKeysFromAllScopes(t){let e=t._keys;return e||(e=t._keys=resolveKeysFromAllScopes(t._scopes)),e}function resolveKeysFromAllScopes(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}function _parseObjectDataRadialScale(t,e,n,s){const{iScale:i}=t,{key:o="r"}=this._parsing,l=new Array(s);let u,d,f,m;for(u=0,d=s;u<d;++u)f=u+n,m=e[f],l[u]={r:i.parse(resolveObjectKey(m,o),f)};return l}const EPSILON=Number.EPSILON||1e-14,getPoint=(t,e)=>e<t.length&&!t[e].skip&&t[e],getValueAxis=t=>t==="x"?"y":"x";function splineCurve(t,e,n,s){const i=t.skip?e:t,o=e,l=n.skip?e:n,u=distanceBetweenPoints(o,i),d=distanceBetweenPoints(l,o);let f=u/(u+d),m=d/(u+d);f=isNaN(f)?0:f,m=isNaN(m)?0:m;const g=s*f,y=s*m;return{previous:{x:o.x-g*(l.x-i.x),y:o.y-g*(l.y-i.y)},next:{x:o.x+y*(l.x-i.x),y:o.y+y*(l.y-i.y)}}}function monotoneAdjust(t,e,n){const s=t.length;let i,o,l,u,d,f=getPoint(t,0);for(let m=0;m<s-1;++m)if(d=f,f=getPoint(t,m+1),!(!d||!f)){if(almostEquals(e[m],0,EPSILON)){n[m]=n[m+1]=0;continue}i=n[m]/e[m],o=n[m+1]/e[m],u=Math.pow(i,2)+Math.pow(o,2),!(u<=9)&&(l=3/Math.sqrt(u),n[m]=i*l*e[m],n[m+1]=o*l*e[m])}}function monotoneCompute(t,e,n="x"){const s=getValueAxis(n),i=t.length;let o,l,u,d=getPoint(t,0);for(let f=0;f<i;++f){if(l=u,u=d,d=getPoint(t,f+1),!u)continue;const m=u[n],g=u[s];l&&(o=(m-l[n])/3,u[`cp1${n}`]=m-o,u[`cp1${s}`]=g-o*e[f]),d&&(o=(d[n]-m)/3,u[`cp2${n}`]=m+o,u[`cp2${s}`]=g+o*e[f])}}function splineCurveMonotone(t,e="x"){const n=getValueAxis(e),s=t.length,i=Array(s).fill(0),o=Array(s);let l,u,d,f=getPoint(t,0);for(l=0;l<s;++l)if(u=d,d=f,f=getPoint(t,l+1),!!d){if(f){const m=f[e]-d[e];i[l]=m!==0?(f[n]-d[n])/m:0}o[l]=u?f?sign(i[l-1])!==sign(i[l])?0:(i[l-1]+i[l])/2:i[l-1]:i[l]}monotoneAdjust(t,i,o),monotoneCompute(t,o,e)}function capControlPoint(t,e,n){return Math.max(Math.min(t,n),e)}function capBezierPoints(t,e){let n,s,i,o,l,u=_isPointInArea(t[0],e);for(n=0,s=t.length;n<s;++n)l=o,o=u,u=n<s-1&&_isPointInArea(t[n+1],e),o&&(i=t[n],l&&(i.cp1x=capControlPoint(i.cp1x,e.left,e.right),i.cp1y=capControlPoint(i.cp1y,e.top,e.bottom)),u&&(i.cp2x=capControlPoint(i.cp2x,e.left,e.right),i.cp2y=capControlPoint(i.cp2y,e.top,e.bottom)))}function _updateBezierControlPoints(t,e,n,s,i){let o,l,u,d;if(e.spanGaps&&(t=t.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")splineCurveMonotone(t,i);else{let f=s?t[t.length-1]:t[0];for(o=0,l=t.length;o<l;++o)u=t[o],d=splineCurve(f,u,t[Math.min(o+1,l-(s?0:1))%l],e.tension),u.cp1x=d.previous.x,u.cp1y=d.previous.y,u.cp2x=d.next.x,u.cp2y=d.next.y,f=u}e.capBezierPoints&&capBezierPoints(t,n)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function parseMaxStyle(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const getComputedStyle$1=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function getStyle(t,e){return getComputedStyle$1(t).getPropertyValue(e)}const positions=["top","right","bottom","left"];function getPositionedStyle(t,e,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=positions[i];s[o]=parseFloat(t[e+"-"+o+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const useOffsetPos=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function getCanvasPosition(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:i,offsetY:o}=s;let l=!1,u,d;if(useOffsetPos(i,o,t.target))u=i,d=o;else{const f=e.getBoundingClientRect();u=s.clientX-f.left,d=s.clientY-f.top,l=!0}return{x:u,y:d,box:l}}function getRelativePosition(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,i=getComputedStyle$1(n),o=i.boxSizing==="border-box",l=getPositionedStyle(i,"padding"),u=getPositionedStyle(i,"border","width"),{x:d,y:f,box:m}=getCanvasPosition(t,n),g=l.left+(m&&u.left),y=l.top+(m&&u.top);let{width:v,height:E}=e;return o&&(v-=l.width+u.width,E-=l.height+u.height),{x:Math.round((d-g)/v*n.width/s),y:Math.round((f-y)/E*n.height/s)}}function getContainerSize(t,e,n){let s,i;if(e===void 0||n===void 0){const o=t&&_getParentNode(t);if(!o)e=t.clientWidth,n=t.clientHeight;else{const l=o.getBoundingClientRect(),u=getComputedStyle$1(o),d=getPositionedStyle(u,"border","width"),f=getPositionedStyle(u,"padding");e=l.width-f.width-d.width,n=l.height-f.height-d.height,s=parseMaxStyle(u.maxWidth,o,"clientWidth"),i=parseMaxStyle(u.maxHeight,o,"clientHeight")}}return{width:e,height:n,maxWidth:s||INFINITY,maxHeight:i||INFINITY}}const round1=t=>Math.round(t*10)/10;function getMaximumSize(t,e,n,s){const i=getComputedStyle$1(t),o=getPositionedStyle(i,"margin"),l=parseMaxStyle(i.maxWidth,t,"clientWidth")||INFINITY,u=parseMaxStyle(i.maxHeight,t,"clientHeight")||INFINITY,d=getContainerSize(t,e,n);let{width:f,height:m}=d;if(i.boxSizing==="content-box"){const y=getPositionedStyle(i,"border","width"),v=getPositionedStyle(i,"padding");f-=v.width+y.width,m-=v.height+y.height}return f=Math.max(0,f-o.width),m=Math.max(0,s?f/s:m-o.height),f=round1(Math.min(f,l,d.maxWidth)),m=round1(Math.min(m,u,d.maxHeight)),f&&!m&&(m=round1(f/2)),(e!==void 0||n!==void 0)&&s&&d.height&&m>d.height&&(m=d.height,f=round1(Math.floor(m*s))),{width:f,height:m}}function retinaScale(t,e,n){const s=e||1,i=Math.floor(t.height*s),o=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const l=t.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||l.height!==i||l.width!==o?(t.currentDevicePixelRatio=s,l.height=i,l.width=o,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const supportsEventListenerOptions=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};_isDomSupported()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function readUsedSize(t,e){const n=getStyle(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function _pointInLine(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function _steppedInterpolation(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function _bezierInterpolation(t,e,n,s){const i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},l=_pointInLine(t,i,n),u=_pointInLine(i,o,n),d=_pointInLine(o,e,n),f=_pointInLine(l,u,n),m=_pointInLine(u,d,n);return _pointInLine(f,m,n)}const getRightToLeftAdapter=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},getLeftToRightAdapter=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function getRtlAdapter(t,e,n){return t?getRightToLeftAdapter(e,n):getLeftToRightAdapter()}function overrideTextDirection(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function restoreTextDirection(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function propertyFn(t){return t==="angle"?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(e,n)=>e-n,normalize:e=>e}}function normalizeSegment({start:t,end:e,count:n,loop:s,style:i}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:i}}function getSegment(t,e,n){const{property:s,start:i,end:o}=n,{between:l,normalize:u}=propertyFn(s),d=e.length;let{start:f,end:m,loop:g}=t,y,v;if(g){for(f+=d,m+=d,y=0,v=d;y<v&&l(u(e[f%d][s]),i,o);++y)f--,m--;f%=d,m%=d}return m<f&&(m+=d),{start:f,end:m,loop:g,style:t.style}}function _boundSegment(t,e,n){if(!n)return[t];const{property:s,start:i,end:o}=n,l=e.length,{compare:u,between:d,normalize:f}=propertyFn(s),{start:m,end:g,loop:y,style:v}=getSegment(t,e,n),E=[];let w=!1,A=null,I,D,V;const Y=()=>d(i,V,I)&&u(i,V)!==0,j=()=>u(o,I)===0||d(o,V,I),H=()=>w||Y(),S=()=>!w||j();for(let T=m,P=m;T<=g;++T)D=e[T%l],!D.skip&&(I=f(D[s]),I!==V&&(w=d(I,i,o),A===null&&H()&&(A=u(I,i)===0?T:P),A!==null&&S()&&(E.push(normalizeSegment({start:A,end:T,loop:y,count:l,style:v})),A=null),P=T,V=I));return A!==null&&E.push(normalizeSegment({start:A,end:g,loop:y,count:l,style:v})),E}function _boundSegments(t,e){const n=[],s=t.segments;for(let i=0;i<s.length;i++){const o=_boundSegment(s[i],t.points,e);o.length&&n.push(...o)}return n}function findStartAndEnd(t,e,n,s){let i=0,o=e-1;if(n&&!s)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(o+=i);o>i&&t[o%e].skip;)o--;return o%=e,{start:i,end:o}}function solidSegments(t,e,n,s){const i=t.length,o=[];let l=e,u=t[e],d;for(d=e+1;d<=n;++d){const f=t[d%i];f.skip||f.stop?u.skip||(s=!1,o.push({start:e%i,end:(d-1)%i,loop:s}),e=l=f.stop?d:null):(l=d,u.skip&&(e=d)),u=f}return l!==null&&o.push({start:e%i,end:l%i,loop:s}),o}function _computeSegments(t,e){const n=t.points,s=t.options.spanGaps,i=n.length;if(!i)return[];const o=!!t._loop,{start:l,end:u}=findStartAndEnd(n,i,o,s);if(s===!0)return splitByStyles(t,[{start:l,end:u,loop:o}],n,e);const d=u<l?u+i:u,f=!!t._fullLoop&&l===0&&u===i-1;return splitByStyles(t,solidSegments(n,l,d,f),n,e)}function splitByStyles(t,e,n,s){return!s||!s.setContext||!n?e:doSplitByStyles(t,e,n,s)}function doSplitByStyles(t,e,n,s){const i=t._chart.getContext(),o=readStyle(t.options),{_datasetIndex:l,options:{spanGaps:u}}=t,d=n.length,f=[];let m=o,g=e[0].start,y=g;function v(E,w,A,I){const D=u?-1:1;if(E!==w){for(E+=d;n[E%d].skip;)E-=D;for(;n[w%d].skip;)w+=D;E%d!==w%d&&(f.push({start:E%d,end:w%d,loop:A,style:I}),m=I,g=w%d)}}for(const E of e){g=u?g:E.start;let w=n[g%d],A;for(y=g+1;y<=E.end;y++){const I=n[y%d];A=readStyle(s.setContext(createContext(i,{type:"segment",p0:w,p1:I,p0DataIndex:(y-1)%d,p1DataIndex:y%d,datasetIndex:l}))),styleChanged(A,m)&&v(g,y-1,E.loop,m),w=I,m=A}g<y-1&&v(g,y-1,E.loop,m)}return f}function readStyle(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function styleChanged(t,e){if(!e)return!1;const n=[],s=function(i,o){return isPatternOrGradient(o)?(n.includes(o)||n.push(o),n.indexOf(o)):o};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function getSizeForArea(t,e,n){return t.options.clip?t[n]:e[n]}function getDatasetArea(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:getSizeForArea(n,e,"left"),right:getSizeForArea(n,e,"right"),top:getSizeForArea(s,e,"top"),bottom:getSizeForArea(s,e,"bottom")}:e}function getDatasetClipArea(t,e){const n=e._clip;if(n.disabled)return!1;const s=getDatasetArea(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,i){const o=n.listeners[i],l=n.duration;o.forEach(u=>u({chart:e,initial:n.initial,numSteps:l,currentStep:Math.min(s-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const o=s.items;let l=o.length-1,u=!1,d;for(;l>=0;--l)d=o[l],d._active?(d._total>s.duration&&(s.duration=d._total),d.tick(e),u=!0):(o[l]=o[o.length-1],o.pop());u&&(i.draw(),this._notify(i,s,e,"progress")),o.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),n+=o.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=color(t||transparent),i=s.valid&&color(e||transparent);return i&&i.valid?i.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Animation{constructor(e,n,s,i){const o=n[s];i=resolve([e.to,i,o,e.from]);const l=resolve([e.from,o,i]);this._active=!0,this._fn=e.fn||interpolators[e.type||typeof l],this._easing=effects[e.easing]||effects.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=l,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],o=s-this._start,l=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=resolve([e.to,n,i,e.from]),this._from=resolve([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,i=this._prop,o=this._from,l=this._loop,u=this._to;let d;if(this._active=o!==u&&(l||n<s),!this._active){this._target[i]=u,this._notify(!0);return}if(n<0){this._target[i]=o;return}d=n/s%2,d=l&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[i]=this._fn(o,u,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class Animations{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!isObject(e))return;const n=Object.keys(defaults.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const o=e[i];if(!isObject(o))return;const l={};for(const u of n)l[u]=o[u];(isArray(o.properties)&&o.properties||[i]).forEach(u=>{(u===i||!s.has(u))&&s.set(u,l)})})}_animateOptions(e,n){const s=n.options,i=resolveTargetOptions(e,s);if(!i)return[];const o=this._createAnimations(i,s);return s.$shared&&awaitAll(e.options.$animations,s).then(()=>{e.options=s},()=>{}),o}_createAnimations(e,n){const s=this._properties,i=[],o=e.$animations||(e.$animations={}),l=Object.keys(n),u=Date.now();let d;for(d=l.length-1;d>=0;--d){const f=l[d];if(f.charAt(0)==="$")continue;if(f==="options"){i.push(...this._animateOptions(e,n));continue}const m=n[f];let g=o[f];const y=s.get(f);if(g)if(y&&g.active()){g.update(y,m,u);continue}else g.cancel();if(!y||!y.duration){e[f]=m;continue}o[f]=g=new Animation(y,e,f,m),i.push(g)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return animator.add(this._chart,s),!0}}function awaitAll(t,e){const n=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const o=t[s[i]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function resolveTargetOptions(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function scaleClip(t,e){const n=t&&t.options||{},s=n.reverse,i=n.min===void 0?e:0,o=n.max===void 0?e:0;return{start:s?o:i,end:s?i:o}}function defaultClip(t,e,n){if(n===!1)return!1;const s=scaleClip(t,n),i=scaleClip(e,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function toClip(t){let e,n,s,i;return isObject(t)?(e=t.top,n=t.right,s=t.bottom,i=t.left):e=n=s=i=t,{top:e,right:n,bottom:s,left:i,disabled:t===!1}}function getSortedDatasetIndices(t,e){const n=[],s=t._getSortedDatasetMetas(e);let i,o;for(i=0,o=s.length;i<o;++i)n.push(s[i].index);return n}function applyStack(t,e,n,s={}){const i=t.keys,o=s.mode==="single";let l,u,d,f;if(e===null)return;let m=!1;for(l=0,u=i.length;l<u;++l){if(d=+i[l],d===n){if(m=!0,s.all)continue;break}f=t.values[d],isNumberFinite(f)&&(o||e===0||sign(e)===sign(f))&&(e+=f)}return!m&&!s.all?0:e}function convertObjectDataToArray(t,e){const{iScale:n,vScale:s}=e,i=n.axis==="x"?"x":"y",o=s.axis==="x"?"x":"y",l=Object.keys(t),u=new Array(l.length);let d,f,m;for(d=0,f=l.length;d<f;++d)m=l[d],u[d]={[i]:m,[o]:t[m]};return u}function isStacked(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function getStackKey(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function getUserBounds(t){const{min:e,max:n,minDefined:s,maxDefined:i}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function getOrCreateStack(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function getLastIndexInStack(t,e,n,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const o=t[i.index];if(n&&o>0||!n&&o<0)return i.index}return null}function updateStacks(t,e){const{chart:n,_cachedMeta:s}=t,i=n._stacks||(n._stacks={}),{iScale:o,vScale:l,index:u}=s,d=o.axis,f=l.axis,m=getStackKey(o,l,s),g=e.length;let y;for(let v=0;v<g;++v){const E=e[v],{[d]:w,[f]:A}=E,I=E._stacks||(E._stacks={});y=I[f]=getOrCreateStack(i,m,w),y[u]=A,y._top=getLastIndexInStack(y,l,!0,s.type),y._bottom=getLastIndexInStack(y,l,!1,s.type);const D=y._visualValues||(y._visualValues={});D[u]=A}}function getFirstScaleId(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function createDatasetContext(t,e){return createContext(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function createDataContext(t,e,n){return createContext(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function clearStacks(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const i of e){const o=i._stacks;if(!o||o[s]===void 0||o[s][n]===void 0)return;delete o[s][n],o[s]._visualValues!==void 0&&o[s]._visualValues[n]!==void 0&&delete o[s]._visualValues[n]}}}const isDirectUpdateMode=t=>t==="reset"||t==="none",cloneIfNotShared=(t,e)=>e?t:Object.assign({},t),createStack=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:getSortedDatasetIndices(n,!0),values:null};class DatasetController{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=isStacked(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&clearStacks(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(g,y,v,E)=>g==="x"?y:g==="r"?E:v,o=n.xAxisID=valueOrDefault(s.xAxisID,getFirstScaleId(e,"x")),l=n.yAxisID=valueOrDefault(s.yAxisID,getFirstScaleId(e,"y")),u=n.rAxisID=valueOrDefault(s.rAxisID,getFirstScaleId(e,"r")),d=n.indexAxis,f=n.iAxisID=i(d,o,l,u),m=n.vAxisID=i(d,l,o,u);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(u),n.iScale=this.getScaleForId(f),n.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),e._stacked&&clearStacks(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(isObject(n)){const i=this._cachedMeta;this._data=convertObjectDataToArray(n,i)}else if(s!==n){if(s){unlistenArrayEvents(s,this);const i=this._cachedMeta;clearStacks(i),i._parsed=[]}n&&Object.isExtensible(n)&&listenArrayEvents(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const o=n._stacked;n._stacked=isStacked(n.vScale,n),n.stack!==s.stack&&(i=!0,clearStacks(n),n.stack=s.stack),this._resyncElements(e),(i||o!==n._stacked)&&(updateStacks(this,n._parsed),n._stacked=isStacked(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:i}=this,{iScale:o,_stacked:l}=s,u=o.axis;let d=e===0&&n===i.length?!0:s._sorted,f=e>0&&s._parsed[e-1],m,g,y;if(this._parsing===!1)s._parsed=i,s._sorted=!0,y=i;else{isArray(i[e])?y=this.parseArrayData(s,i,e,n):isObject(i[e])?y=this.parseObjectData(s,i,e,n):y=this.parsePrimitiveData(s,i,e,n);const v=()=>g[u]===null||f&&g[u]<f[u];for(m=0;m<n;++m)s._parsed[m+e]=g=y[m],d&&(v()&&(d=!1),f=g);s._sorted=d}l&&updateStacks(this,y)}parsePrimitiveData(e,n,s,i){const{iScale:o,vScale:l}=e,u=o.axis,d=l.axis,f=o.getLabels(),m=o===l,g=new Array(i);let y,v,E;for(y=0,v=i;y<v;++y)E=y+s,g[y]={[u]:m||o.parse(f[E],E),[d]:l.parse(n[E],E)};return g}parseArrayData(e,n,s,i){const{xScale:o,yScale:l}=e,u=new Array(i);let d,f,m,g;for(d=0,f=i;d<f;++d)m=d+s,g=n[m],u[d]={x:o.parse(g[0],m),y:l.parse(g[1],m)};return u}parseObjectData(e,n,s,i){const{xScale:o,yScale:l}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,f=new Array(i);let m,g,y,v;for(m=0,g=i;m<g;++m)y=m+s,v=n[y],f[m]={x:o.parse(resolveObjectKey(v,u),y),y:l.parse(resolveObjectKey(v,d),y)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const i=this.chart,o=this._cachedMeta,l=n[e.axis],u={keys:getSortedDatasetIndices(i,!0),values:n._stacks[e.axis]._visualValues};return applyStack(u,l,o.index,{mode:s})}updateRangeFromParsed(e,n,s,i){const o=s[n.axis];let l=o===null?NaN:o;const u=i&&s._stacks[n.axis];i&&u&&(i.values=u,l=applyStack(i,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const s=this._cachedMeta,i=s._parsed,o=s._sorted&&e===s.iScale,l=i.length,u=this._getOtherScale(e),d=createStack(n,s,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:g}=getUserBounds(u);let y,v;function E(){v=i[y];const w=v[u.axis];return!isNumberFinite(v[e.axis])||m>w||g<w}for(y=0;y<l&&!(!E()&&(this.updateRangeFromParsed(f,e,v,d),o));++y);if(o){for(y=l-1;y>=0;--y)if(!E()){this.updateRangeFromParsed(f,e,v,d);break}}return f}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let i,o,l;for(i=0,o=n.length;i<o;++i)l=n[i][e.axis],isNumberFinite(l)&&s.push(l);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,i=n.vScale,o=this.getParsed(e);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=toClip(valueOrDefault(this.options.clip,defaultClip(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],o=n.chartArea,l=[],u=this._drawStart||0,d=this._drawCount||i.length-u,f=this.options.drawActiveElementsOnTop;let m;for(s.dataset&&s.dataset.draw(e,o,u,d),m=u;m<u+d;++m){const g=i[m];g.hidden||(g.active&&f?l.push(g):g.draw(e,o))}for(m=0;m<l.length;++m)l[m].draw(e,o)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const i=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=createDataContext(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=i.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=s,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const i=n==="active",o=this._cachedDataOpts,l=e+"-"+n,u=o[l],d=this.enableOptionSharing&&defined(s);if(u)return cloneIfNotShared(u,d);const f=this.chart.config,m=f.datasetElementScopeKeys(this._type,e),g=i?[`${e}Hover`,"hover",e,""]:[e,""],y=f.getOptionScopes(this.getDataset(),m),v=Object.keys(defaults.elements[e]),E=()=>this.getContext(s,i,n),w=f.resolveNamedOptions(y,v,E,g);return w.$shared&&(w.$shared=d,o[l]=Object.freeze(cloneIfNotShared(w,d))),w}_resolveAnimations(e,n,s){const i=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,u=o[l];if(u)return u;let d;if(i.options.animation!==!1){const m=this.chart.config,g=m.datasetAnimationScopeKeys(this._type,n),y=m.getOptionScopes(this.getDataset(),g);d=m.createResolver(y,this.getContext(e,s,n))}const f=new Animations(i,d&&d.animations);return d&&d._cacheable&&(o[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||isDirectUpdateMode(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),i=this._sharedOptions,o=this.getSharedOptions(s),l=this.includeOptions(n,o)||o!==i;return this.updateSharedOptions(o,n,s),{sharedOptions:o,includeOptions:l}}updateElement(e,n,s,i){isDirectUpdateMode(i)?Object.assign(e,s):this._resolveAnimations(n,i).update(e,s)}updateSharedOptions(e,n,s){e&&!isDirectUpdateMode(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,i){e.active=i;const o=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(e,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[u,d,f]of this._syncList)this[u](d,f);this._syncList=[];const i=s.length,o=n.length,l=Math.min(o,i);l&&this.parse(0,l),o>i?this._insertElements(i,o-i,e):o<i&&this._removeElements(o,i-o)}_insertElements(e,n,s=!0){const i=this._cachedMeta,o=i.data,l=e+n;let u;const d=f=>{for(f.length+=n,u=f.length-1;u>=l;u--)f[u]=f[u-n]};for(d(o),u=e;u<l;++u)o[u]=new this.dataElementType;this._parsing&&d(i._parsed),this.parse(e,n),s&&this.updateElements(o,e,n,"reset")}updateElements(e,n,s,i){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,n);s._stacked&&clearStacks(s,i)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,i]=e;this[n](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ye(DatasetController,"defaults",{}),Ye(DatasetController,"datasetElementType",null),Ye(DatasetController,"dataElementType",null);function getAllScaleValues(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let i=0,o=n.length;i<o;i++)s=s.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=_arrayUnique(s.sort((i,o)=>i-o))}return t._cache.$bar}function computeMinSampleSize(t){const e=t.iScale,n=getAllScaleValues(e,t.type);let s=e._length,i,o,l,u;const d=()=>{l===32767||l===-32768||(defined(u)&&(s=Math.min(s,Math.abs(l-u)||s)),u=l)};for(i=0,o=n.length;i<o;++i)l=e.getPixelForValue(n[i]),d();for(u=void 0,i=0,o=e.ticks.length;i<o;++i)l=e.getPixelForTick(i),d();return s}function computeFitCategoryTraits(t,e,n,s){const i=n.barThickness;let o,l;return isNullOrUndef(i)?(o=e.min*n.categoryPercentage,l=n.barPercentage):(o=i*s,l=1),{chunk:o/s,ratio:l,start:e.pixels[t]-o/2}}function computeFlexCategoryTraits(t,e,n,s){const i=e.pixels,o=i[t];let l=t>0?i[t-1]:null,u=t<i.length-1?i[t+1]:null;const d=n.categoryPercentage;l===null&&(l=o-(u===null?e.end-e.start:u-o)),u===null&&(u=o+o-l);const f=o-(o-Math.min(l,u))/2*d;return{chunk:Math.abs(u-l)/2*d/s,ratio:n.barPercentage,start:f}}function parseFloatBar(t,e,n,s){const i=n.parse(t[0],s),o=n.parse(t[1],s),l=Math.min(i,o),u=Math.max(i,o);let d=l,f=u;Math.abs(l)>Math.abs(u)&&(d=u,f=l),e[n.axis]=f,e._custom={barStart:d,barEnd:f,start:i,end:o,min:l,max:u}}function parseValue(t,e,n,s){return isArray(t)?parseFloatBar(t,e,n,s):e[n.axis]=n.parse(t,s),e}function parseArrayOrPrimitive(t,e,n,s){const i=t.iScale,o=t.vScale,l=i.getLabels(),u=i===o,d=[];let f,m,g,y;for(f=n,m=n+s;f<m;++f)y=e[f],g={},g[i.axis]=u||i.parse(l[f],f),d.push(parseValue(y,g,o,f));return d}function isFloatBar(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function barSign(t,e,n){return t!==0?sign(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function borderProps(t){let e,n,s,i,o;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(i="end",o="start"):(i="start",o="end"),{start:n,end:s,reverse:e,top:i,bottom:o}}function setBorderSkipped(t,e,n,s){let i=e.borderSkipped;const o={};if(!i){t.borderSkipped=o;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:u,reverse:d,top:f,bottom:m}=borderProps(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?i=f:(n._bottom||0)===s?i=m:(o[parseEdge(m,l,u,d)]=!0,i=f)),o[parseEdge(i,l,u,d)]=!0,t.borderSkipped=o}function parseEdge(t,e,n,s){return s?(t=swap(t,e,n),t=startEnd(t,n,e)):t=startEnd(t,e,n),t}function swap(t,e,n){return t===e?n:t===n?e:t}function startEnd(t,e,n){return t==="start"?e:t==="end"?n:t}function setInflateAmount(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class BarController extends DatasetController{parsePrimitiveData(e,n,s,i){return parseArrayOrPrimitive(e,n,s,i)}parseArrayData(e,n,s,i){return parseArrayOrPrimitive(e,n,s,i)}parseObjectData(e,n,s,i){const{iScale:o,vScale:l}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,f=o.axis==="x"?u:d,m=l.axis==="x"?u:d,g=[];let y,v,E,w;for(y=s,v=s+i;y<v;++y)w=n[y],E={},E[o.axis]=o.parse(resolveObjectKey(w,f),y),g.push(parseValue(resolveObjectKey(w,m),E,l,y));return g}updateRangeFromParsed(e,n,s,i){super.updateRangeFromParsed(e,n,s,i);const o=s._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:i}=n,o=this.getParsed(e),l=o._custom,u=isFloatBar(l)?"["+l.start+", "+l.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,i){const o=i==="reset",{index:l,_cachedMeta:{vScale:u}}=this,d=u.getBasePixel(),f=u.isHorizontal(),m=this._getRuler(),{sharedOptions:g,includeOptions:y}=this._getSharedOptions(n,i);for(let v=n;v<n+s;v++){const E=this.getParsed(v),w=o||isNullOrUndef(E[u.axis])?{base:d,head:d}:this._calculateBarValuePixels(v),A=this._calculateBarIndexPixels(v,m),I=(E._stacks||{})[u.axis],D={horizontal:f,base:w.base,enableBorderRadius:!I||isFloatBar(E._custom)||l===I._top||l===I._bottom,x:f?w.head:A.center,y:f?A.center:w.head,height:f?A.size:Math.abs(w.size),width:f?Math.abs(w.size):A.size};y&&(D.options=g||this.resolveDataElementOptions(v,e[v].active?"active":i));const V=D.options||e[v].options;setBorderSkipped(D,V,I,l),setInflateAmount(D,V,m.ratio),this.updateElement(e[v],v,D,i)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),o=s.options.stacked,l=[],u=this._cachedMeta.controller.getParsed(n),d=u&&u[s.axis],f=m=>{const g=m._parsed.find(v=>v[s.axis]===d),y=g&&g[m.vScale.axis];if(isNullOrUndef(y)||isNaN(y))return!0};for(const m of i)if(!(n!==void 0&&f(m))&&((o===!1||l.indexOf(m.stack)===-1||o===void 0&&m.stack===void 0)&&l.push(m.stack),m.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[valueOrDefault(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const i=this._getStacks(e,s),o=n!==void 0?i.indexOf(n):-1;return o===-1?i.length-1:o}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,i=[];let o,l;for(o=0,l=n.data.length;o<l;++o)i.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const u=e.barThickness;return{min:u||computeMinSampleSize(n),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:i},options:{base:o,minBarLength:l}}=this,u=o||0,d=this.getParsed(e),f=d._custom,m=isFloatBar(f);let g=d[n.axis],y=0,v=s?this.applyStack(n,d,s):g,E,w;v!==g&&(y=v-g,v=g),m&&(g=f.barStart,v=f.barEnd-f.barStart,g!==0&&sign(g)!==sign(f.barEnd)&&(y=0),y+=g);const A=!isNullOrUndef(o)&&!m?o:y;let I=n.getPixelForValue(A);if(this.chart.getDataVisibility(e)?E=n.getPixelForValue(y+v):E=I,w=E-I,Math.abs(w)<l){w=barSign(w,n,u)*l,g===u&&(I-=w/2);const D=n.getPixelForDecimal(0),V=n.getPixelForDecimal(1),Y=Math.min(D,V),j=Math.max(D,V);I=Math.max(Math.min(I,j),Y),E=I+w,s&&!m&&(d._stacks[n.axis]._visualValues[i]=n.getValueForPixel(E)-n.getValueForPixel(I))}if(I===n.getPixelForValue(u)){const D=sign(w)*n.getLineWidthForValue(u)/2;I+=D,w-=D}return{size:w,base:I,head:E,center:E+w/2}}_calculateBarIndexPixels(e,n){const s=n.scale,i=this.options,o=i.skipNull,l=valueOrDefault(i.maxBarThickness,1/0);let u,d;const f=this._getAxisCount();if(n.grouped){const m=o?this._getStackCount(e):n.stackCount,g=i.barThickness==="flex"?computeFlexCategoryTraits(e,n,i,m*f):computeFitCategoryTraits(e,n,i,m*f),y=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,v=this._getAxis().indexOf(valueOrDefault(y,this.getFirstScaleIdForIndexAxis())),E=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+v;u=g.start+g.chunk*E+g.chunk/2,d=Math.min(l,g.chunk*g.ratio)}else u=s.getPixelForValue(this.getParsed(e)[s.axis],e),d=Math.min(l,n.min*n.ratio);return{base:u-d/2,head:u+d/2,center:u,size:d}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,i=s.length;let o=0;for(;o<i;++o)this.getParsed(o)[n.axis]!==null&&!s[o].hidden&&s[o].draw(this._ctx)}}Ye(BarController,"id","bar"),Ye(BarController,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ye(BarController,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class BubbleController extends DatasetController{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,s,i){const o=super.parsePrimitiveData(e,n,s,i);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+s).radius;return o}parseArrayData(e,n,s,i){const o=super.parseArrayData(e,n,s,i);for(let l=0;l<o.length;l++){const u=n[s+l];o[l]._custom=valueOrDefault(u[2],this.resolveDataElementOptions(l+s).radius)}return o}parseObjectData(e,n,s,i){const o=super.parseObjectData(e,n,s,i);for(let l=0;l<o.length;l++){const u=n[s+l];o[l]._custom=valueOrDefault(u&&u.r&&+u.r,this.resolveDataElementOptions(l+s).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let s=e.length-1;s>=0;--s)n=Math.max(n,e[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:o}=n,l=this.getParsed(e),u=i.getLabelForValue(l.x),d=o.getLabelForValue(l.y),f=l._custom;return{label:s[e]||"",value:"("+u+", "+d+(f?", "+f:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,s,i){const o=i==="reset",{iScale:l,vScale:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,i),m=l.axis,g=u.axis;for(let y=n;y<n+s;y++){const v=e[y],E=!o&&this.getParsed(y),w={},A=w[m]=o?l.getPixelForDecimal(.5):l.getPixelForValue(E[m]),I=w[g]=o?u.getBasePixel():u.getPixelForValue(E[g]);w.skip=isNaN(A)||isNaN(I),f&&(w.options=d||this.resolveDataElementOptions(y,v.active?"active":i),o&&(w.options.radius=0)),this.updateElement(v,y,w,i)}}resolveDataElementOptions(e,n){const s=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return n!=="active"&&(i.radius=0),i.radius+=valueOrDefault(s&&s._custom,o),i}}Ye(BubbleController,"id","bubble"),Ye(BubbleController,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ye(BubbleController,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function getRatioAndOffset(t,e,n){let s=1,i=1,o=0,l=0;if(e<TAU){const u=t,d=u+e,f=Math.cos(u),m=Math.sin(u),g=Math.cos(d),y=Math.sin(d),v=(V,Y,j)=>_angleBetween(V,u,d,!0)?1:Math.max(Y,Y*n,j,j*n),E=(V,Y,j)=>_angleBetween(V,u,d,!0)?-1:Math.min(Y,Y*n,j,j*n),w=v(0,f,g),A=v(HALF_PI,m,y),I=E(PI,f,g),D=E(PI+HALF_PI,m,y);s=(w-I)/2,i=(A-D)/2,o=-(w+I)/2,l=-(A+D)/2}return{ratioX:s,ratioY:i,offsetX:o,offsetY:l}}class DoughnutController extends DatasetController{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let o=d=>+s[d];if(isObject(s[e])){const{key:d="value"}=this._parsing;o=f=>+resolveObjectKey(s[f],d)}let l,u;for(l=e,u=e+n;l<u;++l)i._parsed[l]=o(l)}}_getRotation(){return toRadians(this.options.rotation-90)}_getCircumference(){return toRadians(this.options.circumference)}_getRotationExtents(){let e=TAU,n=-TAU;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,o=i._getRotation(),l=i._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,o=i.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(s.width,s.height)-l)/2,0),d=Math.min(toPercentage(this.options.cutout,u),1),f=this._getRingWeight(this.index),{circumference:m,rotation:g}=this._getRotationExtents(),{ratioX:y,ratioY:v,offsetX:E,offsetY:w}=getRatioAndOffset(g,m,d),A=(s.width-l)/y,I=(s.height-l)/v,D=Math.max(Math.min(A,I)/2,0),V=toDimension(this.options.radius,D),Y=Math.max(V*d,0),j=(V-Y)/this._getVisibleDatasetWeightTotal();this.offsetX=E*V,this.offsetY=w*V,i.total=this.calculateTotal(),this.outerRadius=V-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*f,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const s=this.options,i=this._cachedMeta,o=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*o/TAU)}updateElements(e,n,s,i){const o=i==="reset",l=this.chart,u=l.chartArea,f=l.options.animation,m=(u.left+u.right)/2,g=(u.top+u.bottom)/2,y=o&&f.animateScale,v=y?0:this.innerRadius,E=y?0:this.outerRadius,{sharedOptions:w,includeOptions:A}=this._getSharedOptions(n,i);let I=this._getRotation(),D;for(D=0;D<n;++D)I+=this._circumference(D,o);for(D=n;D<n+s;++D){const V=this._circumference(D,o),Y=e[D],j={x:m+this.offsetX,y:g+this.offsetY,startAngle:I,endAngle:I+V,circumference:V,outerRadius:E,innerRadius:v};A&&(j.options=w||this.resolveDataElementOptions(D,Y.active?"active":i)),I+=V,this.updateElement(Y,D,j,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,i;for(i=0;i<n.length;i++){const o=e._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?TAU*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],o=formatNumber(n._parsed[e],s.options.locale);return{label:i[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const s=this.chart;let i,o,l,u,d;if(!e){for(i=0,o=s.data.datasets.length;i<o;++i)if(s.isDatasetVisible(i)){l=s.getDatasetMeta(i),e=l.data,u=l.controller;break}}if(!e)return 0;for(i=0,o=e.length;i<o;++i)d=u.resolveDataElementOptions(i),d.borderAlign!=="inner"&&(n=Math.max(n,d.borderWidth||0,d.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,i=e.length;s<i;++s){const o=this.resolveDataElementOptions(s);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(valueOrDefault(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ye(DoughnutController,"id","doughnut"),Ye(DoughnutController,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ye(DoughnutController,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ye(DoughnutController,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return n.labels.map((o,l)=>{const d=e.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:i,lineWidth:d.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class LineController extends DatasetController{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:u,count:d}=_getStartAndCountOfVisiblePoints(n,i,l);this._drawStart=u,this._drawCount=d,_scaleRangesChanged(n)&&(u=0,d=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=i;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(s,void 0,{animated:!l,options:f},e),this.updateElements(i,u,d,e)}updateElements(e,n,s,i){const o=i==="reset",{iScale:l,vScale:u,_stacked:d,_dataset:f}=this._cachedMeta,{sharedOptions:m,includeOptions:g}=this._getSharedOptions(n,i),y=l.axis,v=u.axis,{spanGaps:E,segment:w}=this.options,A=isNumber(E)?E:Number.POSITIVE_INFINITY,I=this.chart._animationsDisabled||o||i==="none",D=n+s,V=e.length;let Y=n>0&&this.getParsed(n-1);for(let j=0;j<V;++j){const H=e[j],S=I?H:{};if(j<n||j>=D){S.skip=!0;continue}const T=this.getParsed(j),P=isNullOrUndef(T[v]),U=S[y]=l.getPixelForValue(T[y],j),J=S[v]=o||P?u.getBasePixel():u.getPixelForValue(d?this.applyStack(u,T,d):T[v],j);S.skip=isNaN(U)||isNaN(J)||P,S.stop=j>0&&Math.abs(T[y]-Y[y])>A,w&&(S.parsed=T,S.raw=f.data[j]),g&&(S.options=m||this.resolveDataElementOptions(j,H.active?"active":i)),I||this.updateElement(H,j,S,i),Y=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),l=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ye(LineController,"id","line"),Ye(LineController,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ye(LineController,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class PolarAreaController extends DatasetController{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],o=formatNumber(n._parsed[e].r,s.options.locale);return{label:i[e]||"",value:o}}parseObjectData(e,n,s,i){return _parseObjectDataRadialScale.bind(this)(e,n,s,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,i)=>{const o=this.getParsed(i).r;!isNaN(o)&&this.chart.getDataVisibility(i)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,s=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(i/2,0),l=Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0),u=(o-l)/e.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(e,n,s,i){const o=i==="reset",l=this.chart,d=l.options.animation,f=this._cachedMeta.rScale,m=f.xCenter,g=f.yCenter,y=f.getIndexAngle(0)-.5*PI;let v=y,E;const w=360/this.countVisibleElements();for(E=0;E<n;++E)v+=this._computeAngle(E,i,w);for(E=n;E<n+s;E++){const A=e[E];let I=v,D=v+this._computeAngle(E,i,w),V=l.getDataVisibility(E)?f.getDistanceFromCenterForValue(this.getParsed(E).r):0;v=D,o&&(d.animateScale&&(V=0),d.animateRotate&&(I=D=y));const Y={x:m,y:g,innerRadius:0,outerRadius:V,startAngle:I,endAngle:D,options:this.resolveDataElementOptions(E,A.active?"active":i)};this.updateElement(A,E,Y,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,s){return this.chart.getDataVisibility(e)?toRadians(this.resolveDataElementOptions(e,n).angle||s):0}}Ye(PolarAreaController,"id","polarArea"),Ye(PolarAreaController,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ye(PolarAreaController,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return n.labels.map((o,l)=>{const d=e.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:i,lineWidth:d.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class PieController extends DoughnutController{}Ye(PieController,"id","pie"),Ye(PieController,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class RadarController extends DatasetController{getLabelAndValue(e){const n=this._cachedMeta.vScale,s=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(e,n,s,i){return _parseObjectDataRadialScale.bind(this)(e,n,s,i)}update(e){const n=this._cachedMeta,s=n.dataset,i=n.data||[],o=n.iScale.getLabels();if(s.points=i,e!=="resize"){const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0);const u={_loop:!0,_fullLoop:o.length===i.length,options:l};this.updateElement(s,void 0,u,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,s,i){const o=this._cachedMeta.rScale,l=i==="reset";for(let u=n;u<n+s;u++){const d=e[u],f=this.resolveDataElementOptions(u,d.active?"active":i),m=o.getPointPositionForValue(u,this.getParsed(u).r),g=l?o.xCenter:m.x,y=l?o.yCenter:m.y,v={x:g,y,angle:m.angle,skip:isNaN(g)||isNaN(y),options:f};this.updateElement(d,u,v,i)}}}Ye(RadarController,"id","radar"),Ye(RadarController,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ye(RadarController,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class ScatterController extends DatasetController{getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:o}=n,l=this.getParsed(e),u=i.getLabelForValue(l.x),d=o.getLabelForValue(l.y);return{label:s[e]||"",value:"("+u+", "+d+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,i=this.chart._animationsDisabled;let{start:o,count:l}=_getStartAndCountOfVisiblePoints(n,s,i);if(this._drawStart=o,this._drawCount=l,_scaleRangesChanged(n)&&(o=0,l=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:u,_dataset:d}=n;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!d._decimated,u.points=s;const f=this.resolveDatasetElementOptions(e);f.segment=this.options.segment,this.updateElement(u,void 0,{animated:!i,options:f},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,o,l,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,i){const o=i==="reset",{iScale:l,vScale:u,_stacked:d,_dataset:f}=this._cachedMeta,m=this.resolveDataElementOptions(n,i),g=this.getSharedOptions(m),y=this.includeOptions(i,g),v=l.axis,E=u.axis,{spanGaps:w,segment:A}=this.options,I=isNumber(w)?w:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||o||i==="none";let V=n>0&&this.getParsed(n-1);for(let Y=n;Y<n+s;++Y){const j=e[Y],H=this.getParsed(Y),S=D?j:{},T=isNullOrUndef(H[E]),P=S[v]=l.getPixelForValue(H[v],Y),U=S[E]=o||T?u.getBasePixel():u.getPixelForValue(d?this.applyStack(u,H,d):H[E],Y);S.skip=isNaN(P)||isNaN(U)||T,S.stop=Y>0&&Math.abs(H[v]-V[v])>I,A&&(S.parsed=H,S.raw=f.data[Y]),y&&(S.options=g||this.resolveDataElementOptions(Y,j.active?"active":i)),D||this.updateElement(j,Y,S,i),V=H}this.updateSharedOptions(g,i,m)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let u=0;for(let d=n.length-1;d>=0;--d)u=Math.max(u,n[d].size(this.resolveDataElementOptions(d))/2);return u>0&&u}const s=e.dataset,i=s.options&&s.options.borderWidth||0;if(!n.length)return i;const o=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,o,l)/2}}Ye(ScatterController,"id","scatter"),Ye(ScatterController,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ye(ScatterController,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var controllers=Object.freeze({__proto__:null,BarController,BubbleController,DoughnutController,LineController,PieController,PolarAreaController,RadarController,ScatterController});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapterBase{constructor(e){Ye(this,"options");this.options=e||{}}static override(e){Object.assign(DateAdapterBase.prototype,e)}init(){}formats(){return abstract()}parse(){return abstract()}format(){return abstract()}add(){return abstract()}diff(){return abstract()}startOf(){return abstract()}endOf(){return abstract()}}var adapters={_date:DateAdapterBase};function binarySearch(t,e,n,s){const{controller:i,data:o,_sorted:l}=t,u=i._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&l&&o.length){const f=u._reversePixels?_rlookupByKey:_lookupByKey;if(s){if(i._sharedOptions){const m=o[0],g=typeof m.getRange=="function"&&m.getRange(e);if(g){const y=f(o,e,n-g),v=f(o,e,n+g);return{lo:y.lo,hi:v.hi}}}}else{const m=f(o,e,n);if(d){const{vScale:g}=i._cachedMeta,{_parsed:y}=t,v=y.slice(0,m.lo+1).reverse().findIndex(w=>!isNullOrUndef(w[g.axis]));m.lo-=Math.max(0,v);const E=y.slice(m.hi).findIndex(w=>!isNullOrUndef(w[g.axis]));m.hi+=Math.max(0,E)}return m}}return{lo:0,hi:o.length-1}}function evaluateInteractionItems(t,e,n,s,i){const o=t.getSortedVisibleDatasetMetas(),l=n[e];for(let u=0,d=o.length;u<d;++u){const{index:f,data:m}=o[u],{lo:g,hi:y}=binarySearch(o[u],e,l,i);for(let v=g;v<=y;++v){const E=m[v];E.skip||s(E,f,v)}}}function getDistanceMetricForAxis(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,i){const o=e?Math.abs(s.x-i.x):0,l=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function getIntersectItems(t,e,n,s,i){const o=[];return!i&&!t.isPointInArea(e)||evaluateInteractionItems(t,n,e,function(u,d,f){!i&&!_isPointInArea(u,t.chartArea,0)||u.inRange(e.x,e.y,s)&&o.push({element:u,datasetIndex:d,index:f})},!0),o}function getNearestRadialItems(t,e,n,s){let i=[];function o(l,u,d){const{startAngle:f,endAngle:m}=l.getProps(["startAngle","endAngle"],s),{angle:g}=getAngleFromPoint(l,{x:e.x,y:e.y});_angleBetween(g,f,m)&&i.push({element:l,datasetIndex:u,index:d})}return evaluateInteractionItems(t,n,e,o),i}function getNearestCartesianItems(t,e,n,s,i,o){let l=[];const u=getDistanceMetricForAxis(n);let d=Number.POSITIVE_INFINITY;function f(m,g,y){const v=m.inRange(e.x,e.y,i);if(s&&!v)return;const E=m.getCenterPoint(i);if(!(!!o||t.isPointInArea(E))&&!v)return;const A=u(e,E);A<d?(l=[{element:m,datasetIndex:g,index:y}],d=A):A===d&&l.push({element:m,datasetIndex:g,index:y})}return evaluateInteractionItems(t,n,e,f),l}function getNearestItems(t,e,n,s,i,o){return!o&&!t.isPointInArea(e)?[]:n==="r"&&!s?getNearestRadialItems(t,e,n,i):getNearestCartesianItems(t,e,n,s,i,o)}function getAxisItems(t,e,n,s,i){const o=[],l=n==="x"?"inXRange":"inYRange";let u=!1;return evaluateInteractionItems(t,n,e,(d,f,m)=>{d[l]&&d[l](e[n],i)&&(o.push({element:d,datasetIndex:f,index:m}),u=u||d.inRange(e.x,e.y,i))}),s&&!u?[]:o}var Interaction={modes:{index(t,e,n,s){const i=getRelativePosition(e,t),o=n.axis||"x",l=n.includeInvisible||!1,u=n.intersect?getIntersectItems(t,i,o,s,l):getNearestItems(t,i,o,!1,s,l),d=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(f=>{const m=u[0].index,g=f.data[m];g&&!g.skip&&d.push({element:g,datasetIndex:f.index,index:m})}),d):[]},dataset(t,e,n,s){const i=getRelativePosition(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;let u=n.intersect?getIntersectItems(t,i,o,s,l):getNearestItems(t,i,o,!1,s,l);if(u.length>0){const d=u[0].datasetIndex,f=t.getDatasetMeta(d).data;u=[];for(let m=0;m<f.length;++m)u.push({element:f[m],datasetIndex:d,index:m})}return u},point(t,e,n,s){const i=getRelativePosition(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return getIntersectItems(t,i,o,s,l)},nearest(t,e,n,s){const i=getRelativePosition(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return getNearestItems(t,i,o,n.intersect,s,l)},x(t,e,n,s){const i=getRelativePosition(e,t);return getAxisItems(t,i,"x",n.intersect,s)},y(t,e,n,s){const i=getRelativePosition(e,t);return getAxisItems(t,i,"y",n.intersect,s)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(t,e){return t.filter(n=>n.pos===e)}function filterDynamicPositionByAxis(t,e){return t.filter(n=>STATIC_POSITIONS.indexOf(n.pos)===-1&&n.box.axis===e)}function sortByWeight(t,e){return t.sort((n,s)=>{const i=e?s:n,o=e?n:s;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function wrapBoxes(t){const e=[];let n,s,i,o,l,u;for(n=0,s=(t||[]).length;n<s;++n)i=t[n],{position:o,options:{stack:l,stackWeight:u=1}}=i,e.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:l&&o+l,stackWeight:u});return e}function buildStacks(t){const e={};for(const n of t){const{stack:s,pos:i,stackWeight:o}=n;if(!s||!STATIC_POSITIONS.includes(i))continue;const l=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function setLayoutDims(t,e){const n=buildStacks(t),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let o,l,u;for(o=0,l=t.length;o<l;++o){u=t[o];const{fullSize:d}=u.box,f=n[u.stack],m=f&&u.stackWeight/f.weight;u.horizontal?(u.width=m?m*s:d&&e.availableWidth,u.height=i):(u.width=s,u.height=m?m*i:d&&e.availableHeight)}return n}function buildLayoutBoxes(t){const e=wrapBoxes(t),n=sortByWeight(e.filter(f=>f.box.fullSize),!0),s=sortByWeight(filterByPosition(e,"left"),!0),i=sortByWeight(filterByPosition(e,"right")),o=sortByWeight(filterByPosition(e,"top"),!0),l=sortByWeight(filterByPosition(e,"bottom")),u=filterDynamicPositionByAxis(e,"x"),d=filterDynamicPositionByAxis(e,"y");return{fullSize:n,leftAndTop:s.concat(o),rightAndBottom:i.concat(d).concat(l).concat(u),chartArea:filterByPosition(e,"chartArea"),vertical:s.concat(i).concat(d),horizontal:o.concat(l).concat(u)}}function getCombinedMax(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function updateMaxPadding(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function updateDims(t,e,n,s){const{pos:i,box:o}=n,l=t.maxPadding;if(!isObject(i)){n.size&&(t[i]-=n.size);const g=s[n.stack]||{size:0,count:1};g.size=Math.max(g.size,n.horizontal?o.height:o.width),n.size=g.size/g.count,t[i]+=n.size}o.getPadding&&updateMaxPadding(l,o.getPadding());const u=Math.max(0,e.outerWidth-getCombinedMax(l,t,"left","right")),d=Math.max(0,e.outerHeight-getCombinedMax(l,t,"top","bottom")),f=u!==t.w,m=d!==t.h;return t.w=u,t.h=d,n.horizontal?{same:f,other:m}:{same:m,other:f}}function handleMaxPadding(t){const e=t.maxPadding;function n(s){const i=Math.max(e[s]-t[s],0);return t[s]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function getMargins(t,e){const n=e.maxPadding;function s(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(l=>{o[l]=Math.max(e[l],n[l])}),o}return s(t?["left","right"]:["top","bottom"])}function fitBoxes(t,e,n,s){const i=[];let o,l,u,d,f,m;for(o=0,l=t.length,f=0;o<l;++o){u=t[o],d=u.box,d.update(u.width||e.w,u.height||e.h,getMargins(u.horizontal,e));const{same:g,other:y}=updateDims(e,n,u,s);f|=g&&i.length,m=m||y,d.fullSize||i.push(u)}return f&&fitBoxes(i,e,n,s)||m}function setBoxDims(t,e,n,s,i){t.top=n,t.left=e,t.right=e+s,t.bottom=n+i,t.width=s,t.height=i}function placeBoxes(t,e,n,s){const i=n.padding;let{x:o,y:l}=e;for(const u of t){const d=u.box,f=s[u.stack]||{placed:0,weight:1},m=u.stackWeight/f.weight||1;if(u.horizontal){const g=e.w*m,y=f.size||d.height;defined(f.start)&&(l=f.start),d.fullSize?setBoxDims(d,i.left,l,n.outerWidth-i.right-i.left,y):setBoxDims(d,e.left+f.placed,l,g,y),f.start=l,f.placed+=g,l=d.bottom}else{const g=e.h*m,y=f.size||d.width;defined(f.start)&&(o=f.start),d.fullSize?setBoxDims(d,o,i.top,y,n.outerHeight-i.bottom-i.top):setBoxDims(d,o,e.top+f.placed,y,g),f.start=o,f.placed+=g,o=d.right}}e.x=o,e.y=l}var layouts={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const i=toPadding(t.options.layout.padding),o=Math.max(e-i.width,0),l=Math.max(n-i.height,0),u=buildLayoutBoxes(t.boxes),d=u.vertical,f=u.horizontal;each(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const m=d.reduce((w,A)=>A.box.options&&A.box.options.display===!1?w:w+1,0)||1,g=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/m,hBoxMaxHeight:l/2}),y=Object.assign({},i);updateMaxPadding(y,toPadding(s));const v=Object.assign({maxPadding:y,w:o,h:l,x:i.left,y:i.top},i),E=setLayoutDims(d.concat(f),g);fitBoxes(u.fullSize,v,g,E),fitBoxes(d,v,g,E),fitBoxes(f,v,g,E)&&fitBoxes(d,v,g,E),handleMaxPadding(v),placeBoxes(u.leftAndTop,v,g,E),v.x+=v.w,v.y+=v.h,placeBoxes(u.rightAndBottom,v,g,E),t.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},each(u.chartArea,w=>{const A=w.box;Object.assign(A,t.chartArea),A.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,i){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(e){return!0}updateConfig(e){}}class BasicPlatform extends BasePlatform{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=t=>t===null||t==="";function initCanvas(t,e){const n=t.style,s=t.getAttribute("height"),i=t.getAttribute("width");if(t[EXPANDO_KEY]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",isNullOrEmpty(i)){const o=readUsedSize(t,"width");o!==void 0&&(t.width=o)}if(isNullOrEmpty(s))if(t.style.height==="")t.height=t.width/(e||2);else{const o=readUsedSize(t,"height");o!==void 0&&(t.height=o)}return t}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(t,e,n){t&&t.addEventListener(e,n,eventListenerOptions)}function removeListener(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,eventListenerOptions)}function fromNativeEvent(t,e){const n=EVENT_TYPES[t.type]||t.type,{x:s,y:i}=getRelativePosition(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:i!==void 0?i:null}}function nodeListContains(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function createAttachObserver(t,e,n){const s=t.canvas,i=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||nodeListContains(u.addedNodes,s),l=l&&!nodeListContains(u.removedNodes,s);l&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function createDetachObserver(t,e,n){const s=t.canvas,i=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||nodeListContains(u.removedNodes,s),l=l&&!nodeListContains(u.addedNodes,s);l&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const t=window.devicePixelRatio;t!==oldDevicePixelRatio&&(oldDevicePixelRatio=t,drpListeningCharts.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function listenDevicePixelRatioChanges(t,e){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(t,e)}function unlistenDevicePixelRatioChanges(t){drpListeningCharts.delete(t),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(t,e,n){const s=t.canvas,i=s&&_getParentNode(s);if(!i)return;const o=throttled((u,d)=>{const f=i.clientWidth;n(u,d),f<i.clientWidth&&n()},window),l=new ResizeObserver(u=>{const d=u[0],f=d.contentRect.width,m=d.contentRect.height;f===0&&m===0||o(f,m)});return l.observe(i),listenDevicePixelRatioChanges(t,o),l}function releaseObserver(t,e,n){n&&n.disconnect(),e==="resize"&&unlistenDevicePixelRatioChanges(t)}function createProxyAndListen(t,e,n){const s=t.canvas,i=throttled(o=>{t.ctx!==null&&n(fromNativeEvent(o,t))},t);return addListener(s,e,i),i}class DomPlatform extends BasePlatform{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(initCanvas(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[EXPANDO_KEY])return!1;const s=n[EXPANDO_KEY].initial;["height","width"].forEach(o=>{const l=s[o];isNullOrUndef(l)?n.removeAttribute(o):n.setAttribute(o,l)});const i=s.style||{};return Object.keys(i).forEach(o=>{n.style[o]=i[o]}),n.width=n.width,delete n[EXPANDO_KEY],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),l={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[n]||createProxyAndListen;i[n]=l(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),i=s[n];if(!i)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[n]||removeListener)(e,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,i){return getMaximumSize(e,n,s,i)}isAttached(e){const n=e&&_getParentNode(e);return!!(n&&n.isConnected)}}function _detectPlatform(t){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?BasicPlatform:DomPlatform}var Vl;let Element$1=(Vl=class{constructor(){Ye(this,"x");Ye(this,"y");Ye(this,"active",!1);Ye(this,"options");Ye(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const i={};return e.forEach(o=>{i[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),i}},Ye(Vl,"defaults",{}),Ye(Vl,"defaultRoutes"),Vl);function autoSkip(t,e){const n=t.options.ticks,s=determineMaxTicks(t),i=Math.min(n.maxTicksLimit||s,s),o=n.major.enabled?getMajorIndices(e):[],l=o.length,u=o[0],d=o[l-1],f=[];if(l>i)return skipMajors(e,f,o,l/i),f;const m=calculateSpacing(o,e,i);if(l>0){let g,y;const v=l>1?Math.round((d-u)/(l-1)):null;for(skip(e,f,m,isNullOrUndef(v)?0:u-v,u),g=0,y=l-1;g<y;g++)skip(e,f,m,o[g],o[g+1]);return skip(e,f,m,d,isNullOrUndef(v)?e.length:d+v),f}return skip(e,f,m),f}function determineMaxTicks(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(s,i))}function calculateSpacing(t,e,n){const s=getEvenSpacing(t),i=e.length/n;if(!s)return Math.max(i,1);const o=_factorize(s);for(let l=0,u=o.length-1;l<u;l++){const d=o[l];if(d>i)return d}return Math.max(i,1)}function getMajorIndices(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function skipMajors(t,e,n,s){let i=0,o=n[0],l;for(s=Math.ceil(s),l=0;l<t.length;l++)l===o&&(e.push(t[l]),i++,o=n[i*s])}function skip(t,e,n,s,i){const o=valueOrDefault(s,0),l=Math.min(valueOrDefault(i,t.length),t.length);let u=0,d,f,m;for(n=Math.ceil(n),i&&(d=i-s,n=d/Math.floor(d/n)),m=o;m<0;)u++,m=Math.round(o+u*n);for(f=Math.max(o,0);f<l;f++)f===m&&(e.push(t[f]),u++,m=Math.round(o+u*n))}function getEvenSpacing(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const reverseAlign=t=>t==="left"?"right":t==="right"?"left":t,offsetFromEdge=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,getTicksLimit=(t,e)=>Math.min(e||t,t);function sample(t,e){const n=[],s=t.length/e,i=t.length;let o=0;for(;o<i;o+=s)n.push(t[Math.floor(o)]);return n}function getPixelForGridLine(t,e,n){const s=t.ticks.length,i=Math.min(e,s-1),o=t._startPixel,l=t._endPixel,u=1e-6;let d=t.getPixelForTick(i),f;if(!(n&&(s===1?f=Math.max(d-o,l-d):e===0?f=(t.getPixelForTick(1)-d)/2:f=(d-t.getPixelForTick(i-1))/2,d+=i<e?f:-f,d<o-u||d>l+u)))return d}function garbageCollect(t,e){each(t,n=>{const s=n.gc,i=s.length/2;let o;if(i>e){for(o=0;o<i;++o)delete n.data[s[o]];s.splice(0,i)}})}function getTickMarkLength(t){return t.drawTicks?t.tickLength:0}function getTitleHeight(t,e){if(!t.display)return 0;const n=toFont(t.font,e),s=toPadding(t.padding);return(isArray(t.text)?t.text.length:1)*n.lineHeight+s.height}function createScaleContext(t,e){return createContext(t,{scale:e,type:"scale"})}function createTickContext(t,e,n){return createContext(t,{tick:n,index:e,type:"tick"})}function titleAlign(t,e,n){let s=_toLeftRightCenter(t);return(n&&e!=="right"||!n&&e==="right")&&(s=reverseAlign(s)),s}function titleArgs(t,e,n,s){const{top:i,left:o,bottom:l,right:u,chart:d}=t,{chartArea:f,scales:m}=d;let g=0,y,v,E;const w=l-i,A=u-o;if(t.isHorizontal()){if(v=_alignStartEnd(s,o,u),isObject(n)){const I=Object.keys(n)[0],D=n[I];E=m[I].getPixelForValue(D)+w-e}else n==="center"?E=(f.bottom+f.top)/2+w-e:E=offsetFromEdge(t,n,e);y=u-o}else{if(isObject(n)){const I=Object.keys(n)[0],D=n[I];v=m[I].getPixelForValue(D)-A+e}else n==="center"?v=(f.left+f.right)/2-A+e:v=offsetFromEdge(t,n,e);E=_alignStartEnd(s,l,i),g=n==="left"?-HALF_PI:HALF_PI}return{titleX:v,titleY:E,maxWidth:y,rotation:g}}class Scale extends Element$1{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return e=finiteOrDefault(e,Number.POSITIVE_INFINITY),n=finiteOrDefault(n,Number.NEGATIVE_INFINITY),s=finiteOrDefault(s,Number.POSITIVE_INFINITY),i=finiteOrDefault(i,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(e,s),max:finiteOrDefault(n,i),minDefined:isNumberFinite(e),maxDefined:isNumberFinite(n)}}getMinMax(e){let{min:n,max:s,minDefined:i,maxDefined:o}=this.getUserBounds(),l;if(i&&o)return{min:n,max:s};const u=this.getMatchingVisibleMetas();for(let d=0,f=u.length;d<f;++d)l=u[d].controller.getMinMax(this,e),i||(n=Math.min(n,l.min)),o||(s=Math.max(s,l.max));return n=o&&n>s?s:n,s=i&&n>s?n:s,{min:finiteOrDefault(n,finiteOrDefault(s,n)),max:finiteOrDefault(s,finiteOrDefault(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:i,grace:o,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=u<this.ticks.length;this._convertTicksToLabels(d?sample(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),callback(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,i,o;for(s=0,i=e.length;s<i;s++)o=e[s],o.label=callback(n.callback,[o.value,s,e],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=getTicksLimit(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,o=n.maxRotation;let l=i,u,d,f;if(!this._isVisible()||!n.display||i>=o||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const m=this._getLabelSizes(),g=m.widest.width,y=m.highest.height,v=_limitValue(this.chart.width-g,0,this.maxWidth);u=e.offset?this.maxWidth/s:v/(s-1),g+6>u&&(u=v/(s-(e.offset?.5:1)),d=this.maxHeight-getTickMarkLength(e.grid)-n.padding-getTitleHeight(e.title,this.chart.options.font),f=Math.sqrt(g*g+y*y),l=toDegrees(Math.min(Math.asin(_limitValue((m.highest.height+6)/u,-1,1)),Math.asin(_limitValue(d/f,-1,1))-Math.asin(_limitValue(y/f,-1,1)))),l=Math.max(i,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:o}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const d=getTitleHeight(i,n.options.font);if(u?(e.width=this.maxWidth,e.height=getTickMarkLength(o)+d):(e.height=this.maxHeight,e.width=getTickMarkLength(o)+d),s.display&&this.ticks.length){const{first:f,last:m,widest:g,highest:y}=this._getLabelSizes(),v=s.padding*2,E=toRadians(this.labelRotation),w=Math.cos(E),A=Math.sin(E);if(u){const I=s.mirror?0:A*g.width+w*y.height;e.height=Math.min(this.maxHeight,e.height+I+v)}else{const I=s.mirror?0:w*g.width+A*y.height;e.width=Math.min(this.maxWidth,e.width+I+v)}this._calculatePadding(f,m,A,w)}}this._handleMargins(),u?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,i){const{ticks:{align:o,padding:l},position:u}=this.options,d=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,v=0;d?f?(y=i*e.width,v=s*n.height):(y=s*e.height,v=i*n.width):o==="start"?v=n.width:o==="end"?y=e.width:o!=="inner"&&(y=e.width/2,v=n.width/2),this.paddingLeft=Math.max((y-m+l)*this.width/(this.width-m),0),this.paddingRight=Math.max((v-g+l)*this.width/(this.width-g),0)}else{let m=n.height/2,g=e.height/2;o==="start"?(m=0,g=e.height):o==="end"&&(m=n.height,g=0),this.paddingTop=m+l,this.paddingBottom=g+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)isNullOrUndef(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=sample(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:i,_longestTextCache:o}=this,l=[],u=[],d=Math.floor(n/getTicksLimit(n,s));let f=0,m=0,g,y,v,E,w,A,I,D,V,Y,j;for(g=0;g<n;g+=d){if(E=e[g].label,w=this._resolveTickFontOptions(g),i.font=A=w.string,I=o[A]=o[A]||{data:{},gc:[]},D=w.lineHeight,V=Y=0,!isNullOrUndef(E)&&!isArray(E))V=_measureText(i,I.data,I.gc,V,E),Y=D;else if(isArray(E))for(y=0,v=E.length;y<v;++y)j=E[y],!isNullOrUndef(j)&&!isArray(j)&&(V=_measureText(i,I.data,I.gc,V,j),Y+=D);l.push(V),u.push(Y),f=Math.max(V,f),m=Math.max(Y,m)}garbageCollect(o,n);const H=l.indexOf(f),S=u.indexOf(m),T=P=>({width:l[P]||0,height:u[P]||0});return{first:T(0),last:T(n-1),widest:T(H),highest:T(S),widths:l,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=createTickContext(this.getContext(),e,s))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=toRadians(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,u=o?o.widest.width+l:0,d=o?o.highest.height+l:0;return this.isHorizontal()?d*s>u*i?u/s:d/i:d*i<u*s?d/s:u/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,i=this.options,{grid:o,position:l,border:u}=i,d=o.offset,f=this.isHorizontal(),g=this.ticks.length+(d?1:0),y=getTickMarkLength(o),v=[],E=u.setContext(this.getContext()),w=E.display?E.width:0,A=w/2,I=function(oe){return _alignPixel(s,oe,w)};let D,V,Y,j,H,S,T,P,U,J,W,K;if(l==="top")D=I(this.bottom),S=this.bottom-y,P=D-A,J=I(e.top)+A,K=e.bottom;else if(l==="bottom")D=I(this.top),J=e.top,K=I(e.bottom)-A,S=D+A,P=this.top+y;else if(l==="left")D=I(this.right),H=this.right-y,T=D-A,U=I(e.left)+A,W=e.right;else if(l==="right")D=I(this.left),U=e.left,W=I(e.right)-A,H=D+A,T=this.left+y;else if(n==="x"){if(l==="center")D=I((e.top+e.bottom)/2+.5);else if(isObject(l)){const oe=Object.keys(l)[0],ce=l[oe];D=I(this.chart.scales[oe].getPixelForValue(ce))}J=e.top,K=e.bottom,S=D+A,P=S+y}else if(n==="y"){if(l==="center")D=I((e.left+e.right)/2);else if(isObject(l)){const oe=Object.keys(l)[0],ce=l[oe];D=I(this.chart.scales[oe].getPixelForValue(ce))}H=D-A,T=H-y,U=e.left,W=e.right}const le=valueOrDefault(i.ticks.maxTicksLimit,g),ge=Math.max(1,Math.ceil(g/le));for(V=0;V<g;V+=ge){const oe=this.getContext(V),ce=o.setContext(oe),ie=u.setContext(oe),Ne=ce.lineWidth,re=ce.color,_e=ie.dash||[],Se=ie.dashOffset,Re=ce.tickWidth,Be=ce.tickColor,Ie=ce.tickBorderDash||[],je=ce.tickBorderDashOffset;Y=getPixelForGridLine(this,V,d),Y!==void 0&&(j=_alignPixel(s,Y,Ne),f?H=T=U=W=j:S=P=J=K=j,v.push({tx1:H,ty1:S,tx2:T,ty2:P,x1:U,y1:J,x2:W,y2:K,width:Ne,color:re,borderDash:_e,borderDashOffset:Se,tickWidth:Re,tickColor:Be,tickBorderDash:Ie,tickBorderDashOffset:je}))}return this._ticksLength=g,this._borderValue=D,v}_computeLabelItems(e){const n=this.axis,s=this.options,{position:i,ticks:o}=s,l=this.isHorizontal(),u=this.ticks,{align:d,crossAlign:f,padding:m,mirror:g}=o,y=getTickMarkLength(s.grid),v=y+m,E=g?-m:v,w=-toRadians(this.labelRotation),A=[];let I,D,V,Y,j,H,S,T,P,U,J,W,K="middle";if(i==="top")H=this.bottom-E,S=this._getXAxisLabelAlignment();else if(i==="bottom")H=this.top+E,S=this._getXAxisLabelAlignment();else if(i==="left"){const ge=this._getYAxisLabelAlignment(y);S=ge.textAlign,j=ge.x}else if(i==="right"){const ge=this._getYAxisLabelAlignment(y);S=ge.textAlign,j=ge.x}else if(n==="x"){if(i==="center")H=(e.top+e.bottom)/2+v;else if(isObject(i)){const ge=Object.keys(i)[0],oe=i[ge];H=this.chart.scales[ge].getPixelForValue(oe)+v}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")j=(e.left+e.right)/2-v;else if(isObject(i)){const ge=Object.keys(i)[0],oe=i[ge];j=this.chart.scales[ge].getPixelForValue(oe)}S=this._getYAxisLabelAlignment(y).textAlign}n==="y"&&(d==="start"?K="top":d==="end"&&(K="bottom"));const le=this._getLabelSizes();for(I=0,D=u.length;I<D;++I){V=u[I],Y=V.label;const ge=o.setContext(this.getContext(I));T=this.getPixelForTick(I)+o.labelOffset,P=this._resolveTickFontOptions(I),U=P.lineHeight,J=isArray(Y)?Y.length:1;const oe=J/2,ce=ge.color,ie=ge.textStrokeColor,Ne=ge.textStrokeWidth;let re=S;l?(j=T,S==="inner"&&(I===D-1?re=this.options.reverse?"left":"right":I===0?re=this.options.reverse?"right":"left":re="center"),i==="top"?f==="near"||w!==0?W=-J*U+U/2:f==="center"?W=-le.highest.height/2-oe*U+U:W=-le.highest.height+U/2:f==="near"||w!==0?W=U/2:f==="center"?W=le.highest.height/2-oe*U:W=le.highest.height-J*U,g&&(W*=-1),w!==0&&!ge.showLabelBackdrop&&(j+=U/2*Math.sin(w))):(H=T,W=(1-J)*U/2);let _e;if(ge.showLabelBackdrop){const Se=toPadding(ge.backdropPadding),Re=le.heights[I],Be=le.widths[I];let Ie=W-Se.top,je=0-Se.left;switch(K){case"middle":Ie-=Re/2;break;case"bottom":Ie-=Re;break}switch(S){case"center":je-=Be/2;break;case"right":je-=Be;break;case"inner":I===D-1?je-=Be:I>0&&(je-=Be/2);break}_e={left:je,top:Ie,width:Be+Se.width,height:Re+Se.height,color:ge.backdropColor}}A.push({label:Y,font:P,textOffset:W,options:{rotation:w,color:ce,strokeColor:ie,strokeWidth:Ne,textAlign:re,textBaseline:K,translation:[j,H],backdrop:_e}})}return A}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-toRadians(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:i,padding:o}}=this.options,l=this._getLabelSizes(),u=e+o,d=l.widest.width;let f,m;return n==="left"?i?(m=this.right+o,s==="near"?f="left":s==="center"?(f="center",m+=d/2):(f="right",m+=d)):(m=this.right-u,s==="near"?f="right":s==="center"?(f="center",m-=d/2):(f="left",m=this.left)):n==="right"?i?(m=this.left+o,s==="near"?f="right":s==="center"?(f="center",m-=d/2):(f="left",m-=d)):(m=this.left+u,s==="near"?f="left":s==="center"?(f="center",m+=d/2):(f="right",m=this.right)):f="right",{textAlign:f,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:i,width:o,height:l}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,i,o,l),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(o=>o.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const u=(d,f,m)=>{!m.width||!m.color||(s.save(),s.lineWidth=m.width,s.strokeStyle=m.color,s.setLineDash(m.borderDash||[]),s.lineDashOffset=m.borderDashOffset,s.beginPath(),s.moveTo(d.x,d.y),s.lineTo(f.x,f.y),s.stroke(),s.restore())};if(n.display)for(o=0,l=i.length;o<l;++o){const d=i[o];n.drawOnChartArea&&u({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&u({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:i}}=this,o=s.setContext(this.getContext()),l=s.display?o.width:0;if(!l)return;const u=i.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let f,m,g,y;this.isHorizontal()?(f=_alignPixel(e,this.left,l)-l/2,m=_alignPixel(e,this.right,u)+u/2,g=y=d):(g=_alignPixel(e,this.top,l)-l/2,y=_alignPixel(e,this.bottom,u)+u/2,f=m=d),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(f,g),n.lineTo(m,y),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&clipArea(s,i);const o=this.getLabelItems(e);for(const l of o){const u=l.options,d=l.font,f=l.label,m=l.textOffset;renderText(s,f,0,m,d,u)}i&&unclipArea(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const o=toFont(s.font),l=toPadding(s.padding),u=s.align;let d=o.lineHeight/2;n==="bottom"||n==="center"||isObject(n)?(d+=l.bottom,isArray(s.text)&&(d+=o.lineHeight*(s.text.length-1))):d+=l.top;const{titleX:f,titleY:m,maxWidth:g,rotation:y}=titleArgs(this,d,n,u);renderText(e,s.text,0,0,o,{color:s.color,maxWidth:g,rotation:y,textAlign:titleAlign(u,n,i),textBaseline:"middle",translation:[f,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=valueOrDefault(e.grid&&e.grid.z,-1),i=valueOrDefault(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let o,l;for(o=0,l=n.length;o<l;++o){const u=n[o];u[s]===this.id&&(!e||u.type===e)&&i.push(u)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return toFont(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class TypedRegistry{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;isIChartComponent(n)&&(s=this.register(n));const i=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,registerDefaults(e,l,s),this.override&&defaults.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,i=this.scope;s in n&&delete n[s],i&&s in defaults[i]&&(delete defaults[i][s],this.override&&delete overrides[s])}}function registerDefaults(t,e,n){const s=merge(Object.create(null),[n?defaults.get(n):{},defaults.get(e),t.defaults]);defaults.set(e,s),t.defaultRoutes&&routeDefaults(e,t.defaultRoutes),t.descriptors&&defaults.describe(e,t.descriptors)}function routeDefaults(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),i=s.pop(),o=[t].concat(s).join("."),l=e[n].split("."),u=l.pop(),d=l.join(".");defaults.route(o,i,d,u)})}function isIChartComponent(t){return"id"in t&&"defaults"in t}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element$1,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(i=>{const o=s||this._getRegistryForType(i);s||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):each(i,l=>{const u=s||this._getRegistryForType(l);this._exec(e,u,l)})})}_exec(e,n,s){const i=_capitalize(e);callback(s["before"+i],[],s),n[e](s),callback(s["after"+i],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(e,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=i?this._descriptors(e).filter(i):this._descriptors(e),l=this._notify(o,e,n,s);return n==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,n,s,i){i=i||{};for(const o of e){const l=o.plugin,u=l[s],d=[n,i,o.options];if(callback(u,d,l)===!1&&i.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,i=valueOrDefault(s.options&&s.options.plugins,{}),o=allPlugins(s);return i===!1&&!n?[]:createDescriptors(e,o,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,i=(o,l)=>o.filter(u=>!l.some(d=>u.plugin.id===d.plugin.id));this._notify(i(n,s),e,"stop"),this._notify(i(s,n),e,"start")}}function allPlugins(t){const e={},n=[],s=Object.keys(registry.plugins.items);for(let o=0;o<s.length;o++)n.push(registry.getPlugin(s[o]));const i=t.plugins||[];for(let o=0;o<i.length;o++){const l=i[o];n.indexOf(l)===-1&&(n.push(l),e[l.id]=!0)}return{plugins:n,localIds:e}}function getOpts(t,e){return!e&&t===!1?null:t===!0?{}:t}function createDescriptors(t,{plugins:e,localIds:n},s,i){const o=[],l=t.getContext();for(const u of e){const d=u.id,f=getOpts(s[d],i);f!==null&&o.push({plugin:u,options:pluginOpts(t.config,{plugin:u,local:n[d]},f,l)})}return o}function pluginOpts(t,{plugin:e,local:n},s,i){const o=t.pluginScopeKeys(e),l=t.getOptionScopes(s,o);return n&&e.defaults&&l.push(e.defaults),t.createResolver(l,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(t,e){const n=defaults.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function getAxisFromDefaultScaleID(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function getDefaultScaleIDFromAxis(t,e){return t===e?"_index_":"_value_"}function idMatchesAxis(t){if(t==="x"||t==="y"||t==="r")return t}function axisFromPosition(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function determineAxis(t,...e){if(idMatchesAxis(t))return t;for(const n of e){const s=n.axis||axisFromPosition(n.position)||t.length>1&&idMatchesAxis(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function getAxisFromDataset(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function retrieveAxisFromDatasets(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return getAxisFromDataset(t,"x",n[0])||getAxisFromDataset(t,"y",n[0])}return{}}function mergeScaleConfig(t,e){const n=overrides[t.type]||{scales:{}},s=e.scales||{},i=getIndexAxis(t.type,e),o=Object.create(null);return Object.keys(s).forEach(l=>{const u=s[l];if(!isObject(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=determineAxis(l,u,retrieveAxisFromDatasets(l,t),defaults.scales[u.type]),f=getDefaultScaleIDFromAxis(d,i),m=n.scales||{};o[l]=mergeIf(Object.create(null),[{axis:d},u,m[d],m[f]])}),t.data.datasets.forEach(l=>{const u=l.type||t.type,d=l.indexAxis||getIndexAxis(u,e),m=(overrides[u]||{}).scales||{};Object.keys(m).forEach(g=>{const y=getAxisFromDefaultScaleID(g,d),v=l[y+"AxisID"]||y;o[v]=o[v]||Object.create(null),mergeIf(o[v],[{axis:y},s[v],m[g]])})}),Object.keys(o).forEach(l=>{const u=o[l];mergeIf(u,[defaults.scales[u.type],defaults.scale])}),o}function initOptions(t){const e=t.options||(t.options={});e.plugins=valueOrDefault(e.plugins,{}),e.scales=mergeScaleConfig(t,e)}function initData(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function initConfig(t){return t=t||{},t.data=initData(t.data),initOptions(t),t}const keyCache=new Map,keysCached=new Set;function cachedKeys(t,e){let n=keyCache.get(t);return n||(n=e(),keyCache.set(t,n),keysCached.add(n)),n}const addIfFound=(t,e,n)=>{const s=resolveObjectKey(e,n);s!==void 0&&t.add(s)};class Config{constructor(e){this._config=initConfig(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=initData(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),initOptions(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return cachedKeys(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return cachedKeys(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return cachedKeys(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return cachedKeys(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let i=s.get(e);return(!i||n)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,n,s){const{options:i,type:o}=this,l=this._cachedScopes(e,s),u=l.get(n);if(u)return u;const d=new Set;n.forEach(m=>{e&&(d.add(e),m.forEach(g=>addIfFound(d,e,g))),m.forEach(g=>addIfFound(d,i,g)),m.forEach(g=>addIfFound(d,overrides[o]||{},g)),m.forEach(g=>addIfFound(d,defaults,g)),m.forEach(g=>addIfFound(d,descriptors,g))});const f=Array.from(d);return f.length===0&&f.push(Object.create(null)),keysCached.has(n)&&l.set(n,f),f}chartOptionScopes(){const{options:e,type:n}=this;return[e,overrides[n]||{},defaults.datasets[n]||{},{type:n},defaults,descriptors]}resolveNamedOptions(e,n,s,i=[""]){const o={$shared:!0},{resolver:l,subPrefixes:u}=getResolver(this._resolverCache,e,i);let d=l;if(needContext(l,n)){o.$shared=!1,s=isFunction(s)?s():s;const f=this.createResolver(e,s,u);d=_attachContext(l,s,f)}for(const f of n)o[f]=d[f];return o}createResolver(e,n,s=[""],i){const{resolver:o}=getResolver(this._resolverCache,e,s);return isObject(n)?_attachContext(o,n,void 0,i):o}}function getResolver(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const i=n.join();let o=s.get(i);return o||(o={resolver:_createResolver(e,n),subPrefixes:n.filter(u=>!u.toLowerCase().includes("hover"))},s.set(i,o)),o}const hasFunction=t=>isObject(t)&&Object.getOwnPropertyNames(t).some(e=>isFunction(t[e]));function needContext(t,e){const{isScriptable:n,isIndexable:s}=_descriptors(t);for(const i of e){const o=n(i),l=s(i),u=(l||o)&&t[i];if(o&&(isFunction(u)||hasFunction(u))||l&&isArray(u))return!0}return!1}var version="4.5.0";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(t,e){return t==="top"||t==="bottom"||KNOWN_POSITIONS.indexOf(t)===-1&&e==="x"}function compare2Level(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function onAnimationsComplete(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),callback(n&&n.onComplete,[t],e)}function onAnimationProgress(t){const e=t.chart,n=e.options.animation;callback(n&&n.onProgress,[t],e)}function getCanvas(t){return _isDomSupported()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const instances={},getChart=t=>{const e=getCanvas(t);return Object.values(instances).filter(n=>n.canvas===e).pop()};function moveNumericKeys(t,e,n){const s=Object.keys(t);for(const i of s){const o=+i;if(o>=e){const l=t[i];delete t[i],(n>0||o>e)&&(t[o+n]=l)}}}function determineLastEvent(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}class Chart{static register(...e){registry.add(...e),invalidatePlugins()}static unregister(...e){registry.remove(...e),invalidatePlugins()}constructor(e,n){const s=this.config=new Config(n),i=getCanvas(e),o=getChart(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||_detectPlatform(i)),this.platform.updateConfig(s);const u=this.platform.acquireContext(i,l.aspectRatio),d=u&&u.canvas,f=d&&d.height,m=d&&d.width;if(this.id=uid(),this.ctx=u,this.canvas=d,this.width=m,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce(g=>this.update(g),l.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!u||!d){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:i,_aspectRatio:o}=this;return isNullOrUndef(e)?n&&o?o:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return registry}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(e,n){animator.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,i=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(i,e,n,o),u=s.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,retinaScale(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),callback(s.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};each(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,i=Object.keys(s).reduce((l,u)=>(l[u]=!1,l),{});let o=[];n&&(o=o.concat(Object.keys(n).map(l=>{const u=n[l],d=determineAxis(l,u),f=d==="r",m=d==="x";return{options:u,dposition:f?"chartArea":m?"bottom":"left",dtype:f?"radialLinear":m?"category":"linear"}}))),each(o,l=>{const u=l.options,d=u.id,f=determineAxis(d,u),m=valueOrDefault(u.type,l.dtype);(u.position===void 0||positionIsHorizontal(u.position,f)!==positionIsHorizontal(l.dposition))&&(u.position=l.dposition),i[d]=!0;let g=null;if(d in s&&s[d].type===m)g=s[d];else{const y=registry.getScale(m);g=new y({id:d,type:m,ctx:this.ctx,chart:this}),s[g.id]=g}g.init(u,e)}),each(i,(l,u)=>{l||delete s[u]}),each(s,l=>{layouts.configure(this,l,l.options),layouts.addBox(this,l)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((i,o)=>i.index-o.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,i)=>{n.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const o=n[s];let l=this.getDatasetMeta(s);const u=o.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(s),l=this.getDatasetMeta(s)),l.type=u,l.indexAxis=o.indexAxis||getIndexAxis(u,this.options),l.order=o.order||0,l.index=s,l.label=""+o.label,l.visible=this.isDatasetVisible(s),l.controller)l.controller.updateIndex(s),l.controller.linkScales();else{const d=registry.getController(u),{datasetElementType:f,dataElementType:m}=defaults.datasets[u];Object.assign(d,{dataElementType:registry.getElement(m),datasetElementType:f&&registry.getElement(f)}),l.controller=new d(this,s),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){each(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,m=this.data.datasets.length;f<m;f++){const{controller:g}=this.getDatasetMeta(f),y=!i&&o.indexOf(g)===-1;g.buildOrUpdateElements(y),l=Math.max(+g.getMaxOverflow(),l)}l=this._minPadding=s.layout.autoPadding?l:0,this._updateLayout(l),i||each(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(compare2Level("z","_idx"));const{_active:u,_lastEvent:d}=this;d?this._eventHandler(d,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){each(this.scales,e=>{layouts.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!setsEqual(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:o}of n){const l=s==="_removeElements"?-o:o;moveNumericKeys(e,i,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=o=>new Set(e.filter(l=>l[0]===o).map((l,u)=>u+","+l.splice(1).join(","))),i=s(0);for(let o=1;o<n;o++)if(!setsEqual(i,s(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],each(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,isFunction(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let i,o;for(i=0,o=n.length;i<o;++i){const l=n[i];(!e||l.visible)&&s.push(l)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},i=getDatasetClipArea(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&clipArea(n,i),e.controller.draw(),i&&unclipArea(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return _isPointInArea(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,i){const o=Interaction.modes[n];return typeof o=="function"?o(this,e,s,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let i=s.filter(o=>o&&o._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const i=s?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,i);defined(n)?(o.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),l.update(o,{visible:s}),this.update(u=>u.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),animator.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),clearCanvas(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(o,l)=>{n.addEventListener(this,o,l),e[o]=l},i=(o,l,u)=>{o.offsetX=l,o.offsetY=u,this._eventHandler(o)};each(this.options.events,o=>s(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(d,f)=>{n.addEventListener(this,d,f),e[d]=f},i=(d,f)=>{e[d]&&(n.removeEventListener(this,d,f),delete e[d])},o=(d,f)=>{this.canvas&&this.resize(d,f)};let l;const u=()=>{i("attach",u),this.attached=!0,this.resize(),s("resize",o),s("detach",l)};l=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),s("attach",u)},n.isAttached(this.canvas)?u():l()}unbindEvents(){each(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},each(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const i=s?"set":"remove";let o,l,u,d;for(n==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),u=0,d=e.length;u<d;++u){l=e[u];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[i+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:o,index:l})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[l],index:l}});!_elementsEqual(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const i=this.options.hover,o=(d,f)=>d.filter(m=>!f.some(g=>m.datasetIndex===g.datasetIndex&&m.index===g.index)),l=o(n,e),u=s?e:o(e,n);l.length&&this.updateHoverStyle(l,i.mode,!1),u.length&&i.mode&&this.updateHoverStyle(u,i.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const o=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(o||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:i=[],options:o}=this,l=n,u=this._getActiveElements(e,i,s,l),d=_isClickEvent(e),f=determineLastEvent(e,this._lastEvent,s,d);s&&(this._lastEvent=null,callback(o.onHover,[e,u,this],this),d&&callback(o.onClick,[e,u,this],this));const m=!_elementsEqual(u,i);return(m||n)&&(this._active=u,this._updateHoverStyles(u,i,n)),this._lastEvent=f,m}_getActiveElements(e,n,s,i){if(e.type==="mouseout")return[];if(!s)return n;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,i)}}Ye(Chart,"defaults",defaults),Ye(Chart,"instances",instances),Ye(Chart,"overrides",overrides),Ye(Chart,"registry",registry),Ye(Chart,"version",version),Ye(Chart,"getChart",getChart);function invalidatePlugins(){return each(Chart.instances,t=>t._plugins.invalidate())}function clipSelf(t,e,n){const{startAngle:s,x:i,y:o,outerRadius:l,innerRadius:u,options:d}=e,{borderWidth:f,borderJoinStyle:m}=d,g=Math.min(f/l,_normalizeAngle(s-n));if(t.beginPath(),t.arc(i,o,l-f/2,s+g/2,n-g/2),u>0){const y=Math.min(f/u,_normalizeAngle(s-n));t.arc(i,o,u+f/2,n-y/2,s+y/2,!0)}else{const y=Math.min(f/2,l*_normalizeAngle(s-n));if(m==="round")t.arc(i,o,y,n-PI/2,s+PI/2,!0);else if(m==="bevel"){const v=2*y*y,E=-v*Math.cos(n+PI/2)+i,w=-v*Math.sin(n+PI/2)+o,A=v*Math.cos(s+PI/2)+i,I=v*Math.sin(s+PI/2)+o;t.lineTo(E,w),t.lineTo(A,I)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function clipArc(t,e,n){const{startAngle:s,pixelMargin:i,x:o,y:l,outerRadius:u,innerRadius:d}=e;let f=i/u;t.beginPath(),t.arc(o,l,u,s-f,n+f),d>i?(f=i/d,t.arc(o,l,d,n+f,s-f,!0)):t.arc(o,l,i,n+HALF_PI,s-HALF_PI),t.closePath(),t.clip()}function toRadiusCorners(t){return _readValueToProps(t,["outerStart","outerEnd","innerStart","innerEnd"])}function parseBorderRadius$1(t,e,n,s){const i=toRadiusCorners(t.options.borderRadius),o=(n-e)/2,l=Math.min(o,s*e/2),u=d=>{const f=(n-Math.min(o,d))*s/2;return _limitValue(d,0,Math.min(o,f))};return{outerStart:u(i.outerStart),outerEnd:u(i.outerEnd),innerStart:_limitValue(i.innerStart,0,l),innerEnd:_limitValue(i.innerEnd,0,l)}}function rThetaToXY(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function pathArc(t,e,n,s,i,o){const{x:l,y:u,startAngle:d,pixelMargin:f,innerRadius:m}=e,g=Math.max(e.outerRadius+s+n-f,0),y=m>0?m+s+n+f:0;let v=0;const E=i-d;if(s){const ge=m>0?m-s:0,oe=g>0?g-s:0,ce=(ge+oe)/2,ie=ce!==0?E*ce/(ce+s):E;v=(E-ie)/2}const w=Math.max(.001,E*g-n/PI)/g,A=(E-w)/2,I=d+A+v,D=i-A-v,{outerStart:V,outerEnd:Y,innerStart:j,innerEnd:H}=parseBorderRadius$1(e,y,g,D-I),S=g-V,T=g-Y,P=I+V/S,U=D-Y/T,J=y+j,W=y+H,K=I+j/J,le=D-H/W;if(t.beginPath(),o){const ge=(P+U)/2;if(t.arc(l,u,g,P,ge),t.arc(l,u,g,ge,U),Y>0){const Ne=rThetaToXY(T,U,l,u);t.arc(Ne.x,Ne.y,Y,U,D+HALF_PI)}const oe=rThetaToXY(W,D,l,u);if(t.lineTo(oe.x,oe.y),H>0){const Ne=rThetaToXY(W,le,l,u);t.arc(Ne.x,Ne.y,H,D+HALF_PI,le+Math.PI)}const ce=(D-H/y+(I+j/y))/2;if(t.arc(l,u,y,D-H/y,ce,!0),t.arc(l,u,y,ce,I+j/y,!0),j>0){const Ne=rThetaToXY(J,K,l,u);t.arc(Ne.x,Ne.y,j,K+Math.PI,I-HALF_PI)}const ie=rThetaToXY(S,I,l,u);if(t.lineTo(ie.x,ie.y),V>0){const Ne=rThetaToXY(S,P,l,u);t.arc(Ne.x,Ne.y,V,I-HALF_PI,P)}}else{t.moveTo(l,u);const ge=Math.cos(P)*g+l,oe=Math.sin(P)*g+u;t.lineTo(ge,oe);const ce=Math.cos(U)*g+l,ie=Math.sin(U)*g+u;t.lineTo(ce,ie)}t.closePath()}function drawArc(t,e,n,s,i){const{fullCircles:o,startAngle:l,circumference:u}=e;let d=e.endAngle;if(o){pathArc(t,e,n,s,d,i);for(let f=0;f<o;++f)t.fill();isNaN(u)||(d=l+(u%TAU||TAU))}return pathArc(t,e,n,s,d,i),t.fill(),d}function drawBorder(t,e,n,s,i){const{fullCircles:o,startAngle:l,circumference:u,options:d}=e,{borderWidth:f,borderJoinStyle:m,borderDash:g,borderDashOffset:y,borderRadius:v}=d,E=d.borderAlign==="inner";if(!f)return;t.setLineDash(g||[]),t.lineDashOffset=y,E?(t.lineWidth=f*2,t.lineJoin=m||"round"):(t.lineWidth=f,t.lineJoin=m||"bevel");let w=e.endAngle;if(o){pathArc(t,e,n,s,w,i);for(let A=0;A<o;++A)t.stroke();isNaN(u)||(w=l+(u%TAU||TAU))}E&&clipArc(t,e,w),d.selfJoin&&w-l>=PI&&v===0&&m!=="miter"&&clipSelf(t,e,w),o||(pathArc(t,e,n,s,w,i),t.stroke())}class ArcElement extends Element$1{constructor(n){super();Ye(this,"circumference");Ye(this,"endAngle");Ye(this,"fullCircles");Ye(this,"innerRadius");Ye(this,"outerRadius");Ye(this,"pixelMargin");Ye(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,i){const o=this.getProps(["x","y"],i),{angle:l,distance:u}=getAngleFromPoint(o,{x:n,y:s}),{startAngle:d,endAngle:f,innerRadius:m,outerRadius:g,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=(this.options.spacing+this.options.borderWidth)/2,E=valueOrDefault(y,f-d),w=_angleBetween(l,d,f)&&d!==f,A=E>=TAU||w,I=_isBetween(u,m+v,g+v);return A&&I}getCenterPoint(n){const{x:s,y:i,startAngle:o,endAngle:l,innerRadius:u,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:f,spacing:m}=this.options,g=(o+l)/2,y=(u+d+m+f)/2;return{x:s+Math.cos(g)*y,y:i+Math.sin(g)*y}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:i}=this,o=(s.offset||0)/4,l=(s.spacing||0)/2,u=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>TAU?Math.floor(i/TAU):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const d=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(d)*o,Math.sin(d)*o);const f=1-Math.sin(Math.min(PI,i||0)),m=o*f;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,drawArc(n,this,m,l,u),drawBorder(n,this,m,l,u),n.restore()}}Ye(ArcElement,"id","arc"),Ye(ArcElement,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Ye(ArcElement,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ye(ArcElement,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function setStyle(t,e,n=e){t.lineCap=valueOrDefault(n.borderCapStyle,e.borderCapStyle),t.setLineDash(valueOrDefault(n.borderDash,e.borderDash)),t.lineDashOffset=valueOrDefault(n.borderDashOffset,e.borderDashOffset),t.lineJoin=valueOrDefault(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=valueOrDefault(n.borderWidth,e.borderWidth),t.strokeStyle=valueOrDefault(n.borderColor,e.borderColor)}function lineTo(t,e,n){t.lineTo(n.x,n.y)}function getLineMethod(t){return t.stepped?_steppedLineTo:t.tension||t.cubicInterpolationMode==="monotone"?_bezierCurveTo:lineTo}function pathVars(t,e,n={}){const s=t.length,{start:i=0,end:o=s-1}=n,{start:l,end:u}=e,d=Math.max(i,l),f=Math.min(o,u),m=i<l&&o<l||i>u&&o>u;return{count:s,start:d,loop:e.loop,ilen:f<d&&!m?s+f-d:f-d}}function pathSegment(t,e,n,s){const{points:i,options:o}=e,{count:l,start:u,loop:d,ilen:f}=pathVars(i,n,s),m=getLineMethod(o);let{move:g=!0,reverse:y}=s||{},v,E,w;for(v=0;v<=f;++v)E=i[(u+(y?f-v:v))%l],!E.skip&&(g?(t.moveTo(E.x,E.y),g=!1):m(t,w,E,y,o.stepped),w=E);return d&&(E=i[(u+(y?f:0))%l],m(t,w,E,y,o.stepped)),!!d}function fastPathSegment(t,e,n,s){const i=e.points,{count:o,start:l,ilen:u}=pathVars(i,n,s),{move:d=!0,reverse:f}=s||{};let m=0,g=0,y,v,E,w,A,I;const D=Y=>(l+(f?u-Y:Y))%o,V=()=>{w!==A&&(t.lineTo(m,A),t.lineTo(m,w),t.lineTo(m,I))};for(d&&(v=i[D(0)],t.moveTo(v.x,v.y)),y=0;y<=u;++y){if(v=i[D(y)],v.skip)continue;const Y=v.x,j=v.y,H=Y|0;H===E?(j<w?w=j:j>A&&(A=j),m=(g*m+Y)/++g):(V(),t.lineTo(Y,j),E=H,g=0,w=A=j),I=j}V()}function _getSegmentMethod(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?fastPathSegment:pathSegment}function _getInterpolationMethod(t){return t.stepped?_steppedInterpolation:t.tension||t.cubicInterpolationMode==="monotone"?_bezierInterpolation:_pointInLine}function strokePathWithCache(t,e,n,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,s)&&i.closePath()),setStyle(t,e.options),t.stroke(i)}function strokePathDirect(t,e,n,s){const{segments:i,options:o}=e,l=_getSegmentMethod(e);for(const u of i)setStyle(t,o,u.style),t.beginPath(),l(t,e,u,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const usePath2D=typeof Path2D=="function";function draw(t,e,n,s){usePath2D&&!e.options.segment?strokePathWithCache(t,e,n,s):strokePathDirect(t,e,n,s)}class LineElement extends Element$1{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,s,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,i=e[n],o=this.points,l=_boundSegments(this,{property:n,start:i,end:i});if(!l.length)return;const u=[],d=_getInterpolationMethod(s);let f,m;for(f=0,m=l.length;f<m;++f){const{start:g,end:y}=l[f],v=o[g],E=o[y];if(v===E){u.push(v);continue}const w=Math.abs((i-v[n])/(E[n]-v[n])),A=d(v,E,w,s.stepped);A[n]=e[n],u.push(A)}return u.length===1?u[0]:u}pathSegment(e,n,s){return _getSegmentMethod(this)(e,this,n,s)}path(e,n,s){const i=this.segments,o=_getSegmentMethod(this);let l=this._loop;n=n||0,s=s||this.points.length-n;for(const u of i)l&=o(e,this,u,{start:n,end:n+s-1});return!!l}draw(e,n,s,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),draw(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ye(LineElement,"id","line"),Ye(LineElement,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ye(LineElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ye(LineElement,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function inRange$1(t,e,n,s){const i=t.options,{[n]:o}=t.getProps([n],s);return Math.abs(e-o)<i.radius+i.hitRadius}class PointElement extends Element$1{constructor(n){super();Ye(this,"parsed");Ye(this,"skip");Ye(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,i){const o=this.options,{x:l,y:u}=this.getProps(["x","y"],i);return Math.pow(n-l,2)+Math.pow(s-u,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(n,s){return inRange$1(this,n,"x",s)}inYRange(n,s){return inRange$1(this,n,"y",s)}getCenterPoint(n){const{x:s,y:i}=this.getProps(["x","y"],n);return{x:s,y:i}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const i=s&&n.borderWidth||0;return(s+i)*2}draw(n,s){const i=this.options;this.skip||i.radius<.1||!_isPointInArea(this,s,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,drawPoint(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ye(PointElement,"id","point"),Ye(PointElement,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ye(PointElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function getBarBounds(t,e){const{x:n,y:s,base:i,width:o,height:l}=t.getProps(["x","y","base","width","height"],e);let u,d,f,m,g;return t.horizontal?(g=l/2,u=Math.min(n,i),d=Math.max(n,i),f=s-g,m=s+g):(g=o/2,u=n-g,d=n+g,f=Math.min(s,i),m=Math.max(s,i)),{left:u,top:f,right:d,bottom:m}}function skipOrLimit(t,e,n,s){return t?0:_limitValue(e,n,s)}function parseBorderWidth(t,e,n){const s=t.options.borderWidth,i=t.borderSkipped,o=toTRBL(s);return{t:skipOrLimit(i.top,o.top,0,n),r:skipOrLimit(i.right,o.right,0,e),b:skipOrLimit(i.bottom,o.bottom,0,n),l:skipOrLimit(i.left,o.left,0,e)}}function parseBorderRadius(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,o=toTRBLCorners(i),l=Math.min(e,n),u=t.borderSkipped,d=s||isObject(i);return{topLeft:skipOrLimit(!d||u.top||u.left,o.topLeft,0,l),topRight:skipOrLimit(!d||u.top||u.right,o.topRight,0,l),bottomLeft:skipOrLimit(!d||u.bottom||u.left,o.bottomLeft,0,l),bottomRight:skipOrLimit(!d||u.bottom||u.right,o.bottomRight,0,l)}}function boundingRects(t){const e=getBarBounds(t),n=e.right-e.left,s=e.bottom-e.top,i=parseBorderWidth(t,n/2,s/2),o=parseBorderRadius(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function inRange(t,e,n,s){const i=e===null,o=n===null,u=t&&!(i&&o)&&getBarBounds(t,s);return u&&(i||_isBetween(e,u.left,u.right))&&(o||_isBetween(n,u.top,u.bottom))}function hasRadius(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function addNormalRectPath(t,e){t.rect(e.x,e.y,e.w,e.h)}function inflateRect(t,e,n={}){const s=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-s,l=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+s,y:t.y+i,w:t.w+o,h:t.h+l,radius:t.radius}}class BarElement extends Element$1{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:i}}=this,{inner:o,outer:l}=boundingRects(this),u=hasRadius(l.radius)?addRoundedRectPath:addNormalRectPath;e.save(),(l.w!==o.w||l.h!==o.h)&&(e.beginPath(),u(e,inflateRect(l,n,o)),e.clip(),u(e,inflateRect(o,-n,l)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),u(e,inflateRect(o,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,s){return inRange(this,e,n,s)}inXRange(e,n){return inRange(this,e,null,n)}inYRange(e,n){return inRange(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(n+i)/2:n,y:o?s:(s+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ye(BarElement,"id","bar"),Ye(BarElement,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ye(BarElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var elements=Object.freeze({__proto__:null,ArcElement,BarElement,LineElement,PointElement});const BORDER_COLORS=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],BACKGROUND_COLORS=BORDER_COLORS.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function getBorderColor(t){return BORDER_COLORS[t%BORDER_COLORS.length]}function getBackgroundColor(t){return BACKGROUND_COLORS[t%BACKGROUND_COLORS.length]}function colorizeDefaultDataset(t,e){return t.borderColor=getBorderColor(e),t.backgroundColor=getBackgroundColor(e),++e}function colorizeDoughnutDataset(t,e){return t.backgroundColor=t.data.map(()=>getBorderColor(e++)),e}function colorizePolarAreaDataset(t,e){return t.backgroundColor=t.data.map(()=>getBackgroundColor(e++)),e}function getColorizer(t){let e=0;return(n,s)=>{const i=t.getDatasetMeta(s).controller;i instanceof DoughnutController?e=colorizeDoughnutDataset(n,e):i instanceof PolarAreaController?e=colorizePolarAreaDataset(n,e):i&&(e=colorizeDefaultDataset(n,e))}}function containsColorsDefinitions(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function containsColorsDefinition(t){return t&&(t.borderColor||t.backgroundColor)}function containsDefaultColorsDefenitions(){return defaults.borderColor!=="rgba(0,0,0,0.1)"||defaults.backgroundColor!=="rgba(0,0,0,0.1)"}var plugin_colors={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:s},options:i}=t.config,{elements:o}=i,l=containsColorsDefinitions(s)||containsColorsDefinition(i)||o&&containsColorsDefinitions(o)||containsDefaultColorsDefenitions();if(!n.forceOverride&&l)return;const u=getColorizer(t);s.forEach(u)}};function lttbDecimation(t,e,n,s,i){const o=i.samples||s;if(o>=n)return t.slice(e,e+n);const l=[],u=(n-2)/(o-2);let d=0;const f=e+n-1;let m=e,g,y,v,E,w;for(l[d++]=t[m],g=0;g<o-2;g++){let A=0,I=0,D;const V=Math.floor((g+1)*u)+1+e,Y=Math.min(Math.floor((g+2)*u)+1,n)+e,j=Y-V;for(D=V;D<Y;D++)A+=t[D].x,I+=t[D].y;A/=j,I/=j;const H=Math.floor(g*u)+1+e,S=Math.min(Math.floor((g+1)*u)+1,n)+e,{x:T,y:P}=t[m];for(v=E=-1,D=H;D<S;D++)E=.5*Math.abs((T-A)*(t[D].y-P)-(T-t[D].x)*(I-P)),E>v&&(v=E,y=t[D],w=D);l[d++]=y,m=w}return l[d++]=t[f],l}function minMaxDecimation(t,e,n,s){let i=0,o=0,l,u,d,f,m,g,y,v,E,w;const A=[],I=e+n-1,D=t[e].x,Y=t[I].x-D;for(l=e;l<e+n;++l){u=t[l],d=(u.x-D)/Y*s,f=u.y;const j=d|0;if(j===m)f<E?(E=f,g=l):f>w&&(w=f,y=l),i=(o*i+u.x)/++o;else{const H=l-1;if(!isNullOrUndef(g)&&!isNullOrUndef(y)){const S=Math.min(g,y),T=Math.max(g,y);S!==v&&S!==H&&A.push({...t[S],x:i}),T!==v&&T!==H&&A.push({...t[T],x:i})}l>0&&H!==v&&A.push(t[H]),A.push(u),m=j,o=0,E=w=f,g=y=v=l}}return A}function cleanDecimatedDataset(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function cleanDecimatedData(t){t.data.datasets.forEach(e=>{cleanDecimatedDataset(e)})}function getStartAndCountOfVisiblePointsSimplified(t,e){const n=e.length;let s=0,i;const{iScale:o}=t,{min:l,max:u,minDefined:d,maxDefined:f}=o.getUserBounds();return d&&(s=_limitValue(_lookupByKey(e,o.axis,l).lo,0,n-1)),f?i=_limitValue(_lookupByKey(e,o.axis,u).hi+1,s,n)-s:i=n-s,{start:s,count:i}}var plugin_decimation={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){cleanDecimatedData(t);return}const s=t.width;t.data.datasets.forEach((i,o)=>{const{_data:l,indexAxis:u}=i,d=t.getDatasetMeta(o),f=l||i.data;if(resolve([u,t.options.indexAxis])==="y"||!d.controller.supportsDecimation)return;const m=t.scales[d.xAxisID];if(m.type!=="linear"&&m.type!=="time"||t.options.parsing)return;let{start:g,count:y}=getStartAndCountOfVisiblePointsSimplified(d,f);const v=n.threshold||4*s;if(y<=v){cleanDecimatedDataset(i);return}isNullOrUndef(l)&&(i._data=f,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}}));let E;switch(n.algorithm){case"lttb":E=lttbDecimation(f,g,y,s,n);break;case"min-max":E=minMaxDecimation(f,g,y,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=E})},destroy(t){cleanDecimatedData(t)}};function _segments(t,e,n){const s=t.segments,i=t.points,o=e.points,l=[];for(const u of s){let{start:d,end:f}=u;f=_findSegmentEnd(d,f,i);const m=_getBounds(n,i[d],i[f],u.loop);if(!e.segments){l.push({source:u,target:m,start:i[d],end:i[f]});continue}const g=_boundSegments(e,m);for(const y of g){const v=_getBounds(n,o[y.start],o[y.end],y.loop),E=_boundSegment(u,i,v);for(const w of E)l.push({source:w,target:y,start:{[n]:_getEdge(m,v,"start",Math.max)},end:{[n]:_getEdge(m,v,"end",Math.min)}})}}return l}function _getBounds(t,e,n,s){if(s)return;let i=e[t],o=n[t];return t==="angle"&&(i=_normalizeAngle(i),o=_normalizeAngle(o)),{property:t,start:i,end:o}}function _pointsFromSegments(t,e){const{x:n=null,y:s=null}=t||{},i=e.points,o=[];return e.segments.forEach(({start:l,end:u})=>{u=_findSegmentEnd(l,u,i);const d=i[l],f=i[u];s!==null?(o.push({x:d.x,y:s}),o.push({x:f.x,y:s})):n!==null&&(o.push({x:n,y:d.y}),o.push({x:n,y:f.y}))}),o}function _findSegmentEnd(t,e,n){for(;e>t;e--){const s=n[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function _getEdge(t,e,n,s){return t&&e?s(t[n],e[n]):t?t[n]:e?e[n]:0}function _createBoundaryLine(t,e){let n=[],s=!1;return isArray(t)?(s=!0,n=t):n=_pointsFromSegments(t,e),n.length?new LineElement({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function _shouldApplyFill(t){return t&&t.fill!==!1}function _resolveTarget(t,e,n){let i=t[e].fill;const o=[e];let l;if(!n)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!isNumberFinite(i))return i;if(l=t[i],!l)return!1;if(l.visible)return i;o.push(i),i=l.fill}return!1}function _decodeFill(t,e,n){const s=parseFillOption(t);if(isObject(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return isNumberFinite(i)&&Math.floor(i)===i?decodeTargetIndex(s[0],e,i,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function decodeTargetIndex(t,e,n,s){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=s?!1:n}function _getTargetPixel(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:isObject(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function _getTargetValue(t,e,n){let s;return t==="start"?s=n:t==="end"?s=e.options.reverse?e.min:e.max:isObject(t)?s=t.value:s=e.getBaseValue(),s}function parseFillOption(t){const e=t.options,n=e.fill;let s=valueOrDefault(n&&n.target,n);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function _buildStackLine(t){const{scale:e,index:n,line:s}=t,i=[],o=s.segments,l=s.points,u=getLinesBelow(e,n);u.push(_createBoundaryLine({x:null,y:e.bottom},s));for(let d=0;d<o.length;d++){const f=o[d];for(let m=f.start;m<=f.end;m++)addPointsBelow(i,l[m],u)}return new LineElement({points:i,options:{}})}function getLinesBelow(t,e){const n=[],s=t.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const o=s[i];if(o.index===e)break;o.hidden||n.unshift(o.dataset)}return n}function addPointsBelow(t,e,n){const s=[];for(let i=0;i<n.length;i++){const o=n[i],{first:l,last:u,point:d}=findPoint(o,e,"x");if(!(!d||l&&u)){if(l)s.unshift(d);else if(t.push(d),!u)break}}t.push(...s)}function findPoint(t,e,n){const s=t.interpolate(e,n);if(!s)return{};const i=s[n],o=t.segments,l=t.points;let u=!1,d=!1;for(let f=0;f<o.length;f++){const m=o[f],g=l[m.start][n],y=l[m.end][n];if(_isBetween(i,g,y)){u=i===g,d=i===y;break}}return{first:u,last:d,point:s}}class simpleArc{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,s){const{x:i,y:o,radius:l}=this;return n=n||{start:0,end:TAU},e.arc(i,o,l,n.end,n.start,!0),!s.bounds}interpolate(e){const{x:n,y:s,radius:i}=this,o=e.angle;return{x:n+Math.cos(o)*i,y:s+Math.sin(o)*i,angle:o}}}function _getTarget(t){const{chart:e,fill:n,line:s}=t;if(isNumberFinite(n))return getLineByIndex(e,n);if(n==="stack")return _buildStackLine(t);if(n==="shape")return!0;const i=computeBoundary(t);return i instanceof simpleArc?i:_createBoundaryLine(i,s)}function getLineByIndex(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function computeBoundary(t){return(t.scale||{}).getPointPositionForValue?computeCircularBoundary(t):computeLinearBoundary(t)}function computeLinearBoundary(t){const{scale:e={},fill:n}=t,s=_getTargetPixel(n,e);if(isNumberFinite(s)){const i=e.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function computeCircularBoundary(t){const{scale:e,fill:n}=t,s=e.options,i=e.getLabels().length,o=s.reverse?e.max:e.min,l=_getTargetValue(n,e,o),u=[];if(s.grid.circular){const d=e.getPointPositionForValue(0,o);return new simpleArc({x:d.x,y:d.y,radius:e.getDistanceFromCenterForValue(l)})}for(let d=0;d<i;++d)u.push(e.getPointPositionForValue(d,l));return u}function _drawfill(t,e,n){const s=_getTarget(e),{chart:i,index:o,line:l,scale:u,axis:d}=e,f=l.options,m=f.fill,g=f.backgroundColor,{above:y=g,below:v=g}=m||{},E=i.getDatasetMeta(o),w=getDatasetClipArea(i,E);s&&l.points.length&&(clipArea(t,n),doFill(t,{line:l,target:s,above:y,below:v,area:n,scale:u,axis:d,clip:w}),unclipArea(t))}function doFill(t,e){const{line:n,target:s,above:i,below:o,area:l,scale:u,clip:d}=e,f=n._loop?"angle":e.axis;t.save();let m=o;o!==i&&(f==="x"?(clipVertical(t,s,l.top),fill(t,{line:n,target:s,color:i,scale:u,property:f,clip:d}),t.restore(),t.save(),clipVertical(t,s,l.bottom)):f==="y"&&(clipHorizontal(t,s,l.left),fill(t,{line:n,target:s,color:o,scale:u,property:f,clip:d}),t.restore(),t.save(),clipHorizontal(t,s,l.right),m=i)),fill(t,{line:n,target:s,color:m,scale:u,property:f,clip:d}),t.restore()}function clipVertical(t,e,n){const{segments:s,points:i}=e;let o=!0,l=!1;t.beginPath();for(const u of s){const{start:d,end:f}=u,m=i[d],g=i[_findSegmentEnd(d,f,i)];o?(t.moveTo(m.x,m.y),o=!1):(t.lineTo(m.x,n),t.lineTo(m.x,m.y)),l=!!e.pathSegment(t,u,{move:l}),l?t.closePath():t.lineTo(g.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function clipHorizontal(t,e,n){const{segments:s,points:i}=e;let o=!0,l=!1;t.beginPath();for(const u of s){const{start:d,end:f}=u,m=i[d],g=i[_findSegmentEnd(d,f,i)];o?(t.moveTo(m.x,m.y),o=!1):(t.lineTo(n,m.y),t.lineTo(m.x,m.y)),l=!!e.pathSegment(t,u,{move:l}),l?t.closePath():t.lineTo(n,g.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function fill(t,e){const{line:n,target:s,property:i,color:o,scale:l,clip:u}=e,d=_segments(n,s,i);for(const{source:f,target:m,start:g,end:y}of d){const{style:{backgroundColor:v=o}={}}=f,E=s!==!0;t.save(),t.fillStyle=v,clipBounds(t,l,u,E&&_getBounds(i,g,y)),t.beginPath();const w=!!n.pathSegment(t,f);let A;if(E){w?t.closePath():interpolatedLineTo(t,s,y,i);const I=!!s.pathSegment(t,m,{move:w,reverse:!0});A=w&&I,A||interpolatedLineTo(t,s,g,i)}t.closePath(),t.fill(A?"evenodd":"nonzero"),t.restore()}}function clipBounds(t,e,n,s){const i=e.chart.chartArea,{property:o,start:l,end:u}=s||{};if(o==="x"||o==="y"){let d,f,m,g;o==="x"?(d=l,f=i.top,m=u,g=i.bottom):(d=i.left,f=l,m=i.right,g=u),t.beginPath(),n&&(d=Math.max(d,n.left),m=Math.min(m,n.right),f=Math.max(f,n.top),g=Math.min(g,n.bottom)),t.rect(d,f,m-d,g-f),t.clip()}}function interpolatedLineTo(t,e,n,s){const i=e.interpolate(n,s);i&&t.lineTo(i.x,i.y)}var index={id:"filler",afterDatasetsUpdate(t,e,n){const s=(t.data.datasets||[]).length,i=[];let o,l,u,d;for(l=0;l<s;++l)o=t.getDatasetMeta(l),u=o.dataset,d=null,u&&u.options&&u instanceof LineElement&&(d={visible:t.isDatasetVisible(l),index:l,fill:_decodeFill(u,l,s),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:u}),o.$filler=d,i.push(d);for(l=0;l<s;++l)d=i[l],!(!d||d.fill===!1)&&(d.fill=_resolveTarget(i,l,n.propagate))},beforeDraw(t,e,n){const s=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let l=i.length-1;l>=0;--l){const u=i[l].$filler;u&&(u.line.updateControlPoints(o,u.axis),s&&u.fill&&_drawfill(t.ctx,u,o))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const o=s[i].$filler;_shouldApplyFill(o)&&_drawfill(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,n){const s=e.meta.$filler;!_shouldApplyFill(s)||n.drawTime!=="beforeDatasetDraw"||_drawfill(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const getBoxSize=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},itemsEqual=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Legend extends Element$1{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=callback(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=toFont(s.font),o=i.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:d}=getBoxSize(s,o);let f,m;n.font=i.string,this.isHorizontal()?(f=this.maxWidth,m=this._fitRows(l,o,u,d)+10):(m=this.maxHeight,f=this._fitCols(l,i,u,d)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,i){const{ctx:o,maxWidth:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.lineWidths=[0],m=i+u;let g=e;o.textAlign="left",o.textBaseline="middle";let y=-1,v=-m;return this.legendItems.forEach((E,w)=>{const A=s+n/2+o.measureText(E.text).width;(w===0||f[f.length-1]+A+2*u>l)&&(g+=m,f[f.length-(w>0?0:1)]=0,v+=m,y++),d[w]={left:0,top:v,row:y,width:A,height:i},f[f.length-1]+=A+u}),g}_fitCols(e,n,s,i){const{ctx:o,maxHeight:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.columnSizes=[],m=l-e;let g=u,y=0,v=0,E=0,w=0;return this.legendItems.forEach((A,I)=>{const{itemWidth:D,itemHeight:V}=calculateItemSize(s,n,o,A,i);I>0&&v+V+2*u>m&&(g+=y+u,f.push({width:y,height:v}),E+=y+u,w++,y=v=0),d[I]={left:E,top:v,col:w,width:D,height:V},y=Math.max(y,D),v+=V+u}),g+=y,f.push({width:y,height:v}),g}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:o}}=this,l=getRtlAdapter(o,this.left,this.width);if(this.isHorizontal()){let u=0,d=_alignStartEnd(s,this.left+i,this.right-this.lineWidths[u]);for(const f of n)u!==f.row&&(u=f.row,d=_alignStartEnd(s,this.left+i,this.right-this.lineWidths[u])),f.top+=this.top+e+i,f.left=l.leftForLtr(l.x(d),f.width),d+=f.width+i}else{let u=0,d=_alignStartEnd(s,this.top+e+i,this.bottom-this.columnSizes[u].height);for(const f of n)f.col!==u&&(u=f.col,d=_alignStartEnd(s,this.top+e+i,this.bottom-this.columnSizes[u].height)),f.top=d,f.left+=this.left+i,f.left=l.leftForLtr(l.x(f.left),f.width),d+=f.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;clipArea(e,this),this._draw(),unclipArea(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:i}=this,{align:o,labels:l}=e,u=defaults.color,d=getRtlAdapter(e.rtl,this.left,this.width),f=toFont(l.font),{padding:m}=l,g=f.size,y=g/2;let v;this.drawTitle(),i.textAlign=d.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=f.string;const{boxWidth:E,boxHeight:w,itemHeight:A}=getBoxSize(l,g),I=function(H,S,T){if(isNaN(E)||E<=0||isNaN(w)||w<0)return;i.save();const P=valueOrDefault(T.lineWidth,1);if(i.fillStyle=valueOrDefault(T.fillStyle,u),i.lineCap=valueOrDefault(T.lineCap,"butt"),i.lineDashOffset=valueOrDefault(T.lineDashOffset,0),i.lineJoin=valueOrDefault(T.lineJoin,"miter"),i.lineWidth=P,i.strokeStyle=valueOrDefault(T.strokeStyle,u),i.setLineDash(valueOrDefault(T.lineDash,[])),l.usePointStyle){const U={radius:w*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:P},J=d.xPlus(H,E/2),W=S+y;drawPointLegend(i,U,J,W,l.pointStyleWidth&&E)}else{const U=S+Math.max((g-w)/2,0),J=d.leftForLtr(H,E),W=toTRBLCorners(T.borderRadius);i.beginPath(),Object.values(W).some(K=>K!==0)?addRoundedRectPath(i,{x:J,y:U,w:E,h:w,radius:W}):i.rect(J,U,E,w),i.fill(),P!==0&&i.stroke()}i.restore()},D=function(H,S,T){renderText(i,T.text,H,S+A/2,f,{strikethrough:T.hidden,textAlign:d.textAlign(T.textAlign)})},V=this.isHorizontal(),Y=this._computeTitleHeight();V?v={x:_alignStartEnd(o,this.left+m,this.right-s[0]),y:this.top+m+Y,line:0}:v={x:this.left+m,y:_alignStartEnd(o,this.top+Y+m,this.bottom-n[0].height),line:0},overrideTextDirection(this.ctx,e.textDirection);const j=A+m;this.legendItems.forEach((H,S)=>{i.strokeStyle=H.fontColor,i.fillStyle=H.fontColor;const T=i.measureText(H.text).width,P=d.textAlign(H.textAlign||(H.textAlign=l.textAlign)),U=E+y+T;let J=v.x,W=v.y;d.setWidth(this.width),V?S>0&&J+U+m>this.right&&(W=v.y+=j,v.line++,J=v.x=_alignStartEnd(o,this.left+m,this.right-s[v.line])):S>0&&W+j>this.bottom&&(J=v.x=J+n[v.line].width+m,v.line++,W=v.y=_alignStartEnd(o,this.top+Y+m,this.bottom-n[v.line].height));const K=d.x(J);if(I(K,W,H),J=_textX(P,J+E+y,V?J+U:this.right,e.rtl),D(d.x(J),W,H),V)v.x+=U+m;else if(typeof H.text!="string"){const le=f.lineHeight;v.y+=calculateLegendItemHeight(H,le)+m}else v.y+=j}),restoreTextDirection(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=toFont(n.font),i=toPadding(n.padding);if(!n.display)return;const o=getRtlAdapter(e.rtl,this.left,this.width),l=this.ctx,u=n.position,d=s.size/2,f=i.top+d;let m,g=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),m=this.top+f,g=_alignStartEnd(e.align,g,this.right-y);else{const E=this.columnSizes.reduce((w,A)=>Math.max(w,A.height),0);m=f+_alignStartEnd(e.align,this.top,this.bottom-E-e.labels.padding-this._computeTitleHeight())}const v=_alignStartEnd(u,g,g+y);l.textAlign=o.textAlign(_toLeftRightCenter(u)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=s.string,renderText(l,n.text,v,m,s)}_computeTitleHeight(){const e=this.options.title,n=toFont(e.font),s=toPadding(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,i,o;if(_isBetween(e,this.left,this.right)&&_isBetween(n,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(i=o[s],_isBetween(e,i.left,i.left+i.width)&&_isBetween(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!isListened(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,o=itemsEqual(i,s);i&&!o&&callback(n.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!o&&callback(n.onHover,[e,s,this],this)}else s&&callback(n.onClick,[e,s,this],this)}}function calculateItemSize(t,e,n,s,i){const o=calculateItemWidth(s,t,e,n),l=calculateItemHeight(i,s,e.lineHeight);return{itemWidth:o,itemHeight:l}}function calculateItemWidth(t,e,n,s){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((o,l)=>o.length>l.length?o:l)),e+n.size/2+s.measureText(i).width}function calculateItemHeight(t,e,n){let s=t;return typeof e.text!="string"&&(s=calculateLegendItemHeight(e,n)),s}function calculateLegendItemHeight(t,e){const n=t.text?t.text.length:0;return e*n}function isListened(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(t,e,n){const s=t.legend=new Legend({ctx:t.ctx,options:n,chart:t});layouts.configure(t,s,n),layouts.addBox(t,s)},stop(t){layouts.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;layouts.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:o,useBorderRadius:l,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const f=d.controller.getStyle(n?0:void 0),m=toPadding(f.borderWidth);return{text:e[d.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:f.borderColor,pointStyle:s||f.pointStyle,rotation:f.rotation,textAlign:i||f.textAlign,borderRadius:l&&(u||f.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Title extends Element$1{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=isArray(s.text)?s.text.length:1;this._padding=toPadding(s.padding);const o=i*toFont(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:i,right:o,options:l}=this,u=l.align;let d=0,f,m,g;return this.isHorizontal()?(m=_alignStartEnd(u,s,o),g=n+e,f=o-s):(l.position==="left"?(m=s+e,g=_alignStartEnd(u,i,n),d=PI*-.5):(m=o-e,g=_alignStartEnd(u,n,i),d=PI*.5),f=i-n),{titleX:m,titleY:g,maxWidth:f,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=toFont(n.font),o=s.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:d,rotation:f}=this._drawArgs(o);renderText(e,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:f,textAlign:_toLeftRightCenter(n.align),textBaseline:"middle",translation:[l,u]})}}function createTitle(t,e){const n=new Title({ctx:t.ctx,options:e,chart:t});layouts.configure(t,n,e),layouts.addBox(t,n),t.titleBlock=n}var plugin_title={id:"title",_element:Title,start(t,e,n){createTitle(t,n)},stop(t){const e=t.titleBlock;layouts.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;layouts.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const map=new WeakMap;var plugin_subtitle={id:"subtitle",start(t,e,n){const s=new Title({ctx:t.ctx,options:n,chart:t});layouts.configure(t,s,n),layouts.addBox(t,s),map.set(t,s)},stop(t){layouts.removeBox(t,map.get(t)),map.delete(t)},beforeUpdate(t,e,n){const s=map.get(t);layouts.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(t){if(!t.length)return!1;let e,n,s=new Set,i=0,o=0;for(e=0,n=t.length;e<n;++e){const u=t[e].element;if(u&&u.hasValue()){const d=u.tooltipPosition();s.add(d.x),i+=d.y,++o}}return o===0||s.size===0?!1:{x:[...s].reduce((u,d)=>u+d)/s.size,y:i/o}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,i=Number.POSITIVE_INFINITY,o,l,u;for(o=0,l=t.length;o<l;++o){const d=t[o].element;if(d&&d.hasValue()){const f=d.getCenterPoint(),m=distanceBetweenPoints(e,f);m<i&&(i=m,u=d)}}if(u){const d=u.tooltipPosition();n=d.x,s=d.y}return{x:n,y:s}}};function pushOrConcat(t,e){return e&&(isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function splitNewlines(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function createTooltipItem(t,e){const{element:n,datasetIndex:s,index:i}=e,o=t.getDatasetMeta(s).controller,{label:l,value:u}=o.getLabelAndValue(i);return{chart:t,label:l,parsed:o.getParsed(i),raw:t.data.datasets[s].data[i],formattedValue:u,dataset:o.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function getTooltipSize(t,e){const n=t.chart.ctx,{body:s,footer:i,title:o}=t,{boxWidth:l,boxHeight:u}=e,d=toFont(e.bodyFont),f=toFont(e.titleFont),m=toFont(e.footerFont),g=o.length,y=i.length,v=s.length,E=toPadding(e.padding);let w=E.height,A=0,I=s.reduce((Y,j)=>Y+j.before.length+j.lines.length+j.after.length,0);if(I+=t.beforeBody.length+t.afterBody.length,g&&(w+=g*f.lineHeight+(g-1)*e.titleSpacing+e.titleMarginBottom),I){const Y=e.displayColors?Math.max(u,d.lineHeight):d.lineHeight;w+=v*Y+(I-v)*d.lineHeight+(I-1)*e.bodySpacing}y&&(w+=e.footerMarginTop+y*m.lineHeight+(y-1)*e.footerSpacing);let D=0;const V=function(Y){A=Math.max(A,n.measureText(Y).width+D)};return n.save(),n.font=f.string,each(t.title,V),n.font=d.string,each(t.beforeBody.concat(t.afterBody),V),D=e.displayColors?l+2+e.boxPadding:0,each(s,Y=>{each(Y.before,V),each(Y.lines,V),each(Y.after,V)}),D=0,n.font=m.string,each(t.footer,V),n.restore(),A+=E.width,{width:A,height:w}}function determineYAlign(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function doesNotFitWithAlign(t,e,n,s){const{x:i,width:o}=s,l=n.caretSize+n.caretPadding;if(t==="left"&&i+o+l>e.width||t==="right"&&i-o-l<0)return!0}function determineXAlign(t,e,n,s){const{x:i,width:o}=n,{width:l,chartArea:{left:u,right:d}}=t;let f="center";return s==="center"?f=i<=(u+d)/2?"left":"right":i<=o/2?f="left":i>=l-o/2&&(f="right"),doesNotFitWithAlign(f,t,e,n)&&(f="center"),f}function determineAlignment(t,e,n){const s=n.yAlign||e.yAlign||determineYAlign(t,n);return{xAlign:n.xAlign||e.xAlign||determineXAlign(t,e,n,s),yAlign:s}}function alignX(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function alignY(t,e,n){let{y:s,height:i}=t;return e==="top"?s+=n:e==="bottom"?s-=i+n:s-=i/2,s}function getBackgroundPoint(t,e,n,s){const{caretSize:i,caretPadding:o,cornerRadius:l}=t,{xAlign:u,yAlign:d}=n,f=i+o,{topLeft:m,topRight:g,bottomLeft:y,bottomRight:v}=toTRBLCorners(l);let E=alignX(e,u);const w=alignY(e,d,f);return d==="center"?u==="left"?E+=f:u==="right"&&(E-=f):u==="left"?E-=Math.max(m,y)+i:u==="right"&&(E+=Math.max(g,v)+i),{x:_limitValue(E,0,s.width-e.width),y:_limitValue(w,0,s.height-e.height)}}function getAlignedX(t,e,n){const s=toPadding(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function getBeforeAfterBodyLines(t){return pushOrConcat([],splitNewlines(t))}function createTooltipContext(t,e,n){return createContext(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function overrideCallbacks(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const defaultCallbacks={beforeTitle:noop,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:noop,beforeBody:noop,beforeLabel:noop,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return isNullOrUndef(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:noop,afterBody:noop,beforeFooter:noop,footer:noop,afterFooter:noop};function invokeCallbackWithFallback(t,e,n,s){const i=t[e].call(n,s);return typeof i>"u"?defaultCallbacks[e].call(n,s):i}class Tooltip extends Element$1{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,o=new Animations(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,i=invokeCallbackWithFallback(s,"beforeTitle",this,e),o=invokeCallbackWithFallback(s,"title",this,e),l=invokeCallbackWithFallback(s,"afterTitle",this,e);let u=[];return u=pushOrConcat(u,splitNewlines(i)),u=pushOrConcat(u,splitNewlines(o)),u=pushOrConcat(u,splitNewlines(l)),u}getBeforeBody(e,n){return getBeforeAfterBodyLines(invokeCallbackWithFallback(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,i=[];return each(e,o=>{const l={before:[],lines:[],after:[]},u=overrideCallbacks(s,o);pushOrConcat(l.before,splitNewlines(invokeCallbackWithFallback(u,"beforeLabel",this,o))),pushOrConcat(l.lines,invokeCallbackWithFallback(u,"label",this,o)),pushOrConcat(l.after,splitNewlines(invokeCallbackWithFallback(u,"afterLabel",this,o))),i.push(l)}),i}getAfterBody(e,n){return getBeforeAfterBodyLines(invokeCallbackWithFallback(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,i=invokeCallbackWithFallback(s,"beforeFooter",this,e),o=invokeCallbackWithFallback(s,"footer",this,e),l=invokeCallbackWithFallback(s,"afterFooter",this,e);let u=[];return u=pushOrConcat(u,splitNewlines(i)),u=pushOrConcat(u,splitNewlines(o)),u=pushOrConcat(u,splitNewlines(l)),u}_createItems(e){const n=this._active,s=this.chart.data,i=[],o=[],l=[];let u=[],d,f;for(d=0,f=n.length;d<f;++d)u.push(createTooltipItem(this.chart,n[d]));return e.filter&&(u=u.filter((m,g,y)=>e.filter(m,g,y,s))),e.itemSort&&(u=u.sort((m,g)=>e.itemSort(m,g,s))),each(u,m=>{const g=overrideCallbacks(e.callbacks,m);i.push(invokeCallbackWithFallback(g,"labelColor",this,m)),o.push(invokeCallbackWithFallback(g,"labelPointStyle",this,m)),l.push(invokeCallbackWithFallback(g,"labelTextColor",this,m))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,n){const s=this.options.setContext(this.getContext()),i=this._active;let o,l=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const u=positioners[s.position].call(this,i,this._eventPosition);l=this._createItems(s),this.title=this.getTitle(l,s),this.beforeBody=this.getBeforeBody(l,s),this.body=this.getBody(l,s),this.afterBody=this.getAfterBody(l,s),this.footer=this.getFooter(l,s);const d=this._size=getTooltipSize(this,s),f=Object.assign({},u,d),m=determineAlignment(this.chart,s,f),g=getBackgroundPoint(s,f,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,o={opacity:1,x:g.x,y:g.y,width:d.width,height:d.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,i){const o=this.getCaretPosition(e,s,i);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,s){const{xAlign:i,yAlign:o}=this,{caretSize:l,cornerRadius:u}=s,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:g}=toTRBLCorners(u),{x:y,y:v}=e,{width:E,height:w}=n;let A,I,D,V,Y,j;return o==="center"?(Y=v+w/2,i==="left"?(A=y,I=A-l,V=Y+l,j=Y-l):(A=y+E,I=A+l,V=Y-l,j=Y+l),D=A):(i==="left"?I=y+Math.max(d,m)+l:i==="right"?I=y+E-Math.max(f,g)-l:I=this.caretX,o==="top"?(V=v,Y=V-l,A=I-l,D=I+l):(V=v+w,Y=V+l,A=I+l,D=I-l),j=V),{x1:A,x2:I,x3:D,y1:V,y2:Y,y3:j}}drawTitle(e,n,s){const i=this.title,o=i.length;let l,u,d;if(o){const f=getRtlAdapter(s.rtl,this.x,this.width);for(e.x=getAlignedX(this,s.titleAlign,s),n.textAlign=f.textAlign(s.titleAlign),n.textBaseline="middle",l=toFont(s.titleFont),u=s.titleSpacing,n.fillStyle=s.titleColor,n.font=l.string,d=0;d<o;++d)n.fillText(i[d],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,d+1===o&&(e.y+=s.titleMarginBottom-u)}}_drawColorBox(e,n,s,i,o){const l=this.labelColors[s],u=this.labelPointStyles[s],{boxHeight:d,boxWidth:f}=o,m=toFont(o.bodyFont),g=getAlignedX(this,"left",o),y=i.x(g),v=d<m.lineHeight?(m.lineHeight-d)/2:0,E=n.y+v;if(o.usePointStyle){const w={radius:Math.min(f,d)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},A=i.leftForLtr(y,f)+f/2,I=E+d/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,drawPoint(e,w,A,I),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,drawPoint(e,w,A,I)}else{e.lineWidth=isObject(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const w=i.leftForLtr(y,f),A=i.leftForLtr(i.xPlus(y,1),f-2),I=toTRBLCorners(l.borderRadius);Object.values(I).some(D=>D!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,addRoundedRectPath(e,{x:w,y:E,w:f,h:d,radius:I}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),addRoundedRectPath(e,{x:A,y:E+1,w:f-2,h:d-2,radius:I}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(w,E,f,d),e.strokeRect(w,E,f,d),e.fillStyle=l.backgroundColor,e.fillRect(A,E+1,f-2,d-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:i}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:d,boxWidth:f,boxPadding:m}=s,g=toFont(s.bodyFont);let y=g.lineHeight,v=0;const E=getRtlAdapter(s.rtl,this.x,this.width),w=function(T){n.fillText(T,E.x(e.x+v),e.y+y/2),e.y+=y+o},A=E.textAlign(l);let I,D,V,Y,j,H,S;for(n.textAlign=l,n.textBaseline="middle",n.font=g.string,e.x=getAlignedX(this,A,s),n.fillStyle=s.bodyColor,each(this.beforeBody,w),v=u&&A!=="right"?l==="center"?f/2+m:f+2+m:0,Y=0,H=i.length;Y<H;++Y){for(I=i[Y],D=this.labelTextColors[Y],n.fillStyle=D,each(I.before,w),V=I.lines,u&&V.length&&(this._drawColorBox(n,e,Y,E,s),y=Math.max(g.lineHeight,d)),j=0,S=V.length;j<S;++j)w(V[j]),y=g.lineHeight;each(I.after,w)}v=0,y=g.lineHeight,each(this.afterBody,w),e.y-=o}drawFooter(e,n,s){const i=this.footer,o=i.length;let l,u;if(o){const d=getRtlAdapter(s.rtl,this.x,this.width);for(e.x=getAlignedX(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=d.textAlign(s.footerAlign),n.textBaseline="middle",l=toFont(s.footerFont),n.fillStyle=s.footerColor,n.font=l.string,u=0;u<o;++u)n.fillText(i[u],d.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+s.footerSpacing}}drawBackground(e,n,s,i){const{xAlign:o,yAlign:l}=this,{x:u,y:d}=e,{width:f,height:m}=s,{topLeft:g,topRight:y,bottomLeft:v,bottomRight:E}=toTRBLCorners(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(u+g,d),l==="top"&&this.drawCaret(e,n,s,i),n.lineTo(u+f-y,d),n.quadraticCurveTo(u+f,d,u+f,d+y),l==="center"&&o==="right"&&this.drawCaret(e,n,s,i),n.lineTo(u+f,d+m-E),n.quadraticCurveTo(u+f,d+m,u+f-E,d+m),l==="bottom"&&this.drawCaret(e,n,s,i),n.lineTo(u+v,d+m),n.quadraticCurveTo(u,d+m,u,d+m-v),l==="center"&&o==="left"&&this.drawCaret(e,n,s,i),n.lineTo(u,d+g),n.quadraticCurveTo(u,d,u+g,d),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,i=s&&s.x,o=s&&s.y;if(i||o){const l=positioners[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=getTooltipSize(this,e),d=Object.assign({},l,this._size),f=determineAlignment(n,e,d),m=getBackgroundPoint(e,d,f,n);(i._to!==m.x||o._to!==m.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const l=toPadding(n.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&u&&(e.save(),e.globalAlpha=s,this.drawBackground(o,e,i,n),overrideTextDirection(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),restoreTextDirection(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,i=e.map(({datasetIndex:u,index:d})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[d],index:d}}),o=!_elementsEqual(s,i),l=this._positionChanged(i,n);(o||l)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,s),u=this._positionChanged(l,e),d=n||!_elementsEqual(l,o)||u;return d&&(this._active=l,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,s,i){const o=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,s);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:s,caretY:i,options:o}=this,l=positioners[o.position].call(this,e,n);return l!==!1&&(s!==l.x||i!==l.y)}}Ye(Tooltip,"positioners",positioners);var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(t,e,n){n&&(t.tooltip=new Tooltip({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:defaultCallbacks},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},plugins=Object.freeze({__proto__:null,Colors:plugin_colors,Decimation:plugin_decimation,Filler:index,Legend:plugin_legend,SubTitle:plugin_subtitle,Title:plugin_title,Tooltip:plugin_tooltip});const addIfString=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function findOrAddLabel(t,e,n,s){const i=t.indexOf(e);if(i===-1)return addIfString(t,e,n,s);const o=t.lastIndexOf(e);return i!==o?n:i}const validIndex=(t,e)=>t===null?null:_limitValue(Math.round(t),0,e);function _getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class CategoryScale extends Scale{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:o}of n)s[i]===o&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(isNullOrUndef(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:findOrAddLabel(s,e,valueOrDefault(n,e),this._addedLabels),validIndex(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,i=[];let o=this.getLabels();o=e===0&&n===o.length-1?o:o.slice(e,n+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let l=e;l<=n;l++)i.push({value:l});return i}getLabelForValue(e){return _getLabelForValue.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ye(CategoryScale,"id","category"),Ye(CategoryScale,"defaults",{ticks:{callback:_getLabelForValue}});function generateTicks$1(t,e){const n=[],{bounds:i,step:o,min:l,max:u,precision:d,count:f,maxTicks:m,maxDigits:g,includeBounds:y}=t,v=o||1,E=m-1,{min:w,max:A}=e,I=!isNullOrUndef(l),D=!isNullOrUndef(u),V=!isNullOrUndef(f),Y=(A-w)/(g+1);let j=niceNum((A-w)/E/v)*v,H,S,T,P;if(j<1e-14&&!I&&!D)return[{value:w},{value:A}];P=Math.ceil(A/j)-Math.floor(w/j),P>E&&(j=niceNum(P*j/E/v)*v),isNullOrUndef(d)||(H=Math.pow(10,d),j=Math.ceil(j*H)/H),i==="ticks"?(S=Math.floor(w/j)*j,T=Math.ceil(A/j)*j):(S=w,T=A),I&&D&&o&&almostWhole((u-l)/o,j/1e3)?(P=Math.round(Math.min((u-l)/j,m)),j=(u-l)/P,S=l,T=u):V?(S=I?l:S,T=D?u:T,P=f-1,j=(T-S)/P):(P=(T-S)/j,almostEquals(P,Math.round(P),j/1e3)?P=Math.round(P):P=Math.ceil(P));const U=Math.max(_decimalPlaces(j),_decimalPlaces(S));H=Math.pow(10,isNullOrUndef(d)?U:d),S=Math.round(S*H)/H,T=Math.round(T*H)/H;let J=0;for(I&&(y&&S!==l?(n.push({value:l}),S<l&&J++,almostEquals(Math.round((S+J*j)*H)/H,l,relativeLabelSize(l,Y,t))&&J++):S<l&&J++);J<P;++J){const W=Math.round((S+J*j)*H)/H;if(D&&W>u)break;n.push({value:W})}return D&&y&&T!==u?n.length&&almostEquals(n[n.length-1].value,u,relativeLabelSize(u,Y,t))?n[n.length-1].value=u:n.push({value:u}):(!D||T===u)&&n.push({value:T}),n}function relativeLabelSize(t,e,{horizontal:n,minRotation:s}){const i=toRadians(s),o=(n?Math.sin(i):Math.cos(i))||.001,l=.75*e*(""+t).length;return Math.min(e/o,l)}class LinearScaleBase extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return isNullOrUndef(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:o}=this;const l=d=>i=n?i:d,u=d=>o=s?o:d;if(e){const d=sign(i),f=sign(o);d<0&&f<0?u(0):d>0&&f>0&&l(0)}if(i===o){let d=o===0?1:Math.abs(o*.05);u(o+d),e||l(i-d)}this.min=i,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,l=generateTicks$1(i,o);return e.bounds==="ticks"&&_setMinAndMaxByKey(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-n)/Math.max(e.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return formatNumber(e,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=isNumberFinite(e)?e:0,this.max=isNumberFinite(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=toRadians(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ye(LinearScale,"id","linear"),Ye(LinearScale,"defaults",{ticks:{callback:Ticks.formatters.numeric}});const log10Floor=t=>Math.floor(log10(t)),changeExponent=(t,e)=>Math.pow(10,log10Floor(t)+e);function isMajor(t){return t/Math.pow(10,log10Floor(t))===1}function steps(t,e,n){const s=Math.pow(10,n),i=Math.floor(t/s);return Math.ceil(e/s)-i}function startExp(t,e){const n=e-t;let s=log10Floor(n);for(;steps(t,e,s)>10;)s++;for(;steps(t,e,s)<10;)s--;return Math.min(s,log10Floor(t))}function generateTicks(t,{min:e,max:n}){e=finiteOrDefault(t.min,e);const s=[],i=log10Floor(e);let o=startExp(e,n),l=o<0?Math.pow(10,Math.abs(o)):1;const u=Math.pow(10,o),d=i>o?Math.pow(10,i):0,f=Math.round((e-d)*l)/l,m=Math.floor((e-d)/u/10)*u*10;let g=Math.floor((f-m)/Math.pow(10,o)),y=finiteOrDefault(t.min,Math.round((d+m+g*Math.pow(10,o))*l)/l);for(;y<n;)s.push({value:y,major:isMajor(y),significand:g}),g>=10?g=g<15?15:20:g++,g>=20&&(o++,g=2,l=o>=0?1:l),y=Math.round((d+m+g*Math.pow(10,o))*l)/l;const v=finiteOrDefault(t.max,y);return s.push({value:v,major:isMajor(v),significand:g}),s}class LogarithmicScale extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const s=LinearScaleBase.prototype.parse.apply(this,[e,n]);if(s===0){this._zero=!0;return}return isNumberFinite(s)&&s>0?s:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=isNumberFinite(e)?Math.max(0,e):null,this.max=isNumberFinite(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!isNumberFinite(this._userMin)&&(this.min=e===changeExponent(this.min,0)?changeExponent(this.min,-1):changeExponent(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let s=this.min,i=this.max;const o=u=>s=e?s:u,l=u=>i=n?i:u;s===i&&(s<=0?(o(1),l(10)):(o(changeExponent(s,-1)),l(changeExponent(i,1)))),s<=0&&o(changeExponent(i,-1)),i<=0&&l(changeExponent(s,1)),this.min=s,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},s=generateTicks(n,this);return e.bounds==="ticks"&&_setMinAndMaxByKey(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(e){return e===void 0?"0":formatNumber(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=log10(e),this._valueRange=log10(this.max)-log10(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(log10(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Ye(LogarithmicScale,"id","logarithmic"),Ye(LogarithmicScale,"defaults",{ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}});function getTickBackdropHeight(t){const e=t.ticks;if(e.display&&t.display){const n=toPadding(e.backdropPadding);return valueOrDefault(e.font&&e.font.size,defaults.font.size)+n.height}return 0}function measureLabelSize(t,e,n){return n=isArray(n)?n:[n],{w:_longestText(t,e.string,n),h:n.length*e.lineHeight}}function determineLimits(t,e,n,s,i){return t===s||t===i?{start:e-n/2,end:e+n/2}:t<s||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function fitWithPointLabels(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),s=[],i=[],o=t._pointLabels.length,l=t.options.pointLabels,u=l.centerPointLabels?PI/o:0;for(let d=0;d<o;d++){const f=l.setContext(t.getPointLabelContext(d));i[d]=f.padding;const m=t.getPointPosition(d,t.drawingArea+i[d],u),g=toFont(f.font),y=measureLabelSize(t.ctx,g,t._pointLabels[d]);s[d]=y;const v=_normalizeAngle(t.getIndexAngle(d)+u),E=Math.round(toDegrees(v)),w=determineLimits(E,m.x,y.w,0,180),A=determineLimits(E,m.y,y.h,90,270);updateLimits(n,e,v,w,A)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=buildPointLabelItems(t,s,i)}function updateLimits(t,e,n,s,i){const o=Math.abs(Math.sin(n)),l=Math.abs(Math.cos(n));let u=0,d=0;s.start<e.l?(u=(e.l-s.start)/o,t.l=Math.min(t.l,e.l-u)):s.end>e.r&&(u=(s.end-e.r)/o,t.r=Math.max(t.r,e.r+u)),i.start<e.t?(d=(e.t-i.start)/l,t.t=Math.min(t.t,e.t-d)):i.end>e.b&&(d=(i.end-e.b)/l,t.b=Math.max(t.b,e.b+d))}function createPointLabelItem(t,e,n){const s=t.drawingArea,{extra:i,additionalAngle:o,padding:l,size:u}=n,d=t.getPointPosition(e,s+i+l,o),f=Math.round(toDegrees(_normalizeAngle(d.angle+HALF_PI))),m=yForAngle(d.y,u.h,f),g=getTextAlignForAngle(f),y=leftForTextAlign(d.x,u.w,g);return{visible:!0,x:d.x,y:m,textAlign:g,left:y,top:m,right:y+u.w,bottom:m+u.h}}function isNotOverlapped(t,e){if(!e)return!0;const{left:n,top:s,right:i,bottom:o}=t;return!(_isPointInArea({x:n,y:s},e)||_isPointInArea({x:n,y:o},e)||_isPointInArea({x:i,y:s},e)||_isPointInArea({x:i,y:o},e))}function buildPointLabelItems(t,e,n){const s=[],i=t._pointLabels.length,o=t.options,{centerPointLabels:l,display:u}=o.pointLabels,d={extra:getTickBackdropHeight(o)/2,additionalAngle:l?PI/i:0};let f;for(let m=0;m<i;m++){d.padding=n[m],d.size=e[m];const g=createPointLabelItem(t,m,d);s.push(g),u==="auto"&&(g.visible=isNotOverlapped(g,f),g.visible&&(f=g))}return s}function getTextAlignForAngle(t){return t===0||t===180?"center":t<180?"left":"right"}function leftForTextAlign(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function yForAngle(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function drawPointLabelBox(t,e,n){const{left:s,top:i,right:o,bottom:l}=n,{backdropColor:u}=e;if(!isNullOrUndef(u)){const d=toTRBLCorners(e.borderRadius),f=toPadding(e.backdropPadding);t.fillStyle=u;const m=s-f.left,g=i-f.top,y=o-s+f.width,v=l-i+f.height;Object.values(d).some(E=>E!==0)?(t.beginPath(),addRoundedRectPath(t,{x:m,y:g,w:y,h:v,radius:d}),t.fill()):t.fillRect(m,g,y,v)}}function drawPointLabels(t,e){const{ctx:n,options:{pointLabels:s}}=t;for(let i=e-1;i>=0;i--){const o=t._pointLabelItems[i];if(!o.visible)continue;const l=s.setContext(t.getPointLabelContext(i));drawPointLabelBox(n,l,o);const u=toFont(l.font),{x:d,y:f,textAlign:m}=o;renderText(n,t._pointLabels[i],d,f+u.lineHeight/2,u,{color:l.color,textAlign:m,textBaseline:"middle"})}}function pathRadiusLine(t,e,n,s){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,TAU);else{let o=t.getPointPosition(0,e);i.moveTo(o.x,o.y);for(let l=1;l<s;l++)o=t.getPointPosition(l,e),i.lineTo(o.x,o.y)}}function drawRadiusLine(t,e,n,s,i){const o=t.ctx,l=e.circular,{color:u,lineWidth:d}=e;!l&&!s||!u||!d||n<0||(o.save(),o.strokeStyle=u,o.lineWidth=d,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),pathRadiusLine(t,n,l,s),o.closePath(),o.stroke(),o.restore())}function createPointLabelContext(t,e,n){return createContext(t,{label:n,index:e,type:"pointLabel"})}class RadialLinearScale extends LinearScaleBase{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=toPadding(getTickBackdropHeight(this.options)/2),n=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=isNumberFinite(e)&&!isNaN(e)?e:0,this.max=isNumberFinite(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(e){LinearScaleBase.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,s)=>{const i=callback(this.options.pointLabels.callback,[n,s],this);return i||i===0?i:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,s,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,s,i))}getIndexAngle(e){const n=TAU/(this._pointLabels.length||1),s=this.options.startAngle||0;return _normalizeAngle(e*n+toRadians(s))}getDistanceFromCenterForValue(e){if(isNullOrUndef(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(isNullOrUndef(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const s=n[e];return createPointLabelContext(this.getContext(),e,s)}}getPointPosition(e,n,s=0){const i=this.getIndexAngle(e)-HALF_PI+s;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:s,right:i,bottom:o}=this._pointLabelItems[e];return{left:n,top:s,right:i,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:s,grid:i,border:o}=n,l=this._pointLabels.length;let u,d,f;if(n.pointLabels.display&&drawPointLabels(this,l),i.display&&this.ticks.forEach((m,g)=>{if(g!==0||g===0&&this.min<0){d=this.getDistanceFromCenterForValue(m.value);const y=this.getContext(g),v=i.setContext(y),E=o.setContext(y);drawRadiusLine(this,v,d,l,E)}}),s.display){for(e.save(),u=l-1;u>=0;u--){const m=s.setContext(this.getPointLabelContext(u)),{color:g,lineWidth:y}=m;!y||!g||(e.lineWidth=y,e.strokeStyle=g,e.setLineDash(m.borderDash),e.lineDashOffset=m.borderDashOffset,d=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),f=this.getPointPosition(u,d),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(f.x,f.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let o,l;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((u,d)=>{if(d===0&&this.min>=0&&!n.reverse)return;const f=s.setContext(this.getContext(d)),m=toFont(f.font);if(o=this.getDistanceFromCenterForValue(this.ticks[d].value),f.showLabelBackdrop){e.font=m.string,l=e.measureText(u.label).width,e.fillStyle=f.backdropColor;const g=toPadding(f.backdropPadding);e.fillRect(-l/2-g.left,-o-m.size/2-g.top,l+g.width,m.size+g.height)}renderText(e,u.label,0,-o,m,{color:f.color,strokeColor:f.textStrokeColor,strokeWidth:f.textStrokeWidth})}),e.restore()}drawTitle(){}}Ye(RadialLinearScale,"id","radialLinear"),Ye(RadialLinearScale,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ye(RadialLinearScale,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ye(RadialLinearScale,"descriptors",{angleLines:{_fallback:"grid"}});const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(t,e){return t-e}function parse(t,e){if(isNullOrUndef(e))return null;const n=t._adapter,{parser:s,round:i,isoWeekday:o}=t._parseOpts;let l=e;return typeof s=="function"&&(l=s(l)),isNumberFinite(l)||(l=typeof s=="string"?n.parse(l,s):n.parse(l)),l===null?null:(i&&(l=i==="week"&&(isNumber(o)||o===!0)?n.startOf(l,"isoWeek",o):n.startOf(l,i)),+l)}function determineUnitForAutoTicks(t,e,n,s){const i=UNITS.length;for(let o=UNITS.indexOf(t);o<i-1;++o){const l=INTERVALS[UNITS[o]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-e)/(u*l.size))<=s)return UNITS[o]}return UNITS[i-1]}function determineUnitForFormatting(t,e,n,s,i){for(let o=UNITS.length-1;o>=UNITS.indexOf(n);o--){const l=UNITS[o];if(INTERVALS[l].common&&t._adapter.diff(i,s,l)>=e-1)return l}return UNITS[n?UNITS.indexOf(n):0]}function determineMajorUnit(t){for(let e=UNITS.indexOf(t)+1,n=UNITS.length;e<n;++e)if(INTERVALS[UNITS[e]].common)return UNITS[e]}function addTick(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:i}=_lookup(n,e),o=n[s]>=e?n[s]:n[i];t[o]=!0}}function setMajorTicks(t,e,n,s){const i=t._adapter,o=+i.startOf(e[0].value,s),l=e[e.length-1].value;let u,d;for(u=o;u<=l;u=+i.add(u,1,s))d=n[u],d>=0&&(e[d].major=!0);return e}function ticksFromTimestamps(t,e,n){const s=[],i={},o=e.length;let l,u;for(l=0;l<o;++l)u=e[l],i[u]=l,s.push({value:u,major:!1});return o===0||!n?s:setMajorTicks(t,s,i,n)}class TimeScale extends Scale{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),i=this._adapter=new adapters._date(e.adapters.date);i.init(n),mergeIf(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:parse(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:i,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function d(f){!l&&!isNaN(f.min)&&(i=Math.min(i,f.min)),!u&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!l||!u)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),i=isNumberFinite(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),o=isNumberFinite(o)&&!isNaN(o)?o:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,l=this.max,u=_filterBetween(i,o,l);return this._unit=n.unit||(s.autoSkip?determineUnitForAutoTicks(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):determineUnitForFormatting(this,u.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets(i),e.reverse&&u.reverse(),ticksFromTimestamps(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,i,o;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?s=o:s=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=_limitValue(n,0,l),s=_limitValue(s,0,l),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,i=this.options,o=i.time,l=o.unit||determineUnitForAutoTicks(o.minUnit,n,s,this._getLabelCapacity(n)),u=valueOrDefault(i.ticks.stepSize,1),d=l==="week"?o.isoWeekday:!1,f=isNumber(d)||d===!0,m={};let g=n,y,v;if(f&&(g=+e.startOf(g,"isoWeek",d)),g=+e.startOf(g,f?"day":l),e.diff(s,n,l)>1e5*u)throw new Error(n+" and "+s+" are too far apart with stepSize of "+u+" "+l);const E=i.ticks.source==="data"&&this.getDataTimestamps();for(y=g,v=0;y<s;y=+e.add(y,u,l),v++)addTick(m,y,E);return(y===s||i.bounds==="ticks"||v===1)&&addTick(m,y,E),Object.keys(m).sort(sorter).map(w=>+w)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,o=this._unit,l=n||i[o];return this._adapter.format(e,l)}_tickFormatFunction(e,n,s,i){const o=this.options,l=o.ticks.callback;if(l)return callback(l,[e,n,s],this);const u=o.time.displayFormats,d=this._unit,f=this._majorUnit,m=d&&u[d],g=f&&u[f],y=s[n],v=f&&g&&y&&y.major;return this._adapter.format(e,i||(v?g:m))}generateTickLabels(e){let n,s,i;for(n=0,s=e.length;n<s;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,i=toRadians(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(i),l=Math.sin(i),u=this._resolveTickFontOptions(0).size;return{w:s*o+u*l,h:s*l+u*o}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,o=this._tickFormatFunction(e,0,ticksFromTimestamps(this,[e],this._majorUnit),i),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)e.push(parse(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _arrayUnique(e.sort(sorter))}}Ye(TimeScale,"id","time"),Ye(TimeScale,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function interpolate(t,e,n){let s=0,i=t.length-1,o,l,u,d;n?(e>=t[s].pos&&e<=t[i].pos&&({lo:s,hi:i}=_lookupByKey(t,"pos",e)),{pos:o,time:u}=t[s],{pos:l,time:d}=t[i]):(e>=t[s].time&&e<=t[i].time&&({lo:s,hi:i}=_lookupByKey(t,"time",e)),{time:o,pos:u}=t[s],{time:l,pos:d}=t[i]);const f=l-o;return f?u+(d-u)*(e-o)/f:u}class TimeSeriesScale extends TimeScale{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=interpolate(n,this.min),this._tableRange=interpolate(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,i=[],o=[];let l,u,d,f,m;for(l=0,u=e.length;l<u;++l)f=e[l],f>=n&&f<=s&&i.push(f);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(l=0,u=i.length;l<u;++l)m=i[l+1],d=i[l-1],f=i[l],Math.round((m+d)/2)!==f&&o.push({time:f,pos:l/(u-1)});return o}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(interpolate(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return interpolate(this._table,s*this._tableRange+this._minPos,!0)}}Ye(TimeSeriesScale,"id","timeseries"),Ye(TimeSeriesScale,"defaults",TimeScale.defaults);var scales=Object.freeze({__proto__:null,CategoryScale,LinearScale,LogarithmicScale,RadialLinearScale,TimeScale,TimeSeriesScale});const registerables=[controllers,elements,plugins,scales];Chart.register(...registerables);const initialImageGeneratorConfigs$1={quadrada:{canvasWidth:1080,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:921,logoY:31,logoSize:123,placarX:92,placarY:-75,placarSize:600,jogadorX:484,jogadorY:100,jogadorSize:950,footerX:198,footerY:980,footerSize:1,pieChartX:215,pieChartY:325,pieChartSize:355,pieChartLegendX:195,pieChartLegendY:760,pieChartLegendSize:1.7500000000000007},vertical:{canvasWidth:1080,canvasHeight:1920,backgroundX:0,backgroundY:0,backgroundSize:1080,logoX:865,logoY:203,logoSize:175,placarX:40,placarY:117,placarSize:785,jogadorX:505,jogadorY:407,jogadorSize:950,footerX:190,footerY:1445,footerSize:1.4500000000000004,pieChartX:230,pieChartY:615,pieChartSize:415,pieChartLegendX:195,pieChartLegendY:1165,pieChartLegendSize:2.000000000000001},horizontal:{canvasWidth:1920,canvasHeight:1080,backgroundX:0,backgroundY:0,backgroundSize:1920,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,jogadorX:175,jogadorY:100,jogadorSize:950,footerX:30,footerY:1005,footerSize:1,pieChartX:960,pieChartY:600,pieChartSize:280,pieChartLegendX:960,pieChartLegendY:900,pieChartLegendSize:1}},ConfrontoGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{const{baseImages:i}=useImages(),[o,l]=reactExports.useState(initialImageGeneratorConfigs$1),u=reactExports.useRef(null),d=reactExports.useRef(null),f=reactExports.useRef(null),m=reactExports.useRef(null),[g,y]=reactExports.useState(["background","jogador","placar","grafico","legenda","logo","info"]),[v,E]=reactExports.useState(null),[w,A]=reactExports.useState("quadrada"),[I,D]=reactExports.useState(null),V=reactExports.useRef(null),[Y,j]=reactExports.useState(1),[H,S]=reactExports.useState(!1),[T,P]=reactExports.useState(!1),[U,J]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null}),[W,K]=reactExports.useState({homeWins:0,draws:0,awayWins:0}),le=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Arte e Jogador",icon:Palette,description:"Selecione a arte e o jogador"},{id:3,title:"Dados do Confronto",icon:ChartPie,description:"Insira o histórico"},{id:4,title:"Gerar Imagem",icon:Image$1,description:"Ajuste e gere a imagem"}],[ge,oe]=reactExports.useState(!1),[ce,ie]=reactExports.useState(!1),Ne=de=>{switch(de){case 2:return ge;case 3:return ce;case 4:return W.homeWins+W.draws+W.awayWins>0;default:return!0}},re=()=>{Y===1&&V.current&&!V.current.canProceed&&!V.current.submitManualData()||j(de=>de+1)},_e=de=>{const me=new Date(de.fixture.date),ue=convertToSaoPauloTime(me),se={homeTeam:de.teams.home.name,awayTeam:de.teams.away.name,competition:formatCompetitionRound(de,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:de.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:de.fixture.referee||"",stadium:de.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(ue),competitionRound:formatCompetitionRound(de,e)};D(de),J(he=>({...he,matchData:se}))},Se=(de,me,ue)=>{J(se=>({...se,gameArt:de,featuredPlayer:me,featuredPlayerImageUrl:ue})),ie(!!de&&!!me)},Re=(de,me)=>{const ue=de.target.value.replace(/[^0-9]/g,"");K(se=>({...se,[me]:Number(ue)}))},Be=reactExports.useCallback(de=>new Promise((me,ue)=>{const se=new Image;se.crossOrigin="anonymous",se.onload=()=>me(se),se.onerror=()=>ue(new Error(`Falha ao carregar imagem: ${de}`)),se.src=de}),[]),Ie=reactExports.useCallback(async(de,me,ue)=>{var xe,Ue,Oe,Me,Ze;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const se=de.current;if(!se)return;const he=se.getContext("2d");if(!he)return;se.width=me.canvasWidth,se.height=me.canvasHeight,he.clearRect(0,0,se.width,se.height);const Pe=((xe=U.matchData)==null?void 0:xe.homeTeam)==="Liverpool"?"#d32f2f":"#757575",ze="#1ae9de",$e=((Ue=U.matchData)==null?void 0:Ue.awayTeam)==="Liverpool"?"#d32f2f":"#757575",vt=He=>{He.shadowColor="rgba(0, 0, 0, 0.8)",He.shadowOffsetX=2,He.shadowOffsetY=2,He.shadowBlur=5},ve=He=>{He.shadowColor="transparent",He.shadowOffsetX=0,He.shadowOffsetY=0,He.shadowBlur=0};for(const He of ue)if(He==="background")try{const qe=(Oe=i.find(Xe=>Xe.type===w&&Xe.section==="confronto"))==null?void 0:Oe.url;if(qe){const Xe=await Be(qe),et=Xe.height/Xe.width,Kt=me.backgroundSize,It=Kt*et;he.drawImage(Xe,me.backgroundX,me.backgroundY,Kt,It)}}catch(qe){console.warn(qe)}else if(He==="logo")try{const qe=await Be("/caminhantes-clock.png");he.drawImage(qe,me.logoX,me.logoY,me.logoSize,me.logoSize)}catch(qe){console.error(qe)}else if(He==="placar"&&U.gameArt){if(m.current){S(!0);try{const qe=await domtoimage.toPng(m.current,{quality:1,bgcolor:void 0}),Xe=new Image;Xe.src=qe,await new Promise((et,Kt)=>{Xe.onload=()=>et(),Xe.onerror=It=>Kt(It)}),he.drawImage(Xe,me.placarX,me.placarY,me.placarSize,me.placarSize*(720/1280)),P(!0)}catch(qe){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",qe)}finally{S(!1)}}}else if(He==="jogador"&&U.featuredPlayerImageUrl)try{const qe=await Be(U.featuredPlayerImageUrl),Xe=1062/666,et=me.jogadorSize,Kt=et*Xe;he.drawImage(qe,me.jogadorX,me.jogadorY,et,Kt)}catch(qe){console.error(qe)}else if(He==="grafico"){vt(he);const{homeWins:qe,draws:Xe,awayWins:et}=W;if(qe+Xe+et>0){const It=document.createElement("canvas"),Bt=500;It.width=Bt,It.height=Bt,new Chart(It,{type:"pie",data:{labels:[`Vitórias ${((Me=U.matchData)==null?void 0:Me.homeTeam)||"Casa"}`,"Empates",`Vitórias ${((Ze=U.matchData)==null?void 0:Ze.awayTeam)||"Visitante"}`],datasets:[{data:[qe,Xe,et],backgroundColor:[Pe,ze,$e],borderColor:"#ffffff",borderWidth:4}]},options:{animation:{duration:0},responsive:!1,plugins:{legend:{display:!1}}}}),await new Promise(Et=>setTimeout(Et,50)),he.drawImage(It,me.pieChartX,me.pieChartY,me.pieChartSize,me.pieChartSize)}ve(he)}else if(He==="legenda"){vt(he);const{homeWins:qe,draws:Xe,awayWins:et}=W;if(qe+Xe+et>0){const It=me.pieChartLegendSize,Bt=20*It,Et=18*It,mn=30*It,Nt=me.pieChartLegendX;let Gt=me.pieChartLegendY;he.font=`600 ${Bt}px "Funnel Display", sans-serif`,he.textAlign="left",he.textBaseline="middle";const un=[{label:`Vitórias ${I==null?void 0:I.teams.home.name}: ${qe}`,color:Pe},{label:`Empates: ${Xe}`,color:ze},{label:`Vitórias ${I==null?void 0:I.teams.away.name}: ${et}`,color:$e}];for(const pt of un)he.fillStyle=pt.color,he.fillRect(Nt,Gt-Et/2,Et,Et),he.fillStyle="#FFFFFF",he.fillText(pt.label,Nt+Et+10*It,Gt),Gt+=mn}ve(he)}else if(He==="info"&&U.matchData){vt(he),he.fillStyle="#FFFFFF";const qe=20;he.font=`800 ${qe}px "Funnel Display", sans-serif`,he.textAlign="center";const{stadium:Xe,date:et,referee:Kt,competitionRound:It}=U.matchData,Bt=[It.toUpperCase()];Kt&&Bt.push(`ÁRBITRO: ${Kt.toUpperCase()}`);const Et=Bt.join(" - "),mn=`${Xe.toUpperCase()} - ${et.toUpperCase()}`,Nt=se.width/2,Gt=me.footerY,un=qe*1.4,pt=Gt+un,Qe=25;he.fillText(Et,Nt,Gt+Qe),he.fillText(mn,Nt,pt+Qe),ve(he)}},[U,W,i,w,Be]),je=reactExports.useCallback(()=>{if(Y!==4||!u.current||!d.current||!f.current)return;S(!0);const de=o[w],me=v?g.indexOf(v):-1,ue=me>-1?g.slice(0,me):g,se=me>-1?[g[me]]:[],he=me>-1?g.slice(me+1):[];Promise.all([Ie(u,de,ue),Ie(d,de,se),Ie(f,de,he)]).finally(()=>{S(!1),P(!0)})},[Y,o,w,v,g,Ie]);reactExports.useEffect(()=>{je()},[je]),reactExports.useEffect(()=>{if(Y!==4||!v||!d.current)return;const de=o[w];Ie(d,de,[v])},[o,v,w,Y,Ie]);const Te=()=>{const de=document.createElement("canvas"),me=o[w];de.width=me.canvasWidth,de.height=me.canvasHeight;const ue=de.getContext("2d");if(!ue||!u.current||!d.current||!f.current)return;ue.drawImage(u.current,0,0),ue.drawImage(d.current,0,0),ue.drawImage(f.current,0,0);const se=document.createElement("a");se.href=de.toDataURL("image/png"),se.download=`confronto-${w}.png`,se.click()},ke=(de,me)=>{v&&l(ue=>{const se=`${v}X`,he=`${v}Y`,Pe={...ue[w]};return de==="x"&&se in Pe?Pe[se]+=me:de==="y"&&he in Pe&&(Pe[he]+=me),{...ue,[w]:Pe}})},Ge=de=>{v&&l(me=>{const ue=`${v}Size`,se={...me[w]};return ue in se&&(ue==="footerSize"||ue==="pieChartLegendSize"?se[ue]+=de/100:se[ue]+=de),{...me,[w]:se}})},we=de=>{Ne(de)&&j(de)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Confronto Direto"}),I&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:m,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:I})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:le,currentStep:Y,onStepClick:we,canAdvanceToStep:Ne}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[Y===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:V,onMatchSelected:_e,escalacaoData:{...U,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:oe,translations:e}),Y===2&&jsxRuntimeExports.jsx(GameArtSelector,{onArtSelect:Se,escalacaoData:{...U,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},setEscalacaoData:de=>{let me;if(typeof de=="function"){const ue={...U,formation:null,selectedPlayers:{},reservePlayers:[],coach:""};me=de(ue)}else me=de;J(ue=>({...ue,gameArt:me.gameArt,featuredPlayer:me.featuredPlayer,featuredPlayerImageUrl:me.featuredPlayerImageUrl})),ie(!!me.gameArt&&!!me.featuredPlayer)}}),Y===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-medium text-center",children:"Histórico do Confronto"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Vitórias ",I==null?void 0:I.teams.home.name]}),jsxRuntimeExports.jsx("input",{type:"text",value:W.homeWins||"",onChange:de=>Re(de,"homeWins"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Empates"}),jsxRuntimeExports.jsx("input",{type:"text",value:W.draws||"",onChange:de=>Re(de,"draws"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Vitórias ",I==null?void 0:I.teams.away.name]}),jsxRuntimeExports.jsx("input",{type:"text",value:W.awayWins||"",onChange:de=>Re(de,"awayWins"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"})]})]})]}),Y===4&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:w,onChange:de=>A(de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:v??"",onChange:de=>E(de.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),g.map(de=>jsxRuntimeExports.jsx("option",{value:de,className:"capitalize",children:de.replace(/([A-Z])/g," $1")},de))]})]}),v&&jsxRuntimeExports.jsx(PositionController,{elementName:v,onMove:ke,onResize:Ge}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:g,setRenderOrder:y})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${o[w].canvasHeight/o[w].canvasWidth*100}%`},children:[u,d,f].map((de,me)=>jsxRuntimeExports.jsx("canvas",{ref:de,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:me+1}},me))})})]}),I&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:"confronto",match:I,translations:e,confrontoData:W}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-4",children:[jsxRuntimeExports.jsx(Button,{onClick:je,disabled:H,className:"bg-red-600 hover:bg-red-700 text-white",children:H?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),T&&jsxRuntimeExports.jsxs(Button,{onClick:Te,disabled:H,variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${Y===1?"justify-end":"justify-between"} mt-6`,children:[Y>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>j(de=>de-1),variant:"outline",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),Y<4&&jsxRuntimeExports.jsxs(Button,{onClick:re,disabled:!Ne(Y+1),className:"bg-red-600 hover:bg-red-700 text-white",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},GAME_ART_LABELS={INICIO_JOGO:"Início de Jogo",INTERVALO:"Intervalo",INICIO_SEGUNDO_TEMPO:"Início do Segundo Tempo",FIM_DE_JOGO:"Fim de Jogo",INICIO_PRORROGACAO:"Início da Prorrogação",INICIO_SEGUNDO_TEMPO_PRORROGACAO:"Início do Segundo Tempo da Prorrogação",GOL:"Gol",SUBSTITUICAO:"Substituição"},GAME_ART_TO_IMAGE_SECTION={INICIO_JOGO:"inicio_jogo",INTERVALO:"intervalo",INICIO_SEGUNDO_TEMPO:"inicio_segundo_tempo",FIM_DE_JOGO:"fim_de_jogo",INICIO_PRORROGACAO:"inicio_prorrogacao",INICIO_SEGUNDO_TEMPO_PRORROGACAO:"inicio_segundo_tempo_prorrogacao",GOL:"gol",SUBSTITUICAO:"substituicao"},GameArtTypeSelector=({selectedArtType:t,onArtTypeSelect:e})=>{var s;const n=[{type:"INICIO_JOGO",icon:jsxRuntimeExports.jsx(Play,{className:"w-6 h-6"}),description:"Arte para o início da partida",color:"bg-green-500 hover:bg-green-600 border-green-200"},{type:"INTERVALO",icon:jsxRuntimeExports.jsx(Coffee,{className:"w-6 h-6"}),description:"Arte para o intervalo do jogo",color:"bg-orange-500 hover:bg-orange-600 border-orange-200"},{type:"INICIO_SEGUNDO_TEMPO",icon:jsxRuntimeExports.jsx(RotateCcw,{className:"w-6 h-6"}),description:"Arte para o início do segundo tempo",color:"bg-blue-500 hover:bg-blue-600 border-blue-200"},{type:"FIM_DE_JOGO",icon:jsxRuntimeExports.jsx(Trophy,{className:"w-6 h-6"}),description:"Arte para o final da partida",color:"bg-red-500 hover:bg-red-600 border-red-200"},{type:"INICIO_PRORROGACAO",icon:jsxRuntimeExports.jsx(Clock,{className:"w-6 h-6"}),description:"Arte para o início da prorrogação",color:"bg-purple-500 hover:bg-purple-600 border-purple-200"},{type:"INICIO_SEGUNDO_TEMPO_PRORROGACAO",icon:jsxRuntimeExports.jsx(Clock,{className:"w-6 h-6"}),description:"Arte para o segundo tempo da prorrogação",color:"bg-indigo-500 hover:bg-indigo-600 border-indigo-200"},{type:"GOL",icon:jsxRuntimeExports.jsx(Target,{className:"w-6 h-6"}),description:"Arte para comemorar um gol",color:"bg-yellow-500 hover:bg-yellow-600 border-yellow-200"},{type:"SUBSTITUICAO",icon:jsxRuntimeExports.jsx(ArrowLeftRight,{className:"w-6 h-6"}),description:"Arte para mostrar substituições",color:"bg-cyan-500 hover:bg-cyan-600 border-cyan-200"}];return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-2",children:"Tipo de Arte"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Escolha o momento da partida que deseja destacar"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(i=>jsxRuntimeExports.jsxs("button",{onClick:()=>e(i.type),disabled:i.disabled,className:`
              relative p-4 rounded-lg border-2 transition-all duration-200 text-left
              ${t===i.type?`${i.color} text-white shadow-lg transform scale-105`:"bg-white hover:bg-gray-50 border-gray-200 hover:border-gray-300"}
              ${i.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer hover:shadow-md"}
            `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:`
                p-2 rounded-lg
                ${t===i.type?"bg-white/20":"bg-gray-100"}
              `,children:jsxRuntimeExports.jsx("div",{className:t===i.type?"text-white":"text-gray-600",children:i.icon})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:`
                  font-display-semibold mb-1
                  ${t===i.type?"text-white":"text-gray-800"}
                `,children:GAME_ART_LABELS[i.type]}),jsxRuntimeExports.jsx("p",{className:`
                  text-sm font-display
                  ${t===i.type?"text-white/90":"text-gray-600"}
                `,children:i.description})]})]}),t===i.type&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})})}),i.disabled&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gray-100/50 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-gray-500 bg-white px-2 py-1 rounded",children:"Em breve"})})]},i.type))}),t&&jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800 mb-2",children:"Tipo Selecionado"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 font-display",children:[GAME_ART_LABELS[t]," -"," ",(s=n.find(i=>i.type===t))==null?void 0:s.description]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 font-display text-center",children:"Cada tipo de arte tem seu próprio acabamento e estilo visual"})]})};function Input({className:t,type:e,...n}){return jsxRuntimeExports.jsx("input",{type:e,"data-slot":"input",className:cn("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var NAME="Label",Label$1=reactExports.forwardRef((t,e)=>jsxRuntimeExports.jsx(Primitive.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Label$1.displayName=NAME;var Root$1=Label$1;function Label({className:t,...e}){return jsxRuntimeExports.jsx(Root$1,{"data-slot":"label",className:cn("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function usePrevious(t){const e=reactExports.useRef({value:t,previous:t});return reactExports.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var SWITCH_NAME="Switch",[createSwitchContext,createSwitchScope]=createContextScope(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch$1=reactExports.forwardRef((t,e)=>{const{__scopeSwitch:n,name:s,checked:i,defaultChecked:o,required:l,disabled:u,value:d="on",onCheckedChange:f,form:m,...g}=t,[y,v]=reactExports.useState(null),E=useComposedRefs(e,V=>v(V)),w=reactExports.useRef(!1),A=y?m||!!y.closest("form"):!0,[I,D]=useControllableState({prop:i,defaultProp:o??!1,onChange:f,caller:SWITCH_NAME});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:n,checked:I,disabled:u,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":I,"aria-required":l,"data-state":getState(I),"data-disabled":u?"":void 0,disabled:u,value:d,...g,ref:E,onClick:composeEventHandlers(t.onClick,V=>{D(Y=>!Y),A&&(w.current=V.isPropagationStopped(),w.current||V.stopPropagation())})}),A&&jsxRuntimeExports.jsx(SwitchBubbleInput,{control:y,bubbles:!w.current,name:s,value:d,checked:I,required:l,disabled:u,form:m,style:{transform:"translateX(-100%)"}})]})});Switch$1.displayName=SWITCH_NAME;var THUMB_NAME="SwitchThumb",SwitchThumb=reactExports.forwardRef((t,e)=>{const{__scopeSwitch:n,...s}=t,i=useSwitchContext(THUMB_NAME,n);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})});SwitchThumb.displayName=THUMB_NAME;var BUBBLE_INPUT_NAME="SwitchBubbleInput",SwitchBubbleInput=reactExports.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:s=!0,...i},o)=>{const l=reactExports.useRef(null),u=useComposedRefs(l,o),d=usePrevious(n),f=useSize(e);return reactExports.useEffect(()=>{const m=l.current;if(!m)return;const g=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(g,"checked").set;if(d!==n&&v){const E=new Event("click",{bubbles:s});v.call(m,n),m.dispatchEvent(E)}},[d,n,s]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:u,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});SwitchBubbleInput.displayName=BUBBLE_INPUT_NAME;function getState(t){return t?"checked":"unchecked"}var Root=Switch$1,Thumb=SwitchThumb;function Switch({className:t,...e}){return jsxRuntimeExports.jsx(Root,{"data-slot":"switch",className:cn("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:jsxRuntimeExports.jsx(Thumb,{"data-slot":"switch-thumb",className:cn("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const ScoreEditor=({selectedMatch:t,homeScore:e,awayScore:n,showPenalties:s,homePenaltyScore:i,awayPenaltyScore:o,onHomeScoreChange:l,onAwayScoreChange:u,onShowPenaltiesChange:d,onHomePenaltyScoreChange:f,onAwayPenaltyScoreChange:m})=>t?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-4",children:"Editar Placar"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 font-display mb-6",children:[t.teams.home.name," vs ",t.teams.away.name]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"homeScore",className:"font-display-medium",children:t.teams.home.name}),jsxRuntimeExports.jsx(Input,{id:"homeScore",type:"number",min:"0",value:e,onChange:g=>l(g.target.value),placeholder:"0",className:"text-center text-lg font-display-semibold"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"awayScore",className:"font-display-medium",children:t.teams.away.name}),jsxRuntimeExports.jsx(Input,{id:"awayScore",type:"number",min:"0",value:n,onChange:g=>u(g.target.value),placeholder:"0",className:"text-center text-lg font-display-semibold"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label,{className:"font-display-medium",children:"Disputa de Pênaltis"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Ativar para incluir o placar dos pênaltis"})]}),jsxRuntimeExports.jsx(Switch,{checked:s,onCheckedChange:d})]}),s&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"homePenaltyScore",className:"font-display-medium text-yellow-800",children:["Pênaltis - ",t.teams.home.name]}),jsxRuntimeExports.jsx(Input,{id:"homePenaltyScore",type:"number",min:"0",value:i,onChange:g=>f(g.target.value),placeholder:"0",className:"text-center text-lg font-display-semibold border-yellow-300 focus:border-yellow-500"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"awayPenaltyScore",className:"font-display-medium text-yellow-800",children:["Pênaltis - ",t.teams.away.name]}),jsxRuntimeExports.jsx(Input,{id:"awayPenaltyScore",type:"number",min:"0",value:o,onChange:g=>m(g.target.value),placeholder:"0",className:"text-center text-lg font-display-semibold border-yellow-300 focus:border-yellow-500"})]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 font-display text-center",children:"Os valores inseridos aqui serão usados na geração da imagem final"})]}):null,SimplePlayerSelector=({selectedPlayer:t,selectedPlayerImageUrl:e,selectedPlayerImgIndex:n,onPlayerSelect:s,placeholder:i="Selecione um jogador",showImageSelector:o=!0,filterFunction:l})=>{var I;const{players:u}=useSquad(),[d,f]=reactExports.useState(""),[m,g]=reactExports.useState(!1),[y,v]=reactExports.useState([]);reactExports.useEffect(()=>{let D=u.filter(V=>V.name.toLowerCase().includes(d.toLowerCase())||V.number.toString().includes(d));l&&(D=D.filter(l)),v(D)},[u,d,l]);const E=D=>{s(D,null,null),g(!1),f("")},w=()=>{s(null,null,null),f("")},A=(D,V)=>{t&&s(t,D,V)};return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"relative",children:t?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-cyan-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(User,{className:"w-5 h-5 text-cyan-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-semibold text-gray-800",children:t.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 font-display",children:["#",t.number," • ",t.position]})]})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:w,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]}):jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx(Input,{type:"text",placeholder:i,value:d,onChange:D=>{f(D.target.value),g(!0)},onFocus:()=>g(!0),className:"pl-10 font-display"})]}),m&&jsxRuntimeExports.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:y.length>0?y.map(D=>jsxRuntimeExports.jsx("button",{onClick:()=>E(D),className:"w-full text-left p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-cyan-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-xs font-display-semibold text-cyan-600",children:D.number})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-semibold text-gray-800",children:D.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:D.position})]})]})},D.id)):jsxRuntimeExports.jsx("div",{className:"p-3 text-center text-gray-500 font-display",children:d?"Nenhum jogador encontrado":"Digite para buscar jogadores"})})]})}),o&&t&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800",children:"Selecionar Imagem do Jogador"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:((I=t.imgUrl)==null?void 0:I.map((D,V)=>jsxRuntimeExports.jsxs("button",{onClick:()=>A(D,V),className:`
                  relative aspect-square rounded-lg overflow-hidden border-2 transition-all
                  ${n===V?"border-cyan-500 ring-2 ring-cyan-200":"border-gray-200 hover:border-gray-300"}
                `,children:[jsxRuntimeExports.jsx("img",{src:D,alt:`${t.name} - Imagem ${V+1}`,className:"w-full h-full object-cover"}),n===V&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-cyan-500 bg-opacity-20 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-cyan-500 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})]},V)))||jsxRuntimeExports.jsx("div",{className:"col-span-full text-center py-8 text-gray-500 font-display",children:"Nenhuma imagem disponível para este jogador"})})]}),m&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-5",onClick:()=>g(!1)})]})},GoalPlayerSelector=({selectedPlayer:t,selectedPlayerImageUrl:e,selectedPlayerImgIndex:n,onPlayerSelect:s})=>jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-2",children:"Selecionar Jogador"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Escolha o jogador que marcou o gol"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-green-800",children:"Autor do Gol"})]}),jsxRuntimeExports.jsx(SimplePlayerSelector,{selectedPlayer:t,selectedPlayerImageUrl:e,selectedPlayerImgIndex:n,onPlayerSelect:s,placeholder:"Selecione o jogador que marcou o gol",showImageSelector:!0})]}),t&&jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800 mb-2",children:"Resumo da Seleção"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[e&&jsxRuntimeExports.jsx("img",{src:e,alt:t.name,className:"w-12 h-12 rounded-full object-cover border-2 border-green-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-display-semibold text-gray-800",children:t.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 font-display",children:["#",t.number," • ",t.position]})]})]}),e&&jsxRuntimeExports.jsx("p",{className:"text-xs text-green-600 font-display mt-2",children:"✓ Imagem selecionada para a arte"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 font-display text-center",children:"O jogador selecionado aparecerá destacado na imagem final"})]}),SubstitutionsManager=({substitutions:t,onSubstitutionsChange:e})=>{const[n,s]=reactExports.useState(t);reactExports.useEffect(()=>{s(t)},[t]);const i=y=>{const v=[];return n.forEach((E,w)=>{y!==void 0&&w===y||(E.playerOut&&v.push(E.playerOut),E.playerIn&&v.push(E.playerIn))}),v},o=(y,v)=>i(v).some(w=>w.id===y.id),l=()=>{if(n.length>=5)return;const y={},v=[...n,y];s(v)},u=y=>{const v=n.filter((E,w)=>w!==y);s(v),e(v)},d=(y,v)=>{const E=[...n];if(v)E[y]={...E[y],playerOut:v};else{const{playerOut:w,...A}=E[y];E[y]=A}s(E),e(E)},f=(y,v)=>{const E=[...n];if(v)E[y]={...E[y],playerIn:v};else{const{playerIn:w,...A}=E[y];E[y]=A}s(E),e(E)},m=(y,v,E)=>{var w,A,I,D;return!(o(y,v)||E&&((A=(w=n[v])==null?void 0:w.playerIn)==null?void 0:A.id)===y.id||!E&&((D=(I=n[v])==null?void 0:I.playerOut)==null?void 0:D.id)===y.id)},g=()=>n.filter(y=>y.playerOut&&y.playerIn);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-2",children:"Gerenciar Substituições"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Adicione até 5 substituições para a imagem"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:n.map((y,v)=>jsxRuntimeExports.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("h4",{className:"font-display-semibold text-gray-800",children:["Substituição ",v+1]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>u(v),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-red-700",children:"Sai de campo"})]}),jsxRuntimeExports.jsx(SimplePlayerSelector,{selectedPlayer:y.playerOut||null,selectedPlayerImageUrl:null,selectedPlayerImgIndex:null,onPlayerSelect:E=>d(v,E),placeholder:"Selecione quem sai",showImageSelector:!1,filterFunction:E=>m(E,v,!0)})]}),jsxRuntimeExports.jsx("div",{className:"hidden md:flex items-center justify-center",children:jsxRuntimeExports.jsx(ArrowLeftRight,{className:"w-6 h-6 text-gray-400"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-display-medium text-green-700",children:"Entra em campo"})]}),jsxRuntimeExports.jsx(SimplePlayerSelector,{selectedPlayer:y.playerIn||null,selectedPlayerImageUrl:null,selectedPlayerImgIndex:null,onPlayerSelect:E=>f(v,E),placeholder:"Selecione quem entra",showImageSelector:!1,filterFunction:E=>m(E,v,!1)})]})]}),y.playerOut&&y.playerIn&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700 font-display",children:["✓ Substituição válida: ",y.playerOut.name," →"," ",y.playerIn.name]})]},v))}),n.length<5&&jsxRuntimeExports.jsxs(Button,{onClick:l,variant:"outline",className:"w-full border-dashed border-2 border-gray-300 hover:border-gray-400 text-gray-600 hover:text-gray-700",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Adicionar Substituição (",n.length,"/5)"]}),g().length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-display-semibold text-gray-800 mb-2",children:"Resumo das Substituições"}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:g().map((y,v)=>jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 font-display",children:[v+1,". ",y.playerOut.name," → ",y.playerIn.name]},v))}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-gray-500 font-display",children:[g().length," de ",n.length," ","substituições completas"]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 font-display text-center",children:"Cada jogador só pode participar de uma substituição por imagem"})]})},initialImageGeneratorConfigs={quadrada:{canvasWidth:1080,canvasHeight:1080,logoX:931,logoY:61,logoSize:123,placarX:80,placarY:565,placarSize:930,stadiumTextX:1080/2,stadiumTextY:40,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1080,userBackgroundImgHeight:1080,jogadorX:121,jogadorY:85,jogadorSize:900,motmTextX:540,motmTextY:195,motmTextSize:1,playerNumberX:900,playerNumberY:300,playerNumberSize:1,substitutionsX:175,substitutionsY:200,substitutionsWidth:880,substitutionsHeight:400},vertical:{canvasWidth:1080,canvasHeight:1920,logoX:865,logoY:203,logoSize:175,placarX:115,placarY:923,placarSize:875,stadiumTextX:1080/2,stadiumTextY:185,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1080,userBackgroundImgHeight:1920,jogadorX:105,jogadorY:300,jogadorSize:1025,motmTextX:540,motmTextY:365,motmTextSize:1,playerNumberX:900,playerNumberY:470,playerNumberSize:1,substitutionsX:190,substitutionsY:430,substitutionsWidth:880,substitutionsHeight:500},horizontal:{canvasWidth:1920,canvasHeight:1080,logoX:1761,logoY:31,logoSize:123,placarX:850,placarY:-40,placarSize:450,stadiumTextX:1920/2,stadiumTextY:40,userBackgroundImgX:0,userBackgroundImgY:0,userBackgroundImgWidth:1920,userBackgroundImgHeight:1080,jogadorX:647,jogadorY:100,jogadorSize:900,motmTextX:960,motmTextY:880,motmTextSize:1,playerNumberX:30,playerNumberY:1005,playerNumberSize:1,substitutionsX:200,substitutionsY:200,substitutionsWidth:1520,substitutionsHeight:400}},GameArtGenerator=({onBack:t,translations:e,setCurrentView:n,setIsMenuOpen:s})=>{var he,Pe,ze,$e,vt;const{currentUserData:i}=useUser(),{baseImages:o}=useImages(),[l,u]=reactExports.useState(initialImageGeneratorConfigs),d=reactExports.useRef(null),f=reactExports.useRef(null),m=reactExports.useRef(null),g=reactExports.useRef(null),[y,v]=reactExports.useState(["background","acabamento","logo","info","nome","numero","jogador","substituicoes","placar"]),[E,w]=reactExports.useState(null),[A,I]=reactExports.useState("quadrada"),[D,V]=reactExports.useState(null),Y=reactExports.useRef(null),j={primary:"#ffffff"},[H,S]=reactExports.useState(1),[T,P]=reactExports.useState(!1),[U,J]=reactExports.useState(!1),[W,K]=reactExports.useState({matchData:null,gameArt:null,featuredPlayer:null,featuredPlayerImageUrl:null,featuredPlayerImgIndex:null,artType:null,homeScore:"",awayScore:"",showPenalties:!1,homePenaltyScore:"",awayPenaltyScore:"",userBackgroundImg:null,userBackgroundImgAspectRatio:null}),ge=(()=>{const ve=[{id:1,title:"Dados da Partida",icon:Calendar,description:"Selecione a partida"},{id:2,title:"Tipo de Arte",icon:Palette,description:"Escolha o momento do jogo"}];return W.artType==="GOL"?[...ve,{id:3,title:"Jogador",icon:Palette,description:"Selecione o autor do gol"},{id:4,title:"Placar",icon:Palette,description:"Configure o placar"},{id:5,title:"Gerar Imagem",icon:Image$1,description:"Ajuste e gere a imagem"}]:W.artType==="SUBSTITUICAO"?[...ve,{id:3,title:"Substituições",icon:Palette,description:"Configure as substituições"},{id:4,title:"Placar",icon:Palette,description:"Configure o placar"},{id:5,title:"Gerar Imagem",icon:Image$1,description:"Ajuste e gere a imagem"}]:[...ve,{id:3,title:"Placar",icon:Palette,description:"Configure o placar"},{id:4,title:"Fundo",icon:Upload,description:"Upload da imagem de fundo"},{id:5,title:"Gerar Imagem",icon:Image$1,description:"Ajuste e gere a imagem"}]})(),[oe,ce]=reactExports.useState(!1),ie=ve=>{var xe;switch(ve){case 2:return oe;case 3:return!!W.artType;case 4:return W.artType==="GOL"?!!((xe=W.goal)!=null&&xe.scorer):W.artType==="SUBSTITUICAO"?!!W.substitutions&&W.substitutions.length>0:!0;case 5:return W.artType==="GOL"||W.artType==="SUBSTITUICAO",!0;case 6:return W.artType==="GOL"||W.artType==="SUBSTITUICAO"?!0:!!W.userBackgroundImg;default:return!0}},Ne=()=>{H===1&&Y.current&&!Y.current.canProceed&&!Y.current.submitManualData()||S(ve=>ve+1)},re=ve=>{const xe=new Date(ve.fixture.date),Ue=convertToSaoPauloTime(xe),Oe={homeTeam:"Liverpool",awayTeam:"Adversário",competition:formatCompetitionRound(ve,e),matchDate:new Date().toISOString().split("T")[0],matchTime:"16:00",venue:ve.fixture.venue.name||"Estádio não informado",matchday:"",stage:"",referee:ve.fixture.referee||"",stadium:ve.fixture.venue.name||"Estádio não informado",date:formatDateToBrazilian(Ue),competitionRound:formatCompetitionRound(ve,e)};V(ve),K(Me=>{var Ze,He,qe,Xe,et,Kt,It,Bt,Et,mn,Nt,Gt,un,pt;return{...Me,matchData:Oe,homeScore:((He=(Ze=ve.goals)==null?void 0:Ze.home)==null?void 0:He.toString())||"",awayScore:((Xe=(qe=ve.goals)==null?void 0:qe.away)==null?void 0:Xe.toString())||"",showPenalties:((Kt=(et=ve.score)==null?void 0:et.penalty)==null?void 0:Kt.home)!=null&&((Bt=(It=ve.score)==null?void 0:It.penalty)==null?void 0:Bt.away)!=null,homePenaltyScore:((Nt=(mn=(Et=ve.score)==null?void 0:Et.penalty)==null?void 0:mn.home)==null?void 0:Nt.toString())||"",awayPenaltyScore:((pt=(un=(Gt=ve.score)==null?void 0:Gt.penalty)==null?void 0:un.away)==null?void 0:pt.toString())||""}})},_e=ve=>{console.log("🎨 handleArtTypeSelect: Tipo de arte selecionado",ve),K(xe=>({...xe,artType:ve})),ve!=="GOL"&&K(xe=>({...xe,goal:void 0})),ve!=="SUBSTITUICAO"&&K(xe=>({...xe,substitutions:void 0}))},Se=(ve,xe,Ue)=>{console.log("👤 handleGoalPlayerSelect: Jogador selecionado",ve==null?void 0:ve.name),K(Oe=>({...Oe,goal:{scorer:ve,scorerImageUrl:xe,scorerImgIndex:Ue}}))},Re=ve=>{console.log("🔄 handleSubstitutionsChange: Substituições alteradas",ve.length),K(xe=>({...xe,substitutions:ve}))},Be=ve=>{var Oe;const xe=(Oe=ve.target.files)==null?void 0:Oe[0];if(!xe)return;const Ue=new FileReader;Ue.onloadend=()=>{const Me=new Image;Me.onload=()=>{K(Ze=>({...Ze,userBackgroundImg:Ue.result,userBackgroundImgAspectRatio:Me.width/Me.height}))},Me.src=Ue.result},Ue.readAsDataURL(xe)};reactExports.useEffect(()=>{if(!W.userBackgroundImg||!W.userBackgroundImgAspectRatio)return;const ve=W.userBackgroundImgAspectRatio,xe=l[A];let Ue;A==="vertical"?Ue=1550:Ue=xe.canvasHeight;const Oe=Ue*ve,Me=(xe.canvasWidth-Oe)/2,Ze=(xe.canvasHeight-Ue)/2;u(He=>({...He,[A]:{...He[A],userBackgroundImgWidth:Oe,userBackgroundImgHeight:Ue,userBackgroundImgX:Me,userBackgroundImgY:Ze}}))},[W.userBackgroundImg,W.userBackgroundImgAspectRatio,A]);const Ie=reactExports.useCallback(ve=>new Promise((xe,Ue)=>{const Oe=new Image;Oe.crossOrigin="anonymous",Oe.onload=()=>xe(Oe),Oe.onerror=()=>Ue(new Error(`Falha ao carregar imagem: ${ve}`)),Oe.src=ve}),[]),je=reactExports.useCallback(async(ve,xe,Ue)=>{var Ze,He,qe,Xe,et,Kt,It,Bt,Et,mn,Nt,Gt,un;await document.fonts.load("1em Lovers Quarrel"),await document.fonts.load("900 1em Montserrat"),await document.fonts.ready;const Oe=ve.current;if(!Oe)return;const Me=Oe.getContext("2d");if(Me){Oe.width=xe.canvasWidth,Oe.height=xe.canvasHeight,Me.clearRect(0,0,Oe.width,Oe.height);for(const pt of Ue)if(pt==="background"&&W.userBackgroundImg)try{const Qe=await Ie(W.userBackgroundImg);Me.drawImage(Qe,xe.userBackgroundImgX,xe.userBackgroundImgY,xe.userBackgroundImgWidth,xe.userBackgroundImgHeight)}catch(Qe){console.error(Qe)}else if(pt==="acabamento"&&W.artType)try{const Qe=GAME_ART_TO_IMAGE_SECTION[W.artType],Dn=(Ze=o.find(Pn=>Pn.type===A&&Pn.section===Qe))==null?void 0:Ze.url;if(Dn){const Pn=await Ie(Dn);Me.drawImage(Pn,0,0,Oe.width,Oe.height)}}catch(Qe){console.warn(`❌ drawLayer [${W.artType}]: Erro ao renderizar acabamento`,Qe)}else if(pt==="placar"){if(g.current){P(!0);try{const Qe=await domtoimage.toPng(g.current,{quality:1,bgcolor:void 0}),Dn=new Image;Dn.src=Qe,await new Promise((Pn,Wt)=>{Dn.onload=()=>Pn(),Dn.onerror=On=>Wt(On)}),Me.drawImage(Dn,xe.placarX,xe.placarY,xe.placarSize,xe.placarSize*(720/1280)),J(!0)}catch(Qe){console.error("Erro ao renderizar SplitRectangleDisplay para imagem:",Qe)}finally{P(!1)}}}else if(pt==="logo")try{const Qe=await Ie("/caminhantes-clock.png");Me.drawImage(Qe,xe.logoX,xe.logoY,xe.logoSize,xe.logoSize)}catch(Qe){console.error(Qe)}else if(pt==="info"&&W.matchData){Me.fillStyle=j.primary,Me.font='800 24px "Funnel Display", Arial, sans-serif',Me.textAlign="center";const Qe=`${W.matchData.stadium.toUpperCase()} - ${W.matchData.competitionRound.toUpperCase()}`;Me.fillText(Qe,xe.stadiumTextX,xe.stadiumTextY)}else if(pt==="jogador"&&W.artType==="GOL")if(console.log(`👤 drawLayer [${(He=W.goal)==null?void 0:He.scorerImageUrl}]: Renderizando imagem do jogador`),(qe=W.goal)!=null&&qe.scorerImageUrl)try{const Qe=await Ie(W.goal.scorerImageUrl),Dn=1062/666,Pn=xe.jogadorSize||900,Wt=Pn*Dn;Me.drawImage(Qe,xe.jogadorX||0,xe.jogadorY||0,Pn,Wt),console.log(`✅ drawLayer [${(Xe=W.goal)==null?void 0:Xe.scorerImageUrl}]: Imagem do jogador renderizada`)}catch(Qe){console.error(`❌ drawLayer [${(et=W.goal)==null?void 0:et.scorerImageUrl}]: Erro ao renderizar imagem do jogador`,Qe)}else try{const Qe=await Ie("https://i.ibb.co/zHQTjFZ2/Mighty-Red-png.png"),Dn=1062/666,Pn=xe.jogadorSize||900,Wt=Pn*Dn;Me.drawImage(Qe,xe.jogadorX||0,xe.jogadorY||0,Pn,Wt),console.log(`✅ drawLayer [${(Kt=W.goal)==null?void 0:Kt.scorerImageUrl}]: Imagem do Mighty Red renderizada`)}catch(Qe){console.error(`❌ drawLayer [${(It=W.goal)==null?void 0:It.scorerImageUrl}]: Erro ao renderizar imagem do Mighty Red`,Qe)}else if(pt==="nome"&&((Bt=W.goal)!=null&&Bt.scorer)){console.log(`📝 drawLayer [${(Et=W.goal)==null?void 0:Et.scorer.name}]: Renderizando nome do jogador: ${W.goal.scorer.name}`),Me.textAlign="center";const Qe=xe.motmTextSize||1;Me.fillStyle=j.primary,Me.shadowColor="rgba(0, 0, 0, 0.5)",Me.shadowOffsetX=5*Qe,Me.shadowOffsetY=5*Qe,Me.shadowBlur=5*Qe,Me.font=`500 ${300*Qe}px "Lovers Quarrel", sans-serif`,Me.fillText(W.goal.scorer.name,xe.motmTextX||0,xe.motmTextY||0),Me.shadowColor="transparent",Me.shadowOffsetX=0,Me.shadowOffsetY=0,Me.shadowBlur=0,console.log(`✅ drawLayer [${(mn=W.goal)==null?void 0:mn.scorer.name}]: Nome do jogador renderizado`)}else if(pt==="numero"&&((Nt=W.goal)!=null&&Nt.scorer)){console.log(`🔢 drawLayer [${(Gt=W.goal)==null?void 0:Gt.scorer.number}]: Renderizando número do jogador: #${W.goal.scorer.number}`),Me.textAlign="center";const Qe=xe.playerNumberSize||1;Me.fillStyle=j.primary,Me.shadowColor="rgba(0, 0, 0, 0.75)",Me.shadowOffsetX=5*Qe,Me.shadowOffsetY=5*Qe,Me.shadowBlur=10*Qe,Me.font=`400 ${80*Qe}px "Lovers Quarrel", sans-serif`,Me.fillText(`#${W.goal.scorer.number.toUpperCase()}`,xe.playerNumberX||0,xe.playerNumberY||0),console.log(`✅ drawLayer [${(un=W.goal)==null?void 0:un.scorer.number}]: Número do jogador renderizado`)}else if(pt==="substituicoes"&&W.substitutions&&W.substitutions.length>0){console.log(`🔄 drawLayer [substituições]: Renderizando ${W.substitutions.length} substituições`);const Qe=xe.substitutionsX||175,Pn=xe.substitutionsY||200,Wt=600,On=1.3;let Fn=44,Tn=Fn*4.5,Nn=Fn*On;const Mn=W.substitutions.length*Tn;if(Mn>Wt){const Dt=Wt/Mn;Fn*=Dt,Tn*=Dt,Nn*=Dt}const gs=W.substitutions.length*Tn-(Tn-Nn),Ct=Pn+(Wt-gs)/2;Me.font=`600 ${Fn}px "Funnel Display", Arial, sans-serif`,Me.textAlign="left",W.substitutions.forEach((Dt,pn)=>{if(Dt.playerOut&&Dt.playerIn){const Sn=Ct+pn*Tn;Me.fillStyle="#ef4444",Me.fillText("←",Qe,Sn),Me.fillStyle=j.primary,Me.fillText(`${Dt.playerOut.name} (#${Dt.playerOut.number})`,Qe+Fn*2.3,Sn),Me.fillStyle="#22c55e",Me.fillText("→",Qe,Sn+Nn),Me.fillStyle=j.primary,Me.fillText(`${Dt.playerIn.name} (#${Dt.playerIn.number})`,Qe+Fn*2.3,Sn+Nn)}})}}},[W,o,j.primary,A,Ie]),Te=reactExports.useCallback(()=>{if(H!==se||!d.current||!f.current||!m.current)return;P(!0);const ve=l[A],xe=E?y.indexOf(E):-1,Ue=xe>-1?y.slice(0,xe):y,Oe=xe>-1?[y[xe]]:[],Me=xe>-1?y.slice(xe+1):[];Promise.all([je(d,ve,Ue),je(f,ve,Oe),je(m,ve,Me)]).then(()=>{P(!1),J(!0)}).catch(Ze=>{console.error("Erro ao desenhar camadas:",Ze),P(!1)})},[H,l,A,E,y,je]);reactExports.useEffect(()=>{Te()},[Te]),reactExports.useEffect(()=>{if(H!==3||!E||!(f!=null&&f.current))return;const ve=l[A];je(f,ve,[E])},[l,E,A,H,je]);const ke=()=>{const ve=document.createElement("canvas"),xe=l[A];ve.width=xe.canvasWidth,ve.height=xe.canvasHeight;const Ue=ve.getContext("2d");if(!Ue||!d.current||!f.current||!m.current)return;Ue.drawImage(d.current,0,0),Ue.drawImage(f.current,0,0),Ue.drawImage(m.current,0,0);const Oe=document.createElement("a");Oe.href=ve.toDataURL("image/png"),Oe.download=`${A}_placar_final.png`,Oe.click()},Ge=(ve,xe)=>{E&&u(Ue=>{let Oe;E==="nome"?Oe="motmText":E==="numero"?Oe="playerNumber":E==="substituicoes"?Oe="substitutions":Oe=E;const Me=Oe==="background"?"userBackgroundImgX":`${Oe}X`,Ze=Oe==="background"?"userBackgroundImgY":`${Oe}Y`,He={...Ue[A]};return ve==="x"&&Me in He?He[Me]+=xe:ve==="y"&&Ze in He&&(He[Ze]+=xe),{...Ue,[A]:He}})},we=ve=>{E&&u(xe=>{let Ue;E==="nome"?Ue="motmText":E==="numero"?Ue="playerNumber":E==="substituicoes"?Ue="substitutions":Ue=E;const Oe=`${Ue}Size`,Me=Ue==="background"?"userBackgroundImgWidth":`${Ue}Width`,Ze=Ue==="background"?"userBackgroundImgHeight":`${Ue}Height`,He={...xe[A]};if(Oe in He&&typeof He[Oe]=="number")Oe==="playerNumberSize"||Oe==="motmTextSize"?He[Oe]+=ve/100:He[Oe]+=ve;else if(Me in He&&typeof He[Me]=="number"){const qe=He[Ze]/He[Me]||1;He[Me]+=ve,He[Ze]=He[Me]*qe}return{...xe,[A]:He}})},de=ve=>{ie(ve)&&S(ve)},me=async()=>{if(g.current)try{const ve=await domtoimage.toPng(g.current,{quality:1,bgcolor:void 0}),xe=document.createElement("a");xe.download="placar.png",xe.href=ve,xe.click()}catch(ve){console.error("Erro ao gerar PNG do SplitRectangleDisplay:",ve)}},ue=()=>{if(!W.artType)return"fimDeJogo";switch(W.artType){case"INICIO_JOGO":return"inicioJogo";case"INTERVALO":return"intervalo";case"INICIO_SEGUNDO_TEMPO":return"inicioSegundoTempo";case"INICIO_PRORROGACAO":return"inicioProrrogacao";case"INICIO_SEGUNDO_TEMPO_PRORROGACAO":return"inicioSegundoTempoProrrogacao";case"FIM_DE_JOGO":return"fimDeJogo";case"GOL":return"gol";case"SUBSTITUICAO":return"substituicao";default:return"fimDeJogo"}},se=ge[ge.length-1].id;return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[jsxRuntimeExports.jsx(SectionHeader,{onBack:t,setCurrentView:n,setIsMenuOpen:s,title:"Artes do Jogo"}),D&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:jsxRuntimeExports.jsx("div",{ref:g,style:{width:"1290px",height:"327px"},children:jsxRuntimeExports.jsx(SplitRectangleDisplay,{selectedMatch:D,awayPenScore:W.awayPenaltyScore===""?null:+W.awayPenaltyScore,awayScore:W.awayScore===""?null:+W.awayScore,homePenScore:W.homePenaltyScore===""?null:+W.homePenaltyScore,homeScore:W.homeScore===""?null:+W.homeScore})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx(StepperResponsive,{steps:ge,currentStep:H,onStepClick:de,canAdvanceToStep:ie}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[H===1&&jsxRuntimeExports.jsx(MatchSelector,{ref:Y,onMatchSelected:re,escalacaoData:{...W,formation:null,selectedPlayers:{},reservePlayers:[],coach:""},onValidationChange:ce,translations:e,pastMatches:!0,includeTheOne:!0}),H===2&&jsxRuntimeExports.jsx(GameArtTypeSelector,{selectedArtType:W.artType,onArtTypeSelect:_e}),H===3&&W.artType==="GOL"&&jsxRuntimeExports.jsx(GoalPlayerSelector,{selectedPlayer:((he=W.goal)==null?void 0:he.scorer)||null,selectedPlayerImageUrl:((Pe=W.goal)==null?void 0:Pe.scorerImageUrl)||null,selectedPlayerImgIndex:((ze=W.goal)==null?void 0:ze.scorerImgIndex)||null,onPlayerSelect:Se}),H===3&&W.artType==="SUBSTITUICAO"&&jsxRuntimeExports.jsx(SubstitutionsManager,{substitutions:W.substitutions||[],onSubstitutionsChange:Re}),(H===3&&W.artType&&W.artType!=="GOL"&&W.artType!=="SUBSTITUICAO"||H===4&&(W.artType==="GOL"||W.artType==="SUBSTITUICAO"))&&jsxRuntimeExports.jsx(ScoreEditor,{selectedMatch:D,homeScore:W.homeScore,awayScore:W.awayScore,showPenalties:W.showPenalties,homePenaltyScore:W.homePenaltyScore,awayPenaltyScore:W.awayPenaltyScore,onHomeScoreChange:ve=>K(xe=>({...xe,homeScore:ve})),onAwayScoreChange:ve=>K(xe=>({...xe,awayScore:ve})),onShowPenaltiesChange:ve=>K(xe=>({...xe,showPenalties:ve})),onHomePenaltyScoreChange:ve=>K(xe=>({...xe,homePenaltyScore:ve})),onAwayPenaltyScoreChange:ve=>K(xe=>({...xe,awayPenaltyScore:ve}))}),H===4&&W.artType&&W.artType!=="GOL"&&W.artType!=="SUBSTITUICAO"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-display-semibold text-gray-800 mb-2",children:"Imagem de Fundo"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-display",children:"Faça upload da imagem que será usada como fundo"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("label",{className:"cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Be,className:"hidden"}),jsxRuntimeExports.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 hover:border-gray-400 transition-colors",children:[jsxRuntimeExports.jsx(Upload,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-display",children:"Clique para selecionar uma imagem"})]})]})}),W.userBackgroundImg&&jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("img",{src:W.userBackgroundImg,alt:"Preview",className:"max-w-xs mx-auto rounded-lg shadow-md"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-green-600 font-display mt-2",children:"✓ Imagem carregada com sucesso"})]})]}),H===se&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Editar Imagem:"}),jsxRuntimeExports.jsxs("select",{value:A,onChange:ve=>I(ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"quadrada",children:"Quadrada"}),jsxRuntimeExports.jsx("option",{value:"vertical",children:"Vertical"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-display-medium text-gray-700 mb-2",children:"Elemento a ser Movido:"}),jsxRuntimeExports.jsxs("select",{value:E??"",onChange:ve=>w(ve.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Nenhum"}),y.map(ve=>jsxRuntimeExports.jsx("option",{value:ve,className:"capitalize",children:ve},ve))]})]}),E&&jsxRuntimeExports.jsx(PositionController,{elementName:E,onMove:Ge,onResize:we}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t",children:jsxRuntimeExports.jsx(LayerManager,{renderOrder:y,setRenderOrder:v})})]}),jsxRuntimeExports.jsx("div",{className:"relative md:col-span-2 w-full flex justify-center items-center bg-gray-200 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${l[A].canvasHeight/l[A].canvasWidth*100}%`},children:[d,f,m].map((ve,xe)=>jsxRuntimeExports.jsx("canvas",{ref:ve,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:xe+1}},xe))})})]}),D&&jsxRuntimeExports.jsx(PostTextGenerator,{postType:ue(),match:D,translations:e,playerName:(vt=($e=W.goal)==null?void 0:$e.scorer)==null?void 0:vt.name,substitutions:W.substitutions}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center space-x-4 gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:Te,disabled:T,className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer",children:T?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader,{className:"w-4 h-4 mr-2 animate-spin"})," ","Gerando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4 mr-2"})," Gerar Imagem"]})}),U&&jsxRuntimeExports.jsxs(Button,{onClick:ke,disabled:T,variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"})," Download"]}),i&&i.role==="root"&&jsxRuntimeExports.jsxs(Button,{onClick:me,variant:"default",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),"Baixar Arte 'Placar' (PNG)"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${H===1?"justify-end":"justify-between"} mt-6`,children:[H>1&&jsxRuntimeExports.jsxs(Button,{onClick:()=>S(ve=>ve-1),variant:"outline",className:"cursor-pointer",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"})," Anterior"]}),H<se&&jsxRuntimeExports.jsxs(Button,{onClick:Ne,disabled:!ie(H+1),className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer",children:["Próximo ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]})},HomePage=()=>{const{currentUser:t,logout:e}=useAuth(),{currentUserData:n}=useUser(),{setIsMenuOpen:s}=useGlobal(),{showConfirmDialog:i}=useConfirmDialog(),[o,l]=reactExports.useState("home"),{translations:u}=useRoundTranslations(),d=async()=>{await i({title:"Confirmar logout",text:"Tem certeza que deseja sair?",icon:"question",confirmButtonText:"Sair",cancelButtonText:"Cancelar"})&&await e()},f=()=>{var w,A;const v=new Date().getHours(),E=((w=n==null?void 0:n.name)==null?void 0:w.split(" ")[0])||((A=t==null?void 0:t.displayName)==null?void 0:A.split(" ")[0])||"Usuário";return v<12?`Bom dia, ${E}! 🌅`:v<18?`Boa tarde, ${E}! ☀️`:`Boa noite, ${E}! 🌙`},m=v=>{l(v)},y=getVisibleNavItems(n).filter(v=>v.isCard&&v.colorClasses&&v.lucideIcon);return o==="admin"?jsxRuntimeExports.jsx(AdminDashboard,{onBack:()=>l("home"),onNavigate:m,onLogout:d}):o==="escalacoes"?jsxRuntimeExports.jsx(EscalacaoGenerator,{translations:u,onBack:()=>l("home"),setCurrentView:l,setIsMenuOpen:s}):o==="matchday"?jsxRuntimeExports.jsx(MatchDayGenerator,{translations:u,onBack:()=>l("home"),setCurrentView:l,setIsMenuOpen:s}):o==="nextGame"?jsxRuntimeExports.jsx(NextGameGenerator,{translations:u,onBack:()=>l("home"),setCurrentView:l,setIsMenuOpen:s}):o==="motm"?jsxRuntimeExports.jsx(MotmGenerator,{translations:u,onBack:()=>l("home"),setCurrentView:l,setIsMenuOpen:s}):o==="fullTime"?jsxRuntimeExports.jsx(FullTimeGenerator,{translations:u,onBack:()=>l("home"),setCurrentView:l,setIsMenuOpen:s}):o==="confronto"?jsxRuntimeExports.jsx(ConfrontoGenerator,{translations:u,onBack:()=>l("home"),setCurrentView:l,setIsMenuOpen:s}):o==="gameArt"?jsxRuntimeExports.jsx(GameArtGenerator,{translations:u,onBack:()=>l("home"),setCurrentView:l,setIsMenuOpen:s}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex flex-col",children:[jsxRuntimeExports.jsx(SectionHeader,{setCurrentView:l,setIsMenuOpen:s,title:"Caminhantes Office"}),jsxRuntimeExports.jsxs("main",{className:"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("img",{src:caminhantesClock,alt:"Caminhantes",className:"w-20 h-20 mx-auto mb-6 drop-shadow-lg"}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-display-extrabold text-gray-800 mb-2",children:f()}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 font-display",children:"Bem-vindo ao Caminhantes Office"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto",children:[y.map(v=>jsxRuntimeExports.jsx(Card,{item:v,onClick:l,currentUserData:n},v.id)),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200 opacity-50",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx(Clock,{className:"w-8 h-8 text-gray-400"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-semibold text-gray-800 mb-2",children:"Em Breve"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4 font-display",children:"Novas aplicações serão adicionadas em breve."}),jsxRuntimeExports.jsx(Button,{disabled:!0,className:"w-full bg-gray-300 text-gray-500 cursor-not-allowed font-display-medium",children:"Em Desenvolvimento"})]})})]})]}),jsxRuntimeExports.jsx("footer",{className:"bg-white border-t border-red-100 mt-auto",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-display-semibold text-red-600 mb-2",children:'"Aqui você não caminha sozinho"'}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 font-display",children:["© ",new Date().getFullYear()," Caminhantes Office. Todos os direitos reservados."]})]})})})]})},Card=({item:t,onClick:e,currentUserData:n})=>{const{id:s,title:i,description:o,colorClasses:l,lucideIcon:u,isCard:d}=t;if(!d||!l||!u)return console.warn(`Card with ID ${s} is missing required properties for rendering as a card.`),null;const f=u,m=typeof o=="function"?o(n):o;return jsxRuntimeExports.jsx("div",{className:`bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all cursor-pointer ${l.border}`,onClick:()=>e(s),children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:`w-16 h-16 ${l.iconBg} rounded-full flex items-center justify-center mx-auto mb-4`,children:jsxRuntimeExports.jsx(f,{className:`w-8 h-8 ${l.iconColor}`})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-display-semibold text-gray-800 mb-2",children:i}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4 font-display",children:m}),jsxRuntimeExports.jsxs(Button,{className:`w-full ${l.button} text-white cursor-pointer font-display-medium`,children:[jsxRuntimeExports.jsx(f,{className:"w-4 h-4 mr-2"}),"Acessar"]})]})})};function App(){const{currentUser:t,loading:e}=useAuth();return e?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Carregando..."})]})}):t?jsxRuntimeExports.jsx(HomePage,{}):jsxRuntimeExports.jsx(LoginForm,{})}const createRootUser=async()=>{try{console.log("Criando usuário root...");const{user:t}=await createUserWithEmailAndPassword(auth,"nylodocs@gmail.com","CaminhantesSafe2024!");console.log("Usuário criado no Auth:",t.uid),await updateProfile(t,{displayName:"Nylo Santos"}),console.log("Perfil atualizado");const e={name:"Nylo Santos",email:"nylodocs@gmail.com",role:"root",active:!0,createdAt:serverTimestamp(),updatedAt:serverTimestamp(),lastLogin:serverTimestamp()};return await setDoc(doc(db,"users",t.uid),e),console.log("Documento criado no Firestore"),console.log("✅ Usuário root criado com sucesso!"),e}catch(t){throw t.code==="auth/email-already-in-use"?console.log("⚠️ Email já está em uso. Usuário pode já existir."):console.error("❌ Erro ao criar usuário root:",t),t}};window.createRootUser=createRootUser;clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(AppProviders,{children:jsxRuntimeExports.jsx(App,{})})}));
